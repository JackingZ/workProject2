(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["delivery-plan"],{"178f":function(e,t,a){},"2e84":function(e,t,a){"use strict";var i=a("5dc9"),n=a.n(i);n.a},3462:function(e,t,a){"use strict";var i=a("cb13"),n=a.n(i);n.a},3518:function(e,t,a){"use strict";var i=a("e9ca"),n=a.n(i);n.a},"3d1d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"product-page"===e.pageType?"发货计划":"product-detail"===e.pageType?"计划详情":"发货计划 -- 任务模板"}},["product-page"!==e.pageType?a("div",{attrs:{slot:"option"},slot:"option"},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:e.showProduct}},[e._v("\n            返回\n          ")])],1):e._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:"product-detail"!==e.pageType,expression:"pageType !== 'product-detail'"}],staticClass:"app-panel"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["addPlan"],expression:"['addPlan']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addProduct}},[e._v("\n              "+e._s("product-page"===e.pageType?"新增":"新增模板")+"\n            ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:22}},[a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"业务类型",size:"small",clearable:"",filterable:""},on:{focus:e.getBusinessType,change:e.onType},model:{value:e.selectValue.type,callback:function(t){e.$set(e.selectValue,"type",t)},expression:"selectValue.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"目的国"},on:{focus:e.getCountryList},model:{value:e.selectValue.countryId,callback:function(t){e.$set(e.selectValue,"countryId",t)},expression:"selectValue.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.selectValue.type,clearable:"",filterable:"",size:"small",placeholder:"服务"},on:{focus:e.getBscList,change:e.onFlight},model:{value:e.selectValue.bscId,callback:function(t){e.$set(e.selectValue,"bscId",t)},expression:"selectValue.bscId"}},e._l(e.flightList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.selectValue.bscId,clearable:"",filterable:"",size:"small",placeholder:"服务商"},on:{focus:e.getBsTransList},model:{value:e.selectValue.bscTransId,callback:function(t){e.$set(e.selectValue,"bscTransId",t)},expression:"selectValue.bscTransId"}},e._l(e.bsTransList,function(e){return a("el-option",{key:e.id,attrs:{label:e.orgName+"/"+e.serviceCode,value:e.id}})}),1),"product-page"===e.pageType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"计划状态",clearable:""},model:{value:e.selectValue.status,callback:function(t){e.$set(e.selectValue,"status",t)},expression:"selectValue.status"}},[a("el-option",{attrs:{label:"已下达",value:"0"}}),a("el-option",{attrs:{label:"已装满",value:"1"}}),a("el-option",{attrs:{label:"已完成",value:"2"}}),a("el-option",{attrs:{label:"已过期",value:"4"}}),a("el-option",{attrs:{label:"已取消",value:"3"}})],1):e._e(),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{"picker-options":e.pickerOptions,"unlink-panels":"",clearable:"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起运起始时间","end-placeholder":"起运截止时间"},model:{value:e.selectValue.shipTime,callback:function(t){e.$set(e.selectValue,"shipTime",t)},expression:"selectValue.shipTime"}}),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{"picker-options":e.pickerOptions,"unlink-panels":"",clearable:"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"截单起始时间","end-placeholder":"截单截止时间"},model:{value:e.selectValue.cutoffTime,callback:function(t){e.$set(e.selectValue,"cutoffTime",t)},expression:"selectValue.cutoffTime"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"订舱服务名称",size:"small"},model:{value:e.selectValue.bscName,callback:function(t){e.$set(e.selectValue,"bscName",t)},expression:"selectValue.bscName"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["queryPlan"],expression:"['queryPlan']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"product-template-page"!==e.pageType,expression:"pageType !== 'product-template-page'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"planTable",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{prop:"bscName",fixed:"left","min-width":"180",label:"订舱服务","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{formatter:e.dispatchFormat,width:"130",fixed:"left",label:"派件方式"}}),a("el-table-column",{attrs:{"min-width":"160",fixed:"left",label:"装载容器","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?a("span",[e._v("\n                航空版 /\n              ")]):e._e(),"1"===t.row.type||"2"===t.row.type?a("span",[e._v("\n                柜型 /\n              ")]):e._e(),"3"===t.row.type?a("span",[e._v("\n                车型 /\n              ")]):e._e(),a("span",[e._v("\n                "+e._s(t.row.containerName)+"\n              ")])]}}])}),a("el-table-column",{attrs:{prop:"quantity",width:"120",label:"数量"}}),a("el-table-column",{attrs:{prop:"loadLimit",width:"120",label:"限重(kg)"}}),a("el-table-column",{attrs:{prop:"loaded",width:"120",label:"已装载(m³)"}}),a("el-table-column",{attrs:{formatter:e.formatShipDate,width:"160",label:"起运日期"}}),a("el-table-column",{attrs:{formatter:e.formatCutoffDate,width:"160",label:"截单日期"}}),a("el-table-column",{attrs:{prop:"transTime",width:"100",label:"运输天数"}}),a("el-table-column",{attrs:{width:"100",label:"计划状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?a("span",[e._v("已下达")]):1===t.row.status?a("span",[e._v("已装满")]):2===t.row.status?a("span",[e._v("已完成")]):3===t.row.status?a("span",[e._v("已取消")]):4===t.row.status?a("span",[e._v("已过期")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"","min-width":"180",label:"发起人","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                "+e._s(t.row.createUser)+"\n              ")]),a("span",[e._v("\n                "+e._s(t.row.createDept?" - "+t.row.createDept:"--")+"\n              ")])]}}])}),a("el-table-column",{attrs:{fixed:"right","min-width":"240",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.viewProduct(t.row)}}},[e._v("\n                查看\n              ")]),0!==t.row.enable&&e.$checkPermission(["editPlan"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editProduct(t.row)}}},[e._v("\n                编辑\n              ")]):e._e(),4!==t.row.status&&0===t.row.enable&&e.$checkPermission(["deletePlan"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.cancelProduct(t.row)}}},[e._v("\n                取消\n              ")]):e._e(),0!==t.row.enable&&e.$checkPermission(["deletePlan"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleteProduct(t.row)}}},[e._v("\n                删除\n              ")]):e._e(),4!==t.row.status&&0===t.row.enable&&0===t.row.ifBooking?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.makeBooking(t.row)}}},[e._v("\n                生成Booking\n              ")]):e._e()]}}])})],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:"product-template-page"===e.pageType,expression:"pageType === 'product-template-page'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"planTable",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{prop:"bscName",fixed:"left","min-width":"150",label:"订舱服务"}}),a("el-table-column",{attrs:{formatter:e.dispatchFormat,width:"120",fixed:"left",label:"派件方式"}}),a("el-table-column",{attrs:{prop:"containerName","min-width":"120",fixed:"left",label:"柜型"}}),a("el-table-column",{attrs:{prop:"quantity",width:"120",label:"数量"}}),a("el-table-column",{attrs:{prop:"loadLimit",width:"120",label:"限重(kg)"}}),a("el-table-column",{attrs:{formatter:e.formatShipDate,width:"180",label:"起运日期"}}),a("el-table-column",{attrs:{formatter:e.formatCutoffDate,width:"180",label:"截单日期"}}),a("el-table-column",{attrs:{prop:"transTime",width:"120",label:"运输天数"}}),a("el-table-column",{attrs:{width:"120",label:"频率"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                "+e._s(t.row.frequency)+"\n                "+e._s(1===t.row.unit?"天":"周")+"\n              ")])]}}])}),a("el-table-column",{attrs:{width:"120",label:"周期"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                "+e._s(t.row.cycle)+"\n                "+e._s(1===t.row.unit?"天":"周")+"\n              ")])]}}])}),a("el-table-column",{attrs:{fixed:"right","min-width":"160",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticClass:"switchStyle",staticStyle:{"margin-right":"10px"},attrs:{"active-text":"启用","inactive-text":"禁用","active-value":0,"inactive-value":1},on:{input:function(a){return e.onStatus(t.row,a)}},model:{value:t.row.enable,callback:function(a){e.$set(t.row,"enable",a)},expression:"scope.row.enable"}}),0!==t.row.enable?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.editProduct(t.row)}}},[e._v("\n                编辑\n              ")]):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.dialogTitle,width:"1000px",visible:e.isAddEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isAddEditVisible=t},closed:e.cancel}},[a("addEditForm",{ref:"addEditForm",attrs:{"is-edit":e.isEdit,"is-book":e.isBook,"page-type":e.pageType},on:{cancel:e.cancel,queryAll:e.queryAll}})],1),a("hint-model",{ref:"hintModel",on:{cancel:e.saveByCancel,ok:e.saveByNow}}),a("el-dialog",{attrs:{title:"生成Booking",width:"400px",visible:e.isBookingVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isBookingVisible=t},closed:e.cancelBooking}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.bookingLoading,expression:"bookingLoading"}]},[a("el-form",{ref:"supplyForm",attrs:{model:e.supplyForm,rules:e.rules,"label-width":"75px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"供应商",prop:"supplyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",size:"small",filterable:"",clearable:""},on:{focus:e.getSupplierList},model:{value:e.supplyForm.supplyId,callback:function(t){e.$set(e.supplyForm,"supplyId",t)},expression:"supplyForm.supplyId"}},e._l(e.supplierlist,function(e){return a("el-option",{key:e.custId,attrs:{label:e.custName,value:e.custId}})}),1)],1),a("el-form-item",{attrs:{label:"发货人",prop:"consignor"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",size:"small",filterable:"",clearable:""},on:{focus:e.getConsignorList},model:{value:e.supplyForm.consignor,callback:function(t){e.$set(e.supplyForm,"consignor",t)},expression:"supplyForm.consignor"}},e._l(e.consignorList,function(e){return a("el-option",{key:e.id,attrs:{label:e.company+"-"+e.countryName+"-"+e.contact,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"收货人",prop:"consignee"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",size:"small",filterable:"",clearable:""},on:{focus:e.getConsigneeList},model:{value:e.supplyForm.consignee,callback:function(t){e.$set(e.supplyForm,"consignee",t)},expression:"supplyForm.consignee"}},e._l(e.consigneeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.company+"-"+e.countryName+"-"+e.contact,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"通知人",prop:"notifier"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",size:"small",filterable:"",clearable:""},on:{focus:e.getNotifierList},model:{value:e.supplyForm.notifier,callback:function(t){e.$set(e.supplyForm,"notifier",t)},expression:"supplyForm.notifier"}},e._l(e.notifierList,function(e){return a("el-option",{key:e.id,attrs:{label:e.company+"-"+e.countryName+"-"+e.contact,value:e.id}})}),1)],1)],1),a("div",{staticStyle:{"text-align":"right",padding:"10px 0 0"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelBooking}},[e._v("\n                取 消\n              ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveBooking}},[e._v("\n                确 定\n              ")])],1)],1)])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"product-detail"===e.pageType,expression:"pageType === 'product-detail'"}],staticClass:"app-panel"},[a("detail",{ref:"detail"})],1)],1)])])},n=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("768b")),l=(a("6b54"),a("7514"),a("bd86")),s=a("a8db"),o=(a("96cf"),a("3b8d")),c=(a("28a5"),a("d225")),u=a("b0b4"),d=a("308d"),p=a("6bb5"),m=a("4e2b"),f=a("9ab4"),h=a("60a3"),b=a("9dba"),v=a("b32d");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function w(e){var t={url:"/setting/plan/plan_list",method:"post",data:e};return Object(v["a"])(t)}function k(e){var t={url:"/setting/plan/get",method:"get",params:e};return Object(v["a"])(t)}function x(e){var t={url:"/setting/plan/save",method:"post",data:e};return Object(v["a"])(t)}function F(e){var t={url:"/setting/plan/add_booking",method:"post",data:e};return Object(v["a"])(t)}function L(e){var t={url:"/setting/plan/delete",method:"get",params:e};return Object(v["a"])(t)}function _(e){var t={url:"/setting/plan/enable",method:"get",params:e};return Object(v["a"])(t)}function O(e){var t={url:"",method:"post",data:e};return Object(v["a"])(t)}function T(e){var t={url:"",method:"get",params:e};return Object(v["a"])(t)}function I(e){var t=e.page,a=e.size,i=Object(s["a"])(e,["page","size"]),n={url:"/cfg/bs/getBsList",method:"post",data:{page:t,size:a,model:y({},i)}};return Object(v["a"])(n)}function S(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(v["a"])(t)}function j(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(v["a"])(t)}function N(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(v["a"])(t)}function D(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(v["a"])(e)}function C(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(v["a"])(t)}function $(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(v["a"])(t)}function V(e){var t={url:"/auth/bookc/getBookcList",method:"get",params:e};return Object(v["a"])(t)}function z(e){var t={url:"/orders/booking/getBookingStatus",method:"get",params:e};return Object(v["a"])(t)}function q(e){var t={url:"/orders/booking/get_order_by_plan",method:"post",data:e};return Object(v["a"])(t)}function B(){var e={url:"/wms/warehouse/selectSupplyList",method:"get"};return Object(v["a"])(e)}function P(e){var t={url:"/cfg/lsc/getLscGroupList",method:"post",data:e};return Object(v["a"])(t)}var R=a("dcc4"),E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"120px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"业务类型",prop:"type"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isEdit,placeholder:"请选择",size:"small"},on:{change:e.onType},model:{value:e.selectForm.type,callback:function(t){e.$set(e.selectForm,"type",t)},expression:"selectForm.type"}},e._l(e.typelist,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"订舱服务",prop:"bscId"}},[a("el-popover",{attrs:{placement:"bottom-start"}},[a("el-row",[a("el-form-item",{attrs:{label:"目的国","label-width":"60px"}},[a("el-select",{staticStyle:{width:"275px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),a("el-row",[a("el-form-item",{attrs:{label:"服务","label-width":"60px"}},[a("el-select",{staticStyle:{width:"275px"},attrs:{loading:e.selectLoading,disabled:!e.selectForm.type,clearable:"",filterable:"",size:"small",placeholder:"请选择"},on:{focus:e.getBscList,change:e.onFlight},model:{value:e.selectForm.bscId,callback:function(t){e.$set(e.selectForm,"bscId",t)},expression:"selectForm.bscId"}},e._l(e.flightList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[a("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.selectForm.bscName,callback:function(t){e.$set(e.selectForm,"bscName",t)},expression:"selectForm.bscName"}})],1)],1)],1),a("el-form-item",{attrs:{label:"服务组",prop:"groupId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",size:"small",placeholder:"请选择"},on:{focus:e.getGroupData},model:{value:e.selectForm.groupId,callback:function(t){e.$set(e.selectForm,"groupId",t)},expression:"selectForm.groupId"}},e._l(e.groupList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"服务商",prop:"serviceName"}},[a("el-input",{attrs:{disabled:!0,placeholder:"请选择"},model:{value:e.selectForm.serviceName,callback:function(t){e.$set(e.selectForm,"serviceName",t)},expression:"selectForm.serviceName"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showServiceLine},slot:"append"})],1)],1),"1"===e.selectForm.type||"2"===e.selectForm.type?a("el-form-item",{attrs:{label:"柜型",prop:"containerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,filterable:"",clearable:"",size:"small",placeholder:"请选择"},on:{focus:e.getCabinetList},model:{value:e.selectForm.containerId,callback:function(t){e.$set(e.selectForm,"containerId",t)},expression:"selectForm.containerId"}},e._l(e.cabinetList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),"0"===e.selectForm.type?a("el-form-item",{attrs:{label:"航空版",prop:"containerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,filterable:"",clearable:"",size:"small",placeholder:"请选择"},on:{focus:e.getAviationList,change:e.aviationChange},model:{value:e.selectForm.containerId,callback:function(t){e.$set(e.selectForm,"containerId",t)},expression:"selectForm.containerId"}},e._l(e.cabinetList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),"0"===e.selectForm.type?a("el-form-item",{attrs:{label:"体积",prop:"airVolume"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.airVolume,callback:function(t){e.$set(e.selectForm,"airVolume",t)},expression:"selectForm.airVolume"}})],1),a("div",{staticClass:"input-unit"},[e._v("\n          m³\n        ")])])]):e._e(),"4"===e.selectForm.type?a("el-form-item",{attrs:{label:"车型",prop:"containerId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,filterable:"",clearable:"",size:"small",placeholder:"请选择"},on:{focus:e.getVehicleTypeList},model:{value:e.selectForm.containerId,callback:function(t){e.$set(e.selectForm,"containerId",t)},expression:"selectForm.containerId"}},e._l(e.cabinetList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),"0"!==e.selectForm.type?a("el-form-item",{attrs:{label:"数量",prop:"quantity"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:100,step:1,"step-strictly":""},on:{blur:e.onQuantity},model:{value:e.selectForm.quantity,callback:function(t){e.$set(e.selectForm,"quantity",t)},expression:"selectForm.quantity"}})],1),a("div",{staticClass:"input-unit"},[e._v("\n          个\n        ")])])]):e._e(),"1"===e.selectForm.type||"2"===e.selectForm.type?a("el-form-item",{attrs:{label:"1个SO多条柜",prop:"ifSo"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.selectForm.ifSo,callback:function(t){e.$set(e.selectForm,"ifSo",t)},expression:"selectForm.ifSo"}},[a("el-radio",{attrs:{label:0}},[e._v("\n          否\n        ")]),a("el-radio",{attrs:{label:1}},[e._v("\n          是\n        ")])],1)],1):e._e(),a("el-form-item",{attrs:{label:"限重",prop:"loadLimit"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.loadLimit,callback:function(t){e.$set(e.selectForm,"loadLimit",t)},expression:"selectForm.loadLimit"}})],1),a("div",{staticClass:"input-unit"},[e._v("\n          kg\n        ")])])]),a("el-form-item",{attrs:{label:"派件方式",prop:"dispatch"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",multiple:"","collapse-tags":"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.dispatch,callback:function(t){e.$set(e.selectForm,"dispatch",t)},expression:"selectForm.dispatch"}},e._l(e.dispatchOption,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:!!e.disabled}})}),1)],1),a("el-form-item",{attrs:{label:"起运日期",prop:"shipDate"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isEdit,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"年/月/日 时:分"},model:{value:e.selectForm.shipDate,callback:function(t){e.$set(e.selectForm,"shipDate",t)},expression:"selectForm.shipDate"}})],1),"1"===e.selectForm.type||"2"===e.selectForm.type?a("div",{staticClass:"input-unit",attrs:{disabled:""}},[e._v("\n          "+e._s(e.formatWeekShip)+"\n        ")]):e._e()])]),a("el-form-item",{attrs:{label:"截单日期",prop:"cutoffDate"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isEdit,type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"年/月/日 时:分"},model:{value:e.selectForm.cutoffDate,callback:function(t){e.$set(e.selectForm,"cutoffDate",t)},expression:"selectForm.cutoffDate"}})],1),"1"===e.selectForm.type||"2"===e.selectForm.type?a("div",{staticClass:"input-unit",attrs:{disabled:""}},[e._v("\n          "+e._s(e.formatWeekCutoff)+"\n        ")]):e._e()])]),a("el-form-item",{attrs:{label:"运输时间",prop:"transTime"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:999,step:1,"step-strictly":""},model:{value:e.selectForm.transTime,callback:function(t){e.$set(e.selectForm,"transTime",t)},expression:"selectForm.transTime"}})],1),a("div",{staticClass:"input-unit"},[e._v("\n          天\n        ")])])]),a("el-form-item",{class:e.isFba?"is-required":"",attrs:{label:"目的仓代码",prop:"fbastoreId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.selectForm.bscId,loading:e.selectLoading,clearable:"",filterable:"",size:"small",placeholder:"请选择"},on:{focus:e.getFbastoreList},model:{value:e.selectForm.fbastoreId,callback:function(t){e.$set(e.selectForm,"fbastoreId",t)},expression:"selectForm.fbastoreId"}},e._l(e.codeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.fellName,value:e.id}})}),1)],1),a("el-form-item",{staticClass:"is-required",attrs:{label:"装货仓库"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.warehouseId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleItem},slot:"append"})],1)],1),"product-template-page"===e.pageType?a("el-form-item",{attrs:{label:"创建频率",prop:"frequency"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:999,step:1,"step-strictly":""},model:{value:e.selectForm.frequency,callback:function(t){e.$set(e.selectForm,"frequency",t)},expression:"selectForm.frequency"}})],1),a("div",{staticClass:"input-select"},[a("el-select",{staticClass:"select-unit",attrs:{size:"small",disabled:""},model:{value:e.selectForm.unit,callback:function(t){e.$set(e.selectForm,"unit",t)},expression:"selectForm.unit"}},[a("el-option",{attrs:{label:"天",value:1}}),a("el-option",{attrs:{label:"周",value:2}})],1)],1)])]):e._e(),"product-template-page"===e.pageType?a("el-form-item",{attrs:{label:"周期数量",prop:"cycle"}},[a("div",{staticClass:"input-content"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:999,step:1,"step-strictly":""},model:{value:e.selectForm.cycle,callback:function(t){e.$set(e.selectForm,"cycle",t)},expression:"selectForm.cycle"}})],1),a("div",{staticClass:"input-select"},[a("el-select",{staticClass:"select-unit",attrs:{disabled:"",size:"small"},model:{value:e.selectForm.unit,callback:function(t){e.$set(e.selectForm,"unit",t)},expression:"selectForm.unit"}},[a("el-option",{attrs:{label:"天",value:1}}),a("el-option",{attrs:{label:"周",value:2}})],1)],1)])]):e._e(),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1)],1),a("div",{staticStyle:{"text-align":"right",padding:"10px 10px 20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n      取 消\n    ")]),a("el-button",{attrs:{disabled:e.isBook,type:"primary",size:"small"},on:{click:e.saveConfirm}},[e._v("\n      确 定\n    ")])],1),a("hint-model",{ref:"hintModel",on:{cancel:e.saveByCancel,ok:e.saveByNow}}),a("el-dialog",{attrs:{width:"1200px",title:"选择服务商",visible:e.innerVisible,"append-to-body":""},on:{"update:visible":function(t){e.innerVisible=t},closed:e.onCancel}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"起运时间",filterable:"",clearable:""},model:{value:e.searchForm.shipDay,callback:function(t){e.$set(e.searchForm,"shipDay",t)},expression:"searchForm.shipDay"}},e._l(e.weekdays1,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"截报关时间",filterable:"",clearable:""},model:{value:e.searchForm.customDay,callback:function(t){e.$set(e.searchForm,"customDay",t)},expression:"searchForm.customDay"}},e._l(e.weekdays1,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-input",{staticStyle:{width:"250px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入",maxlength:150},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.keyType,callback:function(t){e.keyType=t},expression:"keyType"}},[a("el-option",{attrs:{label:"服务编码",value:"1"}}),a("el-option",{attrs:{label:"服务机构",value:"2"}})],1)],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSearch}},[e._v("\n        查询\n      ")])],1),e.isType?a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tableSelect",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"400px",border:""},on:{"row-click":e.rowClick,"selection-change":e.rowSelectChange}},["1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),"1"!==e.isType&&"2"!==e.isType?a("el-table-column",{attrs:{width:"55",label:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{label:t.row.id},model:{value:e.selectForm.bscTransId,callback:function(t){e.$set(e.selectForm,"bscTransId",t)},expression:"selectForm.bscTransId"}},[e._v("\n             \n          ")])]}}],null,!1,115285752)}):e._e(),a("el-table-column",{attrs:{prop:"orgName",label:"服务机构","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"serviceCode",label:"服务编码","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"entreportName",label:"中转港","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"dischargeName",label:"卸货港","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"days",label:"运输天数",width:"100"}}),a("el-table-column",{attrs:{formatter:e.formatDays,prop:"shipDay",label:"起运时间","min-width":"120"}}),a("el-table-column",{attrs:{formatter:e.formatDays,prop:"docDay",label:"截文件时间","min-width":"120"}}),a("el-table-column",{attrs:{formatter:e.formatDays,prop:"customDay",label:"截报关时间","min-width":"120"}}),a("el-table-column",{attrs:{formatter:e.formatType,prop:"orgType2",label:"二程机构类型",width:"120"}}),a("el-table-column",{attrs:{prop:"orgName2",label:"二程服务机构","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"dischargeName2",label:"二程卸货港","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"days2",label:"二程运输天数",width:"120"}}),a("el-table-column",{attrs:{formatter:e.formatDays,prop:"shipDay2",label:"二程起运时间","min-width":"120"}})],1):e._e(),"1"===e.isType||"2"===e.isType?a("div",{staticStyle:{"text-align":"right",padding:"10px 0"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSave}},[e._v("\n        确定\n      ")])],1):e._e()],1),a("el-dialog",{attrs:{title:"装货仓库",visible:e.itemShow,"close-on-click-modal":!1,"append-to-body":"",width:"960px"},on:{"update:visible":function(t){e.itemShow=t},close:e.itemClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}]},[a("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["装货仓库","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.warehouseList},model:{value:e.selectForm.warehouseId,callback:function(t){e.$set(e.selectForm,"warehouseId",t)},expression:"selectForm.warehouseId"}}),a("div",{staticStyle:{"text-align":"right",margin:"10px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemClose}},[e._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemClose}},[e._v("\n          确 定\n        ")])],1)],1)])],1)},M=[],A=(a("5df3"),a("7f7f"),a("5a0c")),Y=a.n(A),W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"是否立即创建计划？",width:"400px",visible:e.visible,"close-on-click-modal":!1,"show-close":!1,"append-to-body":""}},[a("p",[e._v("\n    如果是，将立刻创建一条起运日期"+e._s(e.params.shipDate)+" "+e._s(e.formatWeekShip)+"，\n    截单日期为"+e._s(e.params.cutoffDate)+" "+e._s(e.formatWeekCutoff)+"的计划。\n  ")]),a("p",[e._v("\n    如果否，将在"+e._s(e.nextCreate)+"，创建计划。\n  ")]),a("el-radio",{attrs:{label:"1"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("\n    是\n  ")]),a("el-radio",{attrs:{label:"2"},model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[e._v("\n    否\n  ")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onOk}},[e._v("\n      确 定\n    ")])],1)],1)},H=[],G=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.visible=!1,e.radio="1",e.params={},e.weekdays=[{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6},{label:"星期日",value:0}],e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"show",value:function(e){this.radio="1",this.params=e,this.visible=!0}},{key:"cancel",value:function(){this.visible=!1,this.$emit("cancel",this.params,this.radio)}},{key:"onOk",value:function(){this.visible=!1,this.$emit("ok",this.params,this.radio)}},{key:"formatWeekShip",get:function(){var e=this.params.shipDate;if(e){var t=Y()(e).day(),a=this.weekdays,i=a.find(function(e){return e.value===t})||{};return i.label}return""}},{key:"formatWeekCutoff",get:function(){var e=this.params.cutoffDate;if(e){var t=Y()(e).day(),a=this.weekdays,i=a.find(function(e){return e.value===t})||{};return i.label}return""}},{key:"nextCreate",get:function(){var e=this.params.shipDate;if(e){if(1===this.params.unit){var t=Y()(e).add(this.params.frequency,"day").day(),a=this.weekdays,i=a.find(function(e){return e.value===t})||{};return Y()(e).add(this.params.frequency,"day").format("YYYY-MM-DD HH:mm")+i.label}var n=Y()(e).add(this.params.frequency,"w").day(),r=this.weekdays,l=r.find(function(e){return e.value===n})||{};return Y()(e).add(this.params.frequency,"w").format("YYYY-MM-DD HH:mm")+l.label}return""}}]),t}(h["e"]);G=f["a"]([Object(h["a"])({name:"hintModel"})],G);var Q=G,U=Q,J=a("2877"),K=Object(J["a"])(U,W,H,!1,null,"de0061ae",null),X=K.exports;function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function te(){return{airVolume:void 0,serviceName:"",serviceId:void 0,type:"0",bscId:void 0,bscName:"",groupId:void 0,bscTransId:void 0,countryId:"",targets:void 0,containerId:void 0,quantity:void 0,loadLimit:void 0,dispatch:[],warehouseId:[],cutoffDate:void 0,shipDate:void 0,transTime:void 0,fbastoreId:void 0,frequency:void 0,cycle:void 0,unit:1,ifSo:0,remark:void 0}}var ae=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.innerVisible=!1,e.loading=!1,e.formLoading=!1,e.selectLoading=!1,e.itemShow=!1,e.selectForm=te(),e.tableData=[],e.countryList=[],e.flightList=[],e.cabinetList=[],e.codeList=[],e.selectOption=[],e.warehouseList=[],e.typelist=[],e.groupList=[],e.ss="",e.dispatchlist=[{label:"快递",value:0},{label:"卡派",value:1},{label:"自提",value:2},{label:"整柜直送",value:3},{label:"到仓",value:4}],e.weekdays=[{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6},{label:"星期日",value:0}],e.formRules={type:{required:!0,message:"请选择业务类型",trigger:"change"},bscId:{required:!0,message:"请选择订舱服务",trigger:"change"},groupId:{required:!0,message:"请选择服务组",trigger:"change"},containerId:{required:!0,message:"请选择柜型",trigger:"change"},quantity:{required:!0,message:"数量不能为空",trigger:"blur"},loadLimit:{required:!0,message:"限重不能为空",trigger:"blur"},airVolume:{required:!0,message:"体积不能为空",trigger:"blur"},dispatch:{required:!0,message:"请选择派件方式",trigger:"change"},cutoffDate:{required:!0,message:"请选择截单日期",trigger:"change"},shipDate:{required:!0,message:"请选择起运日期",trigger:"change"},transTime:{required:!0,message:"运输时间不能为空",trigger:"blur"},ifSo:{required:!0,message:"请选择是否1个SO多条柜",trigger:"change"},frequency:{required:!0,message:"创建频率不能为空",trigger:"blur"},cycle:{required:!0,message:"周期数量不能为空",trigger:"blur"},serviceName:{required:!0,message:"服务商不能为空",trigger:"blur"},fbastoreId:{validator:e.validateData,trigger:"change"},warehouseId:{required:!0,message:"请选择装货仓库",trigger:"change"},remark:{required:!0,message:"备注不能为空",trigger:"blur"}},e.weekdays1=[{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6},{label:"星期日",value:7}],e.searchForm={shipDay:void 0,customDay:void 0,orgName:void 0,serviceCode:void 0},e.keyType="1",e.keyWord="",e.isType="",e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"validateData",value:function(e,t,a){var i=this.selectForm,n=(i.dispatch||[]).some(function(e){return"3"===e});n&&!t?a(new Error("目的仓不能为空")):a()}},{key:"onQuantity",value:function(){this.selectForm.quantity>=10&&this.$confirm("是否需要超过10个","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){}).catch(function(){})}},{key:"formatType",value:function(e,t,a){var i="";switch(a){case"1":i="船东";break;case"2":i="空运公司";break;case"3":i="铁路公司";break}return i}},{key:"showServiceLine",value:function(){var e=this;if(this.selectForm.bscId){this.isType=this.selectForm.type;var t={page:1,size:999,model:ee({id:this.selectForm.bscId},this.searchForm)};this.innerVisible=!0,"1"!==this.selectForm.type&&"2"!==this.selectForm.type||this.$nextTick(function(){var t=e.$refs.tableSelect;t.clearSelection()}),this.loading=!0,Object(R["g"])(t).then(function(t){var a=t.data||{};e.tableData=a.result||[];var i=e.selectForm,n=i.type,r=i.bscTransId;if(("1"===n||"2"===n)&&r){var l=e.selectForm.bscTransId.split(",");l.map(function(t){var a=e.tableData.find(function(e){return e.id===t||"".concat(e.id)===t});a&&e.$nextTick(function(){var t=e.$refs.tableSelect;t.toggleRowSelection(a,!0)})})}e.loading=!1}).catch(function(t){return e.loading=!1,t})}else this.$message.warning("请选择服务")}},{key:"onSearch",value:function(){"1"===this.keyType?(this.searchForm.serviceCode=this.keyWord,this.searchForm.orgName=void 0):(this.searchForm.serviceCode=void 0,this.searchForm.orgName=this.keyWord),this.showServiceLine()}},{key:"rowClick",value:function(e){"1"!==this.selectForm.type&&"2"!==this.selectForm.type&&(this.selectForm.serviceId=e.serviceCode,this.selectForm.serviceName=e.orgName+"/"+e.serviceCode,this.selectForm.bscTransId=e.id,this.resetRow())}},{key:"resetRow",value:function(){this.searchForm={shipDay:void 0,customDay:void 0,orgName:void 0,serviceCode:void 0},this.tableData=[],this.keyType="1",this.keyWord="",this.isType="",this.selectOption=[],this.innerVisible=!1}},{key:"rowSelectChange",value:function(e){this.selectOption=e}},{key:"onCancel",value:function(){this.resetRow()}},{key:"onSave",value:function(){this.selectForm.serviceId=this.selectOption.map(function(e){return e.serviceCode}).join(","),this.selectForm.serviceName=this.selectOption.map(function(e){return e.orgName+"/"+e.serviceCode}).join(","),this.selectForm.bscTransId=this.selectOption.map(function(e){return e.id}).join(","),this.resetRow()}},{key:"formatDays",value:function(e,t,a){var i=this.weekdays1,n=i.find(function(e){return e.value===a})||{};return n.label||""}},{key:"getBusinessType",value:function(){var e=this;this.formLoading=!0;var t={type:"BOOKING_BUSINESS_TYPE"};C(t).then(function(t){t.success&&(e.typelist=t.data||[]),e.formLoading=!1}).catch(function(t){return e.formLoading=!1,t})}},{key:"getCountryList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,D().then(function(e){if(t.selectLoading=!1,e.success){var a=e.data||{};t.countryList=a.result||[]}}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onType",value:function(){this.flightList=[],this.selectForm.bscId=void 0,this.selectForm.cutoffDate=void 0,this.selectForm.shipDate=void 0,this.selectForm.ifSo=0,this.selectForm.quantity=void 0,this.selectForm.airVolume=void 0,this.selectForm.containerId=void 0,this.selectForm.bscName="",this.selectForm.bscTransId=void 0,this.selectForm.serviceId=void 0,this.selectForm.serviceName=void 0,this.selectForm.countryId=void 0,this.selectForm.dispatch=[],"0"===this.selectForm.type||"4"===this.selectForm.type?this.selectForm.unit=1:"1"!==this.selectForm.type&&"2"!==this.selectForm.type||(this.selectForm.unit=2)}},{key:"onFlight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getCountryList();case 2:this.flightList.map(function(e){t.selectForm.bscId===e.id?(t.selectForm.targets=e.countryToId,t.selectForm.countryId=e.countryToId,t.selectForm.bscName=e.name):t.selectForm.bscId||(t.selectForm.targets=void 0)}),this.selectForm.fbastoreId=void 0,this.selectForm.bscTransId=void 0,this.selectForm.serviceId=void 0,this.selectForm.serviceName=void 0,this.selectForm.groupId=void 0,this.codeList=[],this.selectOption=[];case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getBscList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:99999,conveyance:this.selectForm.type,countryToId:this.selectForm.countryId},e.next=4,I(t).then(function(e){var t=e.data||{},i=t.result;a.flightList=i.map(function(e){return e.id=e.id+"",e}),a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,[e,null]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroupData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={model:{status:1,countryId:this.selectForm.countryId,subtypeId:this.selectForm.type},page:1,size:9999},e.next=4,P(t).then(function(e){var t=e.data||{};a.groupList=t.result||[],a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getFbastoreList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={countryId:this.selectForm.targets,codeSort:"A",page:1,size:99999},e.next=4,S(t).then(function(e){var t=e.data||{},i=t.result||[];a.codeList=i.map(function(e){return e.fellName=e.code+(e.postal?"-"+e.postal:"")+(e.stateName?"-"+e.stateName:""),e}),a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,[e,null]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getVehicleTypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:99999},e.next=4,j(t).then(function(e){var t=e.data||{};a.cabinetList=(t.result||[]).map(function(e){return{id:e.id+"",name:e.name}}),a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,[e,null]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCabinetList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:99999},e.next=4,j(t).then(function(e){var t=e.data||{};a.cabinetList=(t.result||[]).map(function(e){return{id:e.id+"",name:e.name}}),a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,[e,null]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"aviationChange",value:function(e){var t=this,a=this.cabinetList.find(function(e){return e.id===t.selectForm.containerId});this.selectForm.airVolume=a?a.volume:void 0}},{key:"getAviationList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={model:{},page:1,size:99999},e.next=4,N(t).then(function(e){var t=e.data||{};a.cabinetList=(t.result||[]).map(function(e){return{id:e.id+"",name:e.name,volume:e.volume}}),a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,[e,null]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0,B().then(function(t){var a=t.data||[];e.warehouseList=a.filter(function(e){return"CN"===e.countryId}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"filterMethod",value:function(e,t){var a=t.name||"";return a.indexOf(e)>-1}},{key:"handleItem",value:function(){this.itemShow=!0,this.warehouseList=[],this.getWarehouseList()}},{key:"itemClose",value:function(){this.itemShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"setData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,i,n,r,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.dispatch,i=t.list,n=Object(s["a"])(t,["dispatch","list"]),this.selectForm=ee({},n,{dispatch:("".concat(a)||"").split(","),warehouseId:(i||[]).map(function(e){return e.warehouseId})}),e.prev=2,this.formLoading=!0,e.next=6,this.getBscList();case 6:return r=this.flightList.find(function(e){return l.selectForm.bscId===e.id})||{},this.selectForm.countryId=r.countryToId,this.selectForm.targets=r.countryToId,this.selectForm.bscName=r.name,e.next=12,Promise.all([this.getCountryList(),this.getFbastoreList(),this.getGroupData()]);case 12:if("0"!==this.selectForm.type){e.next=17;break}return e.next=15,this.getAviationList();case 15:e.next=25;break;case 17:if("1"!==this.selectForm.type&&"2"!==this.selectForm.type){e.next=22;break}return e.next=20,this.getCabinetList();case 20:e.next=25;break;case 22:if("3"!==this.selectForm.type){e.next=25;break}return e.next=25,this.getVehicleTypeList();case 25:this.formLoading=!1,e.next=32;break;case 28:return e.prev=28,e.t0=e["catch"](2),this.formLoading=!1,e.abrupt("return",e.t0);case 32:case"end":return e.stop()}},e,this,[[2,28]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetForm",value:function(){this.selectForm=te()}},{key:"cancel",value:function(){this.$emit("cancel")}},{key:"save",value:function(e){var t=this;this.formLoading=!0,x(e).then(function(e){t.$message({type:"success",message:"保存成功"}),t.formLoading=!1,t.$emit("cancel"),t.$emit("queryAll")}).catch(function(e){return t.formLoading=!1,e})}},{key:"saveByCancel",value:function(e){this.save(e)}},{key:"saveByNow",value:function(e,t){var a=ee({},e,{isNow:1});"2"===t&&(a.isNow=0),this.save(a)}},{key:"saveConfirm",value:function(){var e=this,t=this.$refs.selectForm;t.validate(function(t){if(!t)return!1;var a=e.selectForm,i=a.dispatch,n=a.warehouseId,r=Object(s["a"])(a,["dispatch","warehouseId"]);if(n.length<=0)e.$message.error("请选择装货仓库");else{var l=[];n.map(function(t){var a=e.warehouseList.find(function(e){return e.id===t});a&&l.push({warehouseId:t,warehouseName:a.name})});var o=ee({},r,{enable:0,dispatch:(i||[]).join(","),list:l});if(e.groupList.map(function(t){e.selectForm.groupId===t.id&&(o.productId=t.productId,o.productName=t.productName)}),e.cabinetList.map(function(t){e.selectForm.containerId===t.id&&(o.containerName=t.name)}),e.countryList.map(function(t){e.selectForm.countryId===t.id&&(o.countryName=t.name)}),e.flightList.map(function(t){e.selectForm.bscId===t.id&&(o.bscName=t.name)}),e.codeList.map(function(t){e.selectForm.fbastoreId===t.id&&(o.fbastoreName=t.code)}),"product-template-page"===e.pageType)if(e.isEdit)e.save(o);else{var c=e.$refs.hintModel;o.source=0,o.isNow=0,c.show(o)}else e.isEdit||(o.source=1,o.isNow=1,o.status=0),e.save(o)}})}},{key:"created",value:function(){this.getBusinessType()}},{key:"custType",get:function(){var e=b["a"].info||{},t=e.custType;return t}},{key:"formatWeekShip",get:function(){var e=this.selectForm.shipDate;if(e){var t=Y()(e).day(),a=this.weekdays,i=a.find(function(e){return e.value===t})||{};return i.label}return""}},{key:"formatWeekCutoff",get:function(){var e=this.selectForm.cutoffDate;if(e){var t=Y()(e).day(),a=this.weekdays,i=a.find(function(e){return e.value===t})||{};return i.label}return""}},{key:"dispatchOption",get:function(){var e=this.selectForm.type,t=this.selectForm.dispatch;return"1"===e||"2"===e?[{label:"快递",value:"0",disabled:t.some(function(e){return e&&"3"===e})},{label:"卡派",value:"1",disabled:t.some(function(e){return e&&"3"===e})},{label:"自提",value:"2",disabled:t.some(function(e){return e&&"3"===e})},{label:"到仓",value:"4",disabled:t.some(function(e){return e&&"3"===e})},{label:"整柜直送",value:"3",disabled:t.some(function(e){return e&&"3"!==e})}]:[{label:"快递",value:"0"},{label:"卡派",value:"1"},{label:"自提",value:"2"},{label:"到仓",value:"4"}]}},{key:"isFba",get:function(){var e=this.selectForm.dispatch||[];return e.some(function(e){return"3"===e})}}]),t}(h["e"]);ae=f["a"]([Object(h["a"])({name:"",components:{hintModel:X},props:{isEdit:{type:Boolean,default:!1},isBook:{type:Boolean,default:!1},pageType:{type:String,default:"product-page"}}})],ae);var ie=ae,ne=ie,re=(a("3518"),Object(J["a"])(ne,E,M,!1,null,"b15e8c3e",null)),le=re.exports,se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,height:"400px",border:""}},[a("el-table-column",{attrs:{prop:"type",label:"业务类型",width:"120"}}),a("el-table-column",{attrs:{prop:"startCountryName",label:"起运国","min-width":"120"}}),a("el-table-column",{attrs:{prop:"startCountryName",label:"起运地","min-width":"120"}}),a("el-table-column",{attrs:{prop:"countryName",label:"目的国","min-width":"120"}}),a("el-table-column",{attrs:{prop:"countryName",label:"目的仓","min-width":"120"}}),a("el-table-column",{attrs:{prop:"title",label:"需求频率","min-width":"150"}}),a("el-table-column",{attrs:{prop:"code",label:"已有方数","min-width":"120"}}),a("el-table-column",{attrs:{prop:"price",label:"发起人",width:"120"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("\n          新增计划\n        ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},oe=[],ce=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.loading=!1,e.list=[],e.page=1,e.size=10,e.total=0,e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"getTableData",value:function(){var e=this;this.loading=!0;var t={page:this.page,size:this.size};O(t).then(function(t){var a=t.data||{};e.list=a.result||[],e.loading=!1}).catch(function(t){return e.loading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"handleEdit",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("edit");case 1:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(h["e"]);ce=f["a"]([Object(h["a"])({name:"",components:{},props:{}})],ce);var ue=ce,de=ue,pe=(a("3462"),a("b32a"),Object(J["a"])(de,se,oe,!1,null,"507d9a26",null)),me=pe.exports,fe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],staticStyle:{"background-color":"#ffffff"}},[a("div",[a("el-form",{ref:"editForm",staticClass:"detail-form",attrs:{model:e.form,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"业务类型："}},[e._v("\n        "+e._s(e.filterType(e.form.type))+"\n      ")]),a("el-form-item",{attrs:{label:"订舱服务："}},[e._v("\n        "+e._s(e.form.bscName)+"\n      ")]),a("el-form-item",{attrs:{label:"服务组："}},[e._v("\n        "+e._s((e.groupList.find(function(t){return t.id===e.form.groupId})||{}).name)+"\n      ")]),a("el-form-item",{attrs:{label:"服务商："}},[a("el-popover",{attrs:{placement:"top",width:"400",trigger:"hover"}},[a("span",[e._v(e._s(e.form.serviceName))]),a("div",{staticClass:"word-limit",attrs:{slot:"reference"},slot:"reference"},[e._v("\n            "+e._s(e.form.serviceName)+"\n          ")])])],1),"0"===e.form.type?a("el-form-item",{attrs:{label:"航空板："}},[e._v("\n        "+e._s(e.form.containerName)+"\n      ")]):e._e(),"1"===e.form.type||"2"===e.form.type?a("el-form-item",{attrs:{label:"柜型："}},[e._v("\n        "+e._s(e.form.containerName)+"\n      ")]):e._e(),"4"===e.form.type?a("el-form-item",{attrs:{label:"车型："}},[e._v("\n        "+e._s(e.form.containerName)+"\n      ")]):e._e(),a("el-form-item",{attrs:{label:"数量："}},[e._v("\n        "+e._s(e.form.quantity)+"\n      ")]),a("el-form-item",{attrs:{label:"1个SO多条柜："}},[e._v("\n        "+e._s(1===e.form.ifSo?"是":"否")+"\n      ")]),a("el-form-item",{attrs:{label:"限重："}},[e._v("\n        "+e._s(e.form.loadLimit)+"\n      ")]),a("el-form-item",{attrs:{label:"派件方式："}},[e._v("\n        "+e._s(e.filterDispatch(e.form.dispatch))+"\n      ")]),a("el-form-item",{attrs:{label:"起运日期："}},[e._v("\n        "+e._s(e.form.shipDate)+"\n      ")]),a("el-form-item",{attrs:{label:"截单日期："}},[e._v("\n        "+e._s(e.form.cutoffDate)+"\n      ")]),a("el-form-item",{attrs:{label:"运输时间："}},[e._v("\n        "+e._s(e.form.transTime)+"\n      ")]),a("el-form-item",{attrs:{label:"目的仓代码："}},[e._v("\n        "+e._s(e.form.fbastoreName)+"\n      ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注："}},[e._v("\n        "+e._s(e.form.remark)+"\n      ")])],1),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length>0,expression:"tableData.length > 0"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,loading:e.loading,height:"calc(100vh - 380px)",border:""}},[a("el-table-column",{attrs:{fixed:"left",prop:"markNo",label:"原单号","min-width":"180","show-overflow-tooltip":""}}),"1"===e.form.businessType?a("el-table-column",{attrs:{fixed:"left",prop:"soCode",label:"SO号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.soCode||"-")+"\n        ")]}}],null,!1,2537057473)}):e._e(),"0"===e.form.businessType?a("el-table-column",{attrs:{fixed:"left",prop:"billNo",label:"提单号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.billNo||"-")+"\n        ")]}}],null,!1,3242514330)}):e._e(),"0"===e.form.businessType?a("el-table-column",{attrs:{fixed:"left",prop:"airNo",label:"航空单号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.airNo||"-")+"\n        ")]}}],null,!1,2438710635)}):e._e(),a("el-table-column",{attrs:{fixed:"left",prop:"",formatter:e.formatStatus,label:"订单状态",width:"120"}}),a("el-table-column",{attrs:{prop:"audit",label:"审核状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.audit?a("span",[e._v("待审核")]):"1"===t.row.audit?a("span",[e._v("审核通过")]):"2"===t.row.audit?a("span",[e._v("审核拒绝")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"businessType",label:"业务类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.businessType?a("span",[e._v("空运")]):"1"===t.row.businessType?a("span",[e._v("海运")]):"2"===t.row.businessType?a("span",[e._v("铁路")]):"4"===t.row.businessType?a("span",[e._v("卡航")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"bsServiceName",label:"服务","min-width":"150","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"portsFromName",label:"起运港",width:"180"}}),a("el-table-column",{attrs:{prop:"portsToName",label:"目的港",width:"180"}}),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"custName",label:"下单客户",width:"180","show-overflow-tooltip":""}}),"1"===e.form.businessType?a("el-table-column",{attrs:{label:"起运港提柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.formatContain(t.row,"251"))+"\n        ")]}}],null,!1,1481862907)}):e._e(),"1"===e.form.businessType?a("el-table-column",{attrs:{label:"起运港已装柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.formatContain(t.row,"252"))+"\n        ")]}}],null,!1,3852481816)}):e._e(),"1"===e.form.businessType?a("el-table-column",{attrs:{label:"起运港已还柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.formatContain(t.row,"255"))+"\n        ")]}}],null,!1,3612690303)}):e._e(),"1"===e.form.businessType?a("el-table-column",{attrs:{label:"目的港已提柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.formatContain(t.row,"256"))+"\n        ")]}}],null,!1,1688341916)}):e._e(),"1"===e.form.businessType?a("el-table-column",{attrs:{label:"目的港已还柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.formatContain(t.row,"257"))+"\n        ")]}}],null,!1,3893730621)}):e._e(),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"180"}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.viewRow(t.row)}}},[e._v("\n            查看\n          ")])]}}])})],1),a("el-dialog",{attrs:{title:"订单详情",visible:e.dialogVisible,"close-on-click-modal":!1,width:"1200px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:function(t){e.dialogVisible=!1}}},[a("detail",{ref:"detailForm"})],1)],1)])},he=[],be=a("e3f0");function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ye(){return{clientId:void 0,clientName:void 0,clientType:void 0,serviceTypeId:void 0,serviceTypeName:void 0,remark:void 0}}var we=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.form={},e.selectForm=ye(),e.title="",e.currentId="",e.detailLoading=!1,e.dialogLoading=!1,e.selectLoading=!1,e.loading=!1,e.dialogVisible=!1,e.statusList=[],e.tableData=[],e.selectedData=[],e.groupList=[],e.customerData=[],e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"filterServiceName",value:function(e){var t=(e||"").split(",");return t.join("\n")}},{key:"filterType",value:function(e){return"0"===e?"空运":"1"===e?"海运":"2"===e?"铁路":"4"===e?"卡航":void 0}},{key:"filterDispatch",value:function(e){var t={0:"快递",1:"卡派",2:"自提",3:"整柜直送",4:"到仓"},a=("".concat(e)||"").split(","),i=[];return a.map(function(e){i.push(t[e])}),i.join(",")}},{key:"formatStatus",value:function(e){var t="";return this.statusList.map(function(a){a.key===e.orderStatus&&(t=a.value)}),t}},{key:"formatContain",value:function(e,t){var a=(e||{}).containerStatus||[],i=a.filter(function(e){return e===t});return i.length+"/"+a.length}},{key:"getServiceStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={businessType:this.form.type},e.next=4,z(t).then(function(e){a.statusList=e.data||[],a.selectLoading=!1}).catch(function(){a.statusList=[],a.selectLoading=!1});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getGroupData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={model:{status:1,countryId:this.form.countryId},page:1,size:9999},e.next=4,P(t).then(function(e){var t=e.data||{};a.groupList=t.result||[],a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"resetDialog",value:function(){this.dialogVisible=!1,this.selectForm=ye()}},{key:"getTableData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,q([this.currentId]).then(function(e){t.tableData=e.data||[],t.loading=!1}).catch(function(e){return t.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"viewRow",value:function(e){var t=this;this.dialogVisible=!0,this.$nextTick(function(){var a=t.$refs.detailForm;a.setData(ge({},e,{isFromPlan:!0}))})}},{key:"editRow",value:function(e){this.title="编辑订单"}},{key:"deleteRow",value:function(e){}},{key:"show",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.detailLoading=!0,this.currentId=t,e.prev=2,a={id:t},e.next=6,k(a);case 6:return i=e.sent,this.form=i.data||{},e.next=10,this.getGroupData();case 10:if(!this.form.type){e.next=13;break}return e.next=13,this.getServiceStatus();case 13:return e.next=15,this.getTableData();case 15:e.next=21;break;case 17:return e.prev=17,e.t0=e["catch"](2),this.detailLoading=!1,e.abrupt("return",e.t0);case 21:this.detailLoading=!1;case 22:case"end":return e.stop()}},e,this,[[2,17]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=b["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=b["a"].info||{},t=e.custType;return t}}]),t}(h["e"]);we=f["a"]([Object(h["a"])({name:"",components:{detail:be["a"]},props:{isAdd:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isOnce:{type:Boolean,default:!1},scId:{type:String,default:""},scName:{type:String,default:""}}})],we);var ke=we,xe=ke,Fe=(a("4d34"),Object(J["a"])(xe,fe,he,!1,null,"608835cd",null)),Le=Fe.exports;function _e(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function Oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_e(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_e(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Te=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.pageType="product-page",e.dialogTitle="",e.isAddEditVisible=!1,e.isBookingVisible=!1,e.isEdit=!1,e.isBook=!1,e.loading=!1,e.bookingLoading=!1,e.isGroupsVisible=!1,e.tableData=[],e.selectValue={persionId:void 0,countryId:void 0,frequency:void 0,status:void 0,bscId:void 0,bscTransId:void 0,type:void 0,bscName:void 0,shipTime:[],cutoffTime:[]},e.supplyForm={planId:"",supplyName:"",type:"",supplyId:void 0,notifier:void 0,consignee:void 0,consignor:void 0},e.rules={supplyId:{required:!0,message:"请选择供应商",trigger:"change"},notifier:{required:!0,message:"请选择通知人",trigger:"change"},consignee:{required:!0,message:"请选择收获人",trigger:"change"},consignor:{required:!0,message:"请选择发货人",trigger:"change"}},e.supplierlist=[],e.selectLoading=!1,e.page=1,e.size=10,e.total=0,e.persionList=[],e.countryList=[],e.typelist=[],e.flightList=[],e.bsTransList=[],e.notifierList=[],e.consigneeList=[],e.consignorList=[],e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"dispatchFormat",value:function(e){var t={0:"快递",1:"卡派",2:"自提",3:"整柜直送"},a=("".concat(e.dispatch)||"").split(","),i=[];return a.map(function(e){i.push(t[e])}),i.join(",")}},{key:"getConsignorList",value:function(){var e=this;this.selectLoading=!0,V({type:0,custId:this.custId,page:1,size:999}).then(function(t){e.selectLoading=!1;var a=t.data||{};e.consignorList=a.result||[]}).catch(function(){e.selectLoading=!1,e.consignorList=[]})}},{key:"getConsigneeList",value:function(){var e=this;this.selectLoading=!0,V({type:1,custId:this.custId,page:1,size:999}).then(function(t){e.selectLoading=!1;var a=t.data||{};e.consigneeList=a.result||[]}).catch(function(){e.selectLoading=!1,e.consigneeList=[]})}},{key:"getNotifierList",value:function(){var e=this;this.selectLoading=!0,V({type:2,custId:this.custId,page:1,size:999}).then(function(t){e.selectLoading=!1;var a=t.data||{};e.notifierList=a.result||[]}).catch(function(){e.selectLoading=!1,e.notifierList=[]})}},{key:"showProduct",value:function(){this.pageType="product-page",this.queryAll(1)}},{key:"showProductTemplate",value:function(){this.pageType="product-template-page",this.selectValue.status="",this.queryAll(1)}},{key:"formatShipDate",value:function(e){return e.shipDate?Y()(e.shipDate).format("YYYY-MM-DD HH:mm"):"--"}},{key:"formatCutoffDate",value:function(e){return e.cutoffDate?Y()(e.cutoffDate).format("YYYY-MM-DD HH:mm"):"--"}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectValue.shipTime=[Y()().startOf("month").format("YYYY-MM-DD"),Y()().endOf("month").format("YYYY-MM-DD")],this.queryAll();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPersionList",value:function(){var e=this,t={page:1,size:99999};this.selectLoading=!0,T(t).then(function(t){var a=t.data||{};e.persionList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getBusinessType",value:function(){var e=this;this.selectLoading=!0;var t={type:"BOOKING_BUSINESS_TYPE"};C(t).then(function(t){t.success&&(e.typelist=t.data||[],e.selectLoading=!1)}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onType",value:function(){this.flightList=[],this.bsTransList=[],this.selectValue.bscId=void 0,this.selectValue.bscTransId=void 0}},{key:"onFlight",value:function(){var e=this;this.selectValue.bscTransId=void 0,this.bsTransList=[],this.getCountryList(),this.flightList.map(function(t){e.selectValue.bscId===t.id&&(e.selectValue.countryId=t.countryToId)})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,D().then(function(t){if(e.selectLoading=!1,t.success){var a=t.data||{};e.countryList=a.result||[]}}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getBscList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,conveyance:this.selectValue.type,countryToId:this.selectValue.countryId};I(t).then(function(t){var a=t.data||{},i=a.result;e.flightList=i.map(function(e){return e.id=e.id+"",e}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,[t,null]})}},{key:"getBsTransList",value:function(){var e=this,t={page:1,size:999,model:{id:this.selectValue.bscId}};this.selectLoading=!0,Object(R["g"])(t).then(function(t){var a=t.data||{};e.bsTransList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"queryAll",value:function(e){var t=this;this.loading=!0;var a=this.selectValue,i=a.shipTime,n=a.cutoffTime,r=Object(s["a"])(a,["shipTime","cutoffTime"]);e&&(this.page=e);var l={page:this.page,size:this.size,model:Oe({},r,{source:1})};"product-template-page"===this.pageType&&(l.model.source=0),Array.isArray(i)&&i.length>0&&(l.model.shipStart=i[0],l.model.shipEnd=i[1]),Array.isArray(n)&&n.length>0&&(l.model.cutoffStart=n[0],l.model.cutoffEnd=n[1]),w(l).then(function(e){var a=e.data||{};t.tableData=a.result||[],t.total=a.total,t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"addProduct",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isAddEditVisible=!0,"product-template-page"===this.pageType?this.dialogTitle="新增发货计划模板":this.dialogTitle="新增发货计划",this.isEdit=!1,this.isBook=!1;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"editProduct",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.isAddEditVisible=!0,"product-template-page"===this.pageType?this.dialogTitle="编辑发货计划模板":this.dialogTitle="编辑发货计划",this.isEdit=!0,this.isBook=1===t.ifBooking,this.$nextTick(function(){var e=a.$refs.addEditForm;e.setData(t)});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"viewProduct",value:function(e){var t=this;this.pageType="product-detail",this.$nextTick(function(){var a=t.$refs.detail;a.show(e.id)})}},{key:"makeBooking",value:function(e){this.isBookingVisible=!0;var t=e.id,a=e.supplyId,i=e.supplyName,n=e.type;this.supplyForm={planId:t,supplyId:a,supplyName:i,type:n,notifier:void 0,consignee:void 0,consignor:void 0},this.getSupplierList()}},{key:"cancelBooking",value:function(){var e=this;this.isBookingVisible=!1,this.supplyForm={planId:"",supplyName:"",type:"",supplyId:void 0,notifier:void 0,consignee:void 0,consignor:void 0},this.$nextTick(function(){var t=e.$refs.supplyForm;t.clearValidate()})}},{key:"saveBooking",value:function(){var e=this,t=this.$refs.supplyForm;t.validate(function(t){if(!t)return!1;e.bookingLoading=!0;var a={planId:e.supplyForm.planId,supplyId:e.supplyForm.supplyId,notice:e.notifierList.find(function(t){return t.id===e.supplyForm.notifier})||{},receiving:e.consigneeList.find(function(t){return t.id===e.supplyForm.consignee})||{},sending:e.consignorList.find(function(t){return t.id===e.supplyForm.consignor})||{}};e.supplierlist.map(function(e){e.custId===a.supplyId&&(a.supplyName=e.custName)}),F(a).then(function(t){e.$message({type:"success",message:"保存成功"}),e.bookingLoading=!1,e.queryAll(),e.cancelBooking()}).catch(function(t){return e.bookingLoading=!1,t})})}},{key:"close",value:function(){this.cancel()}},{key:"cancel",value:function(){this.isAddEditVisible=!1,this.clearValidate()}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.addEditForm,a=t.$refs.selectForm;t.resetForm(),a.clearValidate()})}},{key:"getSupplierList",value:function(){var e=this;this.selectLoading=!0;var t={typeId:"02",cas:"S",subtypeId:this.supplyForm.type,page:1,size:9999};$(t).then(function(t){var a=t.data||{};e.supplierlist=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"viewGroups",value:function(e){this.isGroupsVisible=!0}},{key:"closeGroups",value:function(){this.isGroupsVisible=!1}},{key:"editPlan",value:function(){}},{key:"saveByCancel",value:function(e){this.queryAll()}},{key:"saveByNow",value:function(e,t){var a=this,i=Oe({},e,{isNow:1});"2"===t&&(i.isNow=0),_({id:i.id,enable:i.enable,isNow:i.isNow}).then(function(e){a.$message({type:"success",message:"操作成功"}),a.queryAll()}).catch(function(e){return a.loading=!1,e})}},{key:"onStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,a){var i,n,l,s,o,c,u,d,p=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.status.toString(),n=a.toString(),1*n===0){e.next=19;break}if(i&&i!==n){e.next=5;break}return e.abrupt("return");case 5:return l="1"===n?"禁用":"开启",e.next=8,this.$confirm("此操作将".concat(l,"该发货计划，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 8:if(s=e.sent,o=Object(r["a"])(s,2),c=o[0],o[1],!c){e.next=15;break}return this.queryAll(),e.abrupt("return");case 15:this.loading=!0,_({id:t.id,enable:a,isNow:0}).then(function(e){p.$message({type:"success",message:"操作成功"}),p.queryAll()}).catch(function(e){return p.loading=!1,e}),e.next=22;break;case 19:u={id:t.id,shipDate:t.shipDate,cutoffDate:t.cutoffDate,frequency:t.frequency,enable:a,isNow:0},d=this.$refs.hintModel,d.show(u);case 22:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}()},{key:"cancelProduct",value:function(e){var t=this;this.$confirm("请确认是否取消该计划?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,_({id:e.id,enable:1,isNow:0}).then(function(e){t.$message({type:"success",message:"操作成功"}),t.queryAll()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"deleteProduct",value:function(e){var t=this;this.$confirm("请确认是否删除该计划?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,L({id:e.id}).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"custType",get:function(){var e=b["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=b["a"].info||{},t=e.custSubtype;return t}},{key:"custId",get:function(){var e=b["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=b["a"].info||{},t=e.custName;return t}},{key:"pickerOptions",get:function(){return{}}}]),t}(h["e"]);Te=f["a"]([Object(h["a"])({name:"",components:{addEditForm:le,deliveryGroups:me,hintModel:X,detail:Le},props:{}})],Te);var Ie=Te,Se=Ie,je=(a("2e84"),Object(J["a"])(Se,i,n,!1,null,"90738788",null));t["default"]=je.exports},"4d34":function(e,t,a){"use strict";var i=a("178f"),n=a.n(i);n.a},"5dc9":function(e,t,a){},"964b":function(e,t,a){e.exports={menuBg:"#304156",menuText:"#bfcbd9",menuActiveText:"#409EFF"}},b32a:function(e,t,a){"use strict";var i=a("964b"),n=a.n(i);n.a},cb13:function(e,t,a){},e9ca:function(e,t,a){}}]);