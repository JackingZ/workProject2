(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sales-billboard"],{"33bf":function(t,e,a){},"7f5c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[i("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.detailShow,expression:"!detailShow"},{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-container"},[i("head-info",{attrs:{info:"",title:"销售看板"},scopedSlots:t._u([{key:"option",fn:function(){return[i("el-radio-group",{attrs:{size:"small"},on:{change:t.onView},model:{value:t.viewType,callback:function(e){t.viewType=e},expression:"viewType"}},[t.$checkPermission(["salesCompanyBillboard"])?i("el-radio-button",{attrs:{label:"1"}},[t._v("\n              公司看板\n            ")]):t._e(),t.$checkPermission(["salesDepartBillboard"])?i("el-radio-button",{attrs:{label:"2"}},[t._v("\n              部门看板\n            ")]):t._e(),t.$checkPermission(["salesMenBillboard"])?i("el-radio-button",{attrs:{label:"3"}},[t._v("\n              员工看板\n            ")]):t._e()],1)]},proxy:!0}])}),i("div",{directives:[{name:"show",rawName:"v-show",value:t.viewType,expression:"viewType"}],staticClass:"app-panel"},[i("div",{staticStyle:{"text-align":"right","padding-bottom":"10px"}},["0"===t.custType?i("el-select",{staticStyle:{width:"150px","margin-right":"5px"},attrs:{loading:t.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:t.onCompany1,focus:t.getCompanyList},model:{value:t.searchForm.parentId,callback:function(e){t.$set(t.searchForm,"parentId",e)},expression:"searchForm.parentId"}},t._l(t.companyList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):t._e(),"1"!==t.viewType&&("0"===t.custType||"2"===t.custType&&"1"===t.custSubtype)?i("el-select",{staticStyle:{width:"150px","margin-right":"5px"},attrs:{disabled:"0"===t.custType&&!t.searchForm.parentId,loading:t.selectLoading,size:"small",placeholder:"分公司",filterable:"",clearable:""},on:{change:t.onUnCompany1,focus:function(e){return t.getUnFinanceCompanyList("1")}},model:{value:t.searchForm.comId,callback:function(e){t.$set(t.searchForm,"comId",e)},expression:"searchForm.comId"}},t._l(t.unCompanyList1,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1):t._e(),"3"===t.viewType?i("el-tree-select",{staticStyle:{display:"inline-block",width:"140px","margin-right":"5px"},attrs:{disabled:!t.searchForm.comId,data:t.departmentList1,"default-expand-all":!1,clearable:"",filterable:"",size:"small",placeholder:"部门"},on:{change:t.onDepart1},model:{value:t.searchForm.departId,callback:function(e){t.$set(t.searchForm,"departId",e)},expression:"searchForm.departId"}}):t._e(),i("el-date-picker",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{type:"year",placeholder:"年度","value-format":"yyyy",size:"small",clearable:""},on:{change:t.onYear1},model:{value:t.searchForm.year,callback:function(e){t.$set(t.searchForm,"year",e)},expression:"searchForm.year"}}),i("el-select",{staticStyle:{width:"150px","margin-right":"5px"},attrs:{loading:t.selectLoading,disabled:!t.searchForm.year||!t.firstId,placeholder:"期间",size:"small",clearable:"",filterable:""},on:{focus:function(e){return t.getFiscalList("1")},change:t.onFiscal1},model:{value:t.searchForm.period,callback:function(e){t.$set(t.searchForm,"period",e)},expression:"searchForm.period"}},t._l(t.fiscalList1,function(t,e){return i("el-option",{key:e,attrs:{label:t.fiscalPeriod,value:t.id}})}),1),i("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{size:"small",placeholder:"周期",clearable:"",filterable:""},on:{change:t.onWeek1},model:{value:t.searchForm.week,callback:function(e){t.$set(t.searchForm,"week",e)},expression:"searchForm.week"}},t._l(t.weekList1,function(t){return i("el-option",{key:t.id,attrs:{label:"第"+t.id+"周("+t.start+"~"+t.end+")",value:t.id}})}),1)],1),i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:6}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("svg-icon",{attrs:{name:"air"}}),t._v("\n                  空运\n                ")],1),i("el-col",{staticStyle:{"text-align":"right","font-size":"14px"},attrs:{span:16}},[t._v("\n                  "+t._s(t.taskObj.planAir>=0?"计划 "+t.taskObj.planAir+"KG":"暂无计划")+"\n                ")])],1),i("div",{staticStyle:{height:"10px"}}),i("el-row",[i("el-col",{staticStyle:{"font-size":"14px"},attrs:{span:18}},[t._v("\n                  完成 "),i("span",{staticStyle:{"font-size":"24px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.taskObj.actualAir>=0?t.taskObj.actualAir:"--")+"\n                  ")]),t._v(" KG\n                ")]),i("el-col",{staticStyle:{"text-align":"right","line-height":"27px","font-size":"14px"},attrs:{span:6}},[t.taskObj.actualAir>=0?i("span",{class:t.taskObj.actualAir<t.taskObj.planAir?"num-min":"num-max"},[t._v("\n                    "+t._s(t.taskObj.air+"%")+"\n                  ")]):i("span",[t._v("--")])])],1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("svg-icon",{attrs:{name:"boat"}}),t._v("\n                  海运\n                ")],1),i("el-col",{staticStyle:{"text-align":"right","font-size":"14px"},attrs:{span:16}},[t._v("\n                  "+t._s(t.taskObj.planSea>=0?"计划 "+t.taskObj.planSea+"CBM":"暂无计划")+"\n                ")])],1),i("div",{staticStyle:{height:"10px"}}),i("el-row",[i("el-col",{staticStyle:{"font-size":"14px"},attrs:{span:18}},[t._v("\n                  完成 "),i("span",{staticStyle:{"font-size":"24px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.taskObj.actualSea>=0?t.taskObj.actualSea:"--")+"\n                  ")]),t._v(" CBM\n                ")]),i("el-col",{staticStyle:{"text-align":"right","line-height":"27px","font-size":"14px"},attrs:{span:6}},[t.taskObj.actualSea>=0?i("span",{class:t.taskObj.actualSea<t.taskObj.planSea?"num-min":"num-max"},[t._v("\n                    "+t._s(t.taskObj.sea+"%")+"\n                  ")]):i("span",[t._v("--")])])],1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("svg-icon",{attrs:{name:"train"}}),t._v("\n                  铁路\n                ")],1),i("el-col",{staticStyle:{"text-align":"right","font-size":"14px"},attrs:{span:16}},[t._v("\n                  "+t._s(t.taskObj.planTrain>=0?"计划 "+t.taskObj.planTrain+"CBM":"暂无计划")+"\n                ")])],1),i("div",{staticStyle:{height:"10px"}}),i("el-row",[i("el-col",{staticStyle:{"font-size":"14px"},attrs:{span:18}},[t._v("\n                  完成 "),i("span",{staticStyle:{"font-size":"24px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.taskObj.actualTrain>=0?t.taskObj.actualTrain:"--")+"\n                  ")]),t._v(" CBM\n                ")]),i("el-col",{staticStyle:{"text-align":"right","line-height":"27px","font-size":"14px"},attrs:{span:6}},[t.taskObj.actualTrain>=0?i("span",{class:t.taskObj.actualTrain<t.taskObj.planTrain?"num-min":"num-max"},[t._v("\n                    "+t._s(t.taskObj.train+"%")+"\n                  ")]):i("span",[t._v("--")])])],1)],1)],1),i("el-col",{attrs:{span:6}},[i("el-card",{attrs:{shadow:"hover"}},[i("el-row",[i("el-col",{attrs:{span:8}},[i("svg-icon",{attrs:{name:"car"}}),t._v("\n                  卡航\n                ")],1),i("el-col",{staticStyle:{"text-align":"right","font-size":"14px"},attrs:{span:16}},[t._v("\n                  "+t._s(t.taskObj.planCar>=0?"计划 "+t.taskObj.planCar+"KG":"暂无计划")+"\n                ")])],1),i("div",{staticStyle:{height:"10px"}}),i("el-row",[i("el-col",{staticStyle:{"font-size":"14px"},attrs:{span:18}},[t._v("\n                  完成 "),i("span",{staticStyle:{"font-size":"24px","font-weight":"bold"}},[t._v("\n                    "+t._s(t.taskObj.actualCar>=0?t.taskObj.actualCar:"--")+"\n                  ")]),t._v(" KG\n                ")]),i("el-col",{staticStyle:{"text-align":"right","line-height":"27px","font-size":"14px"},attrs:{span:6}},[t.taskObj.actualCar>=0?i("span",{class:t.taskObj.actualCar<t.taskObj.planCar?"num-min":"num-max"},[t._v("\n                    "+t._s(t.taskObj.car+"%")+"\n                  ")]):i("span",[t._v("--")])])],1)],1)],1)],1),i("el-row",{staticStyle:{"padding-top":"20px","border-bottom":"2px solid #dfe4ed"}},[i("el-col",{attrs:{span:7}},[i("el-tabs",{staticClass:"tabs-set",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"空运",name:"0"}}),i("el-tab-pane",{attrs:{label:"海运",name:"1"}}),i("el-tab-pane",{attrs:{label:"铁路",name:"2"}}),i("el-tab-pane",{attrs:{label:"卡航",name:"4"}})],1)],1),i("el-col",{attrs:{span:17}},[t._e()])],1),t.tableData2.length?i("div",{staticStyle:{display:"flex","flex-flow":"row nowrap"}},[i("div",{staticStyle:{flex:"1"}},[i("ve-histogram",{attrs:{data:t.chartData2,settings:t.chartSettings2,extend:t.chartExtend2,grid:t.chartGrid2,tooltip:t.chartTooltip2,events:t.chartEvents,height:"500px"}})],1),i("div",{staticStyle:{width:"400px",height:"500px","overflow-y":"auto",padding:"0"}},[i("div",{staticStyle:{height:"40px","line-height":"40px","font-size":"14px"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:"1"===t.viewType,expression:"viewType === '1'"}]},[t._v("公司排名")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"2"===t.viewType,expression:"viewType === '2'"}]},[t._v("部门排名")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"3"===t.viewType,expression:"viewType === '3'"}]},[t._v("员工排名")])]),t._l(t.tableOption2,function(e,a){return i("div",{key:a,staticStyle:{padding:"6px 2px","font-size":"14px"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("i",{staticClass:"tips-index",class:[0,1,2].includes(a)?"tips-top":""},[i("span",{staticStyle:{"margin-left":"-3px"}},[t._v(t._s(a+1))])]),i("span",{directives:[{name:"show",rawName:"v-show",value:"1"===t.viewType,expression:"viewType === '1'"}]},[t._v(" "+t._s(e.companyName))]),i("span",{directives:[{name:"show",rawName:"v-show",value:"2"===t.viewType,expression:"viewType === '2'"}]},[t._v(" "+t._s(e.deptName))]),i("span",{directives:[{name:"show",rawName:"v-show",value:"3"===t.viewType,expression:"viewType === '3'"}]},[t._v(" "+t._s(e.userName))])]),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[t._v("\n                  "+t._s(e.actualNum)+"\n                  "+t._s("1"===t.activeName||"2"===t.activeName?"CBM":"KG")+"\n                  "+t._s(e.percent+"%")+"\n                ")])],1)],1)})],2)]):i("div",{staticClass:"empty-data"},[i("img",{attrs:{src:a("c4a1"),alt:""}}),i("span",{staticClass:"empty-text"},[t._v("暂无数据")])]),i("el-row",{staticStyle:{"padding-top":"20px","border-bottom":"2px solid #dfe4ed"}},[i("el-col",{attrs:{span:7}},[i("el-tabs",{staticClass:"tabs-set",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"空运",name:"0"}}),i("el-tab-pane",{attrs:{label:"海运",name:"1"}}),i("el-tab-pane",{attrs:{label:"铁路",name:"2"}}),i("el-tab-pane",{attrs:{label:"卡航",name:"4"}})],1)],1),i("el-col",{attrs:{span:17}},[t._e()])],1),t.tableData3.length?i("div",{staticStyle:{display:"flex","flex-flow":"row nowrap"}},[i("div",{staticStyle:{flex:"1"}},[i("ve-histogram",{attrs:{data:t.chartData3,settings:t.chartSettings3,extend:t.chartExtend3,grid:t.chartGrid3,tooltip:t.chartTooltip3,events:t.chartEvents,height:"500px"}})],1),i("div",{staticStyle:{width:"400px",height:"500px","overflow-y":"auto",padding:"0"}},[t._m(0),t._l(t.tableOption3,function(e,a){return i("div",{key:a,staticStyle:{padding:"6px 2px","font-size":"14px"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("i",{staticClass:"tips-index",class:[0,1,2].includes(a)?"tips-top":""},[i("span",{staticStyle:{"margin-left":"-3px"}},[t._v(t._s(a+1))])]),i("span",[t._v(" "+t._s(e.groupName))])]),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[t._v("\n                  "+t._s(e.actualNum)+"\n                  "+t._s("1"===t.activeName||"2"===t.activeName?"CBM":"KG")+"\n                  "+t._s(e.percent+"%")+"\n                ")])],1)],1)})],2)]):i("div",{staticClass:"empty-data"},[i("img",{attrs:{src:a("c4a1"),alt:""}}),i("span",{staticClass:"empty-text"},[t._v("暂无数据")])])],1)],1),i("detail",{directives:[{name:"show",rawName:"v-show",value:t.detailShow,expression:"detailShow"}],ref:"detail",on:{close:function(e){t.detailShow=!1}}})],1)])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"40px","line-height":"40px","font-size":"14px"}},[a("span",[t._v("服务组排名")])])}],n=(a("8e6e"),a("ac6a"),a("456d"),a("6762"),a("2fdb"),a("55dd"),a("bd86")),r=a("a8db"),o=(a("a481"),a("7514"),a("d225")),c=a("b0b4"),l=a("308d"),h=a("6bb5"),p=a("4e2b"),d=a("9ab4"),u=a("60a3"),m=a("9dba"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-panel"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("span",{staticStyle:{"line-height":"32px"}},[t._v("详情")])]),a("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:18}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goBack}},[t._v("\n          返 回\n        ")])],1)],1),a("ve-histogram",{attrs:{data:t.chartData,extend:t.chartExtend,settings:t.chartSettings}}),a("el-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:t.tableData,height:"350",border:""}},[a("el-table-column",{attrs:{label:"订单名称",width:"120",prop:"name"}}),a("el-table-column",{attrs:{label:"业务类型","min-width":"120",prop:"time"}}),a("el-table-column",{attrs:{label:"业务类型-任务量","min-width":"200","show-overflow-tooltip":""}})],1)],1)])},g=[],f=a("ac1a"),y=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(h["a"])(e).apply(this,arguments)),t.loading=!1,t.tableData=[],t.chartData={},t.chartSettings={},t.chartExtend={},t.selectForm={},t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"setData",value:function(t){var e=this;this.$nextTick(function(){e.getOriginData()})}},{key:"queryAll",value:function(t){}},{key:"getOriginData",value:function(){this.chartData={columns:["名称","目标量","完成量","完成率"],rows:[{"名称":"xxxxxxx服务组","目标量":1393,"完成量":1093,"完成率":.32},{"名称":"xxxxxxxxxxxx服务组","目标量":3530,"完成量":3230,"完成率":.26},{"名称":"xxxxxxxxxxxxxxx服务组","目标量":2923,"完成量":2623,"完成率":.76},{"名称":"xxxxxxxxxxxxxxxx服务组","目标量":1723,"完成量":1423,"完成率":.49},{"名称":"xxxxxxxxxxxxxxxxx服务组","目标量":3792,"完成量":3492,"完成率":.323},{"名称":"xxxxxxxxxxxxxx服务组","目标量":4593,"完成量":4293,"完成率":.78}]},this.chartSettings={stack:{"量":["目标量","完成量"]}},this.chartExtend={title:{text:"任务量",textStyle:{fontSize:14,color:"#666",fontWeight:"normal"},left:"3%",top:"5%"},legend:{top:"5%",right:"5%",orient:"horizontal",padding:10,itemGap:10,itemWidth:20,itemHeight:10,icon:"circle"}}}},{key:"goBack",value:function(){this.$emit("close")}},{key:"labelPosition",get:function(){var t=f["a"].language;return t&&"en"===t?"top":"left"}},{key:"lang",get:function(){var t=f["a"].language;return t||"en"}}]),e}(u["e"]);y=d["a"]([Object(u["a"])({name:"",components:{},props:{}})],y);var b=y,x=b,w=a("2877"),k=Object(w["a"])(x,v,g,!1,null,"76d324f4",null),I=k.exports,O=a("b32d");function S(t){var e={url:"/orders/year_plan/head",method:"post",data:t};return Object(O["a"])(e)}function _(t){var e={url:"/orders/year_plan/body",method:"post",data:t};return Object(O["a"])(e)}function D(t){var e={url:"/orders/year_plan/group_details",method:"post",data:t};return Object(O["a"])(e)}function F(t){var e={url:"/auth/dept/getDeptList",method:"get",params:t};return Object(O["a"])(e)}function L(t){var e={url:"/finance/fisCal/get",method:"post",data:t};return Object(O["a"])(e)}function T(){var t={url:"/auth/agent/customer_finance",method:"get"};return Object(O["a"])(t)}function j(t){var e={url:"/auth/agent/customer_by_id",method:"get",params:t};return Object(O["a"])(e)}function C(t){var e={url:"/auth/agent/getAgentList",method:"get",params:t};return Object(O["a"])(e)}var N=a("5a0c"),z=a.n(N);function Y(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,i)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Y(a,!0).forEach(function(e){Object(n["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Y(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var P=function(t){function e(){var t;return Object(o["a"])(this,e),t=Object(l["a"])(this,Object(h["a"])(e).apply(this,arguments)),t.activeName="0",t.activeTab="0",t.loading=!1,t.selectLoading=!1,t.detailShow=!1,t.tableData2=[],t.tableOption2=[],t.tableData3=[],t.tableOption3=[],t.viewType="",t.typeList=[],t.companyList=[],t.unCompanyList1=[],t.unCompanyList2=[],t.unCompanyList3=[],t.fiscalList1=[],t.fiscalList2=[],t.fiscalList3=[],t.departmentList1=[],t.departmentList2=[],t.departmentList3=[],t.weekList1=[],t.weekList2=[],t.weekList3=[],t.firstId="",t.secondId="",t.thirdId="",t.taskObj={},t.chartData3={},t.chartSettings3={},t.chartExtend3={},t.chartGrid3={},t.chartTooltip3={},t.chartData2={},t.chartSettings2={},t.chartExtend2={},t.chartGrid2={},t.chartTooltip2={},t.chartEvents={click:function(e){t.chartClick(e)}},t.colorList=["rgba(64, 158, 255, 1)","rgba(245, 108, 108, 1)"],t.searchForm={comType:"1",parentId:"",comId:"",departId:"",year:"",period:"",week:""},t.selectForm={comType:"1",comId:"",parentId:"",departId:"",year:"",period:"",week:""},t.serviceForm={comType:"1",comId:"",parentId:"",departId:"",year:"",period:"",week:""},t}return Object(p["a"])(e,t),Object(c["a"])(e,[{key:"clearData2",value:function(){this.tableData2=[],this.tableOption2=[],this.chartSettings2={},this.chartTooltip2={},this.chartExtend2={},this.chartGrid2={},this.getOriginData2()}},{key:"clearData3",value:function(){this.tableData3=[],this.tableOption3=[],this.chartSettings3={},this.chartTooltip3={},this.chartExtend3={},this.chartGrid3={},this.getOriginData3()}},{key:"onView",value:function(){this.searchForm.departId="",this.onYear1()}},{key:"handleClick",value:function(t,e){this.clearData2(),this.clearData3(),this.getPage()}},{key:"onCompany1",value:function(t){this.searchForm.comId="",this.unCompanyList1=[],this.searchForm.departId="",this.departmentList1=[],this.onYear1(),this.firstId="",this.clearData2(),this.clearData3();var e=this.companyList.find(function(e){return e.id===t});e&&(this.firstId=t)}},{key:"onUnCompany1",value:function(t){this.taskObj={},this.clearData2(),this.clearData3(),this.searchForm.departId="",this.departmentList1=[],this.getDepartment("1"),this.getPage()}},{key:"onDepart1",value:function(){this.taskObj={},this.clearData2(),this.clearData3(),this.getPage()}},{key:"onYear1",value:function(){this.taskObj={},this.searchForm.period=void 0,this.searchForm.monthStart="",this.searchForm.monthEnd="",this.fiscalList1=[],this.searchForm.week="",this.searchForm.start="",this.searchForm.end="",this.weekList1=[],this.clearData2(),this.clearData3()}},{key:"getCompanyList",value:function(){var t=this;this.selectLoading=!0;var e={page:1,size:9999,parentId:this.custId};C(e).then(function(e){var a=e.data||{};t.companyList=a.result||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e})}},{key:"getUnFinanceCompanyList",value:function(t){var e=this,a=this.custType;if(this.selectLoading=!0,"0"===a){var i={custId:"1"===t?this.searchForm.parentId:"2"===t?this.selectForm.parentId:this.serviceForm.parentId};j(i).then(function(a){var i=a.data||[];"1"===t?e.unCompanyList1=i:"2"===t?e.unCompanyList2=i:"3"===t&&(e.unCompanyList3=i),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}else T().then(function(a){var i=a.data||[];"1"===t?e.unCompanyList1=i:"2"===t?e.unCompanyList2=i:"3"===t&&(e.unCompanyList3=i),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getFiscalList",value:function(t){var e=this;this.selectLoading=!0;var a={page:1,size:9999,year:"1"===t?this.searchForm.year:"2"===t?this.selectForm.year:this.serviceForm.year,custTag:"1",custId:["1"===t?this.firstId:"2"===t?this.secondId:this.thirdId]};L(a).then(function(a){var i=a.data||{};"1"===t?e.fiscalList1=i.result||[]:"2"===t?e.fiscalList2=i.result||[]:"3"===t&&(e.fiscalList3=i.result||[]),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onFiscal1",value:function(t){var e=this;this.searchForm.monthStart="",this.searchForm.monthEnd="",this.searchForm.week="",this.searchForm.start="",this.searchForm.end="",this.weekList1=[],this.taskObj={},this.clearData2(),this.clearData3();var a=this.fiscalList1.find(function(t){return t.id===e.searchForm.period});a&&(this.searchForm.monthStart=z()(a.startTime).format("YYYY-MM-DD")+" 00:00:00",this.searchForm.monthEnd=z()(a.endTime).format("YYYY-MM-DD")+" 23:59:59",this.setWeek("1"),this.getPage())}},{key:"setWeek",value:function(t){var e="",a="";"1"===t?(e=this.searchForm.monthStart,a=this.searchForm.monthEnd):"2"===t?(e=this.selectForm.monthStart,a=this.selectForm.monthEnd):"3"===t&&(e=this.serviceForm.monthStart,a=this.serviceForm.monthEnd);var i=z()(e).format("YYYY-MM-DD"),s=z()(a).format("YYYY-MM-DD"),n=z()(i).day(),r="";r=n>0?z()(i).endOf("week").add(1,"day").format("YYYY-MM-DD"):i;var o=z()(r).unix(),c=z()(s).unix(),l=[];if(o>=c)l=[{start:i,end:s,days:z()(s).diff(z()(i),"day")+1,id:"1"}];else for(var h=(c-o)/604800,p=Math.ceil(h),d=0;d<=p;d++){var u=z()(r).add(7*(d-1)+1,"day").format("YYYY-MM-DD"),m=z()(r).add(7*d,"day").format("YYYY-MM-DD");0===d?l.push({start:i,end:r,days:z()(r).diff(z()(i),"day")+1,id:"".concat(d+1)}):d===p?l.push({start:u,end:s,days:z()(s).diff(z()(u),"day")+1,id:"".concat(p+1)}):l.push({start:u,end:m,days:7,id:"".concat(d+1)})}"1"===t?this.weekList1=l:"2"===t?this.weekList2=l:"3"===t&&(this.weekList3=l)}},{key:"onWeek1",value:function(t){this.searchForm.start="",this.searchForm.end="",this.taskObj={},this.clearData2(),this.clearData3();var e=this.weekList1.find(function(e){return e.id===t});e&&(this.searchForm.start=e.start+" 00:00:00",this.searchForm.end=e.end+" 23:59:59"),this.getPage()}},{key:"getDepartment",value:function(t){var e=this,a={custId:"1"===t?this.searchForm.comId:"2"===t?this.selectForm.comId:this.serviceForm.comId,deptId:""};F(a).then(function(a){var i=a.data.result||[],s=JSON.parse(JSON.stringify(i).replace(/name/g,"label").replace(/id/g,"value"));"1"===t?e.departmentList1=s:"2"===t?e.departmentList2=s:"3"===t?e.departmentList3=s:(e.departmentList1=s,e.departmentList2=s,e.departmentList3=s)}).catch(function(t){return t})}},{key:"getPage",value:function(){var t=this.custType,e=this.custSubtype;"0"!==t||"1"!==this.viewType||this.searchForm.parentId?"0"!==t&&("2"!==t||"1"!==e)||"2"!==this.viewType||this.searchForm.comId?"3"!==this.viewType||this.searchForm.departId?this.searchForm.period?(this.handleSearch(),this.queryAll(),this.getTableData()):this.$message.error("请选择期间"):this.$message.error("请选择部门"):this.$message.error("请选择分公司"):this.$message.error("请选择所属公司")}},{key:"handleSearch",value:function(){var t=this,e=this.custType;this.loading=!0;var a=this.searchForm,i=(a.comType,a.comId),s=a.departId,n=a.parentId,o=(a.week,Object(r["a"])(a,["comType","comId","departId","parentId","week"])),c="";c="1"===this.viewType?"0"===e?n:this.custId:i;var l=M({},o,{type:this.viewType,companyId:c,deptId:s});S(l).then(function(e){var a=e.data||{};t.taskObj=a,t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"queryAll",value:function(){var t=this,e=this.custType,a=this.searchForm,i=(a.comType,a.comId),s=a.departId,n=a.parentId,o=(a.week,Object(r["a"])(a,["comType","comId","departId","parentId","week"])),c="";c="1"===this.viewType?"0"===e?n:this.custId:i;var l=M({},o,{type:this.viewType,business:this.activeName,companyId:c,deptId:s});_(l).then(function(e){var a=e.data||[],i=[];a.map(function(e,a){i.push({"名称":"1"===t.viewType?e.companyName:"2"===t.viewType?e.deptName:e.userName,"计划量":e.planNum,"完成量":e.actualNum,percent:e.percent})}),t.tableData2=i,t.tableOption2=a.sort(function(t,e){return e.actualNum-t.actualNum}),t.getOriginData2()}).catch(function(t){return t})}},{key:"getOriginData2",value:function(){var t=this;this.chartData2={columns:["名称","计划量","完成量"],rows:this.tableData2},this.chartSettings2={showLine:["计划量"]},this.chartTooltip2={trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var a=e[0].dataIndex,i=e[0].axisValue,s=t.tableData2[a].percent,n="";return n+=i+"<br/>",e.map(function(e){n+="".concat(e.marker," ").concat(e.seriesName,"：").concat(e.data)+(["0","4"].includes(t.activeName)?"KG":"CBM")+"<br/>"}),n+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;完成率："+s+"%",n}},this.chartGrid2={top:50,left:30,bottom:20,right:60},this.chartExtend2={title:{text:"任务量",textStyle:{fontSize:14,color:"#666",fontWeight:"normal"},left:60,top:10},legend:{top:10,right:"5%",orient:"horizontal",padding:10,itemGap:10,itemWidth:20,itemHeight:10,icon:"circle"},xAxis:{axisLabel:{rotate:-45,margin:12,fontWeight:"normal",formatter:function(t){var e="",a=10,i=t.length,s=Math.ceil(i/a);if(s>1){var n=t.substring(0,a)+"\n",r=s>2?t.substring(a,a+8)+"...":t.substring(a);e=n+r}else e=t;return e}}},series:function(e){return e.map(function(e){return e.barWidth="20px",e.smooth=!1,e.itemStyle={normal:{color:function(e){return t.colorList[e.seriesIndex]},lineStyle:{color:"rgba(64, 158, 255, 1)"}}},e}),e}}}},{key:"getTableData",value:function(){var t=this,e=this.custType,a=this.searchForm,i=(a.comType,a.comId),s=a.departId,n=a.parentId,o=(a.week,Object(r["a"])(a,["comType","comId","departId","parentId","week"])),c="";c="1"===this.viewType?"0"===e?n:this.custId:i;var l=M({},o,{type:this.viewType,business:this.activeName,companyId:c,deptId:s});D(l).then(function(e){var a=e.data||[],i=[];a.map(function(t,e){i.push({"名称":t.groupName,"计划量":t.planNum,"完成量":t.actualNum,percent:t.percent})}),t.tableData3=i,t.tableOption3=a.sort(function(t,e){return e.actualNum-t.actualNum}),t.getOriginData3()}).catch(function(t){return t})}},{key:"getOriginData3",value:function(){var t=this;this.chartData3={columns:["名称","计划量","完成量"],rows:this.tableData3},this.chartSettings3={showLine:["计划量"]},this.chartTooltip3={trigger:"axis",axisPointer:{type:"line"},formatter:function(e){var a=e[0].dataIndex,i=e[0].axisValue,s=t.tableData3[a].percent,n="";return n+=i+"<br/>",e.map(function(e){n+="".concat(e.marker," ").concat(e.seriesName,"：").concat(e.data)+(["0","4"].includes(t.activeName)?"KG":"CBM")+"<br/>"}),n+="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;完成率："+s+"%",n}},this.chartGrid3={top:50,left:30,bottom:20,right:60},this.chartExtend3={title:{text:"任务量",textStyle:{fontSize:14,color:"#666",fontWeight:"normal"},left:60,top:10},legend:{top:10,right:"5%",orient:"horizontal",padding:10,itemGap:10,itemWidth:20,itemHeight:10,icon:"circle"},xAxis:{axisLabel:{rotate:-45,margin:12,fontWeight:"normal",formatter:function(t){var e="",a=10,i=t.length,s=Math.ceil(i/a);if(s>1){var n=t.substring(0,a)+"\n",r=s>2?t.substring(a,a+8)+"...":t.substring(a);e=n+r}else e=t;return e}}},series:function(e){return e.map(function(e){return e.barWidth="20px",e.smooth=!1,e.itemStyle={normal:{color:function(e){return t.colorList[e.seriesIndex]},lineStyle:{color:"rgba(64, 158, 255, 1)"}}},e}),e}}}},{key:"chartClick",value:function(t){}},{key:"mounted",value:function(){this.getOriginData2(),this.getOriginData3()}},{key:"created",value:function(){var t=this.custType,e=this.custSubtype,a=this.custId,i=this.ifCustomer,s=this.parentId;"2"===t&&"2"===e&&i?(this.firstId=s,this.secondId=s,this.thirdId=s):"0"!==t?(this.firstId=a,this.secondId=a,this.thirdId=a):(this.firstId="",this.secondId="",this.thirdId=""),"0"!==t&&"2"===t&&"1"!==e&&(this.searchForm.comId=this.custId,this.selectForm.comId=this.custId,this.serviceForm.comId=this.custId,this.getDepartment()),this.$checkPermission(["salesCompanyBillboard"])?this.viewType="1":this.$checkPermission(["salesDepartBillboard"])&&!this.$checkPermission(["salesCompanyBillboard"])?this.viewType="2":this.$checkPermission(["salesMenBillboard"])&&!this.$checkPermission(["salesCompanyBillboard","salesDepartBillboard"])&&(this.viewType="3")}},{key:"labelPosition",get:function(){var t=f["a"].language;return t&&"en"===t?"top":"left"}},{key:"lang",get:function(){var t=f["a"].language;return t||"en"}},{key:"custId",get:function(){var t=m["a"].info||{},e=t.custId;return e}},{key:"deptId",get:function(){var t=m["a"].info||{},e=t.deptId;return e}},{key:"custType",get:function(){var t=m["a"].info||{},e=t.custType;return e}},{key:"custSubtype",get:function(){var t=m["a"].info||{},e=t.custSubtype;return e}},{key:"parentId",get:function(){var t=m["a"].info||{},e=t.parentId;return e}},{key:"ifCustomer",get:function(){var t=m["a"].info||{},e=1===t.ifCustomer;return e}}]),e}(u["e"]);P=d["a"]([Object(u["a"])({name:"",components:{detail:I},props:{}})],P);var E=P,$=E,B=(a("8626"),Object(w["a"])($,i,s,!1,null,"2acdf542",null));e["default"]=B.exports},8626:function(t,e,a){"use strict";var i=a("33bf"),s=a.n(i);s.a},c4a1:function(t,e,a){t.exports=a.p+"img/empty.3e473d22.png"}}]);