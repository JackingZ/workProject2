(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["fiscal-period"],{"42f8":function(t,e,r){"use strict";r.d(e,"h",function(){return c}),r.d(e,"w",function(){return s}),r.d(e,"r",function(){return u}),r.d(e,"q",function(){return l}),r.d(e,"a",function(){return d}),r.d(e,"e",function(){return f}),r.d(e,"g",function(){return p}),r.d(e,"b",function(){return m}),r.d(e,"d",function(){return h}),r.d(e,"x",function(){return g}),r.d(e,"m",function(){return y}),r.d(e,"l",function(){return b}),r.d(e,"o",function(){return v}),r.d(e,"s",function(){return O}),r.d(e,"t",function(){return j}),r.d(e,"k",function(){return w}),r.d(e,"B",function(){return k}),r.d(e,"y",function(){return x}),r.d(e,"p",function(){return P}),r.d(e,"u",function(){return S}),r.d(e,"j",function(){return T}),r.d(e,"v",function(){return L}),r.d(e,"A",function(){return F}),r.d(e,"f",function(){return I}),r.d(e,"n",function(){return C}),r.d(e,"z",function(){return z}),r.d(e,"c",function(){return N}),r.d(e,"i",function(){return D});r("8e6e"),r("ac6a"),r("456d");var a=r("bd86"),n=r("b32d");function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(r,!0).forEach(function(e){Object(a["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function c(t){var e={url:"/auth/agent/getAgentList",method:"get",params:t};return Object(n["a"])(e)}function s(){var t={url:"/auth/agent/customer_finance",method:"get"};return Object(n["a"])(t)}function u(t){var e={url:"/finance/bill/page",method:"post",data:t};return Object(n["a"])(e)}function l(t){var e={url:"/finance/bill/item",method:"post",data:t};return Object(n["a"])(e)}function d(t){var e={url:"/finance/bill/add",method:"post",data:t};return Object(n["a"])(e)}function f(t){var e={url:"/finance/bill/edit",method:"post",data:t};return Object(n["a"])(e)}function p(t){var e={url:"/finance/account/export",method:"post",responseType:"blob",params:t};return Object(n["a"])(e)}function m(t){var e={url:"/finance/bill/audit",method:"get",params:t};return Object(n["a"])(e)}function h(t){var e={url:"",method:"post",params:t};return Object(n["a"])(e)}function g(t){var e={url:"/auth/custtype/getServerType",method:"get",params:t};return Object(n["a"])(e)}function y(t){var e={url:"/auth/customer/customer",method:"post",data:t};return Object(n["a"])(e)}function b(t){var e={url:"/setting/currency/getCurrencyList",method:"get",params:o({page:1,size:999},t)};return Object(n["a"])(e)}function v(t){var e={url:"/finance/account/page",method:"post",data:t};return Object(n["a"])(e)}function O(t){var e={url:"/finance/p/page",method:"post",data:t};return Object(n["a"])(e)}function j(t){var e={url:"/finance/r/page",method:"post",data:t};return Object(n["a"])(e)}function w(t){var e={url:"/finance/reconciliation/page",method:"post",data:t};return Object(n["a"])(e)}function k(t){var e={url:"/finance/reconciliation/close",method:"post",data:t};return Object(n["a"])(e)}function x(t){var e={url:"/finance/reconciliation/save",method:"post",data:t};return Object(n["a"])(e)}function P(t){var e={url:"/finance/reconciliation/pageImport",method:"post",data:t};return Object(n["a"])(e)}function S(t){var e={url:"/finance/reconciliation/relation",method:"post",data:t};return Object(n["a"])(e)}function T(t){var e={url:"finance/reconciliation/states",method:"post",data:t};return Object(n["a"])(e)}function L(t){var e={url:"/finance/reconciliation/manualRelation",method:"post",data:t};return Object(n["a"])(e)}function F(t){var e={url:"/finance/reconciliation/automaticRelation",method:"post",data:t};return Object(n["a"])(e)}function I(t){var e={url:"/finance/reconciliation/d",method:"post",responseType:"blob",data:t};return Object(n["a"])(e)}function C(t){var e={url:"/finance/fisCal/get",method:"post",data:t};return Object(n["a"])(e)}function z(t){var e={url:"/finance/fisCal/addOrUpdate",method:"post",data:t};return Object(n["a"])(e)}function N(t){var e={url:"/finance/fisCal/delete",method:"get",params:t};return Object(n["a"])(e)}function D(t){var e={url:"/cfg/type/getServiceTypeList",method:"get",params:t};return Object(n["a"])(e)}},"9d0d":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{staticClass:"app-container"},[r("head-info",{attrs:{info:"",title:"会计期间"}}),r("div",{staticClass:"app-panel"},[r("el-row",{attrs:{type:"flex"}},[r("el-col",{attrs:{span:6}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["fiscalPeriodAdd"],expression:"['fiscalPeriodAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{disabled:"2"===t.custType&&"2"===t.custSubtype&&t.ifCustomer,type:"text",icon:"el-icon-circle-plus-outline"},on:{click:t.addPort}},[t._v("\n              新增\n            ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-date-picker",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{type:"year",placeholder:"年度","value-format":"yyyy",size:"small"},model:{value:t.searchForm.year,callback:function(e){t.$set(t.searchForm,"year",e)},expression:"searchForm.year"}}),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["fiscalPeriodSearch"],expression:"['fiscalPeriodSearch']"}],attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getFiscalList(1)}}},[t._v("\n              查询\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:t.list,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{label:"年度",width:"120",prop:"year"}}),r("el-table-column",{attrs:{label:"会计期间",prop:"fiscalPeriod"}}),r("el-table-column",{attrs:{label:"开始时间",width:"180",prop:"startTime"}}),r("el-table-column",{attrs:{label:"结束时间",width:"180",prop:"endTime"}}),r("el-table-column",{attrs:{label:"备注",prop:"remarks","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"操作",width:"150",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["fiscalPeriodEdit"],expression:"['fiscalPeriodEdit']"}],attrs:{disabled:"1"===e.row.status||"2"===t.custType&&"2"===t.custSubtype&&t.ifCustomer,type:"text",size:"medium"},on:{click:function(r){return t.editPort(e.row)}}},[t._v("\n                编辑\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["fiscalPeriodDelete"],expression:"['fiscalPeriodDelete']"}],attrs:{disabled:"1"===e.row.status||"2"===t.custType&&"2"===t.custSubtype&&t.ifCustomer,type:"text",size:"medium"},on:{click:function(r){return t.deleteData(e.row)}}},[t._v("\n                删除\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":t.page,"page-size":t.size,layout:"total, prev, pager, next",total:t.total},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),r("el-dialog",{attrs:{title:"会计期间",width:"600px",visible:t.dialogShow,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogShow=e},closed:t.close}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.dialogLoading,expression:"dialogLoading"}]},[r("el-form",{ref:"theForm",staticStyle:{"padding-right":"20px"},attrs:{rules:t.formRules,model:t.form,"label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{prop:"year",label:"年度"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year","value-format":"yyyy",placeholder:"年度",size:"small"},on:{change:function(e){t.form.time=[]}},model:{value:t.form.year,callback:function(e){t.$set(t.form,"year",e)},expression:"form.year"}})],1),r("el-form-item",{attrs:{prop:"fiscalPeriod",label:"会计期间"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{autocomplete:"off",maxlength:50},model:{value:t.form.fiscalPeriod,callback:function(e){t.$set(t.form,"fiscalPeriod",e)},expression:"form.fiscalPeriod"}})],1),r("el-form-item",{attrs:{prop:"time",label:"时间区间"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:!t.form.year,"picker-options":t.pickerOptions,"unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:t.form.time,callback:function(e){t.$set(t.form,"time",e)},expression:"form.time"}})],1),r("el-form-item",{attrs:{prop:"remarks",label:"备注"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},maxlength:100,placeholder:"请输入"},model:{value:t.form.remarks,callback:function(e){t.$set(t.form,"remarks",e)},expression:"form.remarks"}})],1)],1),r("div",{staticStyle:{"text-align":"right",padding:"10px 0 20px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.close}},[t._v("\n                取 消\n              ")]),r("el-button",{attrs:{type:"primary"},on:{click:t.saveFiscal}},[t._v("\n                确 定\n              ")])],1)],1)])],1)],1)])])},n=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o=r("a8db"),c=(r("7f7f"),r("7514"),r("d225")),s=r("b0b4"),u=r("308d"),l=r("6bb5"),d=r("4e2b"),f=r("9ab4"),p=r("60a3"),m=r("9dba"),h=r("42f8"),g=r("5a0c"),y=r.n(g);function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,a)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(r,!0).forEach(function(e){Object(i["a"])(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var O=function(t){function e(){var t;return Object(c["a"])(this,e),t=Object(u["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.loading=!1,t.dialogShow=!1,t.dialogLoading=!1,t.selectLoading=!1,t.list=[],t.companyList=[],t.form={year:"",fiscalPeriod:"",startTime:"",endTime:"",time:[],remarks:""},t.formRules={year:[{required:!0,message:"请选择年度",trigger:"change"}],fiscalPeriod:[{required:!0,message:"会计期间不能为空",trigger:"blur"}],time:[{required:!0,message:"请选择时间区间"}]},t.searchForm={year:void 0,comType:"1",comId:void 0},t.companyTypeList=[{id:"1",name:"本公司"},{id:"2",name:"分公司"}],t.scId=t.custId,t.scName=t.custName,t.firstId="",t.page=1,t.size=10,t.total=0,t}return Object(d["a"])(e,t),Object(s["a"])(e,[{key:"onComType",value:function(){this.list=[],this.searchForm.comId="",this.companyList=[],this.scId="",this.scName="","2"!==this.searchForm.comType&&(this.scId=this.custId,this.scName=this.custName),this.getFiscalList(1)}},{key:"onCompany",value:function(){var t=this,e=this.custType;if("2"===e){var r=this.companyList.find(function(e){return e.id===t.searchForm.comId});this.scId=(r||{}).id,this.scName=(r||{}).name}this.list=[],this.getFiscalList(1)}},{key:"getCompanyList",value:function(){var t=this;this.selectLoading=!0,"2"===this.searchForm.comType&&Object(h["w"])().then(function(e){var r=e.data||[];t.companyList=r,t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e})}},{key:"clearValidate",value:function(){var t=this.$refs.theForm;this.$nextTick(function(){t.clearValidate()})}},{key:"addPort",value:function(){this.dialogShow=!0}},{key:"editPort",value:function(t){this.dialogShow=!0,"2"===this.searchForm.comType&&(this.scId=t.custId,this.scName=t.custName);var e=t.startTime,r=t.endTime,a=Object(o["a"])(t,["startTime","endTime"]);this.form=v({},a,{time:[e,r]})}},{key:"deleteData",value:function(t){var e=this,r={id:t.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(h["c"])(r).then(function(t){e.$message({type:"success",message:"删除成功"}),e.getFiscalList()}).catch(function(t){return t})}).catch(function(){return!1})}},{key:"close",value:function(){this.dialogShow=!1,this.reset()}},{key:"saveFiscal",value:function(){var t=this;this.$refs.theForm.validate(function(e){if(!e)return!1;t.dialogLoading=!0;var r=t.form,a=r.time,n=Object(o["a"])(r,["time"]),i=v({},n,{custId:t.scId,custName:t.scName,startTime:a[0],endTime:a[1]});Object(h["z"])(i).then(function(e){t.close(),t.$message({type:"success",message:"保存成功"}),t.getFiscalList(),t.dialogLoading=!1}).catch(function(e){return t.dialogLoading=!1,e})})}},{key:"getFiscalList",value:function(t){var e=this;this.loading=!0,t&&(this.page=t);var r=this.page,a=this.size,n=this.searchForm.year,i={custId:[this.firstId],page:r,size:a,year:n||void 0};Object(h["n"])(i).then(function(t){e.loading=!1;var r=t.data||{},a=r.total,n=r.result;e.total=a,e.list=n||[]}).catch(function(t){return e.loading=!1,t})}},{key:"reset",value:function(){this.form={year:"",fiscalPeriod:"",startTime:"",endTime:"",time:[],remarks:""},this.clearValidate()}},{key:"handleSizeChange",value:function(){return 123}},{key:"handleCurrentChange",value:function(){this.getFiscalList()}},{key:"created",value:function(){var t=this.custId,e=this.custType,r=this.custSubtype,a=this.ifCustomer,n=this.parentId;this.firstId="2"===e&&"2"===r&&a?n:t,this.getFiscalList()}},{key:"pickerOptions",get:function(){var t=this;return{disabledDate:function(e){if(t.form.year){var r="".concat(t.form.year,"-01-01"),a="".concat(t.form.year,"-12-31");return y()(e).unix()<y()(r).unix()||y()(e).unix()>y()(a).unix()}}}}},{key:"custId",get:function(){var t=m["a"].info||{},e=t.custId;return e}},{key:"parentId",get:function(){var t=m["a"].info||{},e=t.parentId;return e}},{key:"ifCustomer",get:function(){var t=m["a"].info||{},e=1===t.ifCustomer;return e}},{key:"custName",get:function(){var t=m["a"].info||{},e=t.custName;return e}},{key:"custType",get:function(){var t=m["a"].info||{},e=t.custType;return e}},{key:"custSubtype",get:function(){var t=m["a"].info||{},e=t.custSubtype;return e}}]),e}(p["e"]);O=f["a"]([Object(p["a"])({name:"Fiscal",components:{},props:{}})],O);var j=O,w=j,k=r("2877"),x=Object(k["a"])(w,a,n,!1,null,null,null);e["default"]=x.exports}}]);