(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["whole-order"],{2295:function(e,t,a){"use strict";var s=a("aaab"),i=a.n(s);i.a},2885:function(e,t,a){},"5b32":function(e,t,a){"use strict";var s=a("e381"),i=a.n(s);i.a},"77c2":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailShow,expression:"!detailShow"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"订单签收"},scopedSlots:e._u([{key:"option",fn:function(){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["orderSignQuery"],expression:"['orderSignQuery']"}],attrs:{type:"text",size:"small"},on:{click:e.handleMoreSearch}},[e._v("\n            更多筛选\n          ")])]},proxy:!0}])}),a("div",{staticClass:"app-panel"},[a("div",{staticStyle:{"text-align":"right"}},["0"===e.custType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"一级代理商",filterable:"",clearable:""},on:{change:e.onAgent,focus:e.getAgentList},model:{value:e.searchForm.agentId,callback:function(t){e.$set(e.searchForm,"agentId",t)},expression:"searchForm.agentId"}},e._l(e.agentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"1"===e.custSubtype?a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"公司类型",clearable:""},on:{change:e.onComType},model:{value:e.searchForm.comType,callback:function(t){e.$set(e.searchForm,"comType",t)},expression:"searchForm.comType"}},e._l(e.companyTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"0"===e.searchForm.orderType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.searchForm.comId,callback:function(t){e.$set(e.searchForm,"comId",t)},expression:"searchForm.comId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"审核状态",size:"small",clearable:""},model:{value:e.searchForm.audit,callback:function(t){e.$set(e.searchForm,"audit",t)},expression:"searchForm.audit"}},[a("el-option",{attrs:{label:"待审核",value:"0"}}),a("el-option",{attrs:{label:"审核中",value:"3"}}),a("el-option",{attrs:{label:"审核通过",value:"1"}}),a("el-option",{attrs:{label:"审核拒绝",value:"2"}})],1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"业务类型",filterable:"",clearable:""},on:{change:e.onType},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"目的国家",size:"small"},on:{focus:e.getCountryList,change:function(t){e.searchForm.fbastoreId=void 0,e.searchForm.lscId=void 0}},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"FBA仓库",clearable:"",filterable:""},on:{focus:e.getWarehouseList},model:{value:e.searchForm.fbastoreId,callback:function(t){e.$set(e.searchForm,"fbastoreId",t)},expression:"searchForm.fbastoreId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.code,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.searchForm.type||!e.searchForm.countryId,loading:e.selectLoading,size:"small",placeholder:"服务",clearable:"",filterable:""},on:{focus:e.getPrivatelineList},model:{value:e.searchForm.lscId,callback:function(t){e.$set(e.searchForm,"lscId",t)},expression:"searchForm.lscId"}},e._l(e.privatelineList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{"unlink-panels":"",clearable:!1,type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"下单起始时间","end-placeholder":"下单截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"240px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"原单号",value:"1"}}),a("el-option",{attrs:{label:"客户名称",value:"2"}}),a("el-option",{attrs:{label:"柜号",value:"3"}})],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["orderSignQuery"],expression:"['orderSignQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableData(1)}}},[e._v("\n            查询\n          ")])],1),a("div",{staticClass:"freeze-box",on:{mousemove:e.handleMouseMove}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,"row-class-name":e.rowClassName,height:"calc(100vh - 313px)",border:""},on:{"cell-mouse-enter":e.handleMouseEnter,"cell-mouse-leave":e.handleMouseLeave}},[a("el-table-column",{attrs:{fixed:"left",label:"订单信息","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"order-info"},[a("div",{staticClass:"seriver-info",attrs:{title:t.row.lsc.value}},["0"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    空运\n                  ")]):e._e(),"1"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    海运\n                  ")]):e._e(),"2"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    铁路\n                  ")]):e._e(),"3"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    快递\n                  ")]):e._e(),"4"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    卡航\n                  ")]):e._e(),a("div",{staticClass:"lscName"},[e._v("\n                    "+e._s(t.row.lsc.value)+"\n                  ")])]),a("div",{staticClass:"code",attrs:{title:t.row.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.row.code,expression:"scope.row.code"}],staticClass:"copy-icon"}),a("span",[e._v("\n                    原单号："+e._s(t.row.code)+"\n                  ")])]),a("div",[t.row.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),t.row.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==t.row.payMethod&&e.formatPay(t.row)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.row.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===t.row.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.row.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),t.row.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e()])])}}])}),a("el-table-column",{attrs:{label:"客户名称",fixed:"left","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.orderCustomer||{}).name||t.row.updateBy))])]}}])}),a("el-table-column",{attrs:{label:"下单客户","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"!==e.custType?a("span",[e._v(e._s((t.row.buyer||{}).name))]):a("span",[e._v(e._s((t.row.seller||{}).name))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"160"}}),a("el-table-column",{attrs:{prop:"",label:"下单仓库",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.warehouse||{}).name||"--")+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"货物所在仓",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.warehouse1||{}).name||"--")+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"报关方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.customs0?a("span",[e._v("普通报关")]):"1"===t.row.customs0?a("span",[e._v("出口退税")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"提货方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.pickList[(t.row.supplement||{}).pickType]||{}).name)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"派送方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.deliveryWay?a("span",[e._v("快递")]):e._e(),"1"===t.row.deliveryWay?a("span",[e._v("卡派")]):e._e(),"2"===t.row.deliveryWay?a("span",[e._v("自提")]):e._e(),"3"===t.row.deliveryWay?a("span",[e._v("整柜直送")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"packages",label:"件数",width:"120"}}),a("el-table-column",{attrs:{prop:"value",label:"金额","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.value?t.row.value.toFixed(2):"")+" "+(t.row.currency||{}).key)+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"是否发货",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.ifLoading?a("span",[e._v("未发货")]):e._e(),1===t.row.ifLoading?a("span",[e._v("已发货")]):e._e(),2===t.row.ifLoading?a("span",[e._v("部分发货")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"audit-wrap"},["2"===t.row.audit?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.row.reason||"审核不通过",placement:"top"}},[a("span",{staticClass:"audit"})]):e._e(),e._v("\n                  "+e._s(e.formmatAudit(t.row))+"\n                ")],1)]}}])}),a("el-table-column",{attrs:{label:"入库状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.statusList.find(function(e){return e.id===t.row.status["WS_IN"]})||{name:"--"}).name)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"出库状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.statusList.find(function(e){return e.id===t.row.status["WS_OUT"]})||{name:"--"}).name)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"计量状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["MEASURE"]})||{name:"--"}).name)+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"验货状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["EXAMINE"]})||{name:"--"}).name)+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"报关状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"预估运费","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.price||{}).totalPrice)+" "+e._s((t.row.price||{}).currencyId)+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"cutoffTime",label:"截止付款时间",width:"160"}}),a("el-table-column",{attrs:{formatter:e.formatCutoffDay,prop:"",label:"逾期天数",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["signOrderView"],expression:"['signOrderView']"}],attrs:{type:"text"},on:{click:function(a){return e.viewData(t.row)}}},[e._v("\n                  查看\n                ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["signOrder"],expression:"['signOrder']"}],attrs:{type:"text"},on:{click:function(a){return e.signOrder(t.row)}}},[e._v("\n                  "+e._s((t.row.statusFiles||{})[9020]?"已签收":"签收")+"\n                ")])]}}])})],1),a("div",{staticClass:"freeze-tip",staticStyle:{display:"none"},attrs:{id:"freezeTip"}})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("drawer",{attrs:{"is-show":e.moreShow,"mask-closable":!1,"drawer-title":"更多筛选","drawer-style":"width: 400px;","cancel-text":"重置","confirm-text":"查询"},on:{drawerClose:e.handleMoreCancle,drawerConfirm:e.handleMoreConfirm}},[a("searchMore",{ref:"searchMore",attrs:{"status-list":e.statusList}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailShow,expression:"detailShow"}],staticClass:"app-container"},[a("detail",{ref:"detailForm",attrs:{"line-list":e.privatelineList,"pick-list":e.pickList,"type-list":e.typeList,"ware-list":e.warehouseList},on:{back:e.getBack}})],1),a("el-dialog",{attrs:{title:"订单签收",visible:e.showSign,"close-on-click-modal":!1,width:"500px"},on:{close:e.closeSignModal}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.signModalLoading,expression:"signModalLoading"}],ref:"signForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.signForm,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"签收时间",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择签收时间"},model:{value:e.signForm.createTime,callback:function(t){e.$set(e.signForm,"createTime",t)},expression:"signForm.createTime"}})],1),a("el-form-item",{attrs:{label:"签收单",prop:"fileName"}},[a("div",{staticStyle:{display:"flex"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"http-request":e.uploadFile}},[a("el-button",{attrs:{type:"text"}},[e._v("\n                "+e._s(e.signForm.fileName?"重新上传":"上传")+"\n              ")])],1),e.signForm.fileName?a("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"text"},on:{click:e.handlePreview}},[e._v("\n              查看\n            ")]):e._e(),e.signForm.fileName?a("el-button",{attrs:{type:"text"},on:{click:e.handleDelete}},[e._v("\n              删除\n            ")]):e._e()],1)])],1),a("div",{staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{size:"small"},on:{click:e.closeSignModal}},[e._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveSignOrder}},[e._v("\n          签 收\n        ")])],1)],1)],1)])},i=[],n=(a("8e6e"),a("456d"),a("96cf"),a("3b8d")),r=(a("c5f6"),a("a8db")),o=a("bd86"),l=(a("ac6a"),a("5df3"),a("4f7f"),a("75fc")),c=(a("7f7f"),a("28a5"),a("d225")),d=a("b0b4"),u=a("308d"),p=a("6bb5"),m=a("4e2b"),h=a("9ab4"),f=a("60a3"),v=a("9dba"),g=a("2d66"),y=a("bb02"),b=a("5a0c"),w=a.n(b),_=a("bef3"),k=a("db7d"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"searchMore",staticClass:"more-form",attrs:{model:e.searchMore,"label-width":"0px",size:"small"}},[a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"入库状态",size:"small",clearable:"",filterable:""},model:{value:e.searchMore.inventoryStatus,callback:function(t){e.$set(e.searchMore,"inventoryStatus",t)},expression:"searchMore.inventoryStatus"}},e._l(e.inventoryStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"计量状态",size:"small",clearable:"",filterable:""},model:{value:e.searchMore.measureStatus,callback:function(t){e.$set(e.searchMore,"measureStatus",t)},expression:"searchMore.measureStatus"}},e._l(e.measureStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"验货状态",size:"small",clearable:"",filterable:""},model:{value:e.searchMore.examineStatus,callback:function(t){e.$set(e.searchMore,"examineStatus",t)},expression:"searchMore.examineStatus"}},e._l(e.examineStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"报关状态",size:"small",clearable:"",filterable:""},model:{value:e.searchMore.declartionStatus,callback:function(t){e.$set(e.searchMore,"declartionStatus",t)},expression:"searchMore.declartionStatus"}},e._l(e.declartionStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"1"===e.searchMore.type||"2"===e.searchMore.type?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"支持锁舱",size:"small",clearable:""},model:{value:e.searchMore.ifLocked,callback:function(t){e.$set(e.searchMore,"ifLocked",t)},expression:"searchMore.ifLocked"}},[a("el-option",{attrs:{label:"否",value:!1}}),a("el-option",{attrs:{label:"是",value:!0}})],1)],1):e._e(),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"是否发货",size:"small",clearable:""},model:{value:e.searchMore.ifLoading,callback:function(t){e.$set(e.searchMore,"ifLoading",t)},expression:"searchMore.ifLoading"}},[a("el-option",{attrs:{label:"未发货",value:0}}),a("el-option",{attrs:{label:"已发货",value:1}}),a("el-option",{attrs:{label:"部分发货",value:2}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"派送方式",clearable:"",filterable:""},model:{value:e.searchMore.deliveryWay,callback:function(t){e.$set(e.searchMore,"deliveryWay",t)},expression:"searchMore.deliveryWay"}},[a("el-option",{attrs:{label:"卡派",value:"1"}}),a("el-option",{attrs:{label:"自提",value:"2"}}),"1"===e.searchMore.type||"2"===e.searchMore.type?a("el-option",{attrs:{label:"整柜直送",value:"3"}}):e._e()],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"报关方式",clearable:"",filterable:""},model:{value:e.searchMore.customs0,callback:function(t){e.$set(e.searchMore,"customs0",t)},expression:"searchMore.customs0"}},[a("el-option",{attrs:{label:"普通报关",value:"0"}}),a("el-option",{attrs:{label:"出口退税",value:"1"}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"关税方式",clearable:"",filterable:""},model:{value:e.searchMore.includeTax,callback:function(t){e.$set(e.searchMore,"includeTax",t)},expression:"searchMore.includeTax"}},[a("el-option",{attrs:{label:"包税",value:!0}}),a("el-option",{attrs:{label:"不包税",value:!1}})],1)],1),"risk"!==e.isType?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"是否冻结",clearable:"",filterable:""},model:{value:e.searchMore.ifFrozen,callback:function(t){e.$set(e.searchMore,"ifFrozen",t)},expression:"searchMore.ifFrozen"}},[a("el-option",{attrs:{label:"否",value:!1}}),a("el-option",{attrs:{label:"是",value:!0}})],1)],1):e._e()],1)],1)},L=[],C=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.searchMore={ifFrozen:void 0,declartionStatus:void 0,expressNo:void 0,examineStatus:void 0,measureStatus:void 0,inventoryStatus:void 0,ifLocked:void 0,ifLoading:void 0,deliveryWay:void 0,customs0:void 0,includeTax:void 0},e}return Object(m["a"])(t,e),Object(d["a"])(t,[{key:"declartionStatusList",get:function(){var e=this.statusList;return e.filter(function(e){return"CUSTOM_DECLARATION"===e.type})}},{key:"examineStatusList",get:function(){var e=this.statusList;return e.filter(function(e){return"EXAMINE"===e.type})}},{key:"measureStatusList",get:function(){var e=this.statusList;return e.filter(function(e){return"MEASURE"===e.type})}},{key:"inventoryStatusList",get:function(){var e=this.statusList;return e.filter(function(e){return"WS_IN"===e.type}).filter(function(e){return"99"!==e.id})}}]),t}(f["e"]);C=h["a"]([Object(f["a"])({name:"searchMore",components:{},props:{statusList:{type:Array,default:function(){return[]}},isType:{type:String,default:""}}})],C);var S=C,F=S,T=(a("7be9"),a("2877")),O=Object(T["a"])(F,x,L,!1,null,"5ee7e0ea",null),I=O.exports,j=a("b32d");function $(e){var t={url:"/orders/fullorder/save_file_status",method:"post",data:e};return Object(j["a"])(t)}function N(e){var t={url:"/wms/aliyun/oss/upload",method:"post",data:e};return Object(j["a"])(t)}function z(e){var t={url:"/wms/aliyun/oss/del",method:"post",data:e};return Object(j["a"])(t)}function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var W=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.signType="sign",e.signForm={createTime:"",fileName:"",fileSource:""},e.rules={createTime:{required:!0,message:"请选择签收时间",trigger:"change"},fileName:{required:!0,message:"请上传签收单",trigger:"change"}},e.signModalLoading=!1,e.showSignRow={},e.showSign=!1,e.detailShow=!1,e.moreShow=!1,e.loading=!1,e.selectLoading=!1,e.companyTypeList=[{id:"1",name:"客户"},{id:"2",name:"二级代理商"}],e.orderTypeList=[{name:"销售订单",id:"0"},{name:"采购订单",id:"1"}],e.selectType="1",e.keyWord="",e.freezeRemark="",e.tableData=[],e.searchForm={coverTank:void 0,ifFrozen:void 0,customs0:void 0,status:void 0,audit:void 0,type:void 0,lscId:void 0,custId:void 0,code:void 0,customerName:void 0,countryId:void 0,fbastoreId:void 0,comId:void 0,agentId:void 0,deliveryWay:void 0,declartionStatus:void 0,expressNo:void 0,examineStatus:void 0,measureStatus:void 0,inventoryStatus:void 0,includeTax:void 0,comType:"",orderType:"0",orderTime:[]},e.page=1,e.size=10,e.total=0,e.typeList=[{name:"空运",id:"0"},{name:"海运",id:"1"},{name:"铁路",id:"2"},{name:"卡航",id:"4"}],e.statusList=[],e.pickList=[{name:"自主送货",id:"0"},{name:"上门提货",id:"1"},{name:"快递发货",id:"2"},{name:"整柜直装",id:"3"}],e.privatelineList=[],e.countryList=[],e.warehouseList=[],e.companyList=[],e.agentList=[],e.uploadFileList=[],e}return Object(m["a"])(t,e),Object(d["a"])(t,[{key:"handleDelete",value:function(){var e=this;this.$confirm("请确认是否删除?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={ifPublic:!0,fileList:[e.signForm.fileName]};e.signModalLoading=!0,z(t).then(function(){e.$message.success("删除成功"),e.signModalLoading=!1,e.signForm.fileName="",e.signForm.fileSource=""}).catch(function(){e.signModalLoading=!1})}).catch(function(){return!1})}},{key:"handlePreview",value:function(){window.open(this.signForm.fileSource)}},{key:"beforeAvatarUpload",value:function(e){var t=e.size/1024/1024<10;return t||this.$message.error("上传文件大小不能超过 10MB!"),t}},{key:"uploadFile",value:function(e){var t=this,a=new FormData,s=new File([e.file],e.file.name.split(".")[0]+(new Date).getTime()+"."+e.file.name.split(".")[1],{type:e.file.type});a.append("file",s),this.signModalLoading=!0,this.signForm.fileName&&this.uploadFileList.push(this.signForm.fileName),N(a).then(function(e){t.signModalLoading=!1,t.$message.success("上传成功");var a=e.data||{};t.signForm.fileName=a.objectName,t.uploadFileList.push(a.objectName),t.uploadFileList=Object(l["a"])(new Set(Object(l["a"])(t.uploadFileList))),t.signForm.fileSource="https://file.jhtinfo.net/"+a.objectName}).catch(function(){t.signForm.fileName="",t.signForm.fileSource="",t.signModalLoading=!1})}},{key:"saveSignOrder",value:function(){var e=this,t=this.$refs.signForm;t.validate(function(t){if(t){var a={fullStatusFile:M({},e.signForm,{status:"9020"}),code:e.showSignRow.code};e.uploadFileList=e.uploadFileList.filter(function(t){return t!==e.signForm.fileName}),e.signModalLoading=!0,$(a).then(function(){e.signModalLoading=!1,e.$message.success("签收成功"),e.signForm={createTime:"",fileName:"",fileSource:""},e.closeSignModal("closeBySave"),e.getTableData()}).catch(function(){e.signModalLoading=!1})}})}},{key:"closeSignModal",value:function(e){var t=this;if("closeBySave"===e||"reset"!==this.signType||this.signForm.fileName){if(this.uploadFileList.length){"closeBySave"!==e&&"reset"===this.signType&&(this.uploadFileList=this.uploadFileList.filter(function(e){return e!==t.showSignRow.signFileName}));var a={ifPublic:!0,fileList:this.uploadFileList};z(a).then(function(e){return e}).catch(function(e){return e})}this.uploadFileList=[],this.signType="",this.showSign=!1,this.showSignRow={},this.signForm={createTime:"",fileName:"",fileSource:""}}else this.$message.warning("请重新上传文件")}},{key:"signOrder",value:function(e){var t=this,a=(e.statusFiles||{})[9020]||"";this.signType="sign",a&&a[0]&&(this.signType="reset",this.signForm={createTime:a[0].createTime,fileName:a[0].fileName,fileSource:a[0].fileSource}),this.showSign=!0,this.showSignRow=M({},e,{signFileName:a&&a[0]&&a[0].fileName}),this.$nextTick(function(){var e=t.$refs.signForm;e.clearValidate()})}},{key:"formatPay",value:function(e){var t=e.payTime?w()(e.payTime).unix():"",a=w()().unix(),s=t||a,i=e.cutoffTime?w()(e.cutoffTime).unix():"";return!!i&&i&&i<s}},{key:"formatCutoffDay",value:function(e){var t=e.payTime?w()(e.payTime).unix():"",a=w()().unix(),s=t||a,i=e.cutoffTime?w()(e.cutoffTime).unix():"";s&&w()(s).unix();return i&&i<s?Math.ceil((s-i)/86400)+"天":"--"}},{key:"handleMouseEnter",value:function(e,t,a,s){this.freezeRemark=e.ifFrozen?"冻结原因: "+(e.freeze||{}).remark:""}},{key:"handleMouseLeave",value:function(){this.freezeRemark=""}},{key:"handleMouseMove",value:function(e){var t=document.getElementById("freezeTip");t.style.left=e.clientX+25+"px",t.style.top=e.clientY+"px",this.freezeRemark?(t.style.display="block",t.innerHTML=this.freezeRemark):(t.style.display="none",t.innerHTML="")}},{key:"getBack",value:function(){this.detailShow=!1,this.getTableData()}},{key:"onOrderType",value:function(){this.tableData=[],"1"===this.searchForm.orderType?(this.searchForm.comType="",this.searchForm.comId="",this.companyList=[]):"0"===this.searchForm.orderType&&(this.searchForm.comType="1")}},{key:"onComType",value:function(){this.searchForm.comId="",this.companyList=[],this.tableData=[]}},{key:"onType",value:function(){this.searchForm.deliveryWay=void 0,this.searchForm.coverTank=void 0,this.searchForm.lscId=void 0}},{key:"onAgent",value:function(){this.searchForm.comId=void 0,this.companyList=[],this.tableData=[],this.getTableData(1)}},{key:"onCompany",value:function(){this.tableData=[],this.getTableData(1)}},{key:"getAgentList",value:function(){var e=this,t={page:1,size:99999};t.parentId=this.custId,t.subtype="1",t.types="05",this.selectLoading=!0,Object(g["m"])(t).then(function(t){var a=t.data||{};e.agentList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCompanyList",value:function(){var e=this,t={page:1,size:9999},a=this.custType,s=this.custSubtype,i=null;if("2"!==a||"1"!==this.searchForm.comType&&"2"!==s){if("2"!==a||"2"!==this.searchForm.comType)return void(this.companyList=[]);t.parentId=this.custId,t.subtype="2",t.types="05",i=g["m"]}else t.custIds=[this.custId],i=g["t"];this.selectLoading=!0,i(t).then(function(t){if("2"!==a||"1"!==e.searchForm.comType&&"2"!==s){var i=t.data||{};e.companyList=i.result||[]}else{var n=t.data||[];e.companyList=n}e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this,t={custId:this.custId||"",typeId:"05"};this.selectLoading=!0,Object(_["b"])(t).then(function(t){e.countryList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getPrivatelineList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.searchForm.countryId,subtypeId:this.searchForm.type};Object(g["G"])(t).then(function(t){var a=t.data||[];e.privatelineList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.searchForm.countryId,codeSort:"A",page:1,size:9999};Object(g["D"])(t).then(function(t){var a=t.data||{};e.warehouseList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"formmatAudit",value:function(e){return"0"===e.audit?"待审核":"1"===e.audit?"审核通过":"2"===e.audit?"审核拒绝":"3"===e.audit?"审核中":void 0}},{key:"viewData",value:function(e){this.detailShow=!0;var t=this.$refs.detailForm;t.setData(e)}},{key:"rowClassName",value:function(e){var t=e.row;e.rowIndex;if(t.ifFrozen||"2"===t.audit)return"frost-red"}},{key:"handleMoreSearch",value:function(){this.moreShow=!0;var e=this.$refs.searchMore;e.searchMore=M({},this.searchForm)}},{key:"handleMoreCancle",value:function(){this.moreShow=!1;var e=this.$refs.searchMore,t=e.searchMore,a=(t.ifFrozen,t.declartionStatus,t.expressNo,t.examineStatus,t.measureStatus,t.inventoryStatus,t.coverTank,t.ifLoading,t.deliveryWay,t.customs0,t.includeTax,Object(r["a"])(t,["ifFrozen","declartionStatus","expressNo","examineStatus","measureStatus","inventoryStatus","coverTank","ifLoading","deliveryWay","customs0","includeTax"]));this.searchForm=M({},a),this.getTableData(1)}},{key:"handleMoreConfirm",value:function(){this.moreShow=!1;var e=this.$refs.searchMore;this.searchForm=e.searchMore,this.getTableData(1)}},{key:"getTableData",value:function(e){var t=this;this.loading=!0;var a=this.custType;"1"===a&&(this.searchForm.orderType="1");var s=this.searchForm,i=s.comId,n=s.agentId,o=(s.comType,s.orderType),l=s.custId,c=s.orderTime,d=Object(r["a"])(s,["comId","agentId","comType","orderType","custId","orderTime"]);e&&(this.page=e);var u=M({},d,{code:"1"===this.selectType&&this.keyWord?this.keyWord:void 0,customerName:"2"===this.selectType&&this.keyWord?this.keyWord:void 0,containerNo:"3"===this.selectType&&this.keyWord?this.keyWord:void 0,salesmanStatusTag:!0});Array.isArray(c)&&c.length>0&&(u.startDate=c[0],u.endDate=c[1]),"0"===o?(u.sellerId="0"===a?n:l,u.buyerId=i):"1"===o&&(u.buyerId=l);var p={page:this.page,size:this.size,model:M({},u,{queryFlag:!0})};Object(g["R"])(p).then(function(e){t.loading=!1;var a=e.data||{};t.tableData=a.result||[],t.total=a.total}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"getStatusList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(_["c"])().then(function(e){t.statusList=(e.data||[]).map(function(e){return{name:e.name,id:e.key,type:e.type}})}).catch(function(){t.statusList=[]});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.searchForm.custId=this.custId,this.searchForm.orderTime=[w()().subtract(30,"d").format("YYYY-MM-DD"),w()().format("YYYY-MM-DD")],this.loading=!0,e.next=5,this.getStatusList();case 5:this.getPrivatelineList(),this.getWarehouseList(),this.getTableData();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=v["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=v["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=v["a"].info||{},t=e.custSubtype;return t}},{key:"parentId",get:function(){var e=v["a"].info||{},t=e.parentId;return t}},{key:"parentName",get:function(){var e=v["a"].info||{},t=e.parentName;return t}},{key:"lineStatusList",get:function(){return this.statusList.filter(function(e){return"LINE"===e.type&&"501"!==e.id})}}]),t}(f["e"]);W=h["a"]([Object(f["a"])({name:"whole",components:{detail:y["a"],drawer:k["a"],searchMore:I},props:{}})],W);var P=W,A=P,E=(a("5b32"),Object(T["a"])(A,s,i,!1,null,"0aa8a0aa",null));t["default"]=E.exports},"7ab7":function(e,t,a){},"7be9":function(e,t,a){"use strict";var s=a("fc21"),i=a.n(s);i.a},9152:function(e,t,a){},aaab:function(e,t,a){},b623:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.showAudit,expression:"!showAudit"}],staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailShow&&!e.measureShow&&!e.expressShow&&!e.orderTrackingShow&&!e.orderUpdateShow,expression:"!detailShow && !measureShow && !expressShow && !orderTrackingShow && !orderUpdateShow"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"全程订单"},scopedSlots:e._u([{key:"option",fn:function(){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:e.handleMoreSearch}},[e._v("\n            更多筛选\n          ")]),a("el-button",{attrs:{loading:e.excelLoading,disabled:e.excelLoading,type:"primary",size:"small"},on:{click:e.handleExport}},[e._v("\n            导出当前数据\n          ")])]},proxy:!0}])}),a("div",{staticClass:"app-panel"},[a("div",{staticStyle:{"text-align":"right"}},["0"===e.custType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"一级代理商",filterable:"",clearable:""},on:{change:e.onAgent,focus:e.getAgentList},model:{value:e.searchForm.agentId,callback:function(t){e.$set(e.searchForm,"agentId",t)},expression:"searchForm.agentId"}},e._l(e.agentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"1"===e.custSubtype?a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"公司类型",clearable:""},on:{change:e.onComType},model:{value:e.searchForm.comType,callback:function(t){e.$set(e.searchForm,"comType",t)},expression:"searchForm.comType"}},e._l(e.companyTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"0"===e.searchForm.orderType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.searchForm.comId,callback:function(t){e.$set(e.searchForm,"comId",t)},expression:"searchForm.comId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"审核状态",size:"small",clearable:""},model:{value:e.searchForm.audit,callback:function(t){e.$set(e.searchForm,"audit",t)},expression:"searchForm.audit"}},[a("el-option",{attrs:{label:"待审核",value:"0"}}),a("el-option",{attrs:{label:"审核中",value:"3"}}),a("el-option",{attrs:{label:"审核通过",value:"1"}}),a("el-option",{attrs:{label:"审核拒绝",value:"2"}})],1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"业务类型",filterable:"",clearable:""},on:{change:e.onType},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"目的国家",size:"small"},on:{focus:e.getCountryList,change:function(t){e.searchForm.lscId=void 0,e.searchForm.fbastoreId=void 0}},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"FBA仓库",clearable:"",filterable:""},on:{focus:e.getWarehouseList},model:{value:e.searchForm.fbastoreId,callback:function(t){e.$set(e.searchForm,"fbastoreId",t)},expression:"searchForm.fbastoreId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.code,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.searchForm.type||!e.searchForm.countryId,loading:e.selectLoading,size:"small",placeholder:"服务",clearable:"",filterable:""},on:{focus:e.getPrivatelineList},model:{value:e.searchForm.lscId,callback:function(t){e.$set(e.searchForm,"lscId",t)},expression:"searchForm.lscId"}},e._l(e.privatelineList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{"unlink-panels":"",clearable:!1,type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"下单起始时间","end-placeholder":"下单截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"原单号",value:"1"}}),a("el-option",{attrs:{label:"客户名称",value:"2"}}),a("el-option",{attrs:{label:"快递单号",value:"3"}})],1),a("div",{staticClass:"vague-icon",attrs:{slot:"append"},slot:"append"},[a("el-tooltip",{attrs:{content:"精准匹配",placement:"top",effect:"light"}},[a("span",{staticClass:"vague-img",class:e.searchForm.isVague?"vague-img-active":"",on:{click:function(t){return t.stopPropagation(),e.handleVague(t)}}})])],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["checkingProcessOrder"],expression:"['checkingProcessOrder']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableData(1)}}},[e._v("\n            查询\n          ")])],1),a("div",{staticClass:"freeze-box",on:{mousemove:e.handleMouseMove}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,"row-class-name":e.rowClassName,height:"calc(100vh - 313px)",border:""},on:{"cell-mouse-enter":e.handleMouseEnter,"cell-mouse-leave":e.handleMouseLeave}},[a("el-table-column",{attrs:{fixed:"left",label:"订单信息","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"order-info"},[a("div",{staticClass:"seriver-info",attrs:{title:t.row.lsc.value}},["0"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    空运\n                  ")]):e._e(),"1"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    海运\n                  ")]):e._e(),"2"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    铁路\n                  ")]):e._e(),"3"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    快递\n                  ")]):e._e(),"4"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                    卡航\n                  ")]):e._e(),a("div",{staticClass:"lscName"},[e._v("\n                    "+e._s(t.row.lsc.value)+"\n                  ")])]),a("div",{staticClass:"code",attrs:{title:t.row.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.row.code,expression:"scope.row.code"}],staticClass:"copy-icon"}),a("span",[e._v("\n                    原单号："+e._s(t.row.code)+"\n                  ")])]),a("div",[t.row.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    特批发货\n                  ")]):e._e(),t.row.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),t.row.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==t.row.payMethod&&e.formatPay(t.row)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.row.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===t.row.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.row.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),t.row.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e(),t.row.enabled?e._e():a("span",{staticClass:"btn-tip-gray"},[e._v("\n                    订单已取消\n                  ")])])])}}])}),a("el-table-column",{attrs:{fixed:"left",label:"当前状态","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"order-info"},[a("div",[t.row.orderStatus_name?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showOrderTracking(t.row)}}},[e._v("\n                    "+e._s(t.row.orderStatus_name)+"\n                  ")]):e._e()],1),a("div",{staticClass:"code",attrs:{title:t.row.orderStatus_describe}},[a("span",[e._v("\n                    "+e._s(t.row.orderStatus_describe)+"\n                  ")])]),a("div",[e._v("\n                  "+e._s(t.row.orderStatus_updateAt)+"\n                ")])])}}])}),a("el-table-column",{attrs:{label:"客户名称","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.orderCustomer||{}).name||t.row.updateBy))])]}}])}),a("el-table-column",{attrs:{label:"下单客户","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"!==e.custType?a("span",[e._v(e._s((t.row.buyer||{}).name))]):a("span",[e._v(e._s((t.row.seller||{}).name))])]}}])}),a("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"160"}}),a("el-table-column",{attrs:{prop:"",label:"下单仓库",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.warehouse||{}).name||"--")+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"货物所在仓",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.warehouse1||{}).name||"--")+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"报关方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.customs0?a("span",[e._v("普通报关")]):"1"===t.row.customs0?a("span",[e._v("出口退税")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"提货方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.pickList[(t.row.supplement||{}).pickType]||{}).name)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"派送方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.deliveryWay?a("span",[e._v("快递")]):e._e(),"1"===t.row.deliveryWay?a("span",[e._v("卡派")]):e._e(),"2"===t.row.deliveryWay?a("span",[e._v("自提")]):e._e(),"3"===t.row.deliveryWay?a("span",[e._v("整柜直送")]):e._e(),"4"===t.row.deliveryWay?a("span",[e._v("到仓")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"packages",label:"件数",width:"120"}}),a("el-table-column",{attrs:{prop:"value",label:"金额","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.value?t.row.value.toFixed(2):"")+" "+(t.row.currency||{}).key)+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"ifLoading",label:"是否发货",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.ifLoading?a("span",[e._v("未发货")]):e._e(),1===t.row.ifLoading?a("span",[e._v("已发货")]):e._e(),2===t.row.ifLoading?a("span",[e._v("部分发货")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formmatAudit(t.row))+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"入库状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.statusList.find(function(e){return e.id===t.row.status["WS_IN"]})||{name:"--"}).name)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"出库状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((e.statusList.find(function(e){return e.id===t.row.status["WS_OUT"]})||{name:"--"}).name)+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"计量状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["7"===t.row.status["MEASURE"]&&"0"===e.custType?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.measureAudit(t.row)}}},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["MEASURE"]})||{name:"--"}).name)+"\n                ")]):a("span",[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["MEASURE"]})||{name:"--"}).name)+"\n                ")])]}}])}),"2"===e.custType?a("el-table-column",{attrs:{label:"计量审核",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["7"===t.row.status["MEASURE"]?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.measureAudit(t.row)}}},[e._v("\n                  计量审核\n                ")]):a("span",[e._v("--")])]}}],null,!1,1392377284)}):e._e(),a("el-table-column",{attrs:{label:"验货状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["10"===t.row.status["EXAMINE"]||"11"===t.row.status["EXAMINE"]?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.measureAudit(t.row,"EXAMINE")}}},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["EXAMINE"]})||{name:"--"}).name)+"\n                ")]):a("span",[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["EXAMINE"]})||{name:"--"}).name)+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"报关状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["418"===t.row.status["CUSTOM_DECLARATION"]||"417"===t.row.status["CUSTOM_DECLARATION"]||"419"===t.row.status["CUSTOM_DECLARATION"]?a("el-popover",{attrs:{placement:"bottom",title:"报关文件",trigger:"click",width:"600"},on:{show:function(a){return e.customFileListShow(t.row)},hide:e.customFileListHide}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadFileList,expression:"loadFileList"}],attrs:{data:e.customFileList,height:"400px"}},[a("el-table-column",{attrs:{label:"文件名称",prop:"fileName"}}),a("el-table-column",{attrs:{label:"文件状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.fileStatus&&"0"===t.row.status?a("span",[e._v("\n                          待审核\n                        ")]):e._e(),1===t.row.fileStatus&&"1"===t.row.status?a("span",[e._v("\n                          审核通过\n                        ")]):e._e(),1===t.row.fileStatus&&"2"===t.row.status?a("span",[e._v("\n                          审核拒绝\n                        ")]):e._e(),0===t.row.fileStatus&&"0"===t.row.status?a("span",[e._v("\n                          未上传\n                        ")]):e._e()]}}],null,!0)}),a("el-table-column",{attrs:{label:"审核人",prop:"auditName"}}),a("el-table-column",{attrs:{label:"审核时间",prop:"auditTime"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.fileStatus&&"1"===t.row.status?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.downFile(t.row)}}},[e._v("\n                          下载\n                        ")]):a("el-upload",{staticStyle:{display:"inline-block",margin:"0 10px"},attrs:{action:"",multiple:!1,limit:1,"show-file-list":!1,"http-request":function(a){return e.uploadFile(a,t.row)},"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"text"}},[0===t.row.fileStatus&&"1"!==t.row.status?a("span",[e._v("上传")]):e._e(),1===t.row.fileStatus&&"1"!==t.row.status?a("span",[e._v("重新上传")]):e._e()])],1)]}}],null,!0)})],1),a("el-button",{attrs:{slot:"reference",disabled:!e.$checkPermission(["wholeUploadFile"])||t.row.ifFrozen,type:"text",size:"mini"},slot:"reference"},[e._v("\n                    "+e._s((e.statusList.find(function(e){return e.id===t.row.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                  ")])],1):a("span",[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===t.row.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                ")])]}}])}),a("el-table-column",{attrs:{label:"快递单号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.deliveryWay?a("div",[t.row.express&&t.row.express.trackingNos?a("el-popover",{attrs:{title:"快递单号",trigger:"hover"}},[a("div",e._l(t.row.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                        "+e._s(t)+"\n                      ")])}),0),a("el-button",{attrs:{slot:"reference",type:"text"},on:{click:function(a){return e.showExpress(t.row)}},slot:"reference"},[e._v("\n                      已出\n                    ")])],1):a("span",[e._v("未出")])],1):a("div",[e._v("\n                  --\n                ")])]}}])}),a("el-table-column",{attrs:{label:"预估运费","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.price||{}).totalPrice)+" "+e._s((t.row.price||{}).currencyId)+"\n              ")]}}])}),a("el-table-column",{attrs:{prop:"cutoffTime",label:"截止付款时间",width:"160"}}),a("el-table-column",{attrs:{formatter:e.formatCutoffDay,prop:"",label:"逾期天数",width:"100"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["checkProcessStatus"],expression:"['checkProcessStatus']"}],attrs:{type:"text"},on:{click:function(a){return e.viewData(t.row)}}},[e._v("\n                  查看\n                ")]),e.$checkPermission(["wholeCommodityAudit"])&&t.row.enabled?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.wholeCommodityAudit(t.row)}}},[e._v("\n                  订单审核\n                ")]):e._e(),e.$checkPermission(["processPermissions"])?a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommand}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(a){return e.handleMore(t.row)}}},[e._v("\n                    更多\n                    "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"0"}},[e._v("\n                      商品导出\n                    ")]),e.$checkPermission(["wholePrint"])?a("el-dropdown-item",{attrs:{command:"1"}},[e._v("\n                      打印唛头10*15\n                    ")]):e._e(),e.$checkPermission(["wholePrint"])?a("el-dropdown-item",{attrs:{command:"2"}},[e._v("\n                      打印唛头10*10\n                    ")]):e._e(),e.$checkPermission(["wholePrint"])?a("el-dropdown-item",{attrs:{command:"1015new"}},[e._v("\n                      打印唛头10*15(新版)\n                    ")]):e._e(),e.$checkPermission(["wholePrint"])?a("el-dropdown-item",{attrs:{command:"1010new"}},[e._v("\n                      打印唛头10*10(新版)\n                    ")]):e._e(),e.$checkPermission(["wholePrint"])?a("el-dropdown-item",{attrs:{command:"9"}},[e._v("\n                      打印唛头A4-4\n                    ")]):e._e(),e.$checkPermission(["wholePrint"])?a("el-dropdown-item",{attrs:{command:"3"}},[e._v("\n                      打印入仓单\n                    ")]):e._e(),"1"===t.row.audit&&t.row.express&&t.row.express.trackingNos?a("el-dropdown-item",{attrs:{command:"5"}},[e._v("\n                      下载快递标签ZIP\n                    ")]):e._e(),"1"===t.row.audit&&t.row.express&&t.row.express.trackingNos?a("el-dropdown-item",{attrs:{command:"10"}},[e._v("\n                      下载快递标签PDF\n                    ")]):e._e(),"1"===t.row.audit&&t.row.express&&t.row.express.trackingNos?a("el-dropdown-item",{attrs:{command:"12"}},[e._v("\n                      下载快递标签PDF(马赛克)\n                    ")]):e._e(),"1"===t.row.audit&&t.row.express&&t.row.express.trackingNos?a("el-dropdown-item",{attrs:{command:"down"}},[e._v("\n                      下载指定快递标签\n                    ")]):e._e(),e.$checkPermission(["measure2label"])&&"7"===t.row.status["MEASURE"]&&"0"===t.row.deliveryWay&&t.row.enabled?a("el-dropdown-item",{attrs:{command:"measure2label"}},[e._v("\n                      生成快递单\n                    ")]):e._e(),"1"===t.row.audit&&t.row.enabled&&!t.row.ifFrozen?a("el-dropdown-item",{attrs:{command:"6"}},[e._v("\n                      冻结订单\n                    ")]):e._e(),"1"===t.row.audit&&t.row.enabled&&t.row.ifFrozen&&!(t.row.freeze||{}).applyTag?a("el-dropdown-item",{attrs:{command:"7"}},[e._v("\n                      申请解冻\n                    ")]):e._e(),"1"===t.row.audit&&t.row.enabled&&t.row.ifFrozen&&(t.row.freeze||{}).applyTag?a("el-dropdown-item",{attrs:{command:"8"}},[e._v("\n                      解冻审核\n                    ")]):e._e(),t.row.insufficient&&t.row.enabled?a("el-dropdown-item",{attrs:{command:"11"}},[e._v("\n                      申请出库\n                    ")]):e._e(),e.$checkPermission(["orderUpdate"])&&t.row.enabled?a("el-dropdown-item",{attrs:{command:"update"}},[e._v("\n                      订单修改\n                    ")]):e._e(),t.row.scanTag2?a("el-dropdown-item",{attrs:{command:"return"}},[e._v("\n                      申请退货\n                    ")]):e._e(),!e.$checkPermission(["wholeDel"])||"0"!==e.custType||t.row.scanTag2||t.row.enabled||"15"===t.row.status["WS_IN"]?e._e():a("el-dropdown-item",{attrs:{command:"4"}},[e._v("\n                      删除订单\n                    ")]),e.$checkPermission(["orderCancel"])&&t.row.enabled&&1!==t.row.isDelivery&&!t.row.scanTag2?a("el-dropdown-item",{attrs:{command:"cancel"}},[e._v("\n                      取消订单\n                    ")]):e._e()],1)],1):e._e()]}}])})],1),a("div",{staticClass:"freeze-tip",staticStyle:{display:"none"},attrs:{id:"freezeTip"}})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-sizes":[10,20,30],"page-size":e.size,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("drawer",{attrs:{"is-show":e.moreShow,"mask-closable":!1,"drawer-title":"更多筛选","drawer-style":"width: 400px;","cancel-text":"重置","confirm-text":"查询"},on:{drawerClose:e.handleMoreCancle,drawerConfirm:e.handleMoreConfirm}},[a("searchMore",{ref:"searchMore",attrs:{"status-list":e.statusList}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailShow,expression:"detailShow"}],staticClass:"app-container"},[a("detail",{ref:"detailForm",attrs:{"line-list":e.privatelineList,"pick-list":e.pickList,"type-list":e.typeList,"ware-list":e.warehouseList},on:{back:e.getBack}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.measureShow,expression:"measureShow"}],staticClass:"app-container"},[a("examineMeasureTab",{ref:"measureForm",on:{back:function(t){e.measureShow=!1}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.expressShow,expression:"expressShow"}],staticClass:"app-container"},[a("express",{ref:"expressList",on:{back:function(t){e.expressShow=!1}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.orderTrackingShow,expression:"orderTrackingShow"}],staticClass:"app-container"},[a("order-tracking",{ref:"orderTracking",on:{back:function(t){e.orderTrackingShow=!1}}})],1),a("order-update",{directives:[{name:"show",rawName:"v-show",value:e.orderUpdateShow,expression:"orderUpdateShow"}],ref:"orderUpdate",on:{back:e.orderUpdateGoBack}})],1),a("commodity-audit",{directives:[{name:"show",rawName:"v-show",value:e.showAudit,expression:"showAudit"}],ref:"commodityAudit",on:{goBack:e.goBack}}),a("print",{ref:"print",on:{printing:function(t){return e.loading=t}}}),a("el-dialog",{attrs:{title:"申请出库",width:"600px","close-on-click-modal":!1,visible:e.dialogOut},on:{"update:visible":function(t){e.dialogOut=t},close:e.cancelOut}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-form",{ref:"outForm",attrs:{model:e.outForm,"label-width":"90px","label-position":"right",size:"small"}},[[0,1,2].includes(e.outForm.audit)?e._e():a("div",{staticStyle:{padding:"0 0 10px 24px"}},[e._v("\n          欠费或信用额度不足，只能申请一票出库，请问是否继续？\n        ")]),[0,1,2].includes(e.outForm.audit)?a("el-form-item",{attrs:{label:"状态",prop:"audit"}},[0===e.outForm.audit?a("span",[e._v("\n            待审核\n          ")]):1===e.outForm.audit?a("span",[e._v("\n            审核通过\n          ")]):2===e.outForm.audit?a("span",[e._v("\n            审核拒绝\n          ")]):e._e()]):e._e(),2===e.outForm.audit?a("el-form-item",{attrs:{label:"拒绝原因",prop:"reason"}},[e._v("\n          "+e._s(e.outForm.reason)+"\n        ")]):e._e(),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[1!==e.outForm.audit&&0!==e.outForm.audit?a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",maxlength:100,placeholder:"请输入"},model:{value:e.outForm.remark,callback:function(t){e.$set(e.outForm,"remark",t)},expression:"outForm.remark"}}):a("span",[e._v(e._s(e.outForm.remark))])],1)],1),1!==e.outForm.audit&&0!==e.outForm.audit?a("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelOut}},[e._v("\n          取消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveOut}},[e._v("\n          确定\n        ")])],1):e._e()],1)]),a("el-dialog",{attrs:{title:"操作日志",width:"600px","close-on-click-modal":!1,visible:e.isLogVisible},on:{"update:visible":function(t){e.isLogVisible=t},close:e.cancel}},[a("div",[e._v("弹框")])]),a("el-dialog",{attrs:{title:e.title,width:"1000px","close-on-click-modal":!1,visible:e.isWarehouseVisible},on:{"update:visible":function(t){e.isWarehouseVisible=t},close:e.cancel}},[a("div",[e._v("弹框")])]),a("el-dialog",{attrs:{title:"审核订单",visible:e.dialogAudit,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.dialogAudit=t},closed:e.handleCancel}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-form",{ref:"theForm",attrs:{model:e.auditForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"审核结果",prop:"audit"}},[a("el-radio-group",{model:{value:e.auditForm.audit,callback:function(t){e.$set(e.auditForm,"audit",t)},expression:"auditForm.audit"}},[a("el-radio",{attrs:{label:"1"}},[e._v("\n              通过\n            ")]),a("el-radio",{attrs:{label:"2"}},[e._v("\n              拒绝\n            ")])],1)],1),"2"===e.auditForm.audit?a("el-form-item",{attrs:{label:"拒绝原因",prop:"reason"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",maxlength:100,placeholder:"请输入"},model:{value:e.auditForm.reason,callback:function(t){e.$set(e.auditForm,"reason",t)},expression:"auditForm.reason"}})],1):e._e()],1),a("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v("\n          提交\n        ")])],1)],1)]),a("el-dialog",{attrs:{title:e.isFrost?"冻结订单":"解冻审核",width:"600px","close-on-click-modal":!1,visible:e.isFrostVisible},on:{"update:visible":function(t){e.isFrostVisible=t},close:e.cancelFrost}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-form",{ref:"frostForm",attrs:{model:e.frostForm,rules:e.frostRules,"label-width":"100px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"冻结原因",prop:"remark"}},[e.isFrost?a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",maxlength:100,placeholder:"请输入"},model:{value:e.frostForm.remark,callback:function(t){e.$set(e.frostForm,"remark",t)},expression:"frostForm.remark"}}):a("span",[e._v(e._s(e.frostForm.remark))])],1),e.isFrost?e._e():a("el-form-item",{attrs:{label:"申请人公司"}},[e._v("\n          "+e._s(e.frostForm.applyName)+"\n        ")]),e.isFrost?e._e():a("el-form-item",{attrs:{label:"申请人账号"}},[e._v("\n          "+e._s(e.frostForm.applyAccount)+"\n        ")]),e.isFrost?e._e():a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:4},type:"textarea",maxlength:100,placeholder:"请输入"},model:{value:e.frostForm.reason,callback:function(t){e.$set(e.frostForm,"reason",t)},expression:"frostForm.reason"}})],1)],1),a("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelFrost}},[e._v("\n          取消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveFrost}},[e._v("\n          提交\n        ")])],1)],1)]),a("order-so-info",{ref:"orderSoInfo"}),a("express-export",{ref:"expressExport"})],1)},i=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),r=(a("c5f6"),a("a8db")),o=a("bd86"),l=(a("7f7f"),a("d225")),c=a("b0b4"),d=a("308d"),u=a("6bb5"),p=a("4e2b"),m=a("9ab4"),h=a("60a3"),f=a("9dba"),v=a("2d66"),g=a("bef3"),y=a("af5a"),b=a("bb02"),w=a("ce73"),_=a("6ae2"),k=a("fe1e"),x=a("5a0c"),L=a.n(x),C=a("096f"),S=a("db7d"),F=a("4d2e"),T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.render?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container my-scrollbar"},[a("div",{staticClass:"order-info"},[a("div",{staticClass:"base-info card"},[a("div",{staticClass:"title"},[a("span",[e._v("基础信息")]),a("div",{staticClass:"btn"},[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium"},on:{click:function(t){return e.getOrderDetails(e.row)}}},[e._v("\n            刷新\n          ")]),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium"},on:{click:e.goBack}},[e._v("\n            返回\n          ")])],1)]),a("div",{staticClass:"info",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("交货区域：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.delivery||{}).value))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("目的国：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.country||{}).value))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("目的地类型：")]),"0"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n            FBA\n          ")]):e._e(),"1"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n            私人地址\n          ")]):e._e(),"2"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n            自有海外仓\n          ")]):e._e()]),"1"!==e.row.addressType?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("目的仓代码：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.fbastore||{}).code))])]):e._e(),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("业务类型：")]),"0"===e.row.type?a("span",{staticClass:"value"},[e._v("\n            空运\n          ")]):e._e(),"1"===e.row.type?a("span",{staticClass:"value"},[e._v("\n            海运\n          ")]):e._e(),"2"===e.row.type?a("span",{staticClass:"value"},[e._v("\n            铁路\n          ")]):e._e(),"3"===e.row.type?a("span",{staticClass:"value"},[e._v("\n            快递\n          ")]):e._e(),"4"===e.row.type?a("span",{staticClass:"value"},[e._v("\n            卡航\n          ")]):e._e()]),["1","2"].includes(e.row.type)?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("拼箱/整柜：")]),a("span",{staticClass:"value"},[e._v(e._s("0"===(e.row.container||{}).type?"拼箱":"整柜"))])]):e._e(),["1","2"].includes(e.row.type)?a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("是否锁舱：")]),a("span",{staticClass:"value"},[e._v(e._s(e.row.ifLocked?"是":"否"))])]):e._e(),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("报关方式：")]),a("span",{staticClass:"value"},[e._v(e._s("0"===e.row.customs0?"普通报关":"出口退税"))]),a("el-button",{staticStyle:{"margin-left":"5px",padding:"0"},attrs:{type:"text",disabled:1===e.row.ifLoadingComplete,size:"medium"},on:{click:e.editCustoms}},[e._v("\n            修改\n          ")])],1),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("进口商：")]),a("span",{staticClass:"value"},[e._v(e._s("0"===e.row.customs1?"自有进口商报关":"无进口商"))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("目的港派送方式：")]),"0"===e.row.deliveryWay?a("span",{staticClass:"value"},[e._v("\n            快递\n          ")]):"1"===e.row.deliveryWay?a("span",{staticClass:"value"},[e._v("\n            卡派\n          ")]):"2"===e.row.deliveryWay?a("span",{staticClass:"value"},[e._v("\n            自提\n          ")]):"3"===e.row.deliveryWay?a("span",{staticClass:"value"},[e._v("\n            整柜直装\n          ")]):e._e(),a("el-button",{staticStyle:{"margin-left":"5px",padding:"0"},attrs:{type:"text",disabled:0===e.row.ifLoadingComplete,size:"medium"},on:{click:e.editDeliveryWay}},[e._v("\n            修改\n          ")])],1),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("关税：")]),a("span",{staticClass:"value"},[e._v(e._s(e.row.includeTax?"包税":"不包税"))])])])]),a("div",{staticClass:"base-info card"},[a("div",{staticClass:"title"},[a("span",[e._v("收货人")]),"1"===e.row.addressType?a("div",{staticClass:"btn"},[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium"},on:{click:e.updateAddress}},[e._v("\n            修改\n          ")])],1):e._e()]),a("div",{staticClass:"info",staticStyle:{"padding-bottom":"10px"}},[a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("地址类型：")]),"0"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n            FBA\n          ")]):e._e(),"1"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n            私人地址\n          ")]):e._e(),"2"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n            自有海外仓\n          ")]):e._e()]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("目的仓代码：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.fbastore||{}).code||""))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("收货人：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).contact))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("联系电话：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).tel))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("国家：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).countryCode))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("省份：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).provinceCode))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("城市：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).city))])]),a("div",{staticClass:"info-item"},[a("span",{staticClass:"label"},[e._v("邮编：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).postal))])]),a("div",{staticClass:"info-item",staticStyle:{width:"100%"}},[a("span",{staticClass:"label"},[e._v("详细地址一：")]),a("span",{staticClass:"value"},[e._v(e._s(((e.row.consignee||{}).address||"").split("；")[0]))])]),((e.row.consignee||{}).address||"").split("；")[1]?a("div",{staticClass:"info-item",staticStyle:{width:"100%"}},[a("span",{staticClass:"label"},[e._v("详细地址二：")]),a("span",{staticClass:"value"},[e._v(e._s(((e.row.consignee||{}).address||"").split("；")[1]))])]):e._e(),((e.row.consignee||{}).address||"").split("；")[2]?a("div",{staticClass:"info-item",staticStyle:{width:"100%"}},[a("span",{staticClass:"label"},[e._v("详细地址三：")]),a("span",{staticClass:"value"},[e._v(e._s(((e.row.consignee||{}).address||"").split("；")[2]))])]):e._e()])]),a("el-row",{staticClass:"other-info"},[a("el-col",{staticStyle:{"padding-right":"8px"},attrs:{span:14}},[a("div",{staticClass:"order-list card"},[a("div",{staticClass:"title"},[a("span",[e._v("关联订单")]),a("div",{staticClass:"btn"},[a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium",disabled:0===e.measureOrderList.length||1===e.row.ifLoadingComplete},on:{click:e.resetMeasure}},[e._v("\n                重新计量\n              ")]),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium",disabled:!e.row.examine||0===e.examineOrderList.length||1===e.row.ifLoadingComplete},on:{click:e.resetExamine}},[e._v("\n                重新验货\n              ")]),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium",disabled:1===e.row.ifLoadingComplete},on:{click:e.expressOrder}},[e._v("\n                快递下单\n              ")]),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"text",size:"medium",disabled:1===e.row.ifLoadingComplete},on:{click:e.generateDeclarationOrder}},[e._v("\n                报关下单\n              ")])],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.otherOrderLoading,expression:"otherOrderLoading"}]},[e.otherOrderList.length?a("div",{staticClass:"other-order-list my-scrollbar"},[e._l(e.measureOrderList,function(t){return a("div",{key:t.measureId,staticClass:"other-order"},[a("div",{staticClass:"order-header"},[a("div",{staticClass:"order-no"},[a("i",{staticClass:"icon measure"}),a("span",{staticClass:"no"},[e._v("\n                      计量单号："+e._s(t.measureId||"--")+"\n                    ")])]),a("div",{class:["status","status"+(t.delFlag?0:3)],staticStyle:{"margin-right":"5px"}},[e._v("\n                    "+e._s(t.delFlag?"无效":"有效")+"\n                  ")]),a("div",{class:["status","status"+t.measureStatus]},[e._v("\n                    "+e._s((e.measureStatusList.find(function(e){return e.id===t.measureStatus})||{}).name)+"\n                  ")])]),a("div",{staticClass:"other-order-info"},[a("div",{staticClass:"other-order-info-item w100"},[a("span",{staticClass:"label"},[e._v("计量仓库：")]),a("span",{staticClass:"value"},[e._v(e._s(t.warehouseName))])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("总件数：")]),a("span",{staticClass:"value"},[e._v(e._s(t.boxNum))])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("总体积：")]),a("span",{staticClass:"value"},[e._v(e._s(t.totalV)+" CBM")])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("总重量：")]),a("span",{staticClass:"value"},[e._v(e._s(t.totalW)+" KGS")])])]),a("div",{staticClass:"option-info"},[a("div",{staticStyle:{flex:"1"}},[a("span",{staticClass:"option-info-item"},[e._v("\n                      计量人："+e._s(t.applicant)+"\n                    ")]),a("span",{staticClass:"option-info-item"},[e._v("\n                      创建时间："+e._s(t.createTime)+"\n                    ")]),a("span",{staticClass:"option-info-item"},[e._v("\n                      完成时间："+e._s(t.actualMeasureTime)+"\n                    ")])])])])}),e._l(e.examineOrderList,function(t){return a("div",{key:t.examiningNo,staticClass:"other-order"},[a("div",{staticClass:"order-header"},[a("div",{staticClass:"order-no"},[a("i",{staticClass:"icon examine"}),a("span",{staticClass:"no"},[e._v("\n                      验货单号："+e._s(t.examiningNo||"--")+"\n                    ")])]),a("div",{class:["status","status"+(t.delFlag?0:3)],staticStyle:{"margin-right":"5px"}},[e._v("\n                    "+e._s(t.delFlag?"无效":"有效")+"\n                  ")]),a("div",{class:["status","status"+t.status]},[e._v("\n                    "+e._s((e.examineStatusList.find(function(e){return e.id===t.status})||{}).name)+"\n                  ")])]),a("div",{staticClass:"other-order-info"},[a("div",{staticClass:"other-order-info-item w100"},[a("span",{staticClass:"label"},[e._v("验货仓库：")]),a("span",{staticClass:"value"},[e._v(e._s(t.warehouseName))])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("验货属性：")]),a("span",{staticClass:"value"},[e._v(e._s(t.categoriesStr))])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("验货结果：")]),1===t.validated?a("span",{staticClass:"value"},[e._v("通过")]):0===t.validated?a("span",{staticClass:"value"},[e._v("不通过")]):a("span",{staticClass:"value"},[e._v("--")])])]),a("div",{staticClass:"option-info"},[a("div",{staticStyle:{flex:"1"}},[a("span",{staticClass:"option-info-item"},[e._v("\n                      验货人："+e._s(t.operatorName)+"\n                    ")]),a("span",{staticClass:"option-info-item"},[e._v("\n                      创建时间："+e._s(t.createTime)+"\n                    ")]),a("span",{staticClass:"option-info-item"},[e._v("\n                      完成时间："+e._s(t.completeTime)+"\n                    ")])])])])}),e._l(e.expressOrderList,function(t){return a("div",{key:t.id,staticClass:"other-order"},[a("div",{staticClass:"order-header"},[a("div",{staticClass:"order-no"},[a("i",{staticClass:"icon express"}),a("span",{staticClass:"no"},[e._v("\n                      快递单号："+e._s(t.identificationNo&&t.identificationNo.split(",")[0]||"--")+"\n                    ")])])]),a("div",{staticClass:"other-order-info"},[a("div",{staticClass:"other-order-info-item w100"},[a("span",{staticClass:"label"},[e._v("快递公司：")]),a("span",{staticClass:"value"},[e._v(e._s(t.expressName))])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("目的国：")]),a("span",{staticClass:"value"},[e._v(e._s(t.destinationCountry))])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("收件人：")]),a("span",{staticClass:"value"},[e._v(e._s(t.consigneeName))])])]),a("div",{staticClass:"option-info"},[a("div",{staticStyle:{flex:"1"}},[a("span",{staticClass:"option-info-item"},[e._v("\n                      下单时间："+e._s(t.createTime)+"\n                    ")])])])])}),e._l(e.declareOrderList,function(t){return a("div",{key:t.declarationNo,staticClass:"other-order"},[a("div",{staticClass:"order-header"},[a("div",{staticClass:"order-no"},[a("i",{staticClass:"icon declare"}),a("span",{staticClass:"no"},[e._v("\n                      报关单号："+e._s(t.declarationNo)+"\n                    ")])])]),a("div",{staticClass:"other-order-info"},[a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("报关类型：")]),"0"===t.orderDeclare?a("span",{staticClass:"value"},[e._v("普通报关")]):"1"===t.orderDeclare?a("span",{staticClass:"value"},[e._v("出口退税")]):"2"===t.orderDeclare?a("span",{staticClass:"value"},[e._v("整柜买单")]):a("span",{staticClass:"value"},[e._v("--")])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("报关状态：")]),a("span",{staticClass:"value"},[e._v("\n                      "+e._s((e.declareList.find(function(e){return""+t.declareStatus===e.id})||{}).name)+"\n                    ")])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("报检状态：")]),a("span",{staticClass:"value"},[e._v("\n                      "+e._s((e.inspectList.find(function(e){return e.id===""+t.inspectionStatus})||{}).name)+"\n                    ")])]),a("div",{staticClass:"other-order-info-item w33"},[a("span",{staticClass:"label"},[e._v("文件状态：")]),a("span",{staticClass:"value"},["0"===t.fileStatus?a("span",[e._v("待审核")]):"1"===t.fileStatus?a("span",[e._v("部分审核(通过)")]):"3"===t.fileStatus?a("span",[e._v("部分审核(异常)")]):"2"===t.fileStatus?a("span",[e._v("审核完成")]):a("span",[e._v("--")])])])]),a("div",{staticClass:"option-info"},[a("div",{staticStyle:{flex:"1"}},[a("span",{staticClass:"option-info-item"},[e._v("\n                      创建时间："+e._s(t.createTime)+"\n                    ")])]),a("el-button",{attrs:{type:"text",size:"medium"},on:{click:e.cancelDeclarationOrder}},[e._v("\n                    取消\n                  ")])],1)])})],2):e._e(),0===e.otherOrderList.length?a("div",{staticClass:"none-text"},[e._v("\n              暂无记录\n            ")]):e._e()])])]),a("el-col",{staticStyle:{"padding-left":"8px"},attrs:{span:10}},[a("div",{staticClass:"order-option-info"},[a("div",{staticClass:"option-info card"},[a("div",{staticClass:"title"},[a("span",[e._v("操作日志")])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.logLoading,expression:"logLoading"}],staticClass:"option-list my-scrollbar"},[e.logList.length?a("div",e._l(e.logList,function(t){return a("div",{key:t.id,staticClass:"option-item"},[a("div",{staticClass:"option"},[e._v("\n                    "+e._s(t.logs)+"\n                  ")]),a("div",{staticClass:"option-user"},[a("span",[e._v("操作人："+e._s(t.userName))]),a("span",[e._v(e._s(t.createTime))])])])}),0):e._e(),0===e.logList.length?a("div",{staticClass:"none-text"},[e._v("\n                暂无记录\n              ")]):e._e()]),a("div",{staticStyle:{"text-align":"right","padding-bottom":"15px"}},[a("el-pagination",{attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,small:"",layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),a("div",{staticClass:"status-info card"},[a("div",{staticClass:"title"},[a("span",[e._v("订单追踪")])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.statusLoading,expression:"statusLoading"}],staticClass:"status-list"},[e.statusList.length?a("div",{staticClass:"status-item-warp my-scrollbar"},e._l(e.statusList,function(t,s){return a("div",{key:t.time,staticClass:"status-item",class:{active:0===s}},[a("div",{staticClass:"status-text-warp"},[a("div",{staticClass:"status-text"},[e._v("\n                      "+e._s(t.statusName)+"\n                    ")]),a("el-popover",{attrs:{title:"文件下载",placement:"top",trigger:"click"},model:{value:t.visible,callback:function(a){e.$set(t,"visible",a)},expression:"item.visible"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoading,expression:"fileLoading"}],attrs:{data:e.fileList}},[a("el-table-column",{attrs:{width:"250",property:"fileName",label:"文件名称"}}),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return e.downloadFile(t.row)}}},[e._v("\n                              文件下载\n                            ")])]}}],null,!0)})],1),t.ifFile?a("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",size:"small",type:"text"},on:{click:function(a){return e.showFileList(t)}},slot:"reference"},[e._v("\n                        文件下载\n                      ")]):e._e()],1)],1),a("div",{staticClass:"status-describe"},[a("div",{staticClass:"time"},[e._v("\n                      "+e._s(t.updateAt)+"\n                    ")]),a("div",{staticClass:"describe"},[e._v("\n                      "+e._s(t.describe||"")+"\n                    ")])])])}),0):a("div",{staticClass:"none"},[a("div",{staticClass:"none-text"},[e._v("\n                  暂无记录\n                ")])])])])])])],1)],1),a("div",{staticClass:"serve-info-wrap"},[a("div",{staticClass:"serve-info card"},[a("div",{staticClass:"lsc-info"},[a("div",{staticClass:"header"},["0"===e.row.type?a("svg-icon",{staticStyle:{color:"#2291E6",width:"20px",height:"20px"},attrs:{name:"airplane"}}):e._e(),"1"===e.row.type?a("svg-icon",{staticStyle:{color:"#2291E6",width:"20px",height:"20px"},attrs:{name:"ship"}}):e._e(),"2"===e.row.type?a("svg-icon",{staticStyle:{color:"#2291E6",width:"20px",height:"20px"},attrs:{name:"railway"}}):e._e(),a("span",{staticClass:"lsc-name"},[e._v(e._s((e.row.lsc||{}).value))]),a("el-button",{attrs:{type:"text",size:"medium",disabled:1===e.row.ifLoadingComplete},on:{click:e.editLsc}},[e._v("\n            修改\n          ")])],1),e.lscConfig.departureName?a("div",{staticClass:"port departure"},[e._v("\n          "+e._s(e.lscConfig.departureName.split(",")[0])+"\n        ")]):e._e(),e.lscConfig.destinationName?a("div",{staticClass:"port destination"},[e._v("\n          "+e._s(e.lscConfig.destinationName.split(",")[0])+"\n        ")]):e._e()]),a("div",{staticClass:"price-info"},[a("div",{staticClass:"title"},[e._v("\n          费用明细\n        ")]),a("div",{staticClass:"price-list"},[a("div",{staticClass:"price-item"},[a("span",[e._v("运费")]),a("span",[e._v("\n              "+e._s((e.row.price||{}).atotalPrice||(e.row.price||{}).totalPrice||"--")+" "+e._s((e.row.price||{}).currencyId)+"\n            ")])])]),a("div",{staticClass:"total-price"},[a("span",[e._v("预估费用：")]),a("div",[e._v("\n            "+e._s((e.row.price||{}).atotalPrice||(e.row.price||{}).totalPrice||"--")+" "+e._s((e.row.price||{}).currencyId)+"\n          ")])])])])]),a("el-dialog",{attrs:{visible:e.visible,width:"750px"},on:{close:e.dialogClose}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"},attrs:{slot:"title"},slot:"title"},[a("span",[e._v("\n        选择服务\n      ")]),a("div",{staticStyle:{background:"#F2F3F5","border-radius":"4px",padding:"5px","font-size":"14px","font-weight":"400",color:"#4E5969","margin-right":"30px",display:"flex"}},[a("div",{class:{activeServerType:"1"===e.serverType},staticStyle:{padding:"6px 16px","border-radius":"2px",cursor:"pointer"},on:{click:function(t){return e.serverTypeChange("1")}}},[e._v("\n          服务渠道\n        ")]),a("div",{class:{activeServerType:"2"===e.serverType},staticStyle:{padding:"6px 16px","border-radius":"2px",cursor:"pointer"},on:{click:function(t){return e.serverTypeChange("2")}}},[e._v("\n          发货渠道\n        ")])])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},["1"===e.serverType?a("div",[a("div",{staticClass:"info"},[a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("业务类型：")]),"0"===e.row.type?a("span",{staticClass:"value"},[e._v("\n              空运\n            ")]):e._e(),"1"===e.row.type?a("span",{staticClass:"value"},[e._v("\n              海运\n            ")]):e._e(),"2"===e.row.type?a("span",{staticClass:"value"},[e._v("\n              铁路\n            ")]):e._e(),"3"===e.row.type?a("span",{staticClass:"value"},[e._v("\n              快递\n            ")]):e._e(),"4"===e.row.type?a("span",{staticClass:"value"},[e._v("\n              卡航\n            ")]):e._e()]),a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("交货区域：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.delivery||{}).value))])]),a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的国：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.country||{}).value))])]),a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的地类型：")]),"0"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n              FBA\n            ")]):e._e(),"1"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n              私人地址\n            ")]):e._e(),"2"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n              自有海外仓\n            ")]):e._e()]),"1"!==e.row.addressType?a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的仓代码：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.fbastore||{}).code||"--"))])]):e._e(),"1"===e.row.addressType?a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的城市：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).city||"--"))])]):e._e(),a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("报关方式：")]),a("span",{staticClass:"value"},[e._v(e._s("0"===e.row.customs0?"普通报关":"出口退税"))])])]),a("div",{staticClass:"info"},[a("div",{staticClass:"info-item p",staticStyle:{width:"50%"}},[a("span",{staticClass:"label"},[e._v("目的港派送方式：")]),a("span",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.getLscListByPrice},model:{value:e.form.deliveryWay,callback:function(t){e.$set(e.form,"deliveryWay",t)},expression:"form.deliveryWay"}},["3"!==e.row.type&&"1"!==(e.row.container||{}).type&&"2"!==e.row.addressType?a("el-radio-button",{attrs:{label:"0"}},[e._v("\n                  快递\n                ")]):e._e(),"3"!==e.row.type&&"1"!==(e.row.container||{}).type&&"2"!==e.row.addressType?a("el-radio-button",{attrs:{label:"1"}},[e._v("\n                  卡派\n                ")]):e._e(),"1"!==e.row.type&&"2"!==e.row.type||"1"!==(e.row.container||{}).type||"2"===e.row.addressType?e._e():a("el-radio-button",{attrs:{label:"3"}},[e._v("\n                  整柜直送\n                ")]),"3"!==e.row.type&&"2"!==e.row.addressType?a("el-radio-button",{attrs:{label:"2"}},[e._v("\n                  自提\n                ")]):e._e(),"2"===e.row.addressType?a("el-radio-button",{attrs:{label:"4"}},[e._v("\n                  到仓\n                ")]):e._e()],1)],1)]),a("div",{staticClass:"info-item p",staticStyle:{width:"50%"}},[a("span",{staticClass:"label"},[e._v("目的港关税：")]),a("span",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.getLscListByPrice},model:{value:e.form.includeTax,callback:function(t){e.$set(e.form,"includeTax",t)},expression:"form.includeTax"}},[a("el-radio-button",{attrs:{label:!0}},[e._v("\n                  包税\n                ")]),a("el-radio-button",{attrs:{label:!1}},[e._v("\n                  不包税\n                ")])],1)],1)])]),a("div",{staticStyle:{"font-size":"14px",color:"#303133"}},[e._v("\n          当前服务："+e._s((e.row.lsc||{}).value)+"\n        ")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.lscList,"max-height":"300px",border:""}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"text-align":"center"}},[a("el-radio",{attrs:{disabled:(e.row.lsc||{}).key===t.row.id,label:t.row.id},model:{value:e.selectRowId,callback:function(t){e.selectRowId=t},expression:"selectRowId"}},[e._v("\n                   \n                ")])],1)]}}],null,!1,2250239874)}),a("el-table-column",{attrs:{label:"服务名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.name+"【"+t.row.lsId+"】")+"\n            ")]}}],null,!1,806670153)})],1)],1):e._e(),"2"===e.serverType?a("div",[a("div",{staticClass:"info"},[a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("交货区域：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.delivery||{}).value))])]),a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的地类型：")]),"0"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n              FBA\n            ")]):e._e(),"1"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n              私人地址\n            ")]):e._e(),"2"===e.row.addressType?a("span",{staticClass:"value"},[e._v("\n              自有海外仓\n            ")]):e._e()]),"1"!==e.row.addressType?a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的仓代码：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.fbastore||{}).code||"--"))])]):e._e(),"1"===e.row.addressType?a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("目的城市：")]),a("span",{staticClass:"value"},[e._v(e._s((e.row.consignee||{}).city||"--"))])]):e._e(),a("div",{staticClass:"info-item p"},[a("span",{staticClass:"label"},[e._v("报关方式：")]),a("span",{staticClass:"value"},[e._v(e._s("0"===e.row.customs0?"普通报关":"出口退税"))])])]),a("div",{staticClass:"info"},[a("div",{staticClass:"info-item p",staticStyle:{width:"50%"}},[a("span",{staticClass:"label"},[e._v("目的国：")]),a("span",{staticClass:"value"},[a("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList,change:e.getLscList},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)]),a("div",{staticClass:"info-item p",staticStyle:{width:"50%"}},[a("span",{staticClass:"label"},[e._v("业务类型：")]),a("span",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.getLscList},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio-button",{attrs:{label:"0"}},[e._v("\n                  空运\n                ")]),a("el-radio-button",{attrs:{label:"1"}},[e._v("\n                  海运\n                ")]),a("el-radio-button",{attrs:{label:"2"}},[e._v("\n                  铁路\n                ")]),a("el-radio-button",{attrs:{label:"4"}},[e._v("\n                  卡航\n                ")])],1)],1)]),a("div",{staticClass:"info-item p",staticStyle:{width:"50%"}},[a("span",{staticClass:"label"},[e._v("目的港关税：")]),a("span",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.getLscList},model:{value:e.form.includeTax,callback:function(t){e.$set(e.form,"includeTax",t)},expression:"form.includeTax"}},[a("el-radio-button",{attrs:{label:!0}},[e._v("\n                  包税\n                ")]),a("el-radio-button",{attrs:{label:!1}},[e._v("\n                  不包税\n                ")])],1)],1)]),a("div",{staticClass:"info-item p",staticStyle:{width:"50%"}},[a("span",{staticClass:"label"},[e._v("目的港派送方式：")]),a("span",{staticClass:"value"},[a("el-radio-group",{attrs:{size:"small"},on:{change:e.getLscList},model:{value:e.form.deliveryWay,callback:function(t){e.$set(e.form,"deliveryWay",t)},expression:"form.deliveryWay"}},["3"!==e.form.type&&"1"!==(e.row.container||{}).type?a("el-radio-button",{attrs:{label:"0"}},[e._v("\n                  快递\n                ")]):e._e(),"3"!==e.form.type&&"1"!==(e.row.container||{}).type?a("el-radio-button",{attrs:{label:"1"}},[e._v("\n                  卡派\n                ")]):e._e(),"1"!==e.form.type&&"2"!==e.form.type||"1"!==(e.row.container||{}).type?e._e():a("el-radio-button",{attrs:{label:"3"}},[e._v("\n                  整柜直送\n                ")]),"3"!==e.form.type?a("el-radio-button",{attrs:{label:"2"}},[e._v("\n                  自提\n                ")]):e._e(),"2"===e.row.addressType?a("el-radio-button",{attrs:{label:"4"}},[e._v("\n                  到仓\n                ")]):e._e()],1)],1)])]),a("div",{staticStyle:{"font-size":"14px",color:"#303133"}},[e._v("\n          当前服务："+e._s((e.row.transChannel||{}).name)+"\n        ")]),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.lscList,"max-height":"300px",border:""}},[a("el-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticStyle:{"text-align":"center"}},[a("el-radio",{attrs:{disabled:(e.row.transChannel||{}).id===t.row.id,label:t.row.id},model:{value:e.selectRowId,callback:function(t){e.selectRowId=t},expression:"selectRowId"}},[e._v("\n                   \n                ")])],1)]}}],null,!1,1305359421)}),a("el-table-column",{attrs:{label:"服务名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.name+"【"+t.row.lsId+"】")+"\n            ")]}}],null,!1,806670153)})],1)],1):e._e()]),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",disabled:e.dialogLoading},on:{click:function(t){e.visible=!1}}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:e.dialogLoading},on:{click:e.updateServer}},[e._v("\n        保 存\n      ")])],1)]),a("el-dialog",{attrs:{visible:e.visibleCustoms,width:"500px",title:"报关方式"},on:{close:e.dialogClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.form.customs,callback:function(t){e.$set(e.form,"customs",t)},expression:"form.customs"}},[a("el-radio",{attrs:{label:"0"}},[e._v("\n          普通报关\n        ")]),a("el-radio",{attrs:{label:"1"}},[e._v("\n          出口退税\n        ")])],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",disabled:e.dialogLoading},on:{click:function(t){e.visibleCustoms=!1}}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:e.dialogLoading},on:{click:e.updateCustoms}},[e._v("\n        保 存\n      ")])],1)]),a("el-dialog",{attrs:{visible:e.visibleDeliveryWay,width:"550px",title:"派送方式"},on:{close:e.dialogClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.form.deliveryWay,callback:function(t){e.$set(e.form,"deliveryWay",t)},expression:"form.deliveryWay"}},["3"!==e.row.type&&"1"!==(e.row.container||{}).type?a("el-radio",{attrs:{label:"0"}},[e._v("\n          快递\n        ")]):e._e(),"3"!==e.row.type&&"1"!==(e.row.container||{}).type?a("el-radio",{attrs:{label:"1"}},[e._v("\n          卡派\n        ")]):e._e(),"1"!==e.row.type&&"2"!==e.row.type||"1"!==(e.row.container||{}).type?e._e():a("el-radio",{attrs:{label:"3"}},[e._v("\n          整柜直送\n        ")]),"3"!==e.row.type?a("el-radio",{attrs:{label:"2"}},[e._v("\n          自提\n        ")]):e._e(),"2"===e.row.addressType?a("el-radio",{attrs:{label:"4"}},[e._v("\n          到仓\n        ")]):e._e()],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",disabled:e.dialogLoading},on:{click:function(t){e.visibleDeliveryWay=!1}}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:e.dialogLoading},on:{click:e.updateDeliveryWay}},[e._v("\n        保 存\n      ")])],1)]),a("el-dialog",{attrs:{visible:e.visibleAddress,width:"850px",title:"修改地址"},on:{close:e.addressDialogClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-form",{ref:"addressForm",attrs:{model:e.addressForm,rules:e.formRules,"label-width":"110px",size:"small"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"收货人",prop:"contact"}},[a("el-input",{attrs:{maxlength:100,size:"small",placeholder:"请输入"},model:{value:e.addressForm.contact,callback:function(t){e.$set(e.addressForm,"contact",t)},expression:"addressForm.contact"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入"},model:{value:e.addressForm.tel,callback:function(t){e.$set(e.addressForm,"tel",t)},expression:"addressForm.tel"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"省份",prop:"provinceId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:e.provinceChange,focus:e.getStateByCountry},model:{value:e.addressForm.provinceId,callback:function(t){e.$set(e.addressForm,"provinceId",t)},expression:"addressForm.provinceId"}},e._l(e.stateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",disabled:!e.addressForm.provinceId,clearable:""},on:{focus:e.getCityByState},model:{value:e.addressForm.cityId,callback:function(t){e.$set(e.addressForm,"cityId",t)},expression:"addressForm.cityId"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"邮编",prop:"postal"}},[a("el-input",{attrs:{maxlength:30,size:"small",placeholder:"请输入"},model:{value:e.addressForm.postal,callback:function(t){e.$set(e.addressForm,"postal",t)},expression:"addressForm.postal"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"详细地址一",prop:"address"}},[a("el-input",{attrs:{maxlength:30,size:"small",placeholder:"请输入"},model:{value:e.addressForm.address,callback:function(t){e.$set(e.addressForm,"address",t)},expression:"addressForm.address"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"详细地址二",prop:"addressTwo"}},[a("el-input",{attrs:{maxlength:100,size:"small",placeholder:"请输入"},model:{value:e.addressForm.addressTwo,callback:function(t){e.$set(e.addressForm,"addressTwo",t)},expression:"addressForm.addressTwo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"详细地址三",prop:"addressThree"}},[a("el-input",{attrs:{maxlength:100,size:"small",placeholder:"请输入"},model:{value:e.addressForm.addressThree,callback:function(t){e.$set(e.addressForm,"addressThree",t)},expression:"addressForm.addressThree"}})],1)],1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",disabled:e.dialogLoading},on:{click:e.addressDialogClose}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:e.dialogLoading},on:{click:e.submitUpdateAddress}},[e._v("\n        保 存\n      ")])],1)])],1):e._e()},O=[],I=(a("5df3"),a("4f7f"),a("75fc"));a("55dd"),a("28a5"),a("7514");function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.render=!0,e.checked=!1,e.loading=!1,e.visible=!1,e.visibleAddress=!1,e.visibleCustoms=!1,e.visibleDeliveryWay=!1,e.dialogLoading=!1,e.fileLoading=!1,e.statusLoading=!1,e.logLoading=!1,e.otherOrderLoading=!1,e.addressForm={address:"",addressThree:"",addressTwo:"",cityId:"",postal:"",provinceId:"",contact:"",tel:""},e.formRules={address:[{required:!0,message:"详细地址一不能为空",trigger:"blur"}],provinceId:[{required:!0,message:"省份不能为空",trigger:"change"}],cityId:[{required:!0,message:"城市不能为空",trigger:"change"}],contact:[{required:!0,message:"收货人不能为空",trigger:"change"}],tel:[{required:!0,message:"联系电话不能为空",trigger:"change"},{min:0,max:20,message:"联系电话最多20位",trigger:"blur"}],postal:[{required:!0,message:"邮编不能为空",trigger:"blur"}]},e.pagination={page:1,size:10,total:0},e.serverType="1",e.row={},e.lscConfig={},e.form={deliveryWay:"",includeTax:"",customs:"",countryId:"",type:""},e.statusList=[],e.fileList=[],e.otherOrderList=[],e.measureStatusList=[{id:1,name:"待计量"},{id:2,name:"计量中"},{id:3,name:"已计量"}],e.examineStatusList=[{id:1,name:"待验货"},{id:2,name:"验货中"},{id:3,name:"已完成"}],e.declareList=[{name:"草单已录入",id:"0"},{name:"草单已确认",id:"1"},{name:"申报单已提交",id:"2"},{name:"通关已放行",id:"3"},{name:"通关查验",id:"4"},{name:"查验放行",id:"5"},{name:"退货",id:"6"}],e.inspectList=[{name:"报检未放行",id:"0"},{name:"报检已放行",id:"1"},{name:"查验放行",id:"2"},{name:"退货",id:"3"}],e.categories=[{name:"普货",value:"0"},{name:"纯电",value:"2"},{name:"带磁",value:"3"},{name:"带电",value:"1"},{name:"危险",value:"4"}],e.lscList=[],e.logList=[],e.stateList=[],e.cityList=[],e.countryList=[],e.selectRowId="",e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"getCountryList",value:function(){var e=this;this.countryList.length||Object(v["r"])().then(function(t){var a=t.data||{};e.countryList=a.result||[]}).catch(function(t){return e.countryList=[],t})}},{key:"serverTypeChange",value:function(e){this.dialogLoading||(this.serverType=e,this.selectRowId="","1"===e&&(this.form.deliveryWay=this.row.deliveryWay,this.form.includeTax=this.row.includeTax,this.form.type="",this.form.countryId="",this.getLscListByPrice()),"2"===e&&(this.form.deliveryWay="","1"===(this.row.transChannel||{}).dispatch&&(this.form.deliveryWay="0"),"0"===(this.row.transChannel||{}).dispatch&&(this.form.deliveryWay="1"),"2"===(this.row.transChannel||{}).dispatch&&(this.form.deliveryWay="2"),"3"===(this.row.transChannel||{}).dispatch&&(this.form.deliveryWay="3"),"4"===(this.row.transChannel||{}).dispatch&&(this.form.deliveryWay="4"),this.form.includeTax=(this.row.transChannel||{}).includeTax,this.form.type=(this.row.transChannel||{}).subtypeId,this.form.countryId="",this.getLscList()))}},{key:"submitUpdateAddress",value:function(){var e=this,t=this.$refs.addressForm;t.validate(function(t){if(t){var a=e.stateList.find(function(t){return t.id===e.addressForm.provinceId})||{},s=e.cityList.find(function(t){return t.id===e.addressForm.cityId})||{},i=e.row.consignee||{},n=$({city:s.alias,cityCode:s.id,code:e.row.code,contact:i.contact,email:i.email,province:a.alias,provinceCode:a.abbr,tel:i.tel},e.addressForm);e.dialogLoading=!0,Object(v["nb"])(n).then(function(){e.dialogLoading=!1,e.$message.success("修改成功"),e.addressDialogClose(),e.getOrderDetails(e.row)}).catch(function(){e.dialogLoading=!1})}})}},{key:"provinceChange",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.cityList=[],this.addressForm.cityId="",e.next=4,this.getCityByState();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getStateByCountry",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.stateList.length){e.next=2;break}return e.abrupt("return");case 2:if(!(this.row.consignee||{}).countryCode){e.next=5;break}return e.next=5,Object(v["Z"])({countryId:(this.row.consignee||{}).countryCode}).then(function(e){var a=e.data||{};t.stateList=(a.result||[]).map(function(e){return e.alias?e.label=e.name+"-"+e.alias:e.label=e.name,e})}).catch(function(e){return t.stateList=[],e});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityByState",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.cityList.length){e.next=2;break}return e.abrupt("return");case 2:if(!this.addressForm.provinceId){e.next=5;break}return e.next=5,Object(v["q"])({stateId:this.addressForm.provinceId}).then(function(e){var a=e.data||{};t.cityList=(a.result||[]).map(function(e){return e.alias?e.label=e.name+"-"+e.alias:e.label=e.name,e})}).catch(function(e){return t.cityList=[],e});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"updateAddress",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.visibleAddress=!0,this.dialogLoading=!0,t=this.row.consignee||{},this.addressForm={address:(t.address||"").split("；")[0],addressThree:(t.address||"").split("；")[2],addressTwo:(t.address||"").split("；")[1],cityId:t.cityCode,postal:t.postal,provinceId:t.provinceId,contact:t.contact,tel:t.tel},e.next=6,this.getStateByCountry();case 6:return e.next=8,this.getCityByState();case 8:this.dialogLoading=!1;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"addressDialogClose",value:function(){this.visibleAddress=!1,this.stateList=[],this.cityList=[];var e=this.$refs.addressForm;e.clearValidate()}},{key:"goBack",value:function(){this.row={},this.lscConfig={},this.pagination={page:1,size:10,total:0},this.form={deliveryWay:"",includeTax:"",customs:"",countryId:"",type:""},this.lscList=[],this.logList=[],this.fileList=[],this.statusList=[],this.otherOrderList=[],this.selectRowId="",this.$emit("back")}},{key:"resetExamine",value:function(){var e=this;this.$msgbox({title:"提示",message:"请确认操作？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t=e.examineOrderList.sort(function(e,t){return L()(t.createTime).diff(L()(e.createTime),"second")})[0]||{},a={id:t.id};e.loading=!0,Object(v["ib"])(a).then(function(){e.loading=!1,e.$message.success("操作成功"),e.getOrderDetails(e.row)}).catch(function(){e.loading=!1,e.render=!1,e.$nextTick(function(){e.render=!0})})}).catch(function(){return!1})}},{key:"getOtherOrder",value:function(){var e=this,t={code:this.row.code,id:this.row.id,sellerId:(this.row.seller||{}).id};this.otherOrderLoading=!0,Object(v["V"])(t).then(function(t){e.otherOrderLoading=!1;var a=t.data||{},s=a.measure||[],i=a.examine||[],n=a.express||null,r=a.declare||null,o=[];s.forEach(function(e){var t=e.measurementDetails||[],a=t.reduce(function(e,t){var a=t.length*t.wigth*t.height;return e.totalW=parseFloat((e.totalW+t.weight).toFixed(2)),e.totalV=parseFloat((e.totalV+a/1e6).toFixed(2)),e},{boxNum:t.length,totalV:0,totalW:0});o.push($({order_type:"measure"},e,{},a))}),i.forEach(function(t){var a=t.categories||"",s=Object(I["a"])(new Set(Object(I["a"])(a.split(",")))),i=e.categories.filter(function(e){return s.find(function(t){return t===e.value})}).map(function(e){return e.name}).join("，");o.push($({order_type:"examine"},t,{categoriesStr:i}))}),n&&o.push($({order_type:"express"},n)),r&&o.push($({order_type:"declare"},r)),e.otherOrderList=o}).catch(function(){return e.otherOrderLoading=!1,e.otherOrderList=[],!1})}},{key:"expressOrder",value:function(){var e=this;this.$msgbox({title:"提示",message:"请确认操作？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t={code:e.row.code};e.loading=!0,Object(v["k"])(t).then(function(){e.loading=!1,e.$message.success("操作成功"),e.getOrderDetails(e.row)}).catch(function(){e.loading=!1,e.render=!1,e.$nextTick(function(){e.render=!0})})}).catch(function(){return!1})}},{key:"resetMeasure",value:function(){var e=this;this.$msgbox({type:"warning",title:"提示",message:"请确认操作？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t=e.measureOrderList.sort(function(e,t){return L()(t.createTime).diff(L()(e.createTime),"second")})[0]||{},a={code:e.row.code,lscId:(e.row.lsc||{}).key,lscName:(e.row.lsc||{}).value,mid:t.id};e.loading=!0,Object(v["jb"])(a).then(function(){e.loading=!1,e.$message.success("操作成功"),e.getOrderDetails(e.row)}).catch(function(){e.render=!1,e.$nextTick(function(){e.render=!0}),e.loading=!1})}).catch(function(){return!1})}},{key:"generateDeclarationOrder",value:function(){var e=this;this.$msgbox({type:"warning",title:"提示",message:"请确认操作？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t={number:e.row.code,type:e.row.customs0};e.loading=!0,Object(v["l"])(t).then(function(){e.loading=!1,e.$message.success("操作成功"),e.getOrderDetails(e.row)}).catch(function(){e.loading=!1,e.render=!1,e.$nextTick(function(){e.render=!0})})}).catch(function(){return!1})}},{key:"cancelDeclarationOrder",value:function(){var e=this;this.$msgbox({type:"warning",title:"提示",message:"请确认操作？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t={number:e.row.code};e.loading=!0,Object(v["e"])(t).then(function(){e.loading=!1,e.$message.success("操作成功"),e.getOrderDetails(e.row)}).catch(function(){e.loading=!1,e.render=!1,e.$nextTick(function(){e.render=!0})})}).catch(function(){return!1})}},{key:"dialogClose",value:function(){this.dialogLoading||(this.visible=!1,this.visibleCustoms=!1,this.visibleDeliveryWay=!1,this.form={deliveryWay:"",includeTax:"",customs:"",countryId:"",type:""},this.selectRowId="",this.lscList=[])}},{key:"editCustoms",value:function(){this.visibleCustoms=!0,this.form.customs=this.row.customs0}},{key:"editLsc",value:function(){this.visible=!0,this.form.deliveryWay=this.row.deliveryWay,this.form.includeTax=this.row.includeTax,this.form.type="",this.form.countryId="",this.serverType="1",this.getCountryList(),this.getLscListByPrice()}},{key:"getLscList",value:function(){var e=this,t=$({dispatch:""},this.form,{purpose:"2",status:"1",subtypeId:this.form.type,page:1,size:9999});"0"===this.form.deliveryWay&&(t.dispatch="1"),"1"===this.form.deliveryWay&&(t.dispatch="0"),"2"===this.form.deliveryWay&&(t.dispatch="2"),"3"===this.form.deliveryWay&&(t.dispatch="3"),"4"===this.form.deliveryWay&&(t.dispatch="4"),this.dialogLoading=!0,Object(v["H"])(t).then(function(t){e.dialogLoading=!1;var a=t.data||{};e.lscList=a.result||[]}).catch(function(){e.dialogLoading=!1,e.lscList=[]})}},{key:"editDeliveryWay",value:function(){this.visibleDeliveryWay=!0,this.form.deliveryWay=this.row.deliveryWay}},{key:"updateDeliveryWay",value:function(){var e=this;this.form.deliveryWay!==this.row.deliveryWay?this.$msgbox({title:"提示",message:"请确认是否修改订单派送方式？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t={code:e.row.code,customs0:e.row.customs0,deliveryWay:e.form.deliveryWay,lscId:e.row.lsc.key};e.dialogLoading=!0,Object(v["pb"])(t).then(function(){e.dialogLoading=!1,e.$message.success("派送方式修改成功"),e.visibleDeliveryWay=!1,e.getOrderDetails(e.row)}).catch(function(){e.dialogLoading=!1})}).catch(function(){return!1}):this.visibleDeliveryWay=!1}},{key:"updateCustoms",value:function(){var e=this;this.form.customs!==this.row.customs0?this.$msgbox({title:"提示",message:"请确认是否修改订单报关方式？",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t={code:e.row.code,customs0:e.form.customs,deliveryWay:e.row.deliveryWay,lscId:e.row.lsc.key};e.dialogLoading=!0,Object(v["ob"])(t).then(function(){e.dialogLoading=!1,e.$message.success("报关方式修改成功"),e.visibleCustoms=!1,e.getOrderDetails(e.row)}).catch(function(){e.dialogLoading=!1})}).catch(function(){return!1}):this.visibleCustoms=!1}},{key:"updateServer",value:function(){var e=this;if(this.selectRowId){if("1"===this.serverType){if(this.selectRowId===(this.row.lsc||{}).key)return void this.$message.warning("所选服务不能与当前服务一致")}else{if(!this.form.countryId)return void this.$message.warning("请选择目的国");if(this.selectRowId===(this.row.transChannel||{}).id)return void this.$message.warning("所选服务不能与当前服务一致")}this.$msgbox({title:"提示",message:"1"===this.serverType?"请确认是否将订单服务修改？":"请确认是否将订单发货渠道修改",showCancelButton:!0,confirmButtonText:"确认",cancelButtonText:"取消"}).then(function(){var t={},a=null;if("1"===e.serverType&&(t={code:e.row.code,customs0:e.row.customs0,deliveryWay:e.row.deliveryWay,lscId:e.selectRowId},a=v["qb"]),"2"===e.serverType){var s=e.countryList.find(function(t){return t.id===e.form.countryId})||{};t={code:e.row.code,lscId:e.selectRowId,country:s.id,countryName:s.name},a=v["i"]}e.dialogLoading=!0,a&&a(t).then(function(){e.dialogLoading=!1,e.$message.success("服务修改成功"),e.visible=!1,e.getOrderDetails(e.row)}).catch(function(){e.dialogLoading=!1})}).catch(function(){return!1})}else this.$message.warning("请选择服务")}},{key:"getLscListByPrice",value:function(){var e=this,t={model:{orderCustomer:this.row.orderCustomer||{},coverTank:"",orgTag:"",category:"",status:1,destinationId:"",purpose:"0",includeTax:this.form.includeTax,subtypeId:this.row.type,purposeType:this.row.addressType,deliveryId:(this.row.delivery||{}).key,countryId:(this.row.country||{}).key,stateId:"1"===this.row.addressType?(this.row.consignee||{}).provinceId:(this.row.fbastore||{}).stateId,cityId:"1"===this.row.addressType?(this.row.consignee||{}).cityCode:(this.row.fbastore||{}).cityId,fbaId:"1"===this.row.addressType?"":(this.row.fbastore||{}).id},page:1,size:999};"1"!==t.model.subtypeId&&"2"!==t.model.subtypeId||(t.model.containerType=(this.row.container||{}).type),"0"===this.form.deliveryWay&&(t.model.dispatch="1"),"1"===this.form.deliveryWay&&(t.model.dispatch="0"),"2"===this.form.deliveryWay&&(t.model.dispatch="2"),"3"===this.form.deliveryWay&&(t.model.dispatch="3"),"4"===this.form.deliveryWay&&(t.model.dispatch="4"),this.dialogLoading=!0,Object(v["I"])(t).then(function(t){e.dialogLoading=!1;var a=t.data||{};e.lscList=a.result||[]}).catch(function(){e.dialogLoading=!1,e.lscList=[]})}},{key:"loadStatusData",value:function(){var e=this,t={index:"1",words:this.row.code};this.statusLoading=!0,Object(v["T"])(t).then(function(t){var a=t.data||{};e.statusList=(a.status||[]).sort(function(e,t){return L()(t.updateAt).diff(L()(e.updateAt),"second")}).reduce(function(e,t){return e.find(function(e){return e.statusIndex===t.statusIndex})||e.push(t),e},[]).map(function(t){return t.visible=!1,t.keyCode=e.row.code,t}),e.statusLoading=!1}).catch(function(){e.statusLoading=!1,e.statusList=[]})}},{key:"showFileList",value:function(e){var t=this,a={code:e.keyCode,statusIndex:e.statusIndex};this.fileList=[],this.fileLoading=!0,Object(v["S"])(a).then(function(e){t.fileList=e.data||[],t.fileLoading=!1}).catch(function(){t.fileLoading=!1})}},{key:"downloadFile",value:function(e){e.fileSource?window.open(e.fileSource):this.$message.warning("暂无可下载文件")}},{key:"show",value:function(e){this.getOrderDetails(e)}},{key:"getOrderDetails",value:function(e){var t=this;this.loading=!0,Object(v["O"])({id:e.id}).then(function(e){t.loading=!1;var a=e.data||{};t.row=a,t.lscConfig=a.lscConfig||{},t.render=!1,t.$nextTick(function(){t.render=!0}),t.getOtherOrder(),t.getLogList(),t.loadStatusData()}).catch(function(){t.loading=!1,t.row={},t.lscConfig={}})}},{key:"handleSizeChange",value:function(e){this.pagination.size=e,this.getLogList()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=e,this.getLogList()}},{key:"getLogList",value:function(){var e=this,t={model:this.row.code,page:this.pagination.page,size:this.pagination.size};this.logLoading=!0,Object(v["F"])(t).then(function(t){e.logLoading=!1;var a=t.data||{};e.logList=(a.result||[]).sort(function(e,t){return L()(t.createTime).diff(L()(e.createTime),"second")}),e.pagination.total=a.total||0,e.render=!1,e.$nextTick(function(){e.render=!0})}).catch(function(){e.logLoading=!1,e.logList=[],e.pagination.total=0,e.render=!1,e.$nextTick(function(){e.render=!0})})}},{key:"measureOrderList",get:function(){return this.otherOrderList.filter(function(e){return"measure"===e.order_type})}},{key:"examineOrderList",get:function(){return this.otherOrderList.filter(function(e){return"examine"===e.order_type})}},{key:"expressOrderList",get:function(){return this.otherOrderList.filter(function(e){return"express"===e.order_type})}},{key:"declareOrderList",get:function(){return this.otherOrderList.filter(function(e){return"declare"===e.order_type})}}]),t}(h["e"]);N=m["a"]([Object(h["a"])({name:"order-update"})],N);var z=N,D=z,M=(a("d3da"),a("2877")),W=Object(M["a"])(D,T,O,!1,null,"53c7dd5a",null),P=W.exports,A=a("3e3c"),E=a("35b2"),R=a("5317");function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var V=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.detailShow=!1,e.moreShow=!1,e.measureShow=!1,e.expressShow=!1,e.orderTrackingShow=!1,e.orderUpdateShow=!1,e.showAudit=!1,e.loading=!1,e.dialogOut=!1,e.isWarehouseVisible=!1,e.isFrostVisible=!1,e.loadFileList=!1,e.dialogAudit=!1,e.dialogLoading=!1,e.isLogVisible=!1,e.selectLoading=!1,e.excelLoading=!1,e.isEdit=!1,e.showCustomRow={},e.customFileList=[],e.fileList=[],e.companyTypeList=[{id:"1",name:"客户"},{id:"2",name:"二级代理商"}],e.orderTypeList=[{name:"销售订单",id:"0"},{name:"采购订单",id:"1"}],e.selectType="1",e.keyWord="",e.freezeRemark="",e.tableData=[],e.outForm={audit:void 0,remark:void 0},e.moreObj={},e.searchForm={coverTank:void 0,ifFrozen:void 0,customs0:void 0,status:void 0,audit:void 0,type:void 0,lscId:void 0,custId:void 0,code:void 0,customerName:void 0,countryId:void 0,fbastoreId:void 0,comId:void 0,agentId:void 0,deliveryWay:void 0,declartionStatus:void 0,expressNo:void 0,examineStatus:void 0,measureStatus:void 0,inventoryStatus:void 0,includeTax:void 0,comType:"",orderType:"0",isVague:!1,orderTime:[]},e.auditForm={audit:"",reason:""},e.auditObj={},e.formRules={audit:{required:!0,message:"请选择审核结果",trigger:"change"}},e.frostRules={remark:{required:!0,message:"冻结原因不能为空",trigger:"blur"}},e.frostForm={code:void 0,remark:void 0,applyName:void 0,applyAccount:void 0,reason:void 0},e.title="仓库信息",e.isFrost=!1,e.selectForm={},e.page=1,e.size=10,e.total=0,e.typeList=[{name:"空运",id:"0"},{name:"海运",id:"1"},{name:"铁路",id:"2"},{name:"卡航",id:"4"}],e.statusList=[],e.pickList=[{name:"自主送货",id:"0"},{name:"上门提货",id:"1"},{name:"快递发货",id:"2"},{name:"整柜直装",id:"3"}],e.privatelineList=[],e.countryList=[],e.warehouseList=[],e.companyList=[],e.agentList=[],e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"formatPay",value:function(e){var t=e.payTime?L()(e.payTime).unix():"",a=L()().unix(),s=t||a,i=e.cutoffTime?L()(e.cutoffTime).unix():"";return!!i&&i&&i<s}},{key:"formatCutoffDay",value:function(e){var t=e.payTime?L()(e.payTime).unix():"",a=L()().unix(),s=t||a,i=e.cutoffTime?L()(e.cutoffTime).unix():"";s&&L()(s).unix();return i&&i<s?Math.ceil((s-i)/86400)+"天":"--"}},{key:"handleMouseEnter",value:function(e,t,a,s){var i=e.ifFrozen?"冻结原因: "+(e.freeze||{}).remark:"",n="2"===e.audit?"审核拒绝原因："+(e.reason||""):"";this.freezeRemark=i+(i&&n?"<br/>":"")+(n||"")}},{key:"handleMouseLeave",value:function(){this.freezeRemark=""}},{key:"handleMouseMove",value:function(e){var t=document.getElementById("freezeTip");t.style.left=e.clientX+25+"px",t.style.top=e.clientY+"px",this.freezeRemark?(t.style.display="block",t.innerHTML=this.freezeRemark):(t.style.display="none",t.innerHTML="")}},{key:"showExpress",value:function(e){this.expressShow=!0;var t=this.$refs.expressList;t.show(e)}},{key:"showOrderSoInfo",value:function(e){var t=this.$refs.orderSoInfo;t.show(e)}},{key:"showOrderTracking",value:function(e){this.orderTrackingShow=!0;var t=this.$refs.orderTracking;t.show(e)}},{key:"showOrderUpdate",value:function(e){this.orderUpdateShow=!0;var t=this.$refs.orderUpdate;t.show(e)}},{key:"goBack",value:function(){this.showAudit=!1,this.getTableData()}},{key:"orderUpdateGoBack",value:function(){this.orderUpdateShow=!1,this.getTableData()}},{key:"getBack",value:function(){this.detailShow=!1,this.getTableData()}},{key:"downGoodFile",value:function(e){var t=this;e.code?(this.loading=!0,Object(v["U"])({code:e.code}).then(function(a){t.loading=!1;var s=document.createElement("a");document.body.appendChild(s);var i=new Blob([a],{type:"application/vnd.ms-excel"}),n=URL.createObjectURL(i);s.href=n,s.download=e.code+"商品信息"+L()().format("YYYY-MM-DD_HH-mm-ss")+".xls",s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}).catch(function(e){t.loading=!1,e.data.text().then(function(e){try{var a=JSON.parse(e);200!==a.code&&t.$message.error(a.msg||"文件下载失败")}catch(s){return s}})})):this.$message.error("原单号不存在")}},{key:"downFile",value:function(e){if(e.url){var t="https://file.jhtinfo.net/"+e.url;window.open(t)}else this.$message.error("暂无文件可下载")}},{key:"uploadFile",value:function(e,t){var a=this,s=e.file;this.loadFileList=!0,this.$upload(!0,s,"jht-admin/customsOrder/".concat(L()().valueOf()+"/"+s.name)).then(function(e){var s=e.data,i=U({},t,{url:s});1===t.fileStatus&&(i.status=0),a.saveFile(i)}).catch(function(e){return a.loadFileList=!1,e})}},{key:"saveFile",value:function(e){var t=this;Object(y["z"])(e).then(function(e){t.$message({type:"success",message:"上传成功"}),t.loadFileList=!1,t.customFileListShow(t.showCustomRow)}).catch(function(e){return t.loadFileList=!1,e})}},{key:"customFileListShow",value:function(e){var t=this;this.showCustomRow=e;var a={number:e.code,type:e.customs0};this.loadFileList=!0,Object(y["p"])(a).then(function(e){t.loadFileList=!1,t.customFileList=e.data||[]}).catch(function(e){return t.loadFileList=!1,e})}},{key:"customFileListHide",value:function(){this.showCustomRow={},this.customFileList=[]}},{key:"volumesFilter",value:function(e,t){return"CM"===t?(1e-6*e).toFixed(3):"M"===t?e.toFixed(3):"INCH"===t?(164e-7*e).toFixed(3):"FT"===t?(.0283168*e).toFixed(3):void 0}},{key:"onOrderType",value:function(){this.tableData=[],"1"===this.searchForm.orderType?(this.searchForm.comType="",this.searchForm.comId="",this.companyList=[]):"0"===this.searchForm.orderType&&(this.searchForm.comType="1")}},{key:"onComType",value:function(){this.searchForm.comId="",this.companyList=[],this.tableData=[]}},{key:"onType",value:function(){this.searchForm.deliveryWay=void 0,this.searchForm.coverTank=void 0,this.searchForm.lscId=void 0}},{key:"onAgent",value:function(){this.searchForm.comId=void 0,this.companyList=[],this.tableData=[],this.getTableData(1)}},{key:"onCompany",value:function(){this.tableData=[],this.getTableData(1)}},{key:"getAgentList",value:function(){var e=this,t={page:1,size:99999};t.parentId=this.custId,t.subtype="1",t.types="05",this.selectLoading=!0,Object(v["m"])(t).then(function(t){var a=t.data||{};e.agentList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCompanyList",value:function(){var e=this,t={page:1,size:9999},a=this.custType,s=this.custSubtype,i=null;if("2"!==a||"1"!==this.searchForm.comType&&"2"!==s){if("2"!==a||"2"!==this.searchForm.comType)return void(this.companyList=[]);t.parentId=this.custId,t.subtype="2",t.types="05",i=v["m"]}else t.custIds=[this.custId],i=v["t"];this.selectLoading=!0,i(t).then(function(t){if("2"!==a||"1"!==e.searchForm.comType&&"2"!==s){var i=t.data||{};e.companyList=i.result||[]}else{var n=t.data||[];e.companyList=n}e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this,t={custId:this.custId||"",typeId:"05"};this.selectLoading=!0,Object(g["b"])(t).then(function(t){e.countryList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getPrivatelineList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.searchForm.countryId,subtypeId:this.searchForm.type};Object(v["G"])(t).then(function(t){var a=t.data||[];e.privatelineList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.searchForm.countryId,codeSort:"A",page:1,size:9999};Object(v["D"])(t).then(function(t){var a=t.data||{};e.warehouseList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"formmatAudit",value:function(e){return"0"===e.audit?"待审核":"1"===e.audit?"审核通过":"2"===e.audit?"审核拒绝":"3"===e.audit?"审核中":void 0}},{key:"resetForm",value:function(){this.selectForm={}}},{key:"viewLog",value:function(){this.isEdit=!1,this.isLogVisible=!0}},{key:"cancel",value:function(){this.isWarehouseVisible=!1,this.isLogVisible=!1,this.resetForm()}},{key:"cancelOut",value:function(){this.dialogOut=!1,this.outForm={audit:void 0,remark:void 0}}},{key:"saveOut",value:function(){var e=this;this.dialogLoading=!0;var t={code:this.outForm.code,insufficientStatus:0,insufficientRemark:this.outForm.remark};Object(v["d"])(t).then(function(t){e.dialogLoading=!1,e.$message({type:"success",message:"提交成功"}),e.cancelOut(),e.getTableData()}).catch(function(t){return e.dialogLoading=!1,[t,null]})}},{key:"measureAudit",value:function(e,t){this.measureShow=!0;var a=this.$refs.measureForm;a.setData(e,t)}},{key:"handleCancel",value:function(){this.dialogAudit=!1,this.dialogLoading=!1,this.auditObj={},this.auditForm={audit:"",reason:""};var e=this.$refs.theForm;this.$nextTick(function(){e.clearValidate()})}},{key:"handleSubmit",value:function(){var e=this,t=this.$refs.theForm;t.validate(function(t){if(!t)return!1;e.dialogLoading=!0,"1"===e.auditForm.audit&&(e.auditForm.reason=""),Object(v["c"])(e.auditForm).then(function(t){e.dialogLoading=!1,e.$message({type:"success",message:"提交成功"}),e.handleCancel(),e.getTableData()}).catch(function(t){return e.dialogLoading=!1,[t,null]})})}},{key:"wholeCommodityAudit",value:function(e){this.showAudit=!0;var t=this.$refs.commodityAudit;if(t.show(e.id),"0"===e.audit){var a=e.id,s=e.buyer,i=e.seller,n={audit:"3",reason:"",orderId:a,buyerType:s.type,sellerType:i.type};Object(v["c"])(n).then(function(e){return e}).catch(function(e){return e})}}},{key:"viewData",value:function(e){this.detailShow=!0;var t=this.$refs.detailForm;t.setData(e)}},{key:"handleMore",value:function(e){this.moreObj=e}},{key:"showDownDialog",value:function(){var e=this.moreObj.express||{},t=this.$refs.expressExport;t.show(e.trackingNos||"")}},{key:"handleCommand",value:function(e){var t=this;switch(e){case"0":this.downGoodFile(this.moreObj);break;case"1":this.handlePrintDetail("m1015");break;case"2":this.handlePrintDetail("m1010");break;case"1015new":this.handlePrintDetail("m1015",this.moreObj.code);break;case"1010new":this.handlePrintDetail("m1010",this.moreObj.code);break;case"9":this.handlePrintDetail("mA4-4");break;case"3":this.handlePrintInfo();break;case"4":this.deleteData(this.moreObj);break;case"5":this.downZipData(this.moreObj);break;case"10":this.downPdfData(this.moreObj,"10");break;case"12":this.downPdfData(this.moreObj,"12");break;case"6":this.addFrost(this.moreObj);break;case"7":this.applyFrost(this.moreObj);break;case"8":this.auditFrost(this.moreObj);break;case"measure2label":this.measure2label(this.moreObj);break;case"down":this.showDownDialog();break;case"cancel":this.orderCancel(this.moreObj);break;case"update":this.showOrderUpdate(this.moreObj);break;case"11":this.dialogOut=!0,this.outForm={code:this.moreObj.code,audit:(this.moreObj.fullorderInsufficient||{}).insufficientStatus,reason:(this.moreObj.fullorderInsufficient||{}).reason,remark:(this.moreObj.fullorderInsufficient||{}).insufficientRemark};break;case"return":this.$confirm("此操作会给仓库下达出库申请单，请问是否继续？","提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,Object(v["kb"])({code:t.moreObj.code}).then(function(e){t.loading=!1,t.$message.success("操作成功"),t.getTableData()}).catch(function(){t.loading=!1})}).catch(function(){return!1});break;default:break}}},{key:"measure2label",value:function(e){var t=this;this.loading=!0;var a={orderNo:e.code};Object(v["gb"])(a).then(function(){t.$message.success("操作成功"),t.getTableData()}).catch(function(){t.loading=!1})}},{key:"handlePrintDetail",value:function(e,t){var a=this;if(t){var s=this.$refs.print;s.printInit(t,e)}else Object(v["eb"])({tag:e}).then(function(e){var t=e.data||{},s=t.ip+a.moreObj.code;window.open(s)}).catch(function(e){return[e,null]})}},{key:"handlePrintInfo",value:function(){var e=this.$router.resolve({path:"/order-file",query:{code:this.moreObj.code}}),t=e.href;window.open(t,"_blank")}},{key:"downZipData",value:function(e){var t=this;e.code?(this.loading=!0,Object(v["B"])({orderNo:e.code}).then(function(e){if(t.loading=!1,e.type&&-1!==e.type.indexOf("octet-stream")){var a=window.URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=a,s.download="快递订单"+L()().format("YYYY-MM-DD_HH-mm-ss")+".zip",s.click(),window.URL.revokeObjectURL(a),document.body.removeChild(s)}else t.$message.error("暂无快递标签")}).catch(function(e){t.loading=!1,e.data.text().then(function(e){try{var a=JSON.parse(e);200!==a.code&&t.$message.error(a.msg||"文件下载失败")}catch(s){return s}})})):this.$message.error("原单号不存在")}},{key:"downPdfData",value:function(e,t){var a=this;if(e.code){var s=null;if("10"===t)s=v["z"];else{if("12"!==t)return;s=v["A"]}this.loading=!0,s({orderNo:e.code}).then(function(e){a.loading=!1;var t=window.URL.createObjectURL(e),s=document.createElement("a");document.body.appendChild(s),s.href=t,s.download="快递订单"+L()().format("YYYY-MM-DD_HH-mm-ss")+".pdf",s.click(),window.URL.revokeObjectURL(t),document.body.removeChild(s)}).catch(function(e){a.loading=!1,e.data.text().then(function(e){try{var t=JSON.parse(e);200!==t.code&&a.$message.error(t.msg||"文件下载失败")}catch(s){return s}})})}else this.$message.error("原单号不存在")}},{key:"rowClassName",value:function(e){var t=e.row;e.rowIndex;return t.ifFrozen||"2"===t.audit?"frost-red":t.enabled?void 0:"cancel-gray"}},{key:"addFrost",value:function(e){this.isFrostVisible=!0,this.isFrost=!0,this.frostForm.code=e.code}},{key:"getFrost",value:function(e){var t=this,a={code:this.frostForm.code},s="",i=null;"apply"===e?(i=v["b"],s="此操作将申请解冻订单"):"add"===e?(a.remark=this.frostForm.remark,i=v["a"],s="是否确认冻结此订单，冻结后将限制货物出库？"):"audit"===e&&(a.reason=this.frostForm.reason,i=v["hb"],s="此操作将解冻订单，解冻后货物可以正常出库"),this.$confirm(s,"温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.dialogLoading=!0,i(a).then(function(e){t.$message({type:"success",message:"提交成功"}),t.dialogLoading=!1,t.cancelFrost(),t.getTableData()}).catch(function(e){return t.dialogLoading=!1,e})}).catch(function(){return!1})}},{key:"applyFrost",value:function(e){this.frostForm.code=e.code,this.getFrost("apply")}},{key:"auditFrost",value:function(e){this.isFrostVisible=!0,this.isFrost=!1,this.frostForm.code=e.code,this.frostForm.remark=(e.freeze||{}).remark,this.frostForm.applyAccount=(e.freeze||{}).userName,this.frostForm.applyName=(e.freeze||{}).name}},{key:"cancelFrost",value:function(){this.isFrostVisible=!1,this.isFrost=!1,this.frostForm={code:void 0,remark:void 0,applyName:void 0,applyAccount:void 0,reason:void 0}}},{key:"saveFrost",value:function(){var e=this;if(this.isFrost){var t=this.$refs.frostForm;t.validate(function(t){if(!t)return!1;e.getFrost("add")})}else this.getFrost("audit")}},{key:"deleteData",value:function(e){var t=this,a={code:e.code};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["g"])(a).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"orderCancel",value:function(e){var t=this,a={code:e.code};this.$confirm("请确认是否取消该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["f"])(a).then(function(e){t.$message({type:"success",message:"取消成功"}),t.getTableData()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"handleExport",value:function(){var e=this;this.excelLoading=!0;var t=this.custType;"1"===t&&(this.searchForm.orderType="1");var a=this.searchForm,s=a.comId,i=a.agentId,n=(a.comType,a.orderType),o=a.custId,l=a.orderTime,c=Object(r["a"])(a,["comId","agentId","comType","orderType","custId","orderTime"]),d=U({},c,{code:"1"===this.selectType&&this.keyWord?this.keyWord:void 0,customerName:"2"===this.selectType&&this.keyWord?this.keyWord:void 0,trackingNo:"3"===this.selectType&&this.keyWord?this.keyWord:void 0,salesmanStatusTag:!0});Array.isArray(l)&&l.length>0&&(d.startDate=l[0],d.endDate=l[1]),"0"===n?(d.sellerId="0"===t?i:o,d.buyerId=s):"1"===n&&(d.buyerId=o),Object(v["P"])(U({},d)).then(function(t){var a=document.createElement("a");document.body.appendChild(a);var s=new Blob([t],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(s);a.href=i,a.download="全程订单"+L()().format("YYYY-MM-DD_HH-mm-ss")+".xls",a.click(),document.body.removeChild(a),URL.revokeObjectURL(i),e.excelLoading=!1}).catch(function(t){e.excelLoading=!1,t.data.text().then(function(t){try{var a=JSON.parse(t);200!==a.code&&e.$message.error(a.msg||"文件下载失败")}catch(s){return s}})})}},{key:"handleMoreSearch",value:function(){this.moreShow=!0;var e=this.$refs.searchMore;e.searchMore=U({},this.searchForm)}},{key:"handleMoreCancle",value:function(){this.moreShow=!1;var e=this.$refs.searchMore,t=e.searchMore,a=(t.ifFrozen,t.declartionStatus,t.expressNo,t.examineStatus,t.measureStatus,t.inventoryStatus,t.coverTank,t.ifLoading,t.deliveryWay,t.customs0,t.includeTax,Object(r["a"])(t,["ifFrozen","declartionStatus","expressNo","examineStatus","measureStatus","inventoryStatus","coverTank","ifLoading","deliveryWay","customs0","includeTax"]));this.searchForm=U({},a),this.getTableData(1)}},{key:"handleMoreConfirm",value:function(){this.moreShow=!1;var e=this.$refs.searchMore;this.searchForm=e.searchMore,this.getTableData(1)}},{key:"handleVague",value:function(){this.searchForm.isVague=!this.searchForm.isVague}},{key:"getTableData",value:function(e){var t=this;this.loading=!0;var a=this.custType;"1"===a&&(this.searchForm.orderType="1");var s=this.searchForm,i=s.comId,n=s.agentId,o=(s.comType,s.orderType),l=s.custId,c=s.orderTime,d=s.isVague,u=Object(r["a"])(s,["comId","agentId","comType","orderType","custId","orderTime","isVague"]);e&&(this.page=e);var p=U({},u,{code:"1"===this.selectType&&this.keyWord?this.keyWord:void 0,customerName:"2"===this.selectType&&this.keyWord?this.keyWord:void 0,trackingNo:"3"===this.selectType&&this.keyWord?this.keyWord:void 0,isVague:d?"2":void 0,salesmanStatusTag:!0});Array.isArray(c)&&c.length>0&&(p.startDate=c[0],p.endDate=c[1]),"0"===o?(p.sellerId="0"===a?n:l,p.buyerId=i):"1"===o&&(p.buyerId=l);var m={page:this.page,size:this.size,model:U({},p)};Object(v["R"])(m).then(function(e){t.loading=!1;var a=e.data||{};t.tableData=(a.result||[]).map(function(e){var t=e.orderStatusLine||{},a=t.status||[],s=a[0]||{},i=e.status||{},n=e.scanTag;if(!n){var r=i.MEASURE||"",o=i.WS_IN||"";(r&&"5"!==r||o&&"15"===o)&&(n=!0)}return U({},e,{orderStatus_name:s.statusName,orderStatus_updateAt:s.updateAt,orderStatus_describe:s.describe,orderStatus_index:s.statusIndex,scanTag2:n})}),t.total=a.total}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"getStatusList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["ab"])().then(function(e){t.statusList=(e.data||[]).map(function(e){return{name:e.statusName,id:e.statusCode,type:e.statusType}})}).catch(function(){t.statusList=[]});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.searchForm.custId=this.custId,this.searchForm.orderTime=[L()().subtract(30,"d").format("YYYY-MM-DD"),L()().format("YYYY-MM-DD")],this.loading=!0,e.next=5,this.getStatusList();case 5:this.getPrivatelineList(),this.getWarehouseList(),this.getTableData();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"adminId",get:function(){var e=f["a"].info||{},t=e.id;return t}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}},{key:"parentId",get:function(){var e=f["a"].info||{},t=e.parentId;return t}},{key:"parentName",get:function(){var e=f["a"].info||{},t=e.parentName;return t}},{key:"lineStatusList",get:function(){return this.statusList.filter(function(e){return"LINE"===e.type&&"501"!==e.id})}}]),t}(h["e"]);V=m["a"]([Object(h["a"])({name:"whole",components:{print:R["a"],detail:b["a"],commodityAudit:C["a"],examineMeasureTab:w["a"],express:_["a"],drawer:S["a"],searchMore:F["a"],expressExport:E["a"],orderTracking:k["a"],orderUpdate:P,orderSoInfo:A["a"]},props:{}})],V);var Y=V,q=Y,G=(a("cbeb"),Object(M["a"])(q,s,i,!1,null,"fd368bb4",null));t["default"]=G.exports},c2c6:function(e,t,a){"use strict";var s=a("7ab7"),i=a.n(s);i.a},cbeb:function(e,t,a){"use strict";var s=a("9152"),i=a.n(s);i.a},d390:function(e,t,a){"use strict";var s=a("db4e"),i=a.n(s);i.a},d3da:function(e,t,a){"use strict";var s=a("2885"),i=a.n(s);i.a},db4e:function(e,t,a){},dd13:function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"c",function(){return n}),a.d(t,"a",function(){return r});var s=a("b32d");function i(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(s["a"])(t)}function n(e){var t={url:"/setting/container/saveContainer",method:"post",data:e};return Object(s["a"])(t)}function r(e){var t={url:"/setting/container/deleteContainer",method:"delete",params:e};return Object(s["a"])(t)}},e381:function(e,t,a){},e678:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"i"===e.showPage,expression:"showPage === 'i'"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"代客下单"}}),a("div",{staticClass:"app-panel"},[a("div",{staticStyle:{"text-align":"right"}},[a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属客户",filterable:"",clearable:""},on:{focus:e.getCompanyList},model:{value:e.searchForm.comId,callback:function(t){e.$set(e.searchForm,"comId",t)},expression:"searchForm.comId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"订单状态",size:"small",clearable:"",filterable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.lineStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"录单状态",size:"small",clearable:""},model:{value:e.searchForm.salesmanStatus,callback:function(t){e.$set(e.searchForm,"salesmanStatus",t)},expression:"searchForm.salesmanStatus"}},[a("el-option",{attrs:{label:"未录单",value:"0"}}),a("el-option",{attrs:{label:"已录单",value:"1"}})],1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"审核状态",size:"small",clearable:""},model:{value:e.searchForm.audit,callback:function(t){e.$set(e.searchForm,"audit",t)},expression:"searchForm.audit"}},[a("el-option",{attrs:{label:"待审核",value:"0"}}),a("el-option",{attrs:{label:"审核中",value:"3"}}),a("el-option",{attrs:{label:"审核通过",value:"1"}}),a("el-option",{attrs:{label:"审核拒绝",value:"2"}})],1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"业务类型",filterable:"",clearable:""},on:{change:function(t){e.searchForm.lscId=void 0}},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{clearable:"",filterable:"",placeholder:"目的国家",size:"small"},on:{focus:e.getCountryList,change:function(t){e.searchForm.fbastoreId=void 0,e.searchForm.lscId=void 0}},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"FBA仓库",clearable:"",filterable:""},on:{focus:e.getWarehouseList},model:{value:e.searchForm.fbastoreId,callback:function(t){e.$set(e.searchForm,"fbastoreId",t)},expression:"searchForm.fbastoreId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.code,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.searchForm.type||!e.searchForm.countryId,loading:e.selectLoading,size:"small",placeholder:"服务",clearable:"",filterable:""},on:{focus:e.getPrivatelineList},model:{value:e.searchForm.lscId,callback:function(t){e.$set(e.searchForm,"lscId",t)},expression:"searchForm.lscId"}},e._l(e.privatelineList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"下单起始时间","end-placeholder":"下单截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"240px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:e.searchForm.code,callback:function(t){e.$set(e.searchForm,"code",t)},expression:"searchForm.code"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"原单号",value:"1"}})],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["salesmanOrderQuery"],expression:"['salesmanOrderQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableData(1)}}},[e._v("\n            查询\n          ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{fixed:"left",label:"订单信息","min-width":"230"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticClass:"order-info"},[a("div",{staticClass:"seriver-info",attrs:{title:t.row.lsc.value}},["0"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                  空运\n                ")]):e._e(),"1"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                  海运\n                ")]):e._e(),"2"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                  铁路\n                ")]):e._e(),"3"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                  快递\n                ")]):e._e(),"4"===t.row.type?a("div",{staticClass:"type"},[e._v("\n                  卡航\n                ")]):e._e(),a("div",{staticClass:"lscName"},[e._v("\n                  "+e._s(t.row.lsc.value)+"\n                ")])]),a("div",{staticClass:"code",attrs:{title:t.row.code}},[e._v("\n                原单号："+e._s(t.row.code)+"\n              ")])])}}])}),a("el-table-column",{attrs:{label:"录单状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.salesmanStatus?a("span",[e._v("未录单")]):"1"===t.row.salesmanStatus?a("span",[e._v("已录单")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"报关方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.customs0?a("span",[e._v("普通报关")]):"1"===t.row.customs0?a("span",[e._v("出口退税")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"提货方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.pickList[(t.row.supplement||{}).pickType]||{}).name)+"\n            ")]}}])}),"0"===e.custType?a("el-table-column",{attrs:{label:"客户名称","min-width":"180","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#1890ff"}},[e._v("\n                "+e._s((t.row.orderCustomer||{}).name)+"\n              ")])]}}],null,!1,712836479)}):e._e(),a("el-table-column",{attrs:{prop:"packages",label:"件数",width:"120"}}),a("el-table-column",{attrs:{prop:"value",label:"金额","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.value+" "+(t.row.currency||{}).key)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"审核状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"audit-wrap"},["2"===t.row.audit?a("span",{staticClass:"audit",attrs:{title:t.row.reason}}):e._e(),e._v("\n                "+e._s(e.formmatAudit(t.row))+"\n              ")])]}}])}),a("el-table-column",{attrs:{label:"订单状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["LINE"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"入库状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["WS_IN"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"出库状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["WS_OUT"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"计量状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["MEASURE"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"验货状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["EXAMINE"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"报关状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v("\n                "+e._s((e.statusList.find(function(e){return e.id===t.row.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n              ")])]}}])}),a("el-table-column",{attrs:{label:"快递单号",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.express&&t.row.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[a("div",e._l(t.row.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                    "+e._s(t)+"\n                  ")])}),0),a("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[e._v("\n                  已出\n                ")])],1):a("span",[e._v("未出")])]}}])}),a("el-table-column",{attrs:{label:"账单","min-width":"100"}},[e._v("\n            --\n          ")]),a("el-table-column",{attrs:{label:"付款","min-width":"100"}},[e._v("\n            --\n          ")]),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.viewData(t.row)}}},[e._v("\n                查看\n              ")]),"0"===t.row.salesmanStatus?a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["salesmanOrderInput"],expression:"['salesmanOrderInput']"}],attrs:{type:"text"},on:{click:function(a){return e.salesmanOrder(t.row)}}},[e._v("\n                录单\n              ")]):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"d"===e.showPage,expression:"showPage === 'd'"}],staticClass:"app-container"},[a("detail",{ref:"detailForm",attrs:{"line-list":e.privatelineList,"pick-list":e.pickList,"type-list":e.typeList,"ware-list":e.warehouseList},on:{back:function(t){e.showPage="i"}}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"s"===e.showPage,expression:"showPage === 's'"}],staticClass:"app-container"},[a("salesman",{ref:"salesman",on:{back:function(t){e.showPage="i"},load:e.getTableData}})],1)])])},i=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),r=a("a8db"),o=(a("7f7f"),a("96cf"),a("3b8d")),l=a("d225"),c=a("b0b4"),d=a("308d"),u=a("6bb5"),p=a("4e2b"),m=a("9ab4"),h=a("60a3"),f=a("9dba"),v=a("2d66"),g=a("5a0c"),y=a.n(g),b=a("bef3"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}]},[a("div",{staticClass:"detail-back"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$emit("back")}}},[a("i",{staticClass:"el-icon-back"}),a("span",[e._v("返回")])])]),a("div",{staticClass:"app-panel order-detail"},[a("el-form",{ref:"detail",staticClass:"detail-form",attrs:{model:e.form,"label-width":"130px","label-position":"right"}},[a("div",{staticClass:"form-title"},[a("el-row",[a("el-col",{attrs:{span:4}},[e._v("\n            基础信息\n          ")])],1)],1),a("div",{staticStyle:{padding:"0 20px"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"top"}},[a("div",{staticStyle:{flex:"1 1 50%","border-right":"1px solid #F1F6FC"}},[a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"交货区域："}},[e._v("\n              "+e._s(e.form.deliveryName)+"\n            ")]),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"报关方式："}},["0"===e.form.customs0?a("span",[e._v("普通报关")]):"1"===e.form.customs0?a("span",[e._v("出口退税")]):"0"===e.form.customs1?a("span",[e._v("自有进口商报关")]):"1"===e.form.customs1?a("span",[e._v("无进口商")]):e._e()]),"1"===e.form.customs0?a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"合并报关："}},["0"===e.form.mergerClearance?a("span",[e._v("否")]):"1"===e.form.mergerClearance?a("span",[e._v("是")]):a("span",[e._v("--")])]):e._e(),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"派送方式："}},["0"===e.form.deliveryWay?a("span",[e._v("\n                快递\n              ")]):"1"===e.form.deliveryWay?a("span",[e._v("\n                卡派\n              ")]):"2"===e.form.deliveryWay?a("span",[e._v("\n                自提\n              ")]):"3"===e.form.deliveryWay?a("span",[e._v("\n                整柜直装\n              ")]):e._e()]),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"关税方式："}},[e.form.includeTax?a("span",[e._v("\n                包税\n              ")]):a("span",[e._v("\n                不包税\n              ")])]),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"业务类型："}},[e._v("\n              "+e._s((e.typeList[e.form.type]||{}).name)+"\n            ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"提货方式及地址："}},[e._v("\n              "+e._s((e.pickList[e.form.pickType]||{}).name)+"\n               "+e._s(e.form.pickAddress)+"\n            ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"录单状态："}},["0"===e.form.salesmanStatus?a("span",[e._v("\n                未录单\n              ")]):e._e(),"1"===e.form.salesmanStatus?a("span",[e._v("\n                已录单\n              ")]):e._e()]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注："}},[e._v("\n              "+e._s(e.form.remark)+"\n            ")])],1),a("div",{staticStyle:{flex:"1 1 50%","text-align":"center","border-left":"1px solid #F1F6FC"}},[a("el-button",{attrs:{type:"primary",size:"small",round:""}},[e._v("\n              "+e._s(e.form.clauseName)+"\n            ")]),a("div",{staticStyle:{"font-size":"18px","font-weight":"700","margin-top":"10px"}},[e._v("\n              "+e._s(e.form.lscName)+"\n            ")]),a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-items":"center"}},[a("div",{staticStyle:{flex:"1 1 30%","text-align":"center"}},[a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},[a("el-popover",{attrs:{placement:"top",width:"250",trigger:"hover"}},[e._l(e.departureList,function(t,s){return a("div",{key:s},[e._v("\n                      "+e._s(t)+"\n                    ")])}),a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("\n                      "+e._s(e.form.departureName)+"\n                    ")])],2)],1)]),a("div",{staticStyle:{flex:"1 1 40%","text-align":"center"}},[a("div",{staticStyle:{display:"flex","flex-flow":"column nowrap","justify-content":"center"}},[a("div",{staticStyle:{"margin-top":"10px"}},["0"===e.form.type?a("svg-icon",{staticStyle:{color:"#2291E6",width:"25px",height:"25px"},attrs:{name:"airplane"}}):e._e(),"1"===e.form.type?a("svg-icon",{staticStyle:{color:"#2291E6",width:"25px",height:"25px"},attrs:{name:"ship"}}):e._e(),"2"===e.form.type?a("svg-icon",{staticStyle:{color:"#2291E6",width:"25px",height:"25px"},attrs:{name:"railway"}}):e._e()],1),a("div",{staticStyle:{margin:"10px 0",width:"100%",height:"2px","background-color":"#ccc"}})])]),a("div",{staticStyle:{flex:"1 1 30%","text-align":"center"}},[a("div",{staticStyle:{"font-size":"18px","font-weight":"700"}},["3"===e.form.type?a("span",[e._v("\n                    "+e._s((e.form.consignee||{}).country)+" \n                    "+e._s((e.form.consignee||{}).province)+" \n                    "+e._s((e.form.consignee||{}).city)+"\n                  ")]):a("div",[a("el-popover",{attrs:{placement:"top",width:"250",trigger:"hover"}},[e._l(e.destinationList,function(t,s){return a("div",{key:s},[e._v("\n                        "+e._s(t)+"\n                      ")])}),a("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("\n                        "+e._s(e.form.destinationName)+"\n                      ")])],2)],1)])])])],1)])]),a("div",{staticClass:"form-title"},[e._v("\n        收货人\n      ")]),a("div",{staticStyle:{padding:"0 20px"}},[a("el-form-item",{attrs:{label:"目的国："}},[e._v("\n          "+e._s(e.form.countryName)+"\n        ")]),a("el-form-item",{attrs:{label:"目的仓："}},[e._v("\n          "+e._s(e.form.fbastoreCode)+"\n        ")]),a("el-form-item",{attrs:{label:"收货人："}},[e._v("\n          "+e._s((e.form.consignee||{}).contact)+"\n        ")]),a("el-form-item",{attrs:{label:"联系电话："}},[e._v("\n          "+e._s((e.form.consignee||{}).tel)+"\n        ")]),a("el-form-item",{attrs:{label:"邮编："}},[e._v("\n          "+e._s((e.form.consignee||{}).postal)+"\n        ")]),a("el-form-item",{staticStyle:{width:"75%"},attrs:{label:"联系地址："}},[e._v("\n          "+e._s((e.form.consignee||{}).address)+"\n        ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"详细地址："}},[e._v("\n          "+e._s((e.form.consignee||{}).country)+" \n          "+e._s((e.form.consignee||{}).province)+" \n          "+e._s((e.form.consignee||{}).city)+" \n          "+e._s((e.form.consignee||{}).address)+"\n        ")])],1),a("div",{staticClass:"form-title"},[e._v("\n        货物信息\n      ")]),a("div",{staticStyle:{padding:"0 20px"}},[a("el-form-item",{attrs:{label:"拼箱/整柜："}},["1"===e.form.containerType?a("span",[e._v("\n            整柜\n          ")]):"0"===e.form.containerType?a("span",[e._v("\n            拼箱\n          ")]):e._e()]),a("el-form-item",{attrs:{label:"总件数："}},[e._v("\n          "+e._s(e.form.packages)+"\n        ")]),a("el-form-item",{attrs:{label:"总货值："}},[e._v("\n          "+e._s(e.form.value)+" "+e._s(e.form.currencyId)+"\n        ")]),a("el-form-item",{attrs:{label:"总重量："}},[e._v("\n          "+e._s(e.$volumeConversion(e.form.weights,e.form.umWeight,"KGS"))+" kg\n        ")]),a("el-form-item",{attrs:{label:"总体积："}},[e._v("\n          "+e._s(e.$volumeConversion(e.form.volumes,e.$getVolumeUnitByLengthUnit(e.form.umLength),"CBM"))+" m³\n        ")])],1),a("div",{staticClass:"form-title"},[e._v("\n        提货方式\n      ")]),a("div",{staticStyle:{padding:"0 20px"}},[a("el-form-item",{attrs:{label:"提货方式："}},[e._v("\n          "+e._s((e.pickList[e.form.pickType]||{}).name)+"\n        ")]),a("el-form-item",{staticStyle:{width:"75%"},attrs:{label:"提货仓库："}},[e._v("\n          "+e._s(e.form.warehouseName)+"\n        ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"计划入库时间："}},[e._v("\n          "+e._s(e.form.planTime)+"\n        ")]),"0"===e.form.pickType?a("div",[a("el-form-item",{attrs:{label:"车牌号："}},[e._v("\n            "+e._s(e.form.plateNumber)+"\n          ")]),a("el-form-item",{attrs:{label:"司机姓名："}},[e._v("\n            "+e._s(e.form.driverName)+"\n          ")]),a("el-form-item",{attrs:{label:"电话："}},[e._v("\n            "+e._s(e.form.driverPhone)+"\n          ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"证件号："}},["0"===e.form.certType?a("span",[e._v("\n              身份证\n            ")]):"1"===e.form.certType?a("span",[e._v("\n              护照\n            ")]):"2"===e.form.certType?a("span",[e._v("\n              港澳通行证\n            ")]):e._e(),e._v("\n            "+e._s(" | "+e.form.certNo)+"\n          ")])],1):"1"===e.form.pickType||"3"===e.form.pickType?a("div",[a("el-form-item",{attrs:{label:"联系人："}},[e._v("\n            "+e._s(e.form.pickContact)+"\n          ")]),a("el-form-item",{attrs:{label:"联系电话："}},[e._v("\n            "+e._s(e.form.pickTel)+"\n          ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"1"===e.form.pickType?"提货地址：":"装柜地址："}},[e._v("\n            "+e._s(e.form.pickAddressName)+"\n          ")]),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"详细地址："}},[e._v("\n            "+e._s(e.form.pickAddress)+"\n          ")])],1):"2"===e.form.pickType?a("div",[a("el-form-item",{attrs:{label:"快递公司："}},[e._v("\n            "+e._s((e.form.express||{}).expressName)+"\n          ")]),a("el-form-item",{attrs:{label:"快递单号："}},[e._v("\n            "+e._s((e.form.express||{}).no)+"\n          ")])],1):e._e()],1)])],1)])},_=[];a("28a5"),a("7514");function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var L=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.detailLoading=!1,e.form={},e.wordsList=[],e.departureList=[],e.destinationList=[],e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"setData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,this.destinationList=[],this.departureList=[],e.next=5,this.getWordsList();case 5:this.getDetail(a);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getWordsList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.detailLoading=!0,t={type:"server_terms"},e.prev=2,e.next=5,Object(v["fb"])(t);case 5:a=e.sent,s=a.data||[],this.wordsList=s,e.next=14;break;case 10:return e.prev=10,e.t0=e["catch"](2),this.detailLoading=!0,e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e,this,[[2,10]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getDetail",value:function(e){var t=this;Object(v["O"])({id:e}).then(function(e){var a=e.data||{},s=(a.boxes,a.batchSummaries,a.batches,a.lsc),i=(a.buyer,a.currency),n=a.country,o=a.container,l=a.delivery,c=a.supplement,d=a.warehouse,u=a.um,p=a.fbastore,m=Object(r["a"])(a,["boxes","batchSummaries","batches","lsc","buyer","currency","country","container","delivery","supplement","warehouse","um","fbastore"]);t.form=x({},m,{},c,{},u,{fbastoreCode:p.code||""}),t.form.lscId=s.key,t.form.lscName=s.value,t.form.currencyId=i.key,t.form.countryName=n.value,t.form.containerType=o.type,t.form.deliveryName=l.value,t.form.warehouseName=d.name;var h=t.lineList;h.map(function(e){if(t.form.lscId===e.id){var a=t.wordsList.find(function(t){return t.value===e.clause})||{};t.form.clauseName=a.label;var s=(e.departureName||"").split(",");t.form.departureName=(s[0]||"")+(s.length>1?"...":""),t.departureList=s;var i=(e.destinationName||"").split(",");t.form.destinationName=(i[0]||"")+(i.length>1?"...":""),t.destinationList=i}}),t.detailLoading=!1}).catch(function(e){return t.detailLoading=!1,[null,e]})}},{key:"unitFilter",value:function(e){return"CBM"===e?"m³":"CUFT"===e?"ft³":"KGS"===e?"kg":"LBS"===e?"lb":"OZS"===e?"oz":void 0}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}}]),t}(h["e"]);L=m["a"]([Object(h["a"])({name:"detail",components:{},props:{lineList:{type:Array,default:function(){return[]}},pickList:{type:Array,default:function(){return[]}},typeList:{type:Array,default:function(){return[]}},wareList:{type:Array,default:function(){return[]}}}})],L);var C=L,S=C,F=(a("d390"),a("2877")),T=Object(F["a"])(S,w,_,!1,null,"70d0baac",null),O=T.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"detail-back"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$emit("back")}}},[a("i",{staticClass:"el-icon-back"}),a("span",[e._v("返回")])])]),a("div",{staticClass:"app-panel order-detail"},[a("div",{staticClass:"form-title"},[a("el-row",[a("el-col",{attrs:{span:20}},[a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n            总箱数："+e._s(e.totalPackages)+"\n          ")]),a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n            总体积："+e._s(e.$volumeConversion(e.totalVolumes,e.$getVolumeUnitByLengthUnit(e.orderDetails.umVolume),"CBM"))+" m³\n          ")]),a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n            总重量："+e._s(e.totalWeights)+" "+e._s(e.$fomatWeight(e.orderDetails.umWeight))+"\n          ")]),a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n            总货值："+e._s(e.totalValue)+" "+e._s(e.orderDetails.currencyId)+"\n          ")]),a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n            支持最大重量："+e._s(e.lscConfig.weight)+" "+e._s(e.$fomatWeight(e.orderDetails.umWeight))+"\n          ")]),a("span",{staticStyle:{"margin-right":"10px"}},[e._v("\n            支持最大体积："+e._s(e.$volumeConversion(e.lscConfig.cubed,e.lscConfig.umVolume,"CBM"))+" m³\n          ")])]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.downFile}},[e._v("\n            文件下载\n          ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.addBeatch}},[e._v("\n            添加批次\n          ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.saveSalesmanOrder}},[e._v("\n            录单保存\n          ")])],1)],1)],1),a("div",{staticClass:"batch-info"},e._l(e.batches,function(t,s){return a("div",{key:t.id,staticClass:"batch-item"},[a("el-row",{staticStyle:{padding:"10px",border:"1px solid #e8e8e8"}},[a("el-col",{attrs:{span:4}},[a("el-tag",[e._v("批次"+e._s(s+1))])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.addBatchGood(t)}}},[e._v("\n              添加商品\n            ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.copyBatch(t)}}},[e._v("\n              复制批次\n            ")]),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteBath(s)}}},[e._v("\n              删除批次\n            ")])],1)],1),a("el-row",{staticStyle:{padding:"10px","border-left":"1px solid #e8e8e8","border-right":"1px solid #e8e8e8"}},[a("el-col",{attrs:{span:9}},["0"!==e.orderDetails.deliveryWay?a("el-input",{staticStyle:{"padding-right":"10px",width:"180px"},attrs:{placeholder:"预约号",size:"small"},model:{value:t.reservation,callback:function(a){e.$set(t,"reservation",a)},expression:"batch.reservation"}}):e._e(),"0"!==e.orderDetails.deliveryWay?a("el-input",{staticStyle:{"padding-right":"10px",width:"180px"},attrs:{placeholder:"FBA编号",size:"small"},model:{value:t.fbaNo,callback:function(a){e.$set(t,"fbaNo",a)},expression:"batch.fbaNo"}}):e._e(),e._v("\n             \n          ")],1),"0"===e.container.type?[a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"总箱数",size:"small"},on:{blur:function(a){return e.onlyNumber(t.packages,t,"packages")}},model:{value:t.packages,callback:function(a){e.$set(t,"packages",a)},expression:"batch.packages"}},[a("template",{slot:"append"},[e._v("\n                  纸箱\n                ")])],2)],1),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"单箱重量",size:"small"},on:{blur:function(a){return e.onlyNumber(t.weight,t,"weight")}},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"batch.weight"}},[a("template",{slot:"append"},[e._v("\n                  "+e._s(e.$fomatWeight(e.orderDetails.umWeight))+"\n                ")])],2)],1),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"单箱长度",size:"small"},on:{blur:function(a){return e.onlyNumber(t.length,t,"length")}},model:{value:t.length,callback:function(a){e.$set(t,"length",a)},expression:"batch.length"}},[a("template",{slot:"append"},[e._v("\n                  "+e._s(e.$fomatLength(e.orderDetails.umLength))+"\n                ")])],2)],1),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"单箱宽度",size:"small"},on:{blur:function(a){return e.onlyNumber(t.width,t,"width")}},model:{value:t.width,callback:function(a){e.$set(t,"width",a)},expression:"batch.width"}},[a("template",{slot:"append"},[e._v("\n                  "+e._s(e.$fomatLength(e.orderDetails.umLength))+"\n                ")])],2)],1),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"单箱高度",size:"small"},on:{blur:function(a){return e.onlyNumber(t.height,t,"height")}},model:{value:t.height,callback:function(a){e.$set(t,"height",a)},expression:"batch.height"}},[a("template",{slot:"append"},[e._v("\n                  "+e._s(e.$fomatLength(e.orderDetails.umLength))+"\n                ")])],2)],1)]:[a("el-col",{attrs:{span:3}},[e._v("\n               \n            ")]),a("el-col",{attrs:{span:3}},[e._v("\n               \n            ")]),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"总箱数",size:"small"},on:{blur:function(a){return e.onlyNumber(t.packages,t,"packages")}},model:{value:t.packages,callback:function(a){e.$set(t,"packages",a)},expression:"batch.packages"}},[a("template",{slot:"append"},[e._v("\n                  纸箱\n                ")])],2)],1),a("el-col",{attrs:{span:3}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:"",loading:e.selectLoading},on:{change:e.containerChange},model:{value:e.container.id,callback:function(t){e.$set(e.container,"id",t)},expression:"container.id"}},e._l(e.containerList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-col",{attrs:{span:3}},[a("el-input",{staticStyle:{"padding-right":"10px"},attrs:{placeholder:"单箱重量",size:"small"},on:{blur:function(a){return e.onlyNumber(t.weight,t,"weight")}},model:{value:t.weight,callback:function(a){e.$set(t,"weight",a)},expression:"batch.weight"}},[a("template",{slot:"append"},[e._v("\n                  "+e._s(e.$fomatWeight(e.orderDetails.umWeight))+"\n                ")])],2)],1)]],2),a("div",{staticClass:"batch-good"},[a("el-table",{attrs:{data:t.agoods,border:""}},[a("el-table-column",{attrs:{label:"商品名称",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"中文名称",size:"small"},model:{value:t.row.goodsName,callback:function(a){e.$set(t.row,"goodsName",a)},expression:"scope.row.goodsName"}}),a("el-input",{attrs:{placeholder:"英文名称",size:"small"},model:{value:t.row.goodsAlias,callback:function(a){e.$set(t.row,"goodsAlias",a)},expression:"scope.row.goodsAlias"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"海关编码/SKU",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"海关编码",disabled:"",size:"small"},model:{value:t.row.hsCode,callback:function(a){e.$set(t.row,"hsCode",a)},expression:"scope.row.hsCode"}}),a("el-input",{attrs:{placeholder:"SKU",size:"small"},model:{value:t.row.sku,callback:function(a){e.$set(t.row,"sku",a)},expression:"scope.row.sku"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"品牌/型号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"品牌",size:"small"},model:{value:t.row.brand,callback:function(a){e.$set(t.row,"brand",a)},expression:"scope.row.brand"}}),a("el-input",{attrs:{placeholder:"型号",size:"small"},model:{value:t.row.model,callback:function(a){e.$set(t.row,"model",a)},expression:"scope.row.model"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"材质",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"中文材质",size:"small"},model:{value:t.row.materialZh,callback:function(a){e.$set(t.row,"materialZh",a)},expression:"scope.row.materialZh"}}),a("el-input",{attrs:{placeholder:"英文材质",size:"small"},model:{value:t.row.materialEn,callback:function(a){e.$set(t.row,"materialEn",a)},expression:"scope.row.materialEn"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"用途",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"中文用途",size:"small"},model:{value:t.row.usageZh,callback:function(a){e.$set(t.row,"usageZh",a)},expression:"scope.row.usageZh"}}),a("el-input",{attrs:{placeholder:"英文用途",size:"small"},model:{value:t.row.usageEn,callback:function(a){e.$set(t.row,"usageEn",a)},expression:"scope.row.usageEn"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"单箱数量/单价",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"数量",size:"small"},on:{blur:function(a){return e.onlyNumber(t.row.quantity,t.row,"quantity")}},model:{value:t.row.quantity,callback:function(a){e.$set(t.row,"quantity",a)},expression:"scope.row.quantity"}},[a("el-select",{staticStyle:{width:"90px"},attrs:{slot:"append",filterable:"",placeholder:"请选择"},on:{change:function(a){return e.rowUnitChange(t.row)}},slot:"append",model:{value:t.row.unitId,callback:function(a){e.$set(t.row,"unitId",a)},expression:"scope.row.unitId"}},e._l(e.unitList,function(e){return a("el-option",{key:e.id,attrs:{label:e.unit,value:e.id}})}),1)],1),a("el-input",{attrs:{placeholder:"单价",size:"small"},on:{blur:function(a){return e.onlyNumber(t.row.price,t.row,"price")}},model:{value:t.row.price,callback:function(a){e.$set(t.row,"price",a)},expression:"scope.row.price"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"税率/税金",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{disabled:"",placeholder:"税率",size:"small"},model:{value:t.row.taxRate,callback:function(a){e.$set(t.row,"taxRate",a)},expression:"scope.row.taxRate"}}),a("el-input",{attrs:{disabled:"",placeholder:"税金",size:"small"},model:{value:t.row.tax,callback:function(a){e.$set(t.row,"tax",a)},expression:"scope.row.tax"}})]}}],null,!0)}),a("el-table-column",{attrs:{label:"商品图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"img-list"},[t.row.picture?a("div",{staticClass:"preview-img-wrap"},[a("div",{staticClass:"preview-img"},[a("img",{attrs:{src:t.row.file}}),a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-view mask-view-icon",on:{click:function(a){return e.handlePreview(t.row.file)}}}),a("i",{staticClass:"el-icon-delete mask-del-icon",on:{click:function(a){return e.handleDelete(t.row.picture,t.row)}}})])])]):a("div",{staticClass:"img-item-upload"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeAvatarUpload,"http-request":function(a){return e.uploadFile(a,t.row)}}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)])]}}],null,!0)}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(s){return[a("p",{staticStyle:{margin:"0"}},[a("el-button",{staticStyle:{color:"rgb(230, 48, 34)"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.deleteGoods(t,s.$index)}}},[e._v("\n                    删除\n                  ")])],1)]}}],null,!0)})],1)],1)],1)}),0),a("el-dialog",{attrs:{title:"产品库",visible:e.visible},on:{"update:visible":function(t){e.visible=t}}}),a("el-dialog",{attrs:{title:"商品图片预览",visible:e.dialogVisible,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.imageUrl}})])],1)])},j=[],$=a("75fc"),N=(a("6b54"),a("5c49")),z=a("dd13");function D(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?D(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):D(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var W=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.imageUrl="",e.dialogVisible=!1,e.visible=!1,e.dialogLoading=!1,e.selectLoading=!1,e.loading=!1,e.batches=[],e.unitList=[],e.containerList=[],e.declareList=[],e.orderDetails={},e.container={},e.lscConfig={},e.pagination={page:1,size:10,total:0},e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"getUserDeclare",value:function(){var e=this,t=this.orderDetails.buyer||{},a=this.orderDetails.consignee||{},s={model:{countryId:a.countryCode,customerId:t.id},page:this.pagination.page,size:this.pagination.size};this.dialogLoading=!0,Object(v["db"])(s).then(function(t){e.dialogLoading=!1;var a=t.data||{};e.declareList=a.result||[],e.pagination.total=a.total||0}).catch(function(t){return e.dialogLoading=!1,e.declareList=[],e.pagination.total=0,t})}},{key:"getContainerList",value:function(){var e=this,t={page:1,size:999};this.containerList.length||(this.selectLoading=!0,Object(z["b"])(t).then(function(t){if(e.selectLoading=!1,t.success){var a=t.data||{};e.containerList=a.result||[]}}).catch(function(t){return e.selectLoading=!1,t}))}},{key:"containerChange",value:function(e){if(this.container={id:"",name:"",weight:""},e){var t=this.containerList.find(function(t){return t.id===e});t&&(this.container={id:e,name:t.name,weight:t.loadLimit})}}},{key:"onlyNumber",value:function(e,t,a){e&&("NaN"===parseFloat(e).toString()?t[a]="":t[a]=parseFloat(e))}},{key:"beforeAvatarUpload",value:function(e){var t=-1!==e.type.indexOf("image"),a=e.size/1024/1024<2;return t||this.$message.error("上传照片只能是图片格式!"),a||this.$message.error("上传照片大小不能超过 2MB!"),t&&a}},{key:"uploadFile",value:function(e,t){var a=this,s=new FormData,i=new File([e.file],e.file.name.split(".")[0]+(new Date).getTime()+"."+e.file.name.split(".")[1],{type:e.file.type});s.append("file",i),this.loading=!0,Object(N["s"])(s).then(function(e){a.loading=!1;var s=e.data||{};t.picture=s.objectName,t.file="https://file.jhtinfo.net/"+s.objectName}).catch(function(){t.picture="",t.file="",a.loading=!1})}},{key:"handleDelete",value:function(e,t){var a=this,s={ifPublic:!0,fileList:[e]};this.loading=!0,Object(N["f"])(s).then(function(){a.loading=!1,t.picture="",t.file=""}).catch(function(){a.loading=!1})}},{key:"show",value:function(e){this.getDetail(e.id),this.getUnitList(),this.getContainerList()}},{key:"init",value:function(){var e=this;0===this.batches.length&&(this.batches=[this.getBatchInfo()]),this.batches=this.batches.map(function(t,a){return t.orderCode=e.orderDetails.code,t.id=e.orderDetails.code+"-"+(a+1),t.agoods.length&&t.agoods.forEach(function(a,s){a.orderCode=e.orderDetails.code,a.batchId=t.id}),t.boxes.length&&t.boxes.forEach(function(t,a){t.orderCode=e.orderDetails.code}),t})}},{key:"addBatchGood",value:function(e){e.agoods.push(this.getGoodsInfo()),this.init()}},{key:"addBeatch",value:function(){this.batches=[].concat(Object($["a"])(this.batches),[this.getBatchInfo()]),this.init()}},{key:"deleteGoods",value:function(e,t){1!==e.agoods.length?(e.agoods=e.agoods.filter(function(e,a){return a!==t}),this.init()):this.$message.warning("批次商品信息不能为空")}},{key:"copyBatch",value:function(e){var t=JSON.parse(JSON.stringify(e));t.boxes=[],t.isEdit&&delete t.isEdit,e.tag="1",e.boxTag="1",t.agoods.forEach(function(e){e.ifProductLibrary||(e.file="",e.picture="",e.isEdit&&(delete e.isEdit,e.tag="1"))}),this.batches=[].concat(Object($["a"])(this.batches),[t]),this.init()}},{key:"deleteBath",value:function(e){1!==this.batches.length?(this.batches=this.batches.filter(function(t,a){return a!==e}),this.init()):this.$message.warning("批次信息不能为空")}},{key:"getBatchInfo",value:function(){return{id:"",agoods:[this.getGoodsInfo()],boxTag:"1",boxes:[],fbaNo:"",height:"",length:"",orderCode:this.orderDetails.code,packages:"",reservation:"",tag:"1",value:"",volumes:"",weight:"",weights:"",width:""}}},{key:"getGoodsInfo",value:function(){return{batchId:"",brand:"",goodsAlias:"",goodsName:"",productId:"",createTime:"",categoryName:"",unitId:"",unitName:"",hsCode:"",materialEn:"",materialZh:"",model:"",orderCode:this.orderDetails.code,picture:"",file:"",ifProductLibrary:!1,url:"",price:"",quantity:"",sku:"",tag:"1",tax:"",taxRate:"",usageEn:"",usageZh:""}}},{key:"getDetail",value:function(e){var t=this;this.loading=!0,Object(v["O"])({id:e}).then(function(e){var a=e.data||{},s=(a.boxes,a.batchSummaries,a.batches,a.lsc),i=(a.buyer,a.currency),n=(a.country,a.container),o=(a.delivery,a.supplement),l=(a.warehouse,a.um),c=a.fbastore,d=a.lscConfig,u=Object(r["a"])(a,["boxes","batchSummaries","batches","lsc","buyer","currency","country","container","delivery","supplement","warehouse","um","fbastore","lscConfig"]);t.container=n,t.lscConfig=d,t.orderDetails=M({},u,{},o,{},l,{currencyId:i.key,countryName:i.value,fbastoreCode:c.code||"",fbastoreId:c.id||"",lscId:s.key}),t.loading=!1,t.init()}).catch(function(e){return t.loading=!1,t.$emit("back"),e})}},{key:"getUnitList",value:function(){var e=this;Object(v["cb"])().then(function(t){t.success&&(e.unitList=t.data||[])}).catch(function(t){return e.unitList=[],t})}},{key:"downFile",value:function(){var e=this.orderDetails.goodsFile||"";e?window.open("https://file.jhtinfo.net/"+e):this.$message.error("暂无文件可下载")}},{key:"handlePreview",value:function(e){this.imageUrl=e,this.dialogVisible=!0}},{key:"openLink",value:function(e){e&&window.open(e)}},{key:"rowUnitChange",value:function(e){e.unitName=(this.unitList.find(function(t){return t.id===e.unitId})||{}).unit}},{key:"prefixInteger",value:function(e,t){return(Array(t).join("0")+e).slice(-t)}},{key:"generateBoxNo",value:function(){var e=this,t=this.orderDetails.code,a=1;this.batches.forEach(function(s,i){if(s.examineNum=s.examineNum||0,s.boxes=[],0===s.boxes.length){for(var n=a;n<Number(s.packages)+a;n++){var r=25-Number(t.length),o=e.prefixInteger(n,r);s.boxes.push({code:t+o,batchId:s.id,orderCode:t})}a+=Number(s.packages)}}),this.batches=this.handleInspection(this.batches)}},{key:"handleInspection",value:function(e){return this.orderDetails.examine?"0"===this.orderDetails.examineType?this.examineByGoods(e):"2"===this.orderDetails.examineType?this.examineByRatio(e):e:e}},{key:"examineByRatio",value:function(e){if(this.orderDetails.examineRatio&&parseInt(this.orderDetails.examineRatio,0)>=0&&e&&Array.isArray(e)){var t=e.reduce(function(e,t){return[].concat(Object($["a"])(e),Object($["a"])(t.boxes||[]))},[]).length,a=Math.ceil(t*parseInt(this.orderDetails.examineRatio,0)/100),s=a;return e.map(function(e){if(s>0){var i=e.packages,n=i/t,r=Math.ceil(a*n);e.examineNum=r>s?s:r,s-=r}else e.examineNum=0;return e})}return e}},{key:"examineByGoods",value:function(e){return e&&Array.isArray(e)?e.map(function(e){return e.examineNum=1,e}):e}},{key:"generateBoxExamine",value:function(e){return e.map(function(e){e.boxes=e.boxes.map(function(e){return e.examine=!1,e});var t=e.boxes.length,a=e.examineNum;if(t===a)e.boxes=e.boxes.map(function(e){return e.examine=!0,e});else while(a){var s=Math.floor(Math.random()*t);e.boxes[s].examine||(e.boxes[s].examine=!0,a--)}return e})}},{key:"validationData",value:function(){for(var e=this,t=!0,a=/[\u4E00-\u9FA5]/g,s=function(s){var i=e.batches[s],n=i.agoods||[];if("0"!==e.orderDetails.deliveryWay){if(!i.reservation)return e.$message.warning("批次".concat(s+1,"预约号不能为空")),t=!1,"break";if(a.test(i.reservation))return e.$message.warning("批次".concat(s+1,"预约号格式不正确")),t=!1,"break";if(e.batches.filter(function(e){return e.reservation===i.reservation}).length>1)return e.$message.warning("批次".concat(s+1,"预约号重复")),t=!1,"break";if(!i.fbaNo)return e.$message.warning("批次".concat(s+1,"FBA编号不能为空")),t=!1,"break";if(a.test(i.fbaNo))return e.$message.warning("批次".concat(s+1,"FBA编号格式不正确")),t=!1,"break";if(e.batches.filter(function(e){return e.fbaNo===i.fbaNo}).length>1)return e.$message.warning("批次".concat(s+1,"FBA编号重复")),t=!1,"break"}if(!i.packages)return e.$message.warning("批次".concat(s+1,"总箱数不能为空")),t=!1,"break";if("0"===e.container.type){if(!i.length)return e.$message.warning("批次".concat(s+1,"单箱长度不能为空")),t=!1,"break";if(!i.width)return e.$message.warning("批次".concat(s+1,"单箱宽度不能为空")),t=!1,"break";if(!i.height)return e.$message.warning("批次".concat(s+1,"单箱高度不能为空")),t=!1,"break"}else if(!e.container.id)return e.$message.warning("批次".concat(s+1,"柜型不能为空")),t=!1,"break";if(!i.weight)return e.$message.warning("批次".concat(s+1,"单箱重量不能为空")),t=!1,"break";for(var r=!0,o=0;o<n.length;o++){var l=i.agoods[o];if(e.orderDetails.examine&&!l.file){e.$message.warning("批次".concat(s+1,"商品图片不能为空")),r=!1;break}if(l.ifProductLibrary){if(!l.quantity){e.$message.warning("批次".concat(s+1,"商品数量不能为空")),r=!1;break}r=!0}else{if(!l.goodsName){e.$message.warning("批次".concat(s+1,"商品中文名称不能为空")),r=!1;break}if(!l.goodsAlias){e.$message.warning("批次".concat(s+1,"商品英文名称不能为空")),r=!1;break}if(a.test(l.goodsAlias)){e.$message.warning("批次".concat(s+1,"商品英文名称格式不正确")),t=!1;break}if(!l.brand){e.$message.warning("批次".concat(s+1,"商品品牌不能为空")),r=!1;break}if(!l.model){e.$message.warning("批次".concat(s+1,"商品型号不能为空")),r=!1;break}if(!l.materialZh){e.$message.warning("批次".concat(s+1,"商品中文材质不能为空")),r=!1;break}if(!l.materialEn){e.$message.warning("批次".concat(s+1,"商品英文材质不能为空")),r=!1;break}if(a.test(l.materialEn)){e.$message.warning("批次".concat(s+1,"商品英文材质格式不正确")),t=!1;break}if(!l.usageZh){e.$message.warning("批次".concat(s+1,"商品中文用途不能为空")),r=!1;break}if(!l.usageEn){e.$message.warning("批次".concat(s+1,"商品英文用途不能为空")),r=!1;break}if(a.test(l.usageEn)){e.$message.warning("批次".concat(s+1,"商品英文用途格式不正确")),t=!1;break}if(!l.quantity){e.$message.warning("批次".concat(s+1,"商品数量不能为空")),r=!1;break}if(!l.unitId){e.$message.warning("批次".concat(s+1,"商品单位不能为空")),r=!1;break}if(!l.price){e.$message.warning("批次".concat(s+1,"商品单价不能为空")),r=!1;break}}}return r?void 0:(t=!1,"break")},i=0;i<this.batches.length;i++){var n=s(i);if("break"===n)break}return t}},{key:"getPrice",value:function(){var e=this;return new Promise(function(t,a){var s=e.orderDetails.consignee||{},i={chargeBatch:{batches:e.batches.map(function(e){return{length:e.length,width:e.width,height:e.height,packages:e.packages,weight:e.weight}}),umLength:e.orderDetails.umLength||"",umWeight:e.orderDetails.umWeight||""},containerId:e.container.id,containerName:e.container.name,containerType:e.container.type,cityId:s.cityCode,countryId:s.countryCode,fbaId:e.orderDetails.fbastoreId,lscId:e.orderDetails.lscId,priceId:e.orderDetails.price.priceId,stateId:s.provinceCode};Object(v["W"])(i).then(function(e){var a=e.data||{};t(a)}).catch(function(e){a(e)})})}},{key:"saveSalesmanOrder",value:function(){var e=this;if(this.validationData()){this.generateBoxNo(),this.batches=this.generateBoxExamine(this.batches);var t=this.batches.map(function(e){var t=JSON.parse(JSON.stringify(e));return delete t.examineNum,t.goods=t.agoods.map(function(e){return e.ifProductLibrary&&(e.audit="1"),delete e.file,delete e.ifProductLibrary,delete e.url,e}),t.code=t.id,delete t.id,delete t.agoods,delete t.boxTag,t})||[];this.loading=!0,this.getPrice().then(function(a){var s={id:e.orderDetails.id,packages:e.totalPackages,volumes:e.totalVolumes,weights:e.totalWeights,value:e.totalValue,batchSummaries:t.map(function(e){var t=e.goods.reduce(function(e,t){return e+=t.price*t.quantity,e=parseFloat(e.toFixed(3)),e},0),a=e.height*e.width*e.length;return{code:e.code,packages:e.packages,value:t*e.packages,volumes:parseFloat(a.toFixed(3)),weights:e.weight*e.packages}}),batches:t.map(function(e){var t=JSON.parse(JSON.stringify(e));return delete t.boxes,t}),boxes:t.reduce(function(e,t){return t.boxes.forEach(function(t){"3"!==t.tag&&e.push({batchCode:t.batchId,code:t.code,examine:t.examine,orderIds:[]})}),e},[]),price:a};Object(v["lb"])(s).then(function(t){e.loading=!1,t.success?(e.$message.success("订单录入成功"),e.$emit("back"),e.$emit("load")):e.$message.error("订单录入失败")}).catch(function(t){return e.loading=!1,e.$message.error("订单录入失败"),t})}).catch(function(t){return e.loading=!1,e.$message.error("订单录入失败"),t})}}},{key:"totalPackages",get:function(){return this.batches.reduce(function(e,t){return e+=t.packages,e},0)}},{key:"totalVolumes",get:function(){return this.batches.reduce(function(e,t){return t.packages&&t.length&&t.width&&t.height&&(e+=t.packages*t.length*t.width*t.height),e},0)}},{key:"totalWeights",get:function(){return this.batches.reduce(function(e,t){return t.packages&&t.weight&&(e+=t.packages*t.weight),e},0)}},{key:"totalValue",get:function(){return this.batches.reduce(function(e,t){return t.agoods.forEach(function(a){a.quantity&&a.price&&t.packages&&(e+=Number(a.quantity)*Number(a.price)*Number(t.packages))}),e},0)}}]),t}(h["e"]);W=m["a"]([Object(h["a"])({name:"salesman",components:{},props:{}})],W);var P=W,A=P,E=(a("c2c6"),Object(F["a"])(A,I,j,!1,null,"752cd429",null)),R=E.exports;function B(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function U(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?B(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):B(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var V=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.searchForm={salesmanStatus:void 0,status:void 0,audit:void 0,type:void 0,lscId:void 0,custId:void 0,code:void 0,countryId:void 0,fbastoreId:void 0,comId:void 0,agentId:void 0,comType:"",orderType:"0",orderTime:[]},e.selectLoading=!1,e.loading=!1,e.showPage="i",e.pickList=[{name:"自主送货",id:"0"},{name:"上门提货",id:"1"},{name:"快递发货",id:"2"},{name:"整柜直装",id:"3"}],e.companyList=[],e.statusList=[],e.countryList=[],e.warehouseList=[],e.privatelineList=[],e.tableData=[],e.selectType="1",e.typeList=[{name:"空运",id:"0"},{name:"海运",id:"1"},{name:"铁路",id:"2"},{name:"快递",id:"3"},{name:"卡航",id:"4"}],e.page=1,e.size=10,e.total=10,e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"viewData",value:function(e){this.showPage="d";var t=this.$refs.detailForm;t.setData(e)}},{key:"salesmanOrder",value:function(e){this.showPage="s";var t=this.$refs.salesman;t.show(e)}},{key:"getPrivatelineList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.searchForm.countryId,subtypeId:this.searchForm.type};Object(v["G"])(t).then(function(t){var a=t.data||[];e.privatelineList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.searchForm.countryId,codeSort:"A",page:1,size:9999};Object(v["D"])(t).then(function(t){var a=t.data||{};e.warehouseList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this,t={custId:this.custId||"",typeId:"05"};this.selectLoading=!0,Object(b["b"])(t).then(function(t){e.countryList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCompanyList",value:function(){var e=this,t={custIds:[this.custId]};this.selectLoading=!0,Object(v["t"])(t).then(function(t){var a=t.data||[];e.companyList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStatusList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(b["c"])().then(function(e){t.statusList=(e.data||[]).map(function(e){return{name:e.name,id:e.key,type:e.type}})}).catch(function(){t.statusList=[]});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getTableData",value:function(e){var t=this;this.loading=!0;var a=this.custType;"1"===a&&(this.searchForm.orderType="1");var s=this.searchForm,i=s.comId,n=s.agentId,o=(s.comType,s.orderType),l=s.custId,c=s.orderTime,d=Object(r["a"])(s,["comId","agentId","comType","orderType","custId","orderTime"]);e&&(this.page=e);var u=U({},d,{salesman:!0});Array.isArray(c)&&c.length>0&&(u.startDate=c[0],u.endDate=c[1]),"0"===o?(u.sellerId="0"===a?n:l,u.buyerId=i):"1"===o&&(u.buyerId=l);var p={page:this.page,size:this.size,model:u};Object(v["R"])(p).then(function(e){t.loading=!1;var a=e.data||{};t.tableData=a.result||[],t.total=a.total}).catch(function(e){return t.loading=!1,e})}},{key:"formmatAudit",value:function(e){return"0"===e.audit?"待审核":"1"===e.audit?"审核通过":"2"===e.audit?"审核拒绝":"3"===e.audit?"审核中":void 0}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.searchForm.custId=this.custId,this.searchForm.orderTime=[y()().subtract(30,"d").format("YYYY-MM-DD"),y()().format("YYYY-MM-DD")],this.loading=!0,e.next=5,this.getStatusList();case 5:this.getPrivatelineList(),this.getWarehouseList(),this.getTableData();case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"lineStatusList",get:function(){return this.statusList.filter(function(e){return"LINE"===e.type})}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}}]),t}(h["e"]);V=m["a"]([Object(h["a"])({name:"salesmanOrder",components:{detail:O,salesman:R},props:{}})],V);var Y=V,q=Y,G=(a("2295"),Object(F["a"])(q,s,i,!1,null,"6a8dbac2",null));t["default"]=G.exports},fc21:function(e,t,a){}}]);