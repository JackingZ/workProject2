(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["single-shipment"],{"066c":function(e,t,a){"use strict";var n=a("5080"),i=a.n(n);i.a},1:function(e,t){},"12fe":function(e,t,a){"use strict";a.d(t,"R",function(){return i}),a.d(t,"Q",function(){return r}),a.d(t,"P",function(){return s}),a.d(t,"O",function(){return o}),a.d(t,"db",function(){return l}),a.d(t,"b",function(){return c}),a.d(t,"o",function(){return u}),a.d(t,"q",function(){return d}),a.d(t,"L",function(){return p}),a.d(t,"p",function(){return h}),a.d(t,"I",function(){return m}),a.d(t,"u",function(){return f}),a.d(t,"v",function(){return v}),a.d(t,"X",function(){return g}),a.d(t,"W",function(){return y}),a.d(t,"M",function(){return b}),a.d(t,"s",function(){return x}),a.d(t,"t",function(){return w}),a.d(t,"l",function(){return _}),a.d(t,"n",function(){return C}),a.d(t,"V",function(){return k}),a.d(t,"m",function(){return S}),a.d(t,"U",function(){return F}),a.d(t,"T",function(){return L}),a.d(t,"S",function(){return O}),a.d(t,"r",function(){return T}),a.d(t,"f",function(){return I}),a.d(t,"k",function(){return j}),a.d(t,"h",function(){return D}),a.d(t,"d",function(){return M}),a.d(t,"F",function(){return N}),a.d(t,"x",function(){return $}),a.d(t,"y",function(){return P}),a.d(t,"H",function(){return W}),a.d(t,"w",function(){return V}),a.d(t,"E",function(){return z}),a.d(t,"Z",function(){return R}),a.d(t,"Y",function(){return E}),a.d(t,"i",function(){return B}),a.d(t,"g",function(){return A}),a.d(t,"j",function(){return G}),a.d(t,"e",function(){return K}),a.d(t,"c",function(){return U}),a.d(t,"z",function(){return Y}),a.d(t,"N",function(){return H}),a.d(t,"G",function(){return q}),a.d(t,"B",function(){return J}),a.d(t,"J",function(){return Q}),a.d(t,"ab",function(){return X}),a.d(t,"cb",function(){return Z}),a.d(t,"A",function(){return ee}),a.d(t,"C",function(){return te}),a.d(t,"D",function(){return ae}),a.d(t,"bb",function(){return ne}),a.d(t,"a",function(){return ie}),a.d(t,"K",function(){return re});var n=a("b32d");function i(e){var t={url:"/orders/fill/query",method:"post",data:e};return Object(n["a"])(t)}function r(e){var t={url:"/orders/fill/getFillSheetLines",method:"post",data:e};return Object(n["a"])(t)}function s(e){var t={url:"/orders/fill/getFillSheet",method:"get",params:e};return Object(n["a"])(t)}function o(e){var t={url:"/orders/fill/getFullOrderByCode",method:"get",params:e};return Object(n["a"])(t)}function l(e){var t={url:"/orders/fill/saveFillSheet",method:"post",data:e};return Object(n["a"])(t)}function c(e){var t={url:"/orders/fill/editFillSheet",method:"post",data:e};return Object(n["a"])(t)}function u(e){var t={url:"/orders/fullorder/getOrders",method:"get",params:e};return Object(n["a"])(t)}function d(e){var t={url:"/auth/custtype/getcustlist",method:"post",data:e};return Object(n["a"])(t)}function p(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(n["a"])(e)}function h(e){var t={url:"/auth/custtype/getcountries",method:"get",params:e};return Object(n["a"])(t)}function m(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(n["a"])(t)}function f(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(n["a"])(t)}function v(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(n["a"])(t)}function g(){var e={url:"/wms/warehouse/selectlist",method:"get"};return Object(n["a"])(e)}function y(e){var t={url:"/wms/warehouse/getWarehouseList",method:"post",data:e};return Object(n["a"])(t)}function b(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(n["a"])(t)}function x(e){var t={url:"/setting/plan/plan_list",method:"post",data:e};return Object(n["a"])(t)}function w(e){var t={url:"/setting/plan/plan_list_view",method:"post",data:e};return Object(n["a"])(t)}function _(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(n["a"])(t)}function C(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(n["a"])(t)}function k(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(n["a"])(t)}function S(e){var t={url:"/cfg/bs/getBs",method:"get",params:e};return Object(n["a"])(t)}function F(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(n["a"])(t)}function L(){var e={url:"/orders/fullorder/status",method:"get"};return Object(n["a"])(e)}function O(e){var t={url:"/orders/booking/getSoByPlanId",method:"get",params:e};return Object(n["a"])(t)}function T(e){var t={url:"/auth/credit/getCustRatingList",method:"post",data:e};return Object(n["a"])(t)}function I(e){var t={url:"/orders/fill/exportOrderInfo",method:"get",responseType:"blob",params:e};return Object(n["a"])(t)}function j(e){var t={url:"/orders/fill/exportUnLoadingBox",method:"get",responseType:"blob",params:e};return Object(n["a"])(t)}function D(e){var t={url:"/wms/fill/fillExport",method:"get",responseType:"blob",params:e};return Object(n["a"])(t)}function M(e){var t={url:"/orders/fill/exportInsuranceList",method:"get",responseType:"blob",params:e};return Object(n["a"])(t)}function N(e){var t={url:"/orders/declare_order/create_out_declare",method:"get",params:e};return Object(n["a"])(t)}function $(e){var t={url:"/orders/declare_order/create_enter_declare",method:"get",params:e};return Object(n["a"])(t)}function P(e){var t={url:"/orders/trailer/create_trailer",method:"post",data:e};return Object(n["a"])(t)}function W(e){var t={url:"/orders/trailer/create_out_trailer",method:"post",data:e};return Object(n["a"])(t)}function V(e){var t={url:"/orders/card/create_Enter_car",method:"post",data:e};return Object(n["a"])(t)}function z(e){var t={url:"/orders/card/create_start_car",method:"post",data:e};return Object(n["a"])(t)}function R(e){var t={url:"/orders/pallet/savePalletLine",method:"post",data:e};return Object(n["a"])(t)}function E(e){var t={url:"wms/warehouse/country",method:"post",data:e};return Object(n["a"])(t)}function B(e){var t={url:"orders/fullorder/exportPackingStartList",method:"post",responseType:"blob",data:e};return Object(n["a"])(t)}function A(e){var t={url:"orders/fullorder/exportPackingEndList",method:"post",responseType:"blob",data:e};return Object(n["a"])(t)}function G(e){var t={url:"/orders/fill/exportTrackingNumber",method:"post",responseType:"blob",params:e};return Object(n["a"])(t)}function K(e){var t={url:"/orders/fill/exportOpenArk",method:"post",responseType:"blob",params:e};return Object(n["a"])(t)}function U(e){var t={url:"/orders/fill/exportArkExpress",method:"get",responseType:"blob",params:e};return Object(n["a"])(t)}function Y(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(n["a"])(t)}function H(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(n["a"])(t)}function q(e){var t={url:"/orders/outorder/create_order",method:"post",data:e};return Object(n["a"])(t)}function J(e){var t={url:"/orders/fill/query_by_task",method:"get",params:e};return Object(n["a"])(t)}function Q(e){var t={url:"/orders/fill/search_by_inter",method:"get",params:e};return Object(n["a"])(t)}function X(e){var t={url:"/orders/outorder/supplement_order",method:"post",data:e};return Object(n["a"])(t)}function Z(e){var t={url:"/orders/fill/updateContainerNo",method:"post",data:e};return Object(n["a"])(t)}function ee(e){var t={url:"/cfg/lsc/getLscGroupList",method:"post",data:e};return Object(n["a"])(t)}function te(e){var t={url:"orders/split_sheet/get_order_by_file",method:"get",params:e};return Object(n["a"])(t)}function ae(e){var t={url:"/orders/split_sheet/loading_4_warehouse",method:"get",params:e};return Object(n["a"])(t)}function ne(e){var t={url:"orders/split_sheet/check_order",method:"get",params:e};return Object(n["a"])(t)}function ie(e){var t={url:"/orders/split_sheet/edit_confirm",method:"get",params:e};return Object(n["a"])(t)}function re(e){var t={url:"/wms/packing/page_return_box",method:"post",data:e};return Object(n["a"])(t)}},"180f":function(e,t,a){"use strict";var n=a("c21f"),i=a.n(n);i.a},2:function(e,t){},2121:function(e,t,a){},2581:function(e,t,a){"use strict";var n=a("7dca"),i=a.n(n);i.a},3:function(e,t){},5080:function(e,t,a){},6097:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},["index"===e.showPageName?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.noticeLoading,expression:"noticeLoading"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"分单发货"},scopedSlots:e._u([{key:"option",fn:function(){return[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleViewBoard}},[e._v("\n            货量看板\n          ")])]},proxy:!0}],null,!1,736047627)}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryAdd"],expression:"['separateDeliveryAdd']"}],staticStyle:{margin:"0 10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addRow}},[e._v("\n              新增\n            ")]),a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommandInvoice}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n                导出\n                "),a("i",{staticClass:"el-icon-arrow-down"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"2"}},[e._v("\n                  目的港箱单发票\n                ")]),a("el-dropdown-item",{attrs:{command:"3"}},[e._v("\n                  起运港箱单发票\n                ")])],1)],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:21}},[a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"业务类型",filterable:""},on:{focus:e.getSubtypeList,change:e.onType},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"起运国",size:"small",filterable:"",clearable:""},on:{focus:e.getCountryList,change:e.onOriginCountry},model:{value:e.searchForm.originCountryId,callback:function(t){e.$set(e.searchForm,"originCountryId",t)},expression:"searchForm.originCountryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.searchForm.type||!e.searchForm.originCountryId,loading:e.selectLoading,placeholder:"起运港",size:"small",clearable:"",filterable:""},on:{focus:e.getStartPortData},model:{value:e.searchForm.originPortId,callback:function(t){e.$set(e.searchForm,"originPortId",t)},expression:"searchForm.originPortId"}},e._l(e.startPortList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"目的国",clearable:"",filterable:"",size:"small"},on:{focus:e.getCountryList,change:e.onTargetCountry},model:{value:e.searchForm.targetCountryId,callback:function(t){e.$set(e.searchForm,"targetCountryId",t)},expression:"searchForm.targetCountryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.searchForm.type||!e.searchForm.targetCountryId,loading:e.selectLoading,placeholder:"目的港",size:"small",clearable:"",filterable:""},on:{focus:e.getEndPortData},model:{value:e.searchForm.targetPortId,callback:function(t){e.$set(e.searchForm,"targetPortId",t)},expression:"searchForm.targetPortId"}},e._l(e.endPortList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{disabled:!e.searchForm.type||!e.searchForm.targetCountryId&&!e.searchForm.originCountryId,loading:e.selectLoading,size:"small",placeholder:"服务机构",clearable:"",filterable:""},on:{focus:e.getSeviceOrganList},model:{value:e.searchForm.orgId,callback:function(t){e.$set(e.searchForm,"orgId",t)},expression:"searchForm.orgId"}},e._l(e.organList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"下单起始时间","end-placeholder":"下单截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"240px","margin-right":"10px"},attrs:{placeholder:"请输入",size:"small",clearable:""},model:{value:e.searchForm.code,callback:function(t){e.$set(e.searchForm,"code",t)},expression:"searchForm.code"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.searchForm.codeType,callback:function(t){e.$set(e.searchForm,"codeType",t)},expression:"searchForm.codeType"}},[a("el-option",{attrs:{label:"原单号",value:"1"}}),a("el-option",{attrs:{label:"备注",value:"2"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"===e.searchForm.type||"2"===e.searchForm.type,expression:"searchForm.type === '1' || searchForm.type === '2'"}],attrs:{label:"SO号",value:"3"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"===e.searchForm.type||"2"===e.searchForm.type,expression:"searchForm.type === '1' || searchForm.type === '2'"}],attrs:{label:"柜号",value:"5"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"===e.searchForm.type,expression:"searchForm.type === '0'"}],attrs:{label:"提单号",value:"4"}})],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryQuery"],expression:"['separateDeliveryQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getShipTable(1)}}},[e._v("\n              查询\n            ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryQuery"],expression:"['separateDeliveryQuery']"}],attrs:{type:"text",size:"small"},on:{click:e.handleMoreSearch}},[e._v("\n              更多筛选\n            ")])],1)],1),a("el-table",{ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.noticeData,border:"",height:"calc(100vh - 300px)"}},[a("el-table-column",{attrs:{formatter:e.formatType,prop:"",label:"业务类型",width:"100"}}),a("el-table-column",{attrs:{formatter:e.formatTrans,prop:"",label:"服务类型",width:"100"}}),a("el-table-column",{attrs:{prop:"",label:"订舱服务",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.bsc||{}).name)+"\n            ")]}}],null,!1,667935777)}),a("el-table-column",{attrs:{prop:"",label:"数量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.containers||[]).length)+"\n            ")]}}],null,!1,1245465116)}),a("el-table-column",{attrs:{prop:"",label:"柜号/提单号",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?a("span",[e._v(e._s(t.row.billNo||"--"))]):"1"===t.row.type||"2"===t.row.type?a("span",[e._v("\n                "+e._s(((t.row.containers[0]||{}).containerInfo||{}).containerNo||"--")+"\n              ")]):a("span",[e._v("--")])]}}],null,!1,1840959098)}),a("el-table-column",{attrs:{label:"运输类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s("0"===t.row.type?"航空版":"")+"\n              "+e._s("1"===t.row.type?"柜型":"")+"\n              "+e._s("2"===t.row.type?"柜型":"")+"\n              "+e._s("3"===t.row.type?"车型":"")+"\n               \n              "+e._s((((t.row.containers||[])[0]||{}).containerInfo||{}).containerName)+"\n            ")]}}],null,!1,114141366)}),a("el-table-column",{attrs:{prop:"",label:"服务机构",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.org||{}).value)+"\n            ")]}}],null,!1,4039354117)}),a("el-table-column",{attrs:{prop:"",label:"起运港","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.originPort||{}).value)+"\n            ")]}}],null,!1,958286258)}),a("el-table-column",{attrs:{prop:"",label:"目的港","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.targetPort||{}).value)+"\n            ")]}}],null,!1,3016458967)}),a("el-table-column",{attrs:{prop:"",label:"起运国","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.originCountry||{}).value)+"\n            ")]}}],null,!1,2360745763)}),a("el-table-column",{attrs:{prop:"",label:"目的国","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.targetCountry||{}).value)+"\n            ")]}}],null,!1,3254511110)}),a("el-table-column",{attrs:{prop:"",label:"安排出库",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifWareHouseOut?"是":"否")+"\n            ")]}}],null,!1,825421241)}),a("el-table-column",{attrs:{prop:"",label:"装柜/车确认",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.cabinetConfirmClick(t.row)}}},[0===t.row.ifConfirm?a("span",[e._v("待装载")]):e._e(),1===t.row.ifConfirm?a("span",[e._v("待确认")]):e._e(),2===t.row.ifConfirm?a("span",[e._v("已确认")]):e._e()])]}}],null,!1,3693565320)}),a("el-table-column",{attrs:{prop:"",label:"起运港报关",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifOutDeclare?"是":"否")+"\n            ")]}}],null,!1,1302140484)}),a("el-table-column",{attrs:{prop:"",label:"目的港报关",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifEnterDeclare?"是":"否")+"\n            ")]}}],null,!1,2620470466)}),"1"===e.searchForm.type||"2"===e.searchForm.type?a("el-table-column",{attrs:{prop:"",label:"起运港拖车",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifOutTrailer?"是":"否")+"\n            ")]}}],null,!1,3550454505)}):e._e(),"1"===e.searchForm.type||"2"===e.searchForm.type?a("el-table-column",{attrs:{prop:"",label:"目的港拖车",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifEnterTrailer?"是":"否")+"\n            ")]}}],null,!1,2809241199)}):e._e(),"0"===e.searchForm.type?a("el-table-column",{attrs:{prop:"",label:"起运港卡车",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifOutCar?"是":"否")+"\n            ")]}}],null,!1,2267163340)}):e._e(),"0"===e.searchForm.type?a("el-table-column",{attrs:{prop:"",label:"目的港卡车",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifEnterCar?"是":"否")+"\n            ")]}}],null,!1,2058783050)}):e._e(),"1"===e.searchForm.type||"2"===e.searchForm.type?a("el-table-column",{attrs:{prop:"",label:"拆柜打托",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.openTank?"是":"否")+"\n            ")]}}],null,!1,2051816281)}):e._e(),a("el-table-column",{attrs:{formatter:e.dispatchFormat,prop:"",label:"派送方式",width:"120"}}),a("el-table-column",{attrs:{prop:"shippingDate",label:"起运日期",width:"160"}}),a("el-table-column",{attrs:{prop:"cutoffDate",label:"截单日期",width:"160"}}),a("el-table-column",{attrs:{prop:"transitTime",label:"运输时间",width:"100"}}),a("el-table-column",{attrs:{prop:"",label:"目的仓代码","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.fbastore||{}).value)+"\n            ")]}}],null,!1,1890360101)}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryView"],expression:"['separateDeliveryView']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.viewRow(t.row)}}},[e._v("\n                查看\n              ")]),e.$checkPermission(["separateDeliveryUpdate"])&&1!==t.row.ifLoadingComplete?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("\n                编辑\n              ")]):e._e(),e.$checkPermission(["separateDeliveryOrderDetail","separateDeliveryPortToOrderInvoice","separateDeliveryPortFromOrderInvoice","separateDeliveryInsurance"])?a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommandExport}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(a){return e.handleExport(t.row)}}},[e._v("\n                  导出\n                  "),a("i",{staticClass:"el-icon-arrow-down"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryOrderDetail"],expression:"['separateDeliveryOrderDetail']"}],attrs:{command:"1"}},[e._v("\n                    订单明细\n                  ")]),a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryPortToInvoice"],expression:"['separateDeliveryPortToInvoice']"}],attrs:{command:"2"}},[e._v("\n                    目的港箱单发票(柜号)\n                  ")]),a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryPFInvoice"],expression:"['separateDeliveryPFInvoice']"}],attrs:{command:"3"}},[e._v("\n                    起运港箱单发票(柜号)\n                  ")]),a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryPortToInvoice"],expression:"['separateDeliveryPortToInvoice']"}],attrs:{command:"4"}},[e._v("\n                    目的港箱单发票(箱号)\n                  ")]),a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryPFInvoice"],expression:"['separateDeliveryPFInvoice']"}],attrs:{command:"5"}},[e._v("\n                    起运港箱单发票(箱号)\n                  ")]),a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["separateDeliveryInsurance"],expression:"['separateDeliveryInsurance']"}],attrs:{command:"6"}},[e._v("\n                    保险单\n                  ")]),a("el-dropdown-item",{attrs:{command:"7"}},[e._v("\n                    快递单\n                  ")]),a("el-dropdown-item",{attrs:{command:"8"}},[e._v("\n                    拆柜清单标准版\n                  ")]),a("el-dropdown-item",{attrs:{command:"9"}},[e._v("\n                    拆柜清单ROY版\n                  ")])],1)],1):e._e(),e.$checkPermission(["separateDeliveryOutWarehouse","separateDeliveryReplenishWarehouse","separateDeliveryPFCustoms","separateDeliveryPTCustoms","separateDeliveryPFTrailer","separateDeliveryPTTrailer","separateDeliveryPortFromCar","separateDeliveryPortToCar","separateDeliveryStripping"])?a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommandCustoms}},[a("span",{staticClass:"el-dropdown-link",on:{click:function(a){return e.handleCustoms(t.row)}}},[e._v("\n                  更多\n                  "),a("i",{staticClass:"el-icon-arrow-down"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e.$checkPermission(["separateDeliveryOutWarehouse"])&&1!==t.row.ifWareHouseOut?a("el-dropdown-item",{attrs:{command:"0"}},[e._v("\n                    安排出库\n                  ")]):e._e(),e.$checkPermission(["separateDeliveryReplenishWarehouse"])&&1===t.row.ifWareHouseOut?a("el-dropdown-item",{attrs:{command:"8"}},[e._v("\n                    补单出库\n                  ")]):e._e(),e.$checkPermission(["separateDeliveryPFCustoms"])&&1!==t.row.ifOutDeclare?a("el-dropdown-item",{attrs:{command:"1"}},[e._v("\n                    起运港报关\n                  ")]):e._e(),e.$checkPermission(["separateDeliveryPTCustoms"])&&1!==t.row.ifEnterDeclare?a("el-dropdown-item",{attrs:{command:"2"}},[e._v("\n                    目的港报关\n                  ")]):e._e(),!e.$checkPermission(["separateDeliveryPFTrailer"])||"1"!==t.row.type&&"2"!==t.row.type||1===t.row.ifOutTrailer?e._e():a("el-dropdown-item",{attrs:{command:"3"}},[e._v("\n                    起运港拖车\n                  ")]),!e.$checkPermission(["separateDeliveryPTTrailer"])||"1"!==t.row.type&&"2"!==t.row.type||1===t.row.ifEnterTrailer?e._e():a("el-dropdown-item",{attrs:{command:"4"}},[e._v("\n                    目的港拖车\n                  ")]),e.$checkPermission(["separateDeliveryPortFromCar"])&&"0"===t.row.type&&1!==t.row.ifOutCar?a("el-dropdown-item",{attrs:{command:"5"}},[e._v("\n                    起运港卡车\n                  ")]):e._e(),e.$checkPermission(["separateDeliveryPortToCar"])&&"0"===t.row.type&&1!==t.row.ifEnterCar?a("el-dropdown-item",{attrs:{command:"6"}},[e._v("\n                    目的港卡车\n                  ")]):e._e(),!e.$checkPermission(["separateDeliveryStripping"])||"1"!==t.row.type&&"2"!==t.row.type||1===t.row.openTank?e._e():a("el-dropdown-item",{attrs:{command:"7"}},[e._v("\n                    拆柜打托\n                  ")])],1)],1):e._e()]}}],null,!1,1915101956)})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1):e._e(),"form"===e.showPageName?a("step-data",{ref:"stepData",attrs:{"single-id":e.singleId,"is-str":e.isEditViewAdd},on:{back:e.handleBack}}):e._e(),a("drawer",{attrs:{"is-show":e.moreShow,"mask-closable":!1,"drawer-title":"更多筛选","drawer-style":"width: 400px;","cancel-text":"重置","confirm-text":"查询"},on:{drawerClose:e.handleMoreCancle,drawerConfirm:e.handleMoreConfirm}},[a("searchMore",{ref:"searchMore"})],1),"confirm"===e.showPageName?a("cabinet-confirm",{ref:"cabinetConfirm",on:{back:e.handleBack}}):e._e()],1),a("el-dialog",{attrs:{title:"指定供应商",width:"600px","close-on-click-modal":!1,visible:e.isSupperierVisible},on:{"update:visible":function(t){e.isSupperierVisible=t},close:e.cancelSupperier}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-form",{ref:"supperierForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.supperierForm,rules:e.rules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"供应商",prop:"supplyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",size:"small",filterable:"",clearable:""},on:{focus:e.getCustList,change:function(t){e.supperierForm.warehouseId=void 0}},model:{value:e.supperierForm.supplyId,callback:function(t){e.$set(e.supperierForm,"supplyId",t)},expression:"supperierForm.supplyId"}},e._l(e.supplierList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e.commandVal&&"1"!==e.commandVal&&"2"!==e.commandVal?a("el-form-item",{attrs:{label:"仓库",prop:"warehouseId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.supperierForm.supplyId,loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"仓库"},on:{focus:e.getWarehouseList},model:{value:e.supperierForm.warehouseId,callback:function(t){e.$set(e.supperierForm,"warehouseId",t)},expression:"supperierForm.warehouseId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.warehouseId,attrs:{label:e.name,value:e.warehouseId}})}),1)],1):e._e(),"7"===e.commandVal?a("el-form-item",{attrs:{label:"入库时间",prop:"warehouseTime"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,type:"date","value-format":"yyyy-MM-dd",format:"yyyy-MM-dd",size:"small"},model:{value:e.supperierForm.warehouseTime,callback:function(t){e.$set(e.supperierForm,"warehouseTime",t)},expression:"supperierForm.warehouseTime"}})],1):e._e()],1),a("div",{staticStyle:{"text-align":"right","padding-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelSupperier}},[e._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSupperier}},[e._v("\n          确 定\n        ")])],1)],1)]),a("el-dialog",{staticClass:"tip-dialog",attrs:{title:"提示",visible:e.dialogVisible,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},close:e.cancelCode}},[a("span",[e._v("请将原单号放在excel表第一列导入")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelCode}},[e._v("\n        取消\n      ")]),a("el-upload",{staticStyle:{display:"inline-block","margin-left":"10px"},attrs:{action:"",multiple:!1,limit:1,"show-file-list":!1,accept:".xlsx,.xls","http-request":e.uploadFile,"file-list":e.fileList}},[a("el-button",{attrs:{loading:e.fileLoading,size:"small",type:"primary"}},[e._v("\n          导入\n        ")])],1)],1)]),a("el-dialog",{staticClass:"tip-dialog",attrs:{title:"提示",visible:e.dialogOut,width:"400px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogOut=t},close:function(t){e.dialogOut=!1,e.wareName=""}}},[a("h3",{staticStyle:{margin:"0 0 5px"}},[e._v("\n      装货仓库："+e._s(e.wareName)+"\n    ")]),a("div",[e._v("请问是否确认安排出库，此操作会给仓库下出库申请单?")]),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogOut=!1,e.wareName=""}}},[e._v("\n        取消\n      ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveOut}},[e._v("\n        确定\n      ")])],1)]),a("el-dialog",{attrs:{title:"调拨/出库申请单",width:"1200px","close-on-click-modal":!1,visible:e.dialogReplenish},on:{"update:visible":function(t){e.dialogReplenish=t},close:e.cancelReplenish}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-table",{ref:"tables",staticStyle:{width:"100%"},attrs:{data:e.replenishData,border:"","row-key":"id",height:"400px"},on:{select:e.handleSelected,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{fixed:"left",type:"selection",width:"55",selectable:e.handleSelectable}}),a("el-table-column",{attrs:{label:"原单号",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-info"},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.row.code,expression:"scope.row.code"}],staticClass:"copy-icon"}),a("span",[e._v("\n                "+e._s(t.row.code)+"\n              ")])]),a("div",[t.row.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                特批发货\n              ")]):e._e(),t.row.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                冻结\n              ")]):e._e(),t.row.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                锁舱\n              ")]):e._e(),"1"!==t.row.payMethod&&e.formatPay(t.row)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                "+e._s(t.row.ifPayment?"逾期已付款":"逾期未付款")+"\n              ")]):e._e(),"1"===t.row.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                "+e._s(t.row.ifPayment?"已付款":"未付款")+"\n              ")]):e._e(),t.row.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                信用不足\n              ")]):e._e()])]}}])}),a("el-table-column",{attrs:{label:"目的城市",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((t.row.consignee||{}).city||"--")+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"服务",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((t.row.lsc||{}).value||"--")+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"下单仓库",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((t.row.warehouse||{}).name||"--")+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"货物所在仓",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((t.row.warehouse1||{}).name||"--")+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"总体积","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.maxVolWeiFormat(t.row,"vol","CBM"))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"总重量","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.maxVolWeiFormat(t.row,"wei","KGS"))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"最大重量","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.maxVolWeiFormat(t.row,"maxWei","KGS"))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"最大体积","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(e.maxVolWeiFormat(t.row,"maxVol","CBM"))+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"件数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.packages)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"计量状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((e.statusList.find(function(e){return e.id===t.row.status["MEASURE"]})||{name:"--"}).name)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"验货状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((e.statusList.find(function(e){return e.id===t.row.status["EXAMINE"]})||{name:"--"}).name)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"报关状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s((e.statusList.find(function(e){return e.id===t.row.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n          ")]}}])}),a("el-table-column",{attrs:{label:"快递单号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.express&&t.row.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[a("div",e._l(t.row.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                  "+e._s(t)+"\n                ")])}),0),a("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("\n                已出\n              ")])],1):a("div",[e._v("\n              未出\n            ")])]}}])})],1),a("div",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelReplenish}},[e._v("\n          取消\n        ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveReplenish}},[e._v("\n          确定\n        ")])],1)],1)])],1)},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("a8db")),s=(a("96cf"),a("3b8d")),o=(a("a481"),a("34ef"),a("7f7f"),a("75fc")),l=(a("7514"),a("bd86")),c=(a("28a5"),a("d225")),u=a("b0b4"),d=a("308d"),p=a("6bb5"),h=a("4e2b"),m=a("9ab4"),f=a("60a3"),v=a("9dba"),g=a("12fe"),y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"step-box"},[a("div",{staticClass:"step-header"},[a("el-row",{staticClass:"header-title"},[a("el-col",{attrs:{span:20}},[a("el-steps",{attrs:{simple:"",active:e.activeStep,"finish-status":"wait","process-status":"finish"}},[a("el-step",{attrs:{title:"选择订单"}}),a("el-step",{attrs:{title:"确认订单"}})],1)],1),a("el-col",{staticStyle:{"text-align":"right",padding:"6px"},attrs:{span:4}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"text",size:"small"},on:{click:e.goBack}},[e._v("\n          返 回\n        ")])],1)],1)],1),a("div",{staticClass:"step-contain"},[a("div",{staticClass:"step-item"},[0===e.activeStep?a("addEditForm",{ref:"addEditForm",attrs:{"status-list":e.statusList,"single-id":e.singleId,"is-str":e.isStr},on:{setload:e.setLoad,back:e.goBack}}):e._e(),1===e.activeStep?a("costItem",{ref:"costItem",attrs:{"status-list":e.statusList,"single-id":e.singleId,"is-str":e.isStr},on:{setload:e.setLoad,back:e.goBack}}):e._e()],1)]),a("div",{staticClass:"step-footer"},[a("el-row",{staticClass:"footer-title"},[a("el-col",{attrs:{span:12}},[a("div",{staticStyle:{height:"32px"}},[2===e.activeStep||e.isStr?e._e():a("el-button",{attrs:{type:"info",size:"small",plain:""},on:{click:e.handleClear}},[e._v("\n            清空\n          ")]),0===e.activeStep||e.isStr?e._e():a("el-button",{attrs:{type:"primary",size:"small",plain:""},on:{click:e.handleLast}},[e._v("\n            上一步\n          ")])],1)]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("div",{staticStyle:{height:"32px"}},[1===e.activeStep||e.isStr?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleNext}},[e._v("\n            下一步\n          ")]),1!==e.activeStep||e.isStr?e._e():a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSubmit(!1)}}},[e._v("\n            保存\n          ")])],1)])],1)],1)])},b=[],x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._m(0),a("searchForm",{ref:"searchForm",on:{changeTrans:e.changeTrans}}),a("div",{staticStyle:{"text-align":"right",padding:"10px 0","border-bottom":"1px solid #e8e8e8"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSearch}},[e._v("\n      查询\n    ")]),a("el-button",{attrs:{size:"small"},on:{click:e.handleReset}},[e._v("\n      重置\n    ")]),a("el-button",{attrs:{size:"small",type:"text"},on:{click:e.handleCollapse}},[e._v("\n      "+e._s(e.collapseShow?"收起":"展开")+"\n      "),e.collapseShow?a("i",{staticClass:"el-icon-arrow-up"}):a("i",{staticClass:"el-icon-arrow-down"})])],1),a("el-row",{staticStyle:{"padding-top":"10px"}},[a("el-col",{attrs:{span:16}},[a("span",{staticStyle:{"padding-right":"10px"}},[a("i",{staticClass:"tip-blue"}),a("span",{staticStyle:{"font-size":"18px","font-weight":"bold",color:"#303133","line-height":"32px"}},[e._v("已筛选订单")])]),a("el-radio-group",{on:{change:e.onSelected},model:{value:e.selectVal,callback:function(t){e.selectVal=t},expression:"selectVal"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("\n          全部\n        ")]),a("el-radio-button",{attrs:{label:"selected"}},[e._v("\n          已选择\n        ")])],1),a("span",{staticClass:"select-tip"},[e._v("已选择("+e._s(e.filterNum())+")票，"+e._s(e.filterData("CBM"))+"CBM，"+e._s(e.filterData("KGS"))+"KGS")]),a("span",{staticClass:"handle-add"},[e._v("\n        装货仓库\n      ")]),0===e.wareSort.length?a("el-button",{attrs:{size:"small",type:"text"},on:{click:e.handleWarehouse}},[e._v("\n        已选择("+e._s(e.wareSort.length)+")\n      ")]):e._e(),e.wareSort.length?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"bottom"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          装载次序\n          "),e._l(e.wareSort,function(t,n){return a("div",{key:t.id},[e._v("\n            "+e._s(n+1+"."+t.name)+"\n          ")])})],2),a("el-button",{attrs:{size:"small",type:"text"},on:{click:e.handleWarehouse}},[e._v("\n          已选择("+e._s(e.wareSort.length)+")\n        ")])],1):e._e(),a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"输入原单号查询",size:"small",clearable:""},model:{value:e.orderCode,callback:function(t){e.orderCode=t},expression:"orderCode"}})],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:"selected"===e.selectVal,expression:"selectVal === 'selected'"}],staticStyle:{"text-align":"right"},attrs:{span:8}},[a("span",{staticClass:"handle-add"},[e._v("\n        手动添加订单\n      ")]),a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入",size:"small",clearable:""},model:{value:e.orderVal,callback:function(t){e.orderVal=t},expression:"orderVal"}}),a("el-button",{attrs:{type:"primary",size:"small",loading:e.selectLoading},on:{click:e.onAdd}},[e._v("\n        添加\n      ")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"all"===e.selectVal,expression:"selectVal === 'all'"}],staticStyle:{padding:"20px 0"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.tableData.length,expression:"tableData.length"}]},[a("el-checkbox",{staticStyle:{margin:"0 0 5px 30px"},attrs:{disabled:0===e.wareSort.length},on:{change:e.handleCheckedAll},model:{value:e.checkedAll,callback:function(t){e.checkedAll=t},expression:"checkedAll"}},[e._v("\n        全选\n      ")])],1),a("el-collapse",{attrs:{accordion:""}},e._l(e.queryList,function(t,n){return a("el-collapse-item",{key:t.fba||n,staticClass:"collapse-position"},[a("template",{slot:"title"},[a("el-row",{staticStyle:{"background-color":"#ededed"}},[a("el-col",{staticStyle:{"padding-left":"30px"},attrs:{span:24}},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.boolItem(t),expression:"boolItem(item)"}],staticStyle:{"margin-right":"0"},attrs:{indeterminate:t.indeterminate},on:{change:function(a){return e.handleSelectAll(a,t,n)}},model:{value:t.checkAll,callback:function(a){e.$set(t,"checkAll",a)},expression:"item.checkAll"}}),a("span",{staticStyle:{"padding-left":"5px"}},[e._v("\n                "+e._s("xxxx"===t.fba?"私人地址      ":"FBA仓库 ["+t.fba+"]")+"\n              ")]),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("\n                总票数："+e._s(t.list.length)+"  \n                总体积："+e._s(e.fbaVolWeiFormat(t.list,"CBM"))+" CBM \n                总重量："+e._s(e.fbaVolWeiFormat(t.list,"KGS"))+" KGS \n                总件数："+e._s(e.fbaPkgFormat(t.list))+"\n              ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:e.boolItem(t),expression:"boolItem(item)"}],staticStyle:{"padding-left":"20px"}},[e._v("\n                (可发货 \n                总票数："+e._s(e.shipNumFormat(t.list))+"  \n                总体积："+e._s(e.shipVolWeiFormat(t.list,"CBM"))+" CBM \n                总重量："+e._s(e.shipVolWeiFormat(t.list,"KGS"))+" KGS \n                总件数："+e._s(e.shipPkgFormat(t.list))+")\n              ")])],1)],1)],1),e._l(t.list,function(i,r){return a("div",{key:i.code,staticClass:"flex-row-list"},[a("div",{staticStyle:{width:"50px"}},[a("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:e.boolWare(i),expression:"boolWare(row)"}],staticClass:"text-box",on:{change:function(a){return e.handleSelected(a,i,r,n,t)}},model:{value:i.checked,callback:function(t){e.$set(i,"checked",t)},expression:"row.checked"}})],1),a("div",{staticStyle:{flex:"1"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap"}},[a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  原单号：\n                ")]),a("div",{staticClass:"text-info",attrs:{title:i.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:i.code,expression:"row.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(i.code))])]),a("div",[i.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    特批发货\n                  ")]):e._e(),i.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),i.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==i.payMethod&&e.formatPay(i)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(i.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===i.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(i.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),i.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e()])]),a("div",{staticStyle:{width:"170px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  到仓时间：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.unloadingTime||"--")+"\n                ")])]),a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  目的城市：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.consignee||{}).city||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  服务：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.lsc||{}).value||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  下单仓库：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.warehouse||{}).name||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  货物所在仓：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.warehouse1||{}).name||"--")+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"vol","CBM"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"wei","KGS"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大尺寸：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxSizeFormat(i))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"maxWei","KGS"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"maxVol","CBM"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.packages)+"\n                ")])]),2===i.ifLoading?a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px",color:"red"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  剩余件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.loadingCount)+"\n                ")])]):e._e(),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  计量状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===i.status["MEASURE"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  验货状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===i.status["EXAMINE"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  报关状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===i.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  快递单号：\n                ")]),a("div",{staticClass:"text-info"},["0"===i.deliveryWay?a("div",[i.express&&i.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[e._l(i.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                        "+e._s(t)+"\n                      ")])}),a("span",{staticStyle:{color:"#2291E6",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v("\n                        已出\n                      ")])],2):a("span",[e._v("\n                      未出\n                    ")])],1):a("div",[e._v("\n                    --\n                  ")])])])])])])})],2)}),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"selected"===e.selectVal,expression:"selectVal === 'selected'"}],staticStyle:{padding:"20px 0"}},[a("el-collapse",{attrs:{accordion:""}},e._l(e.querySelectList,function(t,n){return a("el-collapse-item",{key:t.fba||n,staticClass:"collapse-position"},[a("template",{slot:"title"},[a("el-row",{staticStyle:{"background-color":"#ededed"}},[a("el-col",{attrs:{span:24}},[a("span",{staticStyle:{"padding-left":"30px"}},[e._v("\n                "+e._s("xxxx"===t.fba?"私人地址      ":"FBA仓库 ["+t.fba+"]")+"\n              ")]),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("\n                总票数："+e._s(t.list.length)+"  \n                总体积："+e._s(e.fbaVolWeiFormat(t.list,"CBM"))+" CBM \n                总重量："+e._s(e.fbaVolWeiFormat(t.list,"KGS"))+" KGS \n                总件数："+e._s(e.fbaPkgFormat(t.list))+"\n              ")])])],1)],1),e._l(t.list,function(n){return a("div",{key:n.code,staticClass:"flex-row-list"},[a("div",{staticStyle:{flex:"1"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap"}},[a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  原单号：\n                ")]),a("div",{staticClass:"text-info",attrs:{title:n.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:n.code,expression:"row.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(n.code))])]),a("div",[n.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    特批发货\n                  ")]):e._e(),n.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),n.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==n.payMethod&&e.formatPay(n)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(n.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===n.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(n.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),n.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e()])]),a("div",{staticStyle:{width:"170px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  到仓时间：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(n.unloadingTime||"--")+"\n                ")])]),a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  目的城市：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((n.consignee||{}).city||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  服务：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((n.lsc||{}).value||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  下单仓库：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((n.warehouse||{}).name||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  货物所在仓：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((n.warehouse1||{}).name||"--")+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(n,"vol","CBM"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(n,"wei","KGS"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大尺寸：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxSizeFormat(n))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(n,"maxWei","KGS"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(n,"maxVol","CBM"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(n.packages)+"\n                ")])]),2===n.ifLoading?a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px",color:"red"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  剩余件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(n.loadingCount)+"\n                ")])]):e._e(),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  计量状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===n.status["MEASURE"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  验货状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===n.status["EXAMINE"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  报关状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===n.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  快递单号：\n                ")]),a("div",{staticClass:"text-info"},["0"===n.deliveryWay?a("div",[n.express&&n.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[e._l(n.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                        "+e._s(t)+"\n                      ")])}),a("span",{staticStyle:{color:"#2291E6",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v("\n                        已出\n                      ")])],2):a("span",[e._v("\n                      未出\n                    ")])],1):a("div",[e._v("\n                    --\n                  ")])])])])]),a("div",{staticStyle:{width:"50px"}},[a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteRow(t.fba,n.id)}}},[e._v("\n              删除\n            ")])],1)])})],2)}),1)],1),a("el-dialog",{attrs:{title:"选择装货仓库",visible:e.dialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancel}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("div",{staticStyle:{display:"flex","flew-flow":"column nowrap"}},[a("div",{staticStyle:{flex:"1",margin:"0 30px"}},[a("span",{staticStyle:{"line-height":"28px","font-weight":"bold","font-size":"16px"}},[e._v("可选仓库")]),a("el-card",{attrs:{shadow:"never"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入搜索关键字",clearable:""},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-checkbox-group",{staticStyle:{height:"400px","overflow-y":"auto"},on:{change:e.onWarehouse},model:{value:e.wareOption,callback:function(t){e.wareOption=t},expression:"wareOption"}},e._l(e.warehouseData,function(t){return a("el-checkbox",{key:t.id,staticStyle:{display:"block",margin:"5px 0"},attrs:{label:t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),1)],1)],1),a("div",{staticStyle:{flex:"1",margin:"0 30px"}},[a("span",{staticStyle:{"line-height":"28px","font-weight":"bold","font-size":"16px"}},[e._v("已选仓库")]),a("el-card",{attrs:{shadow:"never"}},[a("span",{staticStyle:{"line-height":"28px",color:"#ccc"}},[e._v("拖拽排序可调整装货次序")]),a("div",{staticClass:"ware-sort",staticStyle:{height:"400px","overflow-y":"auto"}},e._l(e.wareSelected,function(t,n){return a("div",{key:t.id,staticStyle:{margin:"5px 0"}},[a("el-row",[a("el-col",{staticClass:"drag-btn",attrs:{span:22}},[a("span",[a("i",{staticClass:"el-icon-rank"})]),a("span",[e._v(" "+e._s(t.name))])]),a("el-col",{attrs:{span:2}},[a("i",{staticClass:"el-icon-close",staticStyle:{cursor:"pointer"},on:{click:function(a){return e.deleteWare(t,n)}}})])],1)],1)}),0)])],1)]),a("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("\n          确定\n        ")])],1)])])],1)},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-top":"10px"}},[a("span",{staticStyle:{"padding-right":"10px"}},[a("i",{staticClass:"tip-blue"}),a("span",{staticStyle:{"font-size":"18px","font-weight":"bold",color:"#303133","line-height":"32px"}},[e._v("按条件筛选")])])])}],_=(a("6762"),a("2fdb"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,rules:e.formRules,"label-width":"110px",size:"small"}},[a("div",{staticClass:"item-rules-box"},[a("el-form-item",{attrs:{label:"运输方式：",prop:"transport"}},[a("el-radio-group",{on:{change:e.onTrans},model:{value:e.searchForm.transport,callback:function(t){e.$set(e.searchForm,"transport",t)},expression:"searchForm.transport"}},e._l(e.transportList,function(t,n){return a("el-radio-button",{key:n,attrs:{label:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1)],1),"1"===e.searchForm.transport||"2"===e.searchForm.transport?a("el-form-item",{attrs:{label:"直送/拆柜：",prop:"cabinetType"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-radio-group",{on:{change:e.onCabinet},model:{value:e.searchForm.cabinetType,callback:function(t){e.$set(e.searchForm,"cabinetType",t)},expression:"searchForm.cabinetType"}},e._l(e.sendStripList,function(t,n){return a("el-radio-button",{key:n,attrs:{label:""+n}},[e._v("\n                "+e._s(t)+"\n              ")])}),1)],1),"1"===e.searchForm.cabinetType?a("el-col",{attrs:{span:12}},[a("el-checkbox",{model:{value:e.searchForm.fitFba,callback:function(t){e.$set(e.searchForm,"fitFba",t)},expression:"searchForm.fitFba"}},[e._v("\n              严格按直送仓标准\n            ")])],1):e._e()],1)],1):e._e(),a("el-form-item",{attrs:{label:"时间范围：",prop:"time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},on:{change:e.changeTime},model:{value:e.searchForm.time,callback:function(t){e.$set(e.searchForm,"time",t)},expression:"searchForm.time"}})],1),a("el-form-item",{attrs:{label:"目的国：",prop:"targetCountry"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.searchForm.transport,loading:e.selectLoading,placeholder:"请选择",size:"small",clearable:"",filterable:""},on:{focus:e.getCountryData,change:e.onCountry},model:{value:e.searchForm.targetCountry,callback:function(t){e.$set(e.searchForm,"targetCountry",t)},expression:"searchForm.targetCountry"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:""+e.name,value:e.id}})}),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},["4"!==e.searchForm.transport?a("el-form-item",{attrs:{label:"目的港："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.searchForm.targetPort.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",disabled:!e.searchForm.targetCountry,icon:"el-icon-search"},on:{click:function(t){return e.handleItem("targetPort")}},slot:"append"})],1)],1):e._e(),a("el-form-item",{class:e.isFba?"is-required":"",attrs:{label:"目的仓：",prop:"fbastoreId"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.searchForm.fbastoreId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",disabled:!e.searchForm.targetCountry,icon:"el-icon-search"},on:{click:function(t){return e.handleItem("fbastoreId")}},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"货物所在仓："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.searchForm.warehouseId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.handleItem("warehouseId")}},slot:"append"})],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}]},[a("el-form-item",{staticStyle:{width:"25%"},attrs:{label:"税单方式："}},[a("el-radio-group",{attrs:{size:"mini"},on:{change:function(t){e.searchForm.lscId=[],e.searchForm.lscGroupIds=[]}},model:{value:e.searchForm.includeTax,callback:function(t){e.$set(e.searchForm,"includeTax",t)},expression:"searchForm.includeTax"}},[a("el-radio-button",{attrs:{label:void 0}},[e._v("\n            全部\n          ")]),a("el-radio-button",{attrs:{label:!0}},[e._v("\n            包税\n          ")]),a("el-radio-button",{attrs:{label:!1}},[e._v("\n            不包税\n          ")])],1)],1),"0"===e.searchForm.cabinetType?a("el-form-item",{staticStyle:{width:"35%"},attrs:{label:"派送方式："}},[a("el-checkbox-group",{on:{change:function(t){e.searchForm.lscId=[],e.searchForm.lscGroupIds=[]}},model:{value:e.searchForm.deliveryWay,callback:function(t){e.$set(e.searchForm,"deliveryWay",t)},expression:"searchForm.deliveryWay"}},[a("el-checkbox",{attrs:{label:"1"}},[e._v("\n            快递\n          ")]),a("el-checkbox",{attrs:{label:"0"}},[e._v("\n            卡派\n          ")]),a("el-checkbox",{attrs:{label:"2"}},[e._v("\n            自提\n          ")]),"1"===e.searchForm.transport||"2"===e.searchForm.transport?a("el-checkbox",{attrs:{label:"3"}},[e._v("\n            整柜直送\n          ")]):e._e(),a("el-checkbox",{attrs:{label:"4"}},[e._v("\n            到仓\n          ")])],1)],1):e._e(),a("el-form-item",{staticStyle:{width:"40%"},attrs:{label:"报关方式："}},[a("el-checkbox-group",{model:{value:e.searchForm.customs,callback:function(t){e.$set(e.searchForm,"customs",t)},expression:"searchForm.customs"}},e._l(e.customsClearanceList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:""+n}},[e._v("\n            "+e._s(t)+"\n          ")])}),1)],1),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"货物类型："}},[a("el-checkbox-group",{model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},e._l(e.goodsList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:""+n}},[e._v("\n            "+e._s(t)+"\n          ")])}),1)],1),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"货物状态："}},[a("el-checkbox-group",{on:{change:e.onGoodsStatus},model:{value:e.checkedGoodsStatus,callback:function(t){e.checkedGoodsStatus=t},expression:"checkedGoodsStatus"}},e._l(e.goodsStatusList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t}},[e._v("\n            "+e._s(t)+"\n          ")])}),1)],1),a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"客户级别："}},[a("el-checkbox-group",{on:{change:e.onLevel},model:{value:e.checkedCustomerLevel,callback:function(t){e.checkedCustomerLevel=t},expression:"checkedCustomerLevel"}},e._l(e.customerLevelList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t.id}},[e._v("\n            "+e._s(t.code)+"\n          ")])}),1)],1),"1"===e.searchForm.transport&&"US"===e.searchForm.targetCountry?a("el-form-item",{staticStyle:{width:"50%"},attrs:{label:"服务机构："}},[a("el-checkbox-group",{on:{change:function(t){e.searchForm.lscId=[],e.searchForm.lscGroupIds=[]}},model:{value:e.searchForm.orgTag,callback:function(t){e.$set(e.searchForm,"orgTag",t)},expression:"searchForm.orgTag"}},e._l(e.orgList,function(t,n){return a("el-checkbox",{key:n,attrs:{label:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1)],1):e._e()],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"item-box"},[a("el-form-item",{attrs:{label:"服务："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.searchForm.lscId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.handleItem("lscId")}},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"清关证书："}},[a("el-radio-group",{model:{value:e.searchForm.certificate,callback:function(t){e.$set(e.searchForm,"certificate",t)},expression:"searchForm.certificate"}},e._l(e.certificateData,function(t,n){return a("el-radio-button",{key:n,attrs:{label:""+n}},[e._v("\n            "+e._s(t)+"\n          ")])}),1)],1),a("el-form-item",{attrs:{label:"选择证书："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.searchForm.certificateList.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.handleItem("certificateList")}},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"快递公司："}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.searchForm.expressId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[a("el-button",{attrs:{slot:"append",disabled:!e.searchForm.targetCountry,icon:"el-icon-search"},on:{click:function(t){return e.handleItem("expressId")}},slot:"append"})],1)],1)],1)]),a("el-dialog",{attrs:{title:e.itemTitle,visible:e.itemShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.itemShow=t},close:e.itemClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.itemLoading,expression:"itemLoading"}]},[a("div",{staticStyle:{"text-align":"right",padding:"0 45px 10px 0"}},["lscId"===e.itemVal?a("el-select",{staticStyle:{width:"200px"},attrs:{multiple:"","collapse-tags":"",clearable:"",size:"small",placeholder:"服务组"},on:{change:e.onGroup},model:{value:e.searchForm.lscGroupIds,callback:function(t){e.$set(e.searchForm,"lscGroupIds",t)},expression:"searchForm.lscGroupIds"}},e._l(e.groupList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e()],1),a("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:[e.itemTitle,"已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.itemList},model:{value:e.itemArr,callback:function(t){e.itemArr=t},expression:"itemArr"}}),a("div",{staticStyle:{"text-align":"right",margin:"10px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemClose}},[e._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemClose}},[e._v("\n          确 定\n        ")])],1)],1)])],1)}),C=[];function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function F(){return{category:[],creditRating:[],certificateList:[],customs:[],expressId:[],frozen:!1,audit:!1,cabinetType:"0",deliveryWay:[],win:!1,lock:!1,measure:!1,examine:!1,tracking:!1,fitFba:!1,transport:void 0,startDate:void 0,endDate:void 0,time:[],warehouseId:[],orgTag:[],lscId:[],lscGroupIds:[],fbastoreId:[],targetPort:[],fbastoreName:void 0,lscName:void 0,targetCountry:void 0,certificate:void 0,includeTax:void 0}}var L=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.searchForm=F(),e.formRules={transport:[{required:!0,message:"请选择运输方式",trigger:"change"}],cabinetType:[{required:!0,message:"请选择直送/拆柜",trigger:"change"}],time:[{required:!0,message:"请选择时间范围",trigger:"change"}],targetCountry:[{required:!0,message:"请选择目的国",trigger:"change"}],fbastoreId:{validator:e.validateData,trigger:"change"}},e.isIndeterminate=!1,e.checkedGoodsStatus=[],e.checkedCustomerLevel=[],e.goodsList=["普货","带电","纯电","带磁","液体粉末","木制品","其他"],e.goodsStatusList=["已审核","已锁舱","已入库","已计量","已验货","已出转单","冻结件"],e.customsClearanceList=["买单","一般贸易已委托","一般贸易未委托"],e.customerLevelList=[],e.orgList=[{name:"美森",id:"1"},{name:"以星",id:"2"},{name:"快线",id:"3"},{name:"其他",id:"4"}],e.transportList=[],e.sendStripList=["拆柜","直送"],e.certificateData=["非证书柜","纯证书柜","混合柜"],e.expressList=[],e.fbaStoreList=[],e.serviceList=[],e.portToList=[],e.warehouseList=[],e.countryList=[],e.credentialList=[],e.addressList=[],e.supplierList=[],e.destinationList=[],e.selectLoading=!1,e.formLoading=!1,e.itemLoading=!1,e.itemShow=!1,e.isShow=!1,e.itemArr=[],e.itemList=[],e.groupList=[],e.ss="",e.itemTitle="",e.itemVal="",e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"validateData",value:function(e,t,a){var n=this.searchForm,i="1"===n.cabinetType;i&&!t?a(new Error("目的仓不能为空")):a()}},{key:"reset",value:function(){this.searchForm=F(),this.isIndeterminate=!1,this.clearValidate()}},{key:"setCollapse",value:function(e){this.isShow=e}},{key:"setForm",value:function(e){var t=e.fitFba,a=e.creditRating,n=e.startDate,i=e.endDate,r={audit:"已审核",win:"已入库",lock:"已锁舱",measure:"已计量",examine:"已验货",tracking:"已出转单",frozen:"冻结件"},s=[];Object.keys(r).map(function(t){e[t]&&s.push(r[t])}),this.checkedGoodsStatus=s.filter(function(e){return e}),this.checkedCustomerLevel=a||[],this.searchForm=S({},e),this.searchForm.cabinetType=t?"1":"0",this.searchForm.time=n&&i?[n,i]:[],this.searchForm.targetCountry&&this.getCountryData()}},{key:"clearValidate",value:function(){var e=this.$refs.searchForm;this.$nextTick(function(){e.clearValidate()})}},{key:"filterMethod",value:function(e,t){var a=t.name||"";return a.indexOf(e)>-1}},{key:"itemClose",value:function(){this.itemShow=!1,this.itemTitle="",this.itemList=[],this.searchForm[this.itemVal]=JSON.parse(JSON.stringify(this.itemArr));var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"handleItem",value:function(e){if(this.itemShow=!0,this.itemVal=e,this.itemArr=[],this.itemArr=JSON.parse(JSON.stringify(this.searchForm[e])),"lscId"===e){if(this.itemTitle="选择服务",this.getGroupData(),this.searchForm.lscGroupIds.length<=0)return;this.getPrivatelineList()}else"targetPort"===e?(this.itemTitle="选择目的港",this.getPortToList()):"fbastoreId"===e?(this.itemTitle="选择目的仓",this.getPurposeWarehouse()):"certificateList"===e?(this.itemTitle="选择证书",this.getCredentialList()):"expressId"===e?(this.itemTitle="选择快递公司",this.getExpressCompanyList()):"warehouseId"===e&&(this.itemTitle="选择货物所在仓",this.getStayWarehouse())}},{key:"onGoodsStatus",value:function(e){this.searchForm.frozen=e.some(function(e){return"冻结件"===e}),this.searchForm.audit=e.some(function(e){return"已审核"===e}),this.searchForm.win=e.some(function(e){return"已入库"===e}),this.searchForm.lock=e.some(function(e){return"已锁舱"===e}),this.searchForm.measure=e.some(function(e){return"已计量"===e}),this.searchForm.examine=e.some(function(e){return"已验货"===e}),this.searchForm.tracking=e.some(function(e){return"已出转单"===e})}},{key:"onLevel",value:function(e){this.searchForm.creditRating=e}},{key:"onCabinet",value:function(e){"0"===this.searchForm.cabinetType&&(this.searchForm.fitFba=!1),this.searchForm.deliveryWay=[],this.searchForm.lscId=[],this.searchForm.lscGroupIds=[]}},{key:"onTrans",value:function(){this.searchForm.deliveryWay=[],this.countryList=[],this.searchForm.targetCountry=void 0,this.onCountry(),this.$emit("changeTrans")}},{key:"onCountry",value:function(){this.searchForm.targetPort=[],this.searchForm.fbastoreId=[],this.searchForm.expressId=[],this.searchForm.lscId=[],this.searchForm.lscGroupIds=[],this.searchForm.orgTag=[],this.itemList=[]}},{key:"changeTime",value:function(e){Array.isArray(e)&&e.length>0?(this.searchForm.startDate=e[0],this.searchForm.endDate=e[1]):(this.searchForm.startDate=void 0,this.searchForm.endDate=void 0)}},{key:"getSubtypeList",value:function(){var e=this;this.formLoading=!0;var t={typeId:"05"};Object(g["M"])(t).then(function(t){var a=t.data||[];e.transportList=a,e.formLoading=!1}).catch(function(t){return e.formLoading=!1,t})}},{key:"getCustRatingList",value:function(){var e=this;this.selectLoading=!0,Object(g["r"])({page:1,size:999}).then(function(t){var a=t.data||{};e.customerLevelList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getPurposeWarehouse",value:function(){var e=this;this.itemLoading=!0;var t={countryId:this.searchForm.targetCountry,codeSort:"A",page:1,size:9999};Object(g["v"])(t).then(function(t){var a=t.data||{},n=a.result||[];e.itemList=n.map(function(e){var t=e.code,a=e.postal,n=e.stateName,i=Object(r["a"])(e,["code","postal","stateName"]);return S({name:"".concat(t||"","-").concat(a||"","-").concat(n||""),code:t,postal:a,stateName:n},i)}),e.itemLoading=!1}).catch(function(t){return e.itemLoading=!1,t})}},{key:"getGroupData",value:function(){var e=this;this.itemLoading=!0;var t={model:{status:1,countryId:this.searchForm.targetCountry},page:1,size:9999};Object(g["A"])(t).then(function(t){var a=t.data||{};e.groupList=a.result||[],e.itemLoading=!1}).catch(function(t){return e.itemLoading=!1,t})}},{key:"onGroup",value:function(){this.itemList=[],this.itemArr=[],this.searchForm.lscGroupIds.length<=0||this.getPrivatelineList()}},{key:"getPrivatelineList",value:function(){var e=this;this.itemLoading=!0;var t={countryId:this.searchForm.targetCountry,subtypeId:this.searchForm.transport,dispatch:this.searchForm.deliveryWay.join(","),includeTax:this.searchForm.includeTax,orgTag:"1"===this.searchForm.transport&&"US"===this.searchForm.targetCountry?this.searchForm.orgTag.join(","):void 0,lscGroupIds:this.searchForm.lscGroupIds};Object(g["z"])(t).then(function(t){var a=t.data||[];e.itemList=a,e.itemLoading=!1}).catch(function(t){return e.itemLoading=!1,t})}},{key:"getPortToList",value:function(){var e=this;this.itemLoading=!0;var t={page:1,size:9999,type:this.searchForm.transport,countryId:this.searchForm.targetCountry};Object(g["I"])(t).then(function(t){e.itemLoading=!1;var a=t.data||{},n=a.result||[];e.itemList=n.map(function(e){var t=e.code,a=e.name,n=e.alias,i=Object(r["a"])(e,["code","name","alias"]);return S({name:"".concat(t||"","-").concat(a||"","-").concat(n||""),code:t,alias:n},i)})}).catch(function(t){return e.itemLoading=!1,t})}},{key:"getStayWarehouse",value:function(){var e=this;this.itemLoading=!0,Object(g["X"])().then(function(t){var a=t.data||[];e.itemList=a,e.itemLoading=!1}).catch(function(t){return e.itemLoading=!1,t})}},{key:"getCredentialList",value:function(){this.itemList=[]}},{key:"getCountryData",value:function(){var e=this;this.selectLoading=!0;var t={typeId:"05",subtypeId:this.searchForm.transport};Object(g["p"])(t).then(function(t){e.countryList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getExpressCompanyList",value:function(){var e=this;this.itemLoading=!0;var t={page:1,size:99999,type:"4",serviceCountry:this.searchForm.targetCountry};Object(g["u"])(t).then(function(t){var a=t.data||{};e.itemList=a.result||[],e.itemLoading=!1}).catch(function(t){return e.itemLoading=!1,t})}},{key:"created",value:function(){this.getSubtypeList(),this.getCustRatingList()}},{key:"isFba",get:function(){var e=this.searchForm;return"1"===e.cabinetType}}]),t}(f["e"]);L=m["a"]([Object(f["a"])({name:"",components:{},props:{}})],L);var O=L,T=O,I=(a("9412"),a("2877")),j=Object(I["a"])(T,_,C,!1,null,"370fc090",null),D=j.exports,M=a("5a0c"),N=a.n(M),$=a("53fe"),P=a.n($);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var z=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.orderVal="",e.orderCode="",e.selectLoading=!1,e.dialogLoading=!1,e.dialogShow=!1,e.collapseShow=!1,e.tableData=[],e.selectedData=[],e.warehouseList=[],e.page=1,e.size=10,e.total=0,e.searchModel={},e.wareOption=[],e.wareSelected=[],e.wareSort=[],e.searchName="",e.selectVal="all",e.checkedAll=!1,e.checkedIndeterminate=!1,e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"setData",value:function(e,t,a){var n=this;this.selectedData=t||[],this.wareSort=a||{},this.getwarehouseList();var i=this.$refs.searchForm;i.setForm(e),this.$nextTick(function(){n.queryAll(1)})}},{key:"getData",value:function(){var e=this.$refs.searchForm,t=e.searchForm||{},a=(t.time,Object(r["a"])(t,["time"]));return this.searchModel=JSON.parse(JSON.stringify(a)),{model:this.searchModel,data:this.selectedData,warehouses:this.wareSort}}},{key:"formatPay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";return!!i&&i&&i<n}},{key:"formatCutoffDay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";n&&N()(n).unix();return i&&i<n?Math.ceil((n-i)/86400)+"天":"--"}},{key:"maxSizeFormat",value:function(e){var t=e.measure||{};return Math.max(t.maxHeight||0,t.maxLength||0,t.maxWidth||0)}},{key:"maxVolWeiFormat",value:function(e,t,a){var n=this.$getVolumeUnitByLengthUnit((e.um||{}).umLength),i=(e.um||{}).umWeight,r=(e.measure||{}).maxVolume,s=(e.measure||{}).totalVolume,o=(e.measure||{}).maxWeight,l=(e.measure||{}).totalWeight,c=0;return 2!==e.ifLoading&&"vol"===t&&n&&s&&(c=this.$volumeConversion(s,n,"CBM",3)),2===e.ifLoading&&"vol"===t&&(c=this.$volumeConversion(e.surplusVolume,"CBCM","CBM",3)),"maxVol"===t&&n&&r&&(c=this.$volumeConversion(r,n,"CBM",3)),2!==e.ifLoading&&"wei"===t&&i&&l&&(c=this.$volumeConversion(l,i,"KGS",3)),2===e.ifLoading&&"wei"===t&&(c=this.$volumeConversion(e.surplusWeight,"KGS","KGS",3)),"maxWei"===t&&i&&o&&(c=this.$volumeConversion(o,i,"KGS",3)),(c||"--")+" "+a}},{key:"fbaVolWeiFormat",value:function(e,t){var a=this,n=0,i=0;return e.map(function(e,t){var r=e.um||{},s=a.$getVolumeUnitByLengthUnit(r.umLength),o=e.measure||{};if(2===e.ifLoading){var l=a.$volumeConversion(e.surplusVolume,"CBCM","CBM",3),c=String(l).length,u=l*Math.pow(10,c);n+=parseFloat((u/Math.pow(10,c)).toFixed(3));var d=a.$volumeConversion(e.surplusWeight,"KGS","KGS",3),p=String(d).length,h=d*Math.pow(10,p);i+=parseFloat((h/Math.pow(10,p)).toFixed(3))}else{if(o&&o.totalVolume>=0&&r&&s){var m=a.$volumeConversion(o.totalVolume,s,"CBM",3),f=String(m).length,v=m*Math.pow(10,f);n+=parseFloat((v/Math.pow(10,f)).toFixed(3))}if(o&&o.totalWeight>=0&&r&&r.umWeight){var g=a.$volumeConversion(o.totalWeight,r.umWeight,"KGS",3),y=String(g).length,b=g*Math.pow(10,y);i+=parseFloat((b/Math.pow(10,y)).toFixed(3))}}}),"CBM"===t?Math.round(1e3*n)/1e3:"KGS"===t?Math.round(1e3*i)/1e3:void 0}},{key:"fbaPkgFormat",value:function(e){var t=e.map(function(e){return 2===e.ifLoading?e.loadingCount:e.packages});return t.reduce(function(e,t){return e+t},0)}},{key:"filterNum",value:function(){var e=0;return this.selectedData.map(function(t){t&&t.list&&(e+=t.list.length)}),e}},{key:"filterData",value:function(e){var t=this,a=0,n=0,i=[];return this.selectedData.map(function(e){e&&e.list&&i.push.apply(i,Object(o["a"])(e.list))}),i.map(function(e,i){var r=e.um||{},s=t.$getVolumeUnitByLengthUnit(r.umLength),o=e.measure||{};if(2===e.ifLoading){var l=t.$volumeConversion(e.surplusVolume,"CBCM","CBM",3),c=String(l).length,u=l*Math.pow(10,c);a+=parseFloat((u/Math.pow(10,c)).toFixed(3));var d=t.$volumeConversion(e.surplusWeight,"KGS","KGS",3),p=String(d).length,h=d*Math.pow(10,p);n+=parseFloat((h/Math.pow(10,p)).toFixed(3))}else{if(o&&o.totalVolume>=0&&r&&s){var m=t.$volumeConversion(o.totalVolume,s,"CBM",3),f=String(m).length,v=m*Math.pow(10,f);a+=parseFloat((v/Math.pow(10,f)).toFixed(3))}if(o&&o.totalWeight>=0&&r&&r.umWeight){var g=t.$volumeConversion(o.totalWeight,r.umWeight,"KGS",3),y=String(g).length,b=g*Math.pow(10,y);n+=parseFloat((b/Math.pow(10,y)).toFixed(3))}}}),"CBM"===e?Math.round(1e3*a)/1e3:"KGS"===e?Math.round(1e3*n)/1e3:void 0}},{key:"shipNumFormat",value:function(e){var t=this,a=e.filter(function(e){return t.boolWare(e)});return a.length}},{key:"shipVolWeiFormat",value:function(e,t){var a=this,n=e.filter(function(e){return a.boolWare(e)});return this.fbaVolWeiFormat(n,t)}},{key:"shipPkgFormat",value:function(e){var t=this,a=e.filter(function(e){return t.boolWare(e)});return this.fbaPkgFormat(a)}},{key:"boolWare",value:function(e){var t=(e.warehouse1||{}).id,a=this.wareSort.some(function(e){return e.id===t});return a&&this.wareSort.length>0}},{key:"boolOrder",value:function(e){var t=V({},e,{fullorderInsufficient:e.fullorderInsufficient||{},express:e.express||{},warehouse1:e.warehouse1||{}}),a=t.audit,n=t.warehouse1.id,i=t.status,r=i.MEASURE,s=i.EXAMINE,o=t.deliveryWay,l=t.express.trackingNos,c=t.fullorderInsufficient.insufficientStatus,u=t.payMethod,d=t.ifPayment,p=t.insufficient,h=t.ifFrozen,m=t.beShip;N()().unix(),e.cutoffTime&&N()(e.cutoffTime).unix();return!((2!==e.ifLoading||2!==e.ifConfirm)&&0!==e.ifLoading||"1"!==a||!n||"7"!==r||"10"!==s||!("0"===o&&l||"0"!==o)||h)&&(m||p&&1===c||!p&&d||!p&&!d&&"1"!==u)}},{key:"boolItem",value:function(e){var t=this;return e.list.some(function(e){return t.boolWare(e)})}},{key:"handleCheckedAll",value:function(e){this.tableData=this.tableData.map(function(t){return t.list=t.list.map(function(t){return t.checked=e,t}),t.checkAll=e,t.indeterminate=!1,t}),this.setTabelToSelected()}},{key:"handleSelected",value:function(e,t,a,n,i){this.tableData=this.tableData.map(function(a){if(a.fba===i.fba){a.list=a.list.map(function(a){return a.code===t.code&&(a.checked=e),a});var n=a.list.length,r=a.list.filter(function(e){return e.checked}).length;a.indeterminate=r>0&&r<n,a.checkAll=r>0&&r===n}return a}),this.checkedAll=this.tableData.every(function(e){return e.checkAll}),this.setTabelToSelected()}},{key:"handleSelectAll",value:function(e,t,a){this.tableData=this.tableData.map(function(a){if(a.fba===t.fba){a.list=a.list.map(function(a){return t.list.find(function(e){return e.code===a.code})&&(a.checked=e),a});var n=a.list.length,i=a.list.filter(function(e){return e.checked}).length;a.indeterminate=i>0&&i<n,a.checkAll=i>0&&i===n}return a}),this.checkedAll=this.tableData.every(function(e){return e.checkAll}),this.setTabelToSelected()}},{key:"setTableSection",value:function(){var e=this;this.checkedAll=!1,this.tableData=this.tableData.map(function(t){var a=e.selectedData.find(function(e){return e.fba===t.fba});if(a){t.list.map(function(e){var t=a.list.find(function(t){return t.id===e.id});return e.checked=!!t,e});var n=t.list.length,i=t.list.filter(function(e){return e.checked}).length;t.indeterminate=i>0&&i<n,t.checkAll=i>0&&i===n}return t})}},{key:"setTabelToSelected",value:function(){var e=this;this.selectedData=this.tableData.filter(function(t){return(t.checkAll||t.indeterminate)&&t.list.some(function(t){return e.boolWare(t)})}).map(function(t){var a=t.list,n=Object(r["a"])(t,["list"]);return V({},n,{list:a.filter(function(t){return t.checked&&e.boolWare(t)})})})}},{key:"toggleSelection",value:function(e,t){var a=this,n=this.$refs.tables;n.clearSelection(),e.length>0&&e.map(function(e){var n=a.$refs.tables;n.toggleRowSelection(e,t)})}},{key:"onAdd",value:function(){var e=this,t=this.$refs.searchForm.$refs.searchForm,a=this.$refs.searchForm,n=a.searchForm||{};t.validate(function(t){if(!t)return!1;if(e.wareSort.length<=0)e.$message.error("请选择装货仓库");else if(e.orderVal){e.selectLoading=!0;var a={code:e.orderVal,type:"add"};Object(g["o"])(a).then(function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(a){var i,r,s,l,c,u,d;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(i=a.data||[],r=i.filter(function(e){return"1"===(e.seller||{}).type}),!(r.length<=0)){t.next=8;break}return e.$message.error("暂无该订单信息"),e.selectLoading=!1,t.abrupt("return");case 8:if(!r.some(function(e){return 1===e.ifLoading})){t.next=14;break}return e.$message.error("订单存在已分单，请重新添加"),e.selectLoading=!1,t.abrupt("return");case 14:if(!r.some(function(e){return!e.enabled})){t.next=20;break}return e.$message.error("订单已取消，无法添加"),e.selectLoading=!1,t.abrupt("return");case 20:if(!r.some(function(e){return e.transChannel.subtypeId!==n.transport})){t.next=26;break}return e.$message.error("该订单信息与运输类型不一致"),e.selectLoading=!1,t.abrupt("return");case 26:if(r.some(function(e){return((e.transChannel||{}).targets||[]).map(function(e){return e.countryId}).includes(n.targetCountry)})){t.next=32;break}return e.$message.error("该订单信息与目的国不一致"),e.selectLoading=!1,t.abrupt("return");case 32:if(r.some(function(t){return e.wareSort.some(function(e){return e.id===(t.warehouse1||{}).id})})){t.next=38;break}return e.$message.error("该订单信息与装货仓库不一致"),e.selectLoading=!1,t.abrupt("return");case 38:if(!r.some(function(e){return 2!==e.ifConfirm&&2===e.ifLoading})){t.next=44;break}return e.$message.error("返仓出库待确认"),e.selectLoading=!1,t.abrupt("return");case 44:if(!r.some(function(e){return"1"!==e.audit&&"7"!==e.status.MEASURE&&"10"!==e.status.EXAMINE})){t.next=50;break}return e.$message.error("该订单必须验货完成、计量完成、审核通过"),e.selectLoading=!1,t.abrupt("return");case 50:if(!r.some(function(e){return e.ifFrozen})){t.next=56;break}return e.$message.error("该订单已冻结"),e.selectLoading=!1,t.abrupt("return");case 56:if(!r.some(function(e){return"0"===e.deliveryWay&&!e.express.trackingNos})){t.next=60;break}return e.$message.error("该订单的快递单号未出"),e.selectLoading=!1,t.abrupt("return");case 60:if(s=r.filter(function(t){return e.boolOrder(t)}),l=e.tableData.some(function(t){return t.list&&t.list.some(function(t){return t.code===e.orderVal})}),!(s.length<=0)){t.next=66;break}return e.$message.error("该订单未付款、信用不足，需要申请出库或特批发货"),e.selectLoading=!1,t.abrupt("return");case 66:c=((r[0]||{}).fbastore||{}).code,u=(r[0]||{}).addressType,d=s.map(function(e){return V({},e,{checked:!0})}),l?e.tableData=e.tableData.map(function(t){t.list.map(function(t){return t.code===e.orderVal&&(t.checked=!0),t});var a=t.list.length,n=t.list.filter(function(e){return e.checked}).length;return t.indeterminate=n>0&&n<a,t.checkAll=n>0&&n===a,t}):"1"===u&&e.tableData.some(function(e){return"xxxx"===e.fba})?e.tableData.map(function(e){if("xxxx"===e.fba){var t;(t=e.list).push.apply(t,Object(o["a"])(d));var a=e.list.length,n=e.list.filter(function(e){return e.checked}).length;e.indeterminate=n>0&&n<a,e.checkAll=n>0&&n===a}}):"1"!==u&&e.tableData.some(function(e){return e.fba===c})?e.tableData.map(function(e){if(e.fba===c){var t;(t=e.list).push.apply(t,Object(o["a"])(d));var a=e.list.length,n=e.list.filter(function(e){return e.checked}).length;e.indeterminate=n>0&&n<a,e.checkAll=n>0&&n===a}}):"1"===u?e.tableData.push({fba:"xxxx",checkAll:!0,indeterminate:!1,list:d}):"1"!==u&&e.tableData.push({fba:c,checkAll:!0,indeterminate:!1,list:d}),e.setTabelToSelected(),e.$message.success("添加订单成功"),e.orderVal="",e.selectLoading=!1;case 74:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return e.selectLoading=!1,t})}else e.$message.error("请输入原单号")})}},{key:"onSelected",value:function(e){this.selectVal=e}},{key:"deleteRow",value:function(e,t){this.tableData.map(function(a){if(a.fba===e){a.list.map(function(e){e.id===t&&(e.checked=!1)});var n=a.list.length,i=a.list.filter(function(e){return e.checked}).length;a.indeterminate=i>0&&i<n,a.checkAll=i>0&&i===n}}),this.checkedAll=!1,this.setTabelToSelected()}},{key:"handleSubmit",value:function(e){var t=this.$refs.noticeItem,a=this.singleId;t.handleSave(e,a)}},{key:"queryAll",value:function(e){var t=this,a=this.$refs.searchForm.$refs.searchForm,n=this.$refs.searchForm;a.validate(function(a){if(!a)return!1;var i=n.searchForm||{},s=(i.time,Object(r["a"])(i,["time"]));t.searchModel=JSON.parse(JSON.stringify(s)),t.getTableData(e)})}},{key:"getTableData",value:function(e){var t=this;this.$emit("setload",!0),e&&(this.page=e);var a=this.searchModel,n=(a.lscGroupIds,Object(r["a"])(a,["lscGroupIds"])),i=V({},n);Object(g["R"])(i).then(function(e){t.$emit("setload",!1);var a=e.data||[];t.tableData=t.setReduceCodeAndChecked(a,!1),t.setTableSection()}).catch(function(e){return t.$emit("setload",!1),e})}},{key:"setReduceCodeAndChecked",value:function(e,t){var a=this,n=e.filter(function(e){return a.boolOrder(e)}),i=n.filter(function(e){return"1"===e.addressType}),r=n.filter(function(e){return"1"!==e.addressType}),s=function(e,t){return e.reduce(function(e,a){var n=a.fbastore[t];return e[n]||(e[n]=[]),e[n].push(a),e},{})},o=s(r,"code");i.length>0&&(o.xxxx=i);var l=Object.keys(o).map(function(e){if(e){var a=(o[e]||[]).map(function(e){return V({},e,{checked:t})});return{fba:e,checkAll:t,indeterminate:t,list:a}}});return l}},{key:"handleWarehouse",value:function(){this.dialogShow=!0,this.wareSelected=JSON.parse(JSON.stringify(this.wareSort)),this.wareOption=this.wareSelected.map(function(e){return e.id}),this.getwarehouseList()}},{key:"getwarehouseList",value:function(){var e=this;this.dialogLoading=!0;var t={custId:"0",countryId:"CN"};Object(g["W"])({model:t,page:1,size:9999}).then(function(t){var a=t.data||{};e.warehouseList=a.result||[],e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"onWarehouse",value:function(){var e=this;this.wareSelected=[],this.wareOption.map(function(t){var a=e.warehouseList.find(function(e){return e.id===t});a&&e.wareSelected.push(a)}),this.setSort()}},{key:"setSort",value:function(){var e=this;this.wareSelected.length>0&&this.$nextTick(function(){var t=document.querySelector(".ware-sort"),a=e;P.a.create(t,{handle:".drag-btn",animation:300,onEnd:function(e){var t=e.newIndex,n=e.oldIndex,i=a.wareSelected.splice(n,1)[0];a.wareSelected.splice(t,0,i)}})})}},{key:"deleteWare",value:function(e,t){this.wareSelected.splice(t,1),this.wareOption=this.wareOption.filter(function(t){return t!==e.id})}},{key:"cancel",value:function(){this.wareSelected=[],this.wareOption=[],this.dialogShow=!1}},{key:"confirm",value:function(){this.dialogShow=!1,this.wareSort=JSON.parse(JSON.stringify(this.wareSelected)),this.selectedData=[],this.tableData.map(function(e){e.list.map(function(e){e.checked=!1}),e.indeterminate=!1,e.checkAll=!1}),this.checkedAll=!1,this.cancel()}},{key:"changeTrans",value:function(){this.selectedData=[],this.tableData=[]}},{key:"handleSearch",value:function(){this.selectedData=[],this.queryAll(1)}},{key:"handleReset",value:function(){var e=this.$refs.searchForm;e.reset()}},{key:"handleCollapse",value:function(){this.collapseShow=!this.collapseShow;var e=this.$refs.searchForm;e.setCollapse(this.collapseShow)}},{key:"warehouseData",get:function(){var e=this.searchName,t=this.warehouseList;return e?t.filter(function(t){var a=t||{},n=a.name,i={name:n};return Object.keys(i).some(function(a){return String(t[a]).indexOf(e)>-1})}):t}},{key:"queryList",get:function(){var e=this;return this.tableData.reduce(function(t,a){var n=(a.list||[]).filter(function(t){return-1!==t.code.toUpperCase().indexOf(e.orderCode.trim().toUpperCase())});if(n.length){var i=V({},a);i.list=n,t.push(i)}return t},[])}},{key:"querySelectList",get:function(){var e=this;return this.selectedData.reduce(function(t,a){var n=(a.list||[]).filter(function(t){return-1!==t.code.toUpperCase().indexOf(e.orderCode.trim().toUpperCase())});if(n.length){var i=V({},a);i.list=n,t.push(i)}return t},[])}}]),t}(f["e"]);z=m["a"]([Object(f["a"])({name:"",components:{searchForm:D},props:{statusList:{type:Array,default:function(){return[]}},singleId:{type:String,default:""},isStr:{type:String,default:""}}})],z);var R=z,E=R,B=(a("6f4d"),Object(I["a"])(E,x,w,!1,null,"7f04ed3a",null)),A=B.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","align-content":"center",margin:"20px 0"}},[a("div",{staticStyle:{flex:"3",overflow:"hidden","margin-right":"10px"}},[a("div",{staticClass:"plan-form"},[a("el-button",{staticStyle:{padding:"10px 0"},attrs:{disabled:!!e.isStr,type:"text"},on:{click:e.handlePlan}},[e._v("\n          发货计划\n          "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("div",{staticStyle:{"font-size":"12px"}},[a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("业务类型：")]),e._v("\n            "+e._s(e.filterType(e.planForm.type))+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("服务类型：")]),e._v("\n            "+e._s(e.filterTrans(e.planForm.type,e.planForm.transType))+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("订舱服务：")]),e._v("\n            "+e._s(e.planForm.bscName)+"\n          ")]),a("span",{staticClass:"form-span"},["0"===e.planForm.type?a("span",{staticClass:"word-span"},[e._v("航空板：")]):e._e(),"1"===e.planForm.type?a("span",{staticClass:"word-span"},[e._v("柜型：")]):e._e(),"2"===e.planForm.type?a("span",{staticClass:"word-span"},[e._v("柜型：")]):e._e(),"4"===e.planForm.type?a("span",{staticClass:"word-span"},[e._v("车型：")]):e._e(),e._v("\n            "+e._s(e.planForm.containerName)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("服务机构：")]),e._v("\n            "+e._s(e.planForm.serviceName)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("服务编码：")]),e._v("\n            "+e._s(e.planForm.serviceCode)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("目的仓代码：")]),e._v("\n            "+e._s((e.planForm.fbastore||{}).value)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("起运港：")]),e._v("\n            "+e._s((e.planForm.originPort||{}).value)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("目的港：")]),e._v("\n            "+e._s((e.planForm.targetPort||{}).value)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("起运国：")]),e._v("\n            "+e._s((e.planForm.originCountry||{}).value)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("目的国：")]),e._v("\n            "+e._s((e.planForm.targetCountry||{}).value)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("派件方式：")]),e._v("\n            "+e._s(e.filterDispatch(e.planForm.dispatch))+"\n          ")]),"1"===e.isType||"2"===e.isType?a("span",[a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("SO号：")]),e._v("\n              "+e._s(e.planForm.soCode)+"\n            ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("柜号：")]),a("span",[e._v(e._s(e.planForm.containerNo))]),"v"!==e.isStr||e.planForm.containerNo?e._e():a("span",[e._v("未填写")]),"e"!==e.isStr||e.containNoShow?e._e():a("span",{staticStyle:{color:"#2291E6",cursor:"pointer","padding-left":"20px"},on:{click:e.editNo}},[e._v("\n                "+e._s(e.planForm.containerNo?"编辑":"填写")+"\n              ")]),"e"===e.isStr&&e.containNoShow?a("div",[a("el-input",{attrs:{size:"mini",placeholder:"请输入",clearable:""},model:{value:e.containerNo,callback:function(t){e.containerNo=t},expression:"containerNo"}}),a("div",{staticStyle:{"text-align":"right",padding:"10px 0 0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveNo}},[e._v("\n                    保存\n                  ")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.cancelNo}},[e._v("\n                    取消\n                  ")])],1)],1):e._e()]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("截关日期：")]),e._v("\n              "+e._s(e.planForm.customsTime)+"\n            ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("截VGM日期：")]),e._v("\n              "+e._s(e.planForm.vgmTime)+"\n            ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("ETA：")]),e._v("\n              "+e._s(e.planForm.eta)+"\n            ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("ETD：")]),e._v("\n              "+e._s(e.planForm.etd)+"\n            ")])]):e._e(),"0"===e.isType?a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("提单号：")]),e._v("\n            "+e._s(e.planForm.billNo)+"\n          ")]):e._e(),"0"===e.isType?a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("航空单号：")]),e._v("\n            "+e._s(e.planForm.airNo)+"\n          ")]):e._e(),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("运输时间：")]),e._v("\n            "+e._s(e.planForm.transitTime)+"天\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("起运日期：")]),e._v("\n            "+e._s(e.planForm.shippingDate)+"\n          ")]),a("span",{staticClass:"form-span"},[a("span",{staticClass:"word-span"},[e._v("截单日期：")]),e._v("\n            "+e._s(e.planForm.cutoffDate)+"\n          ")])])],1)]),a("div",{staticStyle:{flex:"1",border:"1px solid #dfe6ec","border-radius":"5px",padding:"25px 20px"}},e._l(e.accountData,function(t,n){return a("div",{key:n,staticClass:"box-account"},[a("div",{staticClass:"box-word"},[e._v("\n          "+e._s(t.name)+"\n        ")]),a("div",{staticClass:"box-num"},[e._v("\n          "+e._s(t.value)+"\n        ")])])}),0),a("div",{staticStyle:{border:"1px solid #dfe6ec","border-radius":"5px",width:"410px","margin-left":"10px"}},[a("div",{staticStyle:{padding:"10px","font-weight":"bold","border-bottom":"1px solid #dfe6ec"}},[e._v("\n        成本占比\n      ")]),a("ve-ring",{attrs:{data:e.ringData,extend:e.ringExtend,settings:e.ringSet,height:"220px"}})],1)]),a("el-row",[a("el-col",{attrs:{span:12}},[a("span",{staticClass:"word-span",staticStyle:{"padding-left":"10px"}},[e._v("总票数：")]),e._v("\n      "+e._s(e.dynamicNums)+"\n      "),a("span",{staticClass:"word-span",staticStyle:{padding:"0 20px"}},[e._v("|")]),a("span",{staticClass:"word-span"},[e._v("总体积：")]),e._v("\n      "+e._s(e.dynamicVolume)+" CBM \n      "),a("span",{staticClass:"word-span",staticStyle:{padding:"0 20px"}},[e._v("  |  ")]),a("span",{staticClass:"word-span"},[e._v("总重量：")]),e._v("\n      "+e._s(e.dynamicWeight)+" KGS \n      "),a("span",{staticClass:"word-span",staticStyle:{padding:"0 20px"}},[e._v("  |  ")]),a("span",{staticClass:"word-span"},[e._v("总件数：")]),e._v("\n      "+e._s(e.dynamicPackages)+"\n    ")]),a("el-col",{attrs:{span:12}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticStyle:{"text-align":"right"}},[a("el-radio-group",{attrs:{disabled:!e.planForm.planId},on:{change:e.onSort},model:{value:e.sortVal,callback:function(t){e.sortVal=t},expression:"sortVal"}},[a("el-radio",{attrs:{label:"1"}},[e._v("\n            相同海关编码优先\n          ")]),a("el-radio",{attrs:{label:"2"}},[e._v("\n            单一目的仓优先\n          ")]),a("el-radio",{attrs:{label:"3"}},[e._v("\n            严格先进先出\n          ")])],1)],1)])],1),a("div",{staticStyle:{width:"400px",padding:"10px 0 0 10px"}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("装货仓库：")]),a("span",[e._v(e._s(e.warehouseInfo.map(function(e){return e.name}).join(",")))])]),a("div",{staticStyle:{padding:"10px 0 0 10px",display:"flex","flex-flow":"row nowrap"}},[e._m(0),a("div",{staticStyle:{flex:"1"}},["v"!==e.isStr?a("el-input",{attrs:{type:"textarea",size:"small",placeholder:"请输入",autosize:{minRows:2,maxRows:4},clearable:""},model:{value:e.planForm.remark,callback:function(t){e.$set(e.planForm,"remark",t)},expression:"planForm.remark"}}):a("span",[e._v(e._s(e.planForm.remark))])],1)]),a("el-row",{staticStyle:{padding:"10px"}},[a("el-col",{attrs:{span:10}},[a("span",{staticStyle:{"padding-right":"10px"}},[a("span",{staticStyle:{"font-size":"18px","font-weight":"bold","line-height":"32px"}},[e._v("订单筛选")])]),a("el-radio-group",{on:{change:e.onSelected},model:{value:e.selectWord,callback:function(t){e.selectWord=t},expression:"selectWord"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("\n          全部\n        ")]),a("el-radio-button",{attrs:{label:"fba"}},[e._v("\n          已选择\n        ")])],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[a("span",{directives:[{name:"show",rawName:"v-show",value:"e"===e.isStr&&"fba"===e.selectWord,expression:"isStr === 'e' && selectWord === 'fba'"}]},[a("span",{staticClass:"handle-add"},[e._v("\n          手动添加订单\n        ")]),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{placeholder:"请输入",size:"small",clearable:""},model:{value:e.orderSubVal,callback:function(t){e.orderSubVal=t},expression:"orderSubVal"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.orderNo,callback:function(t){e.orderNo=t},expression:"orderNo"}},[a("el-option",{attrs:{label:"原单号",value:"1"}}),a("el-option",{attrs:{label:"调拨单号",value:"2"}}),a("el-option",{attrs:{label:"出库单号",value:"3"}})],1)],1),a("el-button",{attrs:{type:"primary",size:"small",loading:e.selectLoading},on:{click:e.onSubAdd}},[e._v("\n          添加\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSave}},[e._v("\n          保存订单\n        ")])],1),e.isStr||"fba"!==e.selectWord?e._e():a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleCommandInvoice}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n          导出\n          "),a("i",{staticClass:"el-icon-arrow-down"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"2"}},[e._v("\n            目的港箱单发票\n          ")]),a("el-dropdown-item",{attrs:{command:"3"}},[e._v("\n            起运港箱单发票\n          ")])],1)],1),a("span",{directives:[{name:"show",rawName:"v-show",value:"all"===e.selectWord,expression:"selectWord === 'all'"}]},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"原单号",clearable:"",size:"small"},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}})],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"fba"===e.selectWord,expression:"selectWord === 'fba'"}],staticStyle:{padding:"20px 0"}},[a("el-collapse",{attrs:{accordion:""}},e._l(e.orderData,function(t,n){return a("el-collapse-item",{key:n,staticClass:"collapse-position"},[a("template",{slot:"title"},[a("el-row",{staticStyle:{"background-color":"#ededed"}},[a("el-col",{attrs:{span:24}},[a("span",{staticStyle:{"padding-left":"30px"}},[e._v("\n                "+e._s("xxxx"===t.fba?"私人地址      ":"FBA仓库 ["+t.fba+"]")+"\n              ")]),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("\n                总票数："+e._s(t.list.length)+"  \n                总体积："+e._s(e.fbaVolWeiFormat(t.list,"CBM"))+" CBM \n                总重量："+e._s(e.fbaVolWeiFormat(t.list,"KGS"))+" KGS \n                总件数："+e._s(e.fbaPkgFormat(t.list))+"\n              ")])])],1)],1),e._l(t.list,function(i,r){return a("div",{key:r,staticClass:"flex-row-list"},["e"===e.isStr?a("div",{staticStyle:{width:"75px",padding:"15px 5px 0 0"}},[i.ifNew?a("span",{staticClass:"btn-tip-red"},[e._v("\n              新增\n            ")]):i.ifCancel?a("span",{staticClass:"btn-tip-red"},[e._v("\n              已取消发货\n            ")]):e._e()]):e._e(),a("div",{staticStyle:{flex:"1"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap"}},[a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  原单号：\n                ")]),a("div",{staticClass:"text-info",attrs:{title:i.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:i.code,expression:"row.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(i.code))])]),a("div",[i.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    特批发货\n                  ")]):e._e(),i.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),i.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==i.payMethod&&e.formatPay(i)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(i.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===i.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(i.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),i.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e()])]),a("div",{staticStyle:{width:"170px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  到仓时间：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.unloadingTime||"--")+"\n                ")])]),a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  目的城市：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.consignee||{}).city||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  服务：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.lsc||{}).value||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  下单仓库：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.warehouse||{}).name||"--")+"\n                ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  货物所在仓：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((i.warehouse1||{}).name||"--")+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"vol","CBM"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"wei","KGS"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  装载体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.$volumeConversion(i.loadVolume,"CBCM","CBM",3))+" CBM\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  装载重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.$volumeConversion(i.loadWeight,"KGS","KGS",3))+" KGS\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大尺寸：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxSizeFormat(i))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大重量：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"maxWei","KGS"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  最大体积：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(e.maxVolWeiFormat(i,"maxVol","CBM"))+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  总件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.packages)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  装载件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.loadTotal)+"\n                ")])]),2===i.ifLoading?a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px",color:"red"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  剩余件数：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s(i.loadingCount)+"\n                ")])]):e._e(),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  计量状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===i.status["MEASURE"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  验货状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===i.status["EXAMINE"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  报关状态：\n                ")]),a("div",{staticClass:"text-info"},[e._v("\n                  "+e._s((e.statusList.find(function(e){return e.id===i.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                  快递单号：\n                ")]),a("div",{staticClass:"text-info"},["0"===i.deliveryWay?a("div",[i.express&&i.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[e._l(i.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                        "+e._s(t)+"\n                      ")])}),a("span",{staticStyle:{color:"#2291E6",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v("\n                        已出\n                      ")])],2):a("span",[e._v("\n                      未出\n                    ")])],1):a("div",[e._v("\n                    --\n                  ")])])])])]),"v"!==e.isStr?a("div",{staticStyle:{width:"90px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isStr||i.ifNew,expression:"!isStr || row.ifNew"}],attrs:{type:"text",size:"medium"},on:{click:function(t){return e.deleteRightRow(i,r,n)}}},[e._v("\n              删除\n            ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"e"===e.isStr&&!i.ifNew&&!i.ifCancel,expression:"isStr === 'e' && !row.ifNew && !row.ifCancel"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.cancelRightRow(i.id,t.fba)}}},[e._v("\n              取消发货\n            ")])],1):e._e()])})],2)}),1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:"all"===e.selectWord,expression:"selectWord === 'all'"}],staticStyle:{padding:"20px 0"}},e._l(e.resultData,function(t,n){return a("div",{key:n,staticClass:"flex-row-list"},["e"===e.isStr?a("div",{staticStyle:{width:"75px",padding:"15px 5px 0 0"}},[t.ifNew?a("span",{staticClass:"btn-tip-red"},[e._v("\n          新增\n        ")]):t.ifCancel?a("span",{staticClass:"btn-tip-red"},[e._v("\n          已取消发货\n        ")]):e._e()]):e._e(),a("div",{staticStyle:{flex:"1"}},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap"}},[a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              原单号：\n            ")]),a("div",{staticClass:"text-info",attrs:{title:t.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.code,expression:"row.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(t.code))])]),a("div",[t.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                特批发货\n              ")]):e._e(),t.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                冻结\n              ")]):e._e(),t.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                锁舱\n              ")]):e._e(),"1"!==t.payMethod&&e.formatPay(t)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                "+e._s(t.ifPayment?"逾期已付款":"逾期未付款")+"\n              ")]):e._e(),"1"===t.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                "+e._s(t.ifPayment?"已付款":"未付款")+"\n              ")]):e._e(),t.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n                信用不足\n              ")]):e._e()])]),a("div",{staticStyle:{width:"170px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              到仓时间：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(t.unloadingTime||"--")+"\n            ")])]),a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              目的城市：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((t.consignee||{}).city||"--")+"\n            ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              服务：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((t.lsc||{}).value||"--")+"\n            ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              下单仓库：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((t.warehouse||{}).name||"--")+"\n            ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              货物所在仓：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((t.warehouse1||{}).name||"--")+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              总体积：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.maxVolWeiFormat(t,"vol","CBM"))+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              总重量：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.maxVolWeiFormat(t,"wei","KGS"))+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              装载体积：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.$volumeConversion(t.loadVolume,"CBCM","CBM",3))+" CBM\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              装载重量：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.$volumeConversion(t.loadWeight,"KGS","KGS",3))+" KGS\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              最大尺寸：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.maxSizeFormat(t))+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              最大重量：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.maxVolWeiFormat(t,"maxWei","KGS"))+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              最大体积：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(e.maxVolWeiFormat(t,"maxVol","CBM"))+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              总件数：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(t.packages)+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              装载件数：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(t.loadTotal)+"\n            ")])]),2===t.ifLoading?a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px",color:"red"}},[a("div",{staticClass:"text-tip"},[e._v("\n              剩余件数：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s(t.loadingCount)+"\n            ")])]):e._e(),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              计量状态：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.status["MEASURE"]})||{name:"--"}).name)+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              验货状态：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.status["EXAMINE"]})||{name:"--"}).name)+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              报关状态：\n            ")]),a("div",{staticClass:"text-info"},[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n            ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n              快递单号：\n            ")]),a("div",{staticClass:"text-info"},["0"===t.deliveryWay?a("div",[t.express&&t.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[e._l(t.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                    "+e._s(t)+"\n                  ")])}),a("span",{staticStyle:{color:"#2291E6",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v("\n                    已出\n                  ")])],2):a("span",[e._v("\n                  未出\n                ")])],1):a("div",[e._v("\n                --\n              ")])])])])]),"v"!==e.isStr?a("div",{staticStyle:{width:"90px"}},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isStr||t.ifNew,expression:"!isStr || row.ifNew"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteLeftRow(t,n)}}},[e._v("\n          删除\n        ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"e"===e.isStr&&!t.ifNew&&!t.ifCancel,expression:"isStr === 'e' && !row.ifNew && !row.ifCancel"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.cancelLeftRow(t.id)}}},[e._v("\n          取消发货\n        ")])],1):e._e()])}),0),a("el-dialog",{attrs:{title:e.planTitle,width:"1200px",visible:e.detailShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.detailShow=t},close:function(t){e.detailShow=!1}}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-select",{staticStyle:{width:"130px"},attrs:{size:"small"},on:{change:e.onCountry},model:{value:e.startCountry,callback:function(t){e.startCountry=t},expression:"startCountry"}},[a("el-option",{attrs:{label:"中国",value:"CN"}}),a("el-option",{attrs:{label:"香港",value:"HK"}}),a("el-option",{attrs:{label:"韩国",value:"KP"}})],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"400px","row-style":{cursor:"pointer"},border:""},on:{"row-click":e.handleRowClick}},[a("el-table-column",{attrs:{"min-width":"150",label:"服务","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.planEntity||{}).bscName)+"\n        ")]}}])}),"0"===e.isType?a("el-table-column",{attrs:{width:"150",label:"提单号","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingAir||{}).billNo)+"\n        ")]}}],null,!1,3360774381)}):e._e(),"0"===e.isType?a("el-table-column",{attrs:{width:"150",label:"航空单号","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingAir||{}).airNo)+"\n        ")]}}],null,!1,3246850396)}):e._e(),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{width:"150",label:"SO号","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).soCode)+"\n        ")]}}],null,!1,2475549136)}):e._e(),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{"min-width":"120",label:"船名","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).freighter)+"\n        ")]}}],null,!1,4246116853)}):e._e(),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{width:"100",label:"航次","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).ship)+"\n        ")]}}],null,!1,397700515)}):e._e(),a("el-table-column",{attrs:{"min-width":"150",label:"服务机构","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===e.isType?a("span",[e._v("\n            "+e._s((t.row.planEntity||{}).serviceName)+"\n          ")]):e._e(),"1"===e.isType||"2"===e.isType?a("span",[e._v("\n            "+e._s((t.row.bookingSo||{}).orgName)+"\n          ")]):e._e()]}}])}),a("el-table-column",{attrs:{width:"120",label:"服务代码","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===e.isType?a("span",[e._v("\n            "+e._s((t.row.planEntity||{}).serviceId)+"\n          ")]):e._e(),"1"===e.isType||"2"===e.isType?a("span",[e._v("\n            "+e._s((t.row.orderEntity||{}).bsServiceCode)+"\n          ")]):e._e()]}}])}),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{width:"160",label:"ETA"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).eta)+"\n        ")]}}],null,!1,920797809)}):e._e(),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{width:"160",label:"ETD"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).etd)+"\n        ")]}}],null,!1,2767784468)}):e._e(),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{width:"160",label:"截单日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).sheetTime)+"\n        ")]}}],null,!1,2070258331)}):e._e(),"1"===e.isType||"2"===e.isType?a("el-table-column",{attrs:{width:"160",label:"截关日期"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.bookingSo||{}).customsTime)+"\n        ")]}}],null,!1,683035156)}):e._e()],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.planPage,"page-size":10,layout:"total, prev, pager, next",total:e.planTotal},on:{"update:currentPage":function(t){e.planPage=t},"update:current-page":function(t){e.planPage=t},"current-change":e.planCurrentChange}})],1)],1)},K=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{width:"40px"}},[a("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("备注：")])])}];function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var H=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.selectLoading=!1,e.detailShow=!1,e.containNoShow=!1,e.tableData=[],e.orderData=[],e.orderList=[],e.containerInfo={},e.warehouseInfo=[],e.soList=[],e.accountData=[{name:"总申报金额",value:0},{name:"总关税",value:0},{name:"海关编码数",value:0},{name:"派送地址",value:0}],e.ringData={},e.ringSet={},e.ringExtend={},e.page=1,e.planPage=1,e.size=10,e.total=0,e.planTotal=0,e.planTitle="",e.orderNo="1",e.containerNo="",e.searchCode="",e.startCountry="CN",e.selectWord="fba",e.planList=[],e.planForm={planId:void 0,remark:void 0,warehouseId:void 0,warehouseName:void 0},e.boxForm={volume:void 0,loadLimit:void 0,umWeight:void 0,name:void 0,quantity:void 0,umLength:void 0},e.searchObj={},e.searchModel={},e.orderSubVal="",e.sortVal="",e.bscObj={},e.isType="",e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"formatPay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";return!!i&&i&&i<n}},{key:"formatCutoffDay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";n&&N()(n).unix();return i&&i<n?Math.ceil((n-i)/86400)+"天":"--"}},{key:"filterType",value:function(e){return"0"===e?"空运":"1"===e?"海运":"2"===e?"铁路":"4"===e?"卡航":void 0}},{key:"filterDispatch",value:function(e){var t={0:"快递",1:"卡派",2:"自提",3:"整柜直送",4:"到仓"},a=("".concat(e)||"").split(","),n=[];return a.map(function(e){n.push(t[e])}),n.join(",")}},{key:"filterTrans",value:function(e,t){var a="";return"0"===e?a="0"===t?"包板":"1"===t?"散货":"":"1"===e||"2"===e?a="0"===t?"拼箱":"1"===t?"整柜":"":"4"===e&&(a="0"===t?"整车":"1"===t?"散货":""),a}},{key:"maxSizeFormat",value:function(e){var t=e.measure||{};return Math.max(t.maxHeight||0,t.maxLength||0,t.maxWidth||0)}},{key:"maxVolWeiFormat",value:function(e,t,a){var n=this.$getVolumeUnitByLengthUnit((e.um||{}).umLength),i=(e.um||{}).umWeight,r=(e.measure||{}).maxVolume,s=(e.measure||{}).totalVolume,o=(e.measure||{}).maxWeight,l=(e.measure||{}).totalWeight,c=0,u=this.isStr;return u&&e.byInit?(e.byInit&&"vol"===t&&(c=this.$volumeConversion(s,n,"CBM",3)),e.byInit&&"wei"===t&&(c=this.$volumeConversion(l,i,"KGS",3))):(2!==e.ifLoading&&"vol"===t&&n&&s&&(c=this.$volumeConversion(s,n,"CBM",3)),2===e.ifLoading&&"vol"===t&&(c=this.$volumeConversion(e.surplusVolume,"CBCM","CBM",3)),2!==e.ifLoading&&"wei"===t&&i&&l&&(c=this.$volumeConversion(l,i,"KGS",3)),2===e.ifLoading&&"wei"===t&&(c=this.$volumeConversion(e.surplusWeight,"KGS","KGS",3))),"maxVol"===t&&n&&r&&(c=this.$volumeConversion(r,n,"CBM",3)),"maxWei"===t&&i&&o&&(c=this.$volumeConversion(o,i,"KGS",3)),(c||"--")+" "+a}},{key:"fbaVolWeiFormat",value:function(e,t){var a=this,n=0,i=0,r=this.isStr;return e.map(function(e,t){var s=e.um||{},o=a.$getVolumeUnitByLengthUnit(s.umLength),l=e.measure||{};if(r||2!==e.ifLoading){if(l&&l.totalVolume>=0&&s&&o){var c=a.$volumeConversion(l.totalVolume,o,"CBM",3),u=String(c).length,d=c*Math.pow(10,u);n+=parseFloat((d/Math.pow(10,u)).toFixed(3))}if(l&&l.totalWeight>=0&&s&&s.umWeight){var p=a.$volumeConversion(l.totalWeight,s.umWeight,"KGS",3),h=String(p).length,m=p*Math.pow(10,h);i+=parseFloat((m/Math.pow(10,h)).toFixed(3))}}else{var f=a.$volumeConversion(e.surplusVolume,"CBCM","CBM",3),v=String(f).length,g=f*Math.pow(10,v);n+=parseFloat((g/Math.pow(10,v)).toFixed(3));var y=a.$volumeConversion(e.surplusWeight,"KGS","KGS",3),b=String(y).length,x=y*Math.pow(10,b);i+=parseFloat((x/Math.pow(10,b)).toFixed(3))}}),"CBM"===t?Math.round(1e3*n)/1e3:"KGS"===t?Math.round(1e3*i)/1e3:void 0}},{key:"fbaPkgFormat",value:function(e){var t=e.map(function(e){return e.packages});return t.reduce(function(e,t){return e+t},0)}},{key:"getOriginData",value:function(){this.ringData={columns:["a","b","c"],rows:[{a:"国内陆运运费",b:0,c:0},{a:"国内报关费",b:0,c:0},{a:"空运费",b:0,c:0},{a:"国外报关费",b:0,c:0},{a:"国外目的港杂费",b:0,c:0},{a:"派送费",b:0,c:0}]},this.ringSet={radius:["60","90"],label:{show:!1}},this.ringExtend={title:{text:"总成本",textStyle:{fontSize:14,color:"#666",fontWeight:"normal"},subtext:"￥0元",subtextStyle:{fontSize:18,color:"#333",fontWeight:"bolder"},left:"20%",top:"42%"},legend:{top:"10%",right:"20%",orient:"vertical",padding:10,itemGap:20,itemWidth:10,itemHeight:10,icon:"circle",formatter:function(e){return e}},series:{center:["25%","50%"]},color:["#3AA1FF","#F263B4","#4ECB73","#F2637B","#FF903B","#4FC8D1"]}}},{key:"setData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,a,n){var i,r,s,o,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(i=this.isStr,r=this.singleId,i){e.next=14;break}s=t||{},this.searchModel=t||{},this.warehouseInfo=n||[],this.isType=s.transport,this.searchObj={transport:s.transport,countryToId:s.targetCountry,portsToId:s.fbastoreId||[],deliveryWay:s.deliveryWay||[]},o=a||[],this.orderData=JSON.parse(JSON.stringify(o)),this.orderList=[],o.map(function(e){e.list&&e.list.map(function(e){l.orderList.push(e)})}),e.next=16;break;case 14:return e.next=16,this.viewPlan(r);case 16:this.getOriginData();case 17:case"end":return e.stop()}},e,this)}));function t(t,a,n){return e.apply(this,arguments)}return t}()},{key:"getData",value:function(){return{model:this.searchModel,data:this.orderData,warehouses:this.warehouseInfo}}},{key:"viewPlan",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n,i,s,o,l,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.$emit("setload",!0),e.next=4,Object(g["P"])({id:t});case 4:return a=e.sent,e.next=7,Object(g["C"])({fillId:t});case 7:n=e.sent,i=(n.data||[]).map(function(e){return Y({},e,{byInit:!0})}),s=a.data||{},s.containers,s.address,s.bsc,o=s.fillQueryParm,l=s.warehouses,c=s.deliveryWay,u=Object(r["a"])(s,["containers","address","bsc","fillQueryParm","warehouses","deliveryWay"]),this.searchModel=o||{},this.warehouseInfo=l||[],this.isType=(s.fillQueryParm||{}).transport,this.planForm=Y({},u,{dispatch:c,bscName:(s.bsc||{}).name,serviceName:(s.org||{}).value,serviceCode:(s.bsc||{}).serviceCode}),d=s.containers||[],d.length>0&&(this.planForm.containerId=(d[0].containerInfo||{}).containerId,this.planForm.containerName=(d[0].containerInfo||{}).containerName,this.planForm.containerNo=(d[0].containerInfo||{}).containerNo,this.planForm.customsTime=(d[0].containerInfo||{}).customsTime,this.planForm.eta=(d[0].containerInfo||{}).eta,this.planForm.etd=(d[0].containerInfo||{}).etd,this.planForm.vgmTime=(d[0].containerInfo||{}).vgmTime,this.planForm.soCode=(d[0].containerInfo||{}).SO),this.containerInfo=d[0].containerInfo,this.orderList=i,this.orderData=this.setReduceCodeAndChecked(i,!0),this.$emit("setload",!1),e.next=27;break;case 23:return e.prev=23,e.t0=e["catch"](0),this.$emit("setload",!1),e.abrupt("return",e.t0);case 27:case"end":return e.stop()}},e,this,[[0,23]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setReduceCodeAndChecked",value:function(e,t){var a=e.filter(function(e){return"1"===e.addressType}),n=e.filter(function(e){return"1"!==e.addressType}),i=function(e,t){return e.reduce(function(e,a){var n=a.fbastore[t];return e[n]||(e[n]=[]),e[n].push(a),e},{})},r=i(n,"code");a.length>0&&(r.xxxx=a);var s=Object.keys(r).map(function(e){if(e){var a=(r[e]||[]).map(function(e){return Y({},e,{checked:t})});return{fba:e,checkAll:t,indeterminate:t,list:a}}});return s}},{key:"clearPlan",value:function(){this.containerInfo={},this.boxForm={},this.bscObj={},this.soList=[],this.sortVal="",this.planTitle=""}},{key:"handlePlan",value:function(){this.detailShow=!0,"0"===this.isType?this.planTitle="选择提单号":"1"!==this.isType&&"2"!==this.isType||(this.planTitle="选择so"),this.planPage=1,this.getSoPlanList()}},{key:"handleRowClick",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n,i,s,o,l,c;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.clearPlan(),this.detailShow=!1,this.$emit("setload",!0),a=t.bookingSo||{},n=t.bookingAir||{},i=t.planEntity||{},s=t.orderEntity||{},this.planForm.planId=i.id,this.planForm.type=i.type,this.planForm.bscId=i.bscId,this.planForm.bscName=i.bscName,this.planForm.dispatch=i.dispatch,this.planForm.shippingDate=i.shipDate,this.planForm.transitTime=i.transTime,this.planForm.serviceCode=s.bsServiceCode,this.planForm.transType=s.ifWholeCabinet,this.planForm.supplyId=i.supplyId,this.planForm.fbastore={key:i.fbastoreId,value:i.fbastoreName},"1"===this.planForm.type||"2"===this.planForm.type?(this.planForm.containerId=a.containerId,this.planForm.containerName=a.containerName,this.planForm.soCode=a.soCode,this.planForm.cutoffDate=a.sheetTime,this.planForm.customsTime=a.customsTime,this.planForm.vgmTime=a.vgmTime,this.planForm.eta=a.eta,this.planForm.etd=a.etd,this.planForm.serviceName=a.orgName,this.planForm.serviceId=a.orgId,this.planForm.originPort={key:a.loadingPortId,value:a.loadingPortName},this.planForm.targetPort={key:a.unloadPortId,value:a.unloadPortName},this.planForm.originCountry={key:a.receiptCountryId,value:a.receiptCountryName},this.planForm.targetCountry={key:a.deliveryCountryId,value:a.deliveryCountryName}):"0"===this.planForm.type&&(this.planForm.airNo=n.airNo,this.planForm.billNo=n.billNo,this.planForm.containerId=i.containerId,this.planForm.containerName=i.containerName,this.planForm.cutoffDate=i.cutoffDate,this.planForm.serviceName=i.serviceName,this.planForm.serviceId=i.serviceId,this.planForm.originPort={key:s.portsFromId,value:s.portsFromName},this.planForm.targetPort={key:s.portsToId,value:s.portsToName},this.planForm.originCountry={key:s.fromCountry,value:s.fromCountryName},this.planForm.targetCountry={key:s.toCountry,value:s.toCountryName}),!String(this.planForm.bscId)){e.next=35;break}return e.prev=20,e.next=23,Object(g["m"])({id:this.planForm.bscId});case 23:return o=e.sent,l=o.data||{},l.shippingTerms,c=Object(r["a"])(l,["shippingTerms"]),this.bscObj=Y({},c),e.next=29,this.getRelateInfo(i);case 29:this.$emit("setload",!1),e.next=35;break;case 32:e.prev=32,e.t0=e["catch"](20),this.$emit("setload",!1);case 35:case"end":return e.stop()}},e,this,[[20,32]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRelateInfo",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,n,i,r,s,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("0"!==this.planForm.type){e.next=17;break}if(this.planForm.planId&&t){e.next=3;break}return e.abrupt("return");case 3:return this.boxForm.volume=t.airVolume,this.boxForm.umLength="M",this.boxForm.umVolume="CBM",this.boxForm.containerId=t.containerId,this.boxForm.containerName=t.containerName,this.boxForm.loadLimit=t.loadLimit,this.boxForm.umWeight="KGS",this.boxForm.quantity=1,e.next=13,Object(g["S"])({planId:parseInt(this.planForm.planId,0),type:"1"});case 13:a=e.sent,this.soList=a.data||[],e.next=36;break;case 17:if("1"!==this.planForm.type&&"2"!==this.planForm.type){e.next=35;break}return n={page:1,size:9999},e.next=21,Object(g["n"])(n);case 21:i=e.sent,r=(i.data||{}).result||[],s=r.find(function(e){return o.planForm.containerId==="".concat(e.id)||o.planForm.containerId===e.id}),this.boxForm.volume=s.volume,this.boxForm.umLength=s.umLength,this.boxForm.umVolume=s.umVolume,this.boxForm.containerId=s.id,this.boxForm.containerName=s.name,this.boxForm.loadLimit=s.loadLimit,this.boxForm.umWeight=s.umWeight,this.boxForm.quantity=1,this.soList=[this.planForm.soCode],e.next=36;break;case 35:this.planForm.type;case 36:this.setTable();case 37:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setTable",value:function(){this.boxForm.quantity>0&&this.soList.length>0?this.containerInfo={SO:this.soList[0],containerId:this.boxForm.containerId,containerName:this.boxForm.containerName,customsTime:this.planForm.customsTime,eta:this.planForm.eta,etd:this.planForm.etd,vgmTime:this.planForm.vgmTime,volume:0,weight:0,maxVolume:this.boxForm.volume,maxWeight:this.boxForm.loadLimit,umLength:this.boxForm.umLength,umWeight:this.boxForm.umWeight,umVolume:this.boxForm.umVolume}:this.containerInfo={}}},{key:"getSoPlanList",value:function(){var e=this;this.selectLoading=!0;var t={page:this.planPage,size:10,model:{type:this.searchObj.transport,endCountry:this.searchObj.countryToId,startCountry:this.startCountry,fbaId:this.searchObj.portsToId,dispatch:this.searchObj.deliveryWay}};Object(g["t"])(t).then(function(t){var a=t.data||{};e.tableData=a.result||[],e.planTotal=a.total,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"planCurrentChange",value:function(e){this.planPage=Number(e),this.getSoPlanList()}},{key:"onCountry",value:function(){this.tableData=[],this.getSoPlanList()}},{key:"onSort",value:function(){}},{key:"onSelected",value:function(e){this.selectWord=e,this.searchCode=""}},{key:"editNo",value:function(){this.containNoShow=!0,this.containerNo=this.planForm.containerNo||""}},{key:"saveNo",value:function(){var e=this,t=this.singleId,a={containerNo:this.containerNo,id:t,so:this.planForm.soCode};Object(g["cb"])(a).then(function(){var a=Object(s["a"])(regeneratorRuntime.mark(function a(n){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return e.$message({type:"success",message:"保存成功"}),e.cancelNo(),a.next=4,e.viewPlan(t);case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()).catch(function(e){return e})}},{key:"cancelNo",value:function(){this.containNoShow=!1,this.containerNo=""}},{key:"boolOrder",value:function(e){var t=Y({},e,{fullorderInsufficient:e.fullorderInsufficient||{},express:e.express||{}}),a=t.audit,n=t.status,i=n.MEASURE,r=n.EXAMINE,s=t.deliveryWay,o=t.express.trackingNos,l=t.fullorderInsufficient.insufficientStatus,c=t.payMethod,u=t.ifPayment,d=t.insufficient,p=t.ifFrozen,h=t.beShip;N()().unix(),e.cutoffTime&&N()(e.cutoffTime).unix();return!((2!==e.ifLoading||2!==e.ifConfirm)&&0!==e.ifLoading||"1"!==a||"7"!==i||"10"!==r||!("0"===s&&o||"0"!==s)||p)&&(h||d&&1===l||!d&&u||!d&&!u&&"1"!==c)}},{key:"onSubAdd",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n,i,r,s,l,c,u,d,p,h=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.orderSubVal){e.next=2;break}return e.abrupt("return");case 2:if(e.prev=2,this.selectLoading=!0,t=[],"1"!==this.orderNo){e.next=13;break}return a={code:this.orderSubVal,type:"add",containerNo:this.planForm.containerNo||void 0},e.next=9,Object(g["o"])(a);case 9:n=e.sent,t=n.data||[],e.next=18;break;case 13:return i={taskId:this.orderSubVal,countryId:this.searchModel.targetCountry,fillId:this.singleId,type:this.searchModel.transport},e.next=16,Object(g["B"])(i);case 16:r=e.sent,t=r.data||[];case 18:if(s=t.filter(function(e){return e&&"1"===(e.seller||{}).type}),l=this.orderData.some(function(e){return e.list&&e.list.some(function(e){return e.code===h.orderSubVal})}),!(s.length<=0)){e.next=26;break}return this.$message.error("暂无该订单信息"),this.selectLoading=!1,e.abrupt("return");case 26:if(!s.some(function(e){return 1===e.ifLoading})){e.next=32;break}return this.$message.error("订单存在已分单，请重新添加"),this.selectLoading=!1,e.abrupt("return");case 32:if(!s.some(function(e){return!e.enabled})){e.next=38;break}return this.$message.error("订单已取消，无法添加"),this.selectLoading=!1,e.abrupt("return");case 38:if(!s.some(function(e){return e.transChannel.subtypeId!==h.searchModel.transport})){e.next=44;break}return this.$message.error("该订单信息与业务类型不一致"),this.selectLoading=!1,e.abrupt("return");case 44:if(s.some(function(e){return((e.transChannel||{}).targets||[]).map(function(e){return e.countryId}).includes(h.searchModel.targetCountry)})){e.next=50;break}return this.$message.error("该订单信息与目的国不一致"),this.selectLoading=!1,e.abrupt("return");case 50:if(s.some(function(e){return h.warehouseInfo.some(function(t){return t.id===(e.warehouse1||{}).id})})){e.next=56;break}return this.$message.error("该订单信息与装货仓库不一致"),this.selectLoading=!1,e.abrupt("return");case 56:if(!l){e.next=62;break}return this.$message.error("订单已存在"),this.selectLoading=!1,e.abrupt("return");case 62:if(!s.some(function(e){return 2!==e.ifConfirm&&2===e.ifLoading})){e.next=68;break}return this.$message.error("返仓出库待确认"),this.selectLoading=!1,e.abrupt("return");case 68:if(!s.some(function(e){return"1"!==e.audit&&"7"!==e.status.MEASURE&&"10"!==e.status.EXAMINE})){e.next=74;break}return this.$message.error("该订单必须验货完成、计量完成、审核通过"),this.selectLoading=!1,e.abrupt("return");case 74:if(!s.some(function(e){return e.ifFrozen})){e.next=80;break}return this.$message.error("该订单已冻结"),this.selectLoading=!1,e.abrupt("return");case 80:if(!s.some(function(e){return"0"===e.deliveryWay&&!e.express.trackingNos})){e.next=84;break}return this.$message.error("该订单的快递单号未出"),this.selectLoading=!1,e.abrupt("return");case 84:if(c=s.filter(function(e){return h.boolOrder(e)}),!(c.length<=0)){e.next=89;break}return this.$message.error("该订单未付款、信用不足，需要申请出库或特批发货"),this.selectLoading=!1,e.abrupt("return");case 89:u=((s[0]||{}).fbastore||{}).code,d=(s[0]||{}).addressType,p=c.map(function(e){return Y({},e,{ifNew:!0})}),this.orderList=[].concat(Object(o["a"])(this.orderList),Object(o["a"])(p)),"1"===d&&this.orderData.some(function(e){return"xxxx"===e.fba})?this.orderData.map(function(e){var t;"xxxx"===e.fba&&(t=e.list).push.apply(t,Object(o["a"])(p))}):"1"!==d&&this.orderData.some(function(e){return e.fba===u})?this.orderData.map(function(e){var t;e.fba===u&&(t=e.list).push.apply(t,Object(o["a"])(p))}):"1"===d?this.orderData.push({fba:"xxxx",list:p}):"1"!==d&&this.orderData.push({fba:u,list:p}),this.$message.success("添加订单成功"),this.orderSubVal="",this.selectLoading=!1,e.next=103;break;case 99:return e.prev=99,e.t0=e["catch"](2),this.selectLoading=!1,e.abrupt("return",e.t0);case 103:case"end":return e.stop()}},e,this,[[2,99]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteLeftRow",value:function(e,t){this.orderList=this.orderList.filter(function(t){return t.id!==e.id}),this.orderData=this.orderData.map(function(t){return t.list=t.list.filter(function(t){return t.id!==e.id}),t}),this.orderData=this.orderData.filter(function(e){return e&&e.list.length>0})}},{key:"cancelLeftRow",value:function(e){var t=this;this.$emit("setload",!0),Object(g["bb"])({fillId:this.singleId,orderId:e}).then(function(a){t.$emit("setload",!1),a.data?(t.orderList=t.orderList.map(function(t){return t.id===e&&(t.ifCancel=!0),t}),t.orderData=t.orderData.map(function(t){return t.list=t.list.map(function(t){return t.id===e&&(t.ifCancel=!0),t}),t})):t.$confirm("该订单已被仓库扫描装载，仓库取消装载后才能取消发货。","提示",{confirmButtonText:"确认",closeOnClickModal:!1,showCancelButton:!1}).then(function(){return!1}).catch(function(){return!1})}).catch(function(){t.$emit("setload",!1)})}},{key:"deleteRightRow",value:function(e,t,a){this.orderData[a].list.splice(t,1),this.orderData=this.orderData.filter(function(e){return e&&e.list.length>0}),this.orderList=this.orderList.filter(function(t){return t.id!==e.id})}},{key:"cancelRightRow",value:function(e,t){var a=this;this.$emit("setload",!0),Object(g["bb"])({fillId:this.singleId,orderId:e}).then(function(n){a.$emit("setload",!1),n.data?(a.orderData=a.orderData.map(function(a){return a.fba===t&&(a.list=a.list.map(function(t){return t.id===e&&(t.ifCancel=!0),t})),a}),a.orderList=a.orderList.map(function(t){return t.id===e&&(t.ifCancel=!0),t})):a.$confirm("该订单已被仓库扫描装载，仓库取消装载后才能取消发货。","提示",{confirmButtonText:"确认",closeOnClickModal:!1,showCancelButton:!1}).then(function(){return!1}).catch(function(){return!1})}).catch(function(){a.$emit("setload",!1)})}},{key:"onAdd",value:function(e){var t=this;if(this.planForm.planId){var a=this.planForm,n=a.dispatch,i=a.serviceId,s=a.serviceName,l=(a.warehouseId,a.warehouseName,Object(r["a"])(a,["dispatch","serviceId","serviceName","warehouseId","warehouseName"])),c=[];this.orderData.map(function(e){c.push.apply(c,Object(o["a"])(e.list))});var u=this.warehouseInfo.every(function(e){return c.some(function(t){return(t.warehouse1||{}).id===e.id})});if(u){var d=Y({deliveryWay:n,bsc:this.bscObj,org:{key:i,value:s},containers:[{containerInfo:Y({},this.containerInfo,{volume:this.dynamicVolume,weight:this.dynamicWeight}),orders:c}],fillQueryParm:this.searchModel},l,{id:void 0,mode:"1",draft:e,warehouses:this.warehouseInfo.map(function(e){return Y({},e,{truck:!0})})});this.$emit("setload",!0),Object(g["db"])(d).then(function(e){t.$emit("setload",!1),t.$message({type:"success",message:"保存成功"}),t.$emit("back")}).catch(function(e){return t.$emit("setload",!1),e})}else this.$message.error("装货仓库必须都有至少一个订单")}else this.$message.error("请选择发货计划")}},{key:"onSave",value:function(){var e=this,t=this.orderData.some(function(e){return e&&(e.list||[]).some(function(e){return e&&e.ifCancel})}),a=this.orderData.some(function(e){return e&&(e.list||[]).some(function(e){return e&&e.ifNew})}),n=[];this.orderData.map(function(e){e.list.map(function(e){e.ifCancel||n.push(e)})});this.warehouseInfo.every(function(e){return n.some(function(t){return(t.warehouse1||{}).id===e.id})}),n.length;if(t||a)if(this.planForm.soCode)if(this.planForm.containerId){var i=[];this.orderData.map(function(e){(e.list||[]).map(function(e){e&&e.ifCancel&&i.push(e.id)})});var r=[];this.orderData.map(function(e){var t=e.list||[];t.map(function(e){e&&e.ifNew&&r.push(e)})});var s={id:this.singleId,containers:[{dels:i,adds:r,containerId:this.planForm.containerId,SO:this.planForm.soCode,volume:this.dynamicVolume,weight:this.dynamicWeight,umLength:"M",umWeight:"KGS"}]};this.$emit("setload",!0),Object(g["b"])(s).then(function(t){e.$emit("setload",!1),e.$message({type:"success",message:"保存成功"}),e.$emit("back")}).catch(function(t){return e.$emit("setload",!1),t})}else this.$message.error("暂无柜型，无法保存");else this.$message.error("暂无SO，无法保存");else this.$message.error("请选择添加订单或取消发货后再保存")}},{key:"handleCommandInvoice",value:function(e){var t=[];this.orderData.map(function(e){e.list.map(function(e){e.code&&t.push(e.code)})}),t.length<=0||this.downloadExcel(e,t)}},{key:"downloadExcel",value:function(e,t){var a=this;this.$emit("setload",!0);var n="",i=null;if("2"===e)n="目的港箱单发票",i=g["g"];else{if("3"!==e)return;n="起运港箱单发票",i=g["i"]}i(t).then(function(e){a.$emit("setload",!1);var t=document.createElement("a");document.body.appendChild(t);var i=new Blob([e],{type:"application/vnd.ms-excel"}),r=URL.createObjectURL(i);t.href=r,t.download=n+N()().format("YYYY-MM-DD_HH-mm-ss")+".xls",t.click(),document.body.removeChild(t),URL.revokeObjectURL(r)}).catch(function(e){a.$emit("setload",!1),e.data.text().then(function(e){try{var t=JSON.parse(e);200!==t.code&&a.$message.error(t.msg||"文件下载失败")}catch(n){return n}})})}},{key:"dynamicNums",get:function(){var e=[];return this.orderData.map(function(t){if(t&&t.list){var a=t.list.filter(function(e){return e&&!e.ifCancel});e.push.apply(e,Object(o["a"])(a))}}),e.length}},{key:"dynamicPackages",get:function(){var e=[],t=this.isStr;return this.orderData.map(function(a){a&&a.list&&a.list.filter(function(e){return e&&!e.ifCancel}).map(function(a){var n=0;n=t&&a.byInit?a.loadTotal:2===a.ifLoading?a.loadingCount:a.packages,e.push(n)})}),e.reduce(function(e,t){return e+t},0)}},{key:"dynamicVolume",get:function(){var e=this,t=0,a=[],n=this.isStr;return this.orderData.map(function(e){if(e&&e.list){var t=e.list.filter(function(e){return e&&!e.ifCancel});a.push.apply(a,Object(o["a"])(t))}}),a.map(function(a,i){var r=a.um||{},s=e.$getVolumeUnitByLengthUnit(r.umLength),o=a.measure||{};if(n){if(a.byInit){var l=e.$volumeConversion(a.loadVolume,"CBCM","CBM",3),c=String(l).length,u=l*Math.pow(10,c);t+=parseFloat((u/Math.pow(10,c)).toFixed(3))}else if(2===a.ifLoading){var d=e.$volumeConversion(a.surplusVolume,"CBCM","CBM",3),p=String(d).length,h=d*Math.pow(10,p);t+=parseFloat((h/Math.pow(10,p)).toFixed(3))}else if(o&&o.totalVolume>=0&&r&&s){var m=e.$volumeConversion(o.totalVolume,s,"CBM",3),f=String(m).length,v=m*Math.pow(10,f);t+=parseFloat((v/Math.pow(10,f)).toFixed(3))}}else if(2===a.ifLoading){var g=e.$volumeConversion(a.surplusVolume,"CBCM","CBM",3),y=String(g).length,b=g*Math.pow(10,y);t+=parseFloat((b/Math.pow(10,y)).toFixed(3))}else if(o&&o.totalVolume>=0&&r&&s){var x=e.$volumeConversion(o.totalVolume,s,"CBM",3),w=String(x).length,_=x*Math.pow(10,w);t+=parseFloat((_/Math.pow(10,w)).toFixed(3))}}),Math.round(1e3*t)/1e3}},{key:"dynamicWeight",get:function(){var e=this,t=0,a=[],n=this.isStr;return this.orderData.map(function(e){if(e&&e.list){var t=e.list.filter(function(e){return e&&!e.ifCancel});a.push.apply(a,Object(o["a"])(t))}}),a.map(function(a,i){var r=a.um||{},s=a.measure||{};if(n){if(a.byInit){var o=e.$volumeConversion(a.loadWeight,"KGS","KGS",3),l=String(o).length,c=o*Math.pow(10,l);t+=parseFloat((c/Math.pow(10,l)).toFixed(3))}else if(2===a.ifLoading){var u=e.$volumeConversion(a.surplusWeight,"KGS","KGS",3),d=String(u).length,p=u*Math.pow(10,d);t+=parseFloat((p/Math.pow(10,d)).toFixed(3))}else if(s&&s.totalWeight>=0&&r&&r.umWeight){var h=e.$volumeConversion(s.totalWeight,r.umWeight,"KGS",3),m=String(h).length,f=h*Math.pow(10,m);t+=parseFloat((f/Math.pow(10,m)).toFixed(3))}}else if(2===a.ifLoading){var v=e.$volumeConversion(a.surplusWeight,"KGS","KGS",3),g=String(v).length,y=v*Math.pow(10,g);t+=parseFloat((y/Math.pow(10,g)).toFixed(3))}else if(s&&s.totalWeight>=0&&r&&r.umWeight){var b=e.$volumeConversion(s.totalWeight,r.umWeight,"KGS",3),x=String(b).length,w=b*Math.pow(10,x);t+=parseFloat((w/Math.pow(10,x)).toFixed(3))}}),Math.round(1e3*t)/1e3}},{key:"resultData",get:function(){var e=this.searchCode,t=this.orderList;return e?t.filter(function(t){var a=t||{},n=a.code,i={code:n};return Object.keys(i).some(function(a){return String(t[a]).indexOf(e)>-1})}):t}}]),t}(f["e"]);H=m["a"]([Object(f["a"])({name:"",components:{},props:{statusList:{type:Array,default:function(){return[]}},singleId:{type:String,default:""},isStr:{type:String,default:""}}})],H);var q=H,J=q,Q=(a("ec5d"),Object(I["a"])(J,G,K,!1,null,"5217c722",null)),X=Q.exports;function Z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ee(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Z(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var te=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.loading=!1,e.activeStep=0,e.statusList=[],e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"goBack",value:function(){this.$emit("back")}},{key:"setLoad",value:function(e){this.loading=e}},{key:"setRow",value:function(e){var t=this,a=e.fillQueryParm,n=e.containers,i=e.warehouses,r=n||[],s=i[0]||{},o=[];r.map(function(e){(e.orders||[]).map(function(e){return o.push(e)})});this.setReduceCodeAndChecked(o,!0);var l=this.isStr;if("v"===l||"e"===l)this.activeStep=1,this.$nextTick(function(){var e=t.$refs.costItem;e.setData(a,o,s)});else{var c=this.$refs.addEditForm;c.setData(a,o,s)}}},{key:"setReduceCodeAndChecked",value:function(e,t){var a=e.filter(function(e){return"1"===e.addressType}),n=e.filter(function(e){return"1"!==e.addressType}),i=function(e,t){return e.reduce(function(e,a){var n=a.fbastore[t];return e[n]||(e[n]=[]),e[n].push(a),e},{})},r=i(n,"code");a.length>0&&(r.xxxx=a);var s=Object.keys(r).map(function(e){if(e){var a=(r[e]||[]).map(function(e){return ee({},e,{checked:t})});return{fba:e,checkAll:t,indeterminate:t,list:a}}});return s}},{key:"getStatusData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(g["T"])().then(function(e){t.statusList=(e.data||[]).map(function(e){return{name:e.name,id:e.key,type:e.type}})}).catch(function(){t.statusList=[]});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleClear",value:function(){}},{key:"handleLast",value:function(){var e=this,t={};if(1===this.activeStep){var a=this.$refs.costItem;t=a.getData()}this.activeStep--<=0&&(this.activeStep=0),this.$nextTick(function(){var a=e.$refs.addEditForm;a.setData(t.model,t.data,t.warehouses)})}},{key:"handleNext",value:function(){var e=this,t={};if(0===this.activeStep){var a=this.$refs.addEditForm;t=a.getData()}this.activeStep++>=1&&(this.activeStep=1),this.$nextTick(function(){var a=e.$refs.costItem;a.setData(t.model,t.data,t.warehouses)})}},{key:"handleSubmit",value:function(e){var t=this.$refs.costItem;t.onAdd(e)}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getStatusData();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(f["e"]);te=m["a"]([Object(f["a"])({name:"",components:{addEditForm:A,costItem:X},props:{singleId:{type:String,default:""},isStr:{type:String,default:""}}})],te);var ae=te,ne=ae,ie=(a("8cfa"),Object(I["a"])(ne,y,b,!1,null,"6563234c",null)),re=ie.exports,se=a("db7d"),oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"searchMore",staticClass:"more-form",attrs:{model:e.searchMore,"label-width":"0px",size:"small"}},[a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"安排出库",clearable:"",filterable:""},model:{value:e.searchMore.ifWareHouseOut,callback:function(t){e.$set(e.searchMore,"ifWareHouseOut",t)},expression:"searchMore.ifWareHouseOut"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"起运港报关",clearable:"",filterable:""},model:{value:e.searchMore.ifOutDeclare,callback:function(t){e.$set(e.searchMore,"ifOutDeclare",t)},expression:"searchMore.ifOutDeclare"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"目的港报关",clearable:"",filterable:""},model:{value:e.searchMore.ifEnterDeclare,callback:function(t){e.$set(e.searchMore,"ifEnterDeclare",t)},expression:"searchMore.ifEnterDeclare"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1),"1"===e.searchMore.type||"2"===e.searchMore.type?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"起运港拖车",clearable:"",filterable:""},model:{value:e.searchMore.ifOutTrailer,callback:function(t){e.$set(e.searchMore,"ifOutTrailer",t)},expression:"searchMore.ifOutTrailer"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1):e._e(),"1"===e.searchMore.type||"2"===e.searchMore.type?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"目的港拖车",clearable:"",filterable:""},model:{value:e.searchMore.ifEnterTrailer,callback:function(t){e.$set(e.searchMore,"ifEnterTrailer",t)},expression:"searchMore.ifEnterTrailer"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1):e._e(),"0"===e.searchMore.type?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"起运港卡车",clearable:"",filterable:""},model:{value:e.searchMore.ifOutCar,callback:function(t){e.$set(e.searchMore,"ifOutCar",t)},expression:"searchMore.ifOutCar"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1):e._e(),"0"===e.searchMore.type?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"目的港卡车",clearable:"",filterable:""},model:{value:e.searchMore.ifEnterCar,callback:function(t){e.$set(e.searchMore,"ifEnterCar",t)},expression:"searchMore.ifEnterCar"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1):e._e(),"1"===e.searchMore.type||"2"===e.searchMore.type?a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"拆柜打托",clearable:"",filterable:""},model:{value:e.searchMore.openTank,callback:function(t){e.$set(e.searchMore,"openTank",t)},expression:"searchMore.openTank"}},[a("el-option",{attrs:{label:"否",value:0}}),a("el-option",{attrs:{label:"是",value:1}})],1)],1):e._e()],1)],1)},le=[],ce=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.searchMore={ifWareHouseOut:void 0,ifOutDeclare:void 0,ifEnterDeclare:void 0,ifOutTrailer:void 0,ifEnterTrailer:void 0,ifOutCar:void 0,ifEnterCar:void 0,openTank:void 0},e}return Object(h["a"])(t,e),t}(f["e"]);ce=m["a"]([Object(f["a"])({name:"searchMore",components:{},props:{}})],ce);var ue=ce,de=ue,pe=(a("066c"),Object(I["a"])(de,oe,le,!1,null,"57128574",null)),he=pe.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"装柜/车确认"}}),a("div",{staticClass:"app-panel"},[a("el-row",{staticStyle:{"margin-bottom":"6px"}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"label"},[e._v("下单总件数：")]),a("span",{staticClass:"value"},[e._v(e._s(e.totalInfo.packages))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"label"},[e._v("装载总件数：")]),a("span",{staticClass:"value"},[e._v(e._s(e.totalInfo.loadTotal))])])],1),e._l(e.loadingWarehouse,function(t,n){return a("el-row",{key:n,staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:5}},[a("span",{staticClass:"label"},[e._v("装载仓库：")]),a("span",{staticClass:"value"},[e._v(e._s((t.warehouse||{}).name))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"label"},[e._v("装载件数：")]),a("span",{staticClass:"value"},[e._v(e._s(t.loadingTotal))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"label"},[e._v("装载操作人：")]),a("span",{staticClass:"value"},[e._v(e._s(t.realName))])]),a("el-col",{attrs:{span:5}},[a("span",{staticClass:"label"},[e._v("完成装柜时间：")]),a("span",{staticClass:"value"},[e._v(e._s(t.completeTime))])])],1)}),a("el-row",{staticStyle:{"margin-top":"32px"}},[a("el-col",{attrs:{span:12}},[a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"text",size:"medium"},on:{click:e.exportLoadPlan}},[e._v("\n          导出拆柜清单\n        ")]),a("el-button",{staticStyle:{"margin-right":"20px"},attrs:{type:"text",size:"medium"},on:{click:e.exportUnLoadBox}},[e._v("\n          导出扫描详情\n        ")]),a("el-checkbox",{on:{change:e.checkboxChange}},[e._v("\n          仅查看未装完\n        ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("\n          返回\n        ")]),1===e.confirmRow.ifConfirm?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmReturn}},[e._v("\n          确认提交\n        ")]):e._e()],1)],1),a("el-table",{ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tablePage,border:""}},[a("el-table-column",{attrs:{prop:"code",label:"原单号",fixed:"left",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.code))]),a("div",[t.row.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n              特批发货\n            ")]):e._e(),t.row.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n              冻结\n            ")]):e._e(),t.row.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n              锁舱\n            ")]):e._e(),"1"!==t.row.payMethod&&e.formatPay(t.row)?a("span",{staticClass:"btn-tip-red"},[e._v("\n              "+e._s(t.row.ifPayment?"逾期已付款":"逾期未付款")+"\n            ")]):e._e(),"1"===t.row.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n              "+e._s(t.row.ifPayment?"已付款":"未付款")+"\n            ")]):e._e(),t.row.insufficient?a("span",{staticClass:"btn-tip-red"},[e._v("\n              信用不足\n            ")]):e._e(),t.row.enabled?e._e():a("span",{staticClass:"btn-tip-gray"},[e._v("\n              订单已取消\n            ")])])]}}])}),a("el-table-column",{attrs:{prop:"",label:"客户名称",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.orderCustomer||{}).name||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"服务",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.lsc||{}).value||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"目的国",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.country||{}).value||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"目的省份",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.consignee||{}).province||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"目的城市",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.consignee||{}).city||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"目的仓",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.fbastore||{}).code||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"下单仓库",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.warehouse||{}).name||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"货物所在仓",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.warehouse1||{}).name||"--")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"总体积",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.total_volume||"--")+" CBM\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"总重量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.total_weight||"--")+" KGS\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"装载体积",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.$volumeConversion(t.row.loadVolume,"CBCM","CBM"))+" CBM\n        ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"装载重量",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e.$volumeConversion(t.row.loadWeight,"KGS","KGS"))+" KGS\n        ")]}}])}),a("el-table-column",{attrs:{prop:"packages",label:"总件数",width:"100"}}),a("el-table-column",{attrs:{prop:"loadTotal",label:"装载件数",width:"100"}}),a("el-table-column",{attrs:{prop:"",fixed:"right",label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.packages-t.row.loadTotal>0?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showReturnBox(t.row)}}},[e._v("\n            查看\n          ")]):a("span",[e._v("--")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],2),a("el-dialog",{attrs:{title:e.showReturnBoxRow.code,width:"600px","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t},close:e.dialogClose}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-table",{ref:"table",attrs:{data:e.dialogTableData,border:""}},[a("el-table-column",{attrs:{prop:"box",label:"箱号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.box))])]}}])}),a("el-table-column",{attrs:{prop:"",label:"快递单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[e._v(e._s(t.row.express||"--"))])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.modalPagination.page,"page-size":e.modalPagination.size,layout:"total, prev, pager, next",total:e.modalPagination.total},on:{"update:currentPage":function(t){return e.$set(e.modalPagination,"page",t)},"update:current-page":function(t){return e.$set(e.modalPagination,"page",t)},"size-change":e.modalHandleSizeChange,"current-change":e.modalHandleCurrentChange}})],1)])],1)},fe=[];function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function ge(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ye=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.dialogLoading=!1,e.onlyNoLoad=!1,e.loading=!1,e.visible=!1,e.tableData=[],e.dialogTableData=[],e.loadingWarehouse=[],e.pagination={page:1,size:10,total:0},e.modalPagination={page:1,size:10,total:0},e.confirmRow={},e.showReturnBoxRow={},e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"showReturnBox",value:function(e){this.showReturnBoxRow=e,this.visible=!0,this.getReturnBoxList()}},{key:"getReturnBoxList",value:function(){var e=this,t={model:{code:this.showReturnBoxRow.code,fill:this.confirmRow.id},page:this.modalPagination.page,size:this.modalPagination.size};this.dialogLoading=!0,Object(g["K"])(t).then(function(t){e.dialogLoading=!1;var a=t.data||{};e.dialogTableData=a.result||[],e.modalPagination.total=a.total||0}).catch(function(){e.dialogTableData=[],e.dialogLoading=!1,e.modalPagination.total=0})}},{key:"confirmReturn",value:function(){var e=this;this.$confirm("确认返仓入库完成？","提示",{confirmButtonText:"确认",closeOnClickModal:!1,cancelButtonText:"取消"}).then(function(){var t={fillId:e.confirmRow.id};e.loading=!0,Object(g["a"])(t).then(function(){e.loading=!1,e.$message.success("操作成功"),e.confirmRow.ifConfirm=2,e.init(e.confirmRow)}).catch(function(){e.loading=!1})}).catch(function(){return!1})}},{key:"goBack",value:function(){this.pagination={page:1,size:10,total:0},this.tableData=[],this.confirmRow={},this.$emit("back")}},{key:"checkboxChange",value:function(e){this.pagination.page=1,this.pagination.total=e?this.tableData.filter(function(e){return e.packages-e.loadTotal>0}).length:this.tableData.length,this.onlyNoLoad=e}},{key:"init",value:function(e){var t=this;this.confirmRow=e,this.loading=!0,this.getOrderLoadingWarehouse(),Object(g["C"])({fillId:e.id}).then(function(e){t.loading=!1,t.tableData=(e.data||[]).map(function(e){var a=e.um||{},n=t.$getVolumeUnitByLengthUnit(a.umLength),i=e.measure||{};return ge({},e,{total_volume:t.$volumeConversion(i.totalVolume,n,"CBM"),total_weight:t.$volumeConversion(i.totalWeight,a.umWeight,"KGS")})}),t.pagination.total=t.tableData.length}).catch(function(){t.tableData=[],t.pagination.total=0,t.loading=!1})}},{key:"getOrderLoadingWarehouse",value:function(){var e=this;Object(g["D"])({fillId:this.confirmRow.id}).then(function(t){e.loadingWarehouse=t.data||[]}).catch(function(){e.loadingWarehouse=[]})}},{key:"exportLoadPlan",value:function(){var e=this;this.loading=!0,Object(g["e"])({id:this.confirmRow.id}).then(function(t){e.loading=!1;var a=document.createElement("a");document.body.appendChild(a);var n=new Blob([t],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(n);a.href=i,a.download="拆柜清单"+N()().format("YYYY-MM-DD_HH-mm-ss")+".xls",a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}).catch(function(t){e.loading=!1,t&&t.data?t.data.text().then(function(t){try{var a=JSON.parse(t);200!==a.code&&e.$message.error(a.msg||"文件下载失败")}catch(n){return n}}):e.$message.error("文件下载失败")})}},{key:"exportUnLoadBox",value:function(){var e=this;this.loading=!0,Object(g["k"])({id:this.confirmRow.id}).then(function(t){e.loading=!1;var a=document.createElement("a");document.body.appendChild(a);var n=new Blob([t],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(n);a.href=i,a.download="已扫描详情"+N()().format("YYYY-MM-DD_HH-mm-ss")+".xls",a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)}).catch(function(t){e.loading=!1,t&&t.data?t.data.text().then(function(t){try{var a=JSON.parse(t);200!==a.code&&e.$message.error(a.msg||"文件下载失败")}catch(n){return n}}):e.$message.error("文件下载失败")})}},{key:"dialogClose",value:function(){this.visible=!1,this.showReturnBoxRow={},this.modalPagination={page:1,size:10,total:0},this.dialogTableData=[]}},{key:"formatPay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";return!!i&&i&&i<n}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e)}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e)}},{key:"modalHandleSizeChange",value:function(e){this.modalPagination.size=Number(e),this.getReturnBoxList()}},{key:"modalHandleCurrentChange",value:function(e){this.modalPagination.page=Number(e),this.getReturnBoxList()}},{key:"totalInfo",get:function(){return this.tableData.reduce(function(e,t){return e.packages+=t.packages,e.loadTotal+=t.loadTotal,e.loadVolume+=t.loadVolume,e.loadWeight+=t.loadWeight,e},{loadVolume:0,loadWeight:0,packages:0,loadTotal:0})}},{key:"tablePage",get:function(){var e=this.tableData;return this.onlyNoLoad&&(e=this.tableData.filter(function(e){return e.packages-e.loadTotal>0})),e.slice((this.pagination.page-1)*this.pagination.size,this.pagination.page*this.pagination.size)}}]),t}(f["e"]);ye=m["a"]([Object(f["a"])({name:"CabinetConfirm"})],ye);var be=ye,xe=be,we=(a("180f"),Object(I["a"])(xe,me,fe,!1,null,"7e2b1168",null)),_e=we.exports,Ce=a("1146"),ke=a.n(Ce);function Se(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function Fe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Se(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Se(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Le=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.noticeLoading=!1,e.selectLoading=!1,e.formLoading=!1,e.fileLoading=!1,e.showPageName="index",e.moreShow=!1,e.dialogVisible=!1,e.dialogOut=!1,e.dialogReplenish=!1,e.isSupperierVisible=!1,e.isEditViewAdd="",e.wareName="",e.noticeData=[],e.replenishData=[],e.selectedData=[],e.statusList=[],e.typeList=[],e.fileList=[],e.supplierList=[],e.warehouseList=[],e.startPortList=[],e.endPortList=[],e.countryList=[],e.searchForm={type:"1",orderTime:[],codeType:"1",code:void 0,ifEnterDeclare:void 0,ifOutDeclare:void 0,ifOutTrailer:void 0,ifEnterTrailer:void 0,ifEnterCar:void 0,ifOutCar:void 0,orgId:void 0,originCountryId:void 0,originPortId:void 0,targetCountryId:void 0,targetPortId:void 0,remark:void 0},e.moreObj={},e.singleId="",e.originCountryId="",e.targetCountryId="",e.orderType="",e.serviceType="",e.warehouseType="",e.warehouseSubtype="",e.commandVal="",e.page=1,e.size=10,e.total=0,e.organList=[],e.supperierForm={supplyId:void 0,warehouseId:void 0,warehouseTime:void 0},e.rules={supplyId:{required:!0,message:"请选择供应商",trigger:"change"},warehouseId:{required:!0,message:"请选择仓库",trigger:"change"},warehouseTime:{required:!0,message:"入库时间不能为空",trigger:"change"}},e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"cabinetConfirmClick",value:function(e){var t=this;this.showPageName="confirm",this.$nextTick(function(){var a=t.$refs.cabinetConfirm;a.init(e)})}},{key:"formatPay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";return!!i&&i&&i<n}},{key:"formatCutoffDay",value:function(e){var t=e.payTime?N()(e.payTime).unix():"",a=N()().unix(),n=t||a,i=e.cutoffTime?N()(e.cutoffTime).unix():"";n&&N()(n).unix();return i&&i<n?Math.ceil((n-i)/86400)+"天":"--"}},{key:"dispatchFormat",value:function(e){var t={0:"快递",1:"卡派",2:"自提",3:"整柜直送"},a=("".concat(e.deliveryWay)||"").split(","),n=[];return a.map(function(e){n.push(t[e])}),n.join(",")}},{key:"formatType",value:function(e){return"0"===e.type?"空运":"1"===e.type?"海运":"2"===e.type?"铁路":"4"===e.type?"卡航":void 0}},{key:"formatTrans",value:function(e){var t=e.type,a=e.transType,n="";return"0"===t?n="0"===a?"包板":"1"===a?"散货":"":"1"===t||"2"===t?n="0"===a?"拼箱":"1"===a?"整柜":"":"4"===t&&(n="0"===a?"整车":"1"===a?"散货":""),n}},{key:"maxVolWeiFormat",value:function(e,t,a){var n=this.$getVolumeUnitByLengthUnit((e.um||{}).umLength),i=(e.um||{}).umWeight,r=(e.measure||{}).maxVolume,s=(e.measure||{}).totalVolume,o=(e.measure||{}).maxWeight,l=(e.measure||{}).totalWeight,c=0;return"vol"===t&&n&&s?c=this.$volumeConversion(s,n,"CBM",3):"maxVol"===t&&n&&r?c=this.$volumeConversion(r,n,"CBM",3):"wei"===t&&i&&l?c=this.$volumeConversion(l,i,"KGS",3):"maxWei"===t&&i&&o&&(c=this.$volumeConversion(o,i,"KGS",3)),(c||"--")+" "+a}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(g["L"])().then(function(t){var a=t.data||{};e.countryList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onOriginCountry",value:function(){this.searchForm.originPortId=void 0,this.searchForm.orgId=void 0,this.startPortList=[],this.organList=[]}},{key:"onTargetCountry",value:function(){this.searchForm.targetPortId=void 0,this.searchForm.orgId=void 0,this.endPortList=[],this.organList=[]}},{key:"getStartPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.searchForm.originCountryId,type:this.searchForm.type};Object(g["I"])(t).then(function(t){var a=t.data||{};e.startPortList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getEndPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.searchForm.targetCountryId,type:this.searchForm.type};Object(g["I"])(t).then(function(t){var a=t.data||{};e.endPortList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getSeviceOrganList",value:function(){var e=this;this.selectLoading=!0;var t=this.searchForm.type,a={type:"0"===t?"2":"1"===t?"1":"2"===t?"3":"",countryId:this.searchForm.originCountryId,serviceCountry:this.searchForm.targetCountryId,page:1,size:9999};Object(g["N"])(a).then(function(t){var a=t.data||{};e.organList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleBack",value:function(){this.showPageName="index",this.isEditViewAdd="",this.singleId="",this.getShipTable()}},{key:"viewRow",value:function(e){var t=this;this.showPageName="form",this.isEditViewAdd="v";var a=e.id;this.singleId=a,this.$nextTick(function(){var a=t.$refs.stepData;a.setRow(e)})}},{key:"editRow",value:function(e){var t=this;this.showPageName="form",this.isEditViewAdd="e";var a=e.id;this.singleId=a,this.$nextTick(function(){var a=t.$refs.stepData;a.setRow(e)})}},{key:"addRow",value:function(){this.showPageName="form"}},{key:"handleViewBoard",value:function(){var e=this.$router.resolve({path:"/data-monitor"}),t=e.href;window.open(t,"_blank")}},{key:"saveOut",value:function(){this.dialogOut=!1,this.outRow(this.moreObj)}},{key:"outRow",value:function(e){var t=this,a={fillId:e.id,warehouse:{}};Object(g["G"])(a).then(function(e){t.$message({type:"success",message:"提交成功"}),t.getShipTable()}).catch(function(e){return e})}},{key:"getReplenish",value:function(){var e=this;this.noticeLoading=!0;var t={fillId:this.moreObj.id,type:this.moreObj.type,countryId:(this.moreObj.targetCountry||{}).key};Object(g["J"])(t).then(function(t){var a=t.data||[];e.noticeLoading=!1,a.length<=0?e.$message.error("暂无需要补单的订单"):(e.replenishData=a,e.dialogReplenish=!0)}).catch(function(t){return e.noticeLoading=!1,t})}},{key:"handleSelectable",value:function(e,t){return this.boolOrder(e)}},{key:"boolOrder",value:function(e){var t=Fe({},e,{fullorderInsufficient:e.fullorderInsufficient||{},express:e.express||{}}),a=t.audit,n=t.status,i=n.MEASURE,r=n.EXAMINE,s=t.deliveryWay,o=t.express.trackingNos,l=t.fullorderInsufficient.insufficientStatus,c=t.payMethod,u=t.ifPayment,d=t.insufficient,p=t.ifFrozen,h=t.beShip;N()().unix(),e.cutoffTime&&N()(e.cutoffTime).unix();return!((2!==e.ifLoading||2!==e.ifConfirm)&&2===e.ifLoading||"1"!==a||"7"!==i||"10"!==r||!("0"===s&&o||"0"!==s)||p)&&(h||d&&1===l||!d&&u||!d&&!u&&"1"!==c)}},{key:"handleSelected",value:function(e,t){var a=e.find(function(e){return e.id===t.id});a?this.selectedData.push(t):this.selectedData=this.selectedData.filter(function(e){return e.id!==t.id})}},{key:"handleSelectAll",value:function(e){var t=this;e.length?this.selectedData=[].concat(Object(o["a"])(this.selectedData),Object(o["a"])(e)).reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[]):this.selectedData=this.selectedData.filter(function(e){return!t.replenishData.find(function(t){return t.id===e.id})})}},{key:"cancelReplenish",value:function(){this.dialogReplenish=!1,this.replenishData=[],this.selectedData=[]}},{key:"saveReplenish",value:function(){var e=this,t={fillId:this.moreObj.id,codeList:this.selectedData,warehouse:{}};Object(g["ab"])(t).then(function(t){e.$message({type:"success",message:"提交成功"}),e.formLoading=!1,e.cancelReplenish(),e.getShipTable()}).catch(function(t){return e.formLoading=!1,t})}},{key:"handleCustoms",value:function(e){this.moreObj=e,this.singleId=e.id,this.originCountryId=(e.originCountry||{}).key,this.targetCountryId=(e.targetCountry||{}).key}},{key:"handleCommandCustoms",value:function(e){switch(this.isSupperierVisible=!0,this.serviceType="",this.warehouseSubtype="",this.commandVal=e,e){case"0":if(this.isSupperierVisible=!1,(this.moreObj.warehouses||[]).length<=0)return void this.$message.error("暂无装货仓库数据，无法安排出库");this.wareName=this.moreObj.warehouses.map(function(e){return e.name}).join(","),this.dialogOut=!0;break;case"1":this.orderType="03",this.warehouseType="03";break;case"2":this.orderType="03",this.warehouseType="03";break;case"3":this.orderType="06",this.serviceType="1",this.warehouseType="",this.warehouseSubtype="";break;case"4":this.orderType="06",this.serviceType="0",this.warehouseType="04",this.warehouseSubtype="3";break;case"5":this.orderType="01",this.warehouseType="";break;case"6":this.orderType="01",this.warehouseType="04",this.warehouseSubtype="3";break;case"7":this.orderType="04",this.serviceType="3";break;case"8":this.isSupperierVisible=!1,this.getReplenish();break;default:break}}},{key:"handleCommandInvoice",value:function(e){this.dialogVisible=!0,this.commandVal=e}},{key:"uploadFile",value:function(e){var t=Math.round(e.file.size/1024/1024*100)/100;if(t>10)this.$message.warning("文件大小超出最大上传限制！");else{var a=e.file,n=this,i=new FileReader;FileReader.prototype.readAsBinaryString=function(e){var t,a,i="",r=new FileReader;r.onload=function(e){for(var s=r.result,l=new Uint8Array(s),c=l.byteLength,u=0;u<c;u++)i+=String.fromCharCode(l[u]);t=ke.a.read(i,{type:"binary"}),a=ke.a.utils.sheet_to_json(t.Sheets[t.SheetNames[0]],{header:1,defval:""});var d=[];a.map(function(e){d.push.apply(d,Object(o["a"])(e))});var p=d.filter(function(e){return e});n.downloadInvoiceExcel(n.commandVal,p)},r.onerror=function(){n.$message.error("文件错误,请检查文件重新导入")},r.readAsArrayBuffer(e)},i.readAsBinaryString(a)}}},{key:"downloadInvoiceExcel",value:function(e,t){var a=this;if(this.dialogVisible=!1,!(t.length<=0)){this.noticeLoading=!0;var n="",i=null;if("2"===e)n="目的港箱单发票",i=g["g"];else{if("3"!==e)return;n="起运港箱单发票",i=g["i"]}i(t).then(function(e){a.noticeLoading=!1;var t=document.createElement("a");document.body.appendChild(t);var i=new Blob([e],{type:"application/vnd.ms-excel"}),r=URL.createObjectURL(i);t.href=r,t.download=n+N()().format("YYYY-MM-DD_HH-mm-ss")+".xls",t.click(),document.body.removeChild(t),URL.revokeObjectURL(r),a.cancelCode()}).catch(function(e){a.noticeLoading=!1,e.data.text().then(function(e){try{var t=JSON.parse(e);200!==t.code&&a.$message.error(t.msg||"文件下载失败")}catch(n){return n}})})}}},{key:"cancelCode",value:function(){this.dialogVisible=!1,this.fileList=[],this.commandVal=""}},{key:"handleExport",value:function(e){this.moreObj=e}},{key:"handleCommandExport",value:function(e){this.downloadExcel(e,this.moreObj)}},{key:"downloadExcel",value:function(e,t){var a=this;this.noticeLoading=!0;var n="",i=null,r={id:t.id};if("1"===e)n="订单明细",i=g["f"];else if("2"===e)n="目的港箱单发票(柜号)",r.type="1",r.method="0",i=g["h"];else if("3"===e)n="起运港箱单发票(柜号)",r.type="0",r.method="0",i=g["h"];else if("4"===e)n="目的港箱单发票(箱号)",r.type="1",r.method="1",i=g["h"];else if("5"===e)n="起运港箱单发票(箱号)",r.type="0",r.method="1",i=g["h"];else if("6"===e)n="保险单",i=g["d"];else if("7"===e)n="快递单",i=g["j"];else if("8"===e)n="拆柜清单标准版",i=g["e"];else{if("9"!==e)return;n="拆柜清单ROY版",i=g["c"]}i(r).then(function(e){a.noticeLoading=!1;var t=document.createElement("a");document.body.appendChild(t);var i=new Blob([e],{type:"application/vnd.ms-excel"}),r=URL.createObjectURL(i);t.href=r,t.download=n+N()().format("YYYY-MM-DD_HH-mm-ss")+".xls",t.click(),document.body.removeChild(t),URL.revokeObjectURL(r)}).catch(function(e){a.noticeLoading=!1,e.data.text().then(function(e){try{var t=JSON.parse(e);200!==t.code&&a.$message.error(t.msg||"文件下载失败")}catch(n){return n}})})}},{key:"confirmSupperier",value:function(){var e=this,t=this.$refs.supperierForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=Fe({fillId:e.singleId},e.supperierForm);e.supplierList.map(function(e){a.supplyId===e.id&&(a.supplyName=e.name)}),e.warehouseList.map(function(e){e.warehouseId===a.warehouseId&&(a.warehouseName=e.name,a.address=e.address,a.cityId=e.cityId,a.cityName=e.cityName,a.contact=e.contact,a.countryId=e.countryId,a.countryName=e.countryName,a.countyId=e.countyId,a.countyName=e.countyName,a.stateId=e.stateId,a.stateName=e.stateName,a.tel=e.phoneNo)});var n=null;if("1"===e.commandVal)n=Object(g["F"])(a);else if("2"===e.commandVal)n=Object(g["x"])(a);else if("3"===e.commandVal)n=Object(g["H"])(a);else if("4"===e.commandVal)n=Object(g["y"])(a);else if("5"===e.commandVal)n=Object(g["E"])(a);else if("6"===e.commandVal)n=Object(g["w"])(a);else{if("7"!==e.commandVal)return;var i={value:a.supplyName,key:a.supplyId,wareHouseId:a.warehouseId,id:e.singleId,warehouseTime:a.warehouseTime};n=Object(g["Z"])(i)}n.then(function(t){e.$message({type:"success",message:"保存成功"}),e.formLoading=!1,e.cancelSupperier(),e.getShipTable()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"cancelSupperier",value:function(){this.isSupperierVisible=!1,this.resetSupperierForm(),this.commandVal="",this.orderType="",this.serviceType="",this.warehouseType="",this.warehouseSubtype="",this.originCountryId="",this.targetCountryId="",this.supplierList=[],this.warehouseList=[]}},{key:"resetSupperierForm",value:function(){this.supperierForm={supplyId:void 0,warehouseId:void 0,warehouseTime:void 0};var e=this.$refs.supperierForm;e.clearValidate()}},{key:"getCustList",value:function(){var e=this;this.selectLoading=!0;var t={cas:"S",types:this.orderType,subtypes:this.serviceType,countries:"1"===this.commandVal||"3"===this.commandVal||"5"===this.commandVal?[this.originCountryId]:[this.targetCountryId]};Object(g["q"])(t).then(function(t){var a=t.data||[],n=a;e.supplierList=JSON.parse(JSON.stringify(n).replace(/custName/g,"name").replace(/custId/g,"id")),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0,Object(g["Y"])({typeId:this.warehouseType,subtypeId:this.warehouseSubtype,custId:"7"===this.commandVal?this.supperierForm.supplyId:void 0,countryId:"3"===this.commandVal||"5"===this.commandVal?this.originCountryId:this.targetCountryId}).then(function(t){var a=t.data||[];e.warehouseList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onType",value:function(){this.searchForm.codeType="1",this.searchForm.ifOutTrailer=void 0,this.searchForm.ifEnterTrailer=void 0,this.searchForm.ifEnterCar=void 0,this.searchForm.ifOutCar=void 0,this.searchForm.openTank=void 0,this.searchForm.orgId=void 0,this.organList=[],this.getShipTable(1)}},{key:"getSubtypeList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={typeId:"05"},e.next=4,Object(g["M"])(t).then(function(e){var t=e.data||[];a.typeList=t,a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getStatusData",value:function(){var e=this;Object(g["T"])().then(function(t){e.statusList=(t.data||[]).map(function(e){return{name:e.name,id:e.key,type:e.type}})}).catch(function(){e.statusList=[]})}},{key:"handleMoreSearch",value:function(){this.moreShow=!0;var e=this.$refs.searchMore;e.searchMore=Fe({},this.searchForm)}},{key:"handleMoreCancle",value:function(){this.moreShow=!1;var e=this.$refs.searchMore,t=e.searchMore,a=(t.ifWareHouseOut,t.ifOutDeclare,t.ifEnterDeclare,t.ifOutTrailer,t.ifEnterTrailer,t.ifOutCar,t.ifEnterCar,t.openTank,Object(r["a"])(t,["ifWareHouseOut","ifOutDeclare","ifEnterDeclare","ifOutTrailer","ifEnterTrailer","ifOutCar","ifEnterCar","openTank"]));this.searchForm=Fe({},a),this.getShipTable(1)}},{key:"handleMoreConfirm",value:function(){this.moreShow=!1;var e=this.$refs.searchMore;this.searchForm=e.searchMore,this.getShipTable(1)}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getShipTable()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getShipTable()}},{key:"getShipTable",value:function(e){var t=this,a=this.searchForm,n=a.orderTime,i=a.codeType,s=a.code,o=Object(r["a"])(a,["orderTime","codeType","code"]);this.noticeLoading=!0,e&&(this.page=e);var l={model:Fe({},o,{code:"1"===i?s:void 0,remark:"2"===i?s:void 0,so:"3"===i?s:void 0,billNo:"4"===i?s:void 0,containerNo:"5"===i?s:void 0,mode:"1",startTime:"",endTime:""}),page:this.page,size:this.size};Array.isArray(n)&&n.length>0&&(l.model.startTime=n[0]+" 00:00:00",l.model.endTime=n[1]+" 23:59:59"),Object(g["Q"])(l).then(function(e){t.noticeLoading=!1;var a=e.data||{};t.noticeData=a.result||[],t.$nextTick(function(){var e=t.$refs.table;e&&e.doLayout()}),t.total=a.total}).catch(function(e){return t.noticeLoading=!1,e})}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.noticeLoading=!0,this.searchForm.orderTime=[N()().subtract(30,"d").format("YYYY-MM-DD"),N()().format("YYYY-MM-DD")],e.prev=2,e.next=5,this.getSubtypeList();case 5:this.getShipTable(),this.getStatusData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.noticeLoading=!1;case 12:case"end":return e.stop()}},e,this,[[2,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=v["a"].info||{},t=e.custId;return t}},{key:"pickerOptions",get:function(){return{disabledDate:function(e){return e.getTime()<Date.now()}}}}]),t}(f["e"]);Le=m["a"]([Object(f["a"])({name:"",components:{stepData:re,searchMore:he,drawer:se["a"],CabinetConfirm:_e},props:{}})],Le);var Oe=Le,Te=Oe,Ie=(a("2581"),Object(I["a"])(Te,n,i,!1,null,"697a653c",null));t["default"]=Ie.exports},"6c35":function(e,t,a){},"6f4d":function(e,t,a){"use strict";var n=a("d0d4"),i=a.n(n);i.a},"72be":function(e,t,a){},"7dca":function(e,t,a){},"8cfa":function(e,t,a){"use strict";var n=a("72be"),i=a.n(n);i.a},9412:function(e,t,a){"use strict";var n=a("6c35"),i=a.n(n);i.a},c21f:function(e,t,a){},d0d4:function(e,t,a){},ec5d:function(e,t,a){"use strict";var n=a("2121"),i=a.n(n);i.a}}]);