(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Warehousing-services"],{"12ff":function(e,t,r){},"15ff":function(e,t,r){},"16d8":function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:e.id}})},a=[],i=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o=r("d225"),s=r("b0b4"),c=r("308d"),u=r("6bb5"),l=r("4e2b"),d=r("9ab4"),m=(r("a7be"),r("44f8"),r("a6e0"),r("60a3")),h={previewStyle:"vertical",usageStatistics:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},f=r("547e"),g=r.n(f);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach(function(t){Object(i["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b=function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)},y=function(e){function t(){return Object(o["a"])(this,t),Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments))}return Object(l["a"])(t,e),Object(s["a"])(t,[{key:"onValueChange",value:function(e,t){this.markdownEditor&&e!==t&&e!==this.markdownEditor.getValue()&&this.markdownEditor.setValue(e)}},{key:"onLanguageChange",value:function(){this.destroyEditor(),this.initEditor()}},{key:"onHeightChange",value:function(e){this.markdownEditor&&this.markdownEditor.height(e)}},{key:"onModeChange",value:function(e){this.markdownEditor&&this.markdownEditor.changeMode(e)}},{key:"mounted",value:function(){this.initEditor()}},{key:"destroyed",value:function(){this.destroyEditor()}},{key:"initEditor",value:function(){var e=this,t=document.getElementById(this.id);t&&(this.markdownEditor=new g.a(v({el:t},this.editorOptions)),this.value&&this.markdownEditor.setValue(this.value),this.markdownEditor.on("change",function(){e.$emit("input",e.markdownEditor.getValue())}))}},{key:"destroyEditor",value:function(){this.markdownEditor&&(this.markdownEditor.off("change"),this.markdownEditor.remove(),this.markdownEditor=void 0)}},{key:"focus",value:function(){this.markdownEditor&&this.markdownEditor.focus()}},{key:"setValue",value:function(e){this.markdownEditor&&this.markdownEditor.setValue(e)}},{key:"getValue",value:function(){return this.markdownEditor?this.markdownEditor.getValue():""}},{key:"setHtml",value:function(e){this.markdownEditor&&this.markdownEditor.setHtml(e)}},{key:"getHtml",value:function(){return this.markdownEditor?this.markdownEditor.getHtml():""}},{key:"editorOptions",get:function(){var e=Object.assign({},h,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}}]),t}(m["e"]);d["a"]([Object(m["c"])({required:!0})],y.prototype,"value",void 0),d["a"]([Object(m["c"])({default:b})],y.prototype,"id",void 0),d["a"]([Object(m["c"])({default:function(){return h}})],y.prototype,"options",void 0),d["a"]([Object(m["c"])({default:"markdown"})],y.prototype,"mode",void 0),d["a"]([Object(m["c"])({default:"300px"})],y.prototype,"height",void 0),d["a"]([Object(m["c"])({default:"en_US"})],y.prototype,"language",void 0),d["a"]([Object(m["f"])("value")],y.prototype,"onValueChange",null),d["a"]([Object(m["f"])("language")],y.prototype,"onLanguageChange",null),d["a"]([Object(m["f"])("height")],y.prototype,"onHeightChange",null),d["a"]([Object(m["f"])("mode")],y.prototype,"onModeChange",null),y=d["a"]([Object(m["a"])({name:"MarkdownEditor"})],y);var w=y,k=w,O=r("2877"),x=Object(O["a"])(k,n,a,!1,null,null,null);t["a"]=x.exports},"477b":function(e,t,r){"use strict";var n=r("12ff"),a=r.n(n);a.a},"835f":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{staticClass:"app-container"},[r("head-info",{directives:[{name:"show",rawName:"v-show",value:!e.isTruckEditFormShow,expression:"!isTruckEditFormShow"}],attrs:{info:"",title:"仓储服务"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTruckEditFormShow,expression:"!isTruckEditFormShow"}],staticClass:"app-panel"},[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehousServiceAdd"],expression:"['warehousServiceAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n              新增服务\n            ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.selectValue.keyword,callback:function(t){e.$set(e.selectValue,"keyword",t)},expression:"selectValue.keyword"}},[r("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[r("el-option",{attrs:{label:"服务编码",value:"1"}}),r("el-option",{attrs:{label:"服务名称",value:"2"}})],1)],1),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehousingServiceQ"],expression:"['warehousingServiceQ']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{fixed:"left",prop:"name","min-width":"160",label:"服务名称"}}),r("el-table-column",{attrs:{fixed:"left",prop:"serviceCode","min-width":"200",label:"服务编码"}}),r("el-table-column",{attrs:{prop:"abbr","min-width":"120",label:"服务简称"}}),r("el-table-column",{attrs:{width:"130",label:"关联代理商"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["warehousingServiceAgent"]),type:"text"},on:{click:function(r){return e.associatedAgent(t.row)}}},[e._v("\n                关联代理商\n              ")])]}}])}),r("el-table-column",{attrs:{prop:"createTime",label:"添加时间",width:"180"}}),r("el-table-column",{attrs:{width:"130",label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{staticClass:"switchStyle",attrs:{value:t.row.status,disabled:!e.$checkPermission(["warehousingServiceE"]),"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0"},on:{input:function(r){return e.onStatus(t.row,r)}}})]}}])}),r("el-table-column",{attrs:{fixed:"right",width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehousingServiceC"],expression:"['warehousingServiceC']"}],attrs:{type:"text"},on:{click:function(r){return e.handleCopy(t.row)}}},[e._v("\n                复制\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehousingServiceU"],expression:"['warehousingServiceU']"}],attrs:{type:"text"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("\n                编辑\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehousingServiceD"],expression:"['warehousingServiceD']"}],attrs:{type:"text"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"关联代理商【"+e.currentServiceName+"】",visible:e.isAgentShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isAgentShow=t},close:e.itemAgentClose}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联代理商","已关联代理商"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.agentList},model:{value:e.agentForm.selectAgents,callback:function(t){e.$set(e.agentForm,"selectAgents",t)},expression:"agentForm.selectAgents"}})],1),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.itemAgentClose}},[e._v("\n            取 消\n          ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveAgentConfirm}},[e._v("\n            确 定\n          ")])],1)]),r("el-dialog",{attrs:{title:"关联成本项目类型",visible:e.isCostitemShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isCostitemShow=t},close:e.cancelCostItem}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["成本项目类型","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.costItemList},model:{value:e.associatedForm.costItem,callback:function(t){e.$set(e.associatedForm,"costItem",t)},expression:"associatedForm.costItem"}}),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.cancelCostItem}},[e._v("\n              取 消\n            ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCostItem}},[e._v("\n              确 定\n            ")])],1)],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isTruckEditFormShow,expression:"isTruckEditFormShow"}]},[r("add-edit-form",{ref:"editForm",attrs:{"select-form":e.selectForm,"form-loading":e.formLoading,"is-edit":e.isEdit,"is-copy":e.isCopy},on:{saveConfirm:e.saveConfirm,closeForm:e.closeForm}})],1)],1)])])},a=[],i=(r("8e6e"),r("456d"),r("768b")),o=(r("c5f6"),r("96cf"),r("3b8d")),s=(r("6762"),r("2fdb"),r("a481"),r("5df3"),r("7f7f"),r("7514"),r("ac6a"),r("bd86")),c=r("a8db"),u=r("d225"),l=r("b0b4"),d=r("308d"),m=r("6bb5"),h=r("4e2b"),f=r("9ab4"),g=r("60a3"),p=r("9dba"),v=r("ac1a"),b=r("c3f6"),y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticClass:"app-panel warehouse-edit"},[r("div",{staticClass:"header-top"},[r("div",{staticStyle:{float:"left"}},[e._v("\n      "+e._s(e.isEdit&&!e.isCopy?"编辑仓储服务":"新增仓储服务")+"\n    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.goBack}},[e._v("\n      返 回\n    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveData}},[e._v("\n      保 存\n    ")])],1),r("div",{staticClass:"content"},[r("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"150px",size:"small"}},[r("div",{staticClass:"form-title"},[e._v("\n        基础信息\n      ")]),r("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[r("el-input",{attrs:{maxlength:50,placeholder:"请输入",size:"small"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),r("el-form-item",{attrs:{label:"服务简称",prop:"abbr"}},[r("el-input",{attrs:{maxlength:10,"show-word-limit":"",placeholder:"请输入",size:"small"},model:{value:e.selectForm.abbr,callback:function(t){e.$set(e.selectForm,"abbr",t)},expression:"selectForm.abbr"}})],1),r("el-form-item",{attrs:{label:"服务编码",prop:"serviceCode"}},[r("el-input",{ref:"firstInput",attrs:{size:"small",placeholder:"请输入",maxlength:25,"show-word-limit":""},model:{value:e.selectForm.serviceCode,callback:function(t){e.$set(e.selectForm,"serviceCode",t)},expression:"selectForm.serviceCode"}})],1),r("el-form-item",{attrs:{label:"服务类型",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"small",placeholder:"请选择",filterable:"",clearable:""},on:{focus:e.getSubtypeList},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.subtypeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"分配客户",prop:"belong"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.selectForm.belong,callback:function(t){e.$set(e.selectForm,"belong",t)},expression:"selectForm.belong"}},[r("el-option",{attrs:{label:"直客",value:"0"}}),r("el-option",{attrs:{label:"同行",value:"1"}}),r("el-option",{attrs:{label:"同行&直客",value:"2"}})],1)],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{maxlength:100,size:"small",placeholder:"请输入"},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1),r("div",{staticClass:"form-title"},[e._v("\n        参数&配置\n      ")]),r("el-form-item",{attrs:{label:"重量单位",prop:"umWeight"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:"",loading:e.selectLoading},on:{focus:e.getUmWeightList},model:{value:e.selectForm.umWeight,callback:function(t){e.$set(e.selectForm,"umWeight",t)},expression:"selectForm.umWeight"}},e._l(e.umWeightList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label+"-"+e.value,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"体积单位",prop:"umVolume"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择"},on:{focus:e.getUmVolumeList},model:{value:e.selectForm.umVolume,callback:function(t){e.$set(e.selectForm,"umVolume",t)},expression:"selectForm.umVolume"}},e._l(e.umVolumeList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label+"-"+e.value,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"长度单位",prop:"umLength"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:"",loading:e.selectLoading},on:{focus:e.getUmLengthList},model:{value:e.selectForm.umLength,callback:function(t){e.$set(e.selectForm,"umLength",t)},expression:"selectForm.umLength"}},e._l(e.umLengthList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label+"-"+e.value,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"是否验货",prop:"examine"}},[r("el-radio-group",{on:{change:function(t){e.selectForm.examineId=void 0}},model:{value:e.selectForm.examine,callback:function(t){e.$set(e.selectForm,"examine",t)},expression:"selectForm.examine"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n            否\n          ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n            是\n          ")])],1)],1),e.selectForm.examine?r("el-form-item",{attrs:{label:"验货配置",prop:"examineId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.loading,size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getExamineList},model:{value:e.selectForm.examineId,callback:function(t){e.$set(e.selectForm,"examineId",t)},expression:"selectForm.examineId"}},e._l(e.examineList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),r("div",{staticClass:"form-title"},[e._v("\n        运输条款\n      ")])],1),r("div",[r("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab",toolbarItems:["heading","bold","italic"]},height:"300px"},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}})],1)],1)])},w=[],k=r("16d8"),O=r("dcc4"),x=function(e){function t(){var e;return Object(u["a"])(this,t),e=Object(d["a"])(this,Object(m["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.serviceCode=[],e.examineList=[],e.subtypeList=[],e.umLengthList=[],e.umWeightList=[],e.umVolumeList=[],e.terms="",e.formRules={name:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],abbr:[{required:!0,message:"服务简称不能为空",trigger:"blur"}],serviceCode:[{required:!0,message:"服务编码不能为空",trigger:"blur"}],belong:[{required:!0,message:"请选择分配客户",trigger:"change"}],umLength:[{required:!0,message:"请选择长度单位",trigger:"change"}],umWeight:[{required:!0,message:"请选择重量单位",trigger:"change"}],umVolume:[{required:!0,message:"请选择体积单位",trigger:"change"}],examine:[{required:!0,message:"请选择是否验货",trigger:"change"}],examineId:[{required:!0,message:"请选择验货配置",trigger:"change"}]},e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"getUmLengthList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(O["n"])({type:"measurement_type"}).then(function(e){t.selectLoading=!1,e.success&&(t.umLengthList=e.data||[])}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getUmWeightList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(O["n"])({type:"weight_type"}).then(function(e){t.selectLoading=!1,e.success&&(t.umWeightList=e.data||[])}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getUmVolumeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(O["n"])({type:"VOLUME_TYPE"}).then(function(e){t.selectLoading=!1,e.success&&(t.umVolumeList=e.data||[])}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setTerms",value:function(e){this.$refs.markdownEditor.setHtml(e)}},{key:"setData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSubtypeList();case 2:return e.next=4,this.getExamineList();case 4:return e.next=6,this.getUmLengthList();case 6:return e.next=8,this.getUmWeightList();case 8:return e.next=10,this.getUmVolumeList();case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"goBack",value:function(){this.$emit("closeForm")}},{key:"saveData",value:function(){var e=this.selectForm;this.examineList.map(function(t){e.examineId===t.id&&(e.examineName=t.name)}),this.subtypeList.map(function(t){e.subtypeId===t.id&&(e.subtypeName=t.name)});var t=this.$refs.markdownEditor.getHtml();this.$emit("saveConfirm",t)}},{key:"getSsData",value:function(){var e=this;this.loading=!0;var t={page:1,size:9999};Object(b["k"])(t).then(function(t){e.loading=!1;var r=t.data||{};e.serviceCode=r.result||[]}).catch(function(t){return e.loading=!1,t})}},{key:"getSubtypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t={typeId:"04"},e.next=4,Object(b["i"])(t).then(function(e){r.subtypeList=e.data||[],r.loading=!1}).catch(function(e){return r.loading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getExamineList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,t={page:1,size:9999},e.next=4,Object(b["h"])(t).then(function(e){r.loading=!1;var t=e.data||{};r.examineList=t.result||[]}).catch(function(e){return r.loading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(g["e"]);x=f["a"]([Object(g["a"])({name:"TruckServiceForm",components:{MarkdownEditor:k["a"]},props:{selectForm:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1},isCopy:{type:Boolean,default:!1},formLoading:{type:Boolean,default:!1}}})],x);var j=x,L=j,S=(r("477b"),r("2877")),F=Object(S["a"])(L,y,w,!1,null,"4ddd9c9a",null),C=F.exports;function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(){return{abbr:void 0,belong:void 0,createTime:void 0,custId:void 0,custName:void 0,examine:!0,examineId:void 0,examineName:void 0,id:void 0,name:void 0,serviceCode:void 0,status:void 0,subtypeId:void 0,subtypeName:void 0,terms:void 0,umLength:void 0,umVolume:void 0,umWeight:void 0,remark:void 0}}var A=function(e){function t(){var e;return Object(u["a"])(this,t),e=Object(d["a"])(this,Object(m["a"])(t).apply(this,arguments)),e.loading=!1,e.isAddEditVisible=!1,e.isEdit=!1,e.isCopy=!1,e.isTruckEditFormShow=!1,e.tableData=[],e.agentList=[],e.currentId="",e.agentForm={selectAgents:[]},e.associatedForm={costItem:[]},e.selectValue={keyword:void 0},e.selectForm=T(),e.formLoading=!1,e.subTypeList=[],e.dialogLoading=!1,e.isAgentShow=!1,e.isCostitemShow=!1,e.costItemList=[],e.currentServiceId="",e.currentServiceName="",e.props={label:"name",value:"id"},e.selectType="1",e.page=1,e.size=10,e.total=0,e}return Object(h["a"])(t,e),Object(l["a"])(t,[{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var r={custId:this.custId,countryId:this.selectValue.countryId,page:this.page,size:this.size};switch(this.selectType){case"1":r.code=this.selectValue.keyword;break;case"2":r.name=this.selectValue.keyword;break}Object(b["n"])(r).then(function(e){t.loading=!1;var r=e.data||{};t.tableData=r.result||[],t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"handleDelete",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(b["a"])(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"handleAdd",value:function(){var e=this;this.isEdit=!1,this.isCopy=!1,this.isTruckEditFormShow=!0,this.$nextTick(function(){var t=e.$refs.editForm;t.setTerms("")})}},{key:"cancel",value:function(){this.isAddEditVisible=!1,this.resetForm()}},{key:"closeForm",value:function(){this.isTruckEditFormShow=!1,this.resetForm()}},{key:"saveConfirm",value:function(e){var t=this,r=this.$refs.editForm,n=r.$refs.selectForm;n.validate(function(r){if(!r)return!1;t.formLoading=!0;var n=t.selectForm,a=(n.terms,Object(c["a"])(n,["terms"])),i=I({},a);i.terms=e,i.custId=t.custId,i.custName=t.custName,Object(b["t"])(i).then(function(e){t.$message({type:"success",message:"保存成功"}),t.formLoading=!1,t.isTruckEditFormShow=!1,t.resetForm(),t.queryAll()}).catch(function(e){return t.formLoading=!1,e})})}},{key:"formatData",value:function(e){var t=this;return e.forEach(function(e){0===e.children.length?delete e.children:t.formatData(e.children)}),e}},{key:"resetForm",value:function(){this.selectForm=T(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.editForm,t=e.$refs.selectForm;this.$nextTick(function(){t.clearValidate()})}},{key:"saveAgentConfirm",value:function(){var e=this;this.dialogLoading=!0;var t=this.agentForm.selectAgents.map(function(t){var r,n=e.agentList.find(function(e){return e.id===t})||{},a=n.name;return r={id:t,name:a},r}),r={agents:t,id:this.currentServiceId};Object(b["q"])(r).then(function(t){e.$message({type:"success",message:"保存成功"}),e.itemAgentClose(),e.queryAll(),e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"associatedAgent",value:function(e){var t=this;this.isAgentShow=!0,this.currentServiceId=e.id,this.currentServiceName=e.name,this.dialogLoading=!0;var r={sscId:e.id};Promise.all([this.getAgentById(r),this.getCustTypeList((e||{}).subtypeId)]).then(function(e){t.dialogLoading=!1}).catch(function(e){return t.dialogLoading=!1,e})}},{key:"getAgentById",value:function(e){var t=this;return Object(b["b"])(e).then(function(e){var r=e.data;t.agentForm.selectAgents=r.map(function(e){return e.id})}).catch(function(e){return e})}},{key:"getCustTypeList",value:function(e){var t=this,r={page:1,size:9999,cas:"A",typeId:"04",subtypeId:e};return Object(b["g"])(r).then(function(e){var r=e.data||{},n=r.result||[];t.agentList=JSON.parse(JSON.stringify(n).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e})}},{key:"associatedProject",value:function(e){var t=this,r=e.id;this.currentServiceId=r,this.isCostitemShow=!0,this.dialogLoading=!0,Promise.all([this.getServerProjectList(r),this.getCostitemTypeList()]).then(function(e){t.dialogLoading=!1}).catch(function(e){return t.dialogLoading=!1,e})}},{key:"getCostitemTypeList",value:function(){var e=this;return Object(b["f"])({serviceTypeId:"04"}).then(function(t){var r=t.data||[];e.costItemList=r}).catch(function(e){return e})}},{key:"getServerProjectList",value:function(e){var t=this,r={id:e};return Object(b["j"])(r).then(function(e){var r=e.data||[];t.associatedForm.costItem=r.map(function(e){return e.id})||[]}).catch(function(e){return e})}},{key:"cancelCostItem",value:function(){this.isCostitemShow=!1,this.costItemList=[];var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"saveCostItem",value:function(){var e=this;this.dialogLoading=!0;var t=this.associatedForm.costItem,r=this.costItemList.filter(function(e){return t.includes(e.id)}).map(function(e){return{id:e.id,name:e.name}}),n={ssId:this.currentServiceId,costitemTypes:r};Object(b["s"])(n).then(function(t){e.$message({type:"success",message:"更新成功"}),e.cancelCostItem(),e.associatedForm.costItem=[],e.dialogLoading=!1,e.queryAll()}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"handleEdit",value:function(e){var t=this;this.currentId=e.id;var r=e.terms,n=Object(c["a"])(e,["terms"]);this.selectForm=I({},n),this.isEdit=!0,this.isCopy=!1,this.isTruckEditFormShow=!0,this.$nextTick(Object(o["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.formLoading=!0,n=t.$refs.editForm,n.setTerms(r),e.next=5,n.setData();case 5:t.formLoading=!1;case 6:case"end":return e.stop()}},e)})))}},{key:"handleCopy",value:function(e){var t=this;this.currentId=e.id;var r=e.terms,n=(e.id,e.name,e.abbr,e.serviceCode,Object(c["a"])(e,["terms","id","name","abbr","serviceCode"]));this.selectForm=I({},n),this.isEdit=!0,this.isCopy=!0,this.isTruckEditFormShow=!0,this.$nextTick(Object(o["a"])(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t.formLoading=!0,n=t.$refs.editForm,n.setTerms(r),e.next=5,n.setData();case 5:t.formLoading=!1;case 6:case"end":return e.stop()}},e)})))}},{key:"close",value:function(){this.isAddEditVisible=!1,this.resetForm()}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"onStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,r){var n,a,o,s,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.status&&t.status!==r){e.next=2;break}return e.abrupt("return");case 2:return n="0"===r?"禁用":"开启",e.next=5,this.$confirm("此操作将".concat(n,"该仓储服务，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 5:if(a=e.sent,o=Object(i["a"])(a,2),s=o[0],o[1],!s){e.next=11;break}return e.abrupt("return");case 11:Object(b["p"])({id:t.id,status:r}).then(function(e){c.$message.success("修改成功"),c.queryAll()}).catch(function(e){return e});case 12:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"filterMethod",value:function(e,t){var r=t.name||"";return r.indexOf(e)>-1}},{key:"itemAgentClose",value:function(){this.isAgentShow=!1,this.agentList=[];var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"created",value:function(){this.queryAll()}},{key:"custId",get:function(){var e=p["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=p["a"].info||{},t=e.custName;return t}},{key:"labelPosition",get:function(){var e=v["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=v["a"].language;return e||"en"}}]),t}(g["e"]);A=f["a"]([Object(g["a"])({name:"Port",components:{AddEditForm:C},props:{}})],A);var $=A,_=$,V=(r("f898"),Object(S["a"])(_,n,a,!1,null,"548ae060",null));t["default"]=V.exports},c3f6:function(e,t,r){"use strict";r.d(t,"n",function(){return a}),r.d(t,"t",function(){return i}),r.d(t,"p",function(){return o}),r.d(t,"a",function(){return s}),r.d(t,"b",function(){return c}),r.d(t,"q",function(){return u}),r.d(t,"g",function(){return l}),r.d(t,"k",function(){return d}),r.d(t,"h",function(){return m}),r.d(t,"i",function(){return h}),r.d(t,"j",function(){return f}),r.d(t,"s",function(){return g}),r.d(t,"f",function(){return p}),r.d(t,"l",function(){return v}),r.d(t,"o",function(){return b}),r.d(t,"u",function(){return y}),r.d(t,"e",function(){return w}),r.d(t,"d",function(){return k}),r.d(t,"r",function(){return O}),r.d(t,"c",function(){return x}),r.d(t,"m",function(){return j});var n=r("b32d");function a(e){var t={url:"/cfg/ssc/getSscList",method:"get",params:e};return Object(n["a"])(t)}function i(e){var t={url:"/cfg/ssc/saveSsc",method:"post",data:e};return Object(n["a"])(t)}function o(e){var t={url:"/cfg/ssc/changeStatus",method:"post",params:e};return Object(n["a"])(t)}function s(e){var t={url:"/cfg/ssc/deleteSsc",method:"delete",params:e};return Object(n["a"])(t)}function c(e){var t={url:"/cfg/ssc/getAgentList",method:"get",params:e};return Object(n["a"])(t)}function u(e){var t={url:"/cfg/ssc/saveAgent",method:"post",data:e};return Object(n["a"])(t)}function l(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(n["a"])(t)}function d(e){var t={url:"/cfg/ss/getSsList",method:"get",params:e};return Object(n["a"])(t)}function m(e){var t={url:"/cfg/examine/getExamineList",method:"get",params:e};return Object(n["a"])(t)}function h(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(n["a"])(t)}function f(e){var t={url:"/cfg/ssc/getSsCostitemType",method:"get",params:e};return Object(n["a"])(t)}function g(e){var t={url:"/cfg/ssc/saveSsCostitemType",method:"post",data:e};return Object(n["a"])(t)}function p(e){var t={url:"/finance/costitem/getCostitemTypeList",method:"get",params:e};return Object(n["a"])(t)}function v(e){var t={url:"/auth/custtype/getSubtypeByCustAndType",method:"get",params:e};return Object(n["a"])(t)}function b(e){var t={url:"/wms/warehouse/server/cat",method:"get",params:e};return Object(n["a"])(t)}function y(e){var t={url:"/wms/warehouse/server/save",method:"post",data:e};return Object(n["a"])(t)}function w(e){var t={url:"/finance/costitem/ws",method:"post",data:e};return Object(n["a"])(t)}function k(e){var t={url:"/finance/r/get",method:"post",params:e};return Object(n["a"])(t)}function O(e){var t={url:"/finance/r/save",method:"post",data:e};return Object(n["a"])(t)}function x(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(n["a"])(t)}function j(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(n["a"])(t)}},dcc4:function(e,t,r){"use strict";r.d(t,"p",function(){return a}),r.d(t,"h",function(){return i}),r.d(t,"j",function(){return o}),r.d(t,"l",function(){return s}),r.d(t,"f",function(){return c}),r.d(t,"k",function(){return u}),r.d(t,"g",function(){return l}),r.d(t,"a",function(){return d}),r.d(t,"b",function(){return m}),r.d(t,"c",function(){return h}),r.d(t,"q",function(){return f}),r.d(t,"s",function(){return g}),r.d(t,"o",function(){return p}),r.d(t,"d",function(){return v}),r.d(t,"n",function(){return b}),r.d(t,"m",function(){return y}),r.d(t,"r",function(){return w}),r.d(t,"i",function(){return k}),r.d(t,"e",function(){return O});var n=r("b32d");function a(e){var t={url:"/cfg/bs/addBs",method:"post",data:e};return Object(n["a"])(t)}function i(e){var t={url:"/cfg/bs/getByIds",method:"post",data:e};return Object(n["a"])(t)}function o(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(n["a"])(e)}function s(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(n["a"])(t)}function c(e){var t={url:"/cfg/bs/getBsList",method:"post",data:e};return Object(n["a"])(t)}function u(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(n["a"])(t)}function l(e){var t={url:"/cfg/bs/getBsTransList",method:"post",data:e};return Object(n["a"])(t)}function d(e){var t={url:"/cfg/bs/changeStatus",method:"post",params:e};return Object(n["a"])(t)}function m(e){var t={url:"/cfg/bs/del",method:"get",params:e};return Object(n["a"])(t)}function h(e){var t={url:"/cfg/bs/deleteBsTrans",method:"delete",params:e};return Object(n["a"])(t)}function f(e){var t={url:"/cfg/bs/saveBsTrans",method:"post",data:e};return Object(n["a"])(t)}function g(e){var t={url:"/cfg/bs/updateBsTrans",method:"put",data:e};return Object(n["a"])(t)}function p(e){var t={url:"/cfg/bs/saveAgent",method:"post",data:e};return Object(n["a"])(t)}function v(e){var t={url:"/cfg/bs/getAgentList",method:"get",params:e};return Object(n["a"])(t)}function b(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(n["a"])(t)}function y(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(n["a"])(t)}function w(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(n["a"])(t)}function k(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(n["a"])(t)}function O(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(n["a"])(t)}},f898:function(e,t,r){"use strict";var n=r("15ff"),a=r.n(n);a.a}}]);