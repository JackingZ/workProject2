(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["booking-order"],{"258d":function(e,t,i){},"2cb0":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[i("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:"index"===e.showPage,expression:"showPage === 'index'"}],staticClass:"app-container"},[i("head-info",{attrs:{info:"",title:"订舱订单"}}),i("div",{staticClass:"app-panel"},[i("div",{staticStyle:{"text-align":"right"}},["0"===e.custType||"2"===e.custType?i("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"订单类型",size:"small"},on:{change:e.onOrderType},model:{value:e.searchForm.orderType,callback:function(t){e.$set(e.searchForm,"orderType",t)},expression:"searchForm.orderType"}},e._l(e.orderTypeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"1"===e.custSubtype&&"0"===e.searchForm.orderType?i("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"公司类型",clearable:""},on:{change:e.onComType},model:{value:e.searchForm.comType,callback:function(t){e.$set(e.searchForm,"comType",t)},expression:"searchForm.comType"}},e._l(e.companyTypeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):e._e(),"0"!==e.custType&&"2"!==e.custType||"0"!==e.searchForm.orderType?e._e():i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.searchForm.comId,callback:function(t){e.$set(e.searchForm,"comId",t)},expression:"searchForm.comId"}},e._l(e.companyList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"业务类型",filterable:"",clearable:""},on:{change:e.onBusiness,focus:e.getSubtypeData},model:{value:e.searchForm.businessType,callback:function(t){e.$set(e.searchForm,"businessType",t)},expression:"searchForm.businessType"}},e._l(e.typeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{disabled:!e.searchForm.businessType,loading:e.selectLoading,placeholder:"订单状态",size:"small",clearable:"",filterable:""},on:{focus:e.getStatusData},model:{value:e.searchForm.orderStatus,callback:function(t){e.$set(e.searchForm,"orderStatus",t)},expression:"searchForm.orderStatus"}},e._l(e.statusList,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1),i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"目的港",size:"small"},on:{focus:e.getPortList},model:{value:e.searchForm.portsToId,callback:function(t){e.$set(e.searchForm,"portsToId",t)},expression:"searchForm.portsToId"}},e._l(e.portList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"服务条款",size:"small"},on:{focus:e.getWordsList},model:{value:e.searchForm.serverTerms,callback:function(t){e.$set(e.searchForm,"serverTerms",t)},expression:"searchForm.serverTerms"}},e._l(e.serveceList,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),i("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"放货条款",size:"small"},model:{value:e.searchForm.goodsClause,callback:function(t){e.$set(e.searchForm,"goodsClause",t)},expression:"searchForm.goodsClause"}},e._l(e.goodsList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.searchForm.businessType,loading:e.selectLoading,clearable:"",filterable:"",placeholder:"服务",size:"small"},on:{focus:e.getBsService,change:function(t){e.searchForm.orgId=void 0,e.bsTransList=[]}},model:{value:e.searchForm.serviceId,callback:function(t){e.$set(e.searchForm,"serviceId",t)},expression:"searchForm.serviceId"}},e._l(e.serviceList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.searchForm.serviceId,clearable:"",filterable:"",size:"small",placeholder:"服务商"},on:{focus:e.getBsTransList},model:{value:e.searchForm.orgId,callback:function(t){e.$set(e.searchForm,"orgId",t)},expression:"searchForm.orgId"}},e._l(e.bsTransList,function(e){return i("el-option",{key:e.id,attrs:{label:e.orgName+"/"+e.serviceCode,value:e.orgId}})}),1),i("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{clearable:"","unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"订舱起始时间","end-placeholder":"订舱截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),i("el-input",{staticClass:"input-with-select",staticStyle:{width:"240px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[i("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[i("el-option",{attrs:{label:"原单号",value:"1"}}),i("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"===e.searchForm.businessType||"2"===e.searchForm.businessType,expression:"searchForm.businessType === '1' || searchForm.businessType === '2'"}],attrs:{label:"SO号",value:"2"}}),i("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"===e.searchForm.businessType||"2"===e.searchForm.businessType,expression:"searchForm.businessType === '1' || searchForm.businessType === '2'"}],attrs:{label:"柜号",value:"3"}}),i("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"===e.searchForm.businessType,expression:"searchForm.businessType === '0'"}],attrs:{label:"提单号",value:"4"}}),i("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"===e.searchForm.businessType,expression:"searchForm.businessType === '0'"}],attrs:{label:"航空单号",value:"5"}})],1)],1),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingOrderQuery"],expression:"['bookingOrderQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableData(1)}}},[e._v("\n            查询\n          ")])],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 250px)"}},[e.tableData.length>0?i("el-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 300px)",border:""}},[i("el-table-column",{attrs:{fixed:"left",prop:"markNo",label:"原单号","min-width":"180","show-overflow-tooltip":""}}),"1"===e.searchForm.businessType?i("el-table-column",{attrs:{fixed:"left",prop:"soCode",label:"SO号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.soCode||"-")+"\n              ")]}}],null,!1,564337601)}):e._e(),"0"===e.searchForm.businessType?i("el-table-column",{attrs:{fixed:"left",prop:"billNo",label:"提单号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.billNo||"-")+"\n              ")]}}],null,!1,648134554)}):e._e(),"0"===e.searchForm.businessType?i("el-table-column",{attrs:{fixed:"left",prop:"airNo",label:"航空单号","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.airNo||"-")+"\n              ")]}}],null,!1,2703078379)}):e._e(),i("el-table-column",{attrs:{fixed:"left",prop:"",formatter:e.formatStatus,label:"订单状态",width:"120"}}),i("el-table-column",{attrs:{prop:"audit",label:"审核状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.audit?i("span",[e._v("待审核")]):"1"===t.row.audit?i("span",[e._v("审核通过")]):"2"===t.row.audit?i("span",[e._v("审核拒绝")]):e._e()]}}],null,!1,1049201113)}),i("el-table-column",{attrs:{prop:"businessType",label:"业务类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.businessType?i("span",[e._v("空运")]):"1"===t.row.businessType?i("span",[e._v("海运")]):"2"===t.row.businessType?i("span",[e._v("铁路")]):"4"===t.row.businessType?i("span",[e._v("卡航")]):e._e()]}}],null,!1,1224297036)}),i("el-table-column",{attrs:{prop:"bsServiceName",label:"服务","min-width":"150","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"portsFromName",label:"起运港",width:"180"}}),i("el-table-column",{attrs:{prop:"portsToName",label:"目的港",width:"180"}}),i("el-table-column",{attrs:{prop:"supplierName",label:"供应商名称",width:"180","show-overflow-tooltip":""}}),i("el-table-column",{attrs:{prop:"custName",label:"下单客户",width:"180","show-overflow-tooltip":""}}),"1"===e.searchForm.businessType?i("el-table-column",{attrs:{label:"起运港提柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatContain(t.row,"251"))+"\n              ")]}}],null,!1,57053563)}):e._e(),"1"===e.searchForm.businessType?i("el-table-column",{attrs:{label:"起运港已装柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatContain(t.row,"252"))+"\n              ")]}}],null,!1,3337495448)}):e._e(),"1"===e.searchForm.businessType?i("el-table-column",{attrs:{label:"起运港已还柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatContain(t.row,"255"))+"\n              ")]}}],null,!1,3157835007)}):e._e(),"1"===e.searchForm.businessType?i("el-table-column",{attrs:{label:"目的港已提柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatContain(t.row,"256"))+"\n              ")]}}],null,!1,2143309596)}):e._e(),"1"===e.searchForm.businessType?i("el-table-column",{attrs:{label:"目的港已还柜",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e.formatContain(t.row,"257"))+"\n              ")]}}],null,!1,3968928061)}):e._e(),i("el-table-column",{attrs:{prop:"createTime",label:"下单时间",width:"180"}}),i("el-table-column",{attrs:{label:"操作",fixed:"right",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingOrderView"],expression:"['bookingOrderView']"}],attrs:{type:"text"},on:{click:function(i){return e.viewData(t.row)}}},[e._v("\n                  查看\n                ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"3"===e.custType&&"1"!==t.row.audit,expression:"custType === '3' && scope.row.audit !== '1'"}],attrs:{type:"text"},on:{click:function(i){return e.auditData(t.row)}}},[e._v("\n                  审核\n                ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:("3"===e.custType||"0"===e.custType)&&"4"!==t.row.businessType,expression:"(custType === '3' || custType === '0') && scope.row.businessType !== '4'"}],attrs:{type:"text"},on:{click:function(i){return e.editData(t.row)}}},[e._v("\n                  订单进度\n                ")]),"0"!==e.custType||t.row.supplierId?e._e():i("el-button",{attrs:{type:"text"},on:{click:function(i){return e.viewSupperier(t.row)}}},[e._v("\n                  指定供应商\n                ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"1"===t.row.status&&e.$checkPermission(["bookingOrderCancel"]),expression:"scope.row.status === '1' && $checkPermission(['bookingOrderCancel'])"}],attrs:{type:"text"},on:{click:function(i){return e.cancelData(t.row)}}},[e._v("\n                  取消\n                ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"2"===t.row.status&&e.$checkPermission(["bookingOrderDelete"]),expression:"scope.row.status === '2' && $checkPermission(['bookingOrderDelete'])"}],attrs:{type:"text"},on:{click:function(i){return e.deleteData(t.row)}}},[e._v("\n                  删除\n                ")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingOrderFinancial"],expression:"['bookingOrderFinancial']"}],attrs:{type:"text"},on:{click:function(i){return e.showFinancial(t.row)}}},[e._v("\n                  账单信息\n                ")])]}}],null,!1,887198151)})],1):e._e(),e.tableData.length>0?i("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"financial"===e.showPage,expression:"showPage === 'financial'"}],staticClass:"app-container"},[i("order-financial",{ref:"financial",on:{back:function(t){e.showPage="index"}}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"detail"===e.showPage,expression:"showPage === 'detail'"}],staticClass:"app-container"},[i("detail",{ref:"detailForm",attrs:{"line-list":e.serviceList},on:{back:function(t){e.showPage="index"}}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"collapse"===e.showPage,expression:"showPage === 'collapse'"}],staticClass:"app-container"},[i("collapseItem",{ref:"itemForm",attrs:{"order-type":e.searchForm.orderType,"order-code":e.orderCode},on:{back:function(t){e.showPage="index"},search:e.getTableData}})],1)]),i("el-dialog",{attrs:{title:"指定供应商",width:"600px","close-on-click-modal":!1,visible:e.isSupperierVisible},on:{"update:visible":function(t){e.isSupperierVisible=t},close:e.cancelSupperier}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[i("el-form",{ref:"supperierForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.supperierForm,rules:e.rules,"label-width":"100px",size:"small"}},[i("el-form-item",{attrs:{label:"指派方式",prop:"isDefault"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.onSupperType},model:{value:e.supperierForm.isDefault,callback:function(t){e.$set(e.supperierForm,"isDefault",t)},expression:"supperierForm.isDefault"}},[i("el-option",{attrs:{label:"默认供应商",value:1}}),i("el-option",{attrs:{label:"指定供应商",value:0}})],1)],1),i("el-form-item",{attrs:{label:"供应商",prop:"supplierId"}},[1===e.supperierForm.isDefault?i("el-input",{attrs:{placeholder:"请输入",readonly:""},model:{value:e.supperierForm.supplierName,callback:function(t){e.$set(e.supperierForm,"supplierName",t)},expression:"supperierForm.supplierName"}}):0===e.supperierForm.isDefault?i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",loading:e.selectLoading},on:{focus:e.getCustTypeList},model:{value:e.supperierForm.supplierId,callback:function(t){e.$set(e.supperierForm,"supplierId",t)},expression:"supperierForm.supplierId"}},e._l(e.supplierList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e()],1)],1),i("div",{staticStyle:{"text-align":"right","padding-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancelSupperier}},[e._v("\n          取 消\n        ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSupperier}},[e._v("\n          确 定\n        ")])],1)],1)]),i("el-dialog",{attrs:{title:"审核状态",width:"600px","close-on-click-modal":!1,visible:e.isAuditVisible},on:{"update:visible":function(t){e.isAuditVisible=t},close:e.cancelAudit}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[i("el-form",{ref:"checkForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.checkForm,rules:e.checkRules,"label-width":"100px",size:"small"}},[i("el-form-item",{attrs:{label:"审核状态",prop:"audit"}},[i("el-radio-group",{on:{change:function(t){e.checkForm.reason=""}},model:{value:e.checkForm.audit,callback:function(t){e.$set(e.checkForm,"audit",t)},expression:"checkForm.audit"}},[i("el-radio",{attrs:{label:"1"}},[e._v("\n              审核通过\n            ")]),i("el-radio",{attrs:{label:"2"}},[e._v("\n              审核拒绝\n            ")])],1)],1),"2"===e.checkForm.audit?i("el-form-item",{attrs:{label:"拒绝原因"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入"},model:{value:e.checkForm.reason,callback:function(t){e.$set(e.checkForm,"reason",t)},expression:"checkForm.reason"}})],1):e._e()],1),i("div",{staticStyle:{"text-align":"right","padding-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancelAudit}},[e._v("\n          取 消\n        ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmAudit}},[e._v("\n          确 定\n        ")])],1)],1)])],1)},s=[],a=(i("8e6e"),i("ac6a"),i("456d"),i("96cf"),i("3b8d")),n=(i("c5f6"),i("bd86")),o=i("a8db"),l=(i("a481"),i("7f7f"),i("d225")),c=i("b0b4"),u=i("308d"),d=i("6bb5"),m=i("4e2b"),p=i("9ab4"),f=i("60a3"),h=i("9dba"),v=i("b70c"),g=i("dcc4"),y=i("e3f0"),b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"item-form"},[i("div",{staticClass:"item-back"},[i("span",{staticStyle:{float:"left"}},[e._v("原单号："+e._s(e.orderCode))]),i("span",{staticStyle:{cursor:"pointer"},on:{click:e.goBack}},[i("i",{staticClass:"el-icon-back"}),i("span",[e._v("返回")])])]),i("div",[i("el-select",{staticStyle:{width:"200px",margin:"10px 0 0 20px"},attrs:{loading:e.selectLoading,disabled:"0"!==e.orderType,size:"small",placeholder:"订单状态",filterable:""},on:{change:e.onStatus},model:{value:e.formStatus,callback:function(t){e.formStatus=t},expression:"formStatus"}},e._l(e.statusList,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isSave,expression:"isSave"}],staticStyle:{"margin-left":"10px"},attrs:{disabled:"0"!==e.orderType,loading:e.btnLoading,type:"primary",size:"small"},on:{click:e.saveStatus}},[e._v("\n      保存\n    ")])],1),i("div",{staticStyle:{padding:"5px 20px 20px","background-color":"#fff"}},[i("el-collapse",{on:{change:e.handleChange},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!!e.isEffect||!!e.formStatus,expression:"!!isEffect || !!formStatus"}],attrs:{name:"1"}},[i("template",{slot:"title"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("舱单信息")])]),i("oneForm",{directives:[{name:"show",rawName:"v-show",value:"1"===e.isType||"2"===e.isType,expression:"isType === '1' || isType === '2'"}],ref:"oneForm",attrs:{"is-status":e.formStatus,"is-effect":e.isEffect,"is-order":e.isOrder,"order-type":e.orderType},on:{refresh:function(t){return e.onRefresh("1")},btnLoad:e.setBtn}}),i("fourForm",{directives:[{name:"show",rawName:"v-show",value:"0"===e.isType,expression:"isType === '0'"}],ref:"fourForm",attrs:{"is-status":e.formStatus,"is-effect":e.isEffect,"is-order":e.isOrder,"order-type":e.orderType},on:{refresh:function(t){return e.onRefresh("4")}}})],2),i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!!e.isEffect&&("1"===e.isType||"2"===e.isType),expression:"!!isEffect && (isType === '1' || isType === '2')"}],attrs:{name:"4"}},[i("template",{slot:"title"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("提单信息")])]),i("fiveForm",{ref:"fiveForm",attrs:{"is-status":e.formStatus,"is-effect":e.isEffect,"is-order":e.isOrder,"order-type":e.orderType},on:{refresh:function(t){return e.onRefresh("5")}}})],2),i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!!e.isEffect&&("1"===e.isType||"2"===e.isType),expression:"!!isEffect && (isType === '1' || isType === '2')"}],attrs:{name:"2"}},[i("template",{slot:"title"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("货柜信息")])]),i("twoForm",{ref:"twoForm",attrs:{"is-status":e.formStatus,"is-effect":e.isEffect,"is-order":e.isOrder,"order-type":e.orderType},on:{refresh:function(t){return e.onRefresh("2")}}})],2),i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:("1"===e.isType||"2"===e.isType)&&e.formStatus&&"202"!==e.formStatus&&"207"!==e.formStatus&&"208"!==e.formStatus&&("204"===e.formStatus||e.isThrow),expression:"(isType === '1' || isType === '2') && formStatus && formStatus !== '202' && formStatus !== '207' && formStatus !== '208' && (formStatus === '204' || isThrow)"}],attrs:{name:"3"}},[i("template",{slot:"title"},[i("span",{staticStyle:{"font-size":"16px","font-weight":"bold"}},[e._v("甩柜信息")])]),i("threeForm",{ref:"threeForm",attrs:{"is-status":e.formStatus,"is-effect":e.isEffect,"is-order":e.isOrder,"order-type":e.orderType},on:{refresh:function(t){return e.onRefresh("3")}}})],2)],1)],1)])},k=[],w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticStyle:{"text-align":"right",padding:"0 20px 10px 0"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.isEffect&&!e.isEdit,expression:"!!isEffect && !isEdit"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.editForm}},[e._v("\n      编辑\n    ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEffect||e.isEdit,expression:"!isEffect || isEdit"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.saveForm}},[e._v("\n      保存\n    ")])],1),i("el-form",{ref:"selectForm",staticClass:"one-form",class:e.isDragFile?"active-form":"",attrs:{id:"dragDropForm",model:e.selectForm,rules:e.formRules,disabled:!e.isEdit&&!!e.isEffect,"label-width":"110px",size:"small"},nativeOn:{dragover:function(t){return t.preventDefault(),e.onDragover(t)},dragenter:function(t){return t.preventDefault(),e.onDragenter(t)},dragleave:function(t){return t.stopPropagation(),t.preventDefault(),e.onDragleave(t)},drop:function(t){return t.preventDefault(),e.onDragdrop(t)}}},[e.isDragFile?i("div",{staticClass:"active-tip"},[i("span",[e._v("释放鼠标，上传文件")])]):e._e(),i("el-form-item",{attrs:{label:"SO号码",prop:"soCode"}},[i("el-input",{attrs:{disabled:e.selectForm.filled,"show-word-limit":"",maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.soCode,callback:function(t){e.$set(e.selectForm,"soCode",t)},expression:"selectForm.soCode"}})],1),i("el-form-item",{attrs:{label:"船名",prop:"freighter"}},[i("el-input",{attrs:{maxlength:50,"show-word-limit":"",placeholder:"请输入"},model:{value:e.selectForm.freighter,callback:function(t){e.$set(e.selectForm,"freighter",t)},expression:"selectForm.freighter"}})],1),i("el-form-item",{attrs:{label:"航次",prop:"ship"}},[i("el-input",{attrs:{maxlength:20,"show-word-limit":"",placeholder:"请输入"},model:{value:e.selectForm.ship,callback:function(t){e.$set(e.selectForm,"ship",t)},expression:"selectForm.ship"}})],1),i("el-form-item",{attrs:{label:"服务机构",prop:"orgId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",placeholder:"请输入",clearable:"",filterable:""},on:{focus:e.getBsTransData,change:e.onBsTran},model:{value:e.selectForm.orgId,callback:function(t){e.$set(e.selectForm,"orgId",t)},expression:"selectForm.orgId"}},e._l(e.bsTransList,function(e){return i("el-option",{key:e.id,attrs:{label:e.serviceCode+"-"+e.orgName,value:e.orgId}})}),1)],1),i("el-form-item",{attrs:{label:"二程服务机构"}},[i("el-input",{attrs:{placeholder:"请输入",disabled:""},model:{value:e.selectForm.orgName2,callback:function(t){e.$set(e.selectForm,"orgName2",t)},expression:"selectForm.orgName2"}})],1),i("el-form-item",{attrs:{label:"收货地址",prop:"receiptAddress"}},[i("el-input",{attrs:{placeholder:"请输入",size:"small",maxlength:200},model:{value:e.selectForm.receiptAddress,callback:function(t){e.$set(e.selectForm,"receiptAddress",t)},expression:"selectForm.receiptAddress"}})],1),i("el-form-item",{attrs:{label:"交货地址",prop:"deliveryAddress"}},[i("el-input",{attrs:{placeholder:"请输入",size:"small",maxlength:200},model:{value:e.selectForm.deliveryAddress,callback:function(t){e.$set(e.selectForm,"deliveryAddress",t)},expression:"selectForm.deliveryAddress"}})],1),i("el-form-item",{attrs:{label:"提柜地址",prop:"pickAddress"}},[i("el-input",{attrs:{placeholder:"请输入",size:"small",maxlength:200},model:{value:e.selectForm.pickAddress,callback:function(t){e.$set(e.selectForm,"pickAddress",t)},expression:"selectForm.pickAddress"}})],1),i("el-form-item",{attrs:{label:"还柜地址",prop:"returnAddress"}},[i("el-input",{attrs:{placeholder:"请输入",size:"small",maxlength:200},model:{value:e.selectForm.returnAddress,callback:function(t){e.$set(e.selectForm,"returnAddress",t)},expression:"selectForm.returnAddress"}})],1),i("el-form-item",{attrs:{label:"装货港",prop:"loadingPortId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",filterable:"",clearable:"",size:"small"},on:{focus:e.getFromPort,change:e.onFromPort},model:{value:e.selectForm.loadingPortId,callback:function(t){e.$set(e.selectForm,"loadingPortId",t)},expression:"selectForm.loadingPortId"}},e._l(e.portFromList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"中转港",prop:"transPortId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,disabled:!e.selectForm.orgId,placeholder:"请选择",filterable:"",clearable:"",size:"small"},on:{focus:e.getTranPort},model:{value:e.selectForm.transPortId,callback:function(t){e.$set(e.selectForm,"transPortId",t)},expression:"selectForm.transPortId"}},e._l(e.transPortList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"卸货港",prop:"unloadPortId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",filterable:"",clearable:"",size:"small"},on:{focus:e.getToPort,change:e.onToPort},model:{value:e.selectForm.unloadPortId,callback:function(t){e.$set(e.selectForm,"unloadPortId",t)},expression:"selectForm.unloadPortId"}},e._l(e.portToList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"ETA",prop:"eta"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.eta,callback:function(t){e.$set(e.selectForm,"eta",t)},expression:"selectForm.eta"}})],1),i("el-form-item",{attrs:{label:"ETD",prop:"etd"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.etd,callback:function(t){e.$set(e.selectForm,"etd",t)},expression:"selectForm.etd"}})],1),i("el-form-item",{attrs:{label:"二程ETD",prop:"etd2"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.etd2,callback:function(t){e.$set(e.selectForm,"etd2",t)},expression:"selectForm.etd2"}})],1),i("el-form-item",{attrs:{label:"截单日期",prop:"sheetTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.sheetTime,callback:function(t){e.$set(e.selectForm,"sheetTime",t)},expression:"selectForm.sheetTime"}})],1),i("el-form-item",{attrs:{label:"截VGM日期",prop:"vgmTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.vgmTime,callback:function(t){e.$set(e.selectForm,"vgmTime",t)},expression:"selectForm.vgmTime"}})],1),i("el-form-item",{attrs:{label:"截关日期",prop:"customsTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.customsTime,callback:function(t){e.$set(e.selectForm,"customsTime",t)},expression:"selectForm.customsTime"}})],1),i("el-form-item",{attrs:{label:"柜型",prop:"containerId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",placeholder:"请选择",clearable:""},on:{focus:e.getContainerData},model:{value:e.selectForm.containerId,callback:function(t){e.$set(e.selectForm,"containerId",t)},expression:"selectForm.containerId"}},e._l(e.containerList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"数量",prop:"quantity"}},[i("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,step:1,"step-strictly":""},model:{value:e.selectForm.quantity,callback:function(t){e.$set(e.selectForm,"quantity",t)},expression:"selectForm.quantity"}})],1),i("el-form-item",{attrs:{label:"最大限重",prop:"weightLimit"}},[i("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.weightLimit,callback:function(t){e.$set(e.selectForm,"weightLimit",t)},expression:"selectForm.weightLimit"}})],1),i("el-form-item",{attrs:{label:"空柜重量",prop:"emptyWeight"}},[i("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.emptyWeight,callback:function(t){e.$set(e.selectForm,"emptyWeight",t)},expression:"selectForm.emptyWeight"}})],1),i("el-form-item",{staticClass:"is-required",staticStyle:{width:"50%"},attrs:{prop:"file",label:"上传SO"}},[i("el-upload",{ref:"uploadFile",staticClass:"upload-demo",attrs:{action:"",multiple:"",accept:".pdf,.PDF",limit:1,"http-request":e.uploadFile,"before-upload":e.beforeUpload,"on-remove":e.onFileRemove,"on-preview":e.onPreview,"on-exceed":e.beforeExceed,"file-list":e.fileList}},[i("div",[i("span",{staticStyle:{cursor:"auto"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n            将文件拖到此处，或\n          ")]),i("el-button",{attrs:{type:"text",size:"small"}},[e._v("\n            点击上传\n          ")])],1)])],1)],1)],1)},x=[],F=(i("7514"),i("28a5"),i("5a0c")),O=i.n(F);function S(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?S(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):S(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function I(){return{soCode:void 0,billNo:void 0,orgId:void 0,orgId2:void 0,orgName:void 0,orgName2:void 0,freighter:void 0,ship:void 0,deliveryAddress:void 0,deliveryCityId:void 0,deliveryCityName:void 0,deliveryCountryId:void 0,deliveryCountryName:void 0,deliveryStateId:void 0,deliveryStateName:void 0,pickAddress:void 0,pickCityId:void 0,pickCityName:void 0,pickCountryId:void 0,pickCountryName:void 0,pickStateId:void 0,pickStateName:void 0,receiptAddress:void 0,receiptCityId:void 0,receiptCityName:void 0,receiptCountryId:void 0,receiptCountryName:void 0,receiptStateId:void 0,receiptStateName:void 0,returnAddress:void 0,returnCityId:void 0,returnCityName:void 0,returnCountryId:void 0,returnCountryName:void 0,returnStateId:void 0,returnStateName:void 0,loadingPortId:void 0,loadingPortName:void 0,transPortId:void 0,transPortName:void 0,unloadPortId:void 0,unloadPortName:void 0,weightLimit:void 0,vgmTime:void 0,quantity:void 0,customsTime:void 0,containerId:void 0,containerName:void 0,bookingId:void 0,emptyWeight:void 0,eta:void 0,etd:void 0,etd2:void 0,files:[],sheetTime:void 0}}var L=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectForm=I(),e.formRules={soCode:[{required:!0,message:"SO号码不能为空",trigger:"blur"},{validator:function(e,t,i){var r=/[\u4e00-\u9fa5]/;t?r.test(t)?i(new Error("SO号码不能有中文")):i():i(new Error("SO号码不能为空"))},trigger:"blur"}],freighter:[{required:!0,message:"船名不能为空",trigger:"blur"}],ship:[{required:!0,message:"航次不能为空",trigger:"blur"}],receiptAddress:[{required:!0,message:"收货地址不能为空",trigger:"blur"}],deliveryAddress:[{required:!0,message:"交货地址不能为空",trigger:"blur"}],pickAddress:[{required:!0,message:"提柜地址不能为空",trigger:"blur"}],returnAddress:[{required:!0,message:"还柜地址不能为空",trigger:"blur"}],orgId:[{required:!0,message:"请选择服务机构",trigger:"change"}],loadingPortId:[{required:!0,message:"请选择装货港",trigger:"change"}],unloadPortId:[{required:!0,message:"请选择卸货港",trigger:"change"}],eta:[{required:!0,message:"请选择ETA",trigger:"change"}],etd:[{required:!0,message:"请选择ETD",trigger:"change"}],customsTime:[{required:!0,message:"请选择截关日期",trigger:"change"}],sheetTime:[{required:!0,message:"请选择截单日期",trigger:"change"}],vgmTime:[{required:!0,message:"请选择截VGM日期",trigger:"change"}],containerId:[{required:!0,message:"请选择柜型",trigger:"change"}],weightLimit:[{required:!0,message:"最大限重不能为空",trigger:"blur"}],emptyWeight:[{required:!0,message:"空柜重量不能为空",trigger:"blur"}],quantity:[{required:!0,message:"数量不能为空",trigger:"blur"}]},e.loading=!1,e.selectLoading=!1,e.bsTransList=[],e.portFromList=[],e.transPortList=[],e.portToList=[],e.containerList=[],e.fileList=[],e.orderRow={id:void 0,bsId:void 0,fromCountry:void 0,tranCountry:void 0,toCountry:void 0,businessType:void 0},e.planId="",e.lastenter="",e.isEdit=!1,e.isDragFile=!1,e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var i,r,s,a,n,o,l,c,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,i=this.isOrder||{},this.planId=i.planId,this.orderRow.id=i.id,this.orderRow.bsId=i.bsId,this.orderRow.fromCountry=i.fromCountry,this.orderRow.toCountry=i.toCountry,this.orderRow.businessType=i.businessType,this.getContainerData(),e.prev=9,!this.planId){e.next=15;break}return e.next=13,this.getBsTransByPlanId();case 13:e.next=17;break;case 15:return e.next=17,this.getBsTransList();case 17:return e.next=19,this.getFromPort();case 19:return e.next=21,this.getToPort();case 21:e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](9),this.loading=!1;case 26:if(r=(t||{}).files||[],r.length>0&&(s=r.join(","),a=s.split("."),a.shift(),this.fileList=[],this.fileList.push({name:a.join("."),url:s})),n=Object.assign({},t),Object.assign(this.selectForm,n),!this.selectForm.id){e.next=43;break}return o=this.bsTransList.find(function(e){return e.orgId===u.selectForm.orgId})||{},this.orderRow.tranCountry=o.entreportCountryId||void 0,e.prev=33,e.next=36,this.getTranPort();case 36:e.next=41;break;case 38:e.prev=38,e.t1=e["catch"](33),this.loading=!1;case 41:e.next=61;break;case 43:if(this.selectForm.loadingPortId=i.portsFromId,this.selectForm.unloadPortId=i.portsToId,this.selectForm.containerId=i.cabinetType,!i.planId){e.next=59;break}return e.prev=47,e.next=50,Object(v["q"])({id:i.planId});case 50:l=e.sent,c=l.data||{},this.selectForm.weightLimit=c.loadLimit,this.selectForm.quantity=c.quantity,e.next=59;break;case 56:e.prev=56,e.t2=e["catch"](47),this.loading=!1;case 59:this.onFromPort(),this.onToPort();case 61:this.loading=!1;case 62:case"end":return e.stop()}},e,this,[[9,23],[33,38],[47,56]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onDragenter",value:function(e){var t=document.getElementById("dragDropForm");t.classList.add("dragging-over"),this.lastenter=e.target,!this.isEdit&&this.isEffect||(this.isDragFile=!0)}},{key:"onDragover",value:function(e){!this.isEdit&&this.isEffect||(this.isDragFile=!0)}},{key:"onDragleave",value:function(e){if(this.lastenter===e.target){var t=document.getElementById("dragDropForm");if(t.classList.remove("dragging-over"),!this.isEdit&&this.isEffect)return;this.isDragFile=!1}}},{key:"onDragdrop",value:function(e){var t=document.getElementById("dragDropForm");t.classList.remove("dragging-over"),!this.isEdit&&this.isEffect||(this.isDragFile=!1,this.onDrop(e))}},{key:"onDrop",value:function(e){var t=(e.dataTransfer||{}).files||[];if(!(t.length<=0)){var i=t[0]||{};-1===i.type.indexOf("pdf")&&this.$message.error("请上传pdf文件"),(this.selectForm.files||[]).length>0?this.$message.error("pdf文件已存在"):this.uploadFile({file:i})}}},{key:"onFileRemove",value:function(e,t){var i=this;this.$deleteLoad(e.url,!0).then(function(e){i.$message.success("删除成功")}).catch(function(e){return e}),this.selectForm.files=[]}},{key:"onPreview",value:function(e){var t="https://file.jhtinfo.net/"+e.url;window.open(t)}},{key:"beforeUpload",value:function(e){return-1===e.type.indexOf("pdf")?(this.$message.error("仅支持pdf文件"),!1):e.name.length>100?(this.$message.error("pdf文件名过长"),!1):void 0}},{key:"beforeExceed",value:function(e){this.$message.error("pdf文件已存在")}},{key:"uploadFile",value:function(e){var t=this,i=e.file;this.$upload(!0,i,"jht-admin/orderlist/booking/so/".concat(O()().valueOf()+"/"+i.name)).then(function(i){t.selectForm.files=[i.data||""],t.fileList=[],t.fileList.push({name:(e.file||{}).name,url:i.data}),t.$message.success("上传成功")}).catch(function(e){return e})}},{key:"editForm",value:function(){this.isEdit=!0}},{key:"saveForm",value:function(){var e=this,t=this.isStatus;if("204"!==t){var i=this,r=i.$refs.selectForm;r.validate(function(t){if(!t)return!1;if(e.selectForm.files.length<=0)return e.$message.error("请上传so文件"),!1;if(!e.isStatus)return e.$message.error("请选择订单状态"),!1;var i=T({},e.selectForm,{bookingId:e.orderRow.id,status:e.isStatus});e.portFromList.map(function(e){i.loadingPortId===e.id&&(i.loadingPortName=e.name)}),e.transPortList.map(function(e){i.transPortId===e.id&&(i.transPortName=e.name)}),e.portToList.map(function(e){i.unloadPortId===e.id&&(i.unloadPortName=e.name)}),e.containerList.map(function(e){i.containerId===e.id&&(i.containerName=e.name)}),e.edit(i)})}}},{key:"edit",value:function(e){var t=this;this.loading=!0,this.$emit("btnLoad",!0),Object(v["E"])(e).then(function(e){t.loading=!1,t.$emit("btnLoad",!1),t.$message.success("保存成功"),t.$emit("refresh"),t.fileList=[],t.isEdit=!1}).catch(function(e){return t.$emit("btnLoad",!1),t.loading=!1,e})}},{key:"reset",value:function(){var e=this;this.selectForm=I(),this.fileList=[],this.isEdit=!1,this.planId="",this.$nextTick(function(){var t=e.$refs.selectForm;t.clearValidate()})}},{key:"getBsTransData",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.planId){e.next=5;break}return e.next=3,this.getBsTransByPlanId();case 3:e.next=7;break;case 5:return e.next=7,this.getBsTransList();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getBsTransList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:999,model:{id:this.orderRow.bsId}},this.selectLoading=!0,e.next=4,Object(v["i"])(t).then(function(e){var t=e.data||{};i.bsTransList=t.result||[],i.selectLoading=!1}).catch(function(e){return i.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getBsTransByPlanId",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["g"])({id:this.planId}).then(function(e){var i=e.data||[];t.bsTransList=i,t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onBsTran",value:function(){var e=this,t=this.bsTransList.find(function(t){return t.orgId===e.selectForm.orgId})||{};this.selectForm.orgName=t.orgName||void 0,this.selectForm.orgId2=t.orgId2||void 0,this.selectForm.orgName2=t.orgName2||void 0,this.selectForm.bsTransCode=t.serviceCode||void 0,this.selectForm.transPortId=t.entreport||void 0,this.orderRow.tranCountry=t.entreportCountryId||void 0}},{key:"getFromPort",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:9999,type:this.orderRow.businessType,countryId:this.orderRow.fromCountry},e.next=4,Object(v["r"])(t).then(function(e){var t=e.data||{};i.portFromList=t.result||[],i.selectLoading=!1}).catch(function(e){return i.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onFromPort",value:function(){var e=this;this.portFromList.map(function(t){if(t.id===e.selectForm.loadingPortId){var i=t.countryId,r=t.countryName,s=t.stateId,a=t.stateName,n=t.cityId,o=t.cityName;e.selectForm.pickCityId=n,e.selectForm.pickCityName=o,e.selectForm.pickCountryId=i,e.selectForm.pickCountryName=r,e.selectForm.pickStateId=s,e.selectForm.pickStateName=a,e.selectForm.receiptCityId=n,e.selectForm.receiptCityName=o,e.selectForm.receiptCountryId=i,e.selectForm.receiptCountryName=r,e.selectForm.receiptStateId=s,e.selectForm.receiptStateName=a,e.selectForm.returnCityId=n,e.selectForm.returnCityName=o,e.selectForm.returnCountryId=i,e.selectForm.returnCountryName=r,e.selectForm.returnStateId=s,e.selectForm.returnStateName=a}})}},{key:"getTranPort",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:9999,type:this.orderRow.businessType,countryId:this.orderRow.tranCountry},e.next=4,Object(v["r"])(t).then(function(e){var t=e.data||{};i.transPortList=t.result||[],i.selectLoading=!1}).catch(function(e){return i.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getToPort",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:9999,type:this.orderRow.businessType,countryId:this.orderRow.toCountry},e.next=4,Object(v["r"])(t).then(function(e){var t=e.data||{};i.portToList=t.result||[],i.selectLoading=!1}).catch(function(e){return i.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onToPort",value:function(){var e=this;this.portToList.map(function(t){if(t.id===e.selectForm.unloadPortId){var i=t.countryId,r=t.countryName,s=t.stateId,a=t.stateName,n=t.cityId,o=t.cityName;e.selectForm.deliveryCityId=n,e.selectForm.deliveryCityName=o,e.selectForm.deliveryCountryId=i,e.selectForm.deliveryCountryName=r,e.selectForm.deliveryStateId=s,e.selectForm.deliveryStateName=a}})}},{key:"getContainerData",value:function(){var e=this,t={page:1,size:9999};Object(v["l"])(t).then(function(t){var i=t.data||{};e.containerList=i.result||[]}).catch(function(e){return e})}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}}]),t}(f["e"]);L=p["a"]([Object(f["a"])({name:"oneForm",components:{},props:{isStatus:{type:String,default:""},isEffect:{type:String,default:""},isOrder:{type:Object,default:function(){return{}}},orderType:{type:String,default:""}}})],L);var D=L,j=D,_=(i("86ca"),i("2877")),C=Object(_["a"])(j,w,x,!1,null,"2c71cb2a",null),N=C.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticStyle:{padding:"0 20px 10px 0","text-align":"right"}},[i("el-button",{attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.addItem}},[e._v("\n      新增\n    ")])],1),i("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"110px",size:"small"}},e._l(e.containData,function(t,r){return i("div",{key:r,staticStyle:{border:"1px solid #eee","padding-top":"20px","margin-bottom":"10px"}},[i("div",{staticClass:"img-item",class:e.dragShow(r,"img")?"active-item":"",on:{dragover:function(t){return t.preventDefault(),function(t){return e.onDragover(t,r,"img")}(t)},dragenter:function(t){return t.preventDefault(),function(t){return e.onDragenter(t,r,"img")}(t)},dragleave:function(t){return t.stopPropagation(),t.preventDefault(),function(t){return e.onDragleave(t,r,"img")}(t)},drop:function(t){return t.preventDefault(),function(t){return e.onDragdrop(t,r,"img")}(t)}}},[e.dragShow(r,"img")?i("div",{staticClass:"active-tip"},[i("span",[e._v("释放鼠标，上传文件")])]):e._e(),i("el-row",{staticStyle:{padding:"0 20px"}},[i("el-col",{attrs:{span:2}},[i("el-tag",{staticClass:"title-tag",attrs:{effect:"dark"}},[e._v("\n              柜号\n            ")])],1),i("el-col",{attrs:{span:16}},[i("el-form-item",{staticClass:"is-required",attrs:{label:"柜号"}},[i("el-input",{attrs:{disabled:t.isEditC,maxlength:20,"show-word-limit":"",placeholder:"请输入"},model:{value:t.containerNo,callback:function(i){e.$set(t,"containerNo",i)},expression:"item.containerNo"}})],1),i("el-form-item",{staticClass:"is-required",attrs:{label:"关封号"}},[i("el-input",{attrs:{disabled:t.isEditC,maxlength:20,"show-word-limit":"",placeholder:"请输入"},model:{value:t.sealNo,callback:function(i){e.$set(t,"sealNo",i)},expression:"item.sealNo"}})],1),i("el-form-item",{staticClass:"is-required",attrs:{label:"状态"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,disabled:t.isEditC,placeholder:"请选择",filterable:""},on:{change:e.onStatus},model:{value:t.status,callback:function(i){e.$set(t,"status",i)},expression:"item.status"}},e._l(t.statusList,function(e){return i("el-option",{key:e.key,attrs:{label:e.value,value:e.key}})}),1)],1),i("div",[i("el-form-item",{staticStyle:{width:"100%"},attrs:{prop:"",label:"上传照片"}},[i("el-upload",{ref:"uploadFile",refInFor:!0,staticClass:"upload-demo",attrs:{type:"text",action:"",multiple:"",limit:1,disabled:t.isEditC,"before-upload":e.beforeUpload,"on-exceed":e.beforeExceed,"http-request":e.uploadImg,"on-remove":function(t,i){return e.onImgRemove(t,i,r)},"on-preview":e.onImgPreview,"file-list":t.imgsList}},[i("div",[i("span",{staticStyle:{cursor:"auto"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n                      将文件拖到此处，或\n                    ")]),i("el-button",{attrs:{disabled:t.isEditC,type:"text",size:"small"},on:{click:function(t){return e.onImg(r)}}},[e._v("\n                      点击上传\n                    ")])],1)])],1)],1)],1),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[i("div",[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!!t.id&&t.isEditC,expression:"!!item.id && item.isEditC"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.edit("1",r)}}},[e._v("\n                编辑\n              ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"item.isAdd"}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.cancel("1",r)}}},[e._v("\n                取消\n              ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd||!t.isEditC,expression:"item.isAdd || !item.isEditC"}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.save("1",r)}}},[e._v("\n                保存\n              ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.status&&!!t.id&&!t.isMat&&"0"===e.custType,expression:"item.status && !!item.id && !item.isMat && custType === '0'"}],attrs:{disabled:"202"!==e.isStatus&&"207"!==e.isStatus||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.addMatter(r)}}},[e._v("\n                新增补料\n              ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:"251"!==t.status&&!!t.id&&!t.isWei,expression:"item.status !== '251' && !!item.id && !item.isWei"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.addWeight(r)}}},[e._v("\n                新增称重\n              ")])],1)])],1)],1),t.isMat?i("el-row",{staticStyle:{"border-top":"1px solid #eee",padding:"20px 20px 0"}},[i("el-col",{attrs:{span:2}},[i("el-tag",{staticClass:"title-tag",attrs:{effect:"dark"}},[e._v("\n            补料\n          ")])],1),i("el-col",{attrs:{span:16}},[i("el-form-item",{staticClass:"is-required",attrs:{label:"总件数"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{disabled:t.isEditM,controls:!1,placeholder:"请输入",min:0,max:99999,step:1,"step-strictly":""},model:{value:t.packages,callback:function(i){e.$set(t,"packages",i)},expression:"item.packages"}})],1),i("div",{staticClass:"input-select"},[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.isEditM,size:"small",placeholder:"请选择"},model:{value:t.umPackage,callback:function(i){e.$set(t,"umPackage",i)},expression:"item.umPackage"}},[i("el-option",{attrs:{label:"箱",value:"BOX"}}),i("el-option",{attrs:{label:"托",value:"PLT"}})],1)],1)])]),i("el-form-item",{staticClass:"is-required",attrs:{label:"总重量"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{disabled:t.isEditM,controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:t.weight,callback:function(i){e.$set(t,"weight",i)},expression:"item.weight"}})],1),i("div",{staticClass:"input-unit"},[e._v("\n                "+e._s(t.umWeight||"KGS")+"\n              ")])])]),i("el-form-item",{staticClass:"is-required",attrs:{label:"总体积"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{disabled:t.isEditM,controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:t.volume,callback:function(i){e.$set(t,"volume",i)},expression:"item.volume"}})],1),i("div",{staticClass:"input-unit"},[e._v("\n                "+e._s(t.umVolume||"CBM")+"\n              ")])])]),i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"货物描述"}},[i("el-input",{attrs:{disabled:t.isEditM,type:"textarea",rows:2,placeholder:"请输入",size:"small",maxlength:200},model:{value:t.description,callback:function(i){e.$set(t,"description",i)},expression:"item.description"}})],1)],1),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!!t.id&&t.isEditM&&"0"===e.custType,expression:"!!item.id && item.isEditM && custType === '0'"}],attrs:{disabled:"202"!==e.isStatus&&"207"!==e.isStatus||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.edit("2",r)}}},[e._v("\n            编辑\n          ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"item.isAdd"}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.cancel("2",r)}}},[e._v("\n            取消\n          ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd||!t.isEditM,expression:"item.isAdd || !item.isEditM"}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.save("2",r)}}},[e._v("\n            保存\n          ")])],1)],1):e._e(),t.isWei?i("div",{staticClass:"pdf-item",class:e.dragShow(r,"pdf")?"active-item":"",on:{dragover:function(t){return t.preventDefault(),function(t){return e.onDragover(t,r,"pdf")}(t)},dragenter:function(t){return t.preventDefault(),function(t){return e.onDragenter(t,r,"pdf")}(t)},dragleave:function(t){return t.stopPropagation(),t.preventDefault(),function(t){return e.onDragleave(t,r,"pdf")}(t)},drop:function(t){return t.preventDefault(),function(t){return e.onDragdrop(t,r,"pdf")}(t)}}},[e.dragShow(r,"pdf")?i("div",{staticClass:"active-tip"},[i("span",[e._v("释放鼠标，上传文件")])]):e._e(),t.isWei?i("el-row",{staticStyle:{"border-top":"1px solid #eee",padding:"20px 20px 0"}},[i("el-col",{attrs:{span:2}},[i("el-tag",{staticClass:"title-tag",attrs:{effect:"dark"}},[e._v("\n              称重\n            ")])],1),i("el-col",{attrs:{span:16}},[i("el-form-item",{staticClass:"is-required",attrs:{label:"重量"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{disabled:t.isEditW,controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:t.weight2,callback:function(i){e.$set(t,"weight2",i)},expression:"item.weight2"}})],1),i("div",{staticClass:"input-unit"},[e._v("\n                  "+e._s(t.umWeight2||"KGS")+"\n                ")])])]),i("el-form-item",{staticStyle:{width:"66%"},attrs:{prop:"",label:"上传文件"}},[i("el-upload",{ref:"uploadFile",refInFor:!0,staticClass:"upload-demo",attrs:{type:"text",action:"",multiple:"",accept:".pdf,.PDF",limit:1,disabled:t.isEditW,"http-request":e.uploadFile,"on-remove":function(t,i){return e.onFileRemove(t,i,r)},"before-upload":e.beforePDFUpload,"on-exceed":e.beforePDFExceed,"on-preview":e.onFilePreview,"file-list":t.fileList}},[i("div",[i("span",{staticStyle:{cursor:"auto"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n                    将文件拖到此处，或\n                  ")]),i("el-button",{attrs:{disabled:t.isEditW,type:"text",size:"small"},on:{click:function(t){return e.onFile(r)}}},[e._v("\n                    点击上传\n                  ")])],1)])],1)],1),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:6}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!!t.id&&t.isEditW,expression:"!!item.id && item.isEditW"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.edit("3",r)}}},[e._v("\n              编辑\n            ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd,expression:"item.isAdd"}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.cancel("3",r)}}},[e._v("\n              取消\n            ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:t.isAdd||!t.isEditW,expression:"item.isAdd || !item.isEditW"}],attrs:{type:"text",size:"small"},on:{click:function(t){return e.save("3",r)}}},[e._v("\n              保存\n            ")])],1)],1):e._e()],1):e._e()],1)}),0)],1)},$=[];function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function R(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function z(){return{containerNo:void 0,description:void 0,sealNo:void 0,packages:void 0,weight:void 0,volume:void 0,weight2:void 0,files:[],imgs:[]}}var A=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectForm=z(),e.formRules={containerNo:[{required:!0,message:"柜号不能为空",trigger:"blur"}],sealNo:[{required:!0,message:"关封号不能为空",trigger:"blur"}],packages:[{required:!0,message:"总件数不能为空",trigger:"blur"}],weight:[{required:!0,message:"总重量不能为空",trigger:"blur"}],weight2:[{required:!0,message:"重量不能为空",trigger:"blur"}],volume:[{required:!0,message:"总体积不能为空",trigger:"blur"}]},e.loading=!1,e.isDragFile=!1,e.selectLoading=!1,e.containData=[],e.statusList=[],e.maxN=0,e.soObj={},e.sIndex="",e.lastenter="",e.fType="",e.statusData=[{key:"251",value:"起运港已提柜",keys:["251"]},{key:"252",value:"起运港已装柜",keys:["251","252"]},{key:"255",value:"起运港已还柜",keys:["252","255"]},{key:"256",value:"目的港已提柜",keys:["255","256"]},{key:"257",value:"目的港已还柜",keys:["256","257"]}],e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var i,r,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this.isOrder||{},this.maxN=i.nums,r=t||[],this.containData=r.map(function(e){var t=e.goods,i=e.files,r=e.weight,a=e.umWeight,n=e.status,l=e.id,c=Object(o["a"])(e,["goods","files","weight","umWeight","status","id"]),u=t||[],d=i||[],m=[],p=[],f=d.filter(function(e){return"1"===e.type});if(f.length>0){var h=f[0].url;if(h){var v=h.split(".");v.shift(),m.push({name:v.join("."),url:h})}}var g=d.filter(function(e){return"0"===e.type});if(g.length>0){var y=g[0].url;if(y){var b=y.split(".");b.shift(),p.push({name:b.join("."),url:y})}}return R({},c,{id:l,description:(u[0]||{}).description,packages:(u[0]||{}).packages,weight:(u[0]||{}).weight,volume:(u[0]||{}).volume,umVolume:(u[0]||{}).umVolume,umWeight:(u[0]||{}).umWeight,umPackage:(u[0]||{}).umPackage,gId:(u[0]||{}).id,weight2:r,umWeight2:a,files:m,imgs:p,fileList:m,imgsList:p,status:n,statusList:s.setStatus(n),isAdd:!1,isMat:u.length>0,isWei:!!r,isEditC:!!l,isEditM:!!l,isEditW:!!l})});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStatus",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["k"])().then(function(e){t.selectLoading=!1;var i=e.data||[];t.statusList=i}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setStatus",value:function(e){if(e){var t=[];return this.statusData.map(function(i){var r=i.keys.some(function(t){return t===e});r&&t.push({key:i.key,value:i.value})}),t}return[{key:this.statusData[0].key,value:this.statusData[0].value}]}},{key:"onStatus",value:function(){}},{key:"setSo",value:function(e){this.soObj=e}},{key:"addItem",value:function(){var e=this.containData.length;e<this.maxN?this.containData.push({containerNo:void 0,description:void 0,sealNo:void 0,packages:void 0,weight:void 0,volume:void 0,umVolume:"CBM",umWeight:"KGS",umPackage:"BOX",weight2:void 0,umWeight2:"KGS",isAdd:!0,isEditC:!1,isEditM:!1,isEditW:!1,isMat:!1,isWei:!1,files:[],fileList:[],imgs:[],imgsList:[],status:void 0,statusList:this.setStatus("")}):this.$message.error("货柜数量已达上限")}},{key:"addMatter",value:function(e){this.containData[e].isMat=!0,this.containData[e].isEditM=!1,this.containData[e].umPackage="BOX",this.containData[e].umWeight="KGS",this.containData[e].umVolume="CBM"}},{key:"addWeight",value:function(e){this.containData[e].isWei=!0,this.containData[e].isEditW=!1,this.containData[e].umWeight2="KGS"}},{key:"dragShow",value:function(e,t){return this.sIndex===e&&this.isDragFile&&this.fType===t}},{key:"onDragenter",value:function(e,t,i){if("img"===i){var r=document.getElementsByClassName("img-item");r[t].classList.add("dragging-over")}else{var s=document.getElementsByClassName("pdf-item");s[t].classList.add("dragging-over")}this.lastenter=e.target,this.sIndex=t,this.fType=i,this.isDragFile=!0}},{key:"onDragover",value:function(e,t,i){this.sIndex=t,this.fType=i,this.isDragFile=!0}},{key:"onDragleave",value:function(e,t,i){if(this.lastenter===e.target){if("img"===i){var r=document.getElementsByClassName("img-item");r[t].classList.add("dragging-over")}else{var s=document.getElementsByClassName("pdf-item");s[t].classList.add("dragging-over")}this.sIndex=t,this.fType=i,this.isDragFile=!1}}},{key:"onDragdrop",value:function(e,t,i){if("img"===i){var r=document.getElementsByClassName("img-item");r[t].classList.add("dragging-over")}else{var s=document.getElementsByClassName("pdf-item");s[t].classList.add("dragging-over")}this.sIndex=t,this.fType=i,this.isDragFile=!1,this.onDrop(e,i)}},{key:"onDrop",value:function(e,t){var i=(e.dataTransfer||{}).files||[];if(!(i.length<=0)){var r=i[0]||{};"pdf"!==t||-1!==r.type.indexOf("pdf")?"img"!==t||-1!==r.type.indexOf("image")?"pdf"===t&&(this.containData[this.sIndex].files||[]).length>0?this.$message.error("文件已存在"):"img"===t&&(this.containData[this.sIndex].imgs||[]).length>0?this.$message.error("图片已存在"):"img"===t?this.uploadImg({file:r}):this.uploadFile({file:r}):this.$message.error("请上传图片"):this.$message.error("请上传pdf文件")}}},{key:"onFileRemove",value:function(e,t,i){var r=this;this.sIndex=i;var s=e.url;s&&this.$deleteLoad(s,!0).then(function(e){r.$message.success("删除成功")}).catch(function(e){return e}),this.containData[this.sIndex].files=[],this.containData[this.sIndex].fileList=[]}},{key:"onFilePreview",value:function(e){var t="https://file.jhtinfo.net/"+e.url;window.open(t)}},{key:"onFile",value:function(e){this.sIndex=e}},{key:"uploadFile",value:function(e){var t=this,i=e.file;this.$upload(!0,i,"jht-admin/orderlist/booking/file/".concat(O()().valueOf()+"/"+i.name)).then(function(i){t.containData[t.sIndex].files=[{name:(e.file||{}).name,url:i.data}],t.containData[t.sIndex].fileList=[{name:(e.file||{}).name,url:i.data}],t.$message.success("上传成功")}).catch(function(e){return e})}},{key:"onImgRemove",value:function(e,t,i){var r=this;this.sIndex=i;var s=e.url;s&&this.$deleteLoad(s,!0).then(function(e){r.$message.success("删除成功")}).catch(function(e){return e}),this.containData[this.sIndex].imgs=[],this.containData[this.sIndex].imgsList=[]}},{key:"onImgPreview",value:function(e){var t="https://file.jhtinfo.net/"+e.url;window.open(t)}},{key:"onImg",value:function(e){this.sIndex=e}},{key:"beforeUpload",value:function(e){var t=-1!==e.type.indexOf("image"),i=e.size/1024/1024<2;return t||this.$message.error("上传照片只能是图片格式!"),i||this.$message.error("上传照片大小不能超过 2MB!"),t&&i}},{key:"beforeExceed",value:function(e){this.$message.error("照片已存在")}},{key:"beforePDFUpload",value:function(e){return-1===e.type.indexOf("pdf")?(this.$message.error("仅支持pdf文件"),!1):e.name.length>100?(this.$message.error("pdf文件名过长"),!1):void 0}},{key:"beforePDFExceed",value:function(e){this.$message.error("pdf文件已存在")}},{key:"uploadImg",value:function(e){var t=this,i=e.file;this.$upload(!0,i,"jht-admin/orderlist/booking/img/".concat(O()().valueOf()+"/"+i.name)).then(function(i){t.containData[t.sIndex].imgs=[{name:(e.file||{}).name,url:i.data}],t.containData[t.sIndex].imgsList=[{name:(e.file||{}).name,url:i.data}],t.$message.success("上传成功")}).catch(function(e){return e})}},{key:"cancel",value:function(e,t){"1"===e?this.containData.splice(t,1):"2"===e?(this.containData[t].isMat=!1,this.containData[t].packages=void 0,this.containData[t].weight=void 0,this.containData[t].volume=void 0):"3"===e&&(this.containData[t].isWei=!1,this.containData[t].weight=void 0,this.containData[t].imgs=[])}},{key:"save",value:function(e,t){var i=this,r=this.isStatus;if("204"!==r){var s=this.containData[t]||{},a=this.isOrder,n=/^[a-zA-Z0-9]*$/;if("1"===e){var o=s.imgs,l=s.containerNo,c=s.sealNo,u=s.id,d=s.weight2,m=s.umWeight2,p=s.status;if(!l)return void this.$message.error("请填写柜号");if(n.test(l)||this.$message.error("柜号不能有中文及特殊字符"),!c)return void this.$message.error("请填写关封号");if(n.test(c)||this.$message.error("关封号不能有中文及特殊字符"),!p)return void this.$message.error("请选择货柜状态");var f=o.map(function(e){return e.url});this.loading=!0;var h={id:u,pictures:f,containerNo:l,sealNo:c,bookingId:a.id,status:p,so:this.soObj.soCode,soId:this.soObj.id,weight:d,umWeight:m};Object(v["B"])(h).then(function(e){i.loading=!1,i.$message.success("保存成功"),i.$emit("refresh")}).catch(function(e){return i.loading=!1,e})}else if("2"===e){var g=s.volume,y=s.weight,b=s.packages,k=s.id,w=s.description,x=s.gId,F=s.status,O=s.umVolume,S=s.umWeight,T=s.umPackage;if(!b)return void this.$message.error("请填写总件数");if(!y)return void this.$message.error("请填写总重量");if(!g)return void this.$message.error("请填写总体积");this.loading=!0;var I={id:x,bookingId:a.id,containerId:k,volume:g,weight:y,umVolume:O,umWeight:S,umPackage:T,packages:b,status:F,description:w};Object(v["C"])(I).then(function(e){i.loading=!1,i.$message.success("保存成功"),i.$emit("refresh")}).catch(function(e){return i.loading=!1,e})}else if("3"===e){var L=s.files,D=s.weight2,j=s.umWeight2,_=s.id,C=s.status;if(!D)return void this.$message.error("请填写称重重量");var N=L.map(function(e){return e.url});this.loading=!0;var E={bookingId:a.id,containerId:_,files:N,status:C,weight:D,umWeight:j};Object(v["H"])(E).then(function(e){i.loading=!1,i.$message.success("保存成功"),i.$emit("refresh")}).catch(function(e){return i.loading=!1,e})}}}},{key:"reset",value:function(){this.fType="",this.sIndex="",this.lastenter="",this.containData=[]}},{key:"edit",value:function(e,t){"1"===e?this.containData[t].isEditC=!1:"2"===e?this.containData[t].isEditM=!1:"3"===e&&(this.containData[t].isEditW=!1)}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}}]),t}(f["e"]);A=p["a"]([Object(f["a"])({name:"twoForm",components:{},props:{isStatus:{type:String,default:""},isEffect:{type:String,default:""},isOrder:{type:Object,default:function(){return{}}},orderType:{type:String,default:""}}})],A);var M=A,B=M,q=(i("9e68"),Object(_["a"])(B,E,$,!1,null,"e6da8e72",null)),H=q.exports,W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticStyle:{"text-align":"right",padding:"0 20px 10px 0"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.selectForm.id&&!e.isEdit,expression:"!!selectForm.id && !isEdit"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.editForm}},[e._v("\n      编辑\n    ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.selectForm.id||e.isEdit,expression:"!selectForm.id || isEdit"}],attrs:{disabled:"0"!==e.orderType||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.saveForm}},[e._v("\n      保存\n    ")])],1),i("el-form",{ref:"selectForm",attrs:{model:e.selectForm,disabled:!e.isEdit&&!!e.selectForm.id,rules:e.formRules,"label-width":"110px",size:"small"}},[i("el-form-item",{attrs:{label:"船名",prop:"freighter"}},[i("el-input",{attrs:{maxlength:20,"show-word-limit":"",placeholder:"请输入"},model:{value:e.selectForm.freighter,callback:function(t){e.$set(e.selectForm,"freighter",t)},expression:"selectForm.freighter"}})],1),i("el-form-item",{attrs:{label:"航次",prop:"ship"}},[i("el-input",{attrs:{maxlength:20,"show-word-limit":"",placeholder:"请输入"},model:{value:e.selectForm.ship,callback:function(t){e.$set(e.selectForm,"ship",t)},expression:"selectForm.ship"}})],1),i("el-form-item",{attrs:{label:"服务机构",prop:"orgId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",placeholder:"请输入",clearable:"",filterable:""},on:{focus:e.getBsTransList,change:e.onBsTran},model:{value:e.selectForm.orgId,callback:function(t){e.$set(e.selectForm,"orgId",t)},expression:"selectForm.orgId"}},e._l(e.bsTransList,function(e){return i("el-option",{key:e.id,attrs:{label:e.serviceCode+"-"+e.orgName,value:e.orgId}})}),1)],1),i("el-form-item",{staticClass:"is-required",attrs:{label:"二程服务机构"}},[i("el-input",{attrs:{placeholder:"请输入",disabled:""},model:{value:e.selectForm.orgName2,callback:function(t){e.$set(e.selectForm,"orgName2",t)},expression:"selectForm.orgName2"}})],1),i("el-form-item",{attrs:{label:"中转港",prop:"transPortId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,disabled:!e.selectForm.orgId,placeholder:"请选择",filterable:"",clearable:"",size:"small"},on:{focus:e.getTransPortList},model:{value:e.selectForm.transPortId,callback:function(t){e.$set(e.selectForm,"transPortId",t)},expression:"selectForm.transPortId"}},e._l(e.transPortList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"ETA",prop:"eta"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.eta,callback:function(t){e.$set(e.selectForm,"eta",t)},expression:"selectForm.eta"}})],1),i("el-form-item",{attrs:{label:"ETD",prop:"etd"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.etd,callback:function(t){e.$set(e.selectForm,"etd",t)},expression:"selectForm.etd"}})],1),i("el-form-item",{attrs:{label:"二程ETD",prop:"etd2"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.etd2,callback:function(t){e.$set(e.selectForm,"etd2",t)},expression:"selectForm.etd2"}})],1)],1)],1)},V=[];function U(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function J(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?U(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):U(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function Y(){return{id:void 0,orgId:void 0,orgId2:void 0,orgName:void 0,orgName2:void 0,freighter:void 0,ship:void 0,transPortId:void 0,transPortName:void 0,eta:void 0,etd:void 0,etd2:void 0}}var G=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectForm=Y(),e.formRules={freighter:[{required:!0,message:"船名不能为空",trigger:"blur"}],ship:[{required:!0,message:"航次不能为空",trigger:"blur"}],orgId:[{required:!0,message:"请选择服务机构",trigger:"change"}],eta:[{required:!0,message:"请选择ETA",trigger:"change"}],etd:[{required:!0,message:"请选择ETD",trigger:"change"}]},e.loading=!1,e.selectLoading=!1,e.bsTransList=[],e.etd2List=[],e.etdList=[],e.transPortList=[],e.etaList=[],e.orderRow={bsId:void 0,tranCountry:void 0,businessType:void 0},e.isEdit=!1,e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var i,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,i=this.isOrder||{},this.orderRow.businessType=i.businessType,this.orderRow.bsId=i.bsId,e.prev=4,e.next=7,this.getBsTransList();case 7:if(r=t||{},Object.assign(this.selectForm,r),!this.selectForm.id){e.next=13;break}return this.onBsTran(),e.next=13,this.getTransPortList();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](4),this.loading=!1;case 18:this.loading=!1;case 19:case"end":return e.stop()}},e,this,[[4,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"editForm",value:function(){this.isEdit=!0}},{key:"saveForm",value:function(){var e=this,t=this,i=t.$refs.selectForm,r=this.isOrder;i.validate(function(t){if(!t)return!1;var i=J({},e.selectForm,{bookingId:r.id,status:e.isStatus});e.transPortList.map(function(e){i.transPortId===e.id&&(i.transPortName=e.name)}),e.edit(i)})}},{key:"edit",value:function(e){var t=this;this.loading=!0,Object(v["G"])(e).then(function(e){t.loading=!1,t.$message.success("保存成功"),t.$emit("refresh"),t.isEdit=!1}).catch(function(e){return t.loading=!1,e})}},{key:"reset",value:function(){var e=this;this.selectForm=Y(),this.isEdit=!1,this.$nextTick(function(){var t=e.$refs.selectForm;t.clearValidate()})}},{key:"getBsTransList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:999,model:{id:this.orderRow.bsId}},this.selectLoading=!0,e.next=4,Object(v["i"])(t).then(function(e){var t=e.data||{};i.bsTransList=t.result||[],i.selectLoading=!1}).catch(function(e){return i.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onBsTran",value:function(){var e=this,t=this.bsTransList.find(function(t){return t.orgId===e.selectForm.orgId})||{};this.selectForm.orgName=t.orgName||void 0,this.selectForm.orgId2=t.orgId2||void 0,this.selectForm.orgName2=t.orgName2||void 0,this.selectForm.transPortId=t.entreport||void 0,this.orderRow.tranCountry=t.entreportCountryId||void 0}},{key:"getTransPortList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:99999,type:this.orderRow.businessType,countryId:this.orderRow.tranCountry},e.next=4,Object(v["r"])(t).then(function(e){i.selectLoading=!1;var t=e.data||{};i.transPortList=t.result||[]}).catch(function(e){return e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}}]),t}(f["e"]);G=p["a"]([Object(f["a"])({name:"threeForm",components:{},props:{isStatus:{type:String,default:""},isEffect:{type:String,default:""},isOrder:{type:Object,default:function(){return{}}},orderType:{type:String,default:""}}})],G);var K=G,X=K,Q=(i("301c"),Object(_["a"])(X,W,V,!1,null,"241ed8ef",null)),Z=Q.exports,ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticStyle:{"text-align":"right",padding:"0 20px 10px 0"}},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:!!e.isEffect&&!e.isEdit&&e.isEffect===e.isStatus,expression:"!!isEffect && !isEdit && isEffect === isStatus"}],attrs:{disabled:"0"!==e.orderType,type:"primary",size:"small"},on:{click:e.editForm}},[e._v("\n      编辑\n    ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEffect||e.isEdit||e.isEffect!==e.isStatus,expression:"!isEffect || isEdit || isEffect !== isStatus"}],attrs:{disabled:"0"!==e.orderType,type:"primary",size:"small"},on:{click:e.saveForm}},[e._v("\n      保存\n    ")])],1),i("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,disabled:!e.isEdit&&!!e.isEffect,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"提单号",prop:"billNo"}},[i("el-input",{attrs:{"show-word-limit":"",maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.billNo,callback:function(t){e.$set(e.selectForm,"billNo",t)},expression:"selectForm.billNo"}})],1),i("el-form-item",{attrs:{label:"航空单号",prop:"airNo"}},[i("el-input",{attrs:{"show-word-limit":"",maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.airNo,callback:function(t){e.$set(e.selectForm,"airNo",t)},expression:"selectForm.airNo"}})],1),"211"!==e.isStatus?i("el-form-item",{attrs:{label:"总件数",prop:"packages"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,step:1,"step-strictly":""},model:{value:e.selectForm.packages,callback:function(t){e.$set(e.selectForm,"packages",t)},expression:"selectForm.packages"}})],1),i("div",{staticClass:"input-select"},[i("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.selectForm.packagesUnit,callback:function(t){e.$set(e.selectForm,"packagesUnit",t)},expression:"selectForm.packagesUnit"}},[i("el-option",{attrs:{label:"箱",value:"BOX"}}),i("el-option",{attrs:{label:"托",value:"PLT"}})],1)],1)])]):e._e(),"211"!==e.isStatus?i("el-form-item",{attrs:{label:"总体积",prop:"volume"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.volume,callback:function(t){e.$set(e.selectForm,"volume",t)},expression:"selectForm.volume"}})],1),i("div",{staticClass:"input-unit"},[e._v("\n          "+e._s(e.selectForm.volumeUnit)+"\n        ")])])]):e._e(),"211"!==e.isStatus?i("el-form-item",{attrs:{label:"总重量",prop:"weight"}},[i("div",{staticClass:"input-content"},[i("div",{staticStyle:{flex:"1"}},[i("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.weight,callback:function(t){e.$set(e.selectForm,"weight",t)},expression:"selectForm.weight"}})],1),i("div",{staticClass:"input-unit"},[e._v("\n          "+e._s(e.selectForm.weightUnit)+"\n        ")])])]):e._e(),"213"!==e.isStatus&&"212"!==e.isStatus&&"211"!==e.isStatus?i("el-form-item",{attrs:{label:"起飞时间",prop:"departureTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.departureTime,callback:function(t){e.$set(e.selectForm,"departureTime",t)},expression:"selectForm.departureTime"}})],1):e._e(),"217"===e.isStatus&&"214"===e.isEffect||("215"===e.isStatus||"216"===e.isStatus||"217"===e.isStatus||"218"===e.isStatus||"219"===e.isStatus)&&e.selectForm.arrivalTime2?i("el-form-item",{attrs:{label:"二程抵达时间",prop:"arrivalTime2"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.arrivalTime2,callback:function(t){e.$set(e.selectForm,"arrivalTime2",t)},expression:"selectForm.arrivalTime2"}})],1):e._e(),"215"===e.isStatus&&"217"===e.isEffect||("215"===e.isStatus||"216"===e.isStatus||"218"===e.isStatus||"219"===e.isStatus)&&e.selectForm.departureTime2?i("el-form-item",{attrs:{label:"二程起飞时间",prop:"departureTime2"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.departureTime2,callback:function(t){e.$set(e.selectForm,"departureTime2",t)},expression:"selectForm.departureTime2"}})],1):e._e(),"216"===e.isStatus||"218"===e.isStatus||"219"===e.isStatus?i("el-form-item",{attrs:{label:"抵达时间",prop:"arrivalTime"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm",format:"yyyy-MM-dd HH:mm",size:"small"},model:{value:e.selectForm.arrivalTime,callback:function(t){e.$set(e.selectForm,"arrivalTime",t)},expression:"selectForm.arrivalTime"}})],1):e._e()],1)],1)},te=[];function ie(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function re(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ie(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ie(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function se(){return{airNo:void 0,billNo:void 0,volume:void 0,packages:void 0,weight:void 0,packagesUnit:"BOX",volumeUnit:"CBM",weightUnit:"KGS",departureTime:void 0,arrivalTime:void 0,departureTime2:void 0,arrivalTime2:void 0}}var ae=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectForm=se(),e.formRules={billNo:[{required:!0,message:"提单号不能为空",trigger:"blur"},{validator:function(e,t,i){var r=/[\u4e00-\u9fa5]/;r.test(t)?i(new Error("提单号不能有中文")):i()},trigger:"blur"}],airNo:[{required:!0,message:"航空单号不能为空",trigger:"blur"},{validator:function(e,t,i){var r=/[\u4e00-\u9fa5]/;r.test(t)?i(new Error("航空单号不能有中文")):i()},trigger:"blur"}],departureTime:[{required:!0,message:"请选择起飞时间",trigger:"change"}],arrivalTime:[{required:!0,message:"请选择抵达时间",trigger:"change"}],departureTime2:[{required:!0,message:"请选择二程起飞时间",trigger:"change"}],arrivalTime2:[{required:!0,message:"请选择二程抵达时间",trigger:"change"}],packages:[{required:!0,message:"总件数不能为空",trigger:"blur"}],volume:[{required:!0,message:"总体积不能为空",trigger:"blur"}],weight:[{required:!0,message:"总重量不能为空",trigger:"blur"}]},e.loading=!1,e.selectLoading=!1,e.isEdit=!1,e.isStatus="",e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"init",value:function(e){var t=e.packagesUnit,i=e.volumeUnit,r=e.weightUnit,s=Object(o["a"])(e,["packagesUnit","volumeUnit","weightUnit"]);Object.assign(this.selectForm,s),this.selectForm.packagesUnit=t||"BOX",this.selectForm.volumeUnit=i||"CBM",this.selectForm.weightUnit=r||"KGS"}},{key:"set",value:function(e,t){this.isStatus=e,this.isEdit=t}},{key:"editForm",value:function(){this.isEdit=!0}},{key:"saveForm",value:function(){var e=this,t=this,i=t.$refs.selectForm;i.validate(function(t){if(!t)return!1;if(!e.isStatus)return e.$message.error("请选择订单状态"),!1;var i=e.isOrder||{},r=re({},e.selectForm,{bookingId:i.id,status:e.isStatus});e.edit(r)})}},{key:"edit",value:function(e){var t=this;this.loading=!0,Object(v["z"])(e).then(function(e){t.loading=!1,t.$message.success("保存成功"),t.$emit("refresh"),t.isEdit=!1}).catch(function(e){return t.loading=!1,e})}},{key:"reset",value:function(){var e=this;this.selectForm=se(),this.isEdit=!1,this.$nextTick(function(){var t=e.$refs.selectForm;t.clearValidate()})}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}}]),t}(f["e"]);ae=p["a"]([Object(f["a"])({name:"oneForm",components:{},props:{isEffect:{type:String,default:""},isOrder:{type:Object,default:function(){return{}}},orderType:{type:String,default:""}}})],ae);var ne=ae,oe=ne,le=(i("c12c"),Object(_["a"])(oe,ee,te,!1,null,"3d5d3072",null)),ce=le.exports,ue=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticStyle:{padding:"0 20px 10px 0","text-align":"right"}},[i("el-button",{attrs:{disabled:"0"!==e.orderType||!e.isEdit||"205"===e.isStatus||"206"===e.isStatus||"209"===e.isEffect,type:"text",size:"small"},on:{click:e.addItem}},[e._v("\n      新增子提单号\n    ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.isEdit,expression:"!isEdit"}],attrs:{disabled:"0"!==e.orderType||"205"===e.isStatus||"206"===e.isStatus||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.editOrder}},[e._v("\n      编辑\n    ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{disabled:"0"!==e.orderType||"205"===e.isStatus||"206"===e.isStatus||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.cancelOrder}},[e._v("\n      取消\n    ")]),i("el-button",{directives:[{name:"show",rawName:"v-show",value:e.isEdit,expression:"isEdit"}],attrs:{disabled:"0"!==e.orderType||"205"===e.isStatus||"206"===e.isStatus||"209"===e.isEffect,type:"primary",size:"small"},on:{click:e.saveOrder}},[e._v("\n      保存\n    ")])],1),i("el-form",{ref:"selectForm",attrs:{model:e.selectForm,"label-width":"110px",size:"small"}},[i("div",{staticClass:"main-item",class:e.dragShow("000")?"active-item":"",on:{dragover:function(t){return t.preventDefault(),function(t){return e.onDragover(t,"000")}(t)},dragenter:function(t){return t.preventDefault(),function(t){return e.onDragenter(t,"000")}(t)},dragleave:function(t){return t.stopPropagation(),t.preventDefault(),function(t){return e.onDragleave(t,"000")}(t)},drop:function(t){return t.preventDefault(),function(t){return e.onDragdrop(t,"000")}(t)}}},[e.dragShow("000")?i("div",{staticClass:"active-tip"},[i("span",[e._v("释放鼠标，上传文件")])]):e._e(),i("el-form-item",{staticClass:"is-required",attrs:{label:"主提单号"}},[i("el-input",{attrs:{disabled:!e.isEdit||"0"!==e.orderType||"209"===e.isEffect,maxlength:20,"show-word-limit":"",placeholder:"请输入",clearable:""},model:{value:e.selectForm.billNo,callback:function(t){e.$set(e.selectForm,"billNo",t)},expression:"selectForm.billNo"}})],1),i("el-upload",{ref:"uploadFile",staticStyle:{"margin-left":"110px"},attrs:{type:"text",action:"",multiple:"",accept:".pdf,.PDF",limit:10,"http-request":e.uploadFile,"on-remove":e.onFileRemove,"before-upload":e.beforeUpload,"on-preview":e.onFilePreview,"on-exceed":e.beforeExceed,"file-list":e.fileList,disabled:!e.isEdit}},[i("div",[i("span",{staticStyle:{cursor:"auto"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n            将文件拖到此处，或\n          ")]),i("el-button",{attrs:{disabled:!e.isEdit||"0"!==e.orderType||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.onFile("000")}}},[e._v("\n            点击上传\n          ")])],1)])],1),e._l(e.containData,function(t,r){return i("div",{key:r,staticStyle:{padding:"10px 0","border-top":"solid 1px #e6ebf5"}},[i("div",{staticClass:"sub-item",class:e.dragShow(r)?"active-item":"",on:{dragover:function(t){return t.preventDefault(),function(t){return e.onDragover(t,r)}(t)},dragenter:function(t){return t.preventDefault(),function(t){return e.onDragenter(t,r)}(t)},dragleave:function(t){return t.stopPropagation(),t.preventDefault(),function(t){return e.onDragleave(t,r)}(t)},drop:function(t){return t.preventDefault(),function(t){return e.onDragdrop(t,r)}(t)}}},[e.dragShow(r)?i("div",{staticClass:"active-tip"},[i("span",[e._v("释放鼠标，上传文件")])]):e._e(),i("el-form-item",{attrs:{label:"子提单号"}},[i("el-input",{attrs:{disabled:!e.isEdit||"0"!==e.orderType||"209"===e.isEffect,maxlength:20,"show-word-limit":"",placeholder:"请输入",clearable:""},model:{value:t.billNo,callback:function(i){e.$set(t,"billNo",i)},expression:"item.billNo"}})],1),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.isEdit||"0"!==e.orderType||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.cancelItem(r)}}},[e._v("\n          删除\n        ")]),i("el-upload",{ref:"uploadFile",refInFor:!0,staticStyle:{"margin-left":"110px"},attrs:{type:"text",action:"",multiple:"",accept:".pdf,.PDF",limit:10,"http-request":e.uploadSubFile,"on-remove":function(t,i){return e.onSubFileRemove(t,i,r)},"before-upload":e.beforeUpload,"on-exceed":e.beforeExceed,"on-preview":e.onFilePreview,"file-list":t.fileList,disabled:!e.isEdit}},[i("div",[i("span",{staticStyle:{cursor:"auto"},on:{click:function(e){e.stopPropagation()}}},[e._v("\n              将文件拖到此处，或\n            ")]),i("el-button",{attrs:{disabled:!e.isEdit||"0"!==e.orderType||"209"===e.isEffect,type:"text",size:"small"},on:{click:function(t){return e.onFile(r)}}},[e._v("\n              点击上传\n            ")])],1)])],1)])})],2)],1)},de=[];function me(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function pe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?me(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):me(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var fe=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectForm={billNo:void 0},e.loading=!1,e.isEdit=!1,e.isDragFile=!1,e.containData=[],e.fileList=[],e.files=[],e.copyFiles=[],e.copyFileList=[],e.copyContainData=[],e.copyBillNo=[],e.orderRow={},e.sIndex="",e.currentId="",e.lastenter="",e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"init",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){var i,r,s,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.orderRow=this.isOrder||{},i=t||{},this.isEdit=!i.id,this.selectForm.billNo=i.billNo,this.copyBillNo=JSON.parse(JSON.stringify(i.billNo||"")),this.currentId=i.id||void 0,r=(i.files||"").split(","),this.fileList=[],r.map(function(e){if(e){var t=e.split(".");t.shift(),a.fileList.push({name:t.join("."),url:e})}}),this.files=JSON.parse(JSON.stringify(this.fileList)),this.copyFileList=JSON.parse(JSON.stringify(this.fileList)),this.copyFiles=JSON.parse(JSON.stringify(this.fileList)),s=i.children,this.containData=(s||[]).map(function(e){var t=e.files,i=Object(o["a"])(e,["files"]),r=(t||"").split(","),s=[];return r.map(function(e){if(e){var t=e.split(".");t.shift(),s.push({name:t.join("."),url:e})}}),pe({},i,{fileList:s,files:s})}),this.copyContainData=JSON.parse(JSON.stringify(this.containData));case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"addItem",value:function(){this.containData.push({billNo:void 0,fileList:[],files:[]})}},{key:"cancelItem",value:function(e){this.containData.splice(e,1)}},{key:"dragShow",value:function(e){return this.sIndex===e&&this.isDragFile}},{key:"onDragenter",value:function(e,t){if("000"===t){var i=document.getElementsByClassName("main-item");i[0].classList.add("dragging-over")}else{var r=document.getElementsByClassName("sub-item");r[t].classList.add("dragging-over")}this.lastenter=e.target,this.isEdit&&(this.sIndex=t,this.isDragFile=!0)}},{key:"onDragover",value:function(e,t){this.isEdit&&(this.sIndex=t,this.isDragFile=!0)}},{key:"onDragleave",value:function(e,t){if(this.lastenter===e.target){if("000"===t){var i=document.getElementsByClassName("main-item");i[0].classList.add("dragging-over")}else{var r=document.getElementsByClassName("sub-item");r[t].classList.add("dragging-over")}if(!this.isEdit)return;this.sIndex=t,this.isDragFile=!1}}},{key:"onDragdrop",value:function(e,t){if("000"===t){var i=document.getElementsByClassName("main-item");i[0].classList.add("dragging-over")}else{var r=document.getElementsByClassName("sub-item");r[t].classList.add("dragging-over")}this.isEdit&&(this.sIndex=t,this.isDragFile=!1,this.onDrop(e))}},{key:"onDrop",value:function(e){var t=(e.dataTransfer||{}).files||[];if(!(t.length<=0)){var i=t[0]||{};-1!==i.type.indexOf("pdf")?"000"===this.sIndex&&(this.files||[]).length>10?this.$message.error("文件上传限制为10个"):"000"!==this.sIndex&&(this.containData[this.sIndex].files||[]).length>10?this.$message.error("文件上传限制为10个"):"000"===this.sIndex?this.uploadFile({file:i}):this.uploadSubFile({file:i}):this.$message.error("请上传pdf文件")}}},{key:"beforeUpload",value:function(e){return-1===e.type.indexOf("pdf")?(this.$message.error("仅支持pdf文件"),!1):e.name.length>100?(this.$message.error("pdf文件名过长"),!1):void 0}},{key:"beforeExceed",value:function(e){this.$message.error("pdf文件上传限制为10个")}},{key:"onSubFileRemove",value:function(e,t,i){var r=this;this.sIndex=i;var s="";e.url?s=e.url:this.containData.map(function(t){var i=t.files.find(function(t){return t.uid===e.uid});i&&(s=i.url)}),s&&this.$deleteLoad(s,!0).then(function(e){r.$message.success("删除成功")}).catch(function(e){return e}),this.containData[this.sIndex].files=this.containData[this.sIndex].files.filter(function(e){return e.url!==s}),this.containData[this.sIndex].fileList=this.containData[this.sIndex].fileList.filter(function(e){return e.url!==s})}},{key:"onFilePreview",value:function(e){var t="https://file.jhtinfo.net/"+e.url;window.open(t)}},{key:"onFile",value:function(e){this.sIndex=e}},{key:"uploadSubFile",value:function(e){var t=this,i=e.file;this.$upload(!0,i,"jht-admin/orderlist/booking/putFile/".concat(O()().valueOf()+"/"+i.name)).then(function(i){var r=i.data;t.containData[t.sIndex].files.push({name:(e.file||{}).name,uid:(e.file||{}).uid,url:r}),t.containData[t.sIndex].fileList.push({name:(e.file||{}).name,url:i.data}),t.$message.success("上传成功")}).catch(function(e){return e})}},{key:"uploadFile",value:function(e){var t=this,i=e.file;this.$upload(!0,i,"jht-admin/orderlist/booking/putFile/".concat(O()().valueOf()+"/"+i.name)).then(function(i){var r=i.data;t.files.push({name:(e.file||{}).name,uid:(e.file||{}).uid,url:r}),t.fileList.push({name:(e.file||{}).name,url:i.data}),t.$message.success("上传成功")}).catch(function(e){return e})}},{key:"onFileRemove",value:function(e,t){var i=this,r="";if(e.url)r=e.url;else{var s=this.files.find(function(t){return t.uid===e.uid});s&&(r=s.url)}r&&this.$deleteLoad(r,!0).then(function(e){i.$message.success("删除成功")}).catch(function(e){return e}),this.files=this.files.filter(function(e){return e.url!==r}),this.fileList=this.fileList.filter(function(e){return e.url!==r})}},{key:"editOrder",value:function(){this.isEdit=!0}},{key:"cancelOrder",value:function(){this.isEdit=!1,this.sIndex="",this.containData=[],this.selectForm.billNo=JSON.parse(JSON.stringify(this.copyBillNo)),this.fileList=JSON.parse(JSON.stringify(this.copyFileList)),this.files=JSON.parse(JSON.stringify(this.copyFiles)),this.containData=JSON.parse(JSON.stringify(this.copyContainData))}},{key:"saveOrder",value:function(){var e=this,t=this.isStatus;if("204"!==t){this.isOrder;if(this.selectForm.billNo){var i=this.containData.every(function(e){return e.billNo});if(i){var r=this.containData.map(function(e){e.fileList;var t=e.files,i=(e.isDragFile,Object(o["a"])(e,["fileList","files","isDragFile"]));return pe({},i,{files:t.map(function(e){return e.url}).join(",")})});this.loading=!0;var s=pe({},this.selectForm,{bookingId:this.orderRow.id,files:this.files.map(function(e){return e.url}).join(","),children:r,id:this.currentId});Object(v["D"])(s).then(function(t){e.loading=!1,e.$message.success("保存成功"),e.reset(),e.$emit("refresh")}).catch(function(t){return e.loading=!1,t})}else this.$message.error("请填写子提单号")}else this.$message.error("请填写主提单号")}}},{key:"reset",value:function(){this.containData=[],this.copyContainData=[],this.copyFileList=[],this.copyFiles=[],this.copyBillNo=[],this.fileList=[],this.selectForm={billNo:void 0},this.isEdit=!1,this.sIndex="",this.isDragFile=!1}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}}]),t}(f["e"]);fe=p["a"]([Object(f["a"])({name:"fiveForm",components:{},props:{isStatus:{type:String,default:""},isEffect:{type:String,default:""},isOrder:{type:Object,default:function(){return{}}},orderType:{type:String,default:""}}})],fe);var he=fe,ve=he,ge=(i("bf9c"),Object(_["a"])(ve,ue,de,!1,null,"902948de",null)),ye=ge.exports,be=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.activeName="1",e.formStatus="",e.selectLoading=!1,e.btnLoading=!1,e.loading=!1,e.statusList=[],e.isOrder={},e.orderId="",e.isEffect="",e.isType="",e.isThrow=!1,e.statusData=[{key:"202",value:"已放SO",keys:["202"]},{key:"207",value:"补料确认",keys:["202","207","208"]},{key:"208",value:"已放单",keys:["202","207","208"]},{key:"203",value:"已上船",keys:["203","204","207","208"]},{key:"204",value:"已甩柜",keys:["203","204"]},{key:"205",value:"已开船",keys:["203","205"]},{key:"206",value:"已抵达",keys:["205","206"]},{key:"209",value:"已完成",keys:["206","209"]}],e.statusAir=[{key:"211",value:"已放仓",keys:["211"]},{key:"212",value:"航司已收货",keys:["211","212"]},{key:"213",value:"已排仓",keys:["213","212"]},{key:"214",value:"已起飞",keys:["214","213"]},{key:"216",value:"已抵达",keys:["216","215","214"]},{key:"217",value:"二程已抵达",keys:["217","214"]},{key:"215",value:"二程已起飞",keys:["215","217"]},{key:"218",value:"可提货",keys:["218","216"]},{key:"219",value:"已提货",keys:["218","219"]}],e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"handleChange",value:function(e){}},{key:"setBtn",value:function(e){this.btnLoading=e}},{key:"onStatus",value:function(e){if("0"===this.isType){var t=this.$refs.fourForm;t.set(this.formStatus,!0)}}},{key:"setStatus",value:function(e){if(e){var t=[];return this.statusData.map(function(i){var r=i.keys.some(function(t){return t===e});r&&t.push({key:i.key,value:i.value})}),t}return[{key:this.statusData[0].key,value:this.statusData[0].value}]}},{key:"setAirStatus",value:function(e){if(e){var t=[];return this.statusAir.map(function(i){var r=i.keys.some(function(t){return t===e});r&&t.push({key:i.key,value:i.value})}),t}return[{key:this.statusAir[0].key,value:this.statusAir[0].value}]}},{key:"saveStatus",value:function(){var e=this;"1"!==this.isType&&"2"!==this.isType||this.$nextTick(function(){var t=e.$refs.oneForm;t.saveForm()})}},{key:"onRefresh",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.loading=!0,"1"!==t){e.next=6;break}return e.next=4,this.getSoDetail();case 4:e.next=28;break;case 6:if("2"!==t){e.next=13;break}return e.next=9,this.getSoDetail();case 9:return e.next=11,this.getContainDetail();case 11:e.next=28;break;case 13:if("3"!==t){e.next=20;break}return e.next=16,this.getSoDetail();case 16:return e.next=18,this.getThrowDetail();case 18:e.next=28;break;case 20:if("4"!==t){e.next=25;break}return e.next=23,this.getAirDetail();case 23:e.next=28;break;case 25:if("5"!==t){e.next=28;break}return e.next=28,this.getPutDetail();case 28:this.loading=!1;case 29:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"goBack",value:function(){this.$emit("back"),this.$emit("search"),this.statusList=[],this.formStatus="",this.isEffect="",this.isOrder={},this.orderId="",this.isType="";var e=this.$refs.oneForm;e.reset();var t=this.$refs.twoForm;t.reset();var i=this.$refs.threeForm;i.reset();var r=this.$refs.fourForm;r.reset()}},{key:"setData",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.isOrder=t,this.orderId=t.id,this.isType=t.businessType,this.loading=!0,"0"!==this.isType){e.next=9;break}return e.next=7,this.getAirDetail();case 7:e.next=18;break;case 9:if("1"!==this.isType&&"2"!==this.isType){e.next=18;break}return e.next=12,this.getSoDetail();case 12:return e.next=14,this.getContainDetail();case 14:return e.next=16,this.getThrowDetail();case 16:return e.next=18,this.getPutDetail();case 18:this.loading=!1;case 19:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStatus",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["e"])().then(function(e){t.selectLoading=!1;var i=e.data||[];t.statusList=i}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSoDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={bookingId:this.orderId},e.next=3,Object(v["t"])(t).then(function(e){var t=e.data||{};i.formStatus=t.status,i.isEffect=t.status,i.statusList=i.setStatus(i.isEffect);var r=i.$refs.oneForm;r.init(t);var s=i.$refs.twoForm;s.setSo(t)}).catch(function(e){return i.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAirDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={bookingId:this.orderId},e.next=3,Object(v["d"])(t).then(function(e){var t=e.data||{},r=i.$refs.fourForm;r.init(t),i.formStatus=t.status,i.isEffect=t.status,r.set(i.formStatus,!1),i.statusList=i.setAirStatus(i.isEffect)}).catch(function(e){return i.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getContainDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={bookingId:this.orderId},e.next=3,Object(v["j"])(t).then(function(e){var t=e.data||[],r=i.$refs.twoForm;r.init(t)}).catch(function(e){return i.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getThrowDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={bookingId:this.orderId},e.next=3,Object(v["x"])(t).then(function(e){var t=e.data||{};i.isThrow=!!t.id;var r=i.$refs.threeForm;r.init(t)}).catch(function(e){return i.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPutDetail",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={bookingId:this.orderId},e.next=3,Object(v["s"])(t).then(function(e){var t=e.data||{},r=i.$refs.fiveForm;r.init(t)}).catch(function(e){return i.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"created",value:function(){}},{key:"isSave",get:function(){return!("1"!==this.isType&&"2"!==this.isType||!this.isEffect||"202"===this.formStatus||"204"===this.formStatus)}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}}]),t}(f["e"]);be=p["a"]([Object(f["a"])({name:"",components:{oneForm:N,twoForm:H,threeForm:Z,fourForm:ce,fiveForm:ye},props:{orderType:{type:String,default:""},orderCode:{type:String,default:""}}})],be);var ke=be,we=ke,xe=(i("4805"),Object(_["a"])(we,b,k,!1,null,"1e2a9d2e",null)),Fe=xe.exports,Oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"invoice-order-info"},[i("div",{staticClass:"top-option",staticStyle:{overflow:"hidden"}},[i("el-link",{directives:[{name:"permission",rawName:"v-permission",value:["bookingOrderFinancialAdd"],expression:"['bookingOrderFinancialAdd']"}],staticStyle:{float:"left"},attrs:{underline:!1,type:"primary"},on:{click:e.addInvoice}},[e._v("\n      "+e._s("3"===e.custType?"新增应收款":"新增应付款")+"\n    ")]),i("el-link",{staticStyle:{float:"right"},attrs:{underline:!1,type:"primary"},on:{click:e.goBack}},[e._v("\n      返回\n    ")])],1),i("div",{staticClass:"my-scrollbar",staticStyle:{height:"calc(100vh - 180px)","overflow-y":"auto"}},[e._l(e.invoiceList,function(t,r){return i("div",{key:t.code,staticClass:"invoice-item",style:{"margin-top":0===r?0:"16px"}},[i("el-row",{staticClass:"invoice-title",nativeOn:{click:function(i){return e.showDetails(t)}}},[i("el-col",{attrs:{span:16}},["0"===t.status?i("span",{staticClass:"invoice-audit",staticStyle:{background:"#2291E6"}}):e._e(),"1"===t.status?i("span",{staticClass:"invoice-audit",staticStyle:{background:"#189800"}}):e._e(),"2"===t.status?i("span",{staticClass:"invoice-audit",staticStyle:{background:"#E12E2E"}}):e._e(),"3"===t.status?i("span",{staticClass:"invoice-audit",staticStyle:{background:"#FF7D19"}}):e._e(),i("span",{staticStyle:{"font-size":"14px"}},[e._v("\n            发票号："+e._s(t.code)+"\n          ")]),1===t.ifVerify?i("span",{staticClass:"invoice-type"},[e._v("\n            已核销\n          ")]):e._e(),e.formatterCutoffTime(t)?i("span",{staticClass:"invoice-day"},[e._v("\n            逾期"+e._s(e.formatterCutoffTime(t))+"天\n          ")]):e._e()]),t.isOpen?i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},["1"!==t.status&&!t.isEdit&&e.$checkPermission(["bookingOrderFinancialAudit"])?i("el-button",{attrs:{type:"text"},on:{click:function(i){return i.stopPropagation(),e.auditInvoice(t)}}},[e._v("\n            审核\n          ")]):e._e(),t.isEdit||t.isAdd||0!==t.ifVerify||"3"===t.status||!e.$checkPermission(["bookingOrderFinancialEdit"])?e._e():i("el-button",{attrs:{type:"text"},on:{click:function(i){return i.stopPropagation(),e.editRowClick(t)}}},[e._v("\n            编辑\n          ")]),t.isEdit||t.isAdd?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.cancelInvoice(t)}}},[e._v("\n            取消\n          ")]):e._e(),t.isEdit||t.isAdd?i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return i.stopPropagation(),e.saveInvoice(t)}}},[e._v("\n            保存\n          ")]):e._e()],1):e._e()],1),i("el-row",{staticClass:"img-flex"},[i("el-col",{attrs:{span:4}},[i("div",{staticClass:"img-word"},[i("span",{staticStyle:{color:"#909399"}},[e._v("账单金额:")]),i("br"),i("span",{staticClass:"img-number"},[e._v(e._s(t.amount))]),i("span",{staticClass:"img-unit"},[e._v(e._s(""+(t.currencyName||"")+(t.currencyId||"")))])])]),i("el-col",{attrs:{span:4}},[i("div",{staticClass:"img-word"},[i("span",{staticStyle:{color:"#909399"}},[e._v("本币金额：")]),i("br"),i("span",{staticClass:"img-number"},[e._v(e._s(t.selfAmount))]),i("span",{staticClass:"img-unit"},[e._v(e._s(""+(t.selfName||"")+(t.selfId||"")))])])]),i("el-col",{attrs:{span:5}},[i("div",{staticClass:"img-word"},[i("span",{staticStyle:{color:"#909399"}},[e._v("创建时间：")]),i("br"),i("span",{staticClass:"img-unit"},[e._v(e._s(t.createTime))]),i("span",{staticClass:"img-number"},[e._v(" ")])])]),i("el-col",{attrs:{span:5}},[i("div",{staticClass:"img-word"},[i("span",{staticStyle:{color:"#909399"}},[e._v("审核时间：")]),i("br"),i("span",{staticClass:"img-unit"},[e._v(e._s(t.auditTime||"--"))]),i("span",{staticClass:"img-number"},[e._v(" ")])])]),i("el-col",{attrs:{span:5}},[i("div",{staticClass:"img-word"},[i("span",{staticStyle:{color:"#909399"}},[e._v("截止付款：")]),i("br"),i("span",{staticClass:"img-unit"},[e._v(e._s(t.cutoffTime||"--"))]),i("span",{staticClass:"img-number"},[e._v(" ")])])])],1),i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"itemV.isOpen"}]},[i("el-form",{staticStyle:{padding:"16px 16px 0"},attrs:{"label-width":"85px",size:"small"}},[t.isEdit?i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"发票日期",prop:"invDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择"},model:{value:t.invDate,callback:function(i){e.$set(t,"invDate",i)},expression:"itemV.invDate"}})],1),i("el-form-item",{attrs:{label:"发票类型",prop:"invoiceType"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",filterable:""},model:{value:t.invoiceType,callback:function(i){e.$set(t,"invoiceType",i)},expression:"itemV.invoiceType"}},e._l(e.invoiceTypeList,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),i("el-form-item",{attrs:{label:"发票货币",prop:"currencyId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",filterable:""},on:{focus:e.getCurrencyList,change:function(i){return e.currencyChange(i,t)}},model:{value:t.currencyId,callback:function(i){e.$set(t,"currencyId",i)},expression:"itemV.currencyId"}},e._l(e.currencyList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),i("el-form-item",{attrs:{label:"汇率",prop:"exRate"}},[i("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",size:"small",min:0,max:9999},on:{change:function(i){return e.calculateTotalPrice(t)}},model:{value:t.exRate,callback:function(i){e.$set(t,"exRate",i)},expression:"itemV.exRate"}})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea",rows:2,size:"small",placeholder:"请输入",clearable:""},model:{value:t.remark,callback:function(i){e.$set(t,"remark",i)},expression:"itemV.remark"}})],1)],1)],1):i("el-row",{staticStyle:{"font-size":"12px","padding-bottom":"16px"}},[i("el-col",{attrs:{span:12}},[i("el-row",{staticStyle:{"font-size":"12px"}},[i("el-col",{attrs:{span:12}},[i("span",{staticStyle:{color:"#909399"}},[e._v("发票日期：")]),i("span",[e._v(e._s(t.invDate))])]),i("el-col",{attrs:{span:12}},[i("span",{staticStyle:{color:"#909399"}},[e._v("发票类型：")]),i("span",[e._v(e._s((e.invoiceTypeList.find(function(e){return e.value===t.invoiceType})||{}).label))])]),i("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:12}},[i("span",{staticStyle:{color:"#909399"}},[e._v("发票货币：")]),i("span",[e._v(e._s(t.currencyId))])]),i("el-col",{staticStyle:{"padding-top":"10px"},attrs:{span:12}},[i("span",{staticStyle:{color:"#909399"}},[e._v("汇率：")]),i("span",[e._v(e._s(t.exRate))])])],1)],1),i("el-col",{attrs:{span:12}},[i("el-row",{staticStyle:{"font-size":"12px"}},[i("el-col",{attrs:{span:24}},[i("span",{staticStyle:{color:"#909399"}},[e._v("备注：")]),i("span",[e._v(e._s(t.remark))])])],1)],1)],1)],1),i("div",{staticStyle:{"border-top":"1px solid #e8e8e8",padding:"0 16px"}},[i("div",{staticStyle:{"line-height":"44px","font-size":"14px","font-weight":"600"}},[e._v("\n              明细行\n            ")]),i("div",{staticStyle:{"font-size":"14px"}},[i("span",{staticStyle:{color:"#324770"}},[e._v("开票总金额：")]),i("span",[e._v(e._s(t.amount))]),i("span",[e._v(e._s(""+(t.currencyName||"")+(t.currencyId||"")))]),i("span",{staticStyle:{color:"#324770","margin-left":"72px"}},[e._v("账单本币总金额：")]),i("span",[e._v(e._s(t.selfAmount))]),i("span",[e._v(e._s(""+(t.selfName||"")+(t.selfId||"")))])])]),t.isEdit?i("div",{staticStyle:{width:"100%",padding:"10px 16px"}},[i("div",{staticStyle:{display:"flex","flex-flow":"row nowrap"}},[i("div",{staticStyle:{flex:"1"}},[i("el-row",{staticClass:"details-table-header details-row",attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[e._v("\n                    成本项目\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    数量\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    单价\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    金额\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    本币金额\n                  ")])],1)],1),i("div",{staticStyle:{width:"60px"}},[i("div",{staticClass:"details-table-header"},[e._v("\n                  操作\n                ")])])]),i("div",e._l(t.items,function(r,s){return i("div",{key:r.id,staticClass:"details-table-body"},[i("div",{staticStyle:{flex:"1"}},[i("el-row",{staticClass:"details-row",attrs:{gutter:10}},[i("el-col",{attrs:{span:12}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",filterable:""},on:{focus:e.getCostitemList,change:function(t){return e.costitemChange(t,r)}},model:{value:r.costitemId,callback:function(t){e.$set(r,"costitemId",t)},expression:"itemD.costitemId"}},e._l(e.projectData,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-col",{attrs:{span:3}},[i("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",size:"small",min:-99999999,max:99999999},on:{change:function(i){return e.handleChange(t,r,s)}},model:{value:r.quantity,callback:function(t){e.$set(r,"quantity",t)},expression:"itemD.quantity"}})],1),i("el-col",{attrs:{span:3}},[i("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",size:"small",min:-99999999,max:99999999},on:{change:function(i){return e.handleChange(t,r,s)}},model:{value:r.price,callback:function(t){e.$set(r,"price",t)},expression:"itemD.price"}})],1),i("el-col",{attrs:{span:3}},[i("span",[e._v("\n                        "+e._s(r.amount||"--")+"\n                      ")])]),i("el-col",{attrs:{span:3}},[i("span",[e._v("\n                        "+e._s(r.selfAmount||"--")+"\n                      ")])])],1),i("el-row",{staticClass:"details-row",attrs:{gutter:10}},[i("el-col",{staticStyle:{"padding-top":"4px"},attrs:{span:18}},[i("el-input",{attrs:{type:"textarea",rows:2,size:"small",placeholder:"说明",clearable:""},model:{value:r.itemDesc,callback:function(t){e.$set(r,"itemDesc",t)},expression:"itemD.itemDesc"}})],1)],1)],1),i("div",{staticStyle:{width:"60px"}},[t.isEdit?i("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(i){return e.handleDelete(t,r)}}},[e._v("\n                    删除\n                  ")]):e._e()],1)])}),0)]):i("div",{staticStyle:{width:"100%",padding:"10px 16px"}},[i("div",{staticStyle:{display:"flex","flex-flow":"row nowrap"}},[i("div",{staticStyle:{flex:"1"}},[i("el-row",{staticClass:"details-table-header details-row",attrs:{gutter:10}},[i("el-col",{attrs:{span:6}},[e._v("\n                    成本项目\n                  ")]),i("el-col",{attrs:{span:6}},[e._v("\n                    说明\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    数量\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    单价\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    金额\n                  ")]),i("el-col",{attrs:{span:3}},[e._v("\n                    本币金额\n                  ")])],1)],1),i("div",{staticStyle:{width:"60px"}},[i("div",{staticClass:"details-table-header"},[e._v("\n                  操作\n                ")])])]),i("div",e._l(t.items,function(r){return i("div",{key:r.id,staticClass:"details-table-body"},[i("div",{staticStyle:{flex:"1"}},[i("el-row",{staticClass:"details-row",attrs:{gutter:10}},[i("el-col",{attrs:{span:6}},[i("span",[e._v("\n                        "+e._s(r.costitemName)+"\n                      ")])]),i("el-col",{attrs:{span:6}},[i("div",{staticStyle:{"font-size":"12px",color:"#303133",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[e._v("\n                        "+e._s(r.itemDesc)+"\n                      ")])]),i("el-col",{attrs:{span:3}},[i("span",[e._v("\n                        "+e._s(r.quantity)+"\n                      ")])]),i("el-col",{attrs:{span:3}},[i("span",[e._v("\n                        "+e._s(r.price)+"\n                      ")])]),i("el-col",{attrs:{span:3}},[i("span",[e._v("\n                        "+e._s(r.amount)+"\n                      ")])]),i("el-col",{attrs:{span:3}},[i("span",[e._v("\n                        "+e._s(r.selfAmount)+"\n                      ")])])],1)],1),i("div",{staticStyle:{width:"60px"}},[t.isEdit?i("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(i){return e.handleDelete(t,r)}}},[e._v("\n                    删除\n                  ")]):e._e()],1)])}),0)]),t.isEdit?i("el-button",{staticStyle:{"margin-left":"16px"},attrs:{icon:"el-icon-circle-plus-outline",type:"primary",size:"small"},on:{click:function(i){return e.addCostitem(t)}}},[e._v("\n            新增明细行\n          ")]):e._e()],1)])],1)}),0===e.invoiceList.length?i("div",{staticStyle:{"font-size":"14px",color:"#5e6d82","text-align":"center",padding:"10px"}},[e._v("\n      暂无数据\n    ")]):e._e()],2),i("el-dialog",{attrs:{title:"发票审核",visible:e.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[i("el-form",{ref:"auditForm",attrs:{model:e.auditForm,"label-width":"50px",size:"small"}},[i("el-form-item",{attrs:{label:"审核",prop:"status"}},[i("el-radio-group",{model:{value:e.auditForm.status,callback:function(t){e.$set(e.auditForm,"status",t)},expression:"auditForm.status"}},[i("el-radio",{attrs:{label:"1"}},[e._v("\n              通过\n            ")]),i("el-radio",{attrs:{label:"2"}},[e._v("\n              拒绝\n            ")])],1)],1)],1),i("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[i("el-button",{attrs:{size:"small",disabled:e.dialogLoading},on:{click:e.cancelAudit}},[e._v("\n          取 消\n        ")]),i("el-button",{attrs:{type:"primary",size:"small",disabled:e.dialogLoading},on:{click:e.confirmAudit}},[e._v("\n          确 定\n        ")])],1)],1)])],1)},Se=[],Te=(i("ac4d"),i("8a81"),i("55dd"),i("75fc")),Ie=(i("6b54"),i("7dfc"));function Le(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function De(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Le(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Le(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var je=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.service={id:"02",name:"订舱"},e.rowDetail={},e.orderCustomer={},e.loading=!1,e.visible=!1,e.dialogLoading=!1,e.invoiceList=[],e.invoiceTypeList=[{label:"订单发票",value:"1"},{label:"冲红发票",value:"2"}],e.currencyList=[],e.projectData=[],e.whiteCountryList=[{countryId:"CN",currencyId:"RMB"}],e.editRow={},e.auditForm={id:"",status:"",note:""},e.selfCurrency={currencyId:"",currencyName:""},e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"goBack",value:function(){this.orderCustomer={},this.rowDetail={},this.invoiceList=[],this.currencyList=[],this.projectData=[],this.editRow={},this.auditForm={id:"",status:"",note:""},this.selfCurrency={currencyId:"",currencyName:""},this.$emit("back")}},{key:"show",value:function(e){this.rowDetail=e,this.getInvoiceList(),this.getCurrencyList(),this.getCostitemList(),this.getSelfCurrency(),this.getCustType()}},{key:"getCustType",value:function(){var e=this;Object(Ie["u"])([this.rowDetail.custId]).then(function(t){var i=t.data||[];e.orderCustomer=i[0]||{}}).catch(function(){e.orderCustomer={}})}},{key:"cancelInvoice",value:function(e){var t=this;e.isAdd?this.invoiceList=this.invoiceList.filter(function(e){return!e.isAdd}):this.invoiceList=this.invoiceList.filter(function(e){return!e.isAdd}).map(function(e){var i=De({},e);return i.isEdit=!1,i.isOpen=!1,i.items=[],t.editRow.id===i.id&&(i=De({},t.editRow),i.isEdit=!1,i.isOpen=!0),i})}},{key:"addInvoice",value:function(){var e=this;if(this.invoiceList.some(function(e){return e.isEdit}))this.$confirm("您有修改未保存请问是否保存？","提示",{cancelButtonText:"否",confirmButtonText:"是"}).then(function(){var t=e.invoiceList.find(function(e){return e.isEdit});t?e.saveInvoice(t):(e.invoiceList=e.invoiceList.filter(function(e){return!e.isAdd}).map(function(t){var i=De({},t);return e.editRow.id===i.id&&(i=De({},e.editRow)),i.isEdit=!1,i.isOpen=!1,i.items=[],i}),e.editRow={})}).catch(function(){e.invoiceList=e.invoiceList.filter(function(e){return!e.isAdd}).map(function(t){var i=De({},t);return e.editRow.id===i.id&&(i=De({},e.editRow)),i.isEdit=!1,i.isOpen=!1,i.items=[],i}),e.editRow={};var t=e.getInvoiceItem();e.invoiceList.push(t),e.currencyChange("RMB",t)});else{this.invoiceList=this.invoiceList.filter(function(e){return!e.isAdd}).map(function(e){return e.isEdit=!1,e.isOpen=!1,e.items=[],e});var t=this.getInvoiceItem();this.invoiceList.push(t),this.currencyChange("RMB",t),this.editRow={}}}},{key:"getUId",value:function(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}},{key:"validateData",value:function(e){if(!e.invDate)return this.$message.error("发票日期不能为空"),!1;if(!e.invoiceType)return this.$message.error("发票类型不能为空"),!1;if(!e.currencyId)return this.$message.error("发票货币不能为空"),!1;if(!e.exRate)return this.$message.error("汇率不能为空"),!1;if(0===e.items.length)return this.$message.error("发票明细行不能为空"),!1;for(var t=!0,i=0;i<e.items.length;i++){var r=e.items[i];if(!r.costitemId){this.$message.error("第".concat(i+1,"明细行项目不能为空")),t=!1;break}if(!r.itemDesc){this.$message.error("第".concat(i+1,"明细行说明不能为空")),t=!1;break}if(!r.quantity&&0!==r.quantity){this.$message.error("第".concat(i+1,"明细行数量不能为空")),t=!1;break}if(!r.price&&0!==r.price){this.$message.error("第".concat(i+1,"明细行单价不能为空")),t=!1;break}}return t}},{key:"saveInvoice",value:function(e){var t=this;if(this.validateData(e)){var i=De({},e);delete i.isOpen,delete i.isEdit,delete i.isAdd,this.editRow.id||delete i.id,i.items=i.items.map(function(e){return t.editRow.id||(delete e.id,delete e.invoiceId),e.isAdd&&delete e.id,delete e.isAdd,e}),this.loading=!0,this.editRow.id?Object(Ie["Y"])(i).then(function(){t.loading=!1,t.getInvoiceList(e.id),t.$message.success("添加成功"),t.editRow={}}).catch(function(){t.loading=!1}):Object(Ie["X"])(i).then(function(){t.loading=!1,t.getInvoiceList(e.id),t.$message.success("添加成功"),t.editRow={}}).catch(function(){t.loading=!1})}}},{key:"addCostitem",value:function(e){var t=this;this.invoiceList=this.invoiceList.map(function(i){return i.id===e.id&&(i.items=[].concat(Object(Te["a"])(i.items),[t.getCostitem(e)])),i})}},{key:"getCostitem",value:function(e){return{id:this.getUId(),invoiceId:e.id,costitemId:"",costitemName:"",itemDesc:"",quantity:"",price:"",amount:"",selfAmount:"",isAdd:!0}}},{key:"getInvoiceItem",value:function(){var e="";"1"===this.rowDetail.businessType&&(e=this.rowDetail.soCode),"0"===this.rowDetail.businessType&&(e=this.rowDetail.billNo);var t={serviceSubtypeId:this.rowDetail.businessType,currencyId:"RMB",currencyName:"人民币",selfId:this.selfCurrency.currencyId,selfName:this.selfCurrency.currencyName,selfAmount:"",exRate:"",amount:"",agentId:this.rowDetail.parentId,agentName:this.rowDetail.parentName,clientId:this.rowDetail.custId,clientName:this.rowDetail.custName,serviceTypeId:this.service.id,serviceTypeName:this.service.name,invoiceType:"",orderId:this.rowDetail.id,orderCode:e,invDate:O()().format("YYYY-MM-DD HH:mm:ss"),remark:"",clientProperty:this.orderCustomer.type+(this.orderCustomer.subtype?"-"+this.orderCustomer.subtype:""),status:"0",items:[],isOpen:!0,isEdit:!0,isAdd:!0};return t.items=[this.getCostitem(t)],t}},{key:"handleDelete",value:function(e,t){this.invoiceList=this.invoiceList.map(function(i){return i.id===e.id&&(i.items=i.items.filter(function(e){return e.id!==t.id}),i.amount=i.items.reduce(function(e,t){return parseFloat((e+t.amount).toFixed(2))},0),i.selfAmount=i.items.reduce(function(e,t){return parseFloat((e+t.selfAmount).toFixed(2))},0)),i})}},{key:"handleChange",value:function(e,t,i){var r=this;this.invoiceList=this.invoiceList.map(function(s){return s.id===e.id&&(s.items=s.items.map(function(s,a){return a===i&&(s.amount=parseFloat(((t.quantity||0)*(t.price||0)).toFixed(2)),s.selfAmount=r.calculateSelfTotalPrice(e.currencyId,e.selfId,s.amount,e.exRate)),s}),s.amount=s.items.reduce(function(e,t){return parseFloat((e+t.amount).toFixed(2))},0),s.selfAmount=s.items.reduce(function(e,t){return parseFloat((e+t.selfAmount).toFixed(2))},0)),s})}},{key:"costitemChange",value:function(e,t){t.costitemName="";var i=this.projectData.find(function(t){return t.id===e});i&&(t.costitemName=i.name)}},{key:"calculateTotalPrice",value:function(e){var t=this;this.invoiceList=this.invoiceList.map(function(i){return i.id===e.id&&(i.items=i.items.map(function(e,r){return e.selfAmount=t.calculateSelfTotalPrice(i.currencyId,i.selfId,e.amount,i.exRate),e}),i.selfAmount=t.calculateSelfTotalPrice(e.currencyId,e.selfId,e.amount,e.exRate)),i})}},{key:"calculateSelfTotalPrice",value:function(e,t,i,r){return e===t?i:r?parseFloat((i*r).toFixed(2)):i}},{key:"currencyChange",value:function(e,t){var i=this,r=this.currencyList.find(function(t){return t.id===e});if(r)if(t.currencyName=r.name,t.selfId===e)t.exRate=1,this.calculateTotalPrice(t);else{var s={c1:t.selfId,c2:e};t.exRate="",Object(Ie["x"])(s).then(function(r){var s=(r.data||[]).filter(function(i){return i.lcId===e&&i.fcId===t.selfId}).sort(function(e,t){return O()(t.updateTime).diff(O()(e.updateTime),"second")});if(s.length){var a=!0,n=!1,o=void 0;try{for(var l,c=s[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;if(O()().diff(O()(u.effective),"second")>0){t.exRate=u.rate;break}}}catch(d){n=!0,o=d}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}t.exRate?i.calculateTotalPrice(t):i.$message.error("系统暂无汇率，请联系管理员或手动输入")}else i.$message.error("系统暂无汇率，请联系管理员或手动输入")}).catch(function(e){return e})}else t.currencyName="",t.exRate="",this.calculateTotalPrice(t)}},{key:"getSelfCurrency",value:function(){this.selfCurrency={currencyId:"RMB",currencyName:"人民币"}}},{key:"cancelAudit",value:function(){this.visible=!1,this.auditForm={id:"",status:"",note:""}}},{key:"confirmAudit",value:function(){var e=this,t=De({},this.auditForm);this.dialogLoading=!0,Object(Ie["f"])(t).then(function(){e.$message.success("操作成功"),e.dialogLoading=!1,e.getInvoiceList(e.auditForm.id),e.cancelAudit()}).catch(function(){e.dialogLoading=!1})}},{key:"auditInvoice",value:function(e){var t=this;if("0"===e.status){var i={id:e.id,status:"3",note:""};this.loading=!0,Object(Ie["f"])(i).then(function(){t.loading=!1,e.status="3",t.visible=!0,t.auditForm={id:e.id,status:"1",note:""}}).catch(function(e){return t.loading=!1,e})}else this.visible=!0,this.auditForm={id:e.id,status:"1",note:""}}},{key:"editRowClick",value:function(e){this.editRow=JSON.parse(JSON.stringify(e)),e.isEdit=!0}},{key:"getCurrencyList",value:function(){var e=this;this.currencyList.length||Object(Ie["t"])().then(function(t){var i=t.data||{};e.currencyList=i.result||[]}).catch(function(t){return e.currencyList=[],t})}},{key:"getCostitemList",value:function(){var e=this;if(!this.projectData.length){var t={name:"",serviceTypeId:this.service.id,typeId:this.rowDetail.businessType,page:1,size:9999};Object(Ie["s"])(t).then(function(t){var i=t.data||{};e.projectData=i.result||[]}).catch(function(t){return e.projectData=[],t})}}},{key:"showDetails",value:function(e){var t=this;this.invoiceList.some(function(e){return e.isEdit})?this.$confirm("您有修改未保存请问是否保存？","提示",{cancelButtonText:"否",confirmButtonText:"是"}).then(function(){t.saveInvoice(e)}).catch(function(){t.getInvoiceById(e)}):this.getInvoiceById(e)}},{key:"getInvoiceById",value:function(e){var t=this,i=e.isOpen;if(i)return this.invoiceList=this.invoiceList.filter(function(e){return!e.isAdd}).map(function(e){var i=De({},e);return t.editRow.id===i.id&&(i=De({},t.editRow)),i.isEdit=!1,i.isOpen=!1,i.items=[],i}),void(this.editRow={});this.loading=!0,Object(Ie["A"])({id:e.id}).then(function(i){t.loading=!1;var r=i.data||{};t.invoiceList=t.invoiceList.filter(function(e){return!e.isAdd}).map(function(i){var s=De({},i);return t.editRow.id===s.id&&(s=De({},t.editRow)),s.isEdit=!1,s.isOpen=!1,s.items=[],s.id===e.id&&(s.isOpen=!0,s.items=(r.items||[]).map(function(e){return De({},e,{isAdd:!1})})),s}),t.editRow={}}).catch(function(){t.loading=!1})}},{key:"getInvoiceList",value:function(e){var t=this,i={orderId:this.rowDetail.id,enterpriseId:[this.rowDetail.parentId],serviceTypeId:this.service.id};this.loading=!0,Object(Ie["E"])(i).then(function(i){t.loading=!1,t.invoiceList=(i.data||[]).map(function(i){var r=De({items:[]},i,{isOpen:!1,isEdit:!1,isAdd:!1});return r.id===e&&t.getInvoiceById(r),r})}).catch(function(){t.loading=!1})}},{key:"formatterCutoffTime",value:function(e){var t=e.cutoffTime;if(!t)return 0;if(O()(t).format("YYYY-MM-DD")===O()().format("YYYY-MM-DD"))return 0;var i=O()().diff(t,"day")+1;return i>0&&0===e.ifVerify?i:0}},{key:"userCountryId",get:function(){var e=h["a"].info||{};return e.countryId}},{key:"custType",get:function(){var e=h["a"].info||{};return e.custType}}]),t}(f["e"]);je=p["a"]([Object(f["a"])({name:"order-financial",components:{}})],je);var _e=je,Ce=_e,Ne=(i("8eaf"),Object(_["a"])(Ce,Oe,Se,!1,null,"63bebd43",null)),Ee=Ne.exports;function $e(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function Pe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?$e(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):$e(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var Re=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.showPage="index",e.isAuditVisible=!1,e.loading=!1,e.formLoading=!1,e.isSupperierVisible=!1,e.selectLoading=!1,e.isEdit=!1,e.companyTypeList=[{id:"1",name:"客户"},{id:"2",name:"二级代理商"}],e.orderTypeList=[{name:"销售订单",id:"0"},{name:"采购订单",id:"1"}],e.typeList=[],e.auditList=[{name:"待审核",id:"0"},{name:"审核通过",id:"1"},{name:"审核拒绝",id:"2"}],e.portList=[],e.serveceList=[],e.goodsList=[{name:"放货条款",id:"0"},{name:"MBL电放",id:"1"},{name:"MBL正本",id:"2"},{name:"货运单(SWB/AWB)",id:"3"},{name:"MBL目的地放单",id:"4"}],e.serviceList=[],e.bsTransList=[],e.companyList=[],e.tableData=[],e.statusList=[],e.searchForm={orderStatus:void 0,businessType:void 0,custId:void 0,portsToId:void 0,serverTerms:void 0,goodsClause:void 0,serviceId:void 0,orgId:void 0,comId:void 0,comType:"",orderType:"0",orderTime:[]},e.title="",e.customsId="",e.page=1,e.size=10,e.total=0,e.orderCode="",e.keyword="",e.selectType="1",e.supperierForm={supplierId:void 0,supplierName:void 0,isDefault:1},e.defaultObj={},e.rules={isDefault:{required:!0,message:"请选择指派方式",trigger:"change"},supplierId:{required:!0,message:"请选择供应商",trigger:"change"}},e.supplierList=[],e.checkForm={audit:void 0,reason:void 0},e.checkRules={audit:[{required:!0,message:"请选择审核状态",trigger:"change"}],reason:[{required:!0,message:"拒绝原因不能为空",trigger:"blur"}]},e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"showFinancial",value:function(e){var t="";if("1"===e.businessType&&(t=e.soCode),"0"===e.businessType&&(t=e.billNo),t){this.showPage="financial";var i=this.$refs.financial;i.show(e)}else this.$message.warning("暂无SO/提单号")}},{key:"formatStatus",value:function(e){var t="";return this.statusList.map(function(i){i.key===e.orderStatus&&(t=i.value)}),t}},{key:"formatContain",value:function(e,t){var i=(e||{}).containerStatus||[],r=i.filter(function(e){return e===t});return r.length+"/"+i.length}},{key:"getWordsList",value:function(){var e=this;this.selectLoading=!0;var t={type:"server_terms"};Object(v["y"])(t).then(function(t){var i=t.data||[];e.serveceList=i,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStatusData",value:function(){var e=this;this.selectLoading=!0;var t={businessType:this.searchForm.businessType};Object(v["u"])(t).then(function(t){e.statusList=t.data||[],e.selectLoading=!1}).catch(function(){e.statusList=[],e.selectLoading=!1})}},{key:"getBsService",value:function(){var e=this;this.selectLoading=!0;var t={model:{conveyance:this.searchForm.businessType},page:1,size:9999};Object(v["f"])(t).then(function(t){e.selectLoading=!1;var i=t.data||{};e.serviceList=i.result||[]}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getBsTransList",value:function(){var e=this,t={page:1,size:999,model:{id:this.searchForm.serviceId}};this.selectLoading=!0,Object(g["g"])(t).then(function(t){var i=t.data||{};e.bsTransList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onOrderType",value:function(){this.tableData=[],"1"===this.searchForm.orderType&&(this.searchForm.comType="",this.searchForm.comId="",this.companyList=[]),this.searchForm.businessType&&this.getTableData(1)}},{key:"onComType",value:function(){this.searchForm.comId="",this.companyList=[],this.tableData=[]}},{key:"onCompany",value:function(){this.tableData=[],this.searchForm.businessType&&this.getTableData(1)}},{key:"getCompanyList",value:function(){var e=this,t={page:1,size:9999},i=this.custType,r=this.custSubtype,s=null;if("2"!==i||"1"!==this.searchForm.comType&&"2"!==r)if("2"===i&&"2"===this.searchForm.comType)t.parentId=this.custId,t.subtype="2",t.types="02",s=v["c"];else{if("0"!==i)return void(this.companyList=[]);t.parentId=this.custId,t.subtype="1",t.types="02",s=v["c"]}else t.custIds=[this.custId],s=v["n"];this.selectLoading=!0,s(t).then(function(t){if("2"!==i||"1"!==e.searchForm.comType&&"2"!==r){var s=t.data||{};e.companyList=s.result||[]}else{var a=t.data||[];e.companyList=a}e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getSubtypeData",value:function(){var e=this;this.selectLoading=!0;var t=this.custId,i={custId:t,typeId:"02"};Object(v["v"])(i).then(function(t){t.success&&(e.typeList=t.data||[]),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getPortList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:9999,type:this.searchForm.businessType};Object(v["r"])(t).then(function(t){var i=t.data||{};e.portList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onBusiness",value:function(){this.searchForm.serviceId=void 0,this.searchForm.orderStatus=void 0,this.selectType="1",this.statusList=[],this.serviceList=[],this.tableData=[],this.searchForm.businessType&&(this.getStatusData(),this.getTableData(1))}},{key:"onSupperType",value:function(){if(this.supperierForm.supplierId=void 0,this.supperierForm.supplierName=void 0,1===this.supperierForm.isDefault){var e=this.defaultObj,t=e.id,i=e.name;this.supperierForm.supplierId=t,this.supperierForm.supplierName=i}}},{key:"getCustTypeList",value:function(){var e=this,t={page:1,size:9999,cas:"S",typeId:"06",subtypeId:this.supperierForm.subtypeId};return Object(v["m"])(t).then(function(t){var i=t.data||{},r=i.result||[];e.supplierList=JSON.parse(JSON.stringify(r).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e})}},{key:"viewSupperier",value:function(e){var t=this;this.isSupperierVisible=!0,this.supperierForm.id=e.id,this.supperierForm.subtypeId=e.businessType,this.formLoading=!0,Object(v["w"])({id:e.bsId}).then(function(e){var i=e.data||{};t.defaultObj={id:i.custId,name:i.custName};var r=t.defaultObj,s=r.id,a=r.name;t.supperierForm.supplierId=s,t.supperierForm.supplierName=a,t.formLoading=!1}).catch(function(e){return t.formLoading=!1,e})}},{key:"confirmSupperier",value:function(e){var t=this,i=this.$refs.supperierForm;i.validate(function(e){if(!e)return!1;t.formLoading=!1,0===t.supperierForm.isDefault&&t.supplierList.map(function(e){t.supperierForm.supplierId===e.id&&(t.supperierForm.supplierName=e.name)}),Object(v["F"])(t.supperierForm).then(function(e){t.$message({type:"success",message:"保存成功"}),t.formLoading=!1,t.isSupperierVisible=!1,t.getTableData()}).catch(function(e){return t.formLoading=!1,e})})}},{key:"cancelSupperier",value:function(){this.isSupperierVisible=!1,this.resetSupperierForm()}},{key:"resetSupperierForm",value:function(){this.supperierForm={supplierId:void 0,supplierName:void 0,isDefault:1};var e=this.$refs.supperierForm;e.clearValidate()}},{key:"viewData",value:function(e){this.showPage="detail";var t=this.$refs.detailForm;t.setData(e)}},{key:"auditData",value:function(e){this.isAuditVisible=!0,this.checkForm.audit=e.audit||"0",this.checkForm.reason=e.reason,this.checkForm.bookingId=e.id}},{key:"cancelAudit",value:function(){this.resetCheckForm()}},{key:"confirmAudit",value:function(){var e=this,t=this.$refs.checkForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0,Object(v["A"])(e.checkForm).then(function(t){e.$message({type:"success",message:"保存成功"}),e.formLoading=!1,e.resetCheckForm(),e.getTableData()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"resetCheckForm",value:function(){this.isAuditVisible=!1,this.checkForm={audit:void 0,reason:void 0};var e=this.$refs.checkForm;e.clearValidate()}},{key:"editData",value:function(e){this.showPage="collapse",this.orderCode=e.markNo;var t=this.$refs.itemForm;t.setData(e)}},{key:"cancelData",value:function(e){var t=this,i={bookingId:e.id};this.$confirm("请确认是否取消该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["a"])(i).then(function(e){t.$message({type:"success",message:"取消成功"}),t.getTableData()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"deleteData",value:function(e){var t=this,i={bookingId:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["b"])(i).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"getTableData",value:function(e){var t=this;this.loading=!0;var i=this.custType;"1"===i?this.searchForm.orderType="1":"3"===i&&(this.searchForm.orderType="0");var r=this.searchForm,s=r.comId,a=(r.comType,r.custId,r.orderTime),n=r.orderType,l=r.businessType,c=Object(o["a"])(r,["comId","comType","custId","orderTime","orderType","businessType"]);if(!l)return this.tableData=[],this.$message.error("请选择业务类型"),void(this.loading=!1);e&&(this.page=e);var u={page:this.page,size:this.size,model:Pe({},c,{orderType:n,businessType:l,markNo:"1"===this.selectType&&this.keyword?this.keyword:void 0,so:"2"===this.selectType&&this.keyword?this.keyword:void 0,containerNo:"3"===this.selectType&&this.keyword?this.keyword:void 0,billNo:"4"===this.selectType&&this.keyword?this.keyword:void 0,airNo:"5"===this.selectType&&this.keyword?this.keyword:void 0,custId:this.custId,custType:this.custType,targetId:s||void 0})};Array.isArray(a)&&a.length>0&&(u.model.startTime=a[0],u.model.endTime=a[1]),Object(v["p"])(u).then(function(e){var i=e.data||{};t.tableData=i.result||[],t.total=i.total,t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"created",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.searchForm.custId=this.custId,this.searchForm.orderTime=[O()().subtract(30,"d").format("YYYY-MM-DD"),O()().format("YYYY-MM-DD")],this.getSubtypeData();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=h["a"].info||{},t=e.custSubtype;return t}},{key:"parentId",get:function(){var e=h["a"].info||{},t=e.parentId;return t}},{key:"parentName",get:function(){var e=h["a"].info||{},t=e.parentName;return t}}]),t}(f["e"]);Re=p["a"]([Object(f["a"])({name:"",components:{detail:y["a"],collapseItem:Fe,orderFinancial:Ee},props:{}})],Re);var ze=Re,Ae=ze,Me=Object(_["a"])(Ae,r,s,!1,null,"430b38f4",null);t["default"]=Me.exports},"301c":function(e,t,i){"use strict";var r=i("7735"),s=i.n(r);s.a},"30a1":function(e,t,i){},4805:function(e,t,i){"use strict";var r=i("eee2"),s=i.n(r);s.a},"4d18":function(e,t,i){},7735:function(e,t,i){},"7dfc":function(e,t,i){"use strict";i.d(t,"Q",function(){return o}),i.d(t,"o",function(){return l}),i.d(t,"p",function(){return c}),i.d(t,"U",function(){return u}),i.d(t,"W",function(){return d}),i.d(t,"V",function(){return m}),i.d(t,"s",function(){return p}),i.d(t,"t",function(){return f}),i.d(t,"D",function(){return h}),i.d(t,"E",function(){return v}),i.d(t,"A",function(){return g}),i.d(t,"h",function(){return y}),i.d(t,"X",function(){return b}),i.d(t,"Y",function(){return k}),i.d(t,"B",function(){return w}),i.d(t,"C",function(){return x}),i.d(t,"H",function(){return F}),i.d(t,"G",function(){return O}),i.d(t,"i",function(){return S}),i.d(t,"a",function(){return T}),i.d(t,"l",function(){return I}),i.d(t,"x",function(){return L}),i.d(t,"M",function(){return D}),i.d(t,"J",function(){return j}),i.d(t,"I",function(){return _}),i.d(t,"K",function(){return C}),i.d(t,"b",function(){return N}),i.d(t,"m",function(){return E}),i.d(t,"j",function(){return $}),i.d(t,"q",function(){return P}),i.d(t,"L",function(){return R}),i.d(t,"P",function(){return z}),i.d(t,"N",function(){return A}),i.d(t,"O",function(){return M}),i.d(t,"k",function(){return B}),i.d(t,"c",function(){return q}),i.d(t,"n",function(){return H}),i.d(t,"v",function(){return W}),i.d(t,"f",function(){return V}),i.d(t,"e",function(){return U}),i.d(t,"d",function(){return J}),i.d(t,"g",function(){return Y}),i.d(t,"z",function(){return G}),i.d(t,"w",function(){return K}),i.d(t,"r",function(){return X}),i.d(t,"R",function(){return Q}),i.d(t,"y",function(){return Z}),i.d(t,"S",function(){return ee}),i.d(t,"F",function(){return te}),i.d(t,"T",function(){return ie}),i.d(t,"u",function(){return re});i("8e6e"),i("ac6a"),i("456d");var r=i("bd86"),s=i("b32d");function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(i,!0).forEach(function(t){Object(r["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function o(e){var t={url:"/auth/supplier/getSupplierList",method:"get",params:e};return Object(s["a"])(t)}function l(e){var t={url:"/auth/agent/getAgentList",method:"get",params:e};return Object(s["a"])(t)}function c(e){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:e};return Object(s["a"])(t)}function u(e){var t={url:"/auth/custtype/getServerType",method:"get",params:e};return Object(s["a"])(t)}function d(e){var t={url:"/finance/account/rollback",method:"get",params:e};return Object(s["a"])(t)}function m(e){var t={url:"/orders/worder/getOrderList",method:"post",data:e};return Object(s["a"])(t)}function p(e){var t={url:"/finance/costitem/getCostitemList",method:"get",params:e};return Object(s["a"])(t)}function f(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:n({page:1,size:999},e)};return Object(s["a"])(t)}function h(e){var t={url:"/finance/account/page",method:"post",data:e};return Object(s["a"])(t)}function v(e){var t={url:"finance/account/order_invoice",method:"post",data:e};return Object(s["a"])(t)}function g(e){var t={url:"/finance/account/getInvoice",method:"get",params:e};return Object(s["a"])(t)}function y(e){var t={url:"/finance/account/deleteInvoice",method:"post",params:e};return Object(s["a"])(t)}function b(e){var t={url:"/finance/account/saveInvoice",method:"post",data:e};return Object(s["a"])(t)}function k(e){var t={url:"/finance/account/updateInvoice",method:"post",data:e};return Object(s["a"])(t)}function w(e){var t={url:"/finance/account/exportAll",method:"post",responseType:"blob",data:e};return Object(s["a"])(t)}function x(e){var t={url:"/finance/account/export2",method:"post",responseType:"blob",data:e};return Object(s["a"])(t)}function F(e){var t={url:"/finance/p/page",method:"post",data:e};return Object(s["a"])(t)}function O(e){var t={url:"/finance/p/get",method:"get",params:e};return Object(s["a"])(t)}function S(e){var t={url:"/auth/p/del",method:"delete",params:e};return Object(s["a"])(t)}function T(e){var t={url:"/finance/p/add",method:"post",data:e};return Object(s["a"])(t)}function I(e){var t={url:"/finance/p/edit",method:"post",data:e};return Object(s["a"])(t)}function L(e){var t={url:"/setting/exchange/rate",method:"get",params:e};return Object(s["a"])(t)}function D(e){var t={url:"/finance/r/page",method:"post",data:e};return Object(s["a"])(t)}function j(e){var t={url:"/finance/account/query",method:"post",data:e};return Object(s["a"])(t)}function _(e){var t={url:"/finance/r/payback",method:"get",params:e};return Object(s["a"])(t)}function C(e){var t={url:"/finance/r/info",method:"get",params:e};return Object(s["a"])(t)}function N(e){var t={url:"/finance/r/add",method:"post",data:e};return Object(s["a"])(t)}function E(e){var t={url:"/finance/r/edit",method:"post",data:e};return Object(s["a"])(t)}function $(e){var t={url:"/auth/r/del",method:"delete",params:e};return Object(s["a"])(t)}function P(e){var t={url:"/auth/acct/getAcctList",method:"get",params:e};return Object(s["a"])(t)}function R(e){var t={url:"/finance/r/export",method:"post",responseType:"blob",data:e};return Object(s["a"])(t)}function z(e){var t={url:"/finance/apply/page",method:"post",data:e};return Object(s["a"])(t)}function A(e){var t={url:"/finance/account/handel",method:"post",data:e};return Object(s["a"])(t)}function M(e){var t={url:"/finance/apply/get",method:"get",params:e};return Object(s["a"])(t)}function B(e){var t={url:"/auth/apply/del",method:"delete",params:e};return Object(s["a"])(t)}function q(e){var t={url:"/finance/apply/add",method:"post",data:e};return Object(s["a"])(t)}function H(e){var t={url:"/finance/apply/edit",method:"post",data:e};return Object(s["a"])(t)}function W(e){var t={url:"/auth/customer/customer",method:"post",data:e};return Object(s["a"])(t)}function V(e){var t={url:"/finance/account/audit",method:"get",params:e};return Object(s["a"])(t)}function U(e){var t={url:"/finance/r/audit",method:"get",params:e};return Object(s["a"])(t)}function J(e){var t={url:"/auth/apply/audit",method:"post",params:e};return Object(s["a"])(t)}function Y(e){var t={url:"/auth/p/audit",method:"post",params:e};return Object(s["a"])(t)}function G(e){var t={url:"/orders/fullorder/getOrderList",method:"post",data:e};return Object(s["a"])(t)}function K(e){var t={url:"/orders/declare_order/get_declare_data",method:"post",data:e};return Object(s["a"])(t)}function X(e){var t={url:"/orders/card/get_data",method:"post",data:e};return Object(s["a"])(t)}function Q(e){var t={url:"/orders/trailer/page",method:"post",data:e};return Object(s["a"])(t)}function Z(e){var t={url:"/express/web/expressorder/list",method:"post",data:e};return Object(s["a"])(t)}function ee(){var e={url:"/auth/agent/customer_finance",method:"get"};return Object(s["a"])(e)}function te(e){var t={url:"/finance/bill/billPage",method:"post",data:e};return Object(s["a"])(t)}function ie(e){var t={url:"/finance/account/unverified",method:"post",data:e};return Object(s["a"])(t)}function re(e){var t={url:"/auth/supplier/custType",method:"post",data:e};return Object(s["a"])(t)}},"86ca":function(e,t,i){"use strict";var r=i("4d18"),s=i.n(r);s.a},"8eaf":function(e,t,i){"use strict";var r=i("fe2a"),s=i.n(r);s.a},"9e68":function(e,t,i){"use strict";var r=i("30a1"),s=i.n(r);s.a},bf9c:function(e,t,i){"use strict";var r=i("f2a7"),s=i.n(r);s.a},c12c:function(e,t,i){"use strict";var r=i("258d"),s=i.n(r);s.a},eee2:function(e,t,i){},f2a7:function(e,t,i){},fe2a:function(e,t,i){}}]);