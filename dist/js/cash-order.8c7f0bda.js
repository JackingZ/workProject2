(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["cash-order"],{1269:function(e,t,a){},7895:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailShow,expression:"!detailShow"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"请款申请单"}}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["waiterListAdd"],expression:"['waiterListAdd']"}],staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n              新增请款申请单\n            ")]),"2"===e.custType&&"1"===e.custSubtype?a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"公司类型"},on:{change:e.onComType},model:{value:e.searchForm.comType,callback:function(t){e.$set(e.searchForm,"comType",t)},expression:"searchForm.comType"}},e._l(e.companyTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"1"===e.custSubtype&&"2"===e.searchForm.comType?a("el-select",{staticStyle:{width:"170px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.searchForm.comId,callback:function(t){e.$set(e.searchForm,"comId",t)},expression:"searchForm.comId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"状态",size:"small",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{placeholder:"付款类型",size:"small",clearable:""},model:{value:e.searchForm.payType,callback:function(t){e.$set(e.searchForm,"payType",t)},expression:"searchForm.payType"}},e._l(e.categoryList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{placeholder:"付款方式",size:"small",clearable:""},model:{value:e.searchForm.payMethod,callback:function(t){e.$set(e.searchForm,"payMethod",t)},expression:"searchForm.payMethod"}},e._l(e.sourceList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{type:"daterange","unlink-panels":"",align:"right",size:"small","range-separator":"~","value-format":"yyyy-MM-dd","start-placeholder":"发票起期","end-placeholder":"发票止期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"250px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{attrs:{label:"客户名称",value:"2"}}),a("el-option",{attrs:{label:"请款单号",value:"3"}})],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["waiterListQuery"],expression:"['waiterListQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSearch(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{fixed:"left",prop:"id",label:"请款申请单号",width:"150"}}),a("el-table-column",{attrs:{prop:"",label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status})||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"applyTime",label:"付款日期",width:"170"}}),a("el-table-column",{attrs:{prop:"custName",label:"客户名称",width:"150"}}),a("el-table-column",{attrs:{prop:"",label:"客户类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.custType?a("span",[e._v("聚货通")]):"3"===t.row.custType?a("span",[e._v("供应商")]):"2-1"===t.row.custType?a("span",[e._v("一级代理")]):"2-2"===t.row.custType?a("span",[e._v("二级代理")]):"1-0"===t.row.custType?a("span",[e._v("直客")]):"1-1"===t.row.custType?a("span",[e._v("同行")]):a("span",[e._v("--")])]}}])}),a("el-table-column",{attrs:{prop:"",label:"付款类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.categoryList.find(function(e){return e.id===t.row.payType})||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"付款方式",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.sourceList.find(function(e){return e.id===t.row.payMethod})||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"currencyName",label:"货币",width:"120"}}),a("el-table-column",{attrs:{prop:"payAmount",label:"金额","min-width":"120"}}),a("el-table-column",{attrs:{prop:"exRate",label:"汇率",width:"100"}}),a("el-table-column",{attrs:{prop:"selfAmount",label:"本币金额","min-width":"120"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[3!==t.row.status&&e.$checkPermission(["waiterListUpdate"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("\n                编辑\n              ")]):e._e(),1!==t.row.status&&e.$checkPermission(["waiterListDel"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row.id)}}},[e._v("\n                删除\n              ")]):e._e(),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDetail(t.row.id)}}},[e._v("\n                查看详情\n              ")]),1!==t.row.status&&e.$checkPermission(["waiterListAudit"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleAudit(t.row,t.$index)}}},[e._v("\n                审核\n              ")]):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:e.detailShow,expression:"detailShow"}],staticClass:"app-container"},[a("detail",{ref:"detailForm",attrs:{"is-edit":e.isEdit,"is-once":e.isOnce,"status-list":e.statusList,"source-list":e.sourceList,"category-list":e.categoryList},on:{back:function(t){e.detailShow=!1},getTableData:e.handleSearch}})],1),a("el-dialog",{attrs:{title:"发票审核",visible:e.dialogAudit,"close-on-click-modal":!1,width:"700px"},on:{"update:visible":function(t){e.dialogAudit=t}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[a("el-form",{ref:"auditForm",staticStyle:{"padding-top":"20px"},attrs:{model:e.auditForm,rules:e.auditFormRules,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"审核",prop:"status"}},[a("el-radio-group",{model:{value:e.auditForm.status,callback:function(t){e.$set(e.auditForm,"status",t)},expression:"auditForm.status"}},[a("el-radio",{attrs:{label:1}},[e._v("\n                通过\n              ")]),a("el-radio",{attrs:{label:2}},[e._v("\n                拒绝\n              ")])],1)],1)],1),a("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelAudit}},[e._v("\n            取 消\n          ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmAudit}},[e._v("\n            确 定\n          ")])],1)],1)])],1)])},i=[],r=(a("8e6e"),a("ac6a"),a("456d"),a("a8db")),o=a("bd86"),s=a("d225"),c=a("b0b4"),l=a("308d"),u=a("6bb5"),d=a("4e2b"),p=a("9ab4"),m=a("60a3"),f=a("9dba"),h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}],staticStyle:{"background-color":"#ffffff"}},[a("div",{staticStyle:{padding:"0 20px","line-height":"50px","border-bottom":"1px solid #e8e8e8"}},[a("div",{staticStyle:{"text-align":"right"}},[a("span",{staticStyle:{cursor:"pointer"},on:{click:e.handleBack}},[a("i",{staticClass:"el-icon-back"}),a("span",[e._v("返回")])])])]),a("div",{staticClass:"app-panel order-detail"},[a("el-row",{staticStyle:{"background-color":"#f2f2f2",padding:"10px"}},[a("el-col",{staticStyle:{"font-weight":"700","font-size":"18px","line-height":"30px"},attrs:{span:4}},[a("span",[e._v("请款申请单")])]),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[e.isEdit?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleSave}},[e._v("\n          "+e._s(e.isOnce?"提交":"重新提交")+"\n        ")]):e._e()],1)],1),a("el-form",{ref:"editForm",class:e.isEdit?"":"view-item",staticStyle:{"padding-top":"20px"},attrs:{model:e.form,rules:e.formRules,"label-width":"110px"}},[e.isOnce?e._e():a("el-form-item",{attrs:{label:"请款申请单号",prop:"id"}},[e.isEdit?a("el-input",{attrs:{maxlength:30,size:"small",placeholder:"请输入","show-word-limit":"",disabled:""},model:{value:e.form.id,callback:function(t){e.$set(e.form,"id",t)},expression:"form.id"}}):a("span",{staticClass:"number-text"},[e._v("\n          "+e._s(e.form.id)+"\n        ")])],1),e.isOnce?e._e():a("el-form-item",{attrs:{label:"状态",prop:"status"}},[e.isEdit?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",disabled:""},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):a("span",[e._v("\n          "+e._s((e.statusData.find(function(t){return t.id===e.form.status})||{}).name)+"\n        ")])],1),a("el-form-item",{attrs:{label:"客户",prop:"custId"}},[e.isEdit?a("el-input",{attrs:{size:"small",placeholder:"请输入",disabled:""},model:{value:e.form.custName,callback:function(t){e.$set(e.form,"custName",t)},expression:"form.custName"}},[e.isOnce?a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleCustomer},slot:"append"}):e._e()],1):a("span",[e._v("\n          "+e._s(e.form.custName)+"\n        ")])],1),a("el-form-item",{attrs:{label:"付款类型",prop:"payType"}},[e.isEdit?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.payType,callback:function(t){e.$set(e.form,"payType",t)},expression:"form.payType"}},e._l(e.categoryData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):a("span",[e._v("\n          "+e._s((e.categoryData.find(function(t){return t.id===e.form.payType})||{}).name)+"\n        ")])],1),a("el-form-item",{attrs:{label:"付款方式",prop:"payMethod"}},[e.isEdit?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.form.payMethod,callback:function(t){e.$set(e.form,"payMethod",t)},expression:"form.payMethod"}},e._l(e.sourceData,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):a("span",[e._v("\n          "+e._s((e.sourceData.find(function(t){return t.id===e.form.payMethod})||{}).name)+"\n        ")])],1),a("el-form-item",{attrs:{label:"付款日期",prop:"applyTime"}},[e.isEdit?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择"},model:{value:e.form.applyTime,callback:function(t){e.$set(e.form,"applyTime",t)},expression:"form.applyTime"}}):a("span",[e._v("\n          "+e._s(e.form.applyTime)+"\n        ")])],1),a("el-form-item",{attrs:{label:"货币",prop:"currencyId"}},[e.isEdit?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",filterable:""},on:{change:e.onExRate},model:{value:e.form.currencyId,callback:function(t){e.$set(e.form,"currencyId",t)},expression:"form.currencyId"}},e._l(e.currencyList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1):a("span",[e._v("\n          "+e._s(e.form.currencyName)+"\n        ")])],1),a("el-form-item",{attrs:{label:"汇率",prop:"exRate"}},[e.isEdit?a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",size:"small",min:0,max:9999},on:{change:e.onAmount},model:{value:e.form.exRate,callback:function(t){e.$set(e.form,"exRate",t)},expression:"form.exRate"}}):a("span",[e._v("\n          "+e._s(e.form.exRate)+"\n        ")])],1),a("el-form-item",{attrs:{label:"付款金额",prop:"payAmount"}},[e.isEdit?a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",size:"small",min:-99999999,max:99999999,precision:2},on:{blur:e.onAmount,change:e.onAmount},model:{value:e.form.payAmount,callback:function(t){e.$set(e.form,"payAmount",t)},expression:"form.payAmount"}}):a("span",[e._v("\n          "+e._s(e.form.payAmount)+"\n        ")])],1),a("el-form-item",{attrs:{label:"本币金额",prop:"selfAmount"}},[e.isEdit?a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",size:"small",min:-99999999,max:99999999,precision:2,disabled:""},model:{value:e.form.selfAmount,callback:function(t){e.$set(e.form,"selfAmount",t)},expression:"form.selfAmount"}}):a("span",[e._v("\n          "+e._s(e.form.selfAmount)+"\n        ")])],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注"}},[e.isEdit?a("el-input",{attrs:{size:"small",type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入",clearable:""},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}}):a("span",[e._v("\n          "+e._s(e.form.remark?e.form.remark:"")+"\n        ")])],1)],1),a("div",[a("div",{staticStyle:{"border-top":"1px solid #e8e8e8","line-height":"50px"}},[e._v("\n        关联发票\n      ")]),a("el-row",[a("el-col",{attrs:{span:4}},[a("span",{staticStyle:{"font-weight":"700","padding-left":"20px"}},[e._v("总计发票金额：")]),a("span",[e._v(e._s(e.invoiceFilter))])]),a("el-col",{attrs:{span:20}},[a("div",{staticStyle:{"text-align":"right","padding-right":"10px"}},[e.isEdit?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleInvoice}},[e._v("\n              选择发票\n            ")]):e._e()],1)])],1),a("el-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.invoicesTable,"header-align":"center",align:"center",border:""}},[a("el-table-column",{attrs:{prop:"code",label:"发票编号"}}),a("el-table-column",{attrs:{prop:"orderCode",label:"原单号"}}),a("el-table-column",{attrs:{prop:"invDate",label:"发票日期",width:"170"}}),a("el-table-column",{attrs:{prop:"auditTime",label:"审核时间",width:"170"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"currencyName",label:"货币"}}),a("el-table-column",{attrs:{prop:"exRate",label:"汇率",width:"80"}}),a("el-table-column",{attrs:{prop:"amount",label:"金额","min-width":"100"}}),a("el-table-column",{attrs:{prop:"selfAmount",label:"本币金额","min-width":"100"}}),a("el-table-column",{attrs:{fixed:"right",width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEdit?a("el-button",{staticStyle:{color:"#f56c6c"},attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.$index,"2")}}},[e._v("\n              删除\n            ")]):e._e()]}}])})],1),a("el-dialog",{attrs:{title:"选择客户",visible:e.isCustomer,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){e.isCustomer=t},closed:function(t){e.isCustomer=!1,e.name=""}}},[a("div",{staticStyle:{"text-align":"right"}},["2"===e.custType&&"1"===e.custSubtype?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"公司类型"},on:{change:e.onComType},model:{value:e.form.custTag,callback:function(t){e.$set(e.form,"custTag",t)},expression:"form.custTag"}},[a("el-option",{attrs:{label:"本公司",value:"1"}}),a("el-option",{attrs:{label:"分公司",value:"2"}})],1):e._e(),"2"===e.custType&&"1"===e.custSubtype&&"2"===e.form.custTag?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.form.agentId,callback:function(t){e.$set(e.form,"agentId",t)},expression:"form.agentId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{placeholder:"客户类型",size:"small",filterable:""},on:{change:e.handleCustType},model:{value:e.form.custType,callback:function(t){e.$set(e.form,"custType",t)},expression:"form.custType"}},e._l(e.custTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),"3"===e.form.custType?a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"客户",size:"small",clearable:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}):e._e(),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getCustomerType}},[e._v("\n            查询\n          ")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.customerList,border:"",height:"375px"},on:{"row-click":e.onCustomerRow}},[a("el-table-column",{attrs:{prop:"name",label:"客户名称"}}),a("el-table-column",{attrs:{prop:"",label:"客户属性"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===e.form.custType?a("span",[e._v("聚货通")]):"3"===e.form.custType?a("span",[e._v("供应商")]):"2"===e.form.custType&&"1"===t.row.subtype?a("span",[e._v("一级代理")]):"2"===e.form.custType&&"2"===t.row.subtype?a("span",[e._v("二级代理")]):"1"===e.form.custType&&"0"===t.row.subtype?a("span",[e._v("直客")]):"1"===e.form.custType&&"1"===t.row.subtype?a("span",[e._v("同行")]):a("span",[e._v("--")])]}}])}),a("el-table-column",{attrs:{prop:"parentName",label:"所属上级"}})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"current-change":e.handleCustomerChange}})],1),a("el-dialog",{attrs:{title:"选择发票",visible:e.isInvoice,"close-on-click-modal":!1,width:"1200px"},on:{"update:visible":function(t){e.isInvoice=t},closed:e.cancelInvoice}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"服务大类",size:"small",filterable:"",clearable:""},on:{focus:e.getServiceType,change:e.onService},model:{value:e.serviceTypeId,callback:function(t){e.serviceTypeId=t},expression:"serviceTypeId"}},e._l(e.serviceTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"250px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[a("el-option",{directives:[{name:"show",rawName:"v-show",value:!["02","06"].includes(e.serviceTypeId),expression:"!['02','06'].includes(serviceTypeId)"}],attrs:{label:"原单号",value:"1"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:["02"].includes(e.serviceTypeId),expression:"['02'].includes(serviceTypeId)"}],attrs:{label:"提单号",value:"4"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:["02","06"].includes(e.serviceTypeId),expression:"['02', '06'].includes(serviceTypeId)"}],attrs:{label:"SO号",value:"5"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:["02"].includes(e.serviceTypeId),expression:"['02'].includes(serviceTypeId)"}],attrs:{label:"柜号",value:"6"}})],1)],1),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getInvoiceList}},[e._v("\n            查询\n          ")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[e.invoiceData.length?a("vxe-table",{ref:"invoiceTable",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.invoiceData,"auto-resize":!0,border:"",resizable:"",size:"small",height:"400"},on:{"checkbox-change":e.onInvoiceSelection,"checkbox-all":e.onInvoiceAll}},[a("vxe-table-column",{attrs:{fixed:"left",type:"checkbox",width:"55"}}),a("vxe-table-column",{attrs:{visible:"02"!==e.serviceTypeId&&"06"!==e.serviceTypeId,fixed:"left",width:"160",title:"原单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.orderCode))])]}}],null,!1,2549254981)}),a("vxe-table-column",{attrs:{fixed:"left",visible:"02"===e.serviceTypeId||"06"===e.serviceTypeId,width:"160",title:"SO号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.soNoList||[]).join(",")))])]}}],null,!1,2108195871)}),a("vxe-table-column",{attrs:{visible:"02"===e.serviceTypeId,width:"160",title:"提单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.billNoList||[]).join(",")))])]}}],null,!1,528558280)}),a("vxe-table-column",{attrs:{visible:"02"===e.serviceTypeId,width:"160",title:"航空单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.airNoList||[]).join(",")))])]}}],null,!1,3875341849)}),a("vxe-table-column",{attrs:{visible:"02"===e.serviceTypeId,width:"160",title:"柜号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s((t.row.containerNoList||[]).join(",")))])]}}],null,!1,3174292868)}),a("vxe-table-column",{attrs:{title:"开票日期",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.invDate))])]}}],null,!1,2385324867)}),a("vxe-table-column",{attrs:{title:"审核时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.auditTime))])]}}],null,!1,202786590)}),a("vxe-table-column",{attrs:{title:"货币",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(""+(t.row.currencyName||"")+(t.row.currencyId||"")))])]}}],null,!1,2595197676)}),a("vxe-table-column",{attrs:{title:"汇率",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.exRate))])]}}],null,!1,1133638521)}),a("vxe-table-column",{attrs:{title:"金额","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.amount))])]}}],null,!1,1167497322)}),a("vxe-table-column",{attrs:{title:"本币金额","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.selfAmount))])]}}],null,!1,3043539318)})],1):e._e()],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.handleInvoiceChange}}),a("div",{staticStyle:{"text-align":"right","padding-top":"20px"}},[a("el-button",{on:{click:e.cancelInvoice}},[e._v("\n            取 消\n          ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.invoiceSelectionConfirm}},[e._v("\n            确 定\n          ")])],1)],1)],1)],1)])},y=[],v=a("75fc"),g=(a("28a5"),a("55dd"),a("96cf"),a("3b8d")),b=(a("7f7f"),a("7514"),a("7dfc")),k=a("5a0c"),x=a.n(k);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function O(){return{payAmount:void 0,selfAmount:void 0,id:void 0,currencyId:void 0,currencyName:void 0,agentId:void 0,agentName:void 0,custId:void 0,custName:void 0,custType:void 0,exRate:void 0,applyTime:void 0,remark:void 0,status:void 0,payType:void 0,payMethod:void 0}}var _=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.form=O(),e.formRules={id:[{required:!0,message:"请款申请单号不能为空",trigger:"blur"}],currencyId:[{required:!0,message:"请选择货币",trigger:"change"}],custId:[{required:!0,message:"客户不能为空",trigger:"blur"}],agentId:[{required:!0,message:"请选择所属公司",trigger:"change"}],exRate:[{required:!0,message:"汇率不能为空(根据货币确定)",trigger:"blur"}],payAmount:[{required:!0,message:"请款金额不能为空",trigger:"blur"}],selfAmount:[{required:!0,message:"本币金额不能为空",trigger:"blur"}],applyTime:[{required:!0,message:"请选择请款申请单日期",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}],payMethod:[{required:!0,message:"请选择付款方式",trigger:"change"}],payType:[{required:!0,message:"请选择付款类型",trigger:"change"}]},e.name="",e.keyWord="",e.selectType="",e.serviceTypeId="",e.isCustomer=!1,e.isInvoice=!1,e.custTypeList=[],e.customerData=[],e.invoiceData=[],e.serviceTypeList=[],e.invoiceArr=[],e.invoicesData=[],e.companyList=[],e.detailLoading=!1,e.dialogLoading=!1,e.selectLoading=!1,e.currencyList=[],e.currentId="",e.total=0,e.page=1,e.size=10,e.pagination={page:1,size:10,total:0},e.selfCurrency={currencyId:"RMB",currencyName:"人民币"},e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"countNum",value:function(e,t){return parseFloat((e*t).toFixed(2))}},{key:"setData",value:function(e){this.getCurrencyList(),e?(this.currentId=e,this.getRequestById(e)):(this.form.agentId=this.custId,this.form.agentName=this.custName,this.setCustomerType())}},{key:"setCustomerType",value:function(){var e=this.custType,t=this.custSubtype;"0"===e?this.custTypeList=[{id:"3",name:"供应商"}]:"2"===e&&"1"===t&&"1"===this.form.custTag?this.custTypeList=[{id:"0",name:"聚货通"},{id:"3",name:"供应商"}]:"2"===e&&"1"===t&&"2"===this.form.custTag?this.custTypeList=[{id:"2",name:"代理商"}]:"2"===e&&"2"===t?this.custTypeList=[{id:"2",name:"代理商"}]:(this.custTypeList=[],this.form.custType=void 0)}},{key:"resetDialog",value:function(){this.pagination={page:1,size:10,total:0},this.name=""}},{key:"onComType",value:function(){this.form.agentId="",this.form.agentName="",this.form.custName="",this.form.custId="",this.form.custType="",this.form.clientType="",this.invoicesData=[],this.customerData=[],this.setCustomerType(),"2"!==this.form.custTag&&(this.form.agentId=this.custId,this.form.agentName=this.custName)}},{key:"onCompany",value:function(){var e=this;this.form.agentName="",this.form.custName="",this.form.custId="",this.form.custType="",this.form.clientType="",this.invoicesData=[],this.customerData=[];var t=this.companyList.find(function(t){return t.id===e.form.agentId});t&&(this.form.agentName=t.name)}},{key:"getCompanyList",value:function(){var e=this;this.selectLoading=!0,Object(b["S"])().then(function(t){var a=t.data||[];e.companyList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleCustType",value:function(){this.form.custName="",this.form.custId="",this.form.clientType="",this.form.exRate=void 0,this.invoicesData=[],this.customerData=[]}},{key:"handleCustomer",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.resetDialog(),this.isCustomer=!0;case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCustomerRow",value:function(e){var t=e.type,a=e.subtype;this.isCustomer=!1,this.form.custId=e.id,this.form.custName=e.name,this.form.clientType=t+(a?"-".concat(a):""),this.invoiceData=[],this.onExRate()}},{key:"handleCustomerChange",value:function(e){this.pagination.page=e}},{key:"getCustomerType",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.custType,a=this.custSubtype,this.form.custType){e.next=7;break}return this.$message.error("请选择客户类型"),e.abrupt("return",!1);case 7:if("2"!==t||"1"!==a||"1"!==this.form.custTag||"0"!==this.form.custType){e.next=12;break}this.customerData=[{id:"0",name:"聚货通",type:"0",countryId:"CN"}],this.pagination.total=this.customerData.length,e.next=28;break;case 12:if("2"!==t||"1"!==a||"1"!==this.form.custTag||"3"!==this.form.custType){e.next=17;break}return e.next=15,this.getSupplierList();case 15:e.next=28;break;case 17:if("2"!==t||"1"!==a||"2"!==this.form.custTag){e.next=22;break}this.customerData=[{id:this.custId,name:this.custName,type:"2",subtype:"1",countryId:this.userCountryId,parentName:"聚货通"}],this.pagination.total=this.customerData.length,e.next=28;break;case 22:if("0"!==t){e.next=27;break}return e.next=25,this.getSupplierList();case 25:e.next=28;break;case 27:"2"===t&&"2"===a&&(this.customerData=[{id:this.parentId,name:this.parentName,type:"2",subtype:"1",countryId:this.userCountryId,parentName:"聚货通"}]);case 28:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSupplierList",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,t={page:this.pagination.page,size:9999,name:this.name},e.next=4,Object(b["Q"])(t).then(function(e){var t=e.data||{},n=t.result||[];a.customerData=n.map(function(e){return e.type="3",e}),a.pagination.total=t.total,a.dialogLoading=!1}).catch(function(e){return a.dialogLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAgentList",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.dialogLoading=!0,t={parentId:"0",page:this.pagination.page,size:9999,name:this.name},e.next=4,Object(b["o"])(t).then(function(e){var t=e.data||{},n=t.result||[];a.customerData=n.map(function(e){return e.type="2",e}),a.pagination.total=t.total,a.dialogLoading=!1}).catch(function(e){return a.dialogLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCurrencyList",value:function(){var e=this;Object(b["t"])().then(function(t){var a=t.data||{};e.currencyList=a.result||[],e.currencyList.map(function(t){t.countries.some(function(t){return t.id===e.userCountryId})&&(e.selfCurrency={currencyId:t.id,currencyName:t.name})})}).catch(function(e){return e})}},{key:"onExRate",value:function(){var e=this;this.form.exRate=void 0,this.form.selfAmount=void 0,this.form.payAmount=void 0,this.form.currencyId&&(this.selfCurrency.currencyId!==this.form.currencyId?Object(b["x"])({c1:this.form.currencyId,c2:this.selfCurrency.currencyId}).then(function(t){var a=t.data||[];if(a.length<=0)e.$message.error("暂无汇率，请配置");else{var n=a.filter(function(t){return t.lcId===e.form.currencyId}).map(function(e){return e.time=x()(e.effective).unix(),e}).sort(function(e,t){return t.time-e.time}),i=n[0]||{};i.lcId===e.form.currencyId&&(e.form.exRate=i.rate),e.form.exRate||e.$message.error("暂无汇率，请配置")}}).catch(function(e){return e}):this.form.exRate=1)}},{key:"onAmount",value:function(){this.form.exRate>0&&(this.form.selfAmount=this.countNum(this.form.payAmount||0,this.form.exRate))}},{key:"getRequestById",value:function(e){var t=this;this.detailLoading=!0,Object(b["O"])({id:e}).then(function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(a){var n,i,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=a.data||{},i=n.invoiceEntityList,o=n.custType,s=Object(r["a"])(n,["invoiceEntityList","custType"]),t.form=T({},s,{custType:o?o.substring(0,1):"1",clientType:o}),t.form.exRate>0&&(t.form.selfAmount=t.countNum(t.form.payAmount||0,t.form.exRate)),t.invoicesData=i||[],t.detailLoading=!1;case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t.detailLoading=!1,e})}},{key:"handleSave",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;if(e.invoicesData.length<=0)e.$message.error("请选择发票");else{e.detailLoading=!0;var a=e.form,n=a.clientType,i=(a.custType,a.custTag,Object(r["a"])(a,["clientType","custType","custTag"]),T({},e.form,{custType:n,operatorCustId:e.custId,selfId:e.selfCurrency.currencyId,status:0}));i.invoiceIdList=e.invoicesData.filter(function(e){return"X"!==e.tag}).map(function(e){return e.id}),e.currencyList.map(function(e){e.id===i.currencyId&&(i.currencyName=e.name)}),e.isOnce?Object(b["c"])(i).then(function(t){e.$message({type:"success",message:"新增成功"}),e.resetForm(),e.detailLoading=!1,e.$emit("back"),e.$emit("getTableData")}).catch(function(t){return e.detailLoading=!1,t}):Object(b["n"])(i).then(function(t){e.$message({type:"success",message:"编辑成功"}),e.resetForm(),e.detailLoading=!1,e.$emit("back"),e.$emit("getTableData")}).catch(function(t){return e.detailLoading=!1,t})}})}},{key:"handleBack",value:function(){this.$emit("back"),this.resetForm()}},{key:"resetForm",value:function(){this.form=O(),this.invoicesData=[],this.customerData=[];var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"getServiceType",value:function(){var e=this,t={cas:"",custId:this.form.custId},a=(this.form.clientType||"").split("-")[0]||"";"1"===a&&(t.cas="C"),"2"===a&&(t.cas="A"),"3"===a&&(t.cas="S"),this.selectLoading=!0,Object(b["U"])(t).then(function(t){e.selectLoading=!1;var a=t.data||[];e.serviceTypeList=a.map(function(e){return{id:e.typeId,name:e.typeName}})}).catch(function(){e.serviceTypeList=[],e.selectLoading=!1})}},{key:"onService",value:function(){this.invoiceData=[]}},{key:"handleInvoiceChange",value:function(e){this.page=e,this.getInvoiceList()}},{key:"handleInvoice",value:function(){this.form.custId?(this.isInvoice=!0,this.invoiceArr=this.invoicesData.filter(function(e){return"X"!==e.tag}),this.page=1,this.size=10,this.total=0):this.$message.error("请选择客户")}},{key:"getInvoiceList",value:function(){var e=this;this.dialogLoading=!0;var t={model:{flag:"0",custId:this.form.custId,clientId:this.form.agentId,serviceTypeId:this.serviceTypeId,orderCode:"1"===this.selectType?this.keyWord:void 0,code:"3"===this.selectType?this.keyWord:void 0,billNo:"4"===this.selectType?this.keyWord:void 0,soNo:"5"===this.selectType?this.keyWord:void 0,containerNo:"6"===this.selectType?this.keyWord:void 0},size:this.size,page:this.page};Object(b["N"])(t).then(function(t){var a=t.data||{};e.invoiceData=a.result,e.total=a.total,e.invoiceArr.length&&e.invoiceArr.map(function(t){var a=e.invoiceData.find(function(e){return e.id===t.id||"".concat(e.id)===t.id});a&&e.$nextTick(function(){var t=e.$refs.invoiceTable;t.toggleCheckboxRow(a)})}),e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,[null,t]})}},{key:"onInvoiceSelection",value:function(e){e.checked?this.invoiceArr.push(e.row):this.invoiceArr=this.invoiceArr.filter(function(t){return t.id!==e.row.id}),this.invoiceArr=this.invoiceArr.map(function(e){return T({},e,{tag:"1"})})}},{key:"onInvoiceAll",value:function(e){var t=this;e.checked?this.invoiceArr=[].concat(Object(v["a"])(this.invoiceArr),Object(v["a"])(this.invoiceData)).reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[]):this.invoiceArr=this.invoiceArr.filter(function(e){return!t.invoiceData.find(function(t){return t.id===e.id})})}},{key:"cancelInvoice",value:function(){this.isInvoice=!1,this.serviceTypeId="",this.selectType="",this.keyWord="",this.invoiceArr=[],this.invoiceData=[]}},{key:"invoiceSelectionConfirm",value:function(){this.isInvoice=!1,this.serviceTypeId="",this.selectType="",this.keyWord="";var e=this.invoicesData.filter(function(e){return"X"!==e.tag}),t=[].concat(Object(v["a"])(this.invoiceArr),Object(v["a"])(e)),a={},n=t.reduce(function(e,t){return a[t.id]||(a[t.id]=!0,e.push(t)),e},[]);this.invoicesData=n}},{key:"handleDelete",value:function(e,t){"2"===t&&(this.invoicesData[e].tag="X")}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}},{key:"username",get:function(){var e=f["a"].info||{},t=e.username;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"parentId",get:function(){var e=f["a"].info||{},t=e.parentId;return t}},{key:"parentName",get:function(){var e=f["a"].info||{},t=e.parentName;return t}},{key:"userCountryId",get:function(){var e=f["a"].info||{};return e.countryId}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}},{key:"statusData",get:function(){var e=this.statusList;return e}},{key:"sourceData",get:function(){var e=this.sourceList;return e}},{key:"categoryData",get:function(){var e=this.categoryList;return e}},{key:"invoiceFilter",get:function(){var e=this,t=this.invoicesData.filter(function(e){return"X"!==e.tag}),a=0;return t.map(function(t){t.amount&&t.exRate>0&&(a+=e.countNum(t.amount,t.exRate))}),parseFloat(a.toFixed(2))}},{key:"invoicesTable",get:function(){return this.invoicesData.filter(function(e){return"X"!==e.tag})}},{key:"customerList",get:function(){return this.customerData.slice((this.pagination.page-1)*this.pagination.size,this.pagination.page*this.pagination.size)}}]),t}(m["e"]);_=p["a"]([Object(m["a"])({name:"detail",components:{},props:{isEdit:{type:Boolean,default:!1},isOnce:{type:Boolean,default:!1},statusList:{type:Array,default:function(){return[]}},sourceList:{type:Array,default:function(){return[]}},categoryList:{type:Array,default:function(){return[]}}}})],_);var I=_,j=I,L=(a("d1e6"),a("2877")),S=Object(L["a"])(j,h,y,!1,null,"70a8e1e8",null),D=S.exports;function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function A(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(a,!0).forEach(function(t){Object(o["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var N=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.searchForm={comType:void 0,comId:void 0,id:void 0,custName:void 0,end:void 0,start:void 0,status:void 0,payMethod:void 0,payType:void 0},e.auditForm={id:"",status:1,note:""},e.auditFormRules={status:[{required:!0,message:"请选择审核状态",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.time=[],e.tableData=[],e.companyList=[],e.total=0,e.page=1,e.size=10,e.selectType="2",e.keyWord="",e.loading=!1,e.selectLoading=!1,e.dialogLoading=!1,e.dialogAudit=!1,e.isEdit=!1,e.isOnce=!1,e.detailShow=!1,e.statusList=[{name:"未审核",id:0},{name:"已通过",id:1},{name:"已拒绝",id:2},{name:"审核中",id:3}],e.categoryList=[{name:"采购付款",id:"0"},{name:"赔付",id:"1"},{name:"抵扣",id:"2"}],e.sourceList=[{name:"银行汇款",id:"0"},{name:"微信",id:"1"},{name:"支付宝",id:"2"},{name:"PayPal",id:"3"},{name:"其它",id:"4"}],e.companyTypeList=[{id:"1",name:"本公司"},{id:"2",name:"分公司"}],e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"handleAdd",value:function(){this.detailShow=!0,this.isEdit=!0,this.isOnce=!0;var e=this.$refs.detailForm;e.setData()}},{key:"handleEdit",value:function(e){this.detailShow=!0,this.isEdit=!0,this.isOnce=!1;var t=this.$refs.detailForm;t.setData(e.id)}},{key:"handleDetail",value:function(e){this.detailShow=!0,this.isEdit=!1,this.isOnce=!1;var t=this.$refs.detailForm;t.setData(e)}},{key:"handleDelete",value:function(e){var t=this,a={id:e};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(b["k"])(a).then(function(e){t.$message({type:"success",message:"删除成功"}),t.handleSearch()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"cancelAudit",value:function(){this.auditForm={id:"",status:1,note:""};var e=this.$refs.auditForm;this.$nextTick(function(){e.clearValidate()}),this.dialogAudit=!1}},{key:"handleAudit",value:function(e,t){var a=this;if(0===e.status){var n={id:e.id,status:3,note:""};Object(b["d"])(n).then(function(){a.tableData[t].status=3}).catch(function(e){return e})}this.dialogAudit=!0,this.auditForm={id:e.id,status:1,note:""}}},{key:"confirmAudit",value:function(){var e=this,t=A({},this.auditForm);this.dialogLoading=!0,Object(b["d"])(t).then(function(){e.$message.success("操作成功"),e.dialogLoading=!1,e.cancelAudit(),e.handleSearch()}).catch(function(){e.dialogLoading=!1})}},{key:"handlePass",value:function(e){}},{key:"handleRefuse",value:function(e){}},{key:"handleResubmit",value:function(e){}},{key:"onComType",value:function(){this.tableData=[],this.searchForm.comId="",this.companyList=[],this.handleSearch(1)}},{key:"onCompany",value:function(){this.tableData=[],this.handleSearch(1)}},{key:"getCompanyList",value:function(){var e=this;this.selectLoading=!0,Object(b["S"])().then(function(t){var a=t.data||[];e.companyList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleSearch",value:function(e){var t=this;e&&(this.page=e);var a=this.searchForm,n=a.comType,i=a.comId,o=Object(r["a"])(a,["comType","comId"]),s=this.custId,c={model:A({},o,{custName:"2"===this.selectType?this.keyWord:void 0,id:"3"===this.selectType?this.keyWord:void 0,custTag:n,agentId:"1"===n?[s]:i?[i]:[]}),size:this.size,page:this.page};Array.isArray(this.time)&&this.time.length>0&&(c.model.start=this.time[0],c.model.end=this.time[1]),this.loading=!0,Object(b["P"])(c).then(function(e){var a=e.data||{};t.tableData=a.result||[],t.total=a.total,t.loading=!1}).catch(function(e){return t.loading=!1,[null,e]})}},{key:"handleSizeChange",value:function(e){this.size=e,this.handleSearch()}},{key:"handleCurrentChange",value:function(e){this.page=e,this.handleSearch()}},{key:"created",value:function(){this.time=[x()().subtract(30,"d").format("YYYY-MM-DD"),x()().format("YYYY-MM-DD")];var e=this.custType,t=this.custSubtype;this.searchForm.comType="1","2"===e&&"1"===t&&(this.searchForm.comType="2"),this.handleSearch()}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}}]),t}(m["e"]);N=p["a"]([Object(m["a"])({name:"",components:{detail:D},props:{}})],N);var z=N,$=z,F=Object(L["a"])($,n,i,!1,null,"f394d15a",null);t["default"]=F.exports},"7dfc":function(e,t,a){"use strict";a.d(t,"Q",function(){return s}),a.d(t,"o",function(){return c}),a.d(t,"p",function(){return l}),a.d(t,"U",function(){return u}),a.d(t,"W",function(){return d}),a.d(t,"V",function(){return p}),a.d(t,"s",function(){return m}),a.d(t,"t",function(){return f}),a.d(t,"D",function(){return h}),a.d(t,"E",function(){return y}),a.d(t,"A",function(){return v}),a.d(t,"h",function(){return g}),a.d(t,"X",function(){return b}),a.d(t,"Y",function(){return k}),a.d(t,"B",function(){return x}),a.d(t,"C",function(){return w}),a.d(t,"H",function(){return T}),a.d(t,"G",function(){return O}),a.d(t,"i",function(){return _}),a.d(t,"a",function(){return I}),a.d(t,"l",function(){return j}),a.d(t,"x",function(){return L}),a.d(t,"M",function(){return S}),a.d(t,"J",function(){return D}),a.d(t,"I",function(){return C}),a.d(t,"K",function(){return A}),a.d(t,"b",function(){return N}),a.d(t,"m",function(){return z}),a.d(t,"j",function(){return $}),a.d(t,"q",function(){return F}),a.d(t,"L",function(){return R}),a.d(t,"P",function(){return E}),a.d(t,"N",function(){return P}),a.d(t,"O",function(){return M}),a.d(t,"k",function(){return W}),a.d(t,"c",function(){return q}),a.d(t,"n",function(){return B}),a.d(t,"v",function(){return Y}),a.d(t,"f",function(){return X}),a.d(t,"e",function(){return Q}),a.d(t,"d",function(){return H}),a.d(t,"g",function(){return J}),a.d(t,"z",function(){return U}),a.d(t,"w",function(){return V}),a.d(t,"r",function(){return G}),a.d(t,"R",function(){return K}),a.d(t,"y",function(){return Z}),a.d(t,"S",function(){return ee}),a.d(t,"F",function(){return te}),a.d(t,"T",function(){return ae}),a.d(t,"u",function(){return ne});a("8e6e"),a("ac6a"),a("456d");var n=a("bd86"),i=a("b32d");function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function s(e){var t={url:"/auth/supplier/getSupplierList",method:"get",params:e};return Object(i["a"])(t)}function c(e){var t={url:"/auth/agent/getAgentList",method:"get",params:e};return Object(i["a"])(t)}function l(e){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:e};return Object(i["a"])(t)}function u(e){var t={url:"/auth/custtype/getServerType",method:"get",params:e};return Object(i["a"])(t)}function d(e){var t={url:"/finance/account/rollback",method:"get",params:e};return Object(i["a"])(t)}function p(e){var t={url:"/orders/worder/getOrderList",method:"post",data:e};return Object(i["a"])(t)}function m(e){var t={url:"/finance/costitem/getCostitemList",method:"get",params:e};return Object(i["a"])(t)}function f(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:o({page:1,size:999},e)};return Object(i["a"])(t)}function h(e){var t={url:"/finance/account/page",method:"post",data:e};return Object(i["a"])(t)}function y(e){var t={url:"finance/account/order_invoice",method:"post",data:e};return Object(i["a"])(t)}function v(e){var t={url:"/finance/account/getInvoice",method:"get",params:e};return Object(i["a"])(t)}function g(e){var t={url:"/finance/account/deleteInvoice",method:"post",params:e};return Object(i["a"])(t)}function b(e){var t={url:"/finance/account/saveInvoice",method:"post",data:e};return Object(i["a"])(t)}function k(e){var t={url:"/finance/account/updateInvoice",method:"post",data:e};return Object(i["a"])(t)}function x(e){var t={url:"/finance/account/exportAll",method:"post",responseType:"blob",data:e};return Object(i["a"])(t)}function w(e){var t={url:"/finance/account/export2",method:"post",responseType:"blob",data:e};return Object(i["a"])(t)}function T(e){var t={url:"/finance/p/page",method:"post",data:e};return Object(i["a"])(t)}function O(e){var t={url:"/finance/p/get",method:"get",params:e};return Object(i["a"])(t)}function _(e){var t={url:"/auth/p/del",method:"delete",params:e};return Object(i["a"])(t)}function I(e){var t={url:"/finance/p/add",method:"post",data:e};return Object(i["a"])(t)}function j(e){var t={url:"/finance/p/edit",method:"post",data:e};return Object(i["a"])(t)}function L(e){var t={url:"/setting/exchange/rate",method:"get",params:e};return Object(i["a"])(t)}function S(e){var t={url:"/finance/r/page",method:"post",data:e};return Object(i["a"])(t)}function D(e){var t={url:"/finance/account/query",method:"post",data:e};return Object(i["a"])(t)}function C(e){var t={url:"/finance/r/payback",method:"get",params:e};return Object(i["a"])(t)}function A(e){var t={url:"/finance/r/info",method:"get",params:e};return Object(i["a"])(t)}function N(e){var t={url:"/finance/r/add",method:"post",data:e};return Object(i["a"])(t)}function z(e){var t={url:"/finance/r/edit",method:"post",data:e};return Object(i["a"])(t)}function $(e){var t={url:"/auth/r/del",method:"delete",params:e};return Object(i["a"])(t)}function F(e){var t={url:"/auth/acct/getAcctList",method:"get",params:e};return Object(i["a"])(t)}function R(e){var t={url:"/finance/r/export",method:"post",responseType:"blob",data:e};return Object(i["a"])(t)}function E(e){var t={url:"/finance/apply/page",method:"post",data:e};return Object(i["a"])(t)}function P(e){var t={url:"/finance/account/handel",method:"post",data:e};return Object(i["a"])(t)}function M(e){var t={url:"/finance/apply/get",method:"get",params:e};return Object(i["a"])(t)}function W(e){var t={url:"/auth/apply/del",method:"delete",params:e};return Object(i["a"])(t)}function q(e){var t={url:"/finance/apply/add",method:"post",data:e};return Object(i["a"])(t)}function B(e){var t={url:"/finance/apply/edit",method:"post",data:e};return Object(i["a"])(t)}function Y(e){var t={url:"/auth/customer/customer",method:"post",data:e};return Object(i["a"])(t)}function X(e){var t={url:"/finance/account/audit",method:"get",params:e};return Object(i["a"])(t)}function Q(e){var t={url:"/finance/r/audit",method:"get",params:e};return Object(i["a"])(t)}function H(e){var t={url:"/auth/apply/audit",method:"post",params:e};return Object(i["a"])(t)}function J(e){var t={url:"/auth/p/audit",method:"post",params:e};return Object(i["a"])(t)}function U(e){var t={url:"/orders/fullorder/getOrderList",method:"post",data:e};return Object(i["a"])(t)}function V(e){var t={url:"/orders/declare_order/get_declare_data",method:"post",data:e};return Object(i["a"])(t)}function G(e){var t={url:"/orders/card/get_data",method:"post",data:e};return Object(i["a"])(t)}function K(e){var t={url:"/orders/trailer/page",method:"post",data:e};return Object(i["a"])(t)}function Z(e){var t={url:"/express/web/expressorder/list",method:"post",data:e};return Object(i["a"])(t)}function ee(){var e={url:"/auth/agent/customer_finance",method:"get"};return Object(i["a"])(e)}function te(e){var t={url:"/finance/bill/billPage",method:"post",data:e};return Object(i["a"])(t)}function ae(e){var t={url:"/finance/account/unverified",method:"post",data:e};return Object(i["a"])(t)}function ne(e){var t={url:"/auth/supplier/custType",method:"post",data:e};return Object(i["a"])(t)}},d1e6:function(e,t,a){"use strict";var n=a("1269"),i=a.n(n);i.a}}]);