(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["trailer-services"],{"13f5":function(e,t,n){"use strict";n.d(t,"f",function(){return r}),n.d(t,"r",function(){return i}),n.d(t,"h",function(){return s}),n.d(t,"k",function(){return o}),n.d(t,"i",function(){return c}),n.d(t,"s",function(){return l}),n.d(t,"z",function(){return u}),n.d(t,"t",function(){return d}),n.d(t,"a",function(){return f}),n.d(t,"u",function(){return h}),n.d(t,"x",function(){return p}),n.d(t,"l",function(){return m}),n.d(t,"q",function(){return g}),n.d(t,"j",function(){return y}),n.d(t,"b",function(){return v}),n.d(t,"n",function(){return b}),n.d(t,"m",function(){return k}),n.d(t,"c",function(){return w}),n.d(t,"v",function(){return x}),n.d(t,"g",function(){return L}),n.d(t,"y",function(){return O}),n.d(t,"w",function(){return I}),n.d(t,"p",function(){return j}),n.d(t,"e",function(){return C}),n.d(t,"o",function(){return S}),n.d(t,"d",function(){return T});var a=n("b32d");function r(e){var t={url:"/setting/area/getAreasOfOneCountry",method:"get",params:e};return Object(a["a"])(t)}function i(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(a["a"])(t)}function s(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(a["a"])(t)}function o(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(a["a"])(t)}function c(e){var t={url:"/setting/area/getCounties",method:"get",params:e};return Object(a["a"])(t)}function l(e){var t={url:"/cfg/tsc/getTscList",method:"get",params:e};return Object(a["a"])(t)}function u(e){var t={url:"/cfg/tsc/saveTsc",method:"post",data:e};return Object(a["a"])(t)}function d(e){var t={url:"/cfg/tsc/changeStatus",method:"post",params:e};return Object(a["a"])(t)}function f(e){var t={url:"/cfg/tsc/deleteTsc",method:"delete",params:e};return Object(a["a"])(t)}function h(e){var t={url:"/cfg/tsc/getAgentList",method:"get",params:e};return Object(a["a"])(t)}function p(e){var t={url:"/cfg/tsc/saveAgent",method:"post",data:e};return Object(a["a"])(t)}function m(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(a["a"])(t)}function g(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(a["a"])(t)}function y(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(a["a"])(e)}function v(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(a["a"])(t)}function b(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(a["a"])(t)}function k(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(a["a"])(t)}function w(e){var t={url:"/cfg/tsc/find_objective",method:"post",data:e};return Object(a["a"])(t)}function x(e){var t={url:"/cfg/tsc/save_objective",method:"post",data:e};return Object(a["a"])(t)}function L(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(a["a"])(t)}function O(e){var t={url:"/cfg/tsc/save_cabinet",method:"post",data:e};return Object(a["a"])(t)}function I(e){var t={url:"/cfg/tsc/save_address",method:"post",data:e};return Object(a["a"])(t)}function j(e){var t={url:"/cfg/tsc/find_cabinet",method:"post",data:e};return Object(a["a"])(t)}function C(e){var t={url:"/setting/area/getAllStreet",method:"get",params:e};return Object(a["a"])(t)}function S(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(a["a"])(t)}function T(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(a["a"])(t)}},"16d8":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.id}})},r=[],i=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("d225"),o=n("b0b4"),c=n("308d"),l=n("6bb5"),u=n("4e2b"),d=n("9ab4"),f=(n("a7be"),n("44f8"),n("a6e0"),n("60a3")),h={previewStyle:"vertical",usageStatistics:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},p=n("547e"),m=n.n(p);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(i["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)},b=function(e){function t(){return Object(s["a"])(this,t),Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onValueChange",value:function(e,t){this.markdownEditor&&e!==t&&e!==this.markdownEditor.getValue()&&this.markdownEditor.setValue(e)}},{key:"onLanguageChange",value:function(){this.destroyEditor(),this.initEditor()}},{key:"onHeightChange",value:function(e){this.markdownEditor&&this.markdownEditor.height(e)}},{key:"onModeChange",value:function(e){this.markdownEditor&&this.markdownEditor.changeMode(e)}},{key:"mounted",value:function(){this.initEditor()}},{key:"destroyed",value:function(){this.destroyEditor()}},{key:"initEditor",value:function(){var e=this,t=document.getElementById(this.id);t&&(this.markdownEditor=new m.a(y({el:t},this.editorOptions)),this.value&&this.markdownEditor.setValue(this.value),this.markdownEditor.on("change",function(){e.$emit("input",e.markdownEditor.getValue())}))}},{key:"destroyEditor",value:function(){this.markdownEditor&&(this.markdownEditor.off("change"),this.markdownEditor.remove(),this.markdownEditor=void 0)}},{key:"focus",value:function(){this.markdownEditor&&this.markdownEditor.focus()}},{key:"setValue",value:function(e){this.markdownEditor&&this.markdownEditor.setValue(e)}},{key:"getValue",value:function(){return this.markdownEditor?this.markdownEditor.getValue():""}},{key:"setHtml",value:function(e){this.markdownEditor&&this.markdownEditor.setHtml(e)}},{key:"getHtml",value:function(){return this.markdownEditor?this.markdownEditor.getHtml():""}},{key:"editorOptions",get:function(){var e=Object.assign({},h,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}}]),t}(f["e"]);d["a"]([Object(f["c"])({required:!0})],b.prototype,"value",void 0),d["a"]([Object(f["c"])({default:v})],b.prototype,"id",void 0),d["a"]([Object(f["c"])({default:function(){return h}})],b.prototype,"options",void 0),d["a"]([Object(f["c"])({default:"markdown"})],b.prototype,"mode",void 0),d["a"]([Object(f["c"])({default:"300px"})],b.prototype,"height",void 0),d["a"]([Object(f["c"])({default:"en_US"})],b.prototype,"language",void 0),d["a"]([Object(f["f"])("value")],b.prototype,"onValueChange",null),d["a"]([Object(f["f"])("language")],b.prototype,"onLanguageChange",null),d["a"]([Object(f["f"])("height")],b.prototype,"onHeightChange",null),d["a"]([Object(f["f"])("mode")],b.prototype,"onModeChange",null),b=d["a"]([Object(f["a"])({name:"MarkdownEditor"})],b);var k=b,w=k,x=n("2877"),L=Object(x["a"])(w,a,r,!1,null,null,null);t["a"]=L.exports},"31d4":function(e,t,n){"use strict";n.d(t,"s",function(){return r}),n.d(t,"r",function(){return i}),n.d(t,"x",function(){return s}),n.d(t,"u",function(){return o}),n.d(t,"b",function(){return c}),n.d(t,"w",function(){return l}),n.d(t,"v",function(){return u}),n.d(t,"q",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"z",function(){return h}),n.d(t,"g",function(){return p}),n.d(t,"o",function(){return m}),n.d(t,"k",function(){return g}),n.d(t,"i",function(){return y}),n.d(t,"d",function(){return v}),n.d(t,"l",function(){return b}),n.d(t,"j",function(){return k}),n.d(t,"p",function(){return w}),n.d(t,"f",function(){return x}),n.d(t,"h",function(){return L}),n.d(t,"m",function(){return O}),n.d(t,"a",function(){return I}),n.d(t,"t",function(){return j}),n.d(t,"y",function(){return C}),n.d(t,"A",function(){return S}),n.d(t,"n",function(){return T}),n.d(t,"e",function(){return F});var a=n("b32d");function r(e){var t={url:"/cfg/ksc/getKscList",method:"post",data:e};return Object(a["a"])(t)}function i(e){var t={url:"/cfg/ksc/"+e.id,method:"get",params:e};return Object(a["a"])(t)}function s(e){var t={url:"/cfg/ksc/saveKsc",method:"post",data:e};return Object(a["a"])(t)}function o(e){var t={url:"/cfg/ksc/changeStatus",method:"post",params:e};return Object(a["a"])(t)}function c(e){var t={url:"/cfg/ksc/deleteKsc",method:"delete",params:e};return Object(a["a"])(t)}function l(e){var t={url:"/cfg/ksc/saveAgent",method:"post",data:e};return Object(a["a"])(t)}function u(e){var t={url:"/cfg/ksc/getAgentList",method:"get",params:e};return Object(a["a"])(t)}function d(e){var t={url:"/cfg/svcgroup/getSvcGroupList",method:"get",params:e};return Object(a["a"])(t)}function f(e){var t={url:"/cfg/svcgroup/deleteSvcGroup",method:"delete",params:e};return Object(a["a"])(t)}function h(e){var t={url:"/cfg/svcgroup/saveSvcGroup",method:"post",data:e};return Object(a["a"])(t)}function p(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(a["a"])(e)}function m(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(a["a"])(t)}function g(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(a["a"])(t)}function y(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(a["a"])(t)}function v(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(a["a"])(t)}function b(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(a["a"])(t)}function k(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(a["a"])(t)}function w(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(a["a"])(t)}function x(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(a["a"])(t)}function L(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(a["a"])(t)}function O(e){var t={url:"/cfg/ksc/destination/page",method:"post",data:e};return Object(a["a"])(t)}function I(e){var t={url:"/cfg/ksc/destination/add",method:"post",data:e};return Object(a["a"])(t)}function j(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(a["a"])(t)}function C(e){var t={url:"/cfg/ksc/range/save",method:"post",data:e};return Object(a["a"])(t)}function S(e){var t={url:"/cfg/ksc/range/get",method:"post",params:e};return Object(a["a"])(t)}function T(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(a["a"])(t)}function F(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(a["a"])(t)}},"4c6c":function(e,t,n){"use strict";var a=n("a065"),r=n.n(a);r.a},"5abc":function(e,t,n){"use strict";var a=n("a180"),r=n.n(a);r.a},"62b2":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[n("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[n("div",{staticClass:"app-container"},[n("head-info",{directives:[{name:"show",rawName:"v-show",value:!e.isTruckEditFormShow,expression:"!isTruckEditFormShow"}],attrs:{info:"",title:"拖车服务"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isTruckEditFormShow,expression:"!isTruckEditFormShow"}],staticClass:"app-panel"},[n("el-row",[n("el-col",{attrs:{span:6}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["towingServiceAdd"],expression:"['towingServiceAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addCardPad}},[e._v("\n              新增服务\n            ")])],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[n("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"地址类别",size:"small",filterable:"",clearable:""},model:{value:e.selectValue.addressCategory,callback:function(t){e.$set(e.selectValue,"addressCategory",t)},expression:"selectValue.addressCategory"}},[n("el-option",{attrs:{label:"FBA",value:"0"}}),n("el-option",{attrs:{label:"私人",value:"1"}})],1),n("el-select",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{placeholder:"目的地类型",size:"small",filterable:"",clearable:""},model:{value:e.selectValue.addressType,callback:function(t){e.$set(e.selectValue,"addressType",t)},expression:"selectValue.addressType"}},e._l(e.addressTypeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),n("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"所在国家",size:"small",filterable:"",clearable:""},on:{focus:e.getCountryList,change:e.onCountryChange},model:{value:e.selectValue.countryId,callback:function(t){e.$set(e.selectValue,"countryId",t)},expression:"selectValue.countryId"}},e._l(e.countryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),n("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.selectValue.countryId,placeholder:"州/省",clearable:"",filterable:"",size:"small"},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectValue.stateId,callback:function(t){e.$set(e.selectValue,"stateId",t)},expression:"selectValue.stateId"}},e._l(e.stateList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),n("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.selectValue.stateId,placeholder:"城市",clearable:"",size:"small",filterable:""},on:{focus:e.getCityList},model:{value:e.selectValue.cityId,callback:function(t){e.$set(e.selectValue,"cityId",t)},expression:"selectValue.cityId"}},e._l(e.cityList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),n("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",clearable:"",placeholder:"服务类型"},model:{value:e.selectValue.subtypeId,callback:function(t){e.$set(e.selectValue,"subtypeId",t)},expression:"selectValue.subtypeId"}},e._l(e.subTypeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.selectValue.keyword,callback:function(t){e.$set(e.selectValue,"keyword",t)},expression:"selectValue.keyword"}},[n("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[n("el-option",{attrs:{label:"服务编码",value:"1"}}),n("el-option",{attrs:{label:"服务名称",value:"2"}})],1)],1),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["towingServiceQuery"],expression:"['towingServiceQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[n("el-table-column",{attrs:{fixed:"left",prop:"name","min-width":"190",label:"服务名称"}}),n("el-table-column",{attrs:{fixed:"left",prop:"tsId","min-width":"120",label:"服务编码"}}),n("el-table-column",{attrs:{prop:"abbr","min-width":"160",label:"服务简称"}}),n("el-table-column",{attrs:{prop:"subtypeName","min-width":"180",label:"服务类型"}}),n("el-table-column",{attrs:{width:"110",label:"目的地址"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[n("strong",[t.row.y?n("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):n("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),n("el-button",{attrs:{disabled:!e.$checkPermission(["towingServiceAddress"]),type:"text"},on:{click:function(n){return e.addAddress(t.row)}}},[e._v("\n                目的地址\n              ")])],1)}}])}),n("el-table-column",{attrs:{width:"110",label:"设置柜型"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[n("strong",[t.row.x?n("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):n("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),n("el-button",{attrs:{disabled:!e.$checkPermission(["towingServiceCabinet"]),type:"text"},on:{click:function(n){return e.saveCabinet(t.row)}}},[e._v("\n                设置柜型\n              ")])],1)}}])}),n("el-table-column",{attrs:{width:"130",label:"关联代理商"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{disabled:!e.$checkPermission(["towingServiceAgent"]),type:"text"},on:{click:function(n){return e.associatedAgent(t.row)}}},[e._v("\n                关联代理商\n              ")])]}}])}),n("el-table-column",{attrs:{prop:"createTime",label:"添加时间","min-width":"160"}}),n("el-table-column",{attrs:{fixed:"right",width:"130",label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{staticClass:"switchStyle",attrs:{disabled:!e.$checkPermission(["towingServiceEnable"]),value:t.row.status,"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0"},on:{input:function(n){return e.onStatus(t.row,n)}}})]}}])}),n("el-table-column",{attrs:{fixed:"right",width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["towingServiceCopy"],expression:"['towingServiceCopy']"}],attrs:{type:"text"},on:{click:function(n){return e.copyForm(t.row)}}},[e._v("\n                复制\n              ")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["towingServiceUpdate"],expression:"['towingServiceUpdate']"}],attrs:{type:"text"},on:{click:function(n){return e.editForm(t.row)}}},[e._v("\n                编辑\n              ")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["towingServiceDel"],expression:"['towingServiceDel']"}],attrs:{type:"text"},on:{click:function(n){return e.deletData(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"关联代理商【"+e.currentServiceName+"】",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.agentLoading,expression:"agentLoading"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联代理商","已关联代理商"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.agentList},model:{value:e.selectAgents,callback:function(t){e.selectAgents=t},expression:"selectAgents"}}),n("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n              取 消\n            ")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.setAgentConfirm}},[e._v("\n              确 定\n            ")])],1)],1)]),n("el-dialog",{attrs:{title:"设置服务组合",visible:e.isGroupDialog,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isGroupDialog=t},closed:function(t){e.isGroupDialog=!1}}},[n("trailerSet",{ref:"trailerSet",attrs:{"sub-type-data":e.subTypeList}})],1),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isTruckEditFormShow,expression:"isTruckEditFormShow"}]},[n("add-edit-form",{ref:"editForm",attrs:{"sub-type-data":e.subTypeList,"country-data":e.countryList,"is-edit":e.isEdit,"is-copy":e.isCopy},on:{saveConfirm:e.saveConfirm,closeForm:e.closeForm}})],1)],1)]),n("add-address-modal",{ref:"addAddressModal",attrs:{"country-list":e.countryList},on:{load:e.queryAll}}),n("set-cabinet",{ref:"setCabinet"})],1)},r=[],i=(n("8e6e"),n("456d"),n("768b")),s=(n("c5f6"),n("5df3"),n("7f7f"),n("7514"),n("ac6a"),n("a481"),n("96cf"),n("3b8d")),o=n("bd86"),c=n("a8db"),l=n("d225"),u=n("b0b4"),d=n("308d"),f=n("6bb5"),h=n("4e2b"),p=n("9ab4"),m=n("60a3"),g=n("9dba"),y=n("ac1a"),v=n("13f5"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticClass:"app-panel trailer-edit"},[n("div",{staticClass:"header-top"},[n("div",{staticStyle:{float:"left"}},[e._v("\n      "+e._s(e.isEdit&&!e.isCopy?"编辑拖车服务":"新增拖车服务")+"\n    ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.goBack}},[e._v("\n      返 回\n    ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveData}},[e._v("\n      保 存\n    ")])],1),n("div",{staticClass:"content"},[n("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"110px",size:"small"}},[n("div",{staticClass:"form-title"},[e._v("\n        基础信息\n      ")]),n("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[n("el-input",{attrs:{maxlength:50,placeholder:"请输入",size:"small"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),n("el-form-item",{attrs:{label:"服务简称",prop:"abbr"}},[n("el-input",{attrs:{maxlength:10,placeholder:"请输入",size:"small"},model:{value:e.selectForm.abbr,callback:function(t){e.$set(e.selectForm,"abbr",t)},expression:"selectForm.abbr"}})],1),n("el-form-item",{attrs:{label:"服务编码",prop:"tsId"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:25,"show-word-limit":""},model:{value:e.selectForm.tsId,callback:function(t){e.$set(e.selectForm,"tsId",t)},expression:"selectForm.tsId"}})],1),n("el-form-item",{attrs:{label:"服务类型",prop:"subtypeId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},on:{change:e.onSubtype},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.subTypeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"所在国家",prop:"countryId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",placeholder:"所在国家"},on:{change:e.onCountryChange},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.countryId,filterable:""},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectForm.stateId,callback:function(t){e.$set(e.selectForm,"stateId",t)},expression:"selectForm.stateId"}},e._l(e.stateList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.stateId,filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.selectForm.cityId,callback:function(t){e.$set(e.selectForm,"cityId",t)},expression:"selectForm.cityId"}},e._l(e.cityList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"区/县",prop:"countyId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"区/县",clearable:"",disabled:!e.selectForm.cityId,filterable:""},on:{focus:e.getCountyList},model:{value:e.selectForm.countyId,callback:function(t){e.$set(e.selectForm,"countyId",t)},expression:"selectForm.countyId"}},e._l(e.countyList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"地址类型",prop:"addressType"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"地址类型",filterable:"",clearable:"",disabled:!(e.selectForm.stateId&&e.selectForm.cityId&&e.selectForm.countyId)},on:{change:e.onAddressType},model:{value:e.selectForm.addressType,callback:function(t){e.$set(e.selectForm,"addressType",t)},expression:"selectForm.addressType"}},[n("el-option",{attrs:{label:"港口",value:"1"}}),n("el-option",{attrs:{label:"火车站",value:"2"}})],1)],1),n("el-form-item",{attrs:{label:"地址类别",prop:"addressCategory"}},[n("el-radio-group",{model:{value:e.selectForm.addressCategory,callback:function(t){e.$set(e.selectForm,"addressCategory",t)},expression:"selectForm.addressCategory"}},[n("el-radio",{attrs:{label:"0"}},[e._v("\n            FBA\n          ")]),n("el-radio",{attrs:{label:"1"}},[e._v("\n            私人\n          ")])],1)],1),n("el-form-item",{attrs:{label:"起运地址",prop:"addressId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"选择地址",filterable:"",disabled:!(e.selectForm.stateId&&e.selectForm.cityId&&e.selectForm.countyId)||!e.selectForm.addressType,clearable:""},on:{focus:e.getPortAdressData},model:{value:e.selectForm.addressId,callback:function(t){e.$set(e.selectForm,"addressId",t)},expression:"selectForm.addressId"}},e._l(e.portList,function(e){return n("el-option",{key:e.key,attrs:{label:e.fullName,value:e.key}})}),1)],1),n("el-form-item",{attrs:{label:"分配客户",prop:"belong"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.selectForm.belong,callback:function(t){e.$set(e.selectForm,"belong",t)},expression:"selectForm.belong"}},[n("el-option",{attrs:{label:"直客",value:"0"}}),n("el-option",{attrs:{label:"同行",value:"1"}}),n("el-option",{attrs:{label:"同行&直客",value:"2"}})],1)],1),n("el-form-item",{attrs:{label:"货币单位",prop:"currencyId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.geCurrencyList},model:{value:e.selectForm.currencyId,callback:function(t){e.$set(e.selectForm,"currencyId",t)},expression:"selectForm.currencyId"}},e._l(e.currencyList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"默认供应商",prop:"custId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCustTypeList},model:{value:e.selectForm.custId,callback:function(t){e.$set(e.selectForm,"custId",t)},expression:"selectForm.custId"}},e._l(e.supplierList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"备注",prop:"remark"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:100},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1),n("div",{staticClass:"form-title"},[e._v("\n        运输条款\n      ")])],1),n("div",[n("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab",toolbarItems:["heading","bold","italic"]},height:"300px"},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}})],1)],1)])},k=[],w=n("16d8");function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach(function(t){Object(o["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function O(){return{addressCategory:"0",id:void 0,name:void 0,abbr:void 0,countryId:void 0,subtypeId:void 0,tsId:void 0,belong:void 0,terms:void 0,currencyId:void 0,countyId:void 0,stateId:void 0,cityId:void 0,addressType:void 0,addressId:void 0,custId:void 0,remark:void 0}}var I=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.selectForm=O(),e.formLoading=!1,e.selectLoading=!1,e.serviceCode=[],e.terms="",e.portList=[],e.stateList=[],e.cityList=[],e.countyList=[],e.supplierList=[],e.currencyList=[],e.formRules={name:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],abbr:[{required:!0,message:"服务简称不能为空",trigger:"blur"}],subtypeId:[{required:!0,message:"请选择服务类型",trigger:"change"}],countryId:[{required:!0,message:"请选择所在国家",trigger:"change"}],stateId:[{required:!0,message:"请选择州/省",trigger:"change"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],countyId:[{required:!1,message:"请选择区/县",trigger:"change"}],addressType:[{required:!0,message:"请选择地址类型",trigger:"change"}],addressCategory:[{required:!0,message:"请选择地址类别",trigger:"change"}],addressId:[{required:!0,message:"请选择起运地址",trigger:"change"}],tsId:[{required:!0,message:"服务编码不能为空",trigger:"blur"}],density:[{required:!0,message:"密度比不能为空",trigger:"blur"}],belong:[{required:!0,message:"请选择分配客户",trigger:"change"}],umDistance:[{required:!0,message:"请选择距离单位",trigger:"change"}],umWeight:[{required:!0,message:"请选择重量单位",trigger:"change"}],umVolume:[{required:!0,message:"请选择体积单位",trigger:"change"}],currencyId:[{required:!0,message:"请选择货币单位",trigger:"change"}],densityP:[{required:!0,message:"请选择同行体积密度",trigger:"change"}],densityC:[{required:!0,message:"请选择直客体积密度",trigger:"change"}]},e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"setData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,a,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.formLoading=!0,this.isCopy?(t.id,t.name,t.abbr,t.tsId,n=t.addressCategory,t.terms,a=Object(c["a"])(t,["id","name","abbr","tsId","addressCategory","terms"]),this.selectForm=L({},a,{addressCategory:n||"0"})):(t.terms,r=t.addressCategory,i=Object(c["a"])(t,["terms","addressCategory"]),this.selectForm=L({},i,{addressCategory:r||"0"})),e.prev=2,e.next=5,this.geCurrencyList();case 5:return e.next=7,this.getCustTypeList();case 7:return e.next=9,this.getStateList();case 9:return e.next=11,this.getCityList();case 11:return e.next=13,this.getCountyList();case 13:if(!(this.selectForm.countryId&&this.selectForm.stateId&&this.selectForm.cityId&&this.selectForm.countyId&&this.selectForm.addressType)){e.next=16;break}return e.next=16,this.getPortAdressData();case 16:this.formLoading=!1,e.next=23;break;case 19:return e.prev=19,e.t0=e["catch"](2),this.formLoading=!1,e.abrupt("return",e.t0);case 23:case"end":return e.stop()}},e,this,[[2,19]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.$refs.markdownEditor.setHtml(""),this.terms=""}},{key:"setTerms",value:function(e){this.$refs.markdownEditor.setHtml(e)}},{key:"goBack",value:function(){this.resetForm(),this.$emit("closeForm")}},{key:"saveData",value:function(){var e=this,t=this.$refs.selectForm,n=this.$refs.markdownEditor.getHtml();t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=e.selectForm,r=a.countryId,i=a.stateId,s=a.cityId,o=a.countyId,l=Object(c["a"])(a,["countryId","stateId","cityId","countyId"]),u=e.countryList,d=(u.find(function(e){return e.id===r})||{}).name,f=(e.stateList.find(function(e){return e.id===i})||{}).name,h=(e.cityList.find(function(e){return e.id===s})||{}).name,p=(e.countyList.find(function(e){return e.id===o})||{}).name,m=L({},l,{countryId:r,countryName:d,stateName:f,stateId:i,cityName:h,cityId:s,countyId:o,countyName:p});e.portList.forEach(function(e){e.key===m.addressId&&(m.addressName=e.fullName)}),e.supplierList.forEach(function(e){e.id===m.custId&&(m.custName=e.name)}),e.subTypeList.find(function(e){e.id===m.subtypeId&&(m.subtypeName=e.name)}),e.currencyList.find(function(e){e.id===m.currencyId&&(m.currencyName=e.name)}),m.terms=n,Object(v["z"])(m).then(function(t){e.$message({type:"success",message:"保存成功"}),e.formLoading=!1,e.resetForm(),e.$emit("saveConfirm")}).catch(function(t){return e.formLoading=!1,t})})}},{key:"resetForm",value:function(){this.selectForm=O(),this.stateList=[],this.cityList=[],this.countyList=[],this.reset(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.selectForm;this.$nextTick(function(){e.clearValidate()})}},{key:"onSubtype",value:function(){this.selectForm.custId=void 0,this.supplierList=[]}},{key:"geCurrencyList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:999},e.next=4,Object(v["b"])(t).then(function(e){var t=e.data||{};n.currencyList=t.result||[],n.selectLoading=!1}).catch(function(e){return n.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCustTypeList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:9999,cas:"S",typeId:"01",subtypeId:this.selectForm.subtypeId},e.next=3,Object(v["l"])(t).then(function(e){var t=e.data||{},a=t.result||[];n.supplierList=JSON.parse(JSON.stringify(a).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getStateList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["r"])(this.selectForm.countryId).then(function(e){t.selectLoading=!1;var n=e.data||{},a=n.result||[];t.stateList=a}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["h"])(this.selectForm.stateId).then(function(e){t.selectLoading=!1;var n=e.data||{},a=n.result||[];t.cityList=a}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountyList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.cityId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["k"])(this.selectForm.cityId).then(function(e){var n=e.data||{},a=n.result||[];t.countyList=a,t.selectLoading=!1}).catch(function(){t.countyList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectForm.stateId=void 0,this.onStateChange();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(){this.selectForm.cityId=void 0,this.onCityChange()}},{key:"onCityChange",value:function(){this.selectForm.countyId=void 0}},{key:"onAddressType",value:function(){this.selectForm.addressId=void 0,this.portList=[]}},{key:"getPortAdressData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("3"!==this.selectForm.addressType){e.next=5;break}return e.next=3,this.getFbaList();case 3:e.next=7;break;case 5:return e.next=7,this.getPortAdressList();case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getFbaList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:9999,codeSort:"A",countryId:this.selectForm.countryId,cityId:this.selectForm.cityId,stateId:this.selectForm.stateId},e.next=4,Object(v["m"])(t).then(function(e){var t=e.data.result||[];n.portList=t.map(function(e){return e.key=e.id,e.fullName=e.code+"-"+e.address,e}),n.selectLoading=!1}).catch(function(e){return n.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPortAdressList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:9999,countryId:this.selectForm.countryId,cityId:this.selectForm.cityId,stateId:this.selectForm.stateId,type:this.selectForm.addressType},e.next=4,Object(v["n"])(t).then(function(e){var t=e.data.result||[];n.portList=t.map(function(e){return e.key=e.code?e.code:e.id,e.fullName="".concat(e.key," - ").concat(e.name?e.name:e.address),e}),n.selectLoading=!1}).catch(function(e){return n.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"subTypeList",get:function(){return this.subTypeData||[]}},{key:"countryList",get:function(){return this.countryData||[]}}]),t}(m["e"]);I=p["a"]([Object(m["a"])({name:"TrailerServiceForm",components:{MarkdownEditor:w["a"]},props:{subTypeData:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1},isCopy:{type:Boolean,default:!1},countryData:{type:Array,default:function(){return[]}}}})],I);var j=I,C=j,S=(n("8670"),n("2877")),T=Object(S["a"])(C,b,k,!1,null,"5a1672e2",null),F=T.exports,A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n      新增\n    ")])],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"400px",border:""}},[n("el-table-column",{attrs:{label:"服务组合名称",prop:"name"}}),n("el-table-column",{attrs:{label:"关联服务名称",formatter:e.formatName}}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleEdit(t.row)}}},[e._v("\n          编辑\n        ")]),e._v("\n         \n        "),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),n("el-dialog",{attrs:{title:"关联服务名称",visible:e.isCodeShow,"close-on-click-modal":!1,"append-to-body":"",width:"960px"},on:{"update:visible":function(t){e.isCodeShow=t},close:e.itemNameDialogClose}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isCodeLoading,expression:"isCodeLoading"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联服务名称","已关联服务名称"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.subTypeList},model:{value:e.selectForm.svcs,callback:function(t){e.$set(e.selectForm,"svcs",t)},expression:"selectForm.svcs"}}),n("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.itemNameDialogClose}},[e._v("\n          取 消\n        ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemNameDialogClose}},[e._v("\n          确 定\n        ")])],1)],1)]),n("el-dialog",{attrs:{title:e.isEdit?"编辑服务组合":"新增服务组合",visible:e.isEditDialog,"close-on-click-modal":!1,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.isEditDialog=t},closed:e.cancel}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"selectForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,"label-width":"120px","label-position":"right",size:"small"}},[n("el-form-item",{attrs:{label:"服务组合名称",prop:"name"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:20,placeholder:"请输入"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),n("el-form-item",{attrs:{label:"选择服务名称",prop:"svcs"}},[n("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.svcs.length+")",size:"small",disabled:""},model:{value:e.sc,callback:function(t){e.sc=t},expression:"sc"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){e.isCodeShow=!0}},slot:"append"})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("\n        确 定\n      ")])],1)],1)],1)},E=[],D=n("31d4"),_=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.isEditDialog=!1,e.formLoading=!1,e.isEdit=!1,e.selectForm={name:void 0,svcs:[]},e.formRules={name:[{required:!0,message:"服务组合名称不能为空",trigger:"blur"}],svcs:[{required:!0,message:"请选择服务名称",trigger:"change"}]},e.sc="",e.tableData=[],e.isCodeShow=!1,e.isCodeLoading=!1,e.page=1,e.size=10,e.total=0,e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"setData",value:function(){this.getTableData(1)}},{key:"formatName",value:function(e){var t=e.svcs.map(function(e){return e.name});return t.join(" , ")}},{key:"filterMethod",value:function(e,t){return t.name.indexOf(e)>-1}},{key:"itemNameDialogClose",value:function(){this.isCodeShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"handleAdd",value:function(){this.isEditDialog=!0,this.isEdit=!1}},{key:"handleEdit",value:function(e){this.isEditDialog=!0,this.isEdit=!0,this.selectForm=e,this.selectForm.svcs=e.svcs.map(function(e){return e.id})}},{key:"handleDelete",value:function(e){var t=this,n={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,Object(D["c"])(n).then(function(e){t.loading=!1,t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"cancel",value:function(){this.isEditDialog=!1,this.selectForm={name:void 0,svcs:[]};var e=this.$refs.selectForm;this.$nextTick(function(){e.clearValidate()})}},{key:"save",value:function(){var e=this,t=this.$refs.selectForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var n={typeName:"拖车",typeId:"06",id:void 0,name:e.selectForm.name,svcs:[]},a=e.selectForm.svcs.map(function(t){var n=e.subTypeList.find(function(e){return t===e.id})||{},a=n.id,r=n.name;return{name:r,id:a}});n.svcs=a.filter(function(e){return e.name&&e.id}),n.id=e.selectForm.id,Object(D["z"])(n).then(function(t){e.$message({type:"success",message:"保存成功"}),e.formLoading=!1,e.getTableData(),e.cancel()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"setTable",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.table;t.doLayout()})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"getTableData",value:function(e){var t=this;this.loading=!0,this.tableData=[],e&&(this.page=e),Object(D["q"])({typeId:"06",page:this.page,size:this.size}).then(function(e){var n=e.data||{};t.tableData=n.result||[],t.total=n.total,t.setTable(),t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"custId",get:function(){var e=g["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=g["a"].info||{},t=e.custName;return t}},{key:"subTypeList",get:function(){return this.subTypeData||[]}}]),t}(m["e"]);_=p["a"]([Object(m["a"])({name:"",components:{},props:{subTypeData:{type:Array,default:function(){return[]}}}})],_);var $=_,N=$,z=(n("b865"),Object(S["a"])(N,A,E,!1,null,"3a25a955",null)),R=z.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"添加地址",visible:e.visible,width:e.modalWidth,"close-on-click-modal":!1},on:{close:e.dialogClose}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-form",{ref:"detail",attrs:{model:e.form,"label-width":"70px",size:"small"}},[n("el-row",[n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{label:"地址类型"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择地址类型"},on:{change:e.addressTypeChange},model:{value:e.form.addressType,callback:function(t){e.$set(e.form,"addressType",t)},expression:"form.addressType"}},e._l(e.addressTypeList,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),0!==e.form.addressType&&7!==e.form.addressType?n("el-col",{attrs:{span:11,offset:2}},[n("el-form-item",{attrs:{label:"所在国家"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",multiple:!e.isArea,"collapse-tags":""},on:{change:e.handleChange},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1):e._e(),0===e.form.addressType?n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:11,offset:2}},[n("el-button",{attrs:{type:"text"},on:{click:e.addAddress}},[e._v("\n            新增\n          ")])],1):e._e()],1)],1),0===e.form.addressType?n("div",[n("el-table",{attrs:{data:e.tableData,border:""}},[n("el-table-column",{attrs:{label:"国家"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[t.row.isEditRow?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择国家",size:"small",filterable:"",clearable:""},on:{change:function(n){return e.countryChange(n,t.row)}},model:{value:t.row.countryId,callback:function(n){e.$set(t.row,"countryId",n)},expression:"scope.row.countryId"}},e._l(e.countryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1):n("span",[e._v("\n                "+e._s(t.row.country)+"\n              ")])],1)]}}],null,!1,2493615430)}),n("el-table-column",{attrs:{label:"城市"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[t.row.isEditRow?n("el-cascader",{ref:"areaForm",staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,options:e.detailAreaList,props:e.props,disabled:!t.row.countryId,placeholder:"请选择",filterable:"",clearable:""},on:{change:function(n){return e.detailAreaChange(n,t.row)}},model:{value:t.row.detailArea,callback:function(n){e.$set(t.row,"detailArea",n)},expression:"scope.row.detailArea"}}):n("span",[e._v("\n                "+e._s(t.row.detailAreaName)+"\n              ")])],1)]}}],null,!1,2842836333)}),n("el-table-column",{attrs:{label:"街道"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("div",[t.row.isEditRow?n("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择街道/区",size:"small",filterable:"",multiple:"","collapse-tags":"",clearable:"",disabled:!t.row.detailArea.length},on:{change:function(n){return e.streetChange(n,t.row)}},model:{value:t.row.streetIds,callback:function(n){e.$set(t.row,"streetIds",n)},expression:"scope.row.streetIds"}},e._l(e.streetList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1):n("span",[e._v("\n                "+e._s(t.row.street)+"\n              ")])],1)]}}],null,!1,4096992235)}),n("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEditRow?n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.saveAddress(t.row)}}},[e._v("\n              保存\n            ")]):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.editAddress(t.row)}}},[e._v("\n              编辑\n            ")]),t.row.isEditRow?n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.cancelEditAddress(t.row)}}},[e._v("\n              取消\n            ")]):n("el-button",{attrs:{type:"text"},on:{click:function(n){return e.delAddress(t.row)}}},[e._v("\n              删除\n            ")])]}}],null,!1,1906074822)})],1),n("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTransfer,expression:"loadingTransfer"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部","已选择"],props:{key:"id",label:"fellName"},"filter-placeholder":"输入搜索",data:e.transferList},model:{value:e.selectAddress,callback:function(t){e.selectAddress=t},expression:"selectAddress"}})],1)],1),0!==e.form.addressType?n("div",{staticStyle:{"text-align":"right","margin-top":"20px"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.dialogClose}},[e._v("\n      取 消\n    ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("\n      确 定\n    ")])],1):e._e()])},P=[],q=n("75fc"),B=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.modalWidth="960px",e.visible=!1,e.loading=!1,e.loadingTransfer=!1,e.selectLoading=!1,e.isArea=!1,e.tableData=[],e.detailAreaList=[],e.streetList=[],e.selectAddress=[],e.transferList=[],e.addressTypeList=[{label:"私人地址",value:0},{label:"港口",value:1},{label:"火车站",value:2},{label:"海外仓",value:3},{label:"国内区域",value:4},{label:"城市区域",value:5},{label:"仓库区域",value:6},{label:"国家区域",value:7}],e.props={label:"name",value:"id"},e.pagination={page:1,size:10,total:0},e.setAddressData={},e.form={addressType:0,countryId:[]},e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"confirm",value:function(){var e=this,t={delList:[],insList:[],tscId:this.setAddressData.id,type:this.form.addressType},n=this.tableData.map(function(e){return e.addrId}),a=(this.tableData[0]||{}).countryId;n.forEach(function(n,a){-1===e.selectAddress.indexOf(n)&&t.delList.push(e.tableData[a].id)}),this.selectAddress.forEach(function(a,r){if(-1===n.indexOf(a)){var i=e.transferList.find(function(e){return e.id===a});i&&t.insList.push({addrId:i.id,addrName:i.fellName,countryId:i.countryId,tscId:e.setAddressData.id,type:e.form.addressType})}}),this.isArea&&a&&a!==this.form.countryId&&(t.delList=[].concat(Object(q["a"])(t.delList),Object(q["a"])(this.tableData)).reduce(function(e,t){return e.find(function(e){return e===t.id})||e.push(t.id),e},[])),this.loading=!0,Object(v["w"])(t).then(function(t){e.loading=!1,t.success&&(e.$message.success("添加成功"),e.visible=!1,e.dialogClose())}).catch(function(t){return e.loading=!1,t})}},{key:"handleChange",value:function(){switch(this.form.addressType){case 3:this.getFbastoreList();break;case 4:this.getRegionList();break;case 5:this.getAreaList(1);break;case 6:this.getAreaList(3);break;case 7:this.getAreaList(2);break;default:this.getPortList()}}},{key:"getAreaList",value:function(e){var t=this;if(this.transferList=[],this.form.countryId||2===e){var n={model:{type:e,countryId:2===e?"":this.form.countryId},page:1,size:999};this.loadingTransfer=!0,Object(v["d"])(n).then(function(e){if(t.loadingTransfer=!1,e.success){var n=e.data||{},a=n.result||[];t.transferList=a.map(function(e){return{id:e.id+"",name:e.name,fellName:e.name,countryId:e.countryId,countryName:e.countryName}})}}).catch(function(e){return t.loadingTransfer=!1,e})}}},{key:"getRegionList",value:function(){var e=this;if(this.transferList=[],this.form.countryId){this.loadingTransfer=!0;var t={countryId:this.form.countryId,page:1,size:9999};Object(v["o"])(t).then(function(t){var n=t.data||{},a=n.result||[];e.transferList=a.map(function(e){return{id:e.id,name:e.name,fellName:e.name,countryId:e.countryId,countryName:e.countryName}}),e.loadingTransfer=!1}).catch(function(t){return e.loadingTransfer=!1,t})}}},{key:"getFbastoreList",value:function(){var e=this,t={codeSort:"A",countryId:this.form.countryId.join(","),status:"1",page:1,size:999};this.loadingTransfer=!0,Object(v["m"])(t).then(function(t){if(e.loadingTransfer=!1,t.success){var n=t.data||{},a=n.result||[];e.transferList=a.map(function(e){return e.fellName=e.code+(e.postal?"-"+e.postal:"")+(e.stateName?"-"+e.stateName:""),e})}}).catch(function(t){return e.loadingTransfer=!1,t})}},{key:"getPortList",value:function(){var e=this,t={countryId:this.form.countryId.join(","),type:this.form.addressType,page:1,size:999};this.loadingTransfer=!0,Object(v["n"])(t).then(function(t){if(e.loadingTransfer=!1,t.success){var n=t.data||{},a=n.result||[];e.transferList=a.map(function(e){return e.fellName=e.code+"-"+e.name+"-"+e.alias,e})}}).catch(function(t){return e.loadingTransfer=!1,t})}},{key:"filterMethod",value:function(e,t){var n=t.fellName||"";return n.indexOf(e)>-1}},{key:"addressTypeChange",value:function(e){1===this.form.addressType||2===this.form.addressType||3===this.form.addressType?(this.isArea=!1,this.form.countryId=[]):(this.isArea=!0,this.form.countryId=void 0),this.transferList=[],this.selectAddress=[],this.modalWidth="960px",this.pagination.page=1,this.getAddressList()}},{key:"streetChange",value:function(e,t){t.street="",e.length&&(t.street=this.streetList.filter(function(t){return-1!==e.indexOf(t.id)}).map(function(e){return e.name}).join(","))}},{key:"add",value:function(){this.tableData.forEach(function(e){e.isEditRow=!1}),this.tableData=[].concat(Object(q["a"])(this.tableData),[{key:(new Date).getTime(),country:"",countryId:void 0,detailArea:[],detailAreaName:"",area:"",areaId:"",city:"",cityId:"",province:"",provinceId:"",streetIds:[],street:"",isEditRow:!0}])}},{key:"addAddress",value:function(){var e=this,t=this.tableData.find(function(e){return e.isEditRow});t?t.id?this.$confirm("您修改的尚未保存！","温馨提示",{confirmButtonText:"保存",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!e.validate(t)){n.next=3;break}return n.next=3,e.saveAddress(t,"isAdd");case 3:case"end":return n.stop()}},n)}))).catch(function(){e.add()}):this.$confirm("您新增的尚未保存！","温馨提示",{confirmButtonText:"保存",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(Object(s["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:if(!e.validate(t)){n.next=3;break}return n.next=3,e.saveAddress(t,"isAdd");case 3:case"end":return n.stop()}},n)}))).catch(function(){e.tableData=e.tableData.filter(function(e){return!e.isEditRow})}):this.add()}},{key:"editAddress",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tableData.forEach(function(e){e.isEditRow=!1}),t.isEditRow=!0,this.loading=!0,e.next=5,this.getAreaDetailList(t);case 5:return e.next=7,this.getStreet(t);case 7:this.loading=!1;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"validate",value:function(e){return e.countryId?e.detailArea.length?"CN"!==e.countryId||0!==e.streetIds.length||(this.$message.warning("请选择街道"),!1):(this.$message.warning("请选择城市"),!1):(this.$message.warning("请选择国家"),!1)}},{key:"delAddress",value:function(e){var t=this;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){if(e.id){var n={id:e.id,deleted:1};t.loading=!0,Object(v["v"])(n).then(function(e){t.loading=!1,e.success&&(t.$message.success("操作成功"),t.pagination.page=1,t.getAddressList())}).catch(function(e){return t.loading=!1,e})}}).catch(function(){return!1})}},{key:"cancelEditAddress",value:function(e){e.key?this.tableData=this.tableData.filter(function(t){return t.key?t.key!==e.key:t}):e.isEditRow=!1}},{key:"saveAddress",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var a,r,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.validate(t)){e.next=6;break}return a=Object.assign({tscId:this.setAddressData.id},t),t.result&&t.result.length?(r=t.result.map(function(e){return e.streetId}),r.forEach(function(e,n){-1===t.streetIds.indexOf(e)&&a.delList.push(t.result[n].id)}),t.streetIds.forEach(function(e,t){if(-1===r.indexOf(e)){var n=i.streetList.find(function(t){return t.id===e});a.insList.push({key:n.id,value:n.name})}})):a.insList=t.streetIds.map(function(e){var t=i.streetList.find(function(t){return t.id===e});return{key:e,value:t.name}}),this.loading=!0,e.next=6,Object(v["v"])(a).then(function(e){i.loading=!1,e.success&&(i.$message.success("操作成功"),i.getAddressList(n))}).catch(function(e){return i.loading=!1,e});case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAreaDetailList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n={countryId:t.countryId},this.selectLoading=!0,e.next=4,Object(v["f"])(n).then(function(e){if(a.selectLoading=!1,e.success){var t=e.data.result.length>0?e.data.result[0].children:[];a.detailAreaList=a.$formatAreas(t,4)}}).catch(function(e){return a.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStreet",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.streetList=[],2===t.detailArea.length){e.next=4;break}return this.$message.warning("请选择城市"),e.abrupt("return");case 4:if(n={countryId:t.countryId,cityId:t.detailArea[1]},this.selectLoading=!0,"CN"!==n.countryId){e.next=11;break}return e.next=9,Object(v["e"])(n).then(function(e){a.selectLoading=!1,e.success&&(a.streetList=e.data||[])}).catch(function(e){return a.selectLoading=!1,e});case 9:e.next=15;break;case 11:return n.page=1,n.size=9999,e.next=15,Object(v["i"])(n).then(function(e){if(a.selectLoading=!1,e.success){var t=e.data;a.streetList=t.result||[]}}).catch(function(e){return a.selectLoading=!1,e});case 15:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"dialogClose",value:function(){this.visible=!1,this.$emit("load")}},{key:"show",value:function(e){this.visible=!0,this.setAddressData=e,this.transferList=[],this.selectAddress=[],this.form={addressType:e.endAddressType,countryId:void 0},this.addressTypeChange(e.endAddressType)}},{key:"detailAreaChange",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=this.$getAreaName(t,this.detailAreaList),n.detailAreaName="",n.province=a.stateName||"",n.provinceId=t.length>=1?t[0]:"",n.city=a.cityName||"",n.cityId=t.length>=2?t[1]:"",n.area=a.countyName||"",n.areaId=3===t.length?t[2]:"",!t.length){e.next=12;break}return n.detailAreaName="".concat(n.province," ").concat(n.city," ").concat(n.area),e.next=12,this.getStreet(n);case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"countryChange",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var a,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=this.countryList,r=a.find(function(e){return e.id===t}),this.detailAreaList=[],n.country="",r&&(n.country="".concat(r.name,"-").concat(r.alias)),e.next=7,this.getAreaDetailList(n);case 7:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getAddressList",value:function(e){var t=this,n={model:{tscId:this.setAddressData.id,type:this.form.addressType},page:this.pagination.page,size:this.pagination.size};0!==this.form.addressType&&(n.size=99999),this.loading=!0,Object(v["c"])(n).then(function(n){if(t.loading=!1,n.success){var a=n.data||{},r=a.result||[];0===t.form.addressType?(t.tableData=r.map(function(e){var t=[];return e.provinceId&&t.push(e.provinceId),e.cityId&&t.push(e.cityId),e.isEditRow=!1,e.detailArea=t,e.streetIds=[],e.detailAreaName="".concat(e.province," ").concat(e.city),e.result&&e.result.length&&(e.streetIds=e.result.map(function(e){return e.streetId}),e.street=e.result.map(function(e){return e.street}).join(",")),e}),t.pagination.total=a.total||0,"isAdd"===e&&t.add()):(t.tableData=r||[],t.selectAddress=t.tableData.map(function(e){return e.addrId}),t.isArea?t.form.countryId=(r[0]||{}).countryId:t.form.countryId=r.reduce(function(e,t){return t.countryId&&-1===e.indexOf(t.countryId)&&e.push(t.countryId),e},[]),t.handleChange())}}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.getAddressList()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.getAddressList()}}]),t}(m["e"]);B=p["a"]([Object(m["a"])({name:"",components:{},props:{countryList:{type:Array,default:function(){return[]}}}})],B);var M=B,G=M,H=Object(S["a"])(G,V,P,!1,null,"7d333992",null),J=H.exports,Q=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"关联柜型",visible:e.visible,width:"960px","close-on-click-modal":!1},on:{close:e.dialogClose}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部柜型","已关联柜型"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.cabinetList},model:{value:e.selectCabinet,callback:function(t){e.selectCabinet=t},expression:"selectCabinet"}}),n("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.dialogClose}},[e._v("\n        取 消\n      ")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveCabinet}},[e._v("\n        确 定\n      ")])],1)],1)])},W=[],K=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.visible=!1,e.loading=!1,e.setCabinetData={},e.selectCabinet=[],e.selectCabinetList=[],e.cabinetList=[],e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"saveCabinet",value:function(){var e=this,t={delList:[],insList:[]};if(0===this.selectCabinetList.length)this.cabinetList.forEach(function(n){-1!==e.selectCabinet.indexOf(n.id)&&t.insList.push({cabinetId:n.id,cabinetName:n.name,tscId:e.setCabinetData.id})});else{var n=this.selectCabinetList.map(function(e){return e.cabinetId});n.forEach(function(n,a){-1===e.selectCabinet.indexOf(n)&&t.delList.push(e.selectCabinetList[a])}),this.selectCabinet.forEach(function(a,r){if(-1===n.indexOf(a)){var i=e.cabinetList.find(function(e){return e.id===a});t.insList.push({cabinetId:i.id,cabinetName:i.name,tscId:e.setCabinetData.id})}})}this.loading=!0,Object(v["y"])(t).then(function(t){e.loading=!1,t.success&&(e.$message.success("操作成功"),e.dialogClose())}).catch(function(t){return e.loading=!1,t})}},{key:"filterMethod",value:function(e,t){var n=t.name||"";return n.indexOf(e)>-1}},{key:"dialogClose",value:function(){this.selectCabinet=[],this.selectCabinetList=[],this.visible=!1}},{key:"show",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.visible=!0,this.setCabinetData=t,this.loading=!0,e.next=5,this.getCabinetList();case 5:return e.next=7,this.getServiceCabinetList();case 7:this.loading=!1;case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getServiceCabinetList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={model:this.setCabinetData.id,page:1,size:99999},e.next=3,Object(v["p"])(t).then(function(e){if(e.success){var t=e.data||{};n.selectCabinetList=t.result||[],n.selectCabinet=n.selectCabinetList.map(function(e){return e.cabinetId})}}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCabinetList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:99999},e.next=3,Object(v["g"])(t).then(function(e){if(e.success){var t=e.data||{};n.cabinetList=t.result||[]}}).catch(function(e){return e});case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["e"]);K=p["a"]([Object(m["a"])({name:"",components:{},props:{}})],K);var U=K,X=U,Y=(n("4c6c"),Object(S["a"])(X,Q,W,!1,null,"9104a9b4",null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"input-tags"},[e._l(e.tags,function(t,a){return n("el-tag",{key:t.name+"-"+a,staticClass:"tags",attrs:{type:"info",size:"small",closable:"","disable-transitions":""},on:{close:function(t){return e.closeTag(a)}}},[e._v("\n    "+e._s(t.name)+"\n  ")])}),n("el-input",{staticClass:"inputs",attrs:{type:"text",size:"small",clearable:"",placeholder:0===e.tags.length?"请输入内容":""},on:{clear:e.clearText,input:e.changeInput},nativeOn:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.enterText(t)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.enterText(t)}]},model:{value:e.tagText,callback:function(t){e.tagText=t},expression:"tagText"}})],2)},te=[],ne=(n("28a5"),function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.tagText="",e.tags=[{name:"黄金糕"}],e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"mounted",value:function(){var e=this,t=document.querySelector(".inputs");t.addEventListener("paste",function(t){var n=t.clipboardData.getData("text");if(-1!==n.indexOf(",")||-1!==n.indexOf(" ")){var a=n.replace(" ",","),r=a.split(",");r.map(function(t){e.tags.push({name:t})})}else e.tags.push({name:n});t.preventDefault()})}},{key:"closeTag",value:function(e){this.tags.splice(e,1)}},{key:"clearText",value:function(){this.tags=[],this.tagText=""}},{key:"changeInput",value:function(e){}},{key:"enterText",value:function(){this.tags.push({name:this.tagText}),this.tagText=""}}]),t}(m["e"]));ne=p["a"]([Object(m["a"])({name:"",components:{},props:{}})],ne);var ae=ne,re=ae,ie=(n("fd83"),Object(S["a"])(re,ee,te,!1,null,"21fabbd8",null)),se=ie.exports;function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(n,!0).forEach(function(t){Object(o["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var le=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(d["a"])(this,Object(f["a"])(t).apply(this,arguments)),e.loading=!1,e.isAddEditVisible=!1,e.isEdit=!1,e.isCopy=!1,e.isTruckEditFormShow=!1,e.isGroupDialog=!1,e.tableData=[],e.agentList=[],e.currentId="",e.currentServiceId="",e.selectAgents=[],e.addressTypeList=[{label:"私人地址",value:0},{label:"港口",value:1},{label:"火车站",value:2},{label:"海外仓",value:3},{label:"国内区域",value:4},{label:"城市区域",value:5},{label:"仓库区域",value:6},{label:"国家区域",value:7}],e.selectValue={addressType:void 0,addressCategory:void 0,stateId:void 0,cityId:void 0,countryId:void 0,subtypeId:void 0,keyword:void 0},e.countryList=[],e.stateList=[],e.cityList=[],e.selectLoading=!1,e.subTypeList=[],e.agentLoading=!1,e.currentServiceName="",e.isItemDialogShow=!1,e.props={label:"name",value:"id"},e.selectType="1",e.page=1,e.size=10,e.total=0,e}return Object(h["a"])(t,e),Object(u["a"])(t,[{key:"addAddress",value:function(e){this.$refs.addAddressModal.show(e)}},{key:"saveCabinet",value:function(e){this.$refs.setCabinet.show(e)}},{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var n=this.selectValue,a=n.keyword,r=Object(c["a"])(n,["keyword"]),i=ce({},r,{page:this.page,size:this.size});switch(this.selectType){case"1":i.code=a;break;case"2":i.name=a;break}Object(v["s"])(i).then(function(e){t.loading=!1;var n=e.data||{};t.tableData=n.result||[],t.total=n.total}).catch(function(e){return t.loading=!1,e})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(v["j"])().then(function(t){var n=t.data||{};e.countryList=n.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectValue.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["r"])(this.selectValue.countryId).then(function(e){t.selectLoading=!1;var n=e.data||{},a=n.result||[];t.stateList=a}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectValue.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["h"])(this.selectValue.stateId).then(function(e){t.selectLoading=!1;var n=e.data||{},a=n.result||[];t.cityList=a}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectValue.stateId="",this.onStateChange();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(){this.selectValue.cityId=""}},{key:"deletData",value:function(e){var t=this,n={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["a"])(n).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"setServiceGroup",value:function(){var e=this;this.isGroupDialog=!0,this.$nextTick(function(){var t=e.$refs.trailerSet;t.setData()})}},{key:"addCardPad",value:function(){this.isEdit=!1,this.isCopy=!1,this.isTruckEditFormShow=!0}},{key:"getSubtypeList",value:function(){var e=this,t={typeId:"06"};Object(v["q"])(t).then(function(t){e.subTypeList=t.data}).catch(function(e){return e})}},{key:"getCustTypeList",value:function(e){var t=this,n={page:1,size:9999,cas:"A",typeId:"06",subtypeId:e};return Object(v["l"])(n).then(function(e){var n=e.data||{},a=n.result||[];t.agentList=JSON.parse(JSON.stringify(a).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e})}},{key:"closeForm",value:function(){this.isTruckEditFormShow=!1,this.resetForm()}},{key:"saveConfirm",value:function(){this.isTruckEditFormShow=!1,this.resetForm(),this.queryAll()}},{key:"formatData",value:function(e){var t=this;return e.forEach(function(e){0===e.children.length?delete e.children:t.formatData(e.children)}),e}},{key:"resetForm",value:function(){this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.editForm,t=e.$refs.selectForm;this.$nextTick(function(){t.clearValidate(),e.setTerms("")})}},{key:"setAgentConfirm",value:function(){var e=this,t=this.selectAgents.map(function(t){var n,a=e.agentList.find(function(e){return e.id===t}),r=a?a.name:"";return n={id:t,name:r},n}),n={agents:t,id:this.currentServiceId};Object(v["x"])(n).then(function(t){e.$message({type:"success",message:"保存成功"}),e.itemDialogClose(),e.queryAll()}).catch(function(e){return e})}},{key:"associatedAgent",value:function(e){var t=this;this.isItemDialogShow=!0,this.currentServiceId=e.id,this.currentServiceName=e.name,this.agentLoading=!0;var n={tscId:e.id};Promise.all([this.getAssociatedAgentList(n),this.getCustTypeList((e||{}).subtypeId)]).then(function(e){t.agentLoading=!1}).catch(function(e){return t.agentLoading=!1,e})}},{key:"getAssociatedAgentList",value:function(e){var t=this;return Object(v["u"])(e).then(function(e){var n=e.data;t.selectAgents=n.map(function(e){return e.id})}).catch(function(e){return t.agentLoading=!1,e})}},{key:"editForm",value:function(e){this.isEdit=!0,this.isCopy=!1,this.isTruckEditFormShow=!0;var t=this.$refs.editForm;this.$nextTick(function(){t.setTerms(e.terms),t.setData(e)})}},{key:"copyForm",value:function(e){this.isEdit=!0,this.isCopy=!0,this.isTruckEditFormShow=!0;var t=this.$refs.editForm;this.$nextTick(function(){t.setTerms(e.terms),t.setData(e)})}},{key:"close",value:function(){this.isAddEditVisible=!1,this.resetForm()}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"onStatus",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var a,r,s,o,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.status&&t.status!==n){e.next=2;break}return e.abrupt("return");case 2:return a="0"===n?"禁用":"开启",e.next=5,this.$confirm("此操作将".concat(a,"该拖车服务，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 5:if(r=e.sent,s=Object(i["a"])(r,2),o=s[0],s[1],!o){e.next=11;break}return e.abrupt("return");case 11:Object(v["t"])({id:t.id,status:n}).then(function(e){c.$message.success("修改成功"),c.queryAll()}).catch(function(e){return e});case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"filterMethod",value:function(e,t){return t.name.indexOf(e)>-1}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"created",value:function(){this.queryAll(),this.getCountryList(),this.getSubtypeList()}},{key:"custId",get:function(){var e=g["a"].info||{},t=e.custId;return t}},{key:"labelPosition",get:function(){var e=y["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=y["a"].language;return e||"en"}}]),t}(m["e"]);le=p["a"]([Object(m["a"])({name:"Port",components:{AddEditForm:F,trailerSet:R,addAddressModal:J,setCabinet:Z,inputTags:se},props:{}})],le);var ue=le,de=ue,fe=(n("5abc"),Object(S["a"])(de,a,r,!1,null,"227056ce",null));t["default"]=fe.exports},7551:function(e,t,n){},8670:function(e,t,n){"use strict";var a=n("bd3f"),r=n.n(a);r.a},a065:function(e,t,n){},a180:function(e,t,n){},b865:function(e,t,n){"use strict";var a=n("7551"),r=n.n(a);r.a},bd3f:function(e,t,n){},c2f6:function(e,t,n){},fd83:function(e,t,n){"use strict";var a=n("c2f6"),r=n.n(a);r.a}}]);