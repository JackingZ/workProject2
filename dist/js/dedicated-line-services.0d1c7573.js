(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["dedicated-line-services"],{"0758":function(e,t,r){},"16d8":function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:e.id}})},i=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),s=r("d225"),o=r("b0b4"),l=r("308d"),c=r("6bb5"),u=r("4e2b"),d=r("9ab4"),p=(r("a7be"),r("44f8"),r("a6e0"),r("60a3")),m={previewStyle:"vertical",usageStatistics:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},g=r("547e"),h=r.n(g);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)},b=function(e){function t(){return Object(s["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onValueChange",value:function(e,t){this.markdownEditor&&e!==t&&e!==this.markdownEditor.getValue()&&this.markdownEditor.setValue(e)}},{key:"onLanguageChange",value:function(){this.destroyEditor(),this.initEditor()}},{key:"onHeightChange",value:function(e){this.markdownEditor&&this.markdownEditor.height(e)}},{key:"onModeChange",value:function(e){this.markdownEditor&&this.markdownEditor.changeMode(e)}},{key:"mounted",value:function(){this.initEditor()}},{key:"destroyed",value:function(){this.destroyEditor()}},{key:"initEditor",value:function(){var e=this,t=document.getElementById(this.id);t&&(this.markdownEditor=new h.a(v({el:t},this.editorOptions)),this.value&&this.markdownEditor.setValue(this.value),this.markdownEditor.on("change",function(){e.$emit("input",e.markdownEditor.getValue())}))}},{key:"destroyEditor",value:function(){this.markdownEditor&&(this.markdownEditor.off("change"),this.markdownEditor.remove(),this.markdownEditor=void 0)}},{key:"focus",value:function(){this.markdownEditor&&this.markdownEditor.focus()}},{key:"setValue",value:function(e){this.markdownEditor&&this.markdownEditor.setValue(e)}},{key:"getValue",value:function(){return this.markdownEditor?this.markdownEditor.getValue():""}},{key:"setHtml",value:function(e){this.markdownEditor&&this.markdownEditor.setHtml(e)}},{key:"getHtml",value:function(){return this.markdownEditor?this.markdownEditor.getHtml():""}},{key:"editorOptions",get:function(){var e=Object.assign({},m,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}}]),t}(p["e"]);d["a"]([Object(p["c"])({required:!0})],b.prototype,"value",void 0),d["a"]([Object(p["c"])({default:y})],b.prototype,"id",void 0),d["a"]([Object(p["c"])({default:function(){return m}})],b.prototype,"options",void 0),d["a"]([Object(p["c"])({default:"markdown"})],b.prototype,"mode",void 0),d["a"]([Object(p["c"])({default:"300px"})],b.prototype,"height",void 0),d["a"]([Object(p["c"])({default:"en_US"})],b.prototype,"language",void 0),d["a"]([Object(p["f"])("value")],b.prototype,"onValueChange",null),d["a"]([Object(p["f"])("language")],b.prototype,"onLanguageChange",null),d["a"]([Object(p["f"])("height")],b.prototype,"onHeightChange",null),d["a"]([Object(p["f"])("mode")],b.prototype,"onModeChange",null),b=d["a"]([Object(p["a"])({name:"MarkdownEditor"})],b);var k=b,x=k,F=r("2877"),L=Object(F["a"])(x,a,i,!1,null,null,null);t["a"]=L.exports},"1c4c":function(e,t,r){"use strict";var a=r("9b43"),i=r("5ca1"),n=r("4bf8"),s=r("1fa8"),o=r("33a4"),l=r("9def"),c=r("f1ae"),u=r("27ee");i(i.S+i.F*!r("5cc5")(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,d,p=n(e),m="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,f=void 0!==h,v=0,y=u(p);if(f&&(h=a(h,g>2?arguments[2]:void 0,2)),void 0==y||m==Array&&o(y))for(t=l(p.length),r=new m(t);t>v;v++)c(r,v,f?h(p[v],v):p[v]);else for(d=y.call(p),r=new m;!(i=d.next()).done;v++)c(r,v,f?s(d,h,[i.value,v],!0):i.value);return r.length=v,r}})},"31d4":function(e,t,r){"use strict";r.d(t,"s",function(){return i}),r.d(t,"r",function(){return n}),r.d(t,"x",function(){return s}),r.d(t,"u",function(){return o}),r.d(t,"b",function(){return l}),r.d(t,"w",function(){return c}),r.d(t,"v",function(){return u}),r.d(t,"q",function(){return d}),r.d(t,"c",function(){return p}),r.d(t,"z",function(){return m}),r.d(t,"g",function(){return g}),r.d(t,"o",function(){return h}),r.d(t,"k",function(){return f}),r.d(t,"i",function(){return v}),r.d(t,"d",function(){return y}),r.d(t,"l",function(){return b}),r.d(t,"j",function(){return k}),r.d(t,"p",function(){return x}),r.d(t,"f",function(){return F}),r.d(t,"h",function(){return L}),r.d(t,"m",function(){return w}),r.d(t,"a",function(){return I}),r.d(t,"t",function(){return O}),r.d(t,"y",function(){return S}),r.d(t,"A",function(){return j}),r.d(t,"n",function(){return C}),r.d(t,"e",function(){return T});var a=r("b32d");function i(e){var t={url:"/cfg/ksc/getKscList",method:"post",data:e};return Object(a["a"])(t)}function n(e){var t={url:"/cfg/ksc/"+e.id,method:"get",params:e};return Object(a["a"])(t)}function s(e){var t={url:"/cfg/ksc/saveKsc",method:"post",data:e};return Object(a["a"])(t)}function o(e){var t={url:"/cfg/ksc/changeStatus",method:"post",params:e};return Object(a["a"])(t)}function l(e){var t={url:"/cfg/ksc/deleteKsc",method:"delete",params:e};return Object(a["a"])(t)}function c(e){var t={url:"/cfg/ksc/saveAgent",method:"post",data:e};return Object(a["a"])(t)}function u(e){var t={url:"/cfg/ksc/getAgentList",method:"get",params:e};return Object(a["a"])(t)}function d(e){var t={url:"/cfg/svcgroup/getSvcGroupList",method:"get",params:e};return Object(a["a"])(t)}function p(e){var t={url:"/cfg/svcgroup/deleteSvcGroup",method:"delete",params:e};return Object(a["a"])(t)}function m(e){var t={url:"/cfg/svcgroup/saveSvcGroup",method:"post",data:e};return Object(a["a"])(t)}function g(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(a["a"])(e)}function h(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(a["a"])(t)}function f(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(a["a"])(t)}function v(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(a["a"])(t)}function y(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(a["a"])(t)}function b(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(a["a"])(t)}function k(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(a["a"])(t)}function x(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(a["a"])(t)}function F(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(a["a"])(t)}function L(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(a["a"])(t)}function w(e){var t={url:"/cfg/ksc/destination/page",method:"post",data:e};return Object(a["a"])(t)}function I(e){var t={url:"/cfg/ksc/destination/add",method:"post",data:e};return Object(a["a"])(t)}function O(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(a["a"])(t)}function S(e){var t={url:"/cfg/ksc/range/save",method:"post",data:e};return Object(a["a"])(t)}function j(e){var t={url:"/cfg/ksc/range/get",method:"post",params:e};return Object(a["a"])(t)}function C(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(a["a"])(t)}function T(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(a["a"])(t)}},"46de":function(e,t,r){},"4d2d":function(e,t,r){"use strict";var a=r("e158"),i=r.n(a);i.a},"4f22":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"index"===e.addEditForm,expression:"addEditForm === 'index'"}],staticClass:"app-container"},[r("head-info",{attrs:{info:"",title:"专线服务"}}),r("div",{staticClass:"app-panel"},[r("el-row",[r("el-col",{attrs:{span:3}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lineServiceAdd"],expression:"['lineServiceAdd']"}],attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n              新增服务\n            ")]),r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:e.setServiceGroup}},[e._v("\n              服务组\n            ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:21}},[r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"所属产品",size:"small",clearable:"",filterable:""},on:{focus:e.getProductTypeList},model:{value:e.searchForm.productId,callback:function(t){e.$set(e.searchForm,"productId",t)},expression:"searchForm.productId"}},e._l(e.productList,function(e){return r("el-option",{key:e.id,attrs:{label:e.productName,value:e.id}})}),1),r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"服务用途",size:"small",clearable:"",filterable:""},model:{value:e.searchForm.purpose,callback:function(t){e.$set(e.searchForm,"purpose",t)},expression:"searchForm.purpose"}},[r("el-option",{attrs:{label:"服务渠道",value:"0"}}),r("el-option",{attrs:{label:"计费渠道",value:"1"}}),r("el-option",{attrs:{label:"发货渠道",value:"2"}})],1),r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"服务类型",size:"small",clearable:""},on:{focus:e.getSubtypeList,change:e.onSubtype},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.subtypeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),"1"===e.searchForm.subtypeId||"2"===e.searchForm.subtypeId?r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"业务类型",size:"small",clearable:""},model:{value:e.searchForm.containerType,callback:function(t){e.$set(e.searchForm,"containerType",t)},expression:"searchForm.containerType"}},e._l(e.typeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1):e._e(),"1"===e.searchForm.subtypeId||"2"===e.searchForm.subtypeId?r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"支持锁舱",size:"small",clearable:""},model:{value:e.searchForm.coverTank,callback:function(t){e.$set(e.searchForm,"coverTank",t)},expression:"searchForm.coverTank"}},[r("el-option",{attrs:{label:"否",value:"0"}}),r("el-option",{attrs:{label:"是",value:"1"}})],1):e._e(),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{placeholder:"起运国",size:"small",filterable:"",clearable:""},on:{focus:e.getCountryList,change:e.onCountryFrom},model:{value:e.searchForm.countryFromId,callback:function(t){e.$set(e.searchForm,"countryFromId",t)},expression:"searchForm.countryFromId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"目的国",clearable:"",filterable:"",size:"small"},on:{focus:e.getCountryList,change:e.onCountryTo},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"服务机构",filterable:"",clearable:"",size:"small"},model:{value:e.searchForm.orgTag,callback:function(t){e.$set(e.searchForm,"orgTag",t)},expression:"searchForm.orgTag"}},e._l(e.orgList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{placeholder:"关联代理商",size:"small",clearable:"",filterable:""},model:{value:e.searchForm.agentId,callback:function(t){e.$set(e.searchForm,"agentId",t)},expression:"searchForm.agentId"}},e._l(e.agentsList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{staticStyle:{width:"110px","margin-right":"5px"},attrs:{placeholder:"目的地类型",size:"small",clearable:""},model:{value:e.searchForm.purposeType,callback:function(t){e.$set(e.searchForm,"purposeType",t)},expression:"searchForm.purposeType"}},[r("el-option",{attrs:{label:"FBA",value:0}}),r("el-option",{attrs:{label:"私人",value:1}}),r("el-option",{attrs:{label:"自有海外仓",value:2}})],1),r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"派件方式",size:"small",clearable:""},model:{value:e.searchForm.dispatch,callback:function(t){e.$set(e.searchForm,"dispatch",t)},expression:"searchForm.dispatch"}},[r("el-option",{attrs:{label:"卡派",value:"0"}}),r("el-option",{attrs:{label:"快递",value:"1"}}),"1"===e.searchForm.subtypeId||"2"===e.searchForm.subtypeId?r("el-option",{attrs:{label:"整柜直送",value:"3"}}):e._e(),r("el-option",{attrs:{label:"自提",value:"2"}}),2===e.searchForm.purposeType?r("el-option",{attrs:{label:"到仓",value:"4"}}):e._e()],1),r("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"启用状态",size:"small",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},[r("el-option",{attrs:{label:"禁用",value:"0"}}),r("el-option",{attrs:{label:"启用",value:"1"}})],1),r("el-input",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{size:"small",clearable:"",placeholder:"请输入服务名称"},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}}),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lineServiceQuery"],expression:"['lineServiceQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableData(1)}}},[e._v("\n              查询\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{fixed:"left",prop:"name",label:"服务名称","min-width":"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{fixed:"left",prop:"lsId",label:"服务编码","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"productName",label:"所属产品",width:"100"}}),r("el-table-column",{attrs:{prop:"subtypeName",label:"服务类型",width:"100"}}),r("el-table-column",{attrs:{prop:"containerType",label:"业务类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.typeOptions[t.row.containerType]||{}).label||"--")+"\n            ")]}}])}),r("el-table-column",{attrs:{prop:"coverTank",label:"支持锁舱",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s("1"===t.row.coverTank?"是":"0"===t.row.coverTank?"否":"-")+"\n            ")]}}])}),r("el-table-column",{attrs:{prop:"countryName",label:"起运国","min-width":"120"}}),r("el-table-column",{attrs:{label:"目的国","min-width":"200","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v("\n                "+e._s(e.formatTargetCountrys(t.row.targets))+"\n              ")])]}}])}),r("el-table-column",{attrs:{prop:"departureName",label:"起运港","min-width":"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"destinationName",label:"目的港","min-width":"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"purposeType",label:"目的地类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.purposeType?r("span",[e._v("FBA")]):1===t.row.purposeType?r("span",[e._v("私人")]):2===t.row.purposeType?r("span",[e._v("自有海外仓")]):r("span",[e._v("--")])]}}])}),r("el-table-column",{attrs:{prop:"dispatch",label:"派件方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.dispatchList[t.row.dispatch])+"\n            ")]}}])}),r("el-table-column",{attrs:{prop:"examine",label:"是否验货",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.examine?"是":"否")+"\n            ")]}}])}),r("el-table-column",{attrs:{label:"目的地/区域",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[r("strong",[t.row.ytag?r("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):r("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),r("el-button",{attrs:{disabled:!e.$checkPermission(["lineServiceArea"]),type:"text"},on:{click:function(r){return e.onArea(t.row)}}},[e._v("\n                目的地/区域\n              ")])],1)}}])}),r("el-table-column",{attrs:{label:"设置计费",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[r("strong",[t.row.xtag?r("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):r("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),r("el-button",{attrs:{disabled:!e.$checkPermission(["lineServiceCharge"]),type:"text"},on:{click:function(r){return e.onCharge(t.row)}}},[e._v("\n                设置计费\n              ")])],1)}}])}),r("el-table-column",{attrs:{label:"关联代理商",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["lineServiceAgent"]),type:"text"},on:{click:function(r){return e.handleAgent(t.row)}}},[e._v("\n                关联代理商\n              ")])]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"启用状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{staticClass:"switchStyle",staticStyle:{"margin-left":"10px"},attrs:{disabled:!e.$checkPermission(["lineServiceEnable"]),"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0",value:t.row.status},on:{input:function(r){return e.handleSwitch(t.row,r)}}})]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lineServiceCopy"],expression:"['lineServiceCopy']"}],attrs:{type:"text"},on:{click:function(r){return e.handleCopy(t.row)}}},[e._v("\n                复制\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lineServiceEdit"],expression:"['lineServiceEdit']"}],attrs:{type:"text"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("\n                编辑\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lineServiceDel"],expression:"['lineServiceDel']"}],attrs:{type:"text"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),"addEditForm"===e.addEditForm?r("div",{staticClass:"app-container"},[r("addEditForm",{ref:"addEditForm",attrs:{"is-edit":e.isEdit,"is-copy":e.isCopy,"type-list":e.typeOptions},on:{back:function(t){e.addEditForm="index"},confirm:e.saveConfirm}})],1):e._e(),"group"===e.addEditForm?r("service-line-group",{on:{back:function(t){e.addEditForm="index"}}}):e._e()],1),r("el-dialog",{attrs:{title:"关联代理商 【"+e.title+"】",visible:e.dialogAgent,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogAgent=t},close:e.closeAgent}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联代理商","已关联代理商"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.agentList},model:{value:e.selectAgents,callback:function(t){e.selectAgents=t},expression:"selectAgents"}}),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.closeAgent}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmAgent}},[e._v("\n          确 定\n        ")])],1)],1)]),r("el-dialog",{attrs:{title:"设置服务组合",visible:e.isGroupDialog,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isGroupDialog=t},closed:function(t){e.isGroupDialog=!1}}},[r("paivatelineSet",{ref:"paivatelineSet"})],1),r("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.cancel}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("p",[e._v("\n        "+e._s("选择"+e.title)+"\n      ")]),"1"!==e.isType&&"3"!==e.isType?r("p",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v("\n        "+e._s(e.text)+"\n      ")]):e._e()]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-form",{ref:"dialogForm",staticClass:"dialog-form",attrs:{model:e.dialogForm,"label-width":"120px","label-position":"right",size:"small"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.isType,expression:"isType === '1'"}]},[r("el-form-item",{staticClass:"is-required",attrs:{label:"地址类型"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.onAddress},model:{value:e.dialogForm.yType,callback:function(t){e.$set(e.dialogForm,"yType",t)},expression:"dialogForm.yType"}},e._l(e.addressList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"0"!==e.dialogForm.yType&&"102"!==e.dialogForm.yType?r("el-form-item",{staticClass:"is-required",attrs:{label:"国家"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList,change:e.onCountry},model:{value:e.dialogForm.countryId,callback:function(t){e.$set(e.dialogForm,"countryId",t)},expression:"dialogForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1):e._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"2"===e.isType,expression:"isType === '2'"}],staticStyle:{height:"400px","overflow-y":"auto"}},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"80%"},attrs:{label:"区间范围",prop:"sections"}},e._l(e.dialogForm.sections,function(t,a){return r("div",{key:a,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections[a].lower,callback:function(t){e.$set(e.dialogForm.sections[a],"lower",t)},expression:"dialogForm.sections[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections[a].upper,callback:function(t){e.$set(e.dialogForm.sections[a],"upper",t)},expression:"dialogForm.sections[index].upper"}}),r("span",[r("i",0===a?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:e.addRangeData}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData(a)}}})])],1)}),0)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"4"===e.isType,expression:"isType === '4'"}],staticStyle:{height:"400px","overflow-y":"auto"}},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"80%",display:"inline-block"},attrs:{label:"重量范围",prop:"sections1"}},e._l(e.dialogForm.sections1,function(t,a){return r("div",{key:a,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections1[a].lower,callback:function(t){e.$set(e.dialogForm.sections1[a],"lower",t)},expression:"dialogForm.sections1[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections1[a].upper,callback:function(t){e.$set(e.dialogForm.sections1[a],"upper",t)},expression:"dialogForm.sections1[index].upper"}}),r("span",[r("i",0===a?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:e.addRangeData1}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData1(a)}}})])],1)}),0)],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.isType||"3"===e.isType,expression:"isType === '1' || isType === '3'"}]},[r("el-transfer",{ref:"transferCountry",staticStyle:{height:"450px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择"+e.title,"已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.list},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}})],1),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n          保存\n        ")])],1)],1)])],1)},i=[],n=(r("8e6e"),r("456d"),r("a8db")),s=(r("7514"),r("ac6a"),r("5df3"),r("7f7f"),r("a481"),r("bd86")),o=r("d225"),l=r("b0b4"),c=r("308d"),u=r("6bb5"),d=r("4e2b"),p=r("9ab4"),m=r("60a3"),g=r("9dba"),h=r("d2ca"),f=r("636a"),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticClass:"app-panel privateline-edit"},[r("div",{staticClass:"header-top"},[r("div",{staticStyle:{float:"left"}},[e._v("\n      "+e._s(e.isEdit&&!e.isCopy?"编辑专线服务":"新增专线服务")+"\n    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleBack}},[e._v("\n      返 回\n    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v("\n      保 存\n    ")])],1),r("div",{staticClass:"content"},[r("el-form",{ref:"selectForm",staticClass:"detail-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"156px",size:"small"}},[r("div",{staticClass:"form-title"},[r("span",[e._v("基础信息")])]),r("el-form-item",{attrs:{label:"所属产品",prop:"productId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",filterable:""},model:{value:e.selectForm.productId,callback:function(t){e.$set(e.selectForm,"productId",t)},expression:"selectForm.productId"}},e._l(e.productList,function(e){return r("el-option",{key:e.id,attrs:{label:e.productName,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[r("el-input",{attrs:{maxlength:50,size:"small",placeholder:"请输入"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),r("el-form-item",{attrs:{label:"服务简称",prop:"abbr"}},[r("el-input",{attrs:{maxlength:10,size:"small",placeholder:"请输入"},model:{value:e.selectForm.abbr,callback:function(t){e.$set(e.selectForm,"abbr",t)},expression:"selectForm.abbr"}})],1),r("el-form-item",{attrs:{label:"服务编码",prop:"lsId"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请输入",maxlength:25,"show-word-limit":""},model:{value:e.selectForm.lsId,callback:function(t){e.$set(e.selectForm,"lsId",t)},expression:"selectForm.lsId"}})],1),r("el-form-item",{attrs:{label:"服务类型",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",filterable:""},on:{change:e.onSubtype},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.subtypeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"1"===e.selectForm.subtypeId||"2"===e.selectForm.subtypeId?r("el-form-item",{attrs:{label:"业务类型",prop:"containerType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.selectForm.containerType,callback:function(t){e.$set(e.selectForm,"containerType",t)},expression:"selectForm.containerType"}},e._l(e.typeList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"起运国",prop:"countryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"起运国",filterable:"",clearable:"",size:"small"},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"起运港",prop:"departureId"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.departureId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.handlePort("qi")}},slot:"append"})],1)],1),r("el-form-item",{attrs:{label:"目的国",prop:"countryToIds"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.countryToIds.length+")",size:"small",disabled:""},model:{value:e.cc,callback:function(t){e.cc=t},expression:"cc"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleStates},slot:"append"})],1)],1),"3"!==e.selectForm.subtypeId?r("el-form-item",{staticClass:"is-required",attrs:{label:"目的港",prop:"destinationId"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.destinationId.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.handlePort("mu")}},slot:"append"})],1)],1):e._e(),"1"===e.selectForm.subtypeId&&e.selectForm.countryToIds.some(function(e){return"US"===e})?r("el-form-item",{attrs:{prop:"orgTag",label:"服务机构"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.selectForm.orgTag,callback:function(t){e.$set(e.selectForm,"orgTag",t)},expression:"selectForm.orgTag"}},e._l(e.orgList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"目的地类型",prop:"purposeType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:e.purposeTypeChange},model:{value:e.selectForm.purposeType,callback:function(t){e.$set(e.selectForm,"purposeType",t)},expression:"selectForm.purposeType"}},[r("el-option",{attrs:{label:"FBA",value:0}}),r("el-option",{attrs:{label:"私人",value:1}}),r("el-option",{attrs:{label:"自有海外仓",value:2}})],1)],1),r("el-form-item",{attrs:{label:"配货属性",prop:"outsourcing"}},[r("el-radio-group",{model:{value:e.selectForm.outsourcing,callback:function(t){e.$set(e.selectForm,"outsourcing",t)},expression:"selectForm.outsourcing"}},[r("el-radio",{attrs:{label:"2"}},[e._v("\n            全部\n          ")]),r("el-radio",{attrs:{label:"0"}},[e._v("\n            自有\n          ")]),r("el-radio",{attrs:{label:"1"}},[e._v("\n            外协\n          ")])],1)],1),r("el-form-item",{attrs:{label:"服务用途",prop:"usages"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",multiple:"","collapse-tags":""},model:{value:e.selectForm.usages,callback:function(t){e.$set(e.selectForm,"usages",t)},expression:"selectForm.usages"}},[r("el-option",{attrs:{label:"服务渠道",value:"0"}}),r("el-option",{attrs:{label:"计费渠道",value:"1"}}),r("el-option",{attrs:{label:"发货渠道",value:"2"}})],1)],1),r("el-form-item",{attrs:{label:"分配客户",prop:"belong"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.selectForm.belong,callback:function(t){e.$set(e.selectForm,"belong",t)},expression:"selectForm.belong"}},[r("el-option",{attrs:{label:"同行&直客",value:"0"}}),r("el-option",{attrs:{label:"仅同行",value:"1"}}),r("el-option",{attrs:{label:"仅直客",value:"2"}})],1)],1),r("el-form-item",{attrs:{label:"货币单位",prop:"currencyId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.currencyId,callback:function(t){e.$set(e.selectForm,"currencyId",t)},expression:"selectForm.currencyId"}},e._l(e.currencyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"长度单位",prop:"umLength"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.selectForm.umLength,callback:function(t){e.$set(e.selectForm,"umLength",t)},expression:"selectForm.umLength"}},[r("el-option",{attrs:{label:"M-米",value:"M"}}),r("el-option",{attrs:{label:"CM-厘米",value:"CM"}}),r("el-option",{attrs:{label:"FT-英尺",value:"FT"}})],1)],1),r("el-form-item",{attrs:{label:"重量单位",prop:"umWeight"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.selectForm.umWeight,callback:function(t){e.$set(e.selectForm,"umWeight",t)},expression:"selectForm.umWeight"}},[r("el-option",{attrs:{label:"LB-磅",value:"LBS"}}),r("el-option",{attrs:{label:"KG-公斤",value:"KGS"}})],1)],1),r("el-form-item",{attrs:{label:"体积单位",prop:"umVolume"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.selectForm.umVolume,callback:function(t){e.$set(e.selectForm,"umVolume",t)},expression:"selectForm.umVolume"}},[r("el-option",{attrs:{label:"CBM-立方米",value:"CBM"}}),r("el-option",{attrs:{label:"CUFT-立方英尺",value:"CUFT"}})],1)],1),r("el-form-item",{attrs:{label:"申报币种",prop:"declaredCurrency"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},model:{value:e.selectForm.declaredCurrency,callback:function(t){e.$set(e.selectForm,"declaredCurrency",t)},expression:"selectForm.declaredCurrency"}},e._l(e.currencyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"单箱最大重量",prop:"weight"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.weight,callback:function(t){e.$set(e.selectForm,"weight",t)},expression:"selectForm.weight"}})],1),r("el-form-item",{attrs:{label:"单托最大重量",prop:"singleMaxWeight"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.singleMaxWeight,callback:function(t){e.$set(e.selectForm,"singleMaxWeight",t)},expression:"selectForm.singleMaxWeight"}})],1),r("el-form-item",{attrs:{label:"支持最大体积",prop:"cubed"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.cubed,callback:function(t){e.$set(e.selectForm,"cubed",t)},expression:"selectForm.cubed"}})],1),r("el-form-item",{attrs:{label:"单箱最大申报金额",prop:"maxAmount"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.maxAmount,callback:function(t){e.$set(e.selectForm,"maxAmount",t)},expression:"selectForm.maxAmount"}})],1),r("el-form-item",{attrs:{label:"单票最大货值",prop:"maxPrice"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.maxPrice,callback:function(t){e.$set(e.selectForm,"maxPrice",t)},expression:"selectForm.maxPrice"}})],1),r("el-form-item",{attrs:{label:"服务条款",prop:"clause"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",filterable:""},model:{value:e.selectForm.clause,callback:function(t){e.$set(e.selectForm,"clause",t)},expression:"selectForm.clause"}},e._l(e.wordsList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"默认供应商",size:"small",prop:"custId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCustTypeList},model:{value:e.selectForm.custId,callback:function(t){e.$set(e.selectForm,"custId",t)},expression:"selectForm.custId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{maxlength:100,size:"small",placeholder:"请输入"},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1),r("div",{staticClass:"form-title"},[r("span",[e._v("业务流程")])]),r("el-form-item",{attrs:{label:"派件方式",prop:"dispatch"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.onDispatch},model:{value:e.selectForm.dispatch,callback:function(t){e.$set(e.selectForm,"dispatch",t)},expression:"selectForm.dispatch"}},e._l(e.dispatchList,function(e,t){return r("el-option",{key:t,attrs:{label:e.label,value:e.value}})}),1)],1),"1"===e.selectForm.dispatch?r("el-form-item",{attrs:{label:"是否生成转单号",prop:"isCreate"}},[r("el-radio-group",{model:{value:e.selectForm.isCreate,callback:function(t){e.$set(e.selectForm,"isCreate",t)},expression:"selectForm.isCreate"}},[r("el-radio",{attrs:{label:1}},[e._v("\n            是\n          ")]),r("el-radio",{attrs:{label:0}},[e._v("\n            否\n          ")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"是否包税",prop:"includeTax"}},[r("el-radio-group",{model:{value:e.selectForm.includeTax,callback:function(t){e.$set(e.selectForm,"includeTax",t)},expression:"selectForm.includeTax"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n            不包税\n          ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n            包税\n          ")])],1)],1),"1"===e.selectForm.subtypeId||"2"===e.selectForm.subtypeId?r("el-form-item",{attrs:{label:"支持锁舱",prop:"coverTank"}},[r("el-radio-group",{model:{value:e.selectForm.coverTank,callback:function(t){e.$set(e.selectForm,"coverTank",t)},expression:"selectForm.coverTank"}},[r("el-radio",{attrs:{label:"0"}},[e._v("\n            否\n          ")]),r("el-radio",{attrs:{label:"1"}},[e._v("\n            是\n          ")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"商品属性",prop:"categories"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.selectForm.categories,callback:function(t){e.$set(e.selectForm,"categories",t)},expression:"selectForm.categories"}},[r("el-option",{attrs:{label:"普货",value:"0"}}),r("el-option",{attrs:{label:"带电",value:"1"}}),r("el-option",{attrs:{label:"纯电",value:"2"}}),r("el-option",{attrs:{label:"带磁",value:"3"}}),r("el-option",{attrs:{label:"危险",value:"4"}})],1)],1),r("el-form-item",{attrs:{label:"计费发票费用组",prop:"chargeGroupId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",filterable:""},model:{value:e.selectForm.chargeGroupId,callback:function(t){e.$set(e.selectForm,"chargeGroupId",t)},expression:"selectForm.chargeGroupId"}},e._l(e.invoiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"免赔金额",prop:"deductibles"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.deductibles,callback:function(t){e.$set(e.selectForm,"deductibles",t)},expression:"selectForm.deductibles"}})],1),r("el-form-item",{attrs:{label:"运营成本",prop:""}},[r("div",{staticClass:"input-capacity"},[r("div",{staticStyle:{flex:"1"}},[r("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.operatingCosts,callback:function(t){e.$set(e.selectForm,"operatingCosts",t)},expression:"selectForm.operatingCosts"}})],1),r("div",{staticClass:"input-unit"},[r("span",[e._v("元/kg")])])])]),r("el-form-item",{attrs:{label:"是否验货",prop:"examine"}},[r("el-radio-group",{on:{change:function(t){e.selectForm.examineId=void 0}},model:{value:e.selectForm.examine,callback:function(t){e.$set(e.selectForm,"examine",t)},expression:"selectForm.examine"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n            否\n          ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n            是\n          ")])],1)],1),e.selectForm.examine?r("el-form-item",{attrs:{label:"验货配置",prop:"examineId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.examineId,callback:function(t){e.$set(e.selectForm,"examineId",t)},expression:"selectForm.examineId"}},e._l(e.examineList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"报关价比率(%)",prop:"priceC"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:100,precision:2},model:{value:e.selectForm.priceC,callback:function(t){e.$set(e.selectForm,"priceC",t)},expression:"selectForm.priceC"}})],1),r("el-form-item",{attrs:{label:"关税预付比率(%)",prop:"tax"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:100,precision:2},model:{value:e.selectForm.tax,callback:function(t){e.$set(e.selectForm,"tax",t)},expression:"selectForm.tax"}})],1),r("el-form-item",{attrs:{label:"保险费比率(%)",prop:"insurance"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:100,precision:2},model:{value:e.selectForm.insurance,callback:function(t){e.$set(e.selectForm,"insurance",t)},expression:"selectForm.insurance"}})],1),r("div",{staticClass:"form-title"},[r("span",[e._v("参数&配置")])]),r("el-form-item",{attrs:{label:"计费方式",prop:"priceType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small"},on:{change:e.onChargeType},model:{value:e.selectForm.priceType,callback:function(t){e.$set(e.selectForm,"priceType",t)},expression:"selectForm.priceType"}},[r("el-option",{attrs:{label:"重量计费",value:"2"}}),r("el-option",{attrs:{label:"体积计费",value:"3"}}),"1"===e.selectForm.subtypeId||"2"===e.selectForm.subtypeId?r("el-option",{attrs:{label:"整柜计费",value:"4"}}):e._e()],1)],1),"4"!==e.selectForm.priceType&&"1"===e.selectForm.dispatch?r("el-form-item",{staticClass:"is-required",attrs:{label:"打单快递服务",prop:"escs"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.escs.length+")",disabled:""},model:{value:e.ss,callback:function(t){e.ss=t},expression:"ss"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleExpress},slot:"append"})],1)],1):e._e(),r("el-form-item",{attrs:{label:"起运港报关服务",prop:"cscId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",filterable:""},model:{value:e.selectForm.cscId,callback:function(t){e.$set(e.selectForm,"cscId",t)},expression:"selectForm.cscId"}},e._l(e.customsList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"4"!==e.selectForm.priceType?r("el-form-item",{attrs:{label:"起运港卡派服务",prop:"kscId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",filterable:""},model:{value:e.selectForm.kscId,callback:function(t){e.$set(e.selectForm,"kscId",t)},expression:"selectForm.kscId"}},e._l(e.cardList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),"2"===e.selectForm.priceType?r("el-form-item",{attrs:{label:"分单重量上限",prop:"pWeight"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.pWeight,callback:function(t){e.$set(e.selectForm,"pWeight",t)},expression:"selectForm.pWeight"}})],1):e._e(),"3"===e.selectForm.priceType?r("el-form-item",{attrs:{label:"分单体积上限",prop:"pVolume"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.pVolume,callback:function(t){e.$set(e.selectForm,"pVolume",t)},expression:"selectForm.pVolume"}})],1):e._e(),"4"!==e.selectForm.priceType?r("el-form-item",{attrs:{label:"分单HSCODE数限制",prop:"pHscode"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:9999,step:1,"step-strictly":""},model:{value:e.selectForm.pHscode,callback:function(t){e.$set(e.selectForm,"pHscode",t)},expression:"selectForm.pHscode"}})],1):e._e(),"4"!==e.selectForm.priceType?r("el-form-item",{attrs:{label:"是否计量提醒",prop:"remind"}},[r("el-radio-group",{model:{value:e.selectForm.remind,callback:function(t){e.$set(e.selectForm,"remind",t)},expression:"selectForm.remind"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n            否\n          ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n            是\n          ")])],1)],1):e._e()],1),e._m(0),r("div",[r("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab",toolbarItems:["heading","bold","italic"]},height:"300px"},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}})],1)],1),r("el-dialog",{attrs:{title:"关联快递服务",visible:e.dialogExpress,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogExpress=t},close:e.cancelExpress}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择快递服务","已关联快递服务"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.expressList},model:{value:e.expressOption,callback:function(t){e.expressOption=t},expression:"expressOption"}}),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.cancelExpress}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveExpress}},[e._v("\n          确 定\n        ")])],1)],1)]),r("el-dialog",{attrs:{title:e.title,visible:e.dialogPort,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogPort=t},close:e.cancelPort}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-row",{attrs:{type:"flex",gutter:10}},[r("el-col",{staticStyle:{margin:"10px 0"},attrs:{span:8}},[r("div",{staticClass:"items"},[r("div",{staticClass:"items-head"},[e._v("\n              已选择\n            ")]),e._l(e.portOption,function(t,a){return r("el-tag",{key:a,attrs:{closable:"",type:"info"},on:{close:function(r){return e.handleRemove(a,t)}}},[e._v("\n              "+e._s((t.code?t.code+"-":"")+t.name)+"\n            ")])})],2)]),r("el-col",{attrs:{span:16}},[r("el-row",{staticClass:"filter"},[r("el-col",{staticStyle:{"text-align":"right"}},[r("el-input",{staticStyle:{width:"130px"},attrs:{size:"small",placeholder:"请输入名称"},model:{value:e.portName,callback:function(t){e.portName=t},expression:"portName"}}),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getPortData(1)}}},[e._v("\n                查询\n              ")])],1)],1),r("el-table",{ref:"theTable",attrs:{data:e.portList,border:""},on:{select:e.handleSelect,"select-all":e.handleSelectAll,"selection-change":e.handleSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"name",label:"地址名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s((t.row.code?t.row.code+"-":"")+t.row.name)+"\n              ")]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{small:"","current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("div",{staticStyle:{"text-align":"right","padding-top":"10px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.cancelPort}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.savePort}},[e._v("\n          确 定\n        ")])],1)],1)]),r("el-dialog",{attrs:{title:"目的国",visible:e.isItemDialogShow,"close-on-click-modal":!1,"append-to-body":"",width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["国家","已选择"],props:{key:"id",label:"label"},"filter-placeholder":"输入搜索",data:e.countryList},model:{value:e.selectForm.countryToIds,callback:function(t){e.$set(e.selectForm,"countryToIds",t)},expression:"selectForm.countryToIds"}}),r("div",{staticStyle:{"text-align":"right",margin:"0 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        取 消\n      ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        确 定\n      ")])],1)],1)],1)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"form-title"},[r("span",[e._v("运输条款")])])}],b=(r("4f7f"),r("1c4c"),r("6b54"),r("20d6"),r("75fc")),k=(r("28a5"),r("96cf"),r("3b8d")),x=r("16d8");function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(){return{maxAmount:void 0,maxPrice:void 0,singleMaxWeight:void 0,declaredCurrency:void 0,productId:void 0,productName:void 0,name:void 0,abbr:void 0,lsId:void 0,subtypeId:void 0,subtypeName:void 0,orgTag:void 0,kscName:void 0,cscName:void 0,custName:void 0,countryName:void 0,countryId:void 0,countryToIds:[],departureId:[],departureName:void 0,deliveryName:void 0,destinationName:void 0,destinationId:[],region:void 0,containerType:void 0,deliveryId:[],outsourcing:"0",purposeType:0,usages:[],currencyId:void 0,currencyName:void 0,weight:void 0,cubed:void 0,custId:void 0,remark:void 0,belong:void 0,umLength:void 0,umWeight:void 0,umVolume:void 0,dispatch:void 0,operatingCosts:void 0,isCreate:0,includeTax:!0,coverTank:void 0,categories:[],chargeGroupId:void 0,chargeGroupName:void 0,deductibles:void 0,examine:!0,examineId:void 0,priceC:void 0,tax:void 0,insurance:void 0,priceType:"2",escs:[],pMark:void 0,pHscode:void 0,pVolume:void 0,pWeight:void 0,remind:!0,terms:"",refStart:void 0,refEnd:void 0,clause:void 0,cscId:void 0,escId:void 0,kscId:void 0}}var I=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.selectForm=w(),e.formRules={name:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],abbr:[{required:!0,message:"服务简称不能为空",trigger:"blur"}],productId:[{required:!0,message:"请选择所属产品",trigger:"change"}],containerType:[{required:!0,message:"请选择业务类型",trigger:"change"}],subtypeId:[{required:!0,message:"请选择服务类型",trigger:"change"}],countryId:[{required:!0,message:"起运国不能为空",trigger:"change"}],countryToIds:[{required:!0,message:"目的国不能为空",trigger:"change"}],departureId:[{required:!1,message:"请选择起运港",trigger:"change"}],destinationId:[{required:!1,message:"请选择目的港",trigger:"change"}],deliveryId:[{required:!0,message:"请选择交货区域",trigger:"change"}],outsourcing:[{required:!0,message:"请选择配货属性",trigger:"change"}],declaredCurrency:[{required:!0,message:"请选择申报币种",trigger:"change"}],purposeType:[{required:!0,message:"请选择目的地类型",trigger:"change"}],usages:[{required:!0,message:"请选择服务用途",trigger:"change"}],belong:[{required:!0,message:"请选择分配客户",trigger:"change"}],lsId:[{required:!0,message:"服务编码不能为空",trigger:"blur"},{validator:function(e,t,r){var a=/^[a-zA-Z0-9 .·_-]+$/;t?a.test(t)?r():r(new Error("服务编码不能有中文及特殊字符")):r(new Error("服务编码不能为空"))},trigger:"blur"}],currencyId:[{required:!0,message:"请选择货币单位",trigger:"change"}],umLength:[{required:!0,message:"请选择长度单位",trigger:"change"}],umWeight:[{required:!0,message:"请选择重量单位",trigger:"change"}],umVolume:[{required:!0,message:"请选择体积单位",trigger:"change"}],weight:[{required:!0,message:"支持最大重量不能为空",trigger:"blur"}],cubed:[{required:!0,message:"支持最大体积不能为空",trigger:"blur"}],refStart:[{required:!0,message:"起始时效不能为空",trigger:"blur"},{validator:function(t,r,a){var i=e.$refs.selectForm;r?(i.validateField("refEnd"),a()):a(new Error("起始时效不能为空"))},trigger:"blur"}],refEnd:[{required:!0,message:"结束时效不能为空",trigger:"blur"},{validator:e.numberValidate,trigger:"blur"}],clause:[{required:!0,message:"请选择服务条款",trigger:"change"}],dispatch:[{required:!0,message:"请选择派送方式",trigger:"change"}],isCreate:[{required:!0,message:"请选择是否生成转单号",trigger:"change"}],includeTax:[{required:!0,message:"请选择是否包税",trigger:"change"}],coverTank:[{required:!0,message:"请选择是否支持锁舱",trigger:"change"}],categories:[{required:!0,message:"请选择商品属性",trigger:"change"}],chargeGroupId:[{required:!0,message:"请选择计费发票费用组",trigger:"change"}],deductibles:[{required:!0,message:"免赔金额不能为空",trigger:"blur"}],priceC:[{required:!0,message:"报关价比率不能为空",trigger:"blur"}],tax:[{required:!0,message:"关税预付比率不能为空",trigger:"blur"}],insurance:[{required:!0,message:"保险费比率不能为空",trigger:"blur"}],examine:[{required:!0,message:"请选择是否验货",trigger:"change"}],examineId:[{required:!0,message:"请选择验货配置",trigger:"change"}],escs:[{required:!1,message:"请选择打单快递服务",trigger:"change"}],kscId:[{required:!1,message:"请选择起运港卡派服务",trigger:"change"}],cscId:[{required:!1,message:"请选择起运港报关服务",trigger:"change"}],orgTag:[{required:!1,message:"请选择服务机构",trigger:"change"}],pWeight:[{required:!0,message:"分单重量上限不能为空",trigger:"blur"}],pVolume:[{required:!0,message:"分单体积上限不能为空",trigger:"blur"}],pHscode:[{required:!0,message:"分单HSCODE数限制不能为空",trigger:"blur"}]},e.countryList=[],e.currencyList=[],e.supplierList=[],e.productList=[],e.wordsList=[],e.subtypeList=[],e.portList=[],e.addrList=[],e.codeList=[],e.orgList=[{name:"美森",id:"1"},{name:"以星",id:"2"},{name:"快线",id:"3"},{name:"其他",id:"4"}],e.invoiceList=[],e.expressList=[],e.customsList=[],e.cardList=[],e.examineList=[],e.terms="",e.formLoading=!1,e.dialogExpress=!1,e.dialogLoading=!1,e.selectLoading=!1,e.isItemDialogShow=!1,e.title="",e.ss="",e.cc="",e.tt="",e.portName="",e.expressOption=[],e.portOption=[],e.dialogPort=!1,e.page=1,e.size=10,e.total=0,e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"purposeTypeChange",value:function(){this.selectForm.dispatch=""}},{key:"numberValidate",value:function(e,t,r){var a=this.selectForm.refStart;t?t<=a?r(new Error("结束时效必须大于起始时效")):r():r(new Error("结束时效不能为空"))}},{key:"setData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,s,o,l,c,u,d,p,m,g,f,v,y,b,k,x,F,w,I,O,S,j;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.formLoading=!0,this.getRegionData(),this.getCostgroupList(),this.getSubtypeList(),this.getWordsList(),this.getProductTypeList(),this.getCscList(),this.getKscList(),this.getExamineList(),this.getEscList(),this.getCurrencyData(),this.getCountryData(),!this.isEdit){e.next=38;break}return e.prev=13,e.next=16,Object(h["p"])({id:t.id});case 16:r=e.sent,a=r.data||{},i=a.name,s=a.abbr,o=a.id,l=a.lsId,a.deliveryId,c=a.departureId,u=a.departureName,d=a.destinationId,p=a.destinationName,m=a.escs,g=a.targets,f=a.usages,v=a.categories,y=a.terms,b=Object(n["a"])(a,["name","abbr","id","lsId","deliveryId","departureId","departureName","destinationId","destinationName","escs","targets","usages","categories","terms"]),k=u?u.split(","):[],x=p?p.split(","):[],F=c?c.split(","):[],w=d?d.split(","):[],I=F.map(function(e,t){return{id:e,name:k[t]}}),O=w.map(function(e,t){return{id:e,name:x[t]}}),S=(g||[]).map(function(e){return e.countryId}),j=m.map(function(e){return e.id}),this.selectForm=L({},b,{name:this.isCopy?void 0:i,abbr:this.isCopy?void 0:s,id:this.isCopy?void 0:o,lsId:this.isCopy?void 0:l,usages:f?f.split(","):[],categories:v?v.split(","):[],departureId:I,destinationId:O,countryToIds:S,escs:j}),this.setTerms(y),this.getCustTypeList(),e.next=36;break;case 32:return e.prev=32,e.t0=e["catch"](13),this.formLoading=!1,e.abrupt("return",e.t0);case 36:e.next=40;break;case 38:return this.formLoading=!1,e.abrupt("return");case 40:this.formLoading=!1;case 41:case"end":return e.stop()}},e,this,[[13,32]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onDispatch",value:function(){this.selectForm.escs=[],this.selectForm.kscId=void 0,"1"!==this.selectForm.dispatch&&(this.selectForm.isCreate=0)}},{key:"setTerms",value:function(e){this.$refs.markdownEditor.setHtml(e)}},{key:"filterMethod",value:function(e,t){var r=t.name||"";return r.indexOf(e)>-1}},{key:"handlePort",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.tt=t,"qi"!==this.tt||this.selectForm.countryId){e.next=4;break}return this.$message.error("请选择起运国"),e.abrupt("return");case 4:if("mu"!==this.tt||Array.isArray(this.selectForm.countryToIds)&&!(this.selectForm.countryToIds.length<=0)){e.next=7;break}return this.$message.error("请选择目的国"),e.abrupt("return");case 7:return this.dialogPort=!0,"qi"===t?(this.title="起运港",this.portOption=Object(b["a"])(this.selectForm.departureId)):(this.title="目的港",this.portOption=Object(b["a"])(this.selectForm.destinationId)),e.next=11,this.getPortData(1);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"cancelPort",value:function(){this.dialogPort=!1,this.portName="",this.portOption=[],this.portList=[]}},{key:"savePort",value:function(){this.dialogPort=!1,"qi"===this.tt?this.selectForm.departureId=Object(b["a"])(this.portOption):this.selectForm.destinationId=Object(b["a"])(this.portOption)}},{key:"handleSizeChange",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPortData();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCurrentChange",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getPortData();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleRemove",value:function(e,t){var r=this;this.portOption.splice(e,1);var a=this.portList.findIndex(function(e){return e.id===t.id});-1!==a&&this.$nextTick(function(){r.$refs.theTable.toggleRowSelection(r.portList[a])})}},{key:"handleSelect",value:function(e,t){var r=this.portOption.findIndex(function(e){return e.id===t.id});-1===r?this.portOption.push({id:t.id,name:t.name,code:t.code}):this.portOption.splice(r,1)}},{key:"handleSelectAll",value:function(e){var t=this;e.length?this.portList.forEach(function(e){t.portOption.every(function(t){return t.id!==e.id})&&t.portOption.push({id:e.id,name:e.name})}):this.portOption=this.portOption.filter(function(e){var r=t.portList.some(function(t){return t.id===e.id});return!r})}},{key:"handleSelectionChange",value:function(e){}},{key:"handleExpress",value:function(){this.expressOption=this.selectForm.escs,this.dialogExpress=!0,this.dialogLoading=!0,this.getEscList()}},{key:"cancelExpress",value:function(){this.dialogExpress=!1,this.expressOption=[]}},{key:"saveExpress",value:function(){this.dialogExpress=!1,this.selectForm.escs=this.expressOption}},{key:"onChargeType",value:function(){this.selectForm.pVolume=void 0,this.selectForm.pWeight=void 0,this.selectForm.pHscode=void 0,this.selectForm.remind=!1,this.selectForm.escs=[],this.selectForm.kscId=void 0}},{key:"onSubtype",value:function(e){this.selectForm.departureId=[],this.selectForm.destinationId=[],this.selectForm.orgTag=void 0,this.selectForm.coverTank="1"===e||"2"===e?"0":void 0,this.portList=[],this.selectForm.containerType=void 0,this.selectForm.custId=void 0,this.selectForm.dispatch=void 0,this.selectForm.escs=[],this.selectForm.kscId=void 0,this.selectForm.priceType="2",this.supplierList=[]}},{key:"handleStates",value:function(){this.isItemDialogShow=!0}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"getCountryData",value:function(){var e=this;this.selectLoading=!0,Object(h["g"])().then(function(t){var r=t.data||{},a=r.result||[];e.countryList=a.map(function(e){var t=e.name,r=e.id,a=e.alias;return{name:t,alias:a,id:r,label:t+"-"+a}}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCurrencyData",value:function(){var e=this,t={page:1,size:9999};Object(h["i"])(t).then(function(t){var r=t.data||{};e.currencyList=r.result||[]}).catch(function(e){return e})}},{key:"getCustTypeList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:9999,cas:"S",typeId:"05",subtypeId:this.selectForm.subtypeId};Object(h["j"])(t).then(function(t){var r=t.data||{},a=r.result||[];e.supplierList=JSON.parse(JSON.stringify(a).replace(/custName/g,"name").replace(/custId/g,"id")),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getPortData",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t&&(this.page=t),r={page:this.page,size:this.size,type:"3"===this.selectForm.subtypeId?"0":this.selectForm.subtypeId,countryId:"qi"===this.tt?this.selectForm.countryId:this.selectForm.countryToIds.join(","),name:this.portName},this.dialogLoading=!0,e.prev=3,e.next=6,Object(h["s"])(r);case 6:a=e.sent,i=a.data||{},n=i.result||[],this.portList=n.map(function(e){return{id:e.id,name:e.name,code:e.code}}),this.total=i.total,this.portList.forEach(function(e){var t=s.portOption.some(function(t){return t.id===e.id});t&&s.$nextTick(function(){s.$refs.theTable.toggleRowSelection(e)})}),this.dialogLoading=!1,e.next=20;break;case 15:return e.prev=15,e.t0=e["catch"](3),this.dialogLoading=!1,this.formLoading=!1,e.abrupt("return",e.t0);case 20:case"end":return e.stop()}},e,this,[[3,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubtypeList",value:function(){var e=this,t={typeId:"05"};Object(h["w"])(t).then(function(t){var r=t.data||[];e.subtypeList=r.filter(function(e){return"3"!==e.id})}).catch(function(e){return e})}},{key:"getWordsList",value:function(){var e=this,t={type:"server_terms"};Object(h["y"])(t).then(function(t){var r=t.data||[];e.wordsList=r}).catch(function(e){return e})}},{key:"getProductTypeList",value:function(){var e=this;Object(h["u"])().then(function(t){var r=t.data||[];e.productList=r}).catch(function(e){return e})}},{key:"getCostgroupList",value:function(){var e=this,t={page:1,size:99999,type:"1"};Object(h["f"])(t).then(function(t){var r=t.data||{};e.invoiceList=r.result||[]}).catch(function(e){return e})}},{key:"getEscList",value:function(){var e=this,t={model:{custId:this.custId},page:1,size:99999};Object(h["l"])(t).then(function(t){var r=t.data||{},a=r.result||[];e.expressList=a.map(function(e){return e.id=e.id.toString(),e}),e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,e.formLoading=!1,t})}},{key:"getCscList",value:function(){var e=this,t={page:1,size:99999};Object(h["h"])(t).then(function(t){var r=t.data||{},a=r.result||[];e.customsList=a.filter(function(e){return"1"===e.status}),e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,e.formLoading=!1,t})}},{key:"getKscList",value:function(){var e=this,t={page:1,size:99999};Object(h["o"])(t).then(function(t){var r=t.data||{},a=r.result||[];e.cardList=a.filter(function(e){return"1"===e.status}),e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,e.formLoading=!1,t})}},{key:"getExamineList",value:function(){var e=this,t={page:1,size:9999};Object(h["m"])(t).then(function(t){var r=t.data||{};e.examineList=r.result||[]}).catch(function(e){return e})}},{key:"getRegionData",value:function(){var e=this;Object(h["k"])().then(function(t){var r=t.data||[];e.addrList=r}).catch(function(e){return e})}},{key:"getOrgList",value:function(){var e=this,t=[this.selectForm.countryId].concat(Object(b["a"])(this.selectForm.countryToIds)),r=Array.from(new Set(t)),a={type:0,serviceCountry:r.join(","),page:1,size:99999};this.orgList=[],this.selectLoading=!0,Object(h["r"])(a).then(function(t){if(t.success){var r=t.data||{};e.orgList=r.result||[]}e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"resetForm",value:function(){this.selectForm=w(),this.setTerms(""),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.selectForm;this.$nextTick(function(){e.clearValidate()})}},{key:"handleBack",value:function(){this.resetForm(),this.$emit("back")}},{key:"handleSave",value:function(){var e=this,t=this.$refs.markdownEditor.getHtml(),r=this.$refs.selectForm;r.validate(function(r){if(!r)return!1;var a=e.selectForm,i=(a.deliveryId,a.departureId),s=a.destinationId,o=a.escs,l=a.usages,c=a.categories,u=a.countryToIds,d=a.orgTag,p=Object(n["a"])(a,["deliveryId","departureId","destinationId","escs","usages","categories","countryToIds","orgTag"]);if(Array.isArray(i)&&i.length<=0)e.$message.error("请选择起运港");else if(Array.isArray(s)&&"3"!==e.selectForm.subtypeId&&s.length<=0)e.$message.error("请选择目的港");else if("FT"!==e.selectForm.umLength||"LBS"===e.selectForm.umWeight&&"CUFT"===e.selectForm.umVolume)if("FT"===e.selectForm.umLength||"LBS"!==e.selectForm.umWeight&&"CUFT"!==e.selectForm.umVolume)if("LBS"!==e.selectForm.umWeight||"CUFT"===e.selectForm.umVolume)if("1"===e.selectForm.dispatch&&Array.isArray(o)&&o.length<=0)e.$message.error("请选择打单快递服务");else{e.formLoading=!0;var m=L({},p,{orgTag:"1"===e.selectForm.subtypeId&&u.some(function(e){return"US"===e})?d:void 0});if(m.terms=t,e.invoiceList.map(function(e){e.id===m.chargeGroupId&&(m.chargeGroupName=e.name)}),e.productList.map(function(e){e.id===m.productId&&(m.productName=e.name)}),Array.isArray(i)){var g=i.map(function(e){return(e.code?e.code+"-":"")+e.name}),f=i.map(function(e){return e.id});m.departureId=f.join(","),m.departureName=g.join(",")}if(Array.isArray(s)){var v=s.map(function(e){return(e.code?e.code+"-":"")+e.name}),y=s.map(function(e){return e.id});m.destinationId=y.join(","),m.destinationName=v.join(",")}if(Array.isArray(o)){var b=[];o.map(function(t){var r=e.expressList.find(function(e){return e.id===t})||{};b.push({id:r.id,name:r.name})}),m.escs=b.filter(function(e){return e.id&&e.name})}Array.isArray(l)&&(m.usages=l.join(",")),Array.isArray(c)&&(m.categories=c.join(",")),e.customsList.map(function(e){e.id===m.cscId&&(m.cscName=e.name)}),e.cardList.map(function(e){e.id===m.kscId&&(m.kscName=e.name)}),e.subtypeList.map(function(e){e.id===m.subtypeId&&(m.subtypeName=e.name)}),e.examineList.map(function(e){e.id===m.examineId&&(m.examineName=e.name)}),m.targets=[],e.countryList.forEach(function(e){e.id===m.countryId&&(m.countryName=e.name),u.forEach(function(t){t===e.id&&m.targets.push({countryId:e.id,countryName:e.name})})}),e.supplierList.find(function(e){e.id===m.custId&&(m.custName=e.name)}),e.currencyList.find(function(e){e.id===m.currencyId&&(m.currencyName=e.name)}),Object(h["A"])(m).then(function(t){e.$message({type:"success",message:"保存成功"}),e.resetForm(),e.$emit("confirm"),e.formLoading=!1}).catch(function(t){return e.formLoading=!1,t})}else e.$message.error("长度单位，重量单位，体积单位必须一致");else e.$message.error("长度单位，重量单位，体积单位必须一致");else e.$message.error("长度单位，重量单位，体积单位必须一致")})}},{key:"custId",get:function(){var e=g["a"].info||{},t=e.custId;return t}},{key:"dispatchList",get:function(){var e=this.selectForm,t=e.subtypeId,r=e.containerType,a=e.purposeType;return 2===a?[{label:"到仓",value:"4"}]:"1"!==t&&"2"!==t||"1"!==r?[{label:"卡派",value:"0"},{label:"快递",value:"1"},{label:"自提",value:"2"}]:[{label:"整柜直送",value:"3"},{label:"自提",value:"2"}]}}]),t}(m["e"]);I=p["a"]([Object(m["a"])({name:"addEditForm",components:{MarkdownEditor:x["a"]},props:{isEdit:{type:Boolean,default:!1},isCopy:{type:Boolean,default:!1},typeList:{type:Array,default:function(){return[]}}}})],I);var O=I,S=O,j=(r("4d2d"),r("2877")),C=Object(j["a"])(S,v,y,!1,null,"5daf284c",null),T=C.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n        新增\n      ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"服务类型",size:"small",clearable:"",filterable:""},on:{change:function(t){return e.getTableData(1)}},model:{value:e.typeId,callback:function(t){e.typeId=t},expression:"typeId"}},e._l(e.subTypeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"400px",border:""}},[r("el-table-column",{attrs:{label:"服务组合名称",prop:"name"}}),r("el-table-column",{attrs:{label:"关联服务名称",formatter:e.formatName}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("\n          编辑\n        ")]),e._v("\n         \n        "),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:"关联服务名称",visible:e.isCodeShow,"close-on-click-modal":!1,"append-to-body":"",width:"960px"},on:{"update:visible":function(t){e.isCodeShow=t},closed:e.cancelDialog}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isCodeLoading,expression:"isCodeLoading"}]},[r("el-transfer",{staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联服务名称","已关联服务名称"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.typeList},model:{value:e.selectForm.svcs,callback:function(t){e.$set(e.selectForm,"svcs",t)},expression:"selectForm.svcs"}}),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.cancelDialog}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.isCodeShow=!1}}},[e._v("\n          确 定\n        ")])],1)],1)]),r("el-dialog",{attrs:{title:e.isEdit?"编辑服务组合":"新增服务组合",visible:e.isEditDialog,"close-on-click-modal":!1,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.isEditDialog=t},closed:e.cancel}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"selectForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,"label-width":"120px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"服务组合名称",prop:"name"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{maxlength:20,placeholder:"请输入"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),r("el-form-item",{attrs:{label:"服务类型",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:""},on:{change:e.onType},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.subTypeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"选择服务名称",prop:"svcs"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.svcs.length+")",size:"small",disabled:""},model:{value:e.sc,callback:function(t){e.sc=t},expression:"sc"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.onServiceName},slot:"append"})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n        确 定\n      ")])],1)],1)],1)},E=[],$=(r("c5f6"),r("31d4"));function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var P=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.isEditDialog=!1,e.formLoading=!1,e.isEdit=!1,e.typeId="",e.selectForm={name:void 0,subtypeId:void 0,svcs:[]},e.formRules={subtypeId:[{required:!0,message:"请选择服务类型",trigger:"change"}],name:[{required:!0,message:"服务组合名称不能为空",trigger:"blur"}],svcs:[{required:!0,message:"请选择服务名称",trigger:"change"}]},e.sc="",e.tableData=[],e.isCodeShow=!1,e.isCodeLoading=!1,e.page=1,e.size=10,e.total=0,e.typeList=[],e.subTypeList=[],e.typeOption=[],e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"setData",value:function(){this.getSubtypeList(),this.getTableData(1)}},{key:"getSubtypeList",value:function(){var e=this,t={typeId:"05"};Object($["o"])(t).then(function(t){e.subTypeList=t.data||[]}).catch(function(e){return e})}},{key:"getPrivatelineList",value:function(){var e=this;this.isCodeLoading=!0;var t={subtypeId:this.selectForm.subtypeId,status:"1"};Object($["k"])(t).then(function(t){var r=t.data||[];e.typeList=r,e.typeOption=JSON.parse(JSON.stringify(r)),e.isCodeLoading=!1}).catch(function(t){return e.isCodeLoading=!1,t})}},{key:"formatName",value:function(e){var t=e.svcs.map(function(e){return e.name});return t.join(" , ")}},{key:"filterMethod",value:function(e,t){var r=t.name||"";return r.indexOf(e)>-1}},{key:"handleAdd",value:function(){this.isEditDialog=!0,this.isEdit=!1}},{key:"handleEdit",value:function(e){this.isEditDialog=!0,this.isEdit=!0,this.selectForm=D({},e),this.selectForm.svcs=e.svcs.map(function(e){return e.id})}},{key:"handleDelete",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,Object($["c"])(r).then(function(e){t.loading=!1,t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"onType",value:function(){this.typeList=[],this.selectForm.svcs=[]}},{key:"onServiceName",value:function(){this.isCodeShow=!0,this.getPrivatelineList()}},{key:"cancelDialog",value:function(){this.isCodeShow=!1,this.typeList=[]}},{key:"cancel",value:function(){this.isEditDialog=!1,this.selectForm={name:void 0,svcs:[]};var e=this.$refs.selectForm;this.$nextTick(function(){e.clearValidate()})}},{key:"save",value:function(){var e=this,t=this.$refs.selectForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var r={typeId:"05",typeName:"专线",subtypeId:e.selectForm.subtypeId,id:void 0,name:e.selectForm.name,svcs:[]};e.subTypeList.map(function(t){e.selectForm.subtypeId===t.id&&(r.subtypeName=t.name)});var a=e.selectForm.svcs.map(function(t){var r=e.typeOption.find(function(e){return t===e.id})||{},a=r.id,i=r.name;return{name:i,id:a}});r.svcs=a.filter(function(e){return e.name&&e.id}),r.id=e.selectForm.id,Object($["z"])(r).then(function(t){e.$message({type:"success",message:"保存成功"}),e.formLoading=!1,e.getTableData(),e.cancel()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"setTable",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.table;t.doLayout()})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"getTableData",value:function(e){var t=this;this.loading=!0,this.tableData=[],e&&(this.page=e);var r={typeId:"05",subtypeId:this.typeId,page:this.page,size:this.size};Object($["q"])(r).then(function(e){var r=e.data||{};t.tableData=r.result||[],t.total=r.total,t.setTable(),t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"custId",get:function(){var e=g["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=g["a"].info||{},t=e.custName;return t}}]),t}(m["e"]);P=p["a"]([Object(m["a"])({name:"",components:{},props:{}})],P);var N=P,A=N,q=(r("6a9e"),Object(j["a"])(A,_,E,!1,null,"923d0a9c",null)),V=q.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container",staticStyle:{width:"100%"}},[r("head-info",{attrs:{info:"",title:"服务组"}}),r("div",{staticClass:"app-panel"},[r("el-row",[r("el-col",{attrs:{span:2}},[r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n          新增\n        ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:22}},[r("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("\n          返回\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.loadData}},[e._v("\n          刷新\n        ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{prop:"name",label:"服务组名称",width:"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"countryName",label:"目的国",width:"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"lscName",label:"服务","min-width":"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"开关",width:"80","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{staticClass:"switchStyle",attrs:{value:t.row.status,"active-value":"1","inactive-value":"0"},on:{input:function(r){return e.onStatus(t.row,r)}}})]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("\n            编辑\n          ")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("\n            删除\n          ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("group-form",{ref:"groupForm",attrs:{"is-edit":e.isEdit},on:{"save-success":e.loadData}})],1)},B=[],M=r("b32d");function G(e){var t={url:"/cfg/lsc/getLscGroupList",method:"post",data:e};return Object(M["a"])(t)}function W(e){var t={url:"/cfg/lsc/saveLscGroup",method:"post",data:e};return Object(M["a"])(t)}function H(e){var t={url:"/cfg/lsc/getLscGroupItems",method:"get",params:e};return Object(M["a"])(t)}function J(e){var t={url:"/cfg/lsc/setLscGroupStatus",method:"post",params:e};return Object(M["a"])(t)}function U(e){var t={url:"/cfg/lsc/deleteLscGroup",method:"delete",params:e};return Object(M["a"])(t)}function K(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"GET",params:e};return Object(M["a"])(t)}function Q(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(M["a"])(e)}function X(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(M["a"])(t)}var Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.isEdit?"编辑组":"新增组",visible:e.visible,"close-on-click-modal":!1,width:"500px"},on:{close:e.close}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-form",{ref:"form",staticStyle:{"padding-right":"30px"},attrs:{model:e.form,rules:e.rules,"label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{label:"服务组名称",prop:"name"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:"请输入"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"国家",prop:"countryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:"","filter-method":e.filterCountry,size:"small",loading:e.selectLoading},on:{focus:e.getCountryList,change:e.countryChange},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"服务"}},[r("el-input",{attrs:{size:"small",placeholder:"请选择",disabled:""},model:{value:e.form.serviceNames,callback:function(t){e.$set(e.form,"serviceNames",t)},expression:"form.serviceNames"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.showService},slot:"append"})],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{disabled:e.loading,size:"small"},on:{click:e.close}},[e._v("\n      取 消\n    ")]),r("el-button",{attrs:{disabled:e.loading,type:"primary",size:"small"},on:{click:e.submit}},[e._v("\n      保 存\n    ")])],1),r("el-dialog",{attrs:{title:"关联服务",visible:e.serviceVisible,"close-on-click-modal":!1,"append-to-body":"",width:"960px"},on:{"update:visible":function(t){e.serviceVisible=t},close:e.closeServiceDialog}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.serviceLoading,expression:"serviceLoading"}]},[r("div",{staticStyle:{margin:"0 50px 10px"}},[r("span",[e._v("业务类型：")]),r("el-radio-group",{attrs:{size:"small"},on:{change:function(t){return e.typeChange("1")}},model:{value:e.form.subtypeId,callback:function(t){e.$set(e.form,"subtypeId",t)},expression:"form.subtypeId"}},e._l(e.subtypeList,function(t){return r("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1),r("span",{staticStyle:{"padding-left":"20px"}},[e._v("所属产品：")]),r("el-select",{staticStyle:{width:"180px"},attrs:{loading:e.selectLoading,placeholder:"请选择",size:"small",clearable:"",filterable:""},on:{focus:e.getProductType,change:function(t){return e.typeChange()}},model:{value:e.form.productId,callback:function(t){e.$set(e.form,"productId",t)},expression:"form.productId"}},e._l(e.productList,function(e){return r("el-option",{key:e.id,attrs:{label:e.productName,value:e.id}})}),1),r("span",{staticStyle:{"padding-left":"20px"}},[e._v("目的港：")]),r("el-select",{staticStyle:{width:"180px"},attrs:{disabled:!e.form.subtypeId||!e.form.countryId,loading:e.selectLoading,placeholder:"请选择",size:"small",clearable:"",filterable:""},on:{focus:e.getEndPortData,change:function(t){return e.typeChange()}},model:{value:e.form.destinationId,callback:function(t){e.$set(e.form,"destinationId",t)},expression:"form.destinationId"}},e._l(e.endPortList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-transfer",{staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联服务","已关联服务"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.serviceList},model:{value:e.serviceOption,callback:function(t){e.serviceOption=t},expression:"serviceOption"}}),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.closeServiceDialog}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.submitService}},[e._v("\n          确 定\n        ")])],1)],1)])],1)},Z=[];r("6762"),r("2fdb");function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var re=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.visible=!1,e.serviceVisible=!1,e.loading=!1,e.selectLoading=!1,e.serviceLoading=!1,e.productList=[],e.endPortList=[],e.countryList=[],e.allCountryList=[],e.serviceList=[],e.subtypeList=[],e.serviceItem=[],e.serviceOption=[],e.serviceType="",e.serviceCountry="",e.serviceProduct="",e.serviceDestination="",e.form={name:"",status:"1",productId:"",productName:"",destinationId:"",destinationName:"",countryId:"",countryName:"",serviceIds:[],serviceNames:"",subtypeId:"",subtypeName:""},e.editRow={},e.rules={name:{required:!0,message:"请输入服务组名称",trigger:"blur"},countryId:{required:!0,message:"请选择目的国",trigger:"change"},serviceIds:{required:!0,message:"请选择关联服务",trigger:"blur"}},e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"filterCountry",value:function(e){this.countryList=e?this.allCountryList.filter(function(t){var r="".concat(t.name,"-").concat(t.alias);return-1!==r.toUpperCase().indexOf(e.toUpperCase())}):this.allCountryList}},{key:"submit",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(t){if(e.form.serviceIds.length<=0)return void e.$message.error("请选择关联服务");var r=e.countryList.find(function(t){return t.id===e.form.countryId})||{},a=e.subtypeList.find(function(t){return t.id===e.form.subtypeId})||{},i=e.productList.find(function(t){return t.id===e.form.productId})||{},s=e.endPortList.find(function(t){return t.id===e.form.destinationId})||{},o=e.form,l=o.serviceIds,c=(o.serviceNames,o.status),u=Object(n["a"])(o,["serviceIds","serviceNames","status"]),d=te({},u,{status:c||"1",countryName:r.name||"",subtypeName:a.name||"",productName:i.productName||"",destinationName:s.name||"",lscIds:l});e.loading=!0,W(d).then(function(){e.loading=!1,e.$message.success("保存成功"),e.close(),e.$emit("save-success")}).catch(function(){e.loading=!1})}})}},{key:"countryChange",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.form.serviceIds=[],this.form.serviceNames="",this.form.destinationId="",this.serviceList=[],this.serviceOption=[];case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"typeChange",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("1"===t&&(this.form.destinationId=void 0,this.endPortList=[]),this.serviceList=[],this.serviceOption=[],this.form.id&&this.serviceType===this.form.subtypeId&&this.serviceCountry===this.form.countryId&&this.serviceProduct===this.form.productId&&this.serviceDestination===this.form.destinationId&&(this.serviceOption=this.serviceItem.map(function(e){return e.id})),!(this.form.subtypeId&&this.form.productId&&this.form.destinationId)){e.next=7;break}return e.next=7,this.getPrivatelineList();case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"showService",value:function(){this.form.countryId?(this.serviceVisible=!0,this.serviceOption=this.form.serviceIds,this.getSubtypeList()):this.$message.error("请选择国家")}},{key:"getPrivatelineList",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={subtypeId:this.form.subtypeId,countryId:this.form.countryId,destinationId:this.form.destinationId,productId:this.form.productId},this.serviceLoading=!0,e.next=4,X(t).then(function(e){r.serviceLoading=!1;var t=e.data||[];r.serviceList=t.filter(function(e){return e&&"1"===e.status}).map(function(e){return te({},e,{disabled:"1"===e.lineCreate&&!r.serviceOption.includes(e.id)})})}).catch(function(){r.serviceLoading=!1,r.serviceList=[]});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSubtypeList",value:function(){var e=this;this.serviceLoading=!0;var t={typeId:"05"};K(t).then(function(){var t=Object(k["a"])(regeneratorRuntime.mark(function t(r){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.serviceLoading=!1,a=r.data||[],e.subtypeList=a.filter(function(e){return"3"!==e.id});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return e.serviceLoading=!1,t})}},{key:"getCountryList",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Q().then(function(e){t.selectLoading=!1;var r=e.data||{};t.countryList=r.result||[],t.allCountryList=r.result||[]}).catch(function(e){return t.selectLoading=!1,t.countryList=[],e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getProductType",value:function(){var e=this;this.selectLoading=!0,Object(h["u"])().then(function(t){var r=t.data||[];e.productList=r.map(function(e){return e.id=""+e.id,e}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getEndPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.form.countryId,type:"3"===this.form.subtypeId?"":this.form.subtypeId};Object(h["s"])(t).then(function(t){var r=t.data||{};e.endPortList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"resetForm",value:function(){this.form={name:"",status:"1",countryId:"",countryName:"",productId:"",productName:"",destinationId:"",destinationName:"",serviceIds:[],serviceNames:"",subtypeId:"",subtypeName:""};var e=this.$refs.form;e.resetFields()}},{key:"filterMethod",value:function(e,t){var r=t.name||"";return r.indexOf(e)>-1}},{key:"close",value:function(){this.serviceType="",this.serviceCountry="",this.serviceOption=[],this.serviceItem=[],this.serviceList=[],this.resetForm(),this.visible=!1}},{key:"closeServiceDialog",value:function(){this.serviceVisible=!1,this.serviceOption=[]}},{key:"submitService",value:function(){var e=this;this.form.serviceIds=this.serviceOption,this.form.serviceNames=this.form.serviceIds.map(function(t){var r=e.serviceList.find(function(e){return t===e.id})||{};return r.name||""}).join(","),this.serviceVisible=!1}},{key:"getLscGroupItems",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,H({id:this.form.id}).then(function(e){var r=e.data||[];t.serviceItem=JSON.parse(JSON.stringify(r)),t.serviceOption=t.serviceItem.map(function(e){return e.id}),t.form.serviceIds=r.map(function(e){return e.id}),t.form.serviceNames=r.map(function(e){return e.name}).join(",")}).catch(function(){t.form.serviceIds=[],t.form.serviceNames=""});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"show",value:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.visible=!0,!t){e.next=20;break}return t.lscId,t.lscName,r=Object(n["a"])(t,["lscId","lscName"]),this.form=te({},r),this.serviceType=t.subtypeId,this.serviceCountry=t.countryId,this.serviceProduct=t.productId,this.serviceDestination=t.destinationId,this.loading=!0,e.next=11,this.getLscGroupItems();case 11:if(!(this.form.subtypeId&&this.form.productId&&this.form.destinationId)){e.next=14;break}return e.next=14,this.getPrivatelineList();case 14:return e.next=16,this.getCountryList();case 16:this.getSubtypeList(),this.getProductType(),this.getEndPortData(),this.loading=!1;case 20:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}]),t}(m["e"]);re=p["a"]([Object(m["a"])({name:"",props:{isEdit:{type:Boolean,default:!1}}})],re);var ae=re,ie=ae,ne=(r("ccd8"),Object(j["a"])(ie,Y,Z,!1,null,"a5445570",null)),se=ne.exports,oe=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.loading=!1,e.isEdit=!1,e.tableData=[],e.pagination={page:1,size:10,total:0},e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"goBack",value:function(){this.$emit("back")}},{key:"onStatus",value:function(e,t){var r=this;this.$confirm("请确认是否".concat("0"===t?"关闭":"开启","该条数据?"),"温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){r.loading=!0;var a={id:e.id,status:t};J(a).then(function(){r.loading=!1,r.$message.success("操作成功"),r.loadData()}).catch(function(){r.loading=!1,r.loadData()})}).catch(function(){r.loadData()})}},{key:"handleAdd",value:function(){this.isEdit=!1;var e=this.$refs.groupForm;e.show()}},{key:"handleEdit",value:function(e){this.isEdit=!0;var t=this.$refs.groupForm;t.show(e)}},{key:"handleDelete",value:function(e){var t=this;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var r={id:e.id};t.loading=!0,U(r).then(function(){t.loading=!1,t.$message.success("删除成功"),t.loadData(1)}).catch(function(){t.loading=!1})}).catch(function(e){return e})}},{key:"handleSizeChange",value:function(e){this.pagination.size=e,this.loadData()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=e,this.loadData()}},{key:"loadData",value:function(e){var t=this;1===e&&(this.pagination.page=1);var r={model:{},page:this.pagination.page,size:this.pagination.size};this.loading=!0,G(r).then(function(e){t.loading=!1;var r=e.data||{};t.tableData=r.result||[],t.pagination.total=r.total}).catch(function(){t.loading=!1,t.tableData=[],t.pagination.total=0})}},{key:"created",value:function(){this.loadData()}}]),t}(m["e"]);oe=p["a"]([Object(m["a"])({name:"service-line-group",components:{GroupForm:se}})],oe);var le=oe,ce=le,ue=(r("bd18"),Object(j["a"])(ce,R,B,!1,null,"d38ef784",null)),de=ue.exports;function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function ge(){return{loadType:void 0,yType:void 0,xType:void 0,serviceSubtype:{key:void 0,value:void 0},service:{key:void 0,value:void 0},keyValues:[{country:{key:void 0,value:void 0},keyValue:{key:void 0,value:void 0}}],ranges:[{type:void 0,upperLower:{key:void 0,value:void 0},keyValue:{key:void 0,value:void 0}}],countryId:void 0,sections:[{lower:void 0,upper:void 0}],sections1:[{lower:void 0,upper:void 0}],sections2:[{lower:void 0,upper:void 0}],xy:""}}var he=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.text="(取值范围：>=起始值， <结束值)",e.searchForm={purpose:"",productId:void 0,agentId:void 0,countryId:void 0,orgTag:void 0,dispatch:void 0,containerType:void 0,coverTank:void 0,countryFromId:void 0,departureId:void 0,destinationId:void 0,category:void 0,subtypeId:void 0,status:void 0},e.tableData=[],e.productList=[],e.subtypeList=[],e.typeOptions=[{label:"拼箱",value:"0"},{label:"整柜",value:"1"}],e.propertyOptions=[{label:"普货",value:"0"},{label:"纯电",value:"1"},{label:"带电",value:"2"},{label:"带磁",value:"3"},{label:"危险",value:"4"}],e.orgList=[{name:"美森",id:"1"},{name:"以星",id:"2"},{name:"快线",id:"3"},{name:"其他",id:"4"}],e.total=0,e.page=1,e.size=10,e.loading=!1,e.addEditForm="index",e.title="",e.currentServiceId="",e.currentSubtypeId="",e.isEdit=!1,e.isCopy=!1,e.dialogAgent=!1,e.dialogVisible=!1,e.dialogLoading=!1,e.dialogForm=ge(),e.copyForm={},e.isType="",e.addressList=[],e.options=[],e.list=[],e.countryList=[],e.selectAgents=[],e.agentList=[],e.agentsList=[],e.startPortList=[],e.endPortList=[],e.isGroupDialog=!1,e.selectLoading=!1,e.dispatchList=["卡派","快递","自提","整柜直送","到仓"],e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"getTableData",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var r=me({page:this.page,size:this.size},this.searchForm);Object(h["q"])(r).then(function(e){var r=e.data||{};t.tableData=r.result||[],t.total=r.total,t.loading=!1}).catch(function(e){return t.loading=!1,[null,e]})}},{key:"setServiceGroup",value:function(){this.addEditForm="group"}},{key:"formatTargetCountrys",value:function(e){var t=(e||[]).map(function(e){return e.countryName}).join(",");return t}},{key:"getProductTypeList",value:function(){var e=this;Object(h["u"])().then(function(t){var r=t.data||[];e.productList=r}).catch(function(e){return e})}},{key:"getSubtypeList",value:function(){var e=this;this.selectLoading=!0;var t={typeId:"05"};Object(h["w"])(t).then(function(t){var r=t.data||[];e.subtypeList=r.filter(function(e){return"3"!==e.id}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onSubtype",value:function(){this.searchForm.departureId=void 0,this.searchForm.destinationId=void 0,this.searchForm.dispatch=void 0,this.searchForm.containerType=void 0,this.searchForm.coverTank=void 0,this.startPortList=[],this.endPortList=[]}},{key:"getStartPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.searchForm.countryFromId,type:"3"===this.searchForm.subtypeId?"":this.searchForm.subtypeId};Object(h["s"])(t).then(function(t){var r=t.data||{};e.startPortList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getEndPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.searchForm.countryId,type:"3"===this.searchForm.subtypeId?"":this.searchForm.subtypeId};Object(h["s"])(t).then(function(t){var r=t.data||{};e.endPortList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCustTypeList",value:function(e){var t=this,r={page:1,size:9999,cas:"A",typeId:"05",subtypeId:e};return Object(h["j"])(r).then(function(e){var r=e.data||{},a=r.result||[];t.agentList=JSON.parse(JSON.stringify(a).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e})}},{key:"getAgentList",value:function(){var e=this,t={page:1,size:9999,parentId:this.custId};Object(f["d"])(t).then(function(t){var r=t.data||{};e.agentsList=r.result||[]}).catch(function(e){return e})}},{key:"handleAgent",value:function(e){var t=this;this.title=e.name,this.dialogAgent=!0,this.currentServiceId=e.id,this.agentList=[],this.dialogLoading=!0;var r={lscId:e.id};Promise.all([this.getAgentById(r),this.getCustTypeList((e||{}).subtypeId)]).then(function(e){t.dialogLoading=!1}).catch(function(e){return t.dialogLoading=!1,e})}},{key:"getAgentById",value:function(e){var t=this;return Object(h["c"])(e).then(function(e){var r=e.data||[];t.selectAgents=r.map(function(e){return e.id})}).catch(function(e){return e})}},{key:"filterMethod",value:function(e,t){var r=t.name||"";return r.indexOf(e)>-1}},{key:"closeAgent",value:function(){this.dialogAgent=!1,this.currentServiceId="";var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"confirmAgent",value:function(e){var t=this;this.dialogLoading=!0;var r=this.selectAgents.map(function(e){var r=t.agentList.find(function(t){return t.id===e})||{},a=r.name;return{id:e,name:a}}),a={agents:[],id:this.currentServiceId};a.agents=r.filter(function(e){return e.name&&e.id}),Object(h["z"])(a).then(function(e){t.$message({type:"success",message:"保存成功"}),t.dialogLoading=!1,t.closeAgent(),t.getTableData()}).catch(function(e){return t.dialogLoading=!1,e})}},{key:"onArea",value:function(e){var t=e.subtypeId,r=e.subtypeName,a=e.id,i=e.name,n=e.purposeType;this.addressList=1===n?[{name:"国家",id:"0"},{name:"国内区域",id:"5"},{name:"城市区域",id:"100"},{name:"国家区域",id:"102"},{name:"州省",id:"1"}]:[{name:"国家",id:"0"},{name:"国内区域",id:"5"},{name:"城市区域",id:"100"},{name:"仓库区域",id:"101"},{name:"国家区域",id:"102"},{name:"州省",id:"1"},{name:"仓库代码",id:"7"}],this.currentServiceId=a,this.currentSubtypeId=t,this.title="地址类型",this.dialogForm.xy="Y",this.dialogForm.service={key:a,value:i},this.dialogForm.serviceSubtype={key:t,value:r},this.isType="1",this.dialogVisible=!0,this.getPriceConfig()}},{key:"onCharge",value:function(e){var t=e.subtypeId,r=e.subtypeName,a=e.containerType,i=e.id,n=e.name,s=e.priceType;switch(this.isType="2",t){case"0":this.title="重量区间",this.dialogForm.loadType="0",this.dialogForm.xType="0";break;case"1":"0"===a?"2"===s?(this.title="重量区间",this.dialogForm.loadType="3",this.dialogForm.xType="0"):(this.title="体积区间",this.dialogForm.loadType="3",this.dialogForm.xType="1"):"1"===a&&(this.title="柜型",this.isType="3",this.dialogForm.loadType="2",this.dialogForm.xType="3",this.getContainerList());break;case"2":"0"===a?"2"===s?(this.title="重量区间",this.dialogForm.loadType="3",this.dialogForm.xType="0"):(this.title="体积区间",this.dialogForm.loadType="3",this.dialogForm.xType="1"):"1"===a&&(this.title="柜型",this.isType="3",this.dialogForm.loadType="2",this.dialogForm.xType="3",this.getContainerList());break;case"3":this.title="";break;case"4":this.title="重量区间",this.isType="4",this.dialogForm.loadType="5";break;default:break}this.currentServiceId=i,this.currentSubtypeId=t,this.dialogForm.xy="X",this.dialogForm.service={key:i,value:n},this.dialogForm.serviceSubtype={key:t,value:r},this.dialogVisible=!0,this.getPriceConfig()}},{key:"getPriceConfig",value:function(){var e=this;this.dialogLoading=!0;var t={serviceId:this.currentServiceId,xy:this.dialogForm.xy,serviceType:"05"};Object(h["t"])(t).then(function(t){var r=t.data||[];if(e.dialogLoading=!1,!(Array.isArray(r)&&r.length<=0)){var a=r[0]||{},i=a.keyValues,n=a.ranges,s=a.id,o=a.yType;if(e.dialogForm.id=s,e.dialogForm.yType=o,"1"===e.isType)e.options=[],i.map(function(t){e.dialogForm.countryId=(t.country||{}).key,e.options.push((t.keyValue||{}).key)}),e.onCountry(),"0"!==o&&e.getCountryList();else if("2"===e.isType){var l=[{lower:void 0,upper:void 0}];if(Array.isArray(n)&&n.length>0){var c=n.map(function(e){return e.upperLower});e.dialogForm.sections=c}else e.dialogForm.sections=l}else if("3"===e.isType)e.options=n.map(function(e){return(e.keyValue||{}).key});else if("4"===e.isType){var u=[{lower:void 0,upper:void 0}];if(Array.isArray(n)&&n.length>0){var d=n.filter(function(e){return"0"===e.type}).map(function(e){if("0"===e.type)return e.upperLower});e.dialogForm.sections1=d}else e.dialogForm.sections1=u}}}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"onAddress",value:function(){this.options=[],"0"===this.dialogForm.yType?(this.dialogForm.countryId=void 0,this.getCountryData()):"102"===this.dialogForm.yType?(this.dialogForm.countryId=void 0,this.getAreaList(2)):(this.dialogForm.countryId=void 0,this.list=[])}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(h["g"])().then(function(t){var r=t.data||{};e.countryList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onCountry",value:function(){var e=this.dialogForm.yType;switch(e){case"0":this.getCountryData();break;case"5":this.getRegionList();break;case"1":this.getStateByCountry();break;case"7":this.getFbastoreList();break;case"100":this.getAreaList(1);break;case"101":this.getAreaList(3);break;case"102":this.getAreaList(2);break;default:this.list=[],this.options=[],this.dialogLoading=!1;break}}},{key:"getAreaList",value:function(e){var t=this,r={model:{type:e,countryId:this.dialogForm.countryId},page:1,size:999};this.dialogLoading=!0,Object(h["d"])(r).then(function(e){if(t.dialogLoading=!1,e.success){var r=e.data||{},a=r.result||[];t.list=a.map(function(e){return{id:e.id+"",name:e.name}})}}).catch(function(e){return t.dialogLoading=!1,e})}},{key:"onCountryFrom",value:function(){this.searchForm.departureId=void 0,this.startPortList=[]}},{key:"onCountryTo",value:function(){this.searchForm.destinationId=void 0,this.endPortList=[]}},{key:"getCountryData",value:function(){var e=this;this.dialogLoading=!0,Object(h["g"])().then(function(t){var r=t.data||{};e.list=r.result||[],e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"getStateByCountry",value:function(){var e=this;this.dialogLoading=!0,Object(h["x"])({countryId:this.dialogForm.countryId}).then(function(t){var r=t.data||{},a=r.result||[];e.list=a,e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"getRegionList",value:function(){var e=this;this.dialogLoading=!0;var t={countryId:this.dialogForm.countryId,page:1,size:9999};Object(h["v"])(t).then(function(t){var r=t.data||{},a=r.result||[];e.list=a,e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"getFbastoreList",value:function(){var e=this;this.dialogLoading=!0;var t={countryId:this.dialogForm.countryId,codeSort:"A",page:1,size:9999};Object(h["n"])(t).then(function(t){var r=t.data.result.map(function(e){return{id:e.id,name:e.code+(e.postal?"-"+e.postal:"")+(e.stateName?"-"+e.stateName:"")}});e.list=r,e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"getContainerList",value:function(){var e=this;this.dialogLoading=!0;var t={page:1,size:9999};Object(h["e"])(t).then(function(t){var r=t.data||{},a=r.result||[];e.list=a,e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"addRangeData",value:function(){this.dialogForm.sections.push({lower:void 0,upper:void 0})}},{key:"deleteRangeData",value:function(e){this.dialogForm.sections.splice(e,1)}},{key:"addRangeData1",value:function(){this.dialogForm.sections1.push({lower:void 0,upper:void 0})}},{key:"deleteRangeData1",value:function(e){this.dialogForm.sections1.splice(e,1)}},{key:"addRangeData2",value:function(){this.dialogForm.sections2.push({lower:void 0,upper:void 0})}},{key:"deleteRangeData2",value:function(e){this.dialogForm.sections2.splice(e,1)}},{key:"cancel",value:function(){this.dialogVisible=!1,this.isType="",this.options=[],this.list=[],this.dialogForm=ge(),this.copyForm={};var e=this.$refs.transferCountry;e.clearQuery("left"),e.clearQuery("right")}},{key:"rangeValidate",value:function(e){var t=e.every(function(e){return(0===e.lower||e.lower)&&e.upper});if(!t)return this.$message.error("请完整填写区间值"),!1;var r=e.some(function(e){return e.upper<=e.lower});if(r)return this.$message({type:"error",message:"下限值不能大于等于上限值"}),!1;var a=!1;if(e.map(function(t,r){a=e.some(function(e,a){return r!==a&&(e.lower<=t.lower&&t.lower<e.upper||e.lower<t.upper&&t.upper<=e.upper)})}),a)return this.$message({type:"error",message:"区间范围不能重叠"}),!1;for(var i=!1,n=0;n<e.length;n++)if(n>0){var s=e[n],o=e[n-1];if(s.lower!==o.upper){i=!0;break}}return!i||(this.$message({type:"error",message:"区间范围必须连续"}),!1)}},{key:"save",value:function(){var e=this,t=this.dialogForm,r=t.countryId,a=t.yType,i=t.xType,s=(t.keyValues,t.ranges,t.sections),o=t.sections1,l=(t.sections2,Object(n["a"])(t,["countryId","yType","xType","keyValues","ranges","sections","sections1","sections2"])),c=me({serviceType:{key:"05",value:"专线"}},l,{yType:a}),u=[],d=[],p=[],m=[];if("1"===this.isType)this.options.map(function(t){var i=e.list.find(function(e){return e.id===t})||{},n=e.countryList.find(function(e){return e.id===r})||{};i.id&&i.name&&u.push({type:a,country:{key:r,value:n.name},keyValue:{key:i.id,value:i.name}})}),c.keyValues=u;else if("2"===this.isType){s.map(function(e){d.push({type:i,upperLower:e})});var g=this.rangeValidate(s);if(!g)return;c.ranges=d}else if("3"===this.isType)this.options.map(function(t){var r=e.list.find(function(e){return e.id===t})||{};r.id&&r.name&&d.push({type:i,keyValue:{key:r.id,value:r.name}})}),c.ranges=d;else if("4"===this.isType){o.map(function(e){p.push({type:"0",upperLower:e})});var f=this.rangeValidate(o);if(!f)return;c.ranges=[].concat(p,m)}this.dialogLoading=!0,Object(h["B"])(c).then(function(t){e.$message({type:"success",message:"保存成功"}),e.dialogLoading=!1,e.cancel(),e.getTableData()}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"handleAdd",value:function(){var e=this;this.addEditForm="addEditForm",this.isEdit=!1,this.isCopy=!1,this.$nextTick(function(){var t=e.$refs.addEditForm;t.setData()})}},{key:"handleCopy",value:function(e){var t=this;this.addEditForm="addEditForm",this.isCopy=!0,this.isEdit=!0,this.$nextTick(function(){var r=t.$refs.addEditForm;r.setData(e)})}},{key:"handleEdit",value:function(e){var t=this;this.addEditForm="addEditForm",this.isEdit=!0,this.isCopy=!1,this.$nextTick(function(){var r=t.$refs.addEditForm;r.setData(e)})}},{key:"saveConfirm",value:function(){this.addEditForm="index",this.getTableData()}},{key:"handleDelete",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(h["b"])(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"handleCost",value:function(e){}},{key:"handleSwitch",value:function(e,t){var r=this;if(e.status&&e.status!==t){var a={id:e.id,status:t},i="0"===t?"禁用":"开启";this.$confirm("此操作将".concat(i,"该专线服务，是否继续？"),"温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(h["a"])(a).then(function(e){r.$message({type:"success",message:"更改成功"}),r.getTableData()}).catch(function(e){return e})}).catch(function(){return!1})}}},{key:"handleSizeChange",value:function(e){this.size=e,this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=e,this.getTableData()}},{key:"created",value:function(){this.getAgentList(),this.getTableData()}},{key:"custId",get:function(){var e=g["a"].info||{},t=e.custId;return t}}]),t}(m["e"]);he=p["a"]([Object(m["a"])({name:"paivateline",components:{addEditForm:T,paivatelineSet:V,serviceLineGroup:de},props:{}})],he);var fe=he,ve=fe,ye=(r("998cc"),Object(j["a"])(ve,a,i,!1,null,"03ac5646",null));t["default"]=ye.exports},"52c7":function(e,t,r){},"636a":function(e,t,r){"use strict";r.d(t,"g",function(){return i}),r.d(t,"i",function(){return n}),r.d(t,"f",function(){return s}),r.d(t,"h",function(){return o}),r.d(t,"d",function(){return l}),r.d(t,"b",function(){return c}),r.d(t,"l",function(){return u}),r.d(t,"c",function(){return d}),r.d(t,"a",function(){return p}),r.d(t,"e",function(){return m}),r.d(t,"j",function(){return g}),r.d(t,"m",function(){return h}),r.d(t,"k",function(){return f});var a=r("b32d");function i(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(a["a"])(e)}function n(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(a["a"])(t)}function s(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(a["a"])(t)}function o(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(a["a"])(t)}function l(e){var t={url:"/auth/agent/getAgentList",method:"get",params:e};return Object(a["a"])(t)}function c(e){var t={url:"/auth/agent/deleteAgent",method:"delete",params:{id:e}};return Object(a["a"])(t)}function u(e){var t={url:"/auth/agent/saveAgent",method:"post",data:e};return Object(a["a"])(t)}function d(e){var t={url:"/auth/agent/getAgent",method:"get",params:{id:e}};return Object(a["a"])(t)}function p(e){var t={url:"/auth/agent/changeStatus",method:"post",params:e};return Object(a["a"])(t)}function m(e){var t={url:"/auth/agent/getStaffList",method:"get",params:e};return Object(a["a"])(t)}function g(e){var t={url:"/auth/user/user4position",method:"post",data:e};return Object(a["a"])(t)}function h(e){var t={url:"/auth/agent/saveStaff",method:"post",data:e};return Object(a["a"])(t)}function f(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(a["a"])(t)}},"6a9e":function(e,t,r){"use strict";var a=r("92c5"),i=r.n(a);i.a},"92c5":function(e,t,r){},"998cc":function(e,t,r){"use strict";var a=r("46de"),i=r.n(a);i.a},bd18:function(e,t,r){"use strict";var a=r("52c7"),i=r.n(a);i.a},ccd8:function(e,t,r){"use strict";var a=r("0758"),i=r.n(a);i.a},d2ca:function(e,t,r){"use strict";r.d(t,"w",function(){return l}),r.d(t,"g",function(){return c}),r.d(t,"i",function(){return u}),r.d(t,"q",function(){return d}),r.d(t,"p",function(){return p}),r.d(t,"A",function(){return m}),r.d(t,"a",function(){return g}),r.d(t,"b",function(){return h}),r.d(t,"c",function(){return f}),r.d(t,"z",function(){return v}),r.d(t,"s",function(){return y}),r.d(t,"f",function(){return b}),r.d(t,"l",function(){return k}),r.d(t,"k",function(){return x}),r.d(t,"y",function(){return F}),r.d(t,"u",function(){return L}),r.d(t,"j",function(){return w}),r.d(t,"h",function(){return I}),r.d(t,"o",function(){return O}),r.d(t,"m",function(){return S}),r.d(t,"t",function(){return j}),r.d(t,"B",function(){return C}),r.d(t,"v",function(){return T}),r.d(t,"e",function(){return _}),r.d(t,"x",function(){return E}),r.d(t,"n",function(){return $}),r.d(t,"d",function(){return z}),r.d(t,"r",function(){return D});r("8e6e"),r("ac6a"),r("456d");var a=r("bd86"),i=r("a8db"),n=r("b32d");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(r,!0).forEach(function(t){Object(a["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function l(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(n["a"])(t)}function c(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(n["a"])(e)}function u(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(n["a"])(t)}function d(e){var t=e.page,r=e.size,a=Object(i["a"])(e,["page","size"]),s={url:"/cfg/lsc/getLscList",method:"post",data:{page:t,size:r,model:o({},a)}};return Object(n["a"])(s)}function p(e){var t={url:"/cfg/lsc/getLsc",method:"get",params:e};return Object(n["a"])(t)}function m(e){var t={url:"/cfg/lsc/saveLsc",method:"post",data:e};return Object(n["a"])(t)}function g(e){var t={url:"/cfg/lsc/changeStatus",method:"post",params:e};return Object(n["a"])(t)}function h(e){var t={url:"/cfg/lsc/deleteLsc",method:"delete",params:e};return Object(n["a"])(t)}function f(e){var t={url:"/cfg/lsc/getAgentList",method:"get",params:e};return Object(n["a"])(t)}function v(e){var t={url:"/cfg/lsc/saveAgent",method:"post",data:e};return Object(n["a"])(t)}function y(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(n["a"])(t)}function b(e){var t={url:"/finance/costgroup/getCostgroupList",method:"get",params:e};return Object(n["a"])(t)}function k(e){var t={url:"/cfg/esc/getEscList",method:"post",data:e};return Object(n["a"])(t)}function x(){var e={url:"/cfg/lsc/getDeliveryCity",method:"get"};return Object(n["a"])(e)}function F(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(n["a"])(t)}function L(){var e={url:"/cfg/lsc/getProductAll",method:"get"};return Object(n["a"])(e)}function w(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(n["a"])(t)}function I(e){var t={url:"/cfg/csc/getCscList",method:"get",params:e};return Object(n["a"])(t)}function O(e){var t={url:"/cfg/ksc/getKscList",method:"post",data:e};return Object(n["a"])(t)}function S(e){var t={url:"/cfg/examine/getExamineList",method:"get",params:e};return Object(n["a"])(t)}function j(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(n["a"])(t)}function C(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(n["a"])(t)}function T(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(n["a"])(t)}function _(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(n["a"])(t)}function E(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:e};return Object(n["a"])(t)}function $(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(n["a"])(t)}function z(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(n["a"])(t)}function D(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(n["a"])(t)}},e158:function(e,t,r){}}]);