(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customer-level"],{a29b:function(e,t,a){"use strict";var r=a("d712"),n=a.n(r);n.a},bb99:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"客户评级"}}),a("div",{staticClass:"app-panel"},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["addCustomerLevel"],expression:"['addCustomerLevel']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addCur}},[e._v("\n          新增\n        ")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{label:"级别代码",prop:"code",width:"120"}}),a("el-table-column",{attrs:{label:"级别描述",prop:"name"}}),a("el-table-column",{attrs:{label:"额度金额",prop:"rating",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              ￥ "+e._s(t.row.rating)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"remark"}}),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["editCustomerLevel"],expression:"['editCustomerLevel']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleEditRow(t.row)}}},[e._v("\n                编辑\n              ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["deleteCustomerLevel"],expression:"['deleteCustomerLevel']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleDeleteRow(t.row.id)}}},[e._v("\n                删除\n              ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.title,width:"800px",visible:e.formShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.formShow=t},closed:e.handleCancel}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-form",{ref:"ruleForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.ruleForm,rules:e.rules,"label-width":"90px",size:"small"}},[a("el-form-item",{attrs:{label:"级别代码",prop:"code"}},[a("el-input",{attrs:{disabled:e.isEdit,maxlength:5,placeholder:"请输入","show-word-limit":""},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}})],1),a("el-form-item",{attrs:{label:"级别描述",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",maxlength:30},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),a("el-form-item",{attrs:{label:"额度金额(￥)","label-width":"110px",prop:"rating"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999999,precision:2},model:{value:e.ruleForm.rating,callback:function(t){e.$set(e.ruleForm,"rating",t)},expression:"ruleForm.rating"}})],1),a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{autosize:{minRows:2,maxRows:3},type:"textarea",maxlength:30,placeholder:"请输入"},model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1),a("div",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleCancel}},[e._v("\n                取 消\n              ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSubmit}},[e._v("\n                确 定\n              ")])],1)],1)])],1)],1)])])},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("768b")),o=(a("96cf"),a("3b8d")),l=a("bd86"),s=(a("c5f6"),a("d225")),u=a("b0b4"),c=a("308d"),d=a("6bb5"),m=a("4e2b"),p=a("9ab4"),g=a("60a3"),h=a("ac1a"),f=a("b32d");function b(e){var t={url:"/auth/credit/getCustRatingList",method:"post",data:e};return Object(f["a"])(t)}function v(e){var t={url:"/auth/credit/saveCustRating",method:"post",data:e};return Object(f["a"])(t)}function w(e){var t={url:"/auth/credit/deleteCustRating",method:"post",params:e};return Object(f["a"])(t)}function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach(function(t){Object(l["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var k=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.formShow=!1,e.formLoading=!1,e.ruleForm={code:void 0,name:void 0,rating:void 0,remark:void 0},e.rules={code:[{required:!0,message:"级别代码不能为空",trigger:"blur"}],name:[{required:!0,message:"级别描述不能为空",trigger:"blur"}],rating:[{required:!0,message:"额度金额不能为空",trigger:"blur"}]},e.isEdit=!1,e.tableData=[],e.title="",e.page=1,e.size=10,e.total=0,e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"created",value:function(){this.getCustRatingList(1)}},{key:"getCustRatingList",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a={model:{},page:this.page,size:this.size};b(a).then(function(e){if(t.loading=!1,e.success){var a=e.data||{};t.tableData=a.result||[],t.total=a.total}}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getCustRatingList()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getCustRatingList()}},{key:"addCur",value:function(){this.formShow=!0,this.title="新增评级",this.isEdit=!1}},{key:"handleEditRow",value:function(e){this.formShow=!0,this.title="编辑评级",this.ruleForm=x({},e),this.isEdit=!0}},{key:"handleDeleteRow",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,r,n,o,l,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="删除评级将导致无法继续使用，确定要删除吗？",r="温馨提示",e.next=4,this.$confirm(a,r,{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 4:if(n=e.sent,o=Object(i["a"])(n,2),l=o[0],o[1],!l){e.next=10;break}return e.abrupt("return");case 10:w({id:t}).then(function(e){e.success?(s.$message({type:"success",message:"删除成功!"}),s.getCustRatingList()):s.$message({type:"error",message:e.msg})}).catch(function(e){return e});case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSubmit",value:function(){var e=this,t=this.$refs.ruleForm;t.validate(function(t){t&&(e.formLoading=!0,v(e.ruleForm).then(function(t){e.formLoading=!1,t.success?(e.formShow=!1,e.$message({type:"success",message:"编辑成功!"}),e.getCustRatingList()):e.$message({type:"error",message:t.msg})}).catch(function(t){return e.formLoading=!1,t}))})}},{key:"handleCancel",value:function(){this.formShow=!1,this.ruleForm={code:void 0,name:void 0,rating:void 0,remark:void 0};var e=this.$refs.ruleForm;e.clearValidate()}},{key:"labelPosition",get:function(){var e=h["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=h["a"].language;return e||"en"}}]),t}(g["e"]);k=p["a"]([Object(g["a"])({name:"CustomerLevel",components:{},props:{}})],k);var C=k,O=C,S=(a("a29b"),a("2877")),j=Object(S["a"])(O,r,n,!1,null,"722fb7e4",null);t["default"]=j.exports},d712:function(e,t,a){}}]);