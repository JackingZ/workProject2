(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["manager-order~orders-statistics~risk-control~whole-order"],{"35d3":function(t,s,a){},"3e3c":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("el-dialog",{attrs:{title:"船期",width:"600px","close-on-click-modal":!1,visible:t.showSoInfo},on:{"update:visible":function(s){t.showSoInfo=s}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.showSoInfoLoading,expression:"showSoInfoLoading"}]},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:"12"}},[a("span",[t._v("船名：")]),a("span",[t._v(t._s(t.orderSoInfo.freighter))])]),a("el-col",{attrs:{span:"12"}},[a("span",[t._v("船次：")]),a("span",[t._v(t._s(t.orderSoInfo.ship))])])],1),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:"12"}},[a("span",[t._v("服务机构：")]),a("span",[t._v(t._s(t.orderSoInfo.orgName))])]),a("el-col",{attrs:{span:"12"}},[a("span",[t._v("etd：")]),a("span",[t._v(t._s(t.orderSoInfo.etd))])])],1),a("el-row",[a("el-col",{attrs:{span:"12"}},[a("span",[t._v("eta：")]),a("span",[t._v(t._s(t.orderSoInfo.eta))])])],1)],1)])},i=[],n=a("d225"),o=a("b0b4"),c=a("308d"),r=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),v=a("2d66"),f=function(t){function s(){var t;return Object(n["a"])(this,s),t=Object(c["a"])(this,Object(r["a"])(s).apply(this,arguments)),t.showSoInfo=!1,t.showSoInfoLoading=!1,t.orderSoInfo={},t}return Object(l["a"])(s,t),Object(o["a"])(s,[{key:"show",value:function(t){var s=this;this.showSoInfo=!0,this.showSoInfoLoading=!0,this.orderSoInfo={},Object(v["o"])({code:t.code}).then(function(t){s.showSoInfoLoading=!1;var a=t.data||[];s.orderSoInfo=a[0]||{}}).catch(function(){s.showSoInfoLoading=!1})}}]),s}(u["e"]);f=d["a"]([Object(u["a"])({name:"order-so-info"})],f);var h=f,p=h,g=a("2877"),b=Object(g["a"])(p,e,i,!1,null,"5ea1af7e",null);s["a"]=b.exports},"5f52":function(t,s,a){},"6ae2":function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"detail-back"},[a("el-button",{attrs:{type:"text"},on:{click:t.exportExcel}},[t._v("\n      导出\n    ")]),a("span",{staticStyle:{cursor:"pointer","margin-left":"10px"},on:{click:t.goBack}},[a("i",{staticClass:"el-icon-back"}),a("span",[t._v("返回")])])],1),a("div",{staticClass:"app-panel order-detail"},[a("div",{staticClass:"content"},[a("div",{staticClass:"left-content"},[a("div",{staticClass:"left-title"},[t._v("\n          主单号\n        ")]),a("div",{staticClass:"left-list"},t._l(t.trackingNos,function(s){return a("div",{key:s,staticClass:"item",class:{active:s===t.activeNo},on:{click:function(a){return t.getExpressNoList(s)}}},[t._v("\n            "+t._s(s)+"\n          ")])}),0)]),a("div",{staticClass:"right-content"},[t._m(0),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.detailLoading,expression:"detailLoading"}],staticClass:"right-list"},t._l(t.dataSource,function(s){return a("div",{key:s.trackingNo,staticClass:"item",class:{active:s.trackingNo===t.showStatusRow.trackingNo},on:{click:function(a){return t.getExpressStatusList(s)}}},[a("div",{staticClass:"left"},[t._v("\n              "+t._s(s.trackingNo)+"\n            ")]),a("div",{staticClass:"pkgNo"},[t._v("\n              "+t._s(s.pkgNo)+"\n            ")])])}),0)]),t.showStatusRow.trackingNo?a("div",{staticClass:"express-status"},[a("div",{staticClass:"left-title"},[t._v("\n          快递单状态\n        ")]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.statusLoading,expression:"statusLoading"}],staticClass:"left-list"},[a("div",{staticClass:"order-no"},[a("span",[t._v("快递单号：")]),a("span",[t._v(t._s(t.showStatusRow.trackingNo))])]),a("div",{staticClass:"status-list"},[t.statusList.length?t._l(t.statusList,function(s,e){return a("div",{key:s.time,staticClass:"status-item",class:{active:0===e}},[a("div",{staticClass:"status-describe"},[a("div",{staticClass:"time"},[t._v("\n                    "+t._s(s.time)+"\n                  ")]),a("div",{staticClass:"describe"},[t._v("\n                    "+t._s(s.description)+"\n                  ")])])])}):a("div",{staticClass:"none"},[t._v("\n              暂无状态信息\n            ")])],2)])]):t._e()])])])},i=[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"right-title"},[a("div",{staticClass:"left"},[t._v("\n            子单号\n          ")]),a("div",{staticClass:"pkgNo"},[t._v("\n            箱号\n          ")])])}],n=(a("55dd"),a("28a5"),a("d225")),o=a("b0b4"),c=a("308d"),r=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),v=a("2d66"),f=a("5a0c"),h=a.n(f),p=function(t){function s(){var t;return Object(n["a"])(this,s),t=Object(c["a"])(this,Object(r["a"])(s).apply(this,arguments)),t.detailLoading=!1,t.statusLoading=!1,t.loading=!1,t.activeNo="",t.row={},t.dataSource=[],t.trackingNos=[],t.showStatusRow={},t.allStatusList=[],t}return Object(l["a"])(s,t),Object(o["a"])(s,[{key:"exportExcel",value:function(){var t=this,s={orderNo:this.row.code};this.loading=!0,Object(v["j"])(s).then(function(s){t.loading=!1,s.text().then(function(s){var a=JSON.parse(s);200!==a.code&&t.$message.error(a.msg||"文件下载失败")}).catch(function(){var a=document.createElement("a"),e=new Blob([s],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(e);a.href=i,a.download=t.row.code+"单号"+h()().format("YYYY-MM-DD_HH-mm-ss")+".xls",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(i)})}).catch(function(s){t.loading=!1,s.data&&s.data&&s.data.text&&s.data.text().then(function(s){try{var a=JSON.parse(s);200!==a.code&&t.$message.error(a.msg||"文件下载失败")}catch(e){return e}})})}},{key:"goBack",value:function(){this.dataSource=[],this.trackingNos=[],this.row={},this.allStatusList=[],this.showStatusRow={},this.$emit("back")}},{key:"getExpressNoList",value:function(t){var s=this;if(t){this.activeNo=t;var a={expressNo:t};this.detailLoading=!0,this.dataSource=[],Object(v["y"])(a).then(function(t){s.detailLoading=!1,s.dataSource=t.data||[]}).catch(function(){s.detailLoading=!0})}}},{key:"show",value:function(t){this.row=t;var s=t.express||{},a=s.trackingNos||"";this.trackingNos=a.split(","),this.getExpressNoList(this.trackingNos[0])}},{key:"getExpressStatusList",value:function(t){var s=this;this.showStatusRow=t;var a={id:t.expressOrderId};this.statusLoading=!0,Object(v["C"])(a).then(function(t){s.statusLoading=!1;var a=t.data||{},e=[];try{e=JSON.parse(a.allStatus)}catch(i){e=[]}s.allStatusList=e.map(function(t){return t.time=h()(t.time,{format:"YYYYMMDD HHmmss"}).format("YYYY-MM-DD HH:mm:ss"),t})}).catch(function(){s.allStatusList=[],s.statusLoading=!1})}},{key:"statusList",get:function(){var t=this;return this.allStatusList.filter(function(s){return s.trackingNo===t.showStatusRow.trackingNo}).sort(function(t,s){return t.time<s.time?1:-1})}}]),s}(u["e"]);p=d["a"]([Object(u["a"])({name:"express"})],p);var g=p,b=g,m=(a("e5c9"),a("2877")),w=Object(m["a"])(b,e,i,!1,null,"e132ba64",null);s["a"]=w.exports},"918e":function(t,s,a){"use strict";var e=a("5f52"),i=a.n(e);i.a},e5c9:function(t,s,a){"use strict";var e=a("35d3"),i=a.n(e);i.a},fe1e:function(t,s,a){"use strict";var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"detail-back"},[a("div",{staticClass:"title"},[t._v("\n      订单状态详情\n    ")]),a("span",{staticStyle:{cursor:"pointer","margin-left":"10px"},on:{click:t.goBack}},[a("i",{staticClass:"el-icon-back"}),a("span",[t._v("返回")])])]),a("div",{staticClass:"app-panel order-detail"},[a("div",{staticClass:"tracking-info"},[a("div",{staticClass:"status-wrap"},[a("div",{staticClass:"service-name"},[t._v("\n          "+t._s((t.row.lsc||{}).value)+"\n        ")]),a("div",{staticClass:"code"},[t._v("\n          原单号："+t._s(t.row.code)+"\n        ")]),a("div",{staticClass:"status-list"},[t.statusList.length?a("div",{staticClass:"status-item-warp"},t._l(t.statusList,function(s,e){return a("div",{key:s.time,staticClass:"status-item",class:{active:0===e}},[a("div",{staticClass:"status-text-warp"},[a("div",{staticClass:"status-text"},[t._v("\n                  "+t._s(s.statusName)+"\n                ")]),a("el-popover",{attrs:{title:"文件下载",placement:"top",trigger:"click"},model:{value:s.visible,callback:function(a){t.$set(s,"visible",a)},expression:"item.visible"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.fileLoading,expression:"fileLoading"}],attrs:{data:t.fileList}},[a("el-table-column",{attrs:{width:"250",property:"fileName",label:"文件名称"}}),a("el-table-column",{attrs:{width:"150",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(s){return[a("el-button",{attrs:{size:"small",type:"text"},on:{click:function(a){return t.downloadFile(s.row)}}},[t._v("\n                          文件下载\n                        ")])]}}],null,!0)})],1),s.ifFile?a("el-button",{attrs:{slot:"reference",size:"small",type:"text"},on:{click:function(a){return t.showFileList(s)}},slot:"reference"},[t._v("\n                    文件下载\n                  ")]):t._e()],1),"501"===s.statusIndex?a("div",[a("el-button",{attrs:{size:"small",type:"text"},on:{click:t.showOrderSoInfo}},[t._v("\n                    查看详情\n                  ")])],1):t._e()],1),a("div",{staticClass:"status-describe"},[a("div",{staticClass:"time"},[t._v("\n                  "+t._s(s.updateAt)+"\n                ")]),a("div",{staticClass:"describe"},[t._v("\n                  "+t._s(s.describe||"")+"\n                ")])])])}),0):a("div",{staticClass:"none"},[a("div",{staticClass:"none-bg"}),a("div",{staticClass:"none-text"},[t._v("\n              暂未查询到记录~\n            ")])])])])])]),a("order-so-info",{ref:"orderSoInfo"})],1)},i=[],n=(a("7514"),a("55dd"),a("d225")),o=a("b0b4"),c=a("308d"),r=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),v=a("5a0c"),f=a.n(v),h=a("2d66"),p=a("3e3c"),g=function(t){function s(){var t;return Object(n["a"])(this,s),t=Object(c["a"])(this,Object(r["a"])(s).apply(this,arguments)),t.loading=!1,t.fileLoading=!1,t.row={},t.statusList=[],t.fileList=[],t}return Object(l["a"])(s,t),Object(o["a"])(s,[{key:"showOrderSoInfo",value:function(){var t=this.$refs.orderSoInfo;t.show(this.row)}},{key:"downloadFile",value:function(t){t.fileSource?window.open(t.fileSource):this.$message.warning("暂无可下载文件")}},{key:"showFileList",value:function(t){var s=this,a={code:t.keyCode,statusIndex:t.statusIndex};this.fileList=[],this.fileLoading=!0,Object(h["S"])(a).then(function(t){s.fileList=t.data||[],s.fileLoading=!1}).catch(function(){s.fileLoading=!1})}},{key:"show",value:function(t){this.row=t,this.loadData()}},{key:"loadData",value:function(){var t=this,s={index:"1",words:this.row.code};this.loading=!0,Object(h["T"])(s).then(function(s){var a=s.data||{};t.statusList=(a.status||[]).sort(function(t,s){return f()(s.updateAt).diff(f()(t.updateAt),"second")}).reduce(function(t,s){return t.find(function(t){return t.statusIndex===s.statusIndex})||t.push(s),t},[]).map(function(s){return s.visible=!1,s.keyCode=t.row.code,s}),t.loading=!1}).catch(function(){t.loading=!1,t.statusList=[]})}},{key:"goBack",value:function(){this.row={},this.statusList=[],this.$emit("back")}}]),s}(u["e"]);g=d["a"]([Object(u["a"])({name:"order-tracking",components:{orderSoInfo:p["a"]}})],g);var b=g,m=b,w=(a("918e"),a("2877")),_=Object(w["a"])(m,e,i,!1,null,"ef35af14",null);s["a"]=_.exports}}]);