(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["booking-service"],{"16d8":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:e.id}})},a=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o=r("d225"),s=r("b0b4"),l=r("308d"),c=r("6bb5"),u=r("4e2b"),d=r("9ab4"),p=(r("a7be"),r("44f8"),r("a6e0"),r("60a3")),m={previewStyle:"vertical",usageStatistics:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},g=r("547e"),h=r.n(g);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f=function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)},b=function(e){function t(){return Object(o["a"])(this,t),Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"onValueChange",value:function(e,t){this.markdownEditor&&e!==t&&e!==this.markdownEditor.getValue()&&this.markdownEditor.setValue(e)}},{key:"onLanguageChange",value:function(){this.destroyEditor(),this.initEditor()}},{key:"onHeightChange",value:function(e){this.markdownEditor&&this.markdownEditor.height(e)}},{key:"onModeChange",value:function(e){this.markdownEditor&&this.markdownEditor.changeMode(e)}},{key:"mounted",value:function(){this.initEditor()}},{key:"destroyed",value:function(){this.destroyEditor()}},{key:"initEditor",value:function(){var e=this,t=document.getElementById(this.id);t&&(this.markdownEditor=new h.a(y({el:t},this.editorOptions)),this.value&&this.markdownEditor.setValue(this.value),this.markdownEditor.on("change",function(){e.$emit("input",e.markdownEditor.getValue())}))}},{key:"destroyEditor",value:function(){this.markdownEditor&&(this.markdownEditor.off("change"),this.markdownEditor.remove(),this.markdownEditor=void 0)}},{key:"focus",value:function(){this.markdownEditor&&this.markdownEditor.focus()}},{key:"setValue",value:function(e){this.markdownEditor&&this.markdownEditor.setValue(e)}},{key:"getValue",value:function(){return this.markdownEditor?this.markdownEditor.getValue():""}},{key:"setHtml",value:function(e){this.markdownEditor&&this.markdownEditor.setHtml(e)}},{key:"getHtml",value:function(){return this.markdownEditor?this.markdownEditor.getHtml():""}},{key:"editorOptions",get:function(){var e=Object.assign({},m,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}}]),t}(p["e"]);d["a"]([Object(p["c"])({required:!0})],b.prototype,"value",void 0),d["a"]([Object(p["c"])({default:f})],b.prototype,"id",void 0),d["a"]([Object(p["c"])({default:function(){return m}})],b.prototype,"options",void 0),d["a"]([Object(p["c"])({default:"markdown"})],b.prototype,"mode",void 0),d["a"]([Object(p["c"])({default:"300px"})],b.prototype,"height",void 0),d["a"]([Object(p["c"])({default:"en_US"})],b.prototype,"language",void 0),d["a"]([Object(p["f"])("value")],b.prototype,"onValueChange",null),d["a"]([Object(p["f"])("language")],b.prototype,"onLanguageChange",null),d["a"]([Object(p["f"])("height")],b.prototype,"onHeightChange",null),d["a"]([Object(p["f"])("mode")],b.prototype,"onModeChange",null),b=d["a"]([Object(p["a"])({name:"MarkdownEditor"})],b);var k=b,w=k,F=r("2877"),L=Object(F["a"])(w,i,a,!1,null,null,null);t["a"]=L.exports},2895:function(e,t,r){"use strict";r.d(t,"f",function(){return a}),r.d(t,"h",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"c",function(){return s}),r.d(t,"g",function(){return l}),r.d(t,"b",function(){return c}),r.d(t,"d",function(){return u}),r.d(t,"e",function(){return d});var i=r("b32d");function a(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(i["a"])(t)}function n(e){var t={url:"/setting/ports/savePort",method:"post",data:e};return Object(i["a"])(t)}function o(e){var t={url:"/setting/ports/deletePort",method:"delete",params:e};return Object(i["a"])(t)}function s(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}function l(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(i["a"])(t)}function c(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(i["a"])(t)}function u(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(i["a"])(t)}function d(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(i["a"])(t)}},4255:function(e,t,r){"use strict";r.d(t,"e",function(){return a}),r.d(t,"c",function(){return n}),r.d(t,"f",function(){return o}),r.d(t,"b",function(){return s}),r.d(t,"d",function(){return l}),r.d(t,"a",function(){return c}),r.d(t,"g",function(){return u});var i=r("b32d");function a(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(i["a"])(t)}function n(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}function o(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(i["a"])(t)}function s(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(i["a"])(t)}function l(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(i["a"])(t)}function c(e){var t={url:"/setting/org/deleteOrg",method:"delete",params:e};return Object(i["a"])(t)}function u(e){var t={url:"/setting/org/saveOrg",method:"post",data:e};return Object(i["a"])(t)}},"615c":function(e,t,r){"use strict";r.d(t,"n",function(){return a}),r.d(t,"h",function(){return n}),r.d(t,"f",function(){return o}),r.d(t,"c",function(){return s}),r.d(t,"m",function(){return l}),r.d(t,"q",function(){return c}),r.d(t,"k",function(){return u}),r.d(t,"i",function(){return d}),r.d(t,"j",function(){return p}),r.d(t,"t",function(){return m}),r.d(t,"b",function(){return g}),r.d(t,"a",function(){return h}),r.d(t,"u",function(){return v}),r.d(t,"l",function(){return y}),r.d(t,"v",function(){return f}),r.d(t,"g",function(){return b}),r.d(t,"d",function(){return k}),r.d(t,"r",function(){return w}),r.d(t,"e",function(){return F}),r.d(t,"o",function(){return L}),r.d(t,"p",function(){return x}),r.d(t,"s",function(){return O});var i=r("b32d");function a(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(i["a"])(t)}function n(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}function o(e){var t={url:"/cfg/bs/getBsList",method:"post",data:e};return Object(i["a"])(t)}function s(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(i["a"])(t)}function l(e){var t={url:"/price/booking/getPriceBookList",method:"get",params:e};return Object(i["a"])(t)}function c(e){var t={url:"/price/booking/page",method:"post",data:e};return Object(i["a"])(t)}function u(e){var t={url:"/price/booking/getPriceBook",method:"get",params:e};return Object(i["a"])(t)}function d(e){var t={url:"/price/booking/getEffectiveBook",method:"get",params:e};return Object(i["a"])(t)}function p(e){var t={url:"/price/booking/getHistory",method:"get",params:e};return Object(i["a"])(t)}function m(e){var t={url:"/price/booking/savePriceBook",method:"post",data:e};return Object(i["a"])(t)}function g(e){var t={url:"/price/booking/deletePriceBook",method:"delete",params:e};return Object(i["a"])(t)}function h(e){var t={url:"/price/booking/audit",method:"post",data:e};return Object(i["a"])(t)}function v(e){var t={url:"/price/booking/addSpecialCust",method:"post",data:e};return Object(i["a"])(t)}function y(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(i["a"])(t)}function f(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(i["a"])(t)}function b(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(i["a"])(t)}function k(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(i["a"])(t)}function w(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(i["a"])(t)}function F(e){var t={url:"/cfg/bs/getBsTransList",method:"post",data:e};return Object(i["a"])(t)}function L(e){var t={url:"/price/booking/getStandardPeriod",method:"get",params:e};return Object(i["a"])(t)}function x(e){var t={url:"/price/booking/supplier",method:"get",params:e};return Object(i["a"])(t)}function O(e){var t={url:"/price/booking/doExpire",method:"get",params:e};return Object(i["a"])(t)}},"7dfa":function(e,t,r){},8322:function(e,t,r){"use strict";r.d(t,"e",function(){return a}),r.d(t,"d",function(){return n}),r.d(t,"c",function(){return o}),r.d(t,"g",function(){return s}),r.d(t,"f",function(){return l}),r.d(t,"b",function(){return c}),r.d(t,"a",function(){return u});var i=r("b32d");function a(e){var t={url:"/setting/exchange/getExchangeList",method:"get",params:e};return Object(i["a"])(t)}function n(e){var t={url:"/setting/exchange/getExRateList",method:"get",params:e};return Object(i["a"])(t)}function o(){var e={url:"/setting/currency/getCurrencyList",method:"get",params:{page:1,size:9999}};return Object(i["a"])(e)}function s(e){var t={url:"/setting/exchange/saveExchange",method:"post",data:e};return Object(i["a"])(t)}function l(e){var t={url:"/setting/exchange/saveExRate",method:"post",data:e};return Object(i["a"])(t)}function c(e){var t={url:"/setting/exchange/deleteExchange",method:"delete",params:e};return Object(i["a"])(t)}function u(e){var t={url:"/setting/exchange/deleteExRate",method:"delete",params:e};return Object(i["a"])(t)}},"83ea":function(e,t,r){"use strict";var i=r("eff6"),a=r.n(i);a.a},c3cb:function(e,t,r){"use strict";var i=r("c451"),a=r.n(i);a.a},c451:function(e,t,r){},cac2:function(e,t,r){"use strict";var i=r("7dfa"),a=r.n(i);a.a},dcc4:function(e,t,r){"use strict";r.d(t,"p",function(){return a}),r.d(t,"h",function(){return n}),r.d(t,"j",function(){return o}),r.d(t,"l",function(){return s}),r.d(t,"f",function(){return l}),r.d(t,"k",function(){return c}),r.d(t,"g",function(){return u}),r.d(t,"a",function(){return d}),r.d(t,"b",function(){return p}),r.d(t,"c",function(){return m}),r.d(t,"q",function(){return g}),r.d(t,"s",function(){return h}),r.d(t,"o",function(){return v}),r.d(t,"d",function(){return y}),r.d(t,"n",function(){return f}),r.d(t,"m",function(){return b}),r.d(t,"r",function(){return k}),r.d(t,"i",function(){return w}),r.d(t,"e",function(){return F});var i=r("b32d");function a(e){var t={url:"/cfg/bs/addBs",method:"post",data:e};return Object(i["a"])(t)}function n(e){var t={url:"/cfg/bs/getByIds",method:"post",data:e};return Object(i["a"])(t)}function o(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}function s(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(i["a"])(t)}function l(e){var t={url:"/cfg/bs/getBsList",method:"post",data:e};return Object(i["a"])(t)}function c(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(i["a"])(t)}function u(e){var t={url:"/cfg/bs/getBsTransList",method:"post",data:e};return Object(i["a"])(t)}function d(e){var t={url:"/cfg/bs/changeStatus",method:"post",params:e};return Object(i["a"])(t)}function p(e){var t={url:"/cfg/bs/del",method:"get",params:e};return Object(i["a"])(t)}function m(e){var t={url:"/cfg/bs/deleteBsTrans",method:"delete",params:e};return Object(i["a"])(t)}function g(e){var t={url:"/cfg/bs/saveBsTrans",method:"post",data:e};return Object(i["a"])(t)}function h(e){var t={url:"/cfg/bs/updateBsTrans",method:"put",data:e};return Object(i["a"])(t)}function v(e){var t={url:"/cfg/bs/saveAgent",method:"post",data:e};return Object(i["a"])(t)}function y(e){var t={url:"/cfg/bs/getAgentList",method:"get",params:e};return Object(i["a"])(t)}function f(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(i["a"])(t)}function b(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(i["a"])(t)}function k(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(i["a"])(t)}function w(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(i["a"])(t)}function F(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(i["a"])(t)}},eff6:function(e,t,r){},f90f:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{staticClass:"app-container"},[r("head-info",{directives:[{name:"show",rawName:"v-show",value:!e.isEditFormShow,expression:"!isEditFormShow"}],attrs:{info:"",title:"订舱服务"}}),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isEditFormShow,expression:"!isEditFormShow"}],staticClass:"app-panel"},[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingServiceAdd"],expression:"['bookingServiceAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.add}},[e._v("\n              新增服务\n            ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-select",{staticStyle:{"margin-right":"10px",width:"130px"},attrs:{size:"small",placeholder:"业务类型",clearable:""},on:{change:e.onSVTool},model:{value:e.selectValue.conveyance,callback:function(t){e.$set(e.selectValue,"conveyance",t)},expression:"selectValue.conveyance"}},e._l(e.tools,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"起运国",size:"small",filterable:"",clearable:""},on:{focus:e.getCountryList,change:e.onCountryFrom},model:{value:e.selectValue.countryFromId,callback:function(t){e.$set(e.selectValue,"countryFromId",t)},expression:"selectValue.countryFromId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.selectValue.conveyance||!e.selectValue.countryFromId,loading:e.selectLoading,placeholder:"起运港",size:"small",clearable:"",filterable:""},on:{focus:e.getStartPortData},model:{value:e.selectValue.portFrom,callback:function(t){e.$set(e.selectValue,"portFrom",t)},expression:"selectValue.portFrom"}},e._l(e.startPortList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"目的国",clearable:"",filterable:"",size:"small"},on:{focus:e.getCountryList,change:e.onCountryTo},model:{value:e.selectValue.countryToId,callback:function(t){e.$set(e.selectValue,"countryToId",t)},expression:"selectValue.countryToId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.selectValue.conveyance||!e.selectValue.countryToId,loading:e.selectLoading,placeholder:"目的港",size:"small",clearable:"",filterable:""},on:{focus:e.getEndPortData},model:{value:e.selectValue.portsToId,callback:function(t){e.$set(e.selectValue,"portsToId",t)},expression:"selectValue.portsToId"}},e._l(e.endPortList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{staticStyle:{"margin-right":"10px",width:"130px"},attrs:{disabled:!e.selectValue.conveyance,size:"small",placeholder:"服务类型",clearable:""},model:{value:e.selectValue.transType,callback:function(t){e.$set(e.selectValue,"transType",t)},expression:"selectValue.transType"}},e._l(e.svTypes,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),r("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.selectValue.keyword,callback:function(t){e.$set(e.selectValue,"keyword",t)},expression:"selectValue.keyword"}},[r("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[r("el-option",{attrs:{label:"服务编码",value:"1"}}),r("el-option",{attrs:{label:"航线名称",value:"2"}})],1)],1),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingServiceQuery"],expression:"['bookingServiceQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{fixed:"left",prop:"name",label:"航线名称","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{fixed:"left",prop:"serviceCode",label:"服务编码","min-width":"120"}}),r("el-table-column",{attrs:{prop:"conveyance",label:"业务类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.conveyance?r("span",[e._v("空运")]):"1"===t.row.conveyance?r("span",[e._v("海运")]):"2"===t.row.conveyance?r("span",[e._v("铁路")]):"4"===t.row.conveyance?r("span",[e._v("卡航")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"transType",label:"服务类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.formatTrans(t.row.transType))+"\n            ")]}}])}),r("el-table-column",{attrs:{prop:"alias",label:"航线简称","min-width":"120","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"countryFromName",label:"起运国","min-width":"120"}}),r("el-table-column",{attrs:{prop:"portsFromName",label:"起运港","min-width":"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"countryToName",label:"目的国","min-width":"120"}}),r("el-table-column",{attrs:{prop:"portsToName",label:"目的港","min-width":"200","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{"min-width":"150",label:"航线服务商"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[r("strong",[t.row.transConfiged?r("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):r("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),r("el-button",{attrs:{disabled:!e.$checkPermission(["bookingServiceServiceLineView"]),type:"text"},on:{click:function(r){return e.showServiceLine(t.row)}}},[e._v("\n                航线服务商\n              ")])],1)}}])}),r("el-table-column",{attrs:{label:"设置计费区间",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticStyle:{display:"flex","align-items":"center"}},[e.isChargeSide(t.row.transType)?r("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[r("strong",[t.row.axisRangeConfiged?r("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):r("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]):e._e(),e.isChargeSide(t.row.transType)?r("el-button",{attrs:{disabled:!e.$checkPermission(["bookingServiceChargeSide"]),type:"text"},on:{click:function(r){return e.onChargeSide(t.row)}}},[e._v("\n                设置计费区间\n              ")]):r("span",[e._v("--")])],1)}}])}),r("el-table-column",{attrs:{label:"设置计费类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticStyle:{display:"flex","align-items":"center"}},[e.isChargeType(t.row.transType)?r("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[r("strong",[t.row.axisTypeConfiged?r("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):r("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]):e._e(),e.isChargeType(t.row.transType)?r("el-button",{attrs:{disabled:!e.$checkPermission(["bookingServiceChargeType"]),type:"text"},on:{click:function(r){return e.onChargeType(t.row)}}},[e._v("\n                设置计费类型\n              ")]):r("span",[e._v("--")])],1)}}])}),r("el-table-column",{attrs:{"min-width":"150",label:"航线代理商"},scopedSlots:e._u([{key:"default",fn:function(t){return r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("el-button",{attrs:{disabled:!e.$checkPermission(["bookingServiceAgent"]),type:"text"},on:{click:function(r){return e.showServiceAgent(t.row)}}},[e._v("\n                航线代理商\n              ")])],1)}}])}),r("el-table-column",{attrs:{fixed:"right",label:"启用状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{staticClass:"switchStyle",attrs:{value:t.row.status,disabled:!e.$checkPermission(["bookingServiceEnable"]),"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0"},on:{input:function(r){return e.onStatus(t.row,r)}}})]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingServiceCopy"],expression:"['bookingServiceCopy']"}],attrs:{type:"text"},on:{click:function(r){return e.copy(t.row)}}},[e._v("\n                复制\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingServiceUpdate"],expression:"['bookingServiceUpdate']"}],attrs:{type:"text"},on:{click:function(r){return e.edit(t.row)}}},[e._v("\n                编辑\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingServiceDel"],expression:"['bookingServiceDel']"}],attrs:{type:"text"},on:{click:function(r){return e.del(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.lineTitle,width:"1200px","close-on-click-modal":!1,visible:e.isServicerVisible},on:{"update:visible":function(t){e.isServicerVisible=t},closed:e.closeService}},[r("airline-service",{ref:"airlineService",attrs:{"st-id":e.stId,"country-service":e.countryService}})],1),r("el-dialog",{attrs:{title:"关联代理商",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.agentLoading,expression:"agentLoading"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"400px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联代理商","已关联代理商"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.agentList},model:{value:e.agentForm.selectAgents,callback:function(t){e.$set(e.agentForm,"selectAgents",t)},expression:"agentForm.selectAgents"}}),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n                取 消\n              ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.setAgentConfirm}},[e._v("\n                确 定\n              ")])],1)],1)])],1),r("add-edit-form",{directives:[{name:"show",rawName:"v-show",value:e.isEditFormShow,expression:"isEditFormShow"}],ref:"addEditForm",attrs:{"is-edit":e.isEdit,"is-copy":e.isCopy,tools:e.tools},on:{closeForm:e.closeForm}})],1)]),r("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.cancel}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("p",[e._v("\n        "+e._s("选择"+e.title)+"\n      ")]),"three"!==e.isType?r("p",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v("\n        "+e._s(e.text)+"\n      ")]):e._e()]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[r("el-form",{ref:"dialogForm",staticClass:"dialog-form",attrs:{model:e.dialogForm,"label-width":"120px","label-position":"right",size:"small"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"one"===e.isType,expression:"isType === 'one'"}],staticStyle:{height:"400px","overflow-y":"auto"}},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"80%"},attrs:{label:"区间范围",prop:"sections"}},e._l(e.dialogForm.sections,function(t,i){return r("div",{key:i,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections[i].lower,callback:function(t){e.$set(e.dialogForm.sections[i],"lower",t)},expression:"dialogForm.sections[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections[i].upper,callback:function(t){e.$set(e.dialogForm.sections[i],"upper",t)},expression:"dialogForm.sections[index].upper"}}),r("span",[r("i",0===i?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:e.addRangeData}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData(i)}}})])],1)}),0)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"two"===e.isType,expression:"isType === 'two'"}],staticStyle:{height:"400px","overflow-y":"auto"}},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"49%",display:"inline-block"},attrs:{label:"重量范围",prop:"sections1"}},e._l(e.dialogForm.sections1,function(t,i){return r("div",{key:i,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections1[i].lower,callback:function(t){e.$set(e.dialogForm.sections1[i],"lower",t)},expression:"dialogForm.sections1[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections1[i].upper,callback:function(t){e.$set(e.dialogForm.sections1[i],"upper",t)},expression:"dialogForm.sections1[index].upper"}}),r("span",[r("i",0===i?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:e.addRangeData1}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData1(i)}}})])],1)}),0),r("el-form-item",{staticClass:"is-required",staticStyle:{width:"49%",display:"inline-block"},attrs:{label:"方数范围",prop:"sections2"}},e._l(e.dialogForm.sections2,function(t,i){return r("div",{key:i,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections2[i].lower,callback:function(t){e.$set(e.dialogForm.sections2[i],"lower",t)},expression:"dialogForm.sections2[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections2[i].upper,callback:function(t){e.$set(e.dialogForm.sections2[i],"upper",t)},expression:"dialogForm.sections2[index].upper"}}),r("span",[r("i",0===i?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:e.addRangeData2}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData2(i)}}})])],1)}),0)],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:"three"===e.isType,expression:"isType === 'three'"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"450px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择"+e.title,"已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.list},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}})],1),r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n          保存\n        ")])],1)],1)])],1)},a=[],n=(r("8e6e"),r("456d"),r("c5f6"),r("768b")),o=(r("96cf"),r("3b8d")),s=r("bd86"),l=r("a8db"),c=(r("6b54"),r("a481"),r("ac6a"),r("5df3"),r("7f7f"),r("7514"),r("28a5"),r("d225")),u=r("b0b4"),d=r("308d"),p=r("6bb5"),m=r("4e2b"),g=r("9ab4"),h=r("60a3"),v=r("9dba"),y=r("ac1a"),f=r("dcc4"),b=r("615c"),k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-panel booking-service-edit"},[r("div",{staticClass:"header-top"},[r("div",{staticStyle:{float:"left"}},[e._v("\n      "+e._s(e.isEdit&&!e.isCopy?"编辑订舱服务":"新增订舱服务")+"\n    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.goBack(!1)}}},[e._v("\n      返 回\n    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n      保 存\n    ")])],1),r("div",{staticClass:"content"},[r("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"110px",size:"small"}},[r("div",{staticClass:"form-title"},[e._v("\n        基础信息\n      ")]),r("el-form-item",{attrs:{label:"航线名称",prop:"name"}},[r("el-input",{attrs:{"show-word-limit":"",maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),r("el-form-item",{attrs:{label:"航线简称",prop:"alias"}},[r("el-input",{attrs:{"show-word-limit":"",maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.alias,callback:function(t){e.$set(e.selectForm,"alias",t)},expression:"selectForm.alias"}})],1),r("el-form-item",{attrs:{label:"服务编码",prop:"serviceCode"}},[r("el-input",{ref:"firstInput",attrs:{maxlength:25,"show-word-limit":"",placeholder:"请输入"},model:{value:e.selectForm.serviceCode,callback:function(t){e.$set(e.selectForm,"serviceCode",t)},expression:"selectForm.serviceCode"}})],1),r("el-form-item",{attrs:{label:"业务类型",prop:"conveyance"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请输入",clearable:""},on:{change:e.onSFTool},model:{value:e.selectForm.conveyance,callback:function(t){e.$set(e.selectForm,"conveyance",t)},expression:"selectForm.conveyance"}},e._l(e.tools,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"服务类型",prop:"transType"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.selectForm.conveyance,size:"small",placeholder:"请选择",multiple:""},model:{value:e.selectForm.transType,callback:function(t){e.$set(e.selectForm,"transType",t)},expression:"selectForm.transType"}},e._l(e.svTypes,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"所属国际航线",prop:"routeId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.interFlightloading,disabled:!e.selectForm.conveyance,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getInterFlight},model:{value:e.selectForm.routeId,callback:function(t){e.$set(e.selectForm,"routeId",t)},expression:"selectForm.routeId"}},e._l(e.interFlightList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"分配客户",prop:"belong"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.selectForm.belong,callback:function(t){e.$set(e.selectForm,"belong",t)},expression:"selectForm.belong"}},[r("el-option",{attrs:{label:"直客",value:"0"}}),r("el-option",{attrs:{label:"同行",value:"1"}}),r("el-option",{attrs:{label:"同行&直客",value:"2"}})],1)],1),r("el-form-item",{attrs:{label:"起运国",prop:"countryFromId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.countryLoading,placeholder:"请选择",filterable:"",clearable:"",size:"small","filter-method":e.filterMethod},on:{focus:e.getCountryList},model:{value:e.selectForm.countryFromId,callback:function(t){e.$set(e.selectForm,"countryFromId",t)},expression:"selectForm.countryFromId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"起运港",prop:"portsFromId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.portloading,disabled:!e.selectForm.countryFromId||!e.selectForm.conveyance,placeholder:"请选择",filterable:"",clearable:"",size:"small"},on:{focus:e.getPortFromList},model:{value:e.selectForm.portsFromId,callback:function(t){e.$set(e.selectForm,"portsFromId",t)},expression:"selectForm.portsFromId"}},e._l(e.portFromList,function(e){return r("el-option",{key:e.id,attrs:{label:(e.code?e.code+"-":"")+e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"目的国",prop:"countryToId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.countryLoading,placeholder:"请选择",filterable:"",clearable:"",size:"small","filter-method":e.filterMethod},on:{focus:e.getCountryList},model:{value:e.selectForm.countryToId,callback:function(t){e.$set(e.selectForm,"countryToId",t)},expression:"selectForm.countryToId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"目的港",prop:"portsToId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.portloading,disabled:!e.selectForm.countryToId||!e.selectForm.conveyance,placeholder:"请选择",filterable:"",clearable:"",size:"small"},on:{focus:e.getPortToList},model:{value:e.selectForm.portsToId,callback:function(t){e.$set(e.selectForm,"portsToId",t)},expression:"selectForm.portsToId"}},e._l(e.portToList,function(e){return r("el-option",{key:e.id,attrs:{label:(e.code?e.code+"-":"")+e.name+"-"+e.alias,value:e.id}})}),1)],1),"1"!==e.selectForm.conveyance&&"2"!==e.selectForm.conveyance?r("el-form-item",{attrs:{label:"货币单位",prop:"currencyId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.currencyLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCurrencyList},model:{value:e.selectForm.currencyId,callback:function(t){e.$set(e.selectForm,"currencyId",t)},expression:"selectForm.currencyId"}},e._l(e.currencyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1):e._e(),"1"!==e.selectForm.conveyance&&"2"!==e.selectForm.conveyance||-1===e.selectForm.transType.indexOf("2")?e._e():r("el-form-item",{attrs:{label:"整柜货币单位",prop:"currencyId1"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.currencyLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCurrencyList},model:{value:e.selectForm.currencyId1,callback:function(t){e.$set(e.selectForm,"currencyId1",t)},expression:"selectForm.currencyId1"}},e._l(e.currencyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),"1"!==e.selectForm.conveyance&&"2"!==e.selectForm.conveyance||-1===e.selectForm.transType.indexOf("3")?e._e():r("el-form-item",{attrs:{label:"拼箱货币单位",prop:"currencyId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.currencyLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCurrencyList},model:{value:e.selectForm.currencyId2,callback:function(t){e.$set(e.selectForm,"currencyId2",t)},expression:"selectForm.currencyId2"}},e._l(e.currencyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"重量单位",prop:"umWeight"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",loading:e.weightUnitLoad},on:{focus:e.getWeightUnitList},model:{value:e.selectForm.umWeight,callback:function(t){e.$set(e.selectForm,"umWeight",t)},expression:"selectForm.umWeight"}},e._l(e.weightUnitList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label+"-"+e.value,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"长度单位",prop:"umLength"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",loading:e.lengthUnitLoad},on:{focus:e.getLengthUnitList},model:{value:e.selectForm.umLength,callback:function(t){e.$set(e.selectForm,"umLength",t)},expression:"selectForm.umLength"}},e._l(e.lengthUnitList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label+"-"+e.value,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"支持最大重量",prop:"weight"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.weight,callback:function(t){e.$set(e.selectForm,"weight",t)},expression:"selectForm.weight"}})],1),r("el-form-item",{attrs:{label:"支持最大长度",prop:"length"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.length,callback:function(t){e.$set(e.selectForm,"length",t)},expression:"selectForm.length"}})],1),r("el-form-item",{attrs:{label:"体积密度比",prop:"densityRatio"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,step:1,"step-strictly":""},model:{value:e.selectForm.densityRatio,callback:function(t){e.$set(e.selectForm,"densityRatio",t)},expression:"selectForm.densityRatio"}})],1),r("el-form-item",{attrs:{label:"体积重",prop:"volumeWeight"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999999,step:1,"step-strictly":""},model:{value:e.selectForm.volumeWeight,callback:function(t){e.$set(e.selectForm,"volumeWeight",t)},expression:"selectForm.volumeWeight"}})],1),r("el-form-item",{attrs:{label:"默认供应商",prop:"custId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.supplierLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCustTypeList},model:{value:e.selectForm.custId,callback:function(t){e.$set(e.selectForm,"custId",t)},expression:"selectForm.custId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name?e.name:"--",value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:100},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1),r("div",{staticClass:"form-title"},[e._v("\n        运输条款\n      ")])],1),r("div",[r("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab",toolbarItems:["heading","bold","italic"]},height:"300px"},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}})],1)],1)])},w=[],F=r("16d8"),L=r("fc1a"),x=r("4255"),O=r("2895"),S=r("8322");function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function T(){return{belong:void 0,serviceCode:void 0,remark:void 0,name:void 0,alias:void 0,conveyance:void 0,transType:[],routeId:void 0,routeName:void 0,countryFromId:void 0,countryFromName:void 0,portsFromId:void 0,portsFromName:void 0,countryToId:void 0,countryToName:void 0,portsToId:void 0,portsToName:void 0,currencyId:void 0,currencyName:void 0,currencyId1:void 0,currencyName1:void 0,currencyId2:void 0,currencyName2:void 0,umWeight:void 0,umLength:void 0,weight:void 0,length:void 0,custId:void 0,custName:void 0,shippingTerms:void 0,densityRatio:void 0,volumeWeight:void 0}}var j=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.lengthUnitLoad=!1,e.weightUnitLoad=!1,e.lengthUnitList=[],e.weightUnitList=[],e.selectForm=T(),e.formRules={serviceCode:[{required:!0,message:"服务编码不能为空",trigger:"blur"},{validator:function(e,t,r){var i=/^[a-zA-Z0-9 .·_-]+$/;t?i.test(t)?r():r(new Error("服务编码不能有中文及特殊字符")):r(new Error("服务编码不能为空"))},trigger:"blur"}],name:[{required:!0,message:"航线名称不能为空",trigger:"blur"}],alias:[{required:!0,message:"航线简称不能为空",trigger:"change"}],conveyance:[{required:!0,message:"请选择业务类型",trigger:"change"}],transType:[{required:!0,message:"请选择服务类型",trigger:"change"}],routeId:[{required:!0,message:"请选择国际航线",trigger:"change"}],countryFromId:[{required:!0,message:"请选择起运国",trigger:"change"}],portsFromId:[{required:!0,message:"请选择起运港",trigger:"change"}],countryToId:[{required:!0,message:"请选择目的国",trigger:"change"}],portsToId:[{required:!0,message:"请选择目的港",trigger:"change"}],belong:[{required:!0,message:"分配客户不能为空",trigger:"change"}],umWeight:[{required:!0,message:"请选择重量单位",trigger:"change"}],umLength:[{required:!0,message:"请选择长度单位",trigger:"change"}],densityRatio:[{required:!0,message:"体积密度比不能为空",trigger:"change"}],volumeWeight:[{required:!0,message:"体积重不能为空",trigger:"change"}],weight:[{required:!0,message:"最大重量不能为空",trigger:"blur"}],length:[{required:!0,message:"最大长度不能为空",trigger:"blur"}],currencyId:[{required:!0,message:"请选择货币单位",trigger:"change"}],custId:[{required:!0,message:"默认供应商不能为空",trigger:"change"}],currencyId1:[{required:!0,message:"请选择整柜货币单位",trigger:"change"}],currencyId2:[{required:!0,message:"请选择拼箱货币单位",trigger:"change"}]},e.terms="",e.loading=!1,e.supplierLoading=!1,e.supplierList=[],e.currencyLoading=!1,e.currencyList=[],e.interFlightloading=!1,e.interFlightList=[],e.countryLoading=!1,e.countryList=[],e.allCountryList=[],e.portloading=!1,e.portFromList=[],e.portToList=[],e.svTypes=[],e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"setTerms",value:function(e){this.$refs.markdownEditor.setHtml(e)}},{key:"init",value:function(e){var t=this;this.selectForm=T(),this.$nextTick(Object(o["a"])(regeneratorRuntime.mark(function r(){var i,a,n,o,s,c,u;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:if(i=t.$refs.selectForm,i.clearValidate(),!t.isCopy){r.next=7;break}e.id,e.name,e.alias,e.serviceCode,a=e.transType,n=Object(l["a"])(e,["id","name","alias","serviceCode","transType"]),t.selectForm=I({},n,{transType:a.split(",")}),r.next=13;break;case 7:if(!t.isEdit){r.next=12;break}o=e.transType,s=Object(l["a"])(e,["transType"]),t.selectForm=I({},s,{transType:o.split(",")}),r.next=13;break;case 12:return r.abrupt("return");case 13:return t.loading=!0,r.next=16,Object(f["h"])([e.id]);case 16:return c=r.sent,u=c.data[0]||{},t.setTerms(u.shippingTerms),t.getSvTypes(t.selectForm.conveyance),r.next=22,t.getCustTypeList();case 22:return r.next=24,t.getCurrencyList();case 24:return r.next=26,t.getPortFromList();case 26:return r.next=28,t.getPortToList();case 28:return r.next=30,t.getCountryList();case 30:return r.next=32,t.getInterFlight();case 32:return r.next=34,t.getLengthUnitList();case 34:return r.next=36,t.getWeightUnitList();case 36:t.loading=!1;case 37:case"end":return r.stop()}},r)})))}},{key:"save",value:function(){var e=this,t=e.$refs.selectForm,r=this.$refs.markdownEditor.getHtml();t.validate(function(t){if(t){var i=e.selectForm,a=i.transType,n=Object(l["a"])(i,["transType"]),o=I({},n);o.shippingTerms=r,o.transType=a.join(","),e.interFlightList.map(function(e){e.id===o.routeId&&(o.routeName=e.name)}),e.allCountryList.map(function(e){e.id===o.countryFromId&&(o.countryFromName=e.name)}),e.portFromList.map(function(e){e.id===o.portsFromId&&(o.portsFromName=(e.code?e.code+"-":"")+e.name)}),e.allCountryList.map(function(e){e.id===o.countryToId&&(o.countryToName=e.name)}),e.portToList.map(function(e){e.id===o.portsToId&&(o.portsToName=(e.code?e.code+"-":"")+e.name)}),e.currencyList.map(function(e){e.id===o.currencyId&&(o.currencyName=e.name)}),e.currencyList.map(function(e){e.id===o.currencyId1&&(o.currencyName1=e.name)}),e.currencyList.map(function(e){e.id===o.currencyId2&&(o.currencyName2=e.name)}),e.supplierList.map(function(e){e.id===o.custId&&(o.custName=e.name)}),e.isEdit&&!e.isCopy?e.edit(o):e.add(o)}})}},{key:"add",value:function(e){var t=this;this.loading=!0,Object(f["p"])(e).then(function(e){t.loading=!1,e.success&&(t.$message.success("添加成功"),t.goBack(!0))}).catch(function(e){return t.loading=!1,t.$message.error("添加失败"),e})}},{key:"edit",value:function(e){var t=this;this.loading=!0,Object(f["p"])(e).then(function(e){t.loading=!1,e.success&&(t.goBack(!0),t.$message.success("编辑成功"))}).catch(function(e){return t.loading=!1,t.$message.error("编辑失败"),e})}},{key:"getLengthUnitList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.lengthUnitLoad=!0,Object(f["n"])({type:"measurement_type"}).then(function(e){t.lengthUnitLoad=!1,t.lengthUnitList=e.data}).catch(function(e){return t.lengthUnitLoad=!1,e});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getWeightUnitList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.weightUnitLoad=!0,Object(f["n"])({type:"weight_type"}).then(function(e){t.weightUnitLoad=!1,t.weightUnitList=e.data}).catch(function(e){return t.weightUnitLoad=!1,e});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCustTypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:9999,cas:"S",subtypeId:this.selectForm.conveyance,typeId:"02"},e.next=3,Object(f["k"])(t).then(function(e){var t=e.data||{},i=t.result||[];r.supplierList=JSON.parse(JSON.stringify(i).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCurrencyList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.currencyLoading=!0,e.next=3,Object(S["c"])().then(function(e){var r=e.data||{};t.currencyList=r.result||[],t.currencyLoading=!1}).catch(function(e){return t.currencyLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPortFromList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.portloading=!0,t={page:1,size:99999,type:this.selectForm.conveyance,countryId:this.selectForm.countryFromId?this.selectForm.countryFromId:""},e.next=4,Object(O["f"])(t).then(function(e){r.portloading=!1;var t=e.data||{};r.portFromList=t.result||[]}).catch(function(e){return e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPortToList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.portloading=!0,t={page:1,size:99999,type:this.selectForm.conveyance,countryId:this.selectForm.countryToId?this.selectForm.countryToId:""},e.next=4,Object(O["f"])(t).then(function(e){r.portloading=!1;var t=e.data||{};r.portToList=t.result||[]}).catch(function(e){return e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountryList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.countryLoading=!0,e.next=3,Object(x["c"])().then(function(e){var r=e.data||{};t.countryList=r.result||[],t.allCountryList=r.result||[],t.countryLoading=!1}).catch(function(e){return t.countryLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getInterFlight",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.interFlightloading=!0,t={page:1,size:99999,type:this.selectForm.conveyance},e.next=4,Object(L["c"])(t).then(function(e){r.interFlightloading=!1;var t=e.data||{},i=t.result||[];r.interFlightList=i.filter(function(e){return e.type===r.selectForm.conveyance})}).catch(function(e){return e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSvTypes",value:function(e){var t=this,r={type:"BOOKING_BUSINESS_TYPE"+e};Object(f["n"])(r).then(function(e){e.success&&(t.svTypes=e.data||[])}).catch(function(e){return e})}},{key:"onSFTool",value:function(e){this.selectForm.transType=[],this.selectForm.routeId=void 0,this.selectForm.custId=void 0,this.getSvTypes(e)}},{key:"filterMethod",value:function(e){if(e.trim()){var t=e.toUpperCase();this.countryList=this.allCountryList.filter(function(e){return-1!==(e.name+"-"+e.alias).toUpperCase().indexOf(t)})}else this.countryList=this.allCountryList}},{key:"goBack",value:function(e){this.setTerms(""),this.$emit("closeForm",e)}}]),t}(h["e"]);j=g["a"]([Object(h["a"])({name:"addEditForm",components:{MarkdownEditor:F["a"]},props:{isEdit:{type:Boolean,default:!1},isCopy:{type:Boolean,default:!1},tools:{type:Array,default:function(){return[]}}}})],j);var _=j,E=_,D=(r("c3cb"),r("2877")),$=Object(D["a"])(E,k,w,!1,null,"c898c7e2",null),V=$.exports,P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["bookingServiceServiceLineAdd"],expression:"['bookingServiceServiceLineAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addServicer}},[e._v("\n        新增服务商\n      ")])],1),r("el-col",{attrs:{span:20}},[r("div",{staticStyle:{"text-align":"right"}},[r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"起运时间",filterable:"",clearable:""},model:{value:e.searchForm.shipDay,callback:function(t){e.$set(e.searchForm,"shipDay",t)},expression:"searchForm.shipDay"}},e._l(e.weekdays,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"截报关时间",filterable:"",clearable:""},model:{value:e.searchForm.customDay,callback:function(t){e.$set(e.searchForm,"customDay",t)},expression:"searchForm.customDay"}},e._l(e.weekdays,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),r("el-input",{staticStyle:{width:"250px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入",maxlength:150},model:{value:e.keyWord,callback:function(t){e.keyWord=t},expression:"keyWord"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.keyType,callback:function(t){e.keyType=t},expression:"keyType"}},[r("el-option",{attrs:{label:"服务编码",value:"1"}}),r("el-option",{attrs:{label:"服务机构",value:"2"}})],1)],1),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.onSearch}},[e._v("\n          查询\n        ")])],1)])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"400px",border:""}},[r("el-table-column",{attrs:{prop:"orgName",label:"服务机构","min-width":"150"}}),r("el-table-column",{attrs:{prop:"serviceCode",label:"服务编码","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"entreportName",label:"中转港","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"dischargeName",label:"卸货港","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"days",label:"运输天数",width:"100"}}),r("el-table-column",{attrs:{formatter:e.formatDays,prop:"shipDay",label:"起运时间","min-width":"120"}}),r("el-table-column",{attrs:{formatter:e.formatDays,prop:"docDay",label:"截文件时间","min-width":"120"}}),r("el-table-column",{attrs:{formatter:e.formatDays,prop:"customDay",label:"截报关时间","min-width":"120"}}),r("el-table-column",{attrs:{formatter:e.formatType,prop:"orgType2",label:"二程机构类型",width:"120"}}),r("el-table-column",{attrs:{prop:"orgName2",label:"二程服务机构","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"dischargeName2",label:"二程卸货港","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"days2",label:"二程运输天数",width:"120"}}),r("el-table-column",{attrs:{formatter:e.formatDays,prop:"shipDay2",label:"二程起运时间","min-width":"120"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["bookingServiceServiceLineEdit"]),type:"text"},on:{click:function(r){return e.editServicer(t.row)}}},[e._v("\n          编辑\n        ")]),r("el-button",{attrs:{disabled:!e.$checkPermission(["bookingServiceServiceLineDel"]),type:"text"},on:{click:function(r){return e.deletServicer(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.serTitle,width:"900px",visible:e.isAddEditVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.isAddEditVisible=t},close:e.cancel}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.servicerLoading,expression:"servicerLoading"}],staticClass:"add-edit-organ"},[r("el-form",{ref:"editForm",staticClass:"airline-service-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"140px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"服务机构",prop:"orgId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,disabled:e.isEdit,size:"small",placeholder:"请选择",clearable:"",filterable:""},on:{focus:function(t){return e.getSeviceOrganList("1")}},model:{value:e.selectForm.orgId,callback:function(t){e.$set(e.selectForm,"orgId",t)},expression:"selectForm.orgId"}},e._l(e.organList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务编码",prop:"serviceCode"}},[r("el-input",{attrs:{"show-word-limit":"",maxlength:30,disabled:e.isEdit,placeholder:"请输入"},model:{value:e.selectForm.serviceCode,callback:function(t){e.$set(e.selectForm,"serviceCode",t)},expression:"selectForm.serviceCode"}})],1),r("el-form-item",{attrs:{label:"中转国",prop:"entreportCountryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",filterable:""},on:{change:function(t){return e.onCountry("enterport")}},model:{value:e.selectForm.entreportCountryId,callback:function(t){e.$set(e.selectForm,"entreportCountryId",t)},expression:"selectForm.entreportCountryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"中转港",prop:"entreport"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.selectForm.entreportCountryId,loading:e.selectLoading,size:"small",placeholder:"请选择",clearable:"",filterable:""},on:{focus:function(t){return e.getPortList("enterport")}},model:{value:e.selectForm.entreport,callback:function(t){e.$set(e.selectForm,"entreport",t)},expression:"selectForm.entreport"}},e._l(e.entreportList,function(e){return r("el-option",{key:e.id,attrs:{label:e.code+"-"+e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"卸货国",prop:"dischargeCountryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",filterable:""},on:{change:function(t){return e.onCountry("discharge")}},model:{value:e.selectForm.dischargeCountryId,callback:function(t){e.$set(e.selectForm,"dischargeCountryId",t)},expression:"selectForm.dischargeCountryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"卸货港",prop:"discharge"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.selectForm.dischargeCountryId,loading:e.selectLoading,size:"small",placeholder:"请选择",clearable:"",filterable:""},on:{focus:function(t){return e.getPortList("discharge")}},model:{value:e.selectForm.discharge,callback:function(t){e.$set(e.selectForm,"discharge",t)},expression:"selectForm.discharge"}},e._l(e.dischargeportList,function(e){return r("el-option",{key:e.id,attrs:{label:e.code+"-"+e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"运输信息",prop:"days"}},[r("el-input",{attrs:{placeholder:"运输天数"},model:{value:e.selectForm.days,callback:function(t){e.$set(e.selectForm,"days",t)},expression:"selectForm.days"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("天")])])],1),r("el-form-item",{attrs:{label:"起运时间",prop:"shipDay"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",filterable:""},model:{value:e.selectForm.shipDay,callback:function(t){e.$set(e.selectForm,"shipDay",t)},expression:"selectForm.shipDay"}},e._l(e.weekdays,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"截文件时间",prop:"docDay"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",filterable:""},model:{value:e.selectForm.docDay,callback:function(t){e.$set(e.selectForm,"docDay",t)},expression:"selectForm.docDay"}},e._l(e.weekdays,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",{attrs:{label:"截报关时间",prop:"customDay"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",filterable:""},model:{value:e.selectForm.customDay,callback:function(t){e.$set(e.selectForm,"customDay",t)},expression:"selectForm.customDay"}},e._l(e.weekdays,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),"0"===e.isAir?r("el-form-item",{attrs:{label:"是否包机",prop:"transfer"}},[r("el-radio-group",{model:{value:e.selectForm.airplane,callback:function(t){e.$set(e.selectForm,"airplane",t)},expression:"selectForm.airplane"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n              否\n            ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n              是\n            ")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"二程转运",prop:"transfer"}},[r("el-radio-group",{on:{change:e.onTransfer},model:{value:e.selectForm.transfer,callback:function(t){e.$set(e.selectForm,"transfer",t)},expression:"selectForm.transfer"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n              无\n            ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n              有\n            ")])],1)],1),e.selectForm.transfer?r("div",[r("el-form-item",{attrs:{label:"二程服务机构类型",prop:"orgType2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",filterable:""},on:{change:e.onOrgType2},model:{value:e.selectForm.orgType2,callback:function(t){e.$set(e.selectForm,"orgType2",t)},expression:"selectForm.orgType2"}},[r("el-option",{attrs:{label:"船东",value:"1"}}),r("el-option",{attrs:{label:"空运公司",value:"2"}}),r("el-option",{attrs:{label:"铁路公司",value:"3"}})],1)],1),r("el-form-item",{attrs:{label:"二程卸货国",prop:"dischargeCountryId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",filterable:""},on:{change:function(t){return e.onCountry("discharge2")}},model:{value:e.selectForm.dischargeCountryId2,callback:function(t){e.$set(e.selectForm,"dischargeCountryId2",t)},expression:"selectForm.dischargeCountryId2"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"二程服务机构",prop:"orgId2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.selectForm.orgType2,loading:e.selectLoading,size:"small",placeholder:"请选择",clearable:"",filterable:""},on:{focus:function(t){return e.getSeviceOrganList("2")}},model:{value:e.selectForm.orgId2,callback:function(t){e.$set(e.selectForm,"orgId2",t)},expression:"selectForm.orgId2"}},e._l(e.organ2List,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"二程卸货港",prop:"discharge2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.selectForm.dischargeCountryId2,loading:e.selectLoading,size:"small",placeholder:"请选择",clearable:"",filterable:""},on:{focus:function(t){return e.getPortList("discharge2")}},model:{value:e.selectForm.discharge2,callback:function(t){e.$set(e.selectForm,"discharge2",t)},expression:"selectForm.discharge2"}},e._l(e.discharge2portList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"二程运输信息",prop:"days2"}},[r("el-input",{attrs:{placeholder:"运输天数"},model:{value:e.selectForm.days2,callback:function(t){e.$set(e.selectForm,"days2",t)},expression:"selectForm.days2"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("天")])])],1),r("el-form-item",{attrs:{label:"二程起运时间",prop:"shipDay2"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择",clearable:"",filterable:""},model:{value:e.selectForm.shipDay2,callback:function(t){e.$set(e.selectForm,"shipDay2",t)},expression:"selectForm.shipDay2"}},e._l(e.weekdays,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1):e._e()],1),r("div",{staticStyle:{"text-align":"right",margin:"20px 20px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveConfirm}},[e._v("\n          确 定\n        ")])],1)],1)])],1)},N=[],z=(r("4f7f"),r("75fc"));function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function R(){return{serviceCode:"",airplane:!1,bsId:void 0,days2:void 0,discharge2:void 0,dischargeName2:void 0,dischargeCountryId2:void 0,dischargeCountryName2:void 0,orgId2:void 0,orgName2:void 0,orgType2:void 0,shipDay2:void 0,customDay:void 0,days:void 0,discharge:void 0,dischargeCountryId:void 0,dischargeCountryName:void 0,docDay:void 0,entreport:void 0,entreportName:void 0,entreportCountryId:void 0,entreportCountryName:void 0,id:void 0,orgId:void 0,orgName:void 0,orgType:void 0,shipDay:void 0,transfer:!1}}function B(e,t,r){var i=/^[1-9]+[0-9]*$/;i.test(t)?r():r(new Error("运输信息为正整数"))}var U=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.loading=!1,e.servicerLoading=!1,e.isAddEditVisible=!1,e.selectLoading=!1,e.entreportList=[],e.dischargeportList=[],e.discharge2portList=[],e.organList=[],e.organ2List=[],e.tableData=[],e.countryList=[],e.page=1,e.size=10,e.total=0,e.searchForm={shipDay:void 0,customDay:void 0,orgName:void 0,serviceCode:void 0},e.keyType="1",e.keyWord="",e.serTitle="",e.bsId="",e.isAir="",e.isEdit=!1,e.selectForm=R(),e.formRules={orgId:[{required:!0,message:"请选择服务机构",trigger:"change"}],serviceCode:[{required:!0,message:"请输入服务编码",trigger:"change"},{validator:function(e,t,r){var i=/^[a-zA-Z0-9 .·_-]+$/;t?i.test(t)?r():r(new Error("服务编码不能有中文及特殊字符")):r(new Error("服务编码不能为空"))},trigger:"blur"}],dischargeCountryId:[{required:!0,message:"请选择卸货港",trigger:"change"}],dischargeCountryId2:[{required:!0,message:"请选择二程卸货港",trigger:"change"}],discharge:[{required:!0,message:"请选择卸货港",trigger:"change"}],days:[{required:!0,message:"运输天数不能为空",trigger:"blur"},{validator:B,trigger:"blur"}],customDay:[{required:!0,message:"请选择截报关时间",trigger:"change"}],shipDay:[{required:!0,message:"请选择起运时间",trigger:"change"}],docDay:[{required:!0,message:"请选择截文件时间",trigger:"change"}],transfer:[{required:!0,message:"请选择二程转运",trigger:"change"}],orgType2:[{required:!0,message:"请选择二程服务类型",trigger:"change"}],orgId2:[{required:!0,message:"请选择二程服务机构",trigger:"change"}],discharge2:[{required:!0,message:"请选择二程卸货港",trigger:"change"}],days2:[{required:!0,message:"二程运输天数不能为空",trigger:"blur"},{validator:B,trigger:"blur"}],shipDay2:[{required:!0,message:"请选择二程起运时间",trigger:"change"}]},e.weekdays=[{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6},{label:"星期日",value:7}],e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"setData",value:function(e){this.bsId=(e||{}).id||"",this.isAir=(e||{}).conveyance||"",this.getCountryList(),this.getFirstPage()}},{key:"clearData",value:function(){this.tableData=[],this.total=0,this.searchForm={shipDay:void 0,customDay:void 0,orgName:void 0,serviceCode:void 0},this.keyType="1",this.keyWord=""}},{key:"getFirstPage",value:function(){this.page=1,this.queryAll()}},{key:"onSearch",value:function(){"1"===this.keyType?(this.searchForm.serviceCode=this.keyWord,this.searchForm.orgName=void 0):(this.searchForm.serviceCode=void 0,this.searchForm.orgName=this.keyWord),this.queryAll()}},{key:"queryAll",value:function(){var e=this;this.loading=!0;var t={page:this.page,size:this.size,model:q({id:this.bsId},this.searchForm)};Object(f["g"])(t).then(function(t){var r=t.data||{};e.tableData=r.result||[],e.total=r.total,e.loading=!1}).catch(function(t){return e.loading=!1,t})}},{key:"getCountryList",value:function(){var e=this;Object(f["j"])().then(function(t){var r=t.data||{};e.countryList=r.result||[]}).catch(function(e){return e})}},{key:"onCountry",value:function(e){switch(e){case"enterport":this.selectForm.entreport=void 0,this.entreportList=[];break;case"discharge":this.selectForm.discharge=void 0,this.dischargeportList=[];break;case"discharge2":this.selectForm.discharge2=void 0,this.discharge2portList=[],this.selectForm.orgId2=void 0,this.organ2List=[];break;default:break}}},{key:"onOrgType2",value:function(){this.selectForm.orgId2=void 0,this.organ2List=[],this.selectForm.discharge2=void 0,this.discharge2portList=[]}},{key:"getPortList",value:function(e){var t=this,r={page:1,size:99999,countryId:void 0,type:void 0},i="1"===this.selectForm.orgType2?"1":"2"===this.selectForm.orgType2?"0":"3"===this.selectForm.orgType2?"2":"";switch(e){case"enterport":r.countryId=this.selectForm.entreportCountryId,r.type=this.stId;break;case"discharge":r.countryId=this.selectForm.dischargeCountryId,r.type=this.stId;break;case"discharge2":r.countryId=this.selectForm.dischargeCountryId2,r.type=i;break;default:break}this.selectLoading=!0,Object(O["f"])(r).then(function(r){t.selectLoading=!1;var i=r.data||{};switch(e){case"enterport":t.entreportList=i.result||[];break;case"discharge":t.dischargeportList=i.result||[];break;case"discharge2":t.discharge2portList=i.result||[];break;default:break}}).catch(function(e){return t.selectLoading=!1,e})}},{key:"getSeviceOrganList",value:function(e){var t=this;this.selectLoading=!0;var r="0"===this.stId?"2":"1"===this.stId?"1":"2"===this.stId?"3":"",i=Object(z["a"])(new Set(this.countryService));"1"===e&&(this.selectForm.orgType=r);var a={type:"1"===e?r:this.selectForm.orgType2,serviceCountry:"1"===e?i.join(","):this.selectForm.dischargeCountryId2,page:1,size:99999};Object(x["e"])(a).then(function(r){t.selectLoading=!1;var i=r.data||{};"1"===e?t.organList=i.result||[]:t.organ2List=i.result||[]}).catch(function(e){return t.selectLoading=!1,e})}},{key:"addServicer",value:function(){this.isAddEditVisible=!0,this.isEdit=!1,this.serTitle="新增服务商",this.resetForm()}},{key:"editServicer",value:function(e){var t=this;this.isEdit=!0,this.serTitle="编辑服务商",this.selectForm=q({},e),this.servicerLoading=!0,this.getPortList("enterport"),this.getPortList("discharge"),this.getPortList("discharge2"),this.getSeviceOrganList("1"),this.getSeviceOrganList("2"),setTimeout(function(){t.servicerLoading=!1},2e3),this.isAddEditVisible=!0}},{key:"deletServicer",value:function(e){var t=this,r={id:e.id,serviceCode:e.serviceCode};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(f["c"])(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"onTransfer",value:function(){this.selectForm.transfer||(this.selectForm.days2=void 0,this.selectForm.discharge2=void 0,this.selectForm.dischargeCountryId2=void 0,this.selectForm.orgId2=void 0,this.selectForm.orgType2=void 0,this.selectForm.shipDay2=void 0)}},{key:"saveConfirm",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.servicerLoading=!0;var r=e.selectForm,i=r.serviceCode,a=r.airplane,n=r.customDay,o=r.days,s=r.discharge,l=r.dischargeCountryId,c=r.docDay,u=r.entreport,d=r.entreportCountryId,p=r.orgId,m=r.orgType,g=r.shipDay,h=r.transfer,v=r.days2,y=r.discharge2,b=r.dischargeCountryId2,k=r.orgId2,w=r.orgType2,F=r.shipDay2,L={serviceCode:i,airplane:a,bscId:e.bsId,dischargeCountryId:l,entreportCountryId:d,customDay:n,days:o,discharge:s,docDay:c,entreport:u,orgId:p,orgType:m,shipDay:g,transfer:h,days2:v,discharge2:y,dischargeCountryId2:b,orgId2:k,orgType2:w,shipDay2:F};e.countryList.map(function(e){e.id===l&&(L.dischargeCountryName=e.name),e.id===d&&(L.entreportCountryName=e.name),e.id===b&&(L.dischargeCountryName2=e.name)}),e.entreportList.map(function(e){e.id===u&&(L.entreportName=e.name)}),e.dischargeportList.map(function(e){e.id===s&&(L.dischargeName=e.name)}),e.discharge2portList.map(function(e){e.id===y&&(L.dischargeName2=e.name)}),e.organList.map(function(e){e.id===p&&(L.orgName=e.name)}),e.organ2List.map(function(e){e.id===k&&(L.orgName2=e.name)}),e.isEdit?(L.id=e.selectForm.id,Object(f["s"])(L).then(function(t){e.$message({type:"success",message:"操作成功"}),e.servicerLoading=!1,e.isAddEditVisible=!1,e.resetForm(),e.queryAll()}).catch(function(t){return e.servicerLoading=!1,t})):Object(f["q"])(L).then(function(t){e.$message({type:"success",message:"操作成功"}),e.servicerLoading=!1,e.isAddEditVisible=!1,e.resetForm(),e.queryAll()}).catch(function(t){return e.servicerLoading=!1,t})})}},{key:"cancel",value:function(){this.isAddEditVisible=!1,this.resetForm()}},{key:"resetForm",value:function(){var e=this;this.selectForm=R(),this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"formatDays",value:function(e,t,r){var i=this.weekdays,a=i.find(function(e){return e.value===r})||{};return a.label||""}},{key:"formatType",value:function(e,t,r){var i="";switch(r){case"1":i="船东";break;case"2":i="空运公司";break;case"3":i="铁路公司";break}return i}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"labelPosition",get:function(){var e=y["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=y["a"].language;return e||"en"}}]),t}(h["e"]);U=g["a"]([Object(h["a"])({name:"AirlineServiceProvider",components:{},props:{stId:{type:String,default:""},countryService:{type:Array,default:function(){return[]}}}})],U);var W=U,M=W,H=(r("83ea"),Object(D["a"])(M,P,N,!1,null,"45ab8522",null)),K=H.exports;function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(r,!0).forEach(function(t){Object(s["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function G(){return{loadType:void 0,yType:void 0,xType:void 0,serviceSubtype:{key:void 0,value:void 0},service:{key:void 0,value:void 0},keyValues:[{country:{key:void 0,value:void 0},keyValue:{key:void 0,value:void 0}}],ranges:[{keyValue:{key:void 0,value:void 0},type:void 0,upperLower:{upper:void 0,lower:void 0}}],sections:[{lower:void 0,upper:void 0}],sections1:[{lower:void 0,upper:void 0}],sections2:[{lower:void 0,upper:void 0}],xy:""}}var X=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.text="(取值范围：>=起始值， <结束值)",e.title="",e.dialogVisible=!1,e.dialogLoading=!1,e.dialogForm=G(),e.isType="",e.options=[],e.list=[],e.currentServiceId="",e.currentSubtypeId="",e.isItemDialogShow=!1,e.agentLoading=!1,e.agentForm={selectAgents:[]},e.agentList=[],e.lineTitle="",e.stId="",e.countryService=[],e.isServicerVisible=!1,e.loading=!1,e.isEdit=!1,e.isCopy=!1,e.isEditFormShow=!1,e.tableData=[],e.selectValue={countryFromId:void 0,countryToId:void 0,portFrom:void 0,portsToId:void 0,transType:void 0,conveyance:void 0,keyword:void 0},e.copyRange=[],e.copyKey=[],e.tools=[],e.svTypes=[],e.startPortList=[],e.endPortList=[],e.countryList=[],e.selectLoading=!1,e.selectType="1",e.page=1,e.size=10,e.total=0,e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"formatTrans",value:function(e){var t="",r=[{id:"0",name:"包板"},{id:"1",name:"散货"},{id:"2",name:"整柜"},{id:"3",name:"拼箱"},{id:"4",name:"整车"},{id:"5",name:"拼箱"}],i=e.split(",");return i.map(function(e){var i=r.find(function(t){return t.id===e})||{};i.name&&(t+=i.name+" ")}),t}},{key:"showServiceAgent",value:function(e){var t=this;this.title="关联代理商【"+e.name+"】",this.isItemDialogShow=!0,this.currentServiceId=e.id,this.agentLoading=!0;var r={bsId:e.id};Promise.all([this.getAssociatedAgentList(r),this.getCustTypeList((e||{}).conveyance)]).then(function(e){t.agentLoading=!1}).catch(function(e){return t.agentLoading=!1,e})}},{key:"getCustTypeList",value:function(e){var t=this,r={page:1,size:9999,cas:"A",typeId:"02",subtypeId:e};return Object(f["k"])(r).then(function(e){var r=e.data||{},i=r.result||[];t.agentList=JSON.parse(JSON.stringify(i).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e})}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"filterMethod",value:function(e,t){var r=t.name||"";return r.indexOf(e)>-1}},{key:"getAssociatedAgentList",value:function(e){var t=this;return Object(f["d"])(e).then(function(e){var r=e.data||[];t.agentForm.selectAgents=r.map(function(e){return e.id})}).catch(function(e){return t.agentLoading=!1,e})}},{key:"setAgentConfirm",value:function(){var e=this,t=this.agentForm.selectAgents.map(function(t){var r,i=e.agentList.find(function(e){return e.id===t}),a=i?i.name:"";return r={id:t,name:a},r}),r={agents:t,id:this.currentServiceId};Object(f["o"])(r).then(function(t){e.$message({type:"success",message:"保存成功"}),e.itemDialogClose(),e.queryAll()}).catch(function(e){return e})}},{key:"closeService",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.airlineService;t.clearData()})}},{key:"showServiceLine",value:function(e){var t=this;this.isServicerVisible=!0,this.stId=e.conveyance,this.countryService=[e.countryFromId,e.countryToId],this.lineTitle="航线服务商 - "+e.name,this.$nextTick(function(){var r=t.$refs.airlineService;r.setData(e)})}},{key:"getContainerList",value:function(){var e=this;this.dialogLoading=!0;var t={page:1,size:9999};Object(f["i"])(t).then(function(t){var r=t.data||{},i=r.result||[];e.list=i,e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"getAviationList",value:function(){var e=this;this.dialogLoading=!0;var t={model:{},page:1,size:9999};Object(f["e"])(t).then(function(t){var r=t.data||{},i=r.result||[];e.list=i.map(function(e){var t=e.id,r=e.name;return{id:t.toString(),name:r}}),e.dialogLoading=!1}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"isChargeSide",value:function(e){var t=(e||"").split(",");return!!t.some(function(e){return"1"===e||"3"===e||"5"===e})}},{key:"onChargeSide",value:function(e){var t=this,r=e.conveyance,i=e.transType,a=e.id,n=e.name,o=i.split(",");o.map(function(e){"1"===e?(t.isType="one",t.title="重量区间",t.dialogVisible=!0):"3"===e?(t.isType="one",t.title="体积区间",t.dialogVisible=!0):"5"===e&&(t.title="重量&方数区间",t.isType="two",t.dialogVisible=!0)}),this.currentServiceId=a,this.dialogForm.xy="X",this.dialogForm.loadType=i,this.dialogForm.service={key:a,value:n},this.dialogForm.serviceSubtype={key:r,value:"0"===r?"空运":"1"===r?"海运":"2"===r?"铁路":"4"===r?"卡航":""},this.getPriceConfig()}},{key:"isChargeType",value:function(e){var t=(e||"").split(",");return!!t.some(function(e){return"0"===e||"2"===e||"4"===e})}},{key:"onChargeType",value:function(e){var t=this,r=e.conveyance,i=e.transType,a=e.id,n=e.name,o=i.split(",");o.map(function(e){"0"===e?(t.title="定义航空板",t.isType="three",t.getAviationList(),t.dialogVisible=!0):"2"===e?(t.title="定义柜型",t.isType="three",t.getContainerList(),t.dialogVisible=!0):"4"===e&&(t.title="设置车型",t.isType="three",t.dialogVisible=!0)}),this.currentServiceId=a,this.dialogForm.xy="X",this.dialogForm.loadType=i,this.dialogForm.service={key:a,value:n},this.dialogForm.serviceSubtype={key:r,value:"0"===r?"空运":"1"===r?"海运":"2"===r?"铁路":"4"===r?"卡航":""},this.getPriceConfig()}},{key:"getPriceConfig",value:function(){var e=this;this.dialogLoading=!0;var t={serviceId:this.currentServiceId,xy:this.dialogForm.xy,serviceType:"02"};Object(f["m"])(t).then(function(t){var r=t.data||[];if(Array.isArray(r)&&r.length<=0)e.dialogLoading=!1;else{var i=r[0]||{},a=i.ranges,n=i.keyValues,o=i.id,s=[];s=Array.isArray(a)&&a.length>0?(a||[]).map(function(e){if(e.upperLower){var t=e.upperLower,r=t.upper,i=t.lower,a={lower:i||void 0,upper:r||void 0};return{type:e.type,upperLower:a,keyValue:e.keyValue||void 0}}var n={lower:void 0,upper:void 0};return{type:e.type,upperLower:n,keyValue:e.keyValue||void 0}}):[{upperLower:{lower:void 0,upper:void 0}}],e.copyRange=s,e.copyKey=n,e.dialogForm.id=o,"one"===e.isType?(e.dialogForm.sections=s.map(function(e){return e.upperLower}),e.dialogLoading=!1):"three"===e.isType?(e.options=n.map(function(e){return(e.keyValue||{}).key}),e.dialogLoading=!1):"two"===e.isType&&(e.dialogForm.sections1=s.map(function(e){if("0"===e.type)return e.upperLower}),e.dialogForm.sections2=s.map(function(e){if("1"===e.type)return e.upperLower}),e.dialogLoading=!1)}}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"addRangeData",value:function(){this.dialogForm.sections.push({lower:void 0,upper:void 0})}},{key:"deleteRangeData",value:function(e){this.dialogForm.sections.splice(e,1)}},{key:"addRangeData1",value:function(){this.dialogForm.sections1.push({lower:void 0,upper:void 0})}},{key:"deleteRangeData1",value:function(e){this.dialogForm.sections1.splice(e,1)}},{key:"addRangeData2",value:function(){this.dialogForm.sections2.push({lower:void 0,upper:void 0})}},{key:"deleteRangeData2",value:function(e){this.dialogForm.sections2.splice(e,1)}},{key:"cancel",value:function(){this.dialogVisible=!1,this.isType="",this.options=[],this.list=[],this.copyRange=[],this.copyKey=[],this.dialogForm=G()}},{key:"rangeValidate",value:function(e){var t=e.every(function(e){return(0===e.lower||e.lower)&&e.upper});if(!t)return this.$message.error("请完整填写区间值"),!1;var r=e.some(function(e){return e.upper<=e.lower});if(r)return this.$message({type:"error",message:"下限值不能大于等于上限值"}),!1;var i=!1;if(e.map(function(t,r){i=e.some(function(e,i){return r!==i&&(e.lower<=t.lower&&t.lower<e.upper||e.lower<t.upper&&t.upper<=e.upper)})}),i)return this.$message({type:"error",message:"区间范围不能重叠"}),!1;for(var a=!1,n=0;n<e.length;n++)if(n>0){var o=e[n],s=e[n-1];if(o.lower!==s.upper){a=!0;break}}return!a||(this.$message({type:"error",message:"区间范围必须连续"}),!1)}},{key:"save",value:function(){var e=this,t=this.dialogForm,r=t.loadType,i=(t.keyValues,t.ranges,t.sections),a=t.sections1,n=t.sections2,o=Object(l["a"])(t,["loadType","keyValues","ranges","sections","sections1","sections2"]),s=Q({serviceType:{key:"02",value:"订舱"},loadType:r},o),c=[],u=[],d=[];if("one"===this.isType){i.map(function(e){c.push({type:"",upperLower:e})});var p=this.rangeValidate(i);if(!p)return;s.ranges=c,s.keyValues=this.copyKey}else if("three"===this.isType)this.options.map(function(t){var r=e.list.find(function(e){return e.id===t})||{};r.id&&r.name&&c.push({country:{key:"",value:""},keyValue:{key:r.id,value:r.name}})}),s.keyValues=c,s.ranges=this.copyRange.map(function(e){var t=e.type,r=e.upperLower;return{type:t,upperLower:r}});else if("two"===this.isType){a.map(function(e){u.push({type:"0",upperLower:e})}),n.map(function(e){d.push({type:"1",upperLower:e})});var m=this.rangeValidate(a);if(!m)return;var g=this.rangeValidate(n);if(!g)return;s.ranges=[].concat(u,d),s.keyValues=this.copyKey}this.dialogLoading=!0,Object(f["r"])(s).then(function(t){e.$message({type:"success",message:"保存成功"}),e.dialogLoading=!1,e.cancel(),e.queryAll()}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"add",value:function(){this.$refs.addEditForm.init(),this.isEdit=!1,this.isCopy=!1,this.isEditFormShow=!0}},{key:"setTable",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.table;t.doLayout()})}},{key:"closeForm",value:function(e){e&&this.queryAll(1),this.isEditFormShow=!1,this.setTable()}},{key:"copy",value:function(e){this.$refs.addEditForm.init(e),this.isEdit=!0,this.isCopy=!0,this.isEditFormShow=!0}},{key:"edit",value:function(e){this.$refs.addEditForm.init(e),this.isEdit=!0,this.isCopy=!1,this.isEditFormShow=!0}},{key:"del",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(f["b"])(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll(1)}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"onStatus",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,r){var i,a,o,s,l=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.status&&t.status!==r){e.next=2;break}return e.abrupt("return");case 2:return i="0"===r?"禁用":"开启",e.next=5,this.$confirm("此操作将".concat(i,"该航线，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 5:if(a=e.sent,o=Object(n["a"])(a,2),s=o[0],o[1],!s){e.next=11;break}return e.abrupt("return");case 11:this.loading=!0,Object(f["a"])({id:t.id}).then(function(){l.$message.success("修改成功"),l.queryAll()}).catch(function(e){return l.loading=!1,e});case 13:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var r={model:Q({},this.selectValue),page:this.page,size:this.size};switch(this.selectType){case"1":r.model.serviceCode=this.selectValue.keyword;break;case"2":r.model.name=this.selectValue.keyword;break}Object(f["f"])(r).then(function(e){t.loading=!1;var r=e.data||{};t.tableData=r.result||[],t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"onSVTool",value:function(e){this.selectValue.transType=void 0,this.selectValue.portFrom=void 0,this.selectValue.portsToId=void 0,this.selectValue.countryFromId=void 0,this.selectValue.countryToId=void 0,this.getSvTypes(e)}},{key:"getSubtypeList",value:function(){var e=this,t={typeId:"02"};Object(b["n"])(t).then(function(t){t.success&&(e.tools=(t.data||[]).map(function(e){return Q({},e,{value:e.id,label:e.name})}))}).catch(function(e){return e})}},{key:"getSvTypes",value:function(e){var t=this,r={type:"BOOKING_BUSINESS_TYPE"+e};Object(f["n"])(r).then(function(e){e.success&&(t.svTypes=e.data||[])}).catch(function(e){return e})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(f["j"])().then(function(t){var r=t.data||{};e.countryList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onCountryFrom",value:function(){this.selectValue.portFrom=void 0,this.startPortList=[]}},{key:"onCountryTo",value:function(){this.selectValue.portsToId=void 0,this.endPortList=[]}},{key:"getStartPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.selectValue.countryFromId,type:this.selectValue.conveyance};Object(f["l"])(t).then(function(t){var r=t.data||{};e.startPortList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getEndPortData",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:99999,countryId:this.selectValue.countryToId,type:this.selectValue.conveyance};Object(f["l"])(t).then(function(t){var r=t.data||{};e.endPortList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll(),this.getCountryList(),this.getSubtypeList(),this.getSvTypes("0")}},{key:"custId",get:function(){var e=v["a"].info||{},t=e.custId;return t}},{key:"labelPosition",get:function(){var e=y["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=y["a"].language;return e||"en"}}]),t}(h["e"]);X=g["a"]([Object(h["a"])({name:"Port",components:{addEditForm:V,airlineService:K},props:{}})],X);var Y=X,Z=Y,ee=(r("cac2"),Object(D["a"])(Z,i,a,!1,null,"54901e2d",null));t["default"]=ee.exports},fc1a:function(e,t,r){"use strict";r.d(t,"c",function(){return a}),r.d(t,"d",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return s});var i=r("b32d");function a(e){var t={url:"/setting/route/getRouteList",method:"get",params:e};return Object(i["a"])(t)}function n(e){var t={url:"/setting/route/saveRoute",method:"post",data:e};return Object(i["a"])(t)}function o(e){var t={url:"/setting/route/deleteRoute",method:"delete",params:e};return Object(i["a"])(t)}function s(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}}}]);