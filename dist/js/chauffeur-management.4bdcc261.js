(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chauffeur-management"],{"04cb":function(t,e,a){"use strict";var r=a("52e6"),n=a.n(r);n.a},1:function(t,e){},"15dd":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDetails,expression:"!showDetails"}]},[a("head-info",{attrs:{title:"航空号段",info:""}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-panel"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:2}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["airlineNumberAllot"],expression:"['airlineNumberAllot']"}],attrs:{type:"text",size:"small"},on:{click:t.showAllotModal}},[t._v("\n            分配\n          ")]),"0"===t.custType&&t.$checkPermission(["airlineNumberImport"])?a("el-button",{attrs:{type:"text",size:"small"},on:{click:t.showImportModal}},[t._v("\n            导入\n          ")]):t._e()],1),a("el-col",{attrs:{span:22}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-select",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"航空公司",size:"small",filterable:"",clearable:""},on:{change:function(e){return t.loadData(1)}},model:{value:t.searchForm.airlinesId,callback:function(e){t.$set(t.searchForm,"airlinesId",e)},expression:"searchForm.airlinesId"}},t._l(t.airlinesList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["airlineNumberQuery"],expression:"['airlineNumberQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(e){return t.loadData(1)}}},[t._v("\n              查询\n            ")])],1)])],1),a("el-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 313px)"}},[a("el-table-column",{attrs:{prop:"airlineCompany",label:"航空公司"}}),a("el-table-column",{attrs:{prop:"total",label:"总数量"}}),a("el-table-column",{attrs:{prop:"surplus",label:"剩余数量"}}),a("el-table-column",{attrs:{prop:"allocated",label:"已分配"}}),a("el-table-column",{attrs:{prop:"printedOrder",label:"已打单"}}),a("el-table-column",{attrs:{prop:"shipped",label:"已发运"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showLog(e.row)}}},[t._v("\n              操作日志\n            ")]),t._v("\n             \n            "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.showRowDetails(e.row)}}},[t._v("\n              查看\n            ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":t.pagination.page,"page-size":t.pagination.size,layout:"total, prev, pager, next",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),a("import-modal",{ref:"importModal",attrs:{"airlines-list":t.airlinesList},on:{load:function(e){return t.loadData(1)}}}),a("allot-modal",{ref:"allotModal",on:{load:function(e){return t.loadData(1)}}}),a("operation-log",{ref:"operationLog"})],1),a("row-details",{directives:[{name:"show",rawName:"v-show",value:t.showDetails,expression:"showDetails"}],ref:"rowDetails",on:{goBack:t.goBack}})],1)},n=[],i=a("d225"),s=a("b0b4"),o=a("308d"),l=a("6bb5"),c=a("4e2b"),u=a("9ab4"),d=a("60a3"),m=a("9dba"),p=a("b32d");function h(t){var e={url:"/cfg/avi/section_list",method:"post",data:t};return Object(p["a"])(e)}function f(t){var e={url:"/setting/org/getOrgList",method:"get",params:t};return Object(p["a"])(e)}function v(){var t={url:"/cfg/avi/find_section",method:"post"};return Object(p["a"])(t)}function g(t){var e={url:"/cfg/avi/e",method:"post",data:t,headers:{"content-type":"multipart/form-data"}};return Object(p["a"])(e)}function b(t){var e={url:"/cfg/avi/distribution",method:"post",data:t};return Object(p["a"])(e)}function y(t){var e={url:"/cfg/avi/log",method:"post",data:t};return Object(p["a"])(e)}function w(t){var e={url:"/cfg/avi/customer_list",method:"post",params:t};return Object(p["a"])(e)}function k(t){var e={url:"/cfg/avi/customer_details",method:"post",data:t};return Object(p["a"])(e)}function O(t){var e={url:"/cfg/avi/recovery",method:"post",data:t};return Object(p["a"])(e)}var x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"航空号段导入",width:"600px",visible:t.visible,"close-on-click-modal":!1},on:{close:t.closeModal}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"90px",size:"small"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"航空公司",prop:"id"}},[a("el-select",{attrs:{placeholder:"请选择航空公司",filterable:"",clearable:""},on:{change:t.airlinesChange},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}},t._l(t.airlinesList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"选择文件",prop:"file"}},[t.form.id?a("el-upload",{ref:"uploadFile",attrs:{action:"","http-request":t.parseFile,"before-upload":t.beforeUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small"}},[a("i",{staticClass:"el-icon-upload"}),t._v("\n              选择文件\n            ")])],1):a("el-button",{attrs:{size:"small"},on:{click:t.selectFile}},[a("i",{staticClass:"el-icon-upload"}),t._v("\n            选择文件\n          ")])],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.closeModal}},[t._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.closeModal}},[t._v("\n      确 认\n    ")])],1),a("el-dialog",{attrs:{width:"600px",title:"导入完成",visible:t.innerVisible,"close-on-click-modal":!1,"append-to-body":""}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("span",[t._v("总数量："+t._s(t.result.total)+" 条    成功数："),a("span",{staticClass:"g"},[t._v(t._s(t.result.success))]),t._v("    失败数："),a("span",{staticClass:"r"},[t._v(t._s(t.result.error))])]),t.result.errMsg.length?a("div",{staticClass:"err-title"},[a("p",{staticStyle:{margin:"0 0 5px 0"}},[t._v("\n          文件格式不正确，请修改文件后再导入。\n        ")]),a("p",{staticStyle:{margin:"0"}},[t._v("\n          失败原因：\n        ")])]):t._e(),a("div",{staticStyle:{"max-height":"300px","overflow-y":"auto"}},t._l(t.result.errMsg,function(e,r){return a("p",{key:r},[t._v("\n          "+t._s(e)+"\n        ")])}),0)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:t.loading,size:"small"},on:{click:t.resetSelectFile}},[t._v("\n        重新选择\n      ")]),a("el-button",{attrs:{type:"primary",size:"small",disabled:t.loading||0!==t.result.error},on:{click:t.uploadFile}},[t._v("\n        确认导入\n      ")])],1)])],1)},L=[],j=(a("7514"),a("ac4d"),a("8a81"),a("34ef"),a("7f7f"),a("6b54"),a("ac6a"),a("1146")),I=a.n(j),C=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.visible=!1,t.innerVisible=!1,t.loading=!1,t.uploadFileData=null,t.form={id:void 0,name:"",file:""},t.formRules={id:[{required:!0,message:"请选择航空公司",trigger:"change"}],file:[{required:!0,message:"请选择文件",trigger:"change"}]},t.result={total:0,success:0,error:0,errMsg:[]},t.max=20,t.airOrderList=[],t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"resetSelectFile",value:function(){this.innerVisible=!1,this.reset()}},{key:"reset",value:function(){this.$refs.form.resetFields(),this.airOrderList=[],this.result={total:0,success:0,error:0,errMsg:[]},this.form={id:void 0,name:"",file:""}}},{key:"verifyFile",value:function(){var t=this;this.result.total=this.airOrderList.length;var e=/[\u4E00-\u9FA5]/,a=[];this.airOrderList.forEach(function(r,n){r.toString().length>t.max||e.test(r)||-1!==a.indexOf(r)?(t.result.error=t.result.error+1,r.toString().length>t.max&&t.result.errMsg.push("第".concat(n+1,"行：号段长度超过最大长度").concat(t.max)),e.test(r)&&t.result.errMsg.push("第".concat(n+1,"行：号段存在中文")),-1!==a.indexOf(r)?t.result.errMsg.push("第".concat(n+1,"行：号段").concat(r,"重复")):a.push(r)):t.result.success=t.result.success+1}),this.innerVisible=!0}},{key:"parseFile",value:function(t){this.form.file=t.file.name,this.uploadFileData=t.file;var e=t.file,a=this,r=new FileReader;FileReader.prototype.readAsBinaryString=function(t){var e,r,n="",i=new FileReader;i.onload=function(t){for(var s=new Uint8Array(i.result),o=s.byteLength,l=0;l<o;l++)n+=String.fromCharCode(s[l]);if(e=I.a.read(n,{type:"binary"}),e.Sheets.Sheet1.B1)a.$message.error("导入文件内容格式不正确");else{r=I.a.utils.sheet_to_json(e.Sheets[e.SheetNames[0]],{header:1});var c=!0,u=!1,d=void 0;try{for(var m,p=r[Symbol.iterator]();!(c=(m=p.next()).done);c=!0){var h=m.value;a.airOrderList.push(h[0])}}catch(f){u=!0,d=f}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}a.verifyFile()}},i.onerror=function(){a.$message.error("文件错误,请检查文件重新导入")},i.readAsArrayBuffer(t)},r.readAsBinaryString(e)}},{key:"selectFile",value:function(){var t=this;this.$refs.form.validateField("id",function(e){e&&t.$message.error(e)})}},{key:"beforeUpload",value:function(t){var e=/\.(xlsx|xls|csv)$/.test(t.name);return e||(this.$message.error("仅支持excel格式文件"),!1)}},{key:"uploadFile",value:function(){var t=this,e=this.uploadFileData,a=new FormData;a.append("file",e),a.append("id",this.form.id),a.append("name",this.form.name),this.loading=!0,g(a).then(function(e){t.loading=!1,e.success&&(t.$message.success("导入成功！"),t.resetSelectFile())}).catch(function(e){return t.loading=!1,e})}},{key:"airlinesChange",value:function(t){this.form.name=(this.airlinesList.find(function(e){return e.id===t})||{}).name}},{key:"closeModal",value:function(){this.visible=!1,this.$emit("load")}},{key:"show",value:function(){var t=this;this.visible=!0,this.$nextTick(function(){t.resetSelectFile()})}}]),e}(d["e"]);C=u["a"]([Object(d["a"])({name:"importModal",props:{airlinesList:{type:Array,default:function(){return[]}}}})],C);var F=C,S=F,_=(a("4bf7"),a("2877")),$=Object(_["a"])(S,x,L,!1,null,"39eb3d1c",null),N=$.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"分配",width:"750px",visible:t.visible,"close-on-click-modal":!1},on:{close:function(e){t.visible=!1}}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"110px",size:"small"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"分配客户","label-width":"80px",prop:"customerId"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择分配客户"},on:{change:t.customerChange},model:{value:t.form.customerId,callback:function(e){t.$set(t.form,"customerId",e)},expression:"form.customerId"}},t._l(t.agentList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"预警值"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择预警值"},model:{value:t.form.warning,callback:function(e){t.$set(t.form,"warning",e)},expression:"form.warning"}},t._l(t.warningList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1)],1),a("el-divider"),t._l(t.form.aviationSectionList,function(e,r){return a("el-row",{key:r,attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"航空公司","label-width":"80px",rules:[{required:!0,message:"请选择航空公司",trigger:"change"}]}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"请选择航空公司"},on:{change:function(e){return t.sectionChange(e,r)},focus:function(e){return t.sectionFocus(r)}},model:{value:e.sectionId,callback:function(a){t.$set(e,"sectionId",a)},expression:"item.sectionId"}},t._l(t.airlinesList,function(t){return a("el-option",{key:t.airlineId,attrs:{label:t.airlineCompany,value:t.airlineId,disabled:t.disabled}})}),1)],1)],1),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"分配号段数",rules:[{required:!0,message:"输入分配号段数",trigger:"blur"}]}},[a("el-input-number",{attrs:{disabled:!e.sectionId,max:e.maxNum,"controls-position":"right",placeholder:"输入分配号段数"},model:{value:e.num,callback:function(a){t.$set(e,"num",a)},expression:"item.num"}})],1)],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.deleteRow(r)}}},[t._v("\n          删除\n        ")])],1)],1)}),a("el-row",{attrs:{gutter:20}},[a("el-button",{staticStyle:{width:"100%"},attrs:{plain:"",icon:"el-icon-plus"},on:{click:t.addRow}},[t._v("\n        新增分配\n      ")])],1)],2),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:t.loading},on:{click:function(e){t.visible=!1}}},[t._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary",disabled:t.loading},on:{click:t.submit}},[t._v("\n      分 配\n    ")])],1)],1)},z=[],R=a("75fc"),B=a("636a"),T=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.visible=!1,t.loading=!1,t.form={customerId:void 0,customerName:"",warning:80,aviationSectionList:[{maxNum:0,num:0,sectionId:void 0,sectionName:""}]},t.formRules={customerId:[{required:!0,message:"请选择客户",trigger:"change"}]},t.agentList=[],t.warningList=[],t.airlinesList=[],t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"submit",value:function(){var t=this;this.$refs.form.validate(function(e){if(e){var a={aviationCustomer:{customerId:t.form.customerId,customerName:t.form.customerName,warning:t.form.warning},aviationSectionList:t.form.aviationSectionList.map(function(e){return{num:e.num,sectionId:e.sectionId,sectionName:e.sectionName,warning:t.form.warning}})};t.loading=!0,b(a).then(function(e){t.loading=!1,e.success&&(t.$message.success("分配成功"),t.visible=!1,t.$emit("load"))}).catch(function(e){return t.loading=!1,e})}})}},{key:"addRow",value:function(){this.form.aviationSectionList=[].concat(Object(R["a"])(this.form.aviationSectionList),[{maxNum:0,num:0,sectionId:void 0,sectionName:""}])}},{key:"deleteRow",value:function(t){this.form.aviationSectionList=this.form.aviationSectionList.filter(function(e,a){return a!==t})}},{key:"customerChange",value:function(t){this.form.customerName="";var e=this.agentList.find(function(e){return e.id===t});e&&(this.form.customerName=e.name)}},{key:"sectionChange",value:function(t,e){this.form.aviationSectionList[e].sectionName="",this.form.aviationSectionList[e].maxNum=0,this.form.aviationSectionList[e].num=0;var a=this.airlinesList.find(function(e){return e.airlineId===t});a&&(this.form.aviationSectionList[e].sectionName=a.airlineCompany,this.form.aviationSectionList[e].maxNum=a.surplus)}},{key:"sectionFocus",value:function(t){var e=this.form.aviationSectionList.map(function(t){return t.sectionId});this.airlinesList=this.airlinesList.map(function(t){return t.disabled=!1,e.find(function(e){return e===t.airlineId})&&(t.disabled=!0),t})}},{key:"show",value:function(){var t=this;this.warningList=[];for(var e=0;e<100;e++)this.warningList.push({label:"".concat(e,"%"),value:e});this.visible=!0,this.agentList=[],this.form={customerId:void 0,customerName:"",warning:80,aviationSectionList:[{maxNum:0,num:0,sectionId:void 0,sectionName:""}]},this.getAgentList(),this.getImportAirlinesList(),this.$nextTick(function(){t.$refs.form.resetFields()})}},{key:"getImportAirlinesList",value:function(){var t=this;v().then(function(e){e.success&&(t.airlinesList=(e.data||[]).map(function(t){return t.disabled=!1,t}))}).catch(function(t){return t})}},{key:"getAgentList",value:function(){var t=this,e=this.custType,a=this.custSubtype,r="1";"0"===e?r="1":"2"===e&&"1"===a&&(r="2");var n={parentId:this.custId,subtype:r,page:1,size:999};Object(B["d"])(n).then(function(e){if(e.success){var a=e.data||{};t.agentList=a.result||[]}}).catch(function(t){return t})}},{key:"custId",get:function(){var t=m["a"].info||{},e=t.custId;return e}},{key:"custType",get:function(){var t=m["a"].info||{},e=t.custType;return e}},{key:"custSubtype",get:function(){var t=m["a"].info||{},e=t.custSubtype;return e}}]),e}(d["e"]);T=u["a"]([Object(d["a"])({name:"allotModal"})],T);var M=T,A=M,P=(a("97ff"),Object(_["a"])(A,D,z,!1,null,"02ca7c6c",null)),E=P.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"操作日志【"+t.logRow.airlineCompany+"】",width:"800px",visible:t.visible},on:{close:function(e){t.visible=!1}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"operationName",width:"200",label:"操作人"}}),a("el-table-column",{attrs:{prop:"describeA",label:"操作描述"}}),a("el-table-column",{attrs:{prop:"operationTime",width:"180",label:"操作时间"}})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":t.pagination.page,"page-size":t.pagination.size,layout:"total, prev, pager, next",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1)])},q=[],V=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.visible=!1,t.loading=!1,t.tableData=[],t.logRow={},t.pagination={page:1,size:10,total:0},t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"show",value:function(t){this.logRow=t,this.tableData=[],this.pagination={page:1,size:10,total:0},this.visible=!0,this.getLogList()}},{key:"getLogList",value:function(){var t=this,e={model:this.logRow.airlineId,page:this.pagination.page,size:this.pagination.size};this.loading=!0,y(e).then(function(e){if(t.loading=!1,e.success){var a=e.data||{};t.tableData=a.result||[],t.pagination.total=a.total||0,0===t.tableData.length&&t.$message.info("暂无操作日志")}}).catch(function(e){return t.loading=!1,e})}},{key:"handleCurrentChange",value:function(t){this.pagination.page=t,this.getLogList()}}]),e}(d["e"]);V=u["a"]([Object(d["a"])({name:"OperationLog"})],V);var K=V,Y=K,J=Object(_["a"])(Y,U,q,!1,null,"7064bbce",null),Q=J.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-panel row-details"},[a("div",{staticClass:"header-top"},[a("div",{staticStyle:{float:"left"}},[t._v("\n      详情："+t._s(t.detailRow.airlineCompany)+"\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.goBack}},[t._v("\n      返 回\n    ")])],1),a("div",{staticClass:"search-form"},[a("el-row",{attrs:{gutter:20}},[a("el-form",{ref:"form",attrs:{model:t.searchForm,"label-width":"87px"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"客户名称"}},[a("el-select",{staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"请选择",size:"small",filterable:""},on:{change:t.customerChange},model:{value:t.searchForm.customerId,callback:function(e){t.$set(t.searchForm,"customerId",e)},expression:"searchForm.customerId"}},t._l(t.customerList,function(t){return a("el-option",{key:t.customerId,attrs:{label:t.customerName,value:t.customerId}})}),1)],1)],1),a("el-col",{attrs:{span:16}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-end","padding-right":"20px"}},[a("el-radio-group",{attrs:{size:"small"},on:{change:t.statusChange},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},t._l(t.statusList,function(e){return a("el-radio-button",{key:e.value,attrs:{label:e.value}},[t._v("\n                "+t._s(e.label)+"\n              ")])}),1),a("el-input",{staticStyle:{width:"250px","margin-left":"10px"},attrs:{placeholder:"请输入单号搜索",size:"small",clearable:""},model:{value:t.searchForm.searchKey,callback:function(e){t.$set(t.searchForm,"searchKey",e)},expression:"searchForm.searchKey"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"small"},on:{click:function(e){return t.getSectionListByCustomer(1)}},slot:"append"})],1)],1)])],1)],1),a("div",{staticStyle:{padding:"10px 20px"}},[a("div",{staticClass:"my-el-alert"},[a("span",{staticClass:"info-item"},[a("span",[t._v("总数量：")]),a("span",{staticClass:"y"},[t._v(t._s(t.selectCustomer.total||0))])]),a("span",{staticClass:"info-item"},[a("span",[t._v("剩余数量：")]),a("span",{staticClass:"y"},[t._v(t._s(t.selectCustomer.surplus||0))])]),a("span",{staticClass:"info-item"},[a("span",[t._v("已分配：")]),a("span",{staticClass:"y"},[t._v(t._s(t.selectCustomer.allocated||0))])]),a("span",{staticClass:"info-item"},[a("span",[t._v("已打单：")]),a("span",{staticClass:"y"},[t._v(t._s(t.selectCustomer.printedOrder||0))])]),a("span",{staticClass:"info-item"},[a("span",[t._v("已发运：")]),a("span",{staticClass:"y"},[t._v(t._s(t.selectCustomer.shipped||0))])]),a("div",{directives:[{name:"permission",rawName:"v-permission",value:["airlineNumberRecovery"],expression:"['airlineNumberRecovery']"}],staticClass:"closebtn",on:{click:t.showRecoveryModal}},[t._v("\n          回收\n        ")])])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"order-list",staticStyle:{height:"calc(100vh - 400px)",overflow:"auto"}},[t.tableData.length?a("div",[a("el-row",{attrs:{gutter:2}},t._l(t.tableData,function(e){return a("el-col",{key:e.id,attrs:{xs:12,sm:8,md:8,lg:6,xl:6}},[a("div",{staticClass:"order-item"},[a("div",{staticClass:"order-item-inner"},[a("div",{staticClass:"no"},[t._v("\n                  "+t._s(e.code)+"\n                ")]),a("div",{staticClass:"status",class:"status"+e.status},[t._v("\n                  "+t._s(t.formatStatus(e.status))+"\n                ")])])])])}),1)],1):a("div",{staticClass:"empty"},[t._v("\n        暂无数据\n      ")])]),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":t.pagination.page,"page-size":t.pagination.size,layout:"total, prev, pager, next",total:t.pagination.total},on:{"current-change":t.handleCurrentChange}})],1),a("recovery-modal",{ref:"recoveryModal",attrs:{customer:t.selectCustomer,"section-id":t.detailRow.airlineId},on:{recoveryOk:t.recoveryOk}})],1)},H=[],X=(a("96cf"),a("3b8d")),W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:"号段回收",width:"500px",visible:t.visible,"close-on-click-modal":!1},on:{close:t.closeModal}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,rules:t.formRules,"label-width":"80px",size:"small"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"回收数量",prop:"num"}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入回收数量",size:"small",clearable:"",max:t.customer.surplus,"controls-position":"right"},model:{value:t.form.num,callback:function(e){t.$set(t.form,"num",e)},expression:"form.num"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-button",{attrs:{size:"small"},on:{click:t.closeModal}},[t._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.recovery}},[t._v("\n          确 认\n        ")])],1)],1)],1)],1)},Z=[],tt=(a("8e6e"),a("456d"),a("c5f6"),a("bd86"));function et(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function at(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?et(a,!0).forEach(function(e){Object(tt["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):et(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var rt=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.visible=!1,t.loading=!1,t.form={num:""},t.formRules={num:[{required:!0,message:"请输入回收数量",trigger:"change"}]},t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"recovery",value:function(){var t=this;if(this.form.num){var e=at({},this.form,{sectionId:this.sectionId,customerId:this.customer.customerId,did:this.customerId});this.loading=!0,O(e).then(function(e){t.loading=!1,e.success&&(t.$message.success("回收成功"),t.$emit("recoveryOk"),t.visible=!1)}).catch(function(e){return t.loading=!1,e})}else this.$message.info("请输入回收数量")}},{key:"show",value:function(){var t=this;this.visible=!0,this.form={num:""},this.$nextTick(function(){t.$refs.form.resetFields()})}},{key:"closeModal",value:function(){this.visible=!1}}]),e}(d["e"]);rt=u["a"]([Object(d["a"])({name:"recoveryModal",props:{customer:{type:Object,default:function(){return{}}},sectionId:{type:[Number,String],default:""}}})],rt);var nt=rt,it=nt,st=(a("49e1"),Object(_["a"])(it,W,Z,!1,null,"916600ee",null)),ot=st.exports,lt=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.loading=!1,t.searchForm={customerId:void 0,searchKey:"",status:99},t.pagination={page:1,size:40,total:0},t.selectCustomer={},t.detailRow={},t.tableData=[],t.customerList=[],t.statusList=[{value:99,label:"全部"},{value:1,label:"已分配"},{value:2,label:"已打单"},{value:3,label:"已发运"}],t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"recoveryOk",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.selectCustomer={},t.next=3,this.getCustomerList();case 3:this.customerChange(this.searchForm.customerId),this.getSectionListByCustomer(1);case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"showRecoveryModal",value:function(){this.searchForm.customerId?this.$refs.recoveryModal.show():this.$message.info("请选择客户")}},{key:"customerChange",value:function(t){this.selectCustomer={},t&&(this.selectCustomer=this.customerList.find(function(e){return e.customerId===t})||{}),this.getSectionListByCustomer(1)}},{key:"statusChange",value:function(){this.getSectionListByCustomer(1)}},{key:"getSectionListByCustomer",value:function(t){var e=this;if(1===t&&(this.pagination.page=t),this.searchForm.customerId){var a={model:{customerId:this.searchForm.customerId,searchKey:this.searchForm.searchKey,status:99===this.searchForm.status?"":this.searchForm.status,sectionId:this.detailRow.airlineId},page:this.pagination.page,size:this.pagination.size};this.loading=!0,k(a).then(function(t){if(e.loading=!1,t.success){var a=t.data||{};e.tableData=a.result||[],e.pagination.total=a.total||0}}).catch(function(t){return e.loading=!1,t})}else this.$message.info("请选择客户")}},{key:"formatStatus",value:function(t){var e=this.statusList.find(function(e){return e.value===t})||{};return e.label}},{key:"show",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.selectCustomer={},this.detailRow=e,this.tableData=[],this.customerList=[],this.searchForm={customerId:void 0,searchKey:"",status:99},this.pagination={page:1,size:40,total:0},t.next=8,this.getCustomerList();case 8:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"handleCurrentChange",value:function(t){this.pagination.page=t,this.getSectionListByCustomer()}},{key:"getCustomerList",value:function(){var t=Object(X["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={sectionId:this.detailRow.airlineId},t.next=3,w(e).then(function(t){t.success&&(a.customerList=t.data||[])}).catch(function(t){return t});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"goBack",value:function(){this.$emit("goBack")}}]),e}(d["e"]);lt=u["a"]([Object(d["a"])({name:"rowDetails",components:{recoveryModal:ot}})],lt);var ct=lt,ut=ct,dt=(a("04cb"),Object(_["a"])(ut,G,H,!1,null,"6357a52f",null)),mt=dt.exports,pt=function(t){function e(){var t;return Object(i["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.loading=!1,t.showDetails=!1,t.searchForm={airlinesId:void 0},t.pagination={page:1,size:10,total:0},t.tableData=[],t.airlinesList=[],t}return Object(c["a"])(e,t),Object(s["a"])(e,[{key:"goBack",value:function(){this.loadData(),this.showDetails=!1}},{key:"showRowDetails",value:function(t){this.$refs.rowDetails.show(t),this.showDetails=!0}},{key:"showLog",value:function(t){this.$refs.operationLog.show(t)}},{key:"showAllotModal",value:function(){this.$refs.allotModal.show()}},{key:"showImportModal",value:function(){this.$refs.importModal.show()}},{key:"handleCurrentChange",value:function(t){this.pagination.page=t,this.loadData()}},{key:"getAirlinesList",value:function(){var t=this,e={type:2,page:1,size:999};f(e).then(function(e){if(e.success){var a=e.data||{};t.airlinesList=a.result||[]}}).catch(function(e){return t.airlinesList=[],e})}},{key:"loadData",value:function(t){var e=this;1===t&&(this.pagination.page=1);var a={model:this.searchForm.airlinesId||"",page:this.pagination.page,size:this.pagination.size};this.loading=!0,h(a).then(function(t){if(e.loading=!1,t.success){var a=t.data||{};e.tableData=a.result||[],e.pagination.total=a.total||0}}).catch(function(t){return e.loading=!1,t})}},{key:"created",value:function(){this.loadData(),this.getAirlinesList()}},{key:"custType",get:function(){var t=m["a"].info||{},e=t.custType;return e}}]),e}(d["e"]);pt=u["a"]([Object(d["a"])({name:"AirThemRoughly",components:{importModal:N,allotModal:E,operationLog:Q,rowDetails:mt}})],pt);var ht=pt,ft=ht,vt=Object(_["a"])(ft,r,n,!1,null,"6cd4f345",null);e["default"]=vt.exports},2:function(t,e){},"254e":function(t,e,a){"use strict";a.d(e,"p",function(){return n}),a.d(e,"z",function(){return i}),a.d(e,"m",function(){return s}),a.d(e,"q",function(){return o}),a.d(e,"B",function(){return l}),a.d(e,"i",function(){return c}),a.d(e,"K",function(){return u}),a.d(e,"A",function(){return d}),a.d(e,"b",function(){return m}),a.d(e,"x",function(){return p}),a.d(e,"C",function(){return h}),a.d(e,"w",function(){return f}),a.d(e,"a",function(){return v}),a.d(e,"v",function(){return g}),a.d(e,"I",function(){return b}),a.d(e,"D",function(){return y}),a.d(e,"g",function(){return w}),a.d(e,"j",function(){return k}),a.d(e,"E",function(){return O}),a.d(e,"c",function(){return x}),a.d(e,"L",function(){return L}),a.d(e,"k",function(){return j}),a.d(e,"r",function(){return I}),a.d(e,"F",function(){return C}),a.d(e,"l",function(){return F}),a.d(e,"d",function(){return S}),a.d(e,"n",function(){return _}),a.d(e,"G",function(){return $}),a.d(e,"o",function(){return N}),a.d(e,"e",function(){return D}),a.d(e,"s",function(){return z}),a.d(e,"H",function(){return R}),a.d(e,"u",function(){return B}),a.d(e,"t",function(){return T}),a.d(e,"f",function(){return M}),a.d(e,"y",function(){return A}),a.d(e,"J",function(){return P}),a.d(e,"h",function(){return E}),a.d(e,"M",function(){return U});var r=a("b32d");function n(){var t={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(t)}function i(t){var e={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:t}};return Object(r["a"])(e)}function s(t){var e={url:"/setting/area/getCityByState",method:"get",params:{stateId:t}};return Object(r["a"])(e)}function o(t){var e={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:t}};return Object(r["a"])(e)}function l(t){var e={url:"/auth/supplier/getSupplierList",method:"get",params:t};return Object(r["a"])(e)}function c(t){var e={url:"/auth/supplier/deleteSupplier",method:"delete",params:{id:t}};return Object(r["a"])(e)}function u(t){var e={url:"/auth/supplier/saveSupplier",method:"post",data:t};return Object(r["a"])(e)}function d(t){var e={url:"/auth/supplier/getSupplier",method:"get",params:{id:t}};return Object(r["a"])(e)}function m(t){var e={url:"/auth/supplier/changeStatus",method:"post",params:t};return Object(r["a"])(e)}function p(){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:{custType:1}};return Object(r["a"])(t)}function h(t){var e={url:"/auth/user/user4position",method:"post",data:t};return Object(r["a"])(e)}function f(t){var e={url:"/auth/supplier/getStaffList",method:"get",params:t};return Object(r["a"])(e)}function v(t){var e={url:"/auth/supplier/saveStaff",method:"post",data:t};return Object(r["a"])(e)}function g(t){var e={url:"/auth/contact/getContactList",method:"get",params:t};return Object(r["a"])(e)}function b(t){var e={url:"/auth/contact/saveContact",method:"post",data:t};return Object(r["a"])(e)}function y(t){var e={url:"/auth/contact/getContact",method:"get",params:t};return Object(r["a"])(e)}function w(t){var e={url:"/auth/contact/deleteContact",method:"delete",params:t};return Object(r["a"])(e)}function k(t){var e={url:"/auth/address/getAddressList",method:"get",params:t};return Object(r["a"])(e)}function O(t){var e={url:"/auth/address/saveAddress",method:"post",data:t};return Object(r["a"])(e)}function x(t){var e={url:"/auth/address/deleteAddress",method:"delete",params:t};return Object(r["a"])(e)}function L(t){var e={url:"/auth/address/setAddressDefault",method:"post",params:t};return Object(r["a"])(e)}function j(t){var e={url:"/auth/invoice/getInvoiceList",method:"get",params:t};return Object(r["a"])(e)}function I(t){var e={url:"/setting/currency/getCurrencyList",method:"get",params:t};return Object(r["a"])(e)}function C(t){var e={url:"/auth/invoice/saveInvoice",method:"post",data:t};return Object(r["a"])(e)}function F(t){var e={url:"/auth/invoice/getInvoice",method:"get",params:t};return Object(r["a"])(e)}function S(t){var e={url:"/auth/invoice/deleteInvoice",method:"delete",params:t};return Object(r["a"])(e)}function _(t){var e={url:"/auth/acct/getAcctList",method:"get",params:t};return Object(r["a"])(e)}function $(t){var e={url:"/auth/acct/saveAcct",method:"post",data:t};return Object(r["a"])(e)}function N(t){var e={url:"/auth/acct/getAcct",method:"get",params:t};return Object(r["a"])(e)}function D(t){var e={url:"/auth/acct/deleteAcct",method:"delete",params:t};return Object(r["a"])(e)}function z(t){var e={url:"/auth/doc/getDocList",method:"get",params:t};return Object(r["a"])(e)}function R(t){var e={url:"/auth/doc/saveDoc",method:"post",data:t};return Object(r["a"])(e)}function B(t){var e={url:"/setting/util/getFileUrl",method:"get",params:t};return Object(r["a"])(e)}function T(t){var e={url:"/auth/doc/getDoc",method:"get",params:t};return Object(r["a"])(e)}function M(t){var e={url:"/auth/doc/deleteDoc",method:"delete",params:t};return Object(r["a"])(e)}function A(t){var e={url:"/auth/bookc/getBookcList",method:"get",params:t};return Object(r["a"])(e)}function P(t){var e={url:"/auth/bookc/saveBookc",method:"post",data:t};return Object(r["a"])(e)}function E(t){var e={url:"/auth/bookc/deleteBookc",method:"delete",params:t};return Object(r["a"])(e)}function U(t){var e={url:"/auth/bookc/setBookcDefault",method:"post",params:t};return Object(r["a"])(e)}},2776:function(t,e,a){},"2a33":function(t,e,a){},3:function(t,e){},"49e1":function(t,e,a){"use strict";var r=a("f908"),n=a.n(r);n.a},"4bf7":function(t,e,a){"use strict";var r=a("2776"),n=a.n(r);n.a},"52e6":function(t,e,a){},"636a":function(t,e,a){"use strict";a.d(e,"g",function(){return n}),a.d(e,"i",function(){return i}),a.d(e,"f",function(){return s}),a.d(e,"h",function(){return o}),a.d(e,"d",function(){return l}),a.d(e,"b",function(){return c}),a.d(e,"l",function(){return u}),a.d(e,"c",function(){return d}),a.d(e,"a",function(){return m}),a.d(e,"e",function(){return p}),a.d(e,"j",function(){return h}),a.d(e,"m",function(){return f}),a.d(e,"k",function(){return v});var r=a("b32d");function n(){var t={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(t)}function i(t){var e={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:t}};return Object(r["a"])(e)}function s(t){var e={url:"/setting/area/getCityByState",method:"get",params:{stateId:t}};return Object(r["a"])(e)}function o(t){var e={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:t}};return Object(r["a"])(e)}function l(t){var e={url:"/auth/agent/getAgentList",method:"get",params:t};return Object(r["a"])(e)}function c(t){var e={url:"/auth/agent/deleteAgent",method:"delete",params:{id:t}};return Object(r["a"])(e)}function u(t){var e={url:"/auth/agent/saveAgent",method:"post",data:t};return Object(r["a"])(e)}function d(t){var e={url:"/auth/agent/getAgent",method:"get",params:{id:t}};return Object(r["a"])(e)}function m(t){var e={url:"/auth/agent/changeStatus",method:"post",params:t};return Object(r["a"])(e)}function p(t){var e={url:"/auth/agent/getStaffList",method:"get",params:t};return Object(r["a"])(e)}function h(t){var e={url:"/auth/user/user4position",method:"post",data:t};return Object(r["a"])(e)}function f(t){var e={url:"/auth/agent/saveStaff",method:"post",data:t};return Object(r["a"])(e)}function v(t){var e={url:"/setting/dict/item/type",method:"get",params:t};return Object(r["a"])(e)}},"7cdf":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("head-info",{attrs:{title:"司机管理",info:""}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-panel"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:3}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["addDriver"],expression:"['addDriver']"}],attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:t.addDriver}},[t._v("\n          新增司机\n        ")])],1),a("el-col",{attrs:{span:21}},[a("div",{staticStyle:{"text-align":"right"}},[a("el-select",{directives:[{name:"show",rawName:"v-show",value:"0"===t.custId,expression:"custId === '0'"}],staticStyle:{width:"200px","margin-right":"5px"},attrs:{placeholder:"所属公司",size:"small",filterable:""},on:{change:t.onSupplier},model:{value:t.searchForm.custId,callback:function(e){t.$set(t.searchForm,"custId",e)},expression:"searchForm.custId"}},t._l(t.supplierList,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),a("el-select",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{placeholder:"启用状态",size:"small",clearable:""},model:{value:t.searchForm.status,callback:function(e){t.$set(t.searchForm,"status",e)},expression:"searchForm.status"}},[a("el-option",{attrs:{label:"禁用",value:"0"}}),a("el-option",{attrs:{label:"启用",value:"1"}})],1),a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"司机姓名",size:"small"},model:{value:t.searchForm.name,callback:function(e){t.$set(t.searchForm,"name",e)},expression:"searchForm.name"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["queryDriver"],expression:"['queryDriver']"}],attrs:{type:"primary",size:"small"},on:{click:function(e){return t.getTableList(1)}}},[t._v("\n            查询\n          ")])],1)])],1),a("el-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:t.tableData,border:"",height:"calc(100vh - 313px)"}},[a("el-table-column",{attrs:{prop:"name",label:"司机姓名"}}),a("el-table-column",{attrs:{prop:"certNo",label:"证件号码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n            "+t._s(t.formatCertType(e.row.certType,e.row.certNo))+"\n          ")])]}}])}),a("el-table-column",{attrs:{prop:"phone",label:"联系手机"}}),a("el-table-column",{attrs:{prop:"email",label:"电子邮箱"}}),a("el-table-column",{attrs:{prop:"",label:"所在地区"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v("\n            "+t._s(t.formatArea(e.row.stateName,e.row.cityName,e.row.countyName))+"\n          ")])]}}])}),a("el-table-column",{attrs:{prop:"expire",label:"驾照日期"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t.dayjs(e.row.expire).format("YYYY-MM-DD")))])]}}])}),a("el-table-column",{attrs:{prop:"custName",label:"所属公司"}}),a("el-table-column",{attrs:{prop:"createTime",label:"启用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-switch",{staticClass:"switchStyle",attrs:{value:e.row.status,disabled:!t.$checkPermission(["driverChangeStatus"]),"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0"},on:{input:function(a){return t.onStatus(e.row,a)}}})]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["editDriver"],expression:"['editDriver']"}],attrs:{type:"text",size:"small"},on:{click:function(a){return t.editDriver(e.row)}}},[t._v("\n            编辑\n          ")]),t._v("\n           \n          "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["deleteDriver"],expression:"['deleteDriver']"}],attrs:{type:"text",size:"small"},on:{click:function(a){return t.deletRow(e.row.id)}}},[t._v("\n            删除\n          ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":t.pageNumber,"page-size":t.pageSize,layout:"total, prev, pager, next",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),a("el-dialog",{attrs:{width:"960px",title:t.isEdit?"编辑司机":"新增司机",visible:t.isShowUpdate,"close-on-click-modal":!1},on:{"update:visible":function(e){t.isShowUpdate=e},closed:t.close}},[a("addEditForm",{ref:"editForm",on:{cancel:t.close,getTableList:t.getTableList}})],1)],1)],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("768b")),s=(a("96cf"),a("3b8d")),o=a("bd86"),l=a("d225"),c=a("b0b4"),u=a("308d"),d=a("6bb5"),m=a("4e2b"),p=a("9ab4"),h=a("60a3"),f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.formLoading,expression:"formLoading"}]},[a("el-form",{ref:"editForm",attrs:{model:t.selectForm,rules:t.formRules,"label-position":"right","label-width":"120px",size:"small"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"0"===t.custId,expression:"custId === '0'"}],attrs:{label:"所属公司",prop:"custId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.selectLoading,placeholder:"所属公司",size:"small",filterable:""},on:{focus:t.getSupplierList,change:t.onCountryArea},model:{value:t.selectForm.custId,callback:function(e){t.$set(t.selectForm,"custId",e)},expression:"selectForm.custId"}},t._l(t.supplierList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.selectLoading,placeholder:"请选择",clearable:"",disabled:!t.selectForm.countryId,filterable:""},on:{focus:t.getStateList,change:t.onStateChange},model:{value:t.selectForm.stateId,callback:function(e){t.$set(t.selectForm,"stateId",e)},expression:"selectForm.stateId"}},t._l(t.stateList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name+"-"+t.alias,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.selectLoading,placeholder:"请选择",clearable:"",disabled:!t.selectForm.stateId,filterable:""},on:{focus:t.getCityList,change:t.onCityChange},model:{value:t.selectForm.cityId,callback:function(e){t.$set(t.selectForm,"cityId",e)},expression:"selectForm.cityId"}},t._l(t.cityList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name+"-"+t.alias,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"区/县",prop:"countyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.selectLoading,placeholder:"区/县",clearable:"",disabled:!t.selectForm.cityId,filterable:""},on:{focus:t.getCountyList},model:{value:t.selectForm.countyId,callback:function(e){t.$set(t.selectForm,"countyId",e)},expression:"selectForm.countyId"}},t._l(t.countyList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name+"-"+t.alias,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"关联用户",prop:"userId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:t.getUserList},model:{value:t.selectForm.userId,callback:function(e){t.$set(t.selectForm,"userId",e)},expression:"selectForm.userId"}},t._l(t.userList,function(t){return a("el-option",{key:t.id,attrs:{label:t.realName+"-"+t.username+"-"+t.deptName,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"关联车辆",prop:"vehicleId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:t.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:t.getVehicleList},model:{value:t.selectForm.vehicleId,callback:function(e){t.$set(t.selectForm,"vehicleId",e)},expression:"selectForm.vehicleId"}},t._l(t.carList,function(t){return a("el-option",{key:t.id,attrs:{label:t.plateNumber,value:t.id}})}),1)],1),a("el-form-item",{attrs:{label:"是否接受加班",prop:"overtime"}},[a("el-radio-group",{staticStyle:{width:"100%"},model:{value:t.selectForm.overtime,callback:function(e){t.$set(t.selectForm,"overtime",e)},expression:"selectForm.overtime"}},[a("el-radio",{attrs:{label:!1}},[t._v("\n          否\n        ")]),a("el-radio",{attrs:{label:!0}},[t._v("\n          是\n        ")])],1)],1),a("el-form-item",{attrs:{label:"是否接受长途",prop:"distance"}},[a("el-radio-group",{staticStyle:{width:"100%"},model:{value:t.selectForm.distance,callback:function(e){t.$set(t.selectForm,"distance",e)},expression:"selectForm.distance"}},[a("el-radio",{attrs:{label:!1}},[t._v("\n          否\n        ")]),a("el-radio",{attrs:{label:!0}},[t._v("\n          是\n        ")])],1)],1),a("el-form-item",{attrs:{label:"司机姓名",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",maxlength:10},model:{value:t.selectForm.name,callback:function(e){t.$set(t.selectForm,"name",e)},expression:"selectForm.name"}})],1),a("el-form-item",{attrs:{label:"证件号码",prop:"certNo"}},[a("el-input",{staticClass:"input-with-select",staticStyle:{width:"100%"},attrs:{placeholder:"请输入",size:"small"},model:{value:t.selectForm.certNo,callback:function(e){t.$set(t.selectForm,"certNo",e)},expression:"selectForm.certNo"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:t.selectForm.certType,callback:function(e){t.$set(t.selectForm,"certType",e)},expression:"selectForm.certType"}},[a("el-option",{attrs:{label:"身份证",value:"0"}}),a("el-option",{attrs:{label:"护照",value:"1"}}),a("el-option",{attrs:{label:"港澳通行证",value:"2"}}),a("el-option",{attrs:{label:"其他",value:"3"}})],1)],1)],1),a("el-form-item",{attrs:{label:"联系手机",prop:"phone"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:t.selectForm.phone,callback:function(e){t.$set(t.selectForm,"phone",e)},expression:"selectForm.phone"}})],1),a("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入"},model:{value:t.selectForm.email,callback:function(e){t.$set(t.selectForm,"email",e)},expression:"selectForm.email"}})],1),a("el-form-item",{attrs:{label:"驾照日期",prop:"expire"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"年/月/日"},model:{value:t.selectForm.expire,callback:function(e){t.$set(t.selectForm,"expire",e)},expression:"selectForm.expire"}})],1),a("div",[a("el-form-item",{attrs:{label:"驾照照片",prop:"photo"}},[t.imageUrl?a("div",{staticClass:"preview-img-wrap"},[a("div",{staticClass:"preview-img"},[a("img",{attrs:{src:t.imageBase64}}),a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-view mask-view-icon",on:{click:t.handlePreview}}),a("i",{staticClass:"el-icon-delete",on:{click:t.handleDelete}})])])]):a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"before-upload":t.beforeAvatarUpload,"http-request":t.uploadFile}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),a("div",{staticStyle:{"text-align":"right","padding-bottom":"20px"}},[a("el-button",{on:{click:t.cancel}},[t._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveForm}},[t._v("\n      确 定\n    ")])],1),a("el-dialog",{attrs:{title:"驾照照片预览",visible:t.dialogVisible,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("img",{attrs:{width:"100%",src:t.imageBase64}})])],1)},v=[],g=(a("7514"),a("7f7f"),a("9dba")),b=a("b32d");function y(t){var e={url:"/setting/driver/getDriverList",method:"get",params:t};return Object(b["a"])(e)}function w(t){var e={url:"/setting/driver/changeStatus",method:"post",params:t};return Object(b["a"])(e)}function k(t){var e={url:"/setting/driver/deleteDriver",method:"delete",params:{id:t}};return Object(b["a"])(e)}function O(t){var e={url:"/setting/driver/saveDriver",method:"post",data:t};return Object(b["a"])(e)}function x(t){var e={url:"/auth/supplier/getSupplierList",method:"get",params:t};return Object(b["a"])(e)}function L(t){var e={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:t}};return Object(b["a"])(e)}function j(t){var e={url:"/setting/area/getCityByState",method:"get",params:{stateId:t}};return Object(b["a"])(e)}function I(t){var e={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:t}};return Object(b["a"])(e)}function C(t){var e={url:"/auth/user/user4position",method:"post",data:t};return Object(b["a"])(e)}function F(t){var e={url:"/setting/vehicle/getVehicleList",method:"get",params:t};return Object(b["a"])(e)}var S=a("254e"),_=a("5a0c"),$=a.n(_);function N(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function D(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?N(a,!0).forEach(function(e){Object(o["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function z(){return{workStatus:0,id:void 0,custId:void 0,custName:void 0,countryId:void 0,countyId:void 0,stateId:void 0,cityId:void 0,userId:void 0,vehicleId:void 0,overtime:!0,distance:!0,certNo:"",certType:"0",email:void 0,expire:void 0,name:void 0,phone:void 0,photo:""}}var R=function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.selectForm=z(),t.imageUrl="",t.imageBase64="",t.formLoading=!1,t.selectLoading=!1,t.dialogVisible=!1,t.supplierList=[],t.stateList=[],t.cityList=[],t.countyList=[],t.userList=[],t.carList=[],t.props={label:"name",value:"id"},t.formRules={custId:[{required:!0,message:"请选择所属公司",trigger:"change"}],stateId:[{required:!0,message:"请选择州/省",trigger:"change"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],countyId:[{required:!1,message:"请选择区/县",trigger:"change"}],userId:[{required:!0,message:"请选择关联用户",trigger:"change"}],name:[{required:!0,message:"司机名称不能为空",trigger:"change"}],certNo:[{required:!0,message:"证件号码不能为空",trigger:"blur"},{validator:t.validatorCertNo,trigger:"blur"}],phone:[{required:!0,message:"联系手机不能为空",trigger:"blur"},{validator:function(t,e,a){var r=/[\u4e00-\u9fa5]/;e&&r.test(e)?a(new Error("联系手机不能有中文")):a()},trigger:"blur"}],email:[{type:"email",message:"邮箱地址格式不正确",trigger:["blur","change"]}],expire:[{required:!0,message:"请选择驾照有效期",trigger:"change"}],photo:[{required:!0,message:"请选择驾照照片",trigger:"change"}]},t}return Object(m["a"])(e,t),Object(c["a"])(e,[{key:"setCust",value:function(){this.reset(),"0"!==this.custId&&(this.selectForm.custId=this.custId,this.selectForm.custName=this.custName)}},{key:"validatorCertNo",value:function(t,e,a){if("0"===this.selectForm.certType){var r=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|31)|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/;e||a(),r.test(e)?a():a(new Error("身份证号码格式不正确"))}else a()}},{key:"setData",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.formLoading=!0,t.prev=1,"0"!==this.custId){t.next=5;break}return t.next=5,this.getSupplierList();case 5:return this.selectForm=e,this.imageUrl=e.photo,t.next=9,this.getStateList();case 9:return t.next=11,this.getCityList();case 11:return t.next=13,this.getCountyList();case 13:return t.next=15,this.getUserList();case 15:return t.next=17,this.getVehicleList();case 17:return t.next=19,this.getImageUrl();case 19:this.formLoading=!1,t.next=26;break;case 22:return t.prev=22,t.t0=t["catch"](1),this.formLoading=!1,t.abrupt("return",t.t0);case 26:case"end":return t.stop()}},t,this,[[1,22]])}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getImageUrl",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={path:this.imageUrl},t.next=3,Object(S["u"])(e).then(function(t){t.success&&(a.imageBase64=t.data)}).catch(function(t){return t});case 3:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getSupplierList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a,r=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.selectLoading=!0,e=this.custId,a={page:1,size:99999,parentId:e},t.next=5,x(a).then(function(t){var e=t.data||{};r.supplierList=e.result||[],r.supplierList.unshift({id:"0",name:"聚货通",countryId:"CN"}),r.selectLoading=!1}).catch(function(t){return r.selectLoading=!1,t});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getStateList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.selectForm.countryId){t.next=2;break}return t.abrupt("return");case 2:return this.selectLoading=!0,t.next=5,L(this.selectForm.countryId).then(function(t){e.selectLoading=!1;var a=t.data||{},r=a.result||[];e.stateList=r}).catch(function(){e.stateList=[],e.selectLoading=!1});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getCityList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.selectForm.stateId){t.next=2;break}return t.abrupt("return");case 2:return this.selectLoading=!0,t.next=5,j(this.selectForm.stateId).then(function(t){e.selectLoading=!1;var a=t.data||{},r=a.result||[];e.cityList=r}).catch(function(){e.cityList=[],e.selectLoading=!1});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getCountyList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.selectForm.cityId){t.next=2;break}return t.abrupt("return");case 2:return this.selectLoading=!0,t.next=5,I(this.selectForm.cityId).then(function(t){var a=t.data||{},r=a.result||[];e.countyList=r,e.selectLoading=!1}).catch(function(){e.countyList=[],e.selectLoading=!1});case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"onCountryArea",value:function(){var t=this;this.selectForm.stateId="",this.onStateChange(),this.supplierList.map(function(e){t.selectForm.custId===e.id&&(t.selectForm.countryId=e.countryId||"CN")})}},{key:"onStateChange",value:function(){this.selectForm.cityId="",this.onCityChange()}},{key:"onCityChange",value:function(){this.selectForm.countyId=""}},{key:"getUserList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.selectForm.custId){t.next=3;break}return this.$message.error("请选择所属公司"),t.abrupt("return");case 3:return this.selectLoading=!0,e={custId:this.selectForm.custId},t.next=7,C(e).then(function(t){var e=t.data;a.userList=e||[],a.selectLoading=!1}).catch(function(t){return a.selectLoading=!1,t});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"getVehicleList",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){var e,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.selectForm.custId){t.next=3;break}return this.$message.error("请选择所属公司"),t.abrupt("return");case 3:this.selectLoading=!0,e={custId:this.selectForm.custId,deptId:"",page:1,size:99999},F(e).then(function(t){var e=t.data||{};a.carList=e.result||[],a.selectLoading=!1}).catch(function(t){return a.selectLoading=!1,t});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"uploadFile",value:function(t){var e=this,a=t.file,r="jht-admin/driver/license-photos";this.$upload(!1,a,"".concat(r,"/").concat($()().valueOf()+"/"+a.name)).then(function(t){e.imageUrl=t.data,e.selectForm.photo=e.imageUrl,e.getBase64(a).then(function(t){e.imageBase64=t}).catch(function(){e.imageBase64=""})}).catch(function(t){return t})}},{key:"getBase64",value:function(t){return new Promise(function(e,a){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=function(t){return a(t)}})}},{key:"handlePreview",value:function(){this.dialogVisible=!0}},{key:"handleDelete",value:function(){var t=this;this.$confirm("您确认要删除该照片吗?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.$deleteLoad(t.imageUrl,!1).then(function(e){e.success&&(t.imageUrl="",t.selectForm.photo=t.imageUrl,t.imageBase64="")}).catch(function(t){return t})}).catch(function(){})}},{key:"beforeAvatarUpload",value:function(t){var e=-1!==t.type.indexOf("image"),a=t.size/1024/1024<2;return e||this.$message.error("上传照片只能是图片格式!"),a||this.$message.error("上传照片大小不能超过 2MB!"),e&&a}},{key:"handleSaveForm",value:function(){var t=this,e=this.$refs.editForm;e.validate(function(e){if(e){var a=D({},t.selectForm);t.supplierList.forEach(function(t){t.id===a.custId&&(a.custName=t.name)}),t.carList.forEach(function(t){t.id===a.vehicleId&&(a.plateNumber=t.plateNumber)}),t.userList.forEach(function(t){t.id===a.userId&&(a.userName=t.username)}),a.stateName=(t.stateList.find(function(t){return t.id===a.stateId})||{}).name,a.cityName=(t.cityList.find(function(t){return t.id===a.cityId})||{}).name,a.countyName=(t.countyList.find(function(t){return t.id===a.countyId})||{}).name,t.formLoading=!0,O(a).then(function(e){t.formLoading=!1,t.$message({type:"success",message:"保存成功!"}),t.$emit("getTableList"),t.reset(),t.$emit("cancel")}).catch(function(e){return t.formLoading=!1,e})}})}},{key:"cancel",value:function(){this.reset(),this.$emit("cancel")}},{key:"reset",value:function(){var t=this;this.selectForm=z(),this.stateList=[],this.cityList=[],this.countyList=[],this.imageUrl="",this.imageBase64="",this.$nextTick(function(){var e=t.$refs.editForm;e.clearValidate()})}},{key:"custId",get:function(){var t=g["a"].info||{},e=t.custId;return e}},{key:"custName",get:function(){var t=g["a"].info||{},e=t.custName;return e}}]),e}(h["e"]);R=p["a"]([Object(h["a"])({name:""})],R);var B=R,T=B,M=(a("a306"),a("2877")),A=Object(M["a"])(T,f,v,!1,null,"220fbf85",null),P=A.exports;function E(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),a.push.apply(a,r)}return a}function U(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?E(a,!0).forEach(function(e){Object(o["a"])(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}var q=function(t){function e(){var t;return Object(l["a"])(this,e),t=Object(u["a"])(this,Object(d["a"])(e).apply(this,arguments)),t.dayjs=$.a,t.tableData=[],t.supplierList=[],t.searchForm={custId:t.custId,status:void 0,name:void 0},t.isShowUpdate=!1,t.pageSize=20,t.pageNumber=1,t.totalCount=0,t.isEdit=!1,t.loading=!1,t}return Object(m["a"])(e,t),Object(c["a"])(e,[{key:"created",value:function(){"0"===this.custId&&this.getSupplierList(),this.getTableList()}},{key:"getSupplierList",value:function(){var t=this,e=this.custId,a={page:1,size:99999,parentId:e};x(a).then(function(e){var a=e.data||{};t.supplierList=a.result||[],t.supplierList.unshift({id:"0",name:"聚货通"})}).catch(function(t){return t})}},{key:"onSupplier",value:function(){this.tableData=[],this.getTableList()}},{key:"getTableList",value:function(t){var e=this;1===t&&(this.pageNumber=1);var a=U({page:this.pageNumber,size:this.pageSize},this.searchForm);this.loading=!0,y(a).then(function(t){e.loading=!1;var a=t.data;e.totalCount=a.total,e.tableData=a.result||[],e.tableData=e.tableData.map(function(t){var e=[];return t.stateId&&e.push(t.stateId),t.cityId&&e.push(t.cityId),t.countyId&&e.push(t.countyId),t.area=e,t})}).catch(function(){e.loading=!1})}},{key:"formatArea",value:function(t,e,a){return t?e?a?t+"/"+e+"/"+a:t+"/"+e:t:""}},{key:"formatCertType",value:function(t,e){return e?"0"===t?"身份证 | "+e:"1"===t?"护照 | "+e:"2"===t?"港澳通行证 | "+e:"3"===t?"其他 | "+e:"":""}},{key:"deletRow",value:function(t){var e=this;this.$confirm("删除司机将导致无法继续使用，确定要删除吗?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){k(t).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.getTableList()}).catch(function(t){return t})}).catch(function(){})}},{key:"handleSizeChange",value:function(t){this.pageSize=t,this.getTableList()}},{key:"handleCurrentChange",value:function(t){this.pageNumber=t,this.getTableList()}},{key:"addDriver",value:function(){var t=this;this.isShowUpdate=!0,this.isEdit=!1,this.$nextTick(function(){var e=t.$refs.editForm;e.setCust()})}},{key:"editDriver",value:function(t){var e=this;this.isShowUpdate=!0,this.isEdit=!0,this.$nextTick(function(){var a=e.$refs.editForm;a.setData(t)})}},{key:"close",value:function(){this.isShowUpdate=!1,this.reset()}},{key:"reset",value:function(){var t=this.$refs.editForm,e=t.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"onStatus",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(e,a){var r,n,s,o,l=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e.status&&e.status!==a){t.next=2;break}return t.abrupt("return");case 2:return r="0"===a?"禁用":"开启",t.next=5,this.$confirm("此操作将".concat(r,"该航线，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(t){return[null,t]}).catch(function(t){return[t,null]});case 5:if(n=t.sent,s=Object(i["a"])(n,2),o=s[0],s[1],!o){t.next=11;break}return t.abrupt("return");case 11:w({id:e.id,status:a}).then(function(t){l.$message.success("修改成功"),l.getTableList()}).catch(function(t){return t});case 12:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"custId",get:function(){var t=g["a"].info||{},e=t.custId;return e}},{key:"custName",get:function(){var t=g["a"].info||{},e=t.custName;return e}}]),e}(h["e"]);q=p["a"]([Object(h["a"])({name:"Chauffeur",components:{addEditForm:P}})],q);var V=q,K=V,Y=(a("845a"),Object(M["a"])(K,r,n,!1,null,"32a20c43",null));e["default"]=Y.exports},"845a":function(t,e,a){"use strict";var r=a("9c53"),n=a.n(r);n.a},"97ff":function(t,e,a){"use strict";var r=a("ad6c"),n=a.n(r);n.a},"9c53":function(t,e,a){},a306:function(t,e,a){"use strict";var r=a("2a33"),n=a.n(r);n.a},ad6c:function(t,e,a){},f908:function(t,e,a){}}]);