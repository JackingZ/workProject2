(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["measure-apply"],{"4cd9":function(e,t,r){"use strict";var a=r("a6c9"),n=r.n(a);n.a},"504c":function(e,t,r){var a=r("9e1e"),n=r("0d58"),o=r("6821"),i=r("52a7").f;e.exports=function(e){return function(t){var r,s=o(t),l=n(s),u=l.length,c=0,d=[];while(u>c)r=l[c++],a&&!i.call(s,r)||d.push(e?[r,s[r]]:s[r]);return d}}},8615:function(e,t,r){var a=r("5ca1"),n=r("504c")(!1);a(a.S,"Object",{values:function(e){return n(e)}})},a6c9:function(e,t,r){},b941:function(e,t,r){"use strict";r.d(t,"I",function(){return n}),r.d(t,"F",function(){return o}),r.d(t,"tb",function(){return i}),r.d(t,"G",function(){return s}),r.d(t,"J",function(){return l}),r.d(t,"ub",function(){return u}),r.d(t,"z",function(){return c}),r.d(t,"K",function(){return d}),r.d(t,"L",function(){return m}),r.d(t,"E",function(){return h}),r.d(t,"nb",function(){return p}),r.d(t,"x",function(){return f}),r.d(t,"Gb",function(){return g}),r.d(t,"Bb",function(){return v}),r.d(t,"Ab",function(){return b}),r.d(t,"Y",function(){return w}),r.d(t,"X",function(){return y}),r.d(t,"e",function(){return O}),r.d(t,"W",function(){return k}),r.d(t,"a",function(){return x}),r.d(t,"Ub",function(){return j}),r.d(t,"ec",function(){return _}),r.d(t,"n",function(){return C}),r.d(t,"Q",function(){return F}),r.d(t,"w",function(){return S}),r.d(t,"Qb",function(){return L}),r.d(t,"yb",function(){return D}),r.d(t,"xb",function(){return I}),r.d(t,"ab",function(){return T}),r.d(t,"bb",function(){return N}),r.d(t,"d",function(){return M}),r.d(t,"g",function(){return $}),r.d(t,"o",function(){return z}),r.d(t,"Rb",function(){return R}),r.d(t,"fb",function(){return E}),r.d(t,"cb",function(){return W}),r.d(t,"eb",function(){return P}),r.d(t,"db",function(){return B}),r.d(t,"bc",function(){return A}),r.d(t,"j",function(){return V}),r.d(t,"cc",function(){return Y}),r.d(t,"T",function(){return q}),r.d(t,"Pb",function(){return U}),r.d(t,"R",function(){return J}),r.d(t,"S",function(){return H}),r.d(t,"y",function(){return Q}),r.d(t,"Kb",function(){return G}),r.d(t,"dc",function(){return X}),r.d(t,"v",function(){return Z}),r.d(t,"Cb",function(){return K}),r.d(t,"wb",function(){return ee}),r.d(t,"h",function(){return te}),r.d(t,"f",function(){return re}),r.d(t,"fc",function(){return ae}),r.d(t,"Lb",function(){return ne}),r.d(t,"i",function(){return oe}),r.d(t,"vb",function(){return ie}),r.d(t,"P",function(){return se}),r.d(t,"N",function(){return le}),r.d(t,"O",function(){return ue}),r.d(t,"A",function(){return ce}),r.d(t,"Db",function(){return de}),r.d(t,"Eb",function(){return me}),r.d(t,"Wb",function(){return he}),r.d(t,"s",function(){return pe}),r.d(t,"k",function(){return fe}),r.d(t,"hb",function(){return ge}),r.d(t,"Ib",function(){return ve}),r.d(t,"Hb",function(){return be}),r.d(t,"ob",function(){return we}),r.d(t,"Yb",function(){return ye}),r.d(t,"t",function(){return Oe}),r.d(t,"zb",function(){return ke}),r.d(t,"jb",function(){return xe}),r.d(t,"Vb",function(){return je}),r.d(t,"r",function(){return _e}),r.d(t,"qb",function(){return Ce}),r.d(t,"sb",function(){return Fe}),r.d(t,"kb",function(){return Se}),r.d(t,"Mb",function(){return Le}),r.d(t,"l",function(){return De}),r.d(t,"H",function(){return Ie}),r.d(t,"Jb",function(){return Te}),r.d(t,"rb",function(){return Ne}),r.d(t,"Zb",function(){return Me}),r.d(t,"u",function(){return $e}),r.d(t,"ib",function(){return ze}),r.d(t,"pb",function(){return Re}),r.d(t,"Sb",function(){return Ee}),r.d(t,"p",function(){return We}),r.d(t,"gb",function(){return Pe}),r.d(t,"ac",function(){return Be}),r.d(t,"Z",function(){return Ae}),r.d(t,"Nb",function(){return Ve}),r.d(t,"mb",function(){return Ye}),r.d(t,"lb",function(){return qe}),r.d(t,"Tb",function(){return Ue}),r.d(t,"q",function(){return Je}),r.d(t,"M",function(){return He}),r.d(t,"Ob",function(){return Qe}),r.d(t,"m",function(){return Ge}),r.d(t,"Fb",function(){return Xe}),r.d(t,"Xb",function(){return Ze}),r.d(t,"b",function(){return Ke}),r.d(t,"c",function(){return et}),r.d(t,"B",function(){return tt}),r.d(t,"D",function(){return rt}),r.d(t,"C",function(){return at}),r.d(t,"V",function(){return nt}),r.d(t,"U",function(){return ot});var a=r("b32d");function n(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(a["a"])(e)}function o(e){var t={url:"/setting/area/getCityByStates",method:"post",data:e};return Object(a["a"])(t)}function i(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(a["a"])(t)}function s(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(a["a"])(t)}function l(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(a["a"])(t)}function u(e){var t={url:"/auth/supplier/getSupplierList",method:"get",params:e};return Object(a["a"])(t)}function c(e){var t={url:"/auth/agent/getAgentList",method:"get",params:e};return Object(a["a"])(t)}function d(e){var t={url:"/auth/customer/customer",method:"post",data:e};return Object(a["a"])(t)}function m(e){var t={url:"/auth/dept/getDeptList",method:"get",params:e};return Object(a["a"])(t)}function h(e){var t={url:"wms/warehouse/contain",method:"get",params:e};return Object(a["a"])(t)}function p(e){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:e};return Object(a["a"])(t)}function f(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(a["a"])(t)}function g(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(a["a"])(t)}function v(e){var t={url:"/wms/unload/page",method:"post",data:e};return Object(a["a"])(t)}function b(e){var t={url:"/wms/unload/get",method:"get",params:e};return Object(a["a"])(t)}function w(e){var t={url:"/wms/measure/page",method:"post",data:e};return Object(a["a"])(t)}function y(e){var t={url:"/wms/measure/pageDetail",method:"post",data:e};return Object(a["a"])(t)}function O(e){var t={url:"/wms/measure/e",method:"post",data:e};return Object(a["a"])(t)}function k(e){var t={url:"/wms/measure/get",method:"get",params:e};return Object(a["a"])(t)}function x(e){var t={url:"/wms/measure/detail/save",method:"post",data:e};return Object(a["a"])(t)}function j(e){var t={url:"/wms/measure/detail/update",method:"post",data:e};return Object(a["a"])(t)}function _(e){var t={url:"/wms/measure/c",method:"get",params:e};return Object(a["a"])(t)}function C(e){var t={url:"/wms/measure/delList",method:"post",data:e};return Object(a["a"])(t)}function F(e){var t={url:"/wms/measure/export",method:"post",responseType:"blob",params:e};return Object(a["a"])(t)}function S(e){var t={url:"/wms/measure/export1",method:"post",responseType:"blob",data:e};return Object(a["a"])(t)}function L(e){var t={url:"wms/measure/recopy",method:"get",params:e};return Object(a["a"])(t)}function D(e){var t={url:"/wms/towage/page",method:"post",data:e};return Object(a["a"])(t)}function I(e){var t={url:"/wms/towage/get",method:"get",params:e};return Object(a["a"])(t)}function T(e){var t={url:"/orders/allocation/task_page",method:"post",data:e};return Object(a["a"])(t)}function N(e){var t={url:"/orders/allocation/get_details",method:"get",params:e};return Object(a["a"])(t)}function M(e){var t={url:"/orders/allocation/audit",method:"post",data:e};return Object(a["a"])(t)}function $(e){var t={url:"/orders/allocation/cancel",method:"get",params:e};return Object(a["a"])(t)}function z(e){var t={url:"/orders/allocation/delete",method:"get",params:e};return Object(a["a"])(t)}function R(e){var t={url:"/orders/allocation/save",method:"post",data:e};return Object(a["a"])(t)}function E(e){var t={url:"/orders/pallet/getPallet",method:"post",data:e};return Object(a["a"])(t)}function W(e){var t={url:"/orders/worder/getOrderList",method:"post",data:e};return Object(a["a"])(t)}function P(e){var t={url:"/orders/outorder/getOrderList",method:"post",data:e};return Object(a["a"])(t)}function B(e){var t={url:"/orders/outorder/getOutOrder",method:"get",params:e};return Object(a["a"])(t)}function A(e){var t={url:"/orders/outorder/audit",method:"post",data:e};return Object(a["a"])(t)}function V(e){var t={url:"/orders/outorder/complete",method:"post",data:e};return Object(a["a"])(t)}function Y(e){var t={url:"/orders/outorder/generateOrder",method:"post",data:e};return Object(a["a"])(t)}function q(e){var t={url:"/wms/inventory/getOrderList",method:"post",data:e};return Object(a["a"])(t)}function U(e){var t={url:"/wms/inventory/save",method:"post",data:e};return Object(a["a"])(t)}function J(e){var t={url:"/wms/inventory/findById",method:"post",data:e};return Object(a["a"])(t)}function H(e){var t={url:"/wms/inventory/getInventoryById",method:"get",params:e};return Object(a["a"])(t)}function Q(e){var t={url:"/wms/inventory/query",method:"post",data:e};return Object(a["a"])(t)}function G(e){var t={url:"/wms/inventory/queryUnloadOrder",method:"post",data:e};return Object(a["a"])(t)}function X(e){var t={url:"/wms/inventory/update",method:"post",data:e};return Object(a["a"])(t)}function Z(e){var t={url:"/wms/inventory/doInventoryTask",method:"post",data:e};return Object(a["a"])(t)}function K(e){var t={url:"/wms/warehouse/getUserByWarehouseId",method:"get",params:e};return Object(a["a"])(t)}function ee(e){var t={url:"/wms/inventory/getTasks",method:"get",params:e};return Object(a["a"])(t)}function te(e){var t={url:"/wms/inventory/cancelTask",method:"get",params:e};return Object(a["a"])(t)}function re(e){var t={url:"/wms/inventory/cancelInventory",method:"post",params:e};return Object(a["a"])(t)}function ae(e){var t={url:"/wms/inventory/workInventory",method:"post",params:e};return Object(a["a"])(t)}function ne(e){var t={url:"/wms/inventory/release",method:"get",params:e};return Object(a["a"])(t)}function oe(e){var t={url:"/wms/inventory/cancelTaskInfo",method:"get",params:e};return Object(a["a"])(t)}function ie(e){var t={url:"/wms/inventory/getTaskInfoById",method:"get",params:e};return Object(a["a"])(t)}function se(e){var t={url:"/wms/examining/page",method:"post",data:e};return Object(a["a"])(t)}function le(e){var t={url:"/wms/examining/get",method:"get",params:e};return Object(a["a"])(t)}function ue(e){var t={url:"/wms/examining",method:"get",params:e};return Object(a["a"])(t)}function ce(e){var t={url:"",method:"post",data:e};return Object(a["a"])(t)}function de(e){var t={url:"/wms/warehouse/getWarehouse",method:"get",params:e};return Object(a["a"])(t)}function me(e){var t={url:"/wms/warehouse/getWarehouseList",method:"post",data:e};return Object(a["a"])(t)}function he(e){var t={url:"/wms/warehouse/saveWarehouse",method:"post",data:e};return Object(a["a"])(t)}function pe(e){var t={url:"/wms/warehouse/deleteWarehouse",method:"delete",params:e};return Object(a["a"])(t)}function fe(e){var t={url:"/wms/warehouse/changeStatus",method:"post",params:e};return Object(a["a"])(t)}function ge(e){var t={url:"/auth/post/getPostList",method:"get",params:e};return Object(a["a"])(t)}function ve(e){var t={url:"/wms/workCenter/getWorkCenterList",method:"post",data:e};return Object(a["a"])(t)}function be(e){var t={url:"/wms/workCenter/getList",method:"get",params:e};return Object(a["a"])(t)}function we(e){var t={url:"/wms/workCenter/get",method:"get",params:e};return Object(a["a"])(t)}function ye(e){var t={url:"/wms/workCenter/saveWorkCenter",method:"post",data:e};return Object(a["a"])(t)}function Oe(e){var t={url:"/wms/workCenter/deleteWorkCenter",method:"delete",params:e};return Object(a["a"])(t)}function ke(e){var t={url:"/wms/transit/getTransitPage",method:"post",data:e};return Object(a["a"])(t)}function xe(e){var t={url:"wms/warehouse/list",method:"get",params:e};return Object(a["a"])(t)}function je(e){var t={url:"/wms/transit/saveTransit",method:"post",data:e};return Object(a["a"])(t)}function _e(e){var t={url:"/wms/transit/deleteTransit",method:"delete",params:e};return Object(a["a"])(t)}function Ce(e){var t={url:"/wms/transit/get",method:"get",params:e};return Object(a["a"])(t)}function Fe(e){var t={url:"/cfg/ssc/getSscList",method:"get",params:e};return Object(a["a"])(t)}function Se(e){var t={url:"/wms/bin/getTree",method:"get",params:e};return Object(a["a"])(t)}function Le(e){var t={url:"/wms/bin/saveBin",method:"post",data:e};return Object(a["a"])(t)}function De(e){var t={url:"/wms/bin/del",method:"delete",params:e};return Object(a["a"])(t)}function Ie(e){var t={url:"/wms/shift/list",method:"get",params:e};return Object(a["a"])(t)}function Te(e){var t={url:"/wms/wss/page",method:"post",data:e};return Object(a["a"])(t)}function Ne(e){var t={url:"/wms/wss/get",method:"get",params:e};return Object(a["a"])(t)}function Me(e){var t={url:"/wms/wss/addWorkShifts",method:"post",data:e};return Object(a["a"])(t)}function $e(e){var t={url:"/wms/wss/del",method:"delete",params:e};return Object(a["a"])(t)}function ze(e){var t={url:"/wms/rot/findByPage",method:"post",data:e};return Object(a["a"])(t)}function Re(e){var t={url:"/wms/rot/get",method:"get",params:e};return Object(a["a"])(t)}function Ee(e){var t={url:"/wms/rot/addRotation",method:"post",data:e};return Object(a["a"])(t)}function We(e){var t={url:"/wms/rot/del",method:"delete",params:e};return Object(a["a"])(t)}function Pe(e){var t={url:"/auth/user/user4position",method:"post",data:e};return Object(a["a"])(t)}function Be(e){var t={url:"/wms/shift/create",method:"post",data:e};return Object(a["a"])(t)}function Ae(e){var t={url:"/wms/shift/view",method:"post",data:e};return Object(a["a"])(t)}function Ve(e){var t={url:"/wms/shift/update",method:"post",data:e};return Object(a["a"])(t)}function Ye(e){var t={url:"/wms/shift/page",method:"post",data:e};return Object(a["a"])(t)}function qe(e){var t={url:"/wms/shift/list",method:"get",params:e};return Object(a["a"])(t)}function Ue(e){var t={url:"/wms/shift/addShift",method:"post",data:e};return Object(a["a"])(t)}function Je(e){var t={url:"/wms/shift/del",method:"delete",params:e};return Object(a["a"])(t)}function He(e){var t={url:"/wms/discharge/list",method:"get",params:e};return Object(a["a"])(t)}function Qe(e){var t={url:"wms/discharge/save",method:"post",data:e};return Object(a["a"])(t)}function Ge(e){var t={url:"/wms/discharge/del",method:"delete",params:e};return Object(a["a"])(t)}function Xe(e){var t={url:"/wms/warehouse/terms",method:"get",params:e};return Object(a["a"])(t)}function Ze(e){var t={url:"/wms/warehouse/terms/save",method:"post",data:e};return Object(a["a"])(t)}function Ke(e){var t={url:"orders/allocation/exportAllocation2",responseType:"blob",method:"get",params:e};return Object(a["a"])(t)}function et(e){var t={url:"/orders/outorder/exportWsOut",responseType:"blob",method:"get",params:e};return Object(a["a"])(t)}function tt(e){var t={url:"/express/web/expressorder/s",responseType:"blob",method:"get",params:e};return Object(a["a"])(t)}function rt(e){var t={url:"/express/b/page",method:"post",data:e};return Object(a["a"])(t)}function at(e){var t={url:"/express/b/get",method:"get",params:e};return Object(a["a"])(t)}function nt(e){var t={url:"/cfg/lsc/getLscGroupList",method:"post",data:e};return Object(a["a"])(t)}function ot(e){var t={url:"/cfg/lsc/getLscGroupItems",method:"get",params:e};return Object(a["a"])(t)}},efea:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"measure-form",staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.detailShow,expression:"!detailShow"}],staticClass:"app-container"},[r("head-info",{attrs:{info:"",title:"计量申请单"}}),r("div",{staticClass:"app-panel"},[r("el-row",[r("el-col",{attrs:{span:4}},[r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleTest}},[e._v("\n              创建复测\n            ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("el-input",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"原单号"},model:{value:e.searchForm.originalNo,callback:function(t){e.$set(e.searchForm,"originalNo",t)},expression:"searchForm.originalNo"}}),r("el-input",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"计量申请单ID"},model:{value:e.searchForm.measureId,callback:function(t){e.$set(e.searchForm,"measureId",t)},expression:"searchForm.measureId"}}),r("el-select",{staticStyle:{width:"110px","margin-right":"5px"},attrs:{placeholder:"计量方式",size:"small",clearable:""},model:{value:e.searchForm.measureMethod,callback:function(t){e.$set(e.searchForm,"measureMethod",t)},expression:"searchForm.measureMethod"}},[r("el-option",{attrs:{label:"逐箱",value:1}}),r("el-option",{attrs:{label:"批量",value:2}}),r("el-option",{attrs:{label:"打托",value:3}})],1),r("el-select",{staticStyle:{width:"110px","margin-right":"5px"},attrs:{placeholder:"计量状态",size:"small",clearable:""},model:{value:e.searchForm.measureStatus,callback:function(t){e.$set(e.searchForm,"measureStatus",t)},expression:"searchForm.measureStatus"}},e._l(e.statusList,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"国家/地区",size:"small",filterable:"",clearable:""},on:{focus:e.getCountryList,change:e.onCountry},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"仓库"},on:{focus:e.getWarehouseList},model:{value:e.searchForm.warehouseId,callback:function(t){e.$set(e.searchForm,"warehouseId",t)},expression:"searchForm.warehouseId"}},e._l(e.warehouseList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-date-picker",{staticStyle:{width:"240px","margin-right":"10px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange","value-format":"yyyy-MM-dd",align:"right",size:"small","range-separator":"~","start-placeholder":"申请起始时间","end-placeholder":"申请截止时间"},model:{value:e.searchForm.applyTime,callback:function(t){e.$set(e.searchForm,"applyTime",t)},expression:"searchForm.applyTime"}}),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehouseDischargeQuery"],expression:"['warehouseDischargeQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSearch(1)}}},[e._v("\n              查询\n            ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["exportMeasureList"],expression:"['exportMeasureList']"}],attrs:{type:"primary",size:"small"},on:{click:e.exportData}},[e._v("\n              导出\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{fixed:"left",prop:"measureId",label:"计量申请单ID","min-width":"140","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{fixed:"left",prop:"measureStatus",label:"计量状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.delFlag?r("span",[e._v("\n                已取消\n              ")]):r("span",[e._v("\n                "+e._s((e.statusList[t.row.measureStatus-1]||{}).name)+"\n              ")])]}}])}),r("el-table-column",{attrs:{fixed:"left",prop:"originalNo",label:"原单号","min-width":"180","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"warehouseName",label:"仓库名称","min-width":"140"}}),r("el-table-column",{attrs:{prop:"custName",label:"客户名称","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"measureMethod",label:"计量方式",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.measureMethod?r("div",[e._v("\n                逐箱\n              ")]):2===t.row.measureMethod?r("div",[e._v("\n                批量\n              ")]):3===t.row.measureMethod?r("div",[e._v("\n                打托\n              ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"expectedMeasureTime",label:"要求完成时间",width:"180"}}),r("el-table-column",{attrs:{prop:"actualMeasureTime",label:"实际完成时间",width:"180"}}),r("el-table-column",{attrs:{prop:"executorName",label:"操作人",width:"150"}}),r("el-table-column",{attrs:{prop:"applicant",label:"申请人",width:"150"}}),r("el-table-column",{attrs:{prop:"createTime",label:"申请时间",width:"180"}}),r("el-table-column",{attrs:{prop:"secondaryMesaure",label:"是否需二次计量",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.secondaryMesaure?r("div",[e._v("\n                否\n              ")]):1===t.row.secondaryMesaure?r("div",[e._v("\n                是\n              ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"measureReviewAuditor",label:"计量复核审核人",width:"150"}}),r("el-table-column",{attrs:{prop:"measureReviewTime",label:"计量复核审核时间",width:"180"}}),r("el-table-column",{attrs:{prop:"measureReviewResults",label:"计量复核审核结果",width:"150"}}),r("el-table-column",{attrs:{prop:"relatedMeasuerId",label:"关联计量申请单号","min-width":"150","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehouseMeasureView"],expression:"['warehouseMeasureView']"}],attrs:{type:"text"},on:{click:function(r){return e.handleDetail(t.row)}}},[e._v("\n                查看详情\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehouseMeasureExport"],expression:"['warehouseMeasureExport']"}],attrs:{type:"text"},on:{click:function(r){return e.handleExport(t.row)}}},[e._v("\n                导出Excel\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.detailShow,expression:"detailShow"}],staticClass:"app-container"},[r("detail",{ref:"detailForm",attrs:{"status-list":e.statusList,"audit-list":e.auditList},on:{back:function(t){e.detailShow=!1}}})],1),r("el-dialog",{attrs:{title:"复测","close-on-click-modal":!1,width:"500px",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancelForm}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.form,"label-width":"80px",size:"small",rules:e.formRules}},[r("el-form-item",{attrs:{label:"原单号",prop:"code"}},[r("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",placeholder:"请输入原单号",maxlength:20},on:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;t.preventDefault()}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.cancelForm}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmForm}},[e._v("\n          确 定\n        ")])],1)],1)],1)])},n=[],o=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),i=r("a8db"),s=r("d225"),l=r("b0b4"),u=r("308d"),c=r("6bb5"),d=r("4e2b"),m=r("9ab4"),h=r("60a3"),p=r("9dba"),f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}]},[r("div",{staticClass:"detail-back"},[r("span",{staticStyle:{cursor:"pointer"},on:{click:function(t){return e.$emit("back")}}},[r("i",{staticClass:"el-icon-back"}),r("span",[e._v("返回")])])]),r("div",{staticClass:"app-panel order-detail"},[r("div",{staticClass:"detail-measure"},[r("el-row",[r("el-col",{attrs:{span:4}},[e._v("\n          计量申请单详细信息\n        ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[3!==e.form.measureStatus?r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleComplate}},[e._v("\n            完成计量\n          ")]):e._e()],1)],1)],1),r("el-form",{ref:"detail",staticClass:"detail-form",attrs:{model:e.form,"label-width":"160px","label-position":"right"}},[r("el-form-item",{attrs:{label:"计量申请单ID："}},[e._v("\n        "+e._s(e.form.measureId)+"\n      ")]),r("el-form-item",{attrs:{label:"原单号："}},[e._v("\n        "+e._s(e.form.originalNo)+"\n      ")]),r("el-form-item",{attrs:{label:"仓库名称："}},[e._v("\n        "+e._s(e.form.warehouseName)+"\n      ")]),r("el-form-item",{attrs:{label:"入仓时间："}},[e._v("\n        "+e._s(e.form.enterTime)+"\n      ")]),r("el-form-item",{attrs:{label:"计量方式："}},[1===e.form.measureMethod?r("span",[e._v("\n          逐箱\n        ")]):2===e.form.measureMethod?r("span",[e._v("\n          批量\n        ")]):3===e.form.measureMethod?r("span",[e._v("\n          打托\n        ")]):e._e()]),r("el-form-item",{attrs:{label:"是否二次计量："}},[0===e.form.secondaryMesaure?r("span",[e._v("\n          否\n        ")]):1===e.form.secondaryMesaure?r("span",[e._v("\n          是\n        ")]):e._e()]),r("el-form-item",{attrs:{label:"计量状态："}},[1===e.form.delFlag?r("span",[e._v("\n          已取消\n        ")]):r("span",[e._v("\n          "+e._s((e.statusList[e.form.measureStatus-1]||{}).name)+"\n        ")])]),r("el-form-item",{attrs:{label:"要求完成时间："}},[e._v("\n        "+e._s(e.form.expectedMeasureTime)+"\n      ")]),r("el-form-item",{attrs:{label:"实际完成时间："}},[e._v("\n        "+e._s(e.form.actualMeasureTime)+"\n      ")]),r("el-form-item",{attrs:{label:"操作人："}},[e._v("\n        "+e._s(e.form.executorName)+"\n      ")]),r("el-form-item",{attrs:{label:"申请人："}},[e._v("\n        "+e._s(e.form.applicant)+"\n      ")]),r("el-form-item",{attrs:{label:"申请时间："}},[e._v("\n        "+e._s(e.form.createTime)+"\n      ")]),r("div",[r("el-form-item",{attrs:{label:"计量复核审核结果："}},[e._v("\n          "+e._s(e.form.measureReviewResults)+"\n        ")]),r("el-form-item",{attrs:{label:"计量复核审核人："}},[e._v("\n          "+e._s(e.form.measureReviewAuditor)+"\n        ")]),r("el-form-item",{attrs:{label:"计量复核审核时间："}},[e._v("\n          "+e._s(e.form.measureReviewTime)+"\n        ")]),r("el-form-item",{attrs:{label:"关联计量申请单号："}},[e._v("\n          "+e._s(e.form.relatedMeasuerId)+"\n        ")])],1),r("div",[r("div",{staticStyle:{"line-height":"40px","border-top":"1px solid #e8e8e8",margin:"10px -15px 0"}},[r("el-row",[r("el-col",{attrs:{span:4}},[e._v("\n              计量明细\n            ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[r("input",{staticStyle:{display:"none"},attrs:{type:"text"}}),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleRowBegin}},[e._v("\n                开始计量\n              ")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleRowAdd}},[e._v("\n                新增\n              ")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.handleBatchDelete}},[e._v("\n                批量删除\n              ")]),"3"===e.custType?r("el-upload",{ref:"uploadFile",staticClass:"upload-demo",staticStyle:{display:"inline-block",margin:"0 10px"},attrs:{action:"",multiple:"","show-file-list":!1,"file-list":e.fileList,accept:".xlsx,.xls",limit:1,"auto-upload":!0,"http-request":e.uploadFile,"on-change":e.removeFileList}},[r("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("\n                  批量导入\n                ")])],1):e._e()],1)],1)],1),r("div",[r("el-form-item",{attrs:{label:"理论总件数："}},[e._v("\n            "+e._s(e.form.totalNumber)+"\n          ")]),r("el-form-item",{attrs:{label:"理论总体积（m³）："}},[e._v("\n            "+e._s(e.$volumeConversion(e.form.totalVolume||0,"CBCM","CBM",3))+"\n          ")]),r("el-form-item",{attrs:{label:"理论总重量（kg）："}},[e._v("\n            "+e._s(e.form.totalWeight)+"\n          ")])],1),r("div",[r("el-form-item",{attrs:{label:"总件数："}},[e._v("\n            "+e._s(e.form.actualNumber)+"\n          ")]),r("el-form-item",{attrs:{label:"总体积（m³）："}},[e._v("\n            "+e._s(e.form.actualVolume)+"\n          ")]),r("el-form-item",{attrs:{label:"总重量（kg）："}},[e._v("\n            "+e._s(e.form.actualWeight)+"\n          ")]),e.volumeWeight.wv?r("el-form-item",{attrs:{label:"总重量体积："}},[e._v("\n            "+e._s(e.volumeWeight.wv)+"\n          ")]):e._e(),e.volumeWeight.volumeWeight?r("el-form-item",{attrs:{label:"总体积重："}},[e._v("\n            "+e._s(e.volumeWeight.volumeWeight)+"\n          ")]):e._e()],1)])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""},on:{"selection-change":e.handleSelection}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"measureType",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.measureType?r("div",[e._v("\n            逐箱\n          ")]):2===t.row.measureType?r("div",[e._v("\n            批量\n          ")]):3===t.row.measureType?r("div",[e._v("\n            打托\n          ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"boxCode",label:"箱号/托盘ID","min-width":"120px"}}),r("el-table-column",{attrs:{label:"重量（kg）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:t.row.weight,callback:function(r){e.$set(t.row,"weight",r)},expression:"scope.row.weight"}}):r("span",[e._v("\n            "+e._s(t.row.weight)+"\n          ")])]}}])}),r("el-table-column",{attrs:{label:"长（cm）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:t.row.length,callback:function(r){e.$set(t.row,"length",r)},expression:"scope.row.length"}}):r("span",[e._v("\n            "+e._s(t.row.length)+"\n          ")])]}}])}),r("el-table-column",{attrs:{label:"宽（cm）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:t.row.wigth,callback:function(r){e.$set(t.row,"wigth",r)},expression:"scope.row.wigth"}}):r("span",[e._v("\n            "+e._s(t.row.wigth)+"\n          ")])]}}])}),r("el-table-column",{attrs:{label:"高（cm）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:t.row.height,callback:function(r){e.$set(t.row,"height",r)},expression:"scope.row.height"}}):r("span",[e._v("\n            "+e._s(t.row.height)+"\n          ")])]}}])}),r("el-table-column",{attrs:{prop:"girth",label:"围长"}}),e.volumeWeight.volumeWeight?r("el-table-column",{attrs:{prop:"weightVolume",label:"体积重"}}):e._e(),e.volumeWeight.wv?r("el-table-column",{attrs:{prop:"wv",label:"重量体积"}}):e._e(),r("el-table-column",{attrs:{prop:"empName",label:"计量人"}}),r("el-table-column",{attrs:{prop:"createTime",label:"计量时间",width:"160px"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?e._e():r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleRowEdit(t.row,t.$index)}}},[e._v("\n            编辑\n          ")]),t.row.isEdit?r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleRowSave(t.row)}}},[e._v("\n            保存\n          ")]):e._e(),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.handleRowDelete([t.row.id])}}},[e._v("\n            删除\n          ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right",margin:"5px 0 15px"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{width:"500px",title:e.title,visible:e.dialogMachine,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogMachine=t},closed:e.machineCancel}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"machineForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.machineForm,"label-width":"90px","label-position":"right",size:"small"}},[r("el-form-item",{staticClass:"is-required",attrs:{label:"箱号",prop:"boxCode"}},[r("el-input",{ref:"machineDown1",attrs:{size:"small",placeholder:"请输入",maxlength:25},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onMachineDown("2")}},model:{value:e.machineForm.boxCode,callback:function(t){e.$set(e.machineForm,"boxCode",t)},expression:"machineForm.boxCode"}})],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"重量(kg)",prop:"weight"}},[r("el-input-number",{ref:"machineDown2",staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onMachineDown("3")}},model:{value:e.machineForm.weight,callback:function(t){e.$set(e.machineForm,"weight",t)},expression:"machineForm.weight"}})],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"长度(cm)",prop:"length"}},[r("el-input-number",{ref:"machineDown3",staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onMachineDown("4")}},model:{value:e.machineForm.length,callback:function(t){e.$set(e.machineForm,"length",t)},expression:"machineForm.length"}})],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"宽度(cm)",prop:"wigth"}},[r("el-input-number",{ref:"machineDown4",staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onMachineDown("5")}},model:{value:e.machineForm.wigth,callback:function(t){e.$set(e.machineForm,"wigth",t)},expression:"machineForm.wigth"}})],1),r("el-form-item",{staticClass:"is-required",attrs:{label:"高度(cm)",prop:"height"}},[r("el-input-number",{ref:"machineDown5",staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onMachineDown("6")}},model:{value:e.machineForm.height,callback:function(t){e.$set(e.machineForm,"height",t)},expression:"machineForm.height"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.machineCancel}},[e._v("\n        取消\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.machineSave}},[e._v("\n        保存\n      ")])],1)],1),r("el-dialog",{attrs:{width:"500px",title:e.title,visible:e.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.handleFormCancel}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.dialogForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"箱号",prop:"boxCode"}},[r("el-input",{attrs:{size:"small",placeholder:"请输入",maxlength:25},model:{value:e.dialogForm.boxCode,callback:function(t){e.$set(e.dialogForm,"boxCode",t)},expression:"dialogForm.boxCode"}})],1),r("el-form-item",{attrs:{label:"重量(kg)",prop:"weight"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.dialogForm.weight,callback:function(t){e.$set(e.dialogForm,"weight",t)},expression:"dialogForm.weight"}})],1),r("el-form-item",{attrs:{label:"长度(cm)",prop:"length"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.dialogForm.length,callback:function(t){e.$set(e.dialogForm,"length",t)},expression:"dialogForm.length"}})],1),r("el-form-item",{attrs:{label:"宽度(cm)",prop:"wigth"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.dialogForm.wigth,callback:function(t){e.$set(e.dialogForm,"wigth",t)},expression:"dialogForm.wigth"}})],1),r("el-form-item",{attrs:{label:"高度(cm)",prop:"height"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.dialogForm.height,callback:function(t){e.$set(e.dialogForm,"height",t)},expression:"dialogForm.height"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleFormCancel}},[e._v("\n        取消\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleFormSave}},[e._v("\n        保存\n      ")])],1)],1),r("el-dialog",{attrs:{visible:e.dialogDisChargeNo,width:"350px"},on:{"update:visible":function(t){e.dialogDisChargeNo=t}}},[r("div",[r("span",[e._v("卸货申请单号")]),r("el-input",{staticClass:"dialog-charge-input",attrs:{placeholder:"请扫描或填入卸货申请单号"},on:{change:e.handleDisChargeNo},model:{value:e.disChargeNo,callback:function(t){e.disChargeNo=t},expression:"disChargeNo"}})],1),r("span",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogDisChargeNo=!1}}},[e._v("取 消")])],1)])],1)},g=[],v=(r("8615"),r("b941"));function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(r,!0).forEach(function(t){Object(o["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.volumeWeight={},e.form={actualMeasureTime:void 0,applicant:void 0,applicantId:void 0,realName:void 0,createTime:void 0,custId:void 0,custName:void 0,expectedMeasureTime:void 0,measureId:void 0,measureMethod:void 0,measureReviewAuditor:void 0,measureReviewResults:void 0,measureReviewTime:void 0,measureStatus:void 0,originalNo:void 0,relatedMeasuerId:void 0,secondaryMesaure:void 0,totalNumber:void 0,totalVolume:void 0,totalWeight:void 0,updateTime:void 0,warehouseId:void 0,warehouseName:void 0},e.row={},e.fileList=[],e.detailLoading=!1,e.loading=!1,e.formLoading=!1,e.tableData=[],e.title="",e.code="",e.radio="0",e.isEdit=!1,e.dialogVisible=!1,e.dialogMachine=!1,e.machineForm={measureType:1,boxCode:void 0,height:void 0,length:void 0,wigth:void 0,weight:void 0},e.dialogForm={measureType:1,boxCode:void 0,height:void 0,length:void 0,wigth:void 0,weight:void 0},e.formRules={boxCode:[{required:!0,message:"箱号不能为空",trigger:"blur"},{validator:function(e,t,r){var a=/^[a-zA-Z0-9 .·_-]+$/;t?a.test(t)?r():r(new Error("箱号不能有中文及特殊字符")):r(new Error("箱号不能为空"))},trigger:"blur"}],height:[{required:!0,message:"高度不能为空",trigger:"blur"}],length:[{required:!0,message:"长度不能为空",trigger:"blur"}],wigth:[{required:!0,message:"宽度不能为空",trigger:"blur"}],weight:[{required:!0,message:"重量不能为空",trigger:"blur"}]},e.disChargeNo="",e.dialogDisChargeNo=!1,e.measureId="",e.page=1,e.size=10,e.total=10,e.selectArr=[],e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"removeFileList",value:function(){this.fileList=[]}},{key:"uploadFile",value:function(e){var t=this,r=e.file,a=new FormData;a.append("file",r),a.append("measureId",this.form.measureId),a.append("measurementId",this.form.id),a.append("originalNo",this.form.originalNo),Object(v["e"])(a).then(function(e){t.getForm(),t.getDetail(),t.$message.success("导入成功")}).catch(function(e){return e})}},{key:"handleDisChargeNo",value:function(){this.disChargeNo&&(this.dialogDisChargeNo=!1,this.dialogVisible=!0)}},{key:"setNo",value:function(){this.dialogDisChargeNo=!0}},{key:"setData",value:function(e){this.row=e,this.measureId=e.id||"",this.page=1,this.volumeWeight={},this.getForm(),this.getDetail()}},{key:"getForm",value:function(){var e=this;this.detailLoading=!0,Object(v["W"])({id:this.measureId}).then(function(t){var r=t.data||{};e.form=r,e.detailLoading=!1}).catch(function(t){return e.detailLoading=!1,[null,t]})}},{key:"getDetail",value:function(){var e=this;this.loading=!0,Object(v["X"])({model:{code:this.row.originalNo,boxCode:this.code,measurementId:this.measureId},page:this.page,size:this.size}).then(function(t){var r=t.data||{};e.tableData=r.result||[],e.total=r.total,e.loading=!1,1===e.page&&(e.volumeWeight={volumeWeight:(e.tableData[0]||{}).totalWeightVolume,wv:(e.tableData[0]||{}).totalWv})}).catch(function(t){return e.loading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=e,this.getDetail()}},{key:"handleCurrentChange",value:function(e){this.page=e,this.getDetail()}},{key:"handleEnter",value:function(){if(this.code)switch(this.dialogVisible=!0,this.radio){case"0":this.title="单箱计量";break;case"1":this.title="批量计量";break;case"2":this.title="打托计量";break;default:break}}},{key:"handleSelection",value:function(e){this.selectArr=(e||[]).map(function(e){return e.id})}},{key:"handleBatchDelete",value:function(){Array.isArray(this.selectArr)&&this.selectArr.length>0?this.handleRowDelete(this.selectArr):this.$message.error("请勾选需要删除的列表项")}},{key:"handleRowDelete",value:function(e){var t=this,r={id:this.measureId,list:e||[]};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["n"])(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getForm(),t.getDetail(),t.selectArr=[]}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"handleRowEdit",value:function(e,t){this.$set(e,"isEdit",!0)}},{key:"handleRowSave",value:function(e){var t=this;this.loading=!0;var r=e;Object(v["Ub"])(r).then(function(e){t.$message({type:"success",message:"保存成功"}),t.getForm(),t.getDetail()}).catch(function(){return t.loading=!1,!1})}},{key:"handleRowAdd",value:function(){this.dialogVisible=!0,this.title="新增计量(逐箱)"}},{key:"handleFormSave",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var r=w({},e.dialogForm,{measureId:e.form.measureId,measurementId:e.measureId,originalNo:e.form.originalNo,empId:"",empName:""});Object(v["a"])(r).then(function(t){e.formLoading=!1,e.$message({type:"success",message:"操作成功"}),e.formLoading=!1,e.handleFormCancel(),e.getForm(),e.getDetail()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"handleFormCancel",value:function(){this.dialogVisible=!1,this.dialogForm={measureType:1,boxCode:void 0,height:void 0,length:void 0,wigth:void 0,weight:void 0};var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"handleRowBegin",value:function(){var e=this;this.dialogMachine=!0,this.title="新增计量(逐箱)",this.$nextTick(function(){var t=e.$refs.machineDown1;t.focus()})}},{key:"onMachineDown",value:function(e){if("6"!==e){var t=this.$refs["machineDown".concat(e)];t.focus()}else this.machineSave()}},{key:"machineSave",value:function(){var e=this,t=Object.values(this.machineForm).every(function(e){return!!e});if(!t)return this.$message.error("数据录入为空，无法保存"),this.machineCancel(),void this.handleRowBegin();this.formLoading=!0;var r=w({},this.machineForm,{measureId:this.form.measureId,measurementId:this.measureId,originalNo:this.form.originalNo,empId:"",empName:""});Object(v["a"])(r).then(function(t){e.formLoading=!1,e.$message({type:"success",message:"操作成功"}),e.formLoading=!1,e.machineCancel(),e.handleRowBegin(),e.getForm(),e.getDetail()}).catch(function(t){return e.formLoading=!1,t})}},{key:"machineCancel",value:function(){this.machineForm={measureType:1,boxCode:void 0,height:void 0,length:void 0,wigth:void 0,weight:void 0};var e=this.$refs.machineForm;this.$nextTick(function(){e.clearValidate()}),this.dialogMachine=!1}},{key:"handleComplate",value:function(){var e=this;if(this.form.actualNumber<this.form.totalNumber)this.$message.error("计量箱数与下单箱数不匹配");else{this.detailLoading=!0;var t={id:this.measureId};Object(v["ec"])(t).then(function(t){e.$message({type:"success",message:"保存成功"}),e.getForm(),e.getDetail()}).catch(function(){return e.detailLoading=!1,!1})}}},{key:"handlePrint",value:function(){}},{key:"handleRefuse",value:function(){}},{key:"handlePass",value:function(){}},{key:"handleTableSave",value:function(){}},{key:"handleSubmit",value:function(){}},{key:"handleRecheck",value:function(){this.$confirm("确定需要进行计量复核吗？（提交复核申请后，将由代理商进行审核）","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消"}).then(function(){}).catch(function(){})}},{key:"custType",get:function(){var e=p["a"].info||{},t=e.custType;return t}}]),t}(h["e"]);y=m["a"]([Object(h["a"])({name:"detail",components:{},props:{statusList:{type:Array,default:function(){return[]}},auditList:{type:Array,default:function(){return[]}}}})],y);var O=y,k=O,x=(r("4cd9"),r("2877")),j=Object(x["a"])(k,f,g,!1,null,"1b506da2",null),_=j.exports,C=r("5a0c"),F=r.n(C),S=r("bef3");function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(r,!0).forEach(function(t){Object(o["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var I=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(u["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.searchForm={applyTime:[],applyTimeEnd:void 0,applyTimeStart:void 0,custName:void 0,measureId:void 0,measureMethod:void 0,measureStatus:void 0,auditStatus:void 0,originalNo:void 0,warehouseId:void 0},e.form={code:void 0},e.formRules={code:[{required:!0,message:"原单号不能为空",trigger:"blur"},{validator:function(e,t,r){var a=/^([\w | -]){8,20}$/;a.test(t)?r():r(new Error("原单号必须是8-20个字母、数字、下划线、中划线"))},trigger:"blur"}]},e.tableData=[],e.warehouseList=[],e.countryList=[],e.total=0,e.page=1,e.size=10,e.loading=!1,e.moreShow=!1,e.detailShow=!1,e.selectLoading=!1,e.formLoading=!1,e.dialogShow=!1,e.statusList=[{id:1,name:"待计量"},{id:2,name:"计量中"},{id:3,name:"已计量"},{id:4,name:"已取消"}],e.auditList=[{id:1,name:"计量复核待审核"},{id:2,name:"计量复核已通过"},{id:3,name:"计量复核被拒绝"}],e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"exportData",value:function(){var e=this;this.loading=!0;var t=this.searchForm,r=t.applyTime,a=Object(i["a"])(t,["applyTime"]);Array.isArray(r)&&r.length>0&&(a.applyTimeStart=r[0],a.applyTimeEnd=r[1]);var n=D({},a);Object(v["w"])(n).then(function(t){e.loading=!1,t.text().then(function(r){var a=JSON.parse(r);a.data&&e.$message.error(t.data.msg||"文件下载失败")}).catch(function(){var e=document.createElement("a");document.body.appendChild(e);var r=URL.createObjectURL(t);e.href=r,e.download="计量申请单"+F()().format("YYYY-MM-DD_HH-mm-ss")+".xlsx",e.click(),document.body.removeChild(e),URL.revokeObjectURL(r)})}).catch(function(t){e.loading=!1,t.data&&t.data.text().then(function(t){try{var r=JSON.parse(t);200!==r.code&&e.$message.error(r.msg||"文件下载失败")}catch(a){return a}})})}},{key:"handleTest",value:function(){this.dialogShow=!0}},{key:"cancelForm",value:function(){this.dialogShow=!1,this.form={code:void 0},this.clearValidate()}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"confirmForm",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0,Object(v["Qb"])(e.form).then(function(t){e.$message({type:"success",message:"提交成功"}),e.formLoading=!1,e.handleSearch(),e.cancelForm()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"getCountryList",value:function(){var e=this,t={custId:this.custId||"",typeId:"04"};this.selectLoading=!0,Object(S["b"])(t).then(function(t){e.countryList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onCountry",value:function(){this.searchForm.warehouseId=void 0,this.warehouseList=[]}},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0,Object(v["Eb"])({model:{custId:this.custId,countryId:this.searchForm.countryId},page:1,size:9999}).then(function(t){var r=t.data||{};e.warehouseList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleSearch",value:function(e){var t=this;this.loading=!0;var r=this.searchForm,a=r.applyTime,n=Object(i["a"])(r,["applyTime"]);Array.isArray(a)&&a.length>0&&(n.applyTimeStart=a[0],n.applyTimeEnd=a[1]),e&&(this.page=e);var o={model:n,page:this.page,size:this.size};Object(v["Y"])(o).then(function(e){var r=e.data||{};t.tableData=r.result||[],t.total=r.total,t.loading=!1}).catch(function(e){return t.loading=!1,[null,e]})}},{key:"handleDetail",value:function(e){this.detailShow=!0;var t=this.$refs.detailForm;t.setData(e)}},{key:"handleExport",value:function(e){var t=this;Object(v["Q"])({id:e.id,originalNo:e.originalNo}).then(function(e){var t=document.createElement("a");document.body.appendChild(t);var r=new Blob([e],{type:"application/vnd.ms-excel"}),a=URL.createObjectURL(r);t.href=a,t.download="计量数据列表"+F()().format("YYYY-MM-DD_HH-mm-ss")+".xls",t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)}).catch(function(e){e.data.text().then(function(e){try{var r=JSON.parse(e);200!==r.code&&t.$message.error(r.msg||"文件下载失败")}catch(a){return a}})})}},{key:"handleSizeChange",value:function(e){this.size=e,this.handleSearch()}},{key:"handleCurrentChange",value:function(e){this.page=e,this.handleSearch()}},{key:"created",value:function(){this.searchForm.applyTime=[F()().subtract(30,"d").format("YYYY-MM-DD"),F()().format("YYYY-MM-DD")],this.handleSearch()}},{key:"custId",get:function(){var e=p["a"].info||{},t=e.custId;return t}}]),t}(h["e"]);I=m["a"]([Object(h["a"])({name:"measure",components:{detail:_},props:{}})],I);var T=I,N=T,M=Object(x["a"])(N,a,n,!1,null,"05656100",null);t["default"]=M.exports}}]);