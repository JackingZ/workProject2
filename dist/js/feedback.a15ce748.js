(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["feedback"],{"56d8":function(e,t,a){"use strict";var i=a("63fc"),l=a.n(i);l.a},"63fc":function(e,t,a){},f3ff:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"反馈"}}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-select",{staticStyle:{width:"120px"},attrs:{size:"small",clearable:"",placeholder:"反馈来源"},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-select",{staticStyle:{width:"120px",margin:"0 5px"},attrs:{size:"small",clearable:"",placeholder:"状态"},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"10px"},attrs:{"unlink-panels":"",clearable:"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","start-placeholder":"起期","end-placeholder":"止期"},model:{value:e.createTime,callback:function(t){e.createTime=t},expression:"createTime"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 300px)",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"反馈账号",width:"150"}}),a("el-table-column",{attrs:{prop:"companyName",label:"所属公司",width:"150"}}),a("el-table-column",{attrs:{prop:"type",label:"反馈来源",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.typeList.find(function(e){return e.value===t.row.type})||{}).label||"--")+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"submitContent",label:"反馈内容"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.value===t.row.status})||{}).label||"--")+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"submitTime",label:"提交时间",width:"160"}}),a("el-table-column",{attrs:{fixed:"right",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.showFeedback(t.row)}}},[e._v("\n                详情\n              ")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.deleteFeedback(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),a("el-dialog",{attrs:{title:"反馈详情",visible:e.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.visible=t},close:e.closeDialog}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}],staticStyle:{"padding-right":"20px"},attrs:{"label-width":"80px",size:"small"}},[a("el-form-item",{attrs:{label:"反馈账号:"}},[e._v("\n        "+e._s(e.feedbackInfo.name)+"\n      ")]),a("el-form-item",{attrs:{label:"反馈内容:"}},[e._v("\n        "+e._s(e.feedbackInfo.submitContent)+"\n      ")]),a("el-form-item",{attrs:{label:"状态:"}},[e._v("\n        "+e._s((e.statusList.find(function(t){return t.value===e.feedbackInfo.status})||{}).label||"--")+"\n      ")]),e.fileUrl?a("el-form-item",{attrs:{label:"页面截图:"}},[a("div",{staticClass:"imgUrl"},[a("img",{attrs:{src:e.fileUrl}}),a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-view mask-view-icon",on:{click:e.handlePreview}})])])]):e._e()],1),"0"===e.feedbackInfo.status?a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){return e.handleFeedback("2")}}},[e._v("\n        忽略\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleFeedback("1")}}},[e._v("\n        已处理\n      ")])],1):e._e()],1),a("el-dialog",{attrs:{title:"页面截图",visible:e.dialogVisible,top:"20px","append-to-body":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.fileUrl}})])],1)},l=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("bd86")),o=a("d225"),r=a("b0b4"),s=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),p=a("60a3"),f=a("8606"),b=a("5a0c"),h=a.n(b);function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var v=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.dialogLoading=!1,e.dialogVisible=!1,e.visible=!1,e.tableData=[],e.createTime=[],e.typeList=[{value:"0",label:"着陆页"},{value:"1",label:"后台管理系统"}],e.statusList=[{value:"0",label:"未处理"},{value:"1",label:"已处理"},{value:"2",label:"忽略"}],e.searchForm={status:"",type:""},e.pagination={page:1,size:10,total:0},e.feedbackInfo={},e.fileUrl="",e}return Object(u["a"])(t,e),Object(r["a"])(t,[{key:"handleFeedback",value:function(e){var t=this;if(!this.dialogLoading){var a={status:e,id:this.feedbackInfo.id};this.dialogLoading=!0,Object(f["d"])(a).then(function(){t.dialogLoading=!1,t.$message.success("操作成功"),t.closeDialog(),t.queryAll()}).catch(function(){t.dialogLoading=!1})}}},{key:"closeDialog",value:function(){this.visible=!1,this.feedbackInfo={},this.fileUrl=""}},{key:"handlePreview",value:function(){this.dialogVisible=!0}},{key:"deleteFeedback",value:function(e){var t=this;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:e.id};t.loading=!0,Object(f["a"])(a).then(function(){t.loading=!1,t.$message.success("删除成功"),t.queryAll(1)}).catch(function(){t.loading=!1})}).catch(function(e){return e})}},{key:"showFeedback",value:function(e){var t=this,a={id:e.id};this.loading=!0,this.fileUrl="",Object(f["b"])(a).then(function(e){t.loading=!1,t.visible=!0,t.feedbackInfo=e.data||{},t.feedbackInfo.imgUrl&&(t.fileUrl="https://file.jhtinfo.net/"+t.feedbackInfo.imgUrl)}).catch(function(){t.loading=!1})}},{key:"queryAll",value:function(e){var t=this;1===e&&(this.pagination.page=1);var a={model:m({},this.searchForm),page:this.pagination.page,size:this.pagination.size};this.createTime&&this.createTime.length&&(a.model.startTime=h()(this.createTime[0]).format("YYYY-MM-DD")+" 00:00:00",a.model.endTime=h()(this.createTime[1]).format("YYYY-MM-DD")+" 23:59:59"),this.loading=!0,Object(f["c"])(a).then(function(e){t.loading=!1;var a=e.data;t.tableData=a.result||[],t.pagination.total=a.total||0}).catch(function(){t.loading=!1,t.tableData=[],t.pagination.total=0})}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll()}}]),t}(p["e"]);v=d["a"]([Object(p["a"])({name:"Feedback",props:{}})],v);var y=v,k=y,w=(a("56d8"),a("2877")),x=Object(w["a"])(k,i,l,!1,null,"05b7a6da",null);t["default"]=x.exports}}]);