(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["status-config"],{"3f0a":function(e,t,l){"use strict";var a=l("f497"),i=l.n(a);i.a},e042:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[l("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[l("div",{staticClass:"app-container"},[l("head-info",{attrs:{info:"",title:"状态设置"}}),l("div",{staticClass:"app-panel"},[l("div",{staticStyle:{"text-align":"right"}},[l("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{placeholder:"排序",size:"small",filterable:"",clearable:""},model:{value:e.selectValue.sorted,callback:function(t){e.$set(e.selectValue,"sorted",t)},expression:"selectValue.sorted"}},[l("el-option",{attrs:{label:"升序",value:"1"}}),l("el-option",{attrs:{label:"降序",value:"2"}})],1),l("el-select",{staticStyle:{width:"130px","margin-right":"10px"},attrs:{loading:e.selectLoading,placeholder:"服务大类",size:"small",filterable:"",clearable:""},on:{focus:e.getServiceList},model:{value:e.selectValue.statusType,callback:function(t){e.$set(e.selectValue,"statusType",t)},expression:"selectValue.statusType"}},e._l(e.serviceList,function(e){return l("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),l("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n            查询\n          ")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[l("el-table-column",{attrs:{prop:"sorted",label:"排序值",width:"120"}}),l("el-table-column",{attrs:{prop:"statusName",label:"状态名称"}}),l("el-table-column",{attrs:{prop:"",label:"服务大类",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.typeFilter(t.row,"type"))+"\n            ")]}}])}),l("el-table-column",{attrs:{prop:"describes",label:"描述","min-width":"200","show-overflow-tooltip":""}}),l("el-table-column",{attrs:{prop:"",label:"是否有文件",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.fileDownload?"是":"否")+"\n            ")]}}])}),l("el-table-column",{attrs:{prop:"",label:"权限","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("div",[e._v("\n                仅查看："+e._s(e.typeFilter(t.row,"view"))+"\n              ")]),1===t.row.fileDownload?l("div",[e._v("\n                可下载："+e._s(e.typeFilter(t.row,"file"))+"\n              ")]):e._e()]}}])}),l("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(l){return e.editRow(t.row)}}},[e._v("\n                权限设置\n              ")]),l("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(l){return e.editDesc(t.row)}}},[e._v("\n                修改描述\n              ")])]}}])})],1),l("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),l("el-dialog",{attrs:{title:"权限设置",visible:e.dialogShow,"close-on-click-modal":!1,width:"700px"},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancel}},[l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[l("el-row",{staticStyle:{"background-color":"#fafafa","border-bottom":"1px solid #dfe6ec","line-height":"35px"}},[l("el-col",{attrs:{span:4}},[e._v("\n                权限\n              ")]),l("el-col",{attrs:{span:20}},[e._v("\n                角色\n              ")])],1),l("el-row",{staticStyle:{"border-bottom":"1px solid #dfe6ec","line-height":"35px"}},[l("el-col",{attrs:{span:4}},[e._v("\n                仅查看\n              ")]),l("el-col",{attrs:{span:20}},[l("el-checkbox",{model:{value:e.viewRoles.supplier,callback:function(t){e.$set(e.viewRoles,"supplier",t)},expression:"viewRoles.supplier"}},[e._v("\n                  供应商\n                ")]),l("el-checkbox",{model:{value:e.viewRoles.jht,callback:function(t){e.$set(e.viewRoles,"jht",t)},expression:"viewRoles.jht"}},[e._v("\n                  聚货通\n                ")]),l("el-checkbox",{model:{value:e.viewRoles.agent1,callback:function(t){e.$set(e.viewRoles,"agent1",t)},expression:"viewRoles.agent1"}},[e._v("\n                  一级代理商\n                ")]),l("el-checkbox",{model:{value:e.viewRoles.agent2,callback:function(t){e.$set(e.viewRoles,"agent2",t)},expression:"viewRoles.agent2"}},[e._v("\n                  二级代理商\n                ")]),l("el-checkbox",{model:{value:e.viewRoles.customer,callback:function(t){e.$set(e.viewRoles,"customer",t)},expression:"viewRoles.customer"}},[e._v("\n                  客户\n                ")])],1)],1),e.ifFile?l("el-row",{staticStyle:{"border-bottom":"1px solid #dfe6ec","line-height":"35px"}},[l("el-col",{attrs:{span:4}},[e._v("\n                可下载\n              ")]),l("el-col",{attrs:{span:20}},[l("el-checkbox",{model:{value:e.fileRoles.supplier,callback:function(t){e.$set(e.fileRoles,"supplier",t)},expression:"fileRoles.supplier"}},[e._v("\n                  供应商\n                ")]),l("el-checkbox",{model:{value:e.fileRoles.jht,callback:function(t){e.$set(e.fileRoles,"jht",t)},expression:"fileRoles.jht"}},[e._v("\n                  聚货通\n                ")]),l("el-checkbox",{model:{value:e.fileRoles.agent1,callback:function(t){e.$set(e.fileRoles,"agent1",t)},expression:"fileRoles.agent1"}},[e._v("\n                  一级代理商\n                ")]),l("el-checkbox",{model:{value:e.fileRoles.agent2,callback:function(t){e.$set(e.fileRoles,"agent2",t)},expression:"fileRoles.agent2"}},[e._v("\n                  二级代理商\n                ")]),l("el-checkbox",{model:{value:e.fileRoles.customer,callback:function(t){e.$set(e.fileRoles,"customer",t)},expression:"fileRoles.customer"}},[e._v("\n                  客户\n                ")])],1)],1):e._e(),l("div",{staticStyle:{"text-align":"right",padding:"20px 0 0"},attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.cancel}},[e._v("\n                取 消\n              ")]),l("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("\n                确 定\n              ")])],1)],1)]),l("el-dialog",{attrs:{title:"修改",visible:e.descShow,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.descShow=t},closed:e.closed}},[l("div",{directives:[{name:"loading",rawName:"v-loading",value:e.dialogLoading,expression:"dialogLoading"}]},[l("el-form",{ref:"editForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"120px","label-position":"right",size:"small"}},[l("el-form-item",{attrs:{label:"排序值",prop:"sorted"}},[l("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.selectForm.sorted,callback:function(t){e.$set(e.selectForm,"sorted",t)},expression:"selectForm.sorted"}})],1),l("el-form-item",{attrs:{label:"描述",prop:"describes"}},[l("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:6},rows:4,placeholder:"请输入"},model:{value:e.selectForm.describes,callback:function(t){e.$set(e.selectForm,"describes",t)},expression:"selectForm.describes"}})],1)],1),l("div",{staticStyle:{"text-align":"right",padding:"20px 0 0"},attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.closed}},[e._v("\n                取 消\n              ")]),l("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("\n                确 定\n              ")])],1)],1)])],1)],1)])])},i=[],n=(l("8e6e"),l("c5f6"),l("bd86")),o=(l("7f7f"),l("7514"),l("ac6a"),l("456d"),l("d225")),s=l("b0b4"),r=l("308d"),c=l("6bb5"),u=l("4e2b"),d=l("9ab4"),p=l("60a3"),f=l("ac1a"),v=l("b32d");function g(e){var t={url:"/orders/status/page",method:"post",data:e};return Object(v["a"])(t)}function h(e){var t={url:"/orders/status/permit",method:"post",data:e};return Object(v["a"])(t)}function b(e){var t={url:"/orders/status/desc",method:"post",data:e};return Object(v["a"])(t)}function m(e){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:e};return Object(v["a"])(t)}function w(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,a)}return l}function y(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?w(l,!0).forEach(function(t){Object(n["a"])(e,t,l[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):w(l).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}var x=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(r["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.dialogLoading=!1,e.selectLoading=!1,e.dialogShow=!1,e.descShow=!1,e.ifFile=!1,e.tableData=[],e.serviceList=[],e.selectValue={statusType:"",sorted:""},e.viewRoles={supplier:!1,jht:!1,agent1:!1,agent2:!1,customer:!1},e.fileRoles={supplier:!1,jht:!1,agent1:!1,agent2:!1,customer:!1},e.selectForm={sorted:void 0,describes:""},e.formRules={sorted:[{required:!0,message:"排序值不能为空",trigger:"blur"}]},e.currentId="",e.page=1,e.size=10,e.total=0,e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"typeFilter",value:function(e,t){var l=[],a=[],i=e.filePermissionMap||{},n=e.statusPermissionMap||{},o=[{name:"供应商",id:"supplier"},{name:"聚货通",id:"jht"},{name:"一级代理商",id:"agent1"},{name:"二级代理商",id:"agent2"},{name:"客户",id:"customer"}];if(Object.keys(i).map(function(e){if(i[e]){var t=o.find(function(t){return t.id===e});t&&a.push(t.name)}}),Object.keys(n).map(function(e){if(n[e]){var t=o.find(function(t){return t.id===e});t&&l.push(t.name)}}),"view"===t)return l.join(",");if("file"===t)return a.join(",");if("type"===t){var s=e.statusType,r=[{value:"WS_IN",label:"仓储"},{value:"WS_OUT",label:"仓储"},{value:"MEASURE",label:"仓储"},{value:"EXAMINE",label:"仓储"},{value:"LINE",label:"专线"},{value:"TRUCK",label:"卡车"},{value:"TRAILER",label:"拖车"},{value:"EXPRESS",label:"快递"},{value:"BOOKING",label:"订舱"},{value:"BOOKING_CONTAINER",label:"订舱"},{value:"CUSTOM_DECLARATION",label:"报关"}],c=r.find(function(e){return e.value===s})||{};return c.label||""}}},{key:"getServiceList",value:function(){var e=this;this.selectLoading=!0;var t={custType:"1"};m(t).then(function(t){e.serviceList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var l={model:y({},this.selectValue),page:this.page,size:this.size};g(l).then(function(e){t.loading=!1;var l=e.data||{};t.tableData=l.result||[],t.total=l.total}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"editRow",value:function(e){this.dialogShow=!0,this.currentId=e.id,this.ifFile=1===e.fileDownload;var t=e.statusPermissionMap||{},l=e.filePermissionMap||{};Object.assign(this.viewRoles,t),1===e.fileDownload&&Object.assign(this.fileRoles,l)}},{key:"editDesc",value:function(e){this.descShow=!0,this.currentId=e.id,this.selectForm=y({},e)}},{key:"confirm",value:function(){var e=this;this.dialogLoading=!0;var t={id:this.currentId,fileMap:this.fileRoles,statusMap:this.viewRoles};h(t).then(function(t){e.$message({type:"success",message:"保存成功"}),e.dialogLoading=!1,e.cancel(),e.queryAll()}).catch(function(t){return e.dialogLoading=!1,t})}},{key:"cancel",value:function(){this.dialogShow=!1,this.ifFile=!1,this.currentId="",this.fileRoles={supplier:!1,jht:!1,agent1:!1,agent2:!1,customer:!1},this.viewRoles={supplier:!1,jht:!1,agent1:!1,agent2:!1,customer:!1}}},{key:"save",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.dialogLoading=!0;var l=e.selectForm,a=l.id,i=l.describes,n=l.sorted,o={id:a,sorted:n,describes:i};b(o).then(function(t){e.$message({type:"success",message:"保存成功"}),e.dialogLoading=!1,e.descShow=!1,e.closed(),e.queryAll()}).catch(function(t){return e.dialogLoading=!1,t})})}},{key:"closed",value:function(){var e=this;this.selectForm={sorted:void 0,describes:""},this.descShow=!1,this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"created",value:function(){this.queryAll()}},{key:"labelPosition",get:function(){var e=f["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=f["a"].language;return e||"en"}}]),t}(p["e"]);x=d["a"]([Object(p["a"])({name:"Port",components:{},props:{}})],x);var k=x,R=k,_=(l("3f0a"),l("2877")),S=Object(_["a"])(R,a,i,!1,null,"4b3bff70",null);t["default"]=S.exports},f497:function(e,t,l){}}]);