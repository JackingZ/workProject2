(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pc-config"],{"27b2":function(t,a,e){"use strict";var n=e("c770"),i=e.n(n);i.a},c770:function(t,a,e){},e5c8:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[e("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[e("div",{staticClass:"app-container"},[e("head-info",{attrs:{info:"",title:"着陆页配置"}}),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"app-panel"},[e("el-form",{ref:"selectForm",attrs:{model:t.selectForm,rules:t.formRules,"label-width":"150px",size:"small"}},[e("div",{staticClass:"form-title"},[e("div",{staticStyle:{float:"left"}},[t._v("\n              首页配置\n            ")]),e("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["indexConfigSave"],expression:"['indexConfigSave']"}],attrs:{type:"primary",size:"mini"},on:{click:t.saveHomePage}},[t._v("\n              保 存\n            ")])],1),e("el-form-item",{attrs:{label:"首页导航logo"}},[e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileNav}},[t.imgNavUrl?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgNavUrl}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("nav")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("div",{staticClass:"tips"},[t._v("\n              提示：仅上传1张照片，尺寸大小建议为70px * 42px\n            ")])],1),e("el-form-item",{attrs:{label:"首页banner"}},[e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBanner1}},[t.imgBanner1Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBanner1Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("banner1")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBanner2}},[t.imgBanner2Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBanner2Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("banner2")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBanner3}},[t.imgBanner3Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBanner3Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("banner3")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBanner4}},[t.imgBanner4Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBanner4Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("banner4")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBanner5}},[t.imgBanner5Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBanner5Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("banner5")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("div",{staticClass:"tips"},[t._v("\n              提示：最多上传5张照片，尺寸建议为448px * 278px\n            ")])],1),e("el-form-item",{attrs:{label:"底部logo"}},[e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileLogo}},[t.imgLogoUrl?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgLogoUrl}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("logo")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})]),e("div",{staticClass:"tips"},[t._v("\n              提示：仅上传1张照片，尺寸大小建议为148px * 90px\n            ")])],1),e("el-form-item",{attrs:{label:"底部二维码"}},[e("div",{staticStyle:{display:"inline-block"}},[e("el-input",{staticStyle:{display:"block",width:"152px","margin-bottom":"10px"},attrs:{placeholder:"请输入标题"},model:{value:t.selectForm.title1,callback:function(a){t.$set(t.selectForm,"title1",a)},expression:"selectForm.title1"}}),e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBottom1}},[t.imgBottom1Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBottom1Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("bottom1")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})])],1),e("div",{staticStyle:{display:"inline-block"}},[e("el-input",{staticStyle:{display:"block",width:"152px","margin-bottom":"10px"},attrs:{placeholder:"请输入标题"},model:{value:t.selectForm.title2,callback:function(a){t.$set(t.selectForm,"title2",a)},expression:"selectForm.title2"}}),e("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:!t.$checkPermission(["indexConfigUpload"]),"before-upload":t.beforeUpload,"http-request":t.uploadFileBottom2}},[t.imgBottom2Url?e("div",{staticClass:"img-show"},[e("img",{staticClass:"avatar-img",attrs:{src:t.imgBottom2Url}}),e("span",{staticClass:"img-action",on:{click:function(t){t.stopPropagation()}}},[e("i",{staticClass:"el-icon-delete",on:{click:function(a){return a.stopPropagation(),t.removeUpload("bottom2")}}})])]):e("i",{staticClass:"el-icon-plus avatar-icon"})])],1),e("div",{staticClass:"tips"},[t._v("\n              提示：最多上传2张照片，尺寸建议为192px * 192px\n            ")])]),e("el-form-item",{attrs:{prop:"phone",label:"联系电话"}},[e("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入"},model:{value:t.selectForm.phone,callback:function(a){t.$set(t.selectForm,"phone",a)},expression:"selectForm.phone"}})],1),e("el-form-item",{attrs:{label:"工作时间"}},[e("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请输入",maxlength:50},model:{value:t.selectForm.time,callback:function(a){t.$set(t.selectForm,"time",a)},expression:"selectForm.time"}})],1)],1)],1)],1)])])},i=[],o=(e("7f7f"),e("d225")),s=e("b0b4"),l=e("308d"),r=e("6bb5"),c=e("4e2b"),m=e("9ab4"),u=e("60a3"),d=e("9dba"),p=e("b32d");function g(t){var a={url:"/auth/page/getPages",method:"get",params:t};return Object(p["a"])(a)}function f(t){var a={url:"/auth/page/savePage",method:"post",data:t};return Object(p["a"])(a)}var v=e("5a0c"),b=e.n(v),h=function(t){function a(){var t;return Object(o["a"])(this,a),t=Object(l["a"])(this,Object(r["a"])(a).apply(this,arguments)),t.selectForm={phone:void 0,time:void 0,title1:void 0,title2:void 0,navData:void 0,logoData:void 0,banner1Data:void 0,banner2Data:void 0,banner3Data:void 0,banner4Data:void 0,banner5Data:void 0,bottom1Data:void 0,bottom2Data:void 0},t.currentId="",t.imgNavUrl="",t.imgLogoUrl="",t.imgBanner1Url="",t.imgBanner2Url="",t.imgBanner3Url="",t.imgBanner4Url="",t.imgBanner5Url="",t.imgBottom1Url="",t.imgBottom2Url="",t.loading=!1,t.formRules={phone:[{validator:function(t,a,e){var n=/[\u4e00-\u9fa5]/;a&&n.test(a)?e(new Error("联系电话格式不正确")):e()},trigger:"blur"}]},t}return Object(c["a"])(a,t),Object(s["a"])(a,[{key:"uploadFileNav",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/nav/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.navData=t.data||"",a.imgNavUrl=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileLogo",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/logo/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.logoData=t.data||"",a.imgLogoUrl=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBanner1",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/banner/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.banner1Data=t.data||"",a.imgBanner1Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBanner2",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/banner/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.banner2Data=t.data||"",a.imgBanner2Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBanner3",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/banner/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.banner3Data=t.data||"",a.imgBanner3Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBanner4",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/banner/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.banner4Data=t.data||"",a.imgBanner4Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBanner5",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/banner/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.banner5Data=t.data||"",a.imgBanner5Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBottom1",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/bottom/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.bottom1Data=t.data||"",a.imgBottom1Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"uploadFileBottom2",value:function(t){var a=this,e=t.file;this.$upload(!0,e,"jht-admin/landpage/bottom/".concat(b()().valueOf()+"/"+e.name)).then(function(t){a.selectForm.bottom2Data=t.data||"",a.imgBottom2Url=URL.createObjectURL(e),a.$message.success("上传成功")}).catch(function(t){return t})}},{key:"beforeUpload",value:function(t){var a=-1!==t.type.indexOf("image"),e=t.size/1024/1024<2;return a||this.$message.error("上传照片只能是图片格式!"),e||this.$message.error("上传照片大小不能超过 2MB!"),a&&e}},{key:"removeUpload",value:function(t){var a=this,e=[{name:"nav",id:this.selectForm.navData},{name:"logo",id:this.selectForm.logoData},{name:"banner1",id:this.selectForm.banner1Data},{name:"banner2",id:this.selectForm.banner2Data},{name:"banner3",id:this.selectForm.banner3Data},{name:"banner4",id:this.selectForm.banner4Data},{name:"banner5",id:this.selectForm.banner5Data},{name:"bottom1",id:this.selectForm.bottom1Data},{name:"bottom2",id:this.selectForm.bottom2Data}];e.map(function(e){e.name===t&&a.deleteHomePage(e.id,t)})}},{key:"deleteHomePage",value:function(t,a){var e=this;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){e.$deleteLoad(t,!0).then(function(t){switch(e.$message({type:"success",message:"删除成功"}),a){case"nav":e.imgNavUrl="",e.selectForm.navData="";break;case"logo":e.imgLogoUrl="",e.selectForm.logoData="";break;case"banner1":e.imgBanner1Url="",e.selectForm.banner1Data="";break;case"banner2":e.imgBanner2Url="",e.selectForm.banner2Data="";break;case"banner3":e.imgBanner3Url="",e.selectForm.banner3Data="";break;case"banner4":e.imgBanner4Url="",e.selectForm.banner4Data="";break;case"banner5":e.imgBanner5Url="",e.selectForm.banner5Data="";break;case"bottom1":e.imgBottom1Url="",e.selectForm.bottom1Data="";break;case"bottom2":e.imgBottom2Url="",e.selectForm.bottom2Data="";break;default:break}e.saveHomePage()}).catch(function(t){return e.loading=!1,t})}).catch(function(){return!1})}},{key:"saveHomePage",value:function(){var t=this,a=this.$refs.selectForm;a.validate(function(a){if(!a)return!1;if(t.selectForm.bottom1Data&&!t.selectForm.title1||t.selectForm.bottom2Data&&!t.selectForm.title2)t.$message.error("请填写标题");else{t.loading=!0;var e=JSON.stringify(t.selectForm),n=(t.selectForm.id,{content:e,id:t.currentId,custId:t.custId,custName:t.custName,custType:t.custType});f(n).then(function(a){t.$message({type:"success",message:"保存成功"}),t.loading=!1,t.getHomePage()}).catch(function(a){return t.loading=!1,a})}})}},{key:"getHomePage",value:function(){var t=this;this.loading=!0,g({custId:this.custId}).then(function(a){var e=a.data||{},n=e.config||[];if(Array.isArray(n)&&n.length>0){var i=n[0];t.selectForm=JSON.parse(i.content)||{},t.imgNavUrl=t.selectForm.navData?"https://file.jhtinfo.net/"+t.selectForm.navData:"",t.imgLogoUrl=t.selectForm.logoData?"https://file.jhtinfo.net/"+t.selectForm.logoData:"",t.imgBanner1Url=t.selectForm.banner1Data?"https://file.jhtinfo.net/"+t.selectForm.banner1Data:"",t.imgBanner2Url=t.selectForm.banner2Data?"https://file.jhtinfo.net/"+t.selectForm.banner2Data:"",t.imgBanner3Url=t.selectForm.banner3Data?"https://file.jhtinfo.net/"+t.selectForm.banner3Data:"",t.imgBanner4Url=t.selectForm.banner4Data?"https://file.jhtinfo.net/"+t.selectForm.banner4Data:"",t.imgBanner5Url=t.selectForm.banner5Data?"https://file.jhtinfo.net/"+t.selectForm.banner5Data:"",t.imgBottom1Url=t.selectForm.bottom1Data?"https://file.jhtinfo.net/"+t.selectForm.bottom1Data:"",t.imgBottom2Url=t.selectForm.bottom2Data?"https://file.jhtinfo.net/"+t.selectForm.bottom2Data:"",t.currentId=i.id}t.loading=!1}).catch(function(a){return t.loading=!1,a})}},{key:"created",value:function(){this.getHomePage()}},{key:"custId",get:function(){var t=d["a"].info||{},a=t.custId;return a}},{key:"custName",get:function(){var t=d["a"].info||{},a=t.custName;return a}},{key:"custType",get:function(){var t=d["a"].info||{},a=t.custType;return a}}]),a}(u["e"]);h=m["a"]([Object(u["a"])({name:"",components:{},props:{}})],h);var U=h,F=U,C=(e("27b2"),e("2877")),k=Object(C["a"])(F,n,i,!1,null,"5992a060",null);a["default"]=k.exports}}]);