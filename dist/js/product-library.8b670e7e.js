(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["product-library"],{"13c0":function(e,t,r){"use strict";var a=r("dbc9"),i=r.n(a);i.a},"3fac":function(e,t,r){"use strict";var a=r("ed9d"),i=r.n(a);i.a},"518b":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{staticClass:"app-container"},[r("head-info",{attrs:{info:"",title:"产品库"}}),r("div",{staticClass:"app-panel"},[r("el-row",[r("el-col",{attrs:{span:6}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["addGoods"],expression:"['addGoods']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addProduct}},[e._v("\n              新增产品\n            ")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"国家/地区",size:"small",filterable:"",clearable:""},on:{focus:e.getCountryList},model:{value:e.selectValue.countryId,callback:function(t){e.$set(e.selectValue,"countryId",t)},expression:"selectValue.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),r("el-select",{staticStyle:{width:"120px","margin-right":"5px"},attrs:{size:"small",placeholder:"商品状态",clearable:""},model:{value:e.selectValue.state,callback:function(t){e.$set(e.selectValue,"state",t)},expression:"selectValue.state"}},[r("el-option",{attrs:{label:"待审核",value:0}}),r("el-option",{attrs:{label:"审核通过",value:1}}),r("el-option",{attrs:{label:"审核拒绝",value:2}})],1),r("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px","margin-right":"10px"},attrs:{placeholder:"请输入内容",size:"small"},model:{value:e.selectValue.keyword,callback:function(t){e.$set(e.selectValue,"keyword",t)},expression:"selectValue.keyword"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[r("el-option",{attrs:{label:"SKU编码",value:"1"}}),r("el-option",{attrs:{label:"中文名称",value:"2"}}),r("el-option",{attrs:{label:"英文名称",value:"3"}})],1)],1),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["queryGoods"],expression:"['queryGoods']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 300px)",border:""}},[r("el-table-column",{attrs:{width:"120",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.state?r("span",[e._v("待审核")]):1===t.row.state?r("span",[e._v("审核通过")]):2===t.row.state?r("span",[e._v("审核拒绝")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"skuCode","min-width":"150",label:"SKU编码","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{"min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"word-limit"},[r("span",[e._v(e._s(t.row.cnName?t.row.cnName:"--"))]),r("br"),r("span",[e._v(e._s(t.row.enName?t.row.enName:"--"))])])]}}])},[r("template",{slot:"header"},[r("span",[e._v("商品名称(中文)")]),r("br"),r("span",[e._v("商品名称(英文)")])])],2),r("el-table-column",{attrs:{prop:"brand","min-width":"120",label:"品牌","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"size","min-width":"120",label:"规格","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{"min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"word-limit"},[r("span",[e._v(e._s(t.row.cnMaterial?t.row.cnMaterial:"--"))]),r("br"),r("span",[e._v(e._s(t.row.enMaterial?t.row.enMaterial:"--"))])])]}}])},[r("template",{slot:"header"},[r("span",[e._v("材质(中文)")]),r("br"),r("span",[e._v("材质(英文)")])])],2),r("el-table-column",{attrs:{"min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"word-limit"},[r("span",[e._v(e._s(t.row.cnPurpose?t.row.cnPurpose:"--"))]),r("br"),r("span",[e._v(e._s(t.row.enPurpose?t.row.enPurpose:"--"))])])]}}])},[r("template",{slot:"header"},[r("span",[e._v("用途(中文)")]),r("br"),r("span",[e._v("用途(英文)")])])],2),r("el-table-column",{attrs:{prop:"unitName",width:"120",label:"计量单位"}}),r("el-table-column",{attrs:{prop:"title","min-width":"120",label:"商品类别"}}),r("el-table-column",{attrs:{width:"120",label:"报关信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.onDeclaration(t.row)}}},[e._v("\n                报关信息\n              ")])]}}])}),r("el-table-column",{attrs:{prop:"createTime",width:"180",label:"添加时间"}}),r("el-table-column",{attrs:{fixed:"right",width:"120",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{staticClass:"switchStyle",attrs:{value:t.row.status,disabled:!e.$checkPermission(["enableGoods"]),"active-text":"启用","inactive-text":"禁用","active-value":0,"inactive-value":1},on:{input:function(r){return e.onStatus(t.row,r)}}})]}}])}),r("el-table-column",{attrs:{fixed:"right",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["editGoods"],expression:"['editGoods']"}],attrs:{type:"text"},on:{click:function(r){return e.editProduct(t.row)}}},[e._v("\n                编辑\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["deleteGoods"],expression:"['deleteGoods']"}],attrs:{type:"text"},on:{click:function(r){return e.deleteProduct(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.isEdit?"编辑产品":"新增产品",width:"1000px",visible:e.isAddEditVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isAddEditVisible=t},closed:e.cancel}},[r("AddEditProduct",{ref:"addEditProduct",attrs:{"product-property-list":e.productPropertyList,"goods-list":e.goodsList,"unit-list":e.unitList,"is-edit":e.isEdit,loading:e.isAddFormLoading},on:{confirm:e.saveConfirm,cancel:e.cancel}})],1),r("el-dialog",{attrs:{title:"报关信息",width:"1200px",visible:e.isDeclareVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isDeclareVisible=t},closed:e.closeDeclaration}},[r("DeclarationInfo",{ref:"declarationInfo"})],1)],1)],1)])])},i=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("c5f6"),r("28a5"),r("a481"),r("768b")),l=(r("6b54"),r("bd86")),o=r("a8db"),s=(r("96cf"),r("3b8d")),c=r("d225"),u=r("b0b4"),d=r("308d"),p=r("6bb5"),m=r("4e2b"),f=r("9ab4"),g=r("60a3"),h=r("9dba"),b=r("b32d");function v(e){var t={url:"/setting/library/get_all_data",method:"post",data:e};return Object(b["a"])(t)}function y(e){var t={url:"/setting/library/save",method:"post",data:e};return Object(b["a"])(t)}function w(e){var t={url:"/setting/library/get_declare",method:"post",data:e};return Object(b["a"])(t)}function k(e){var t={url:"/setting/library/save_declare",method:"post",data:e};return Object(b["a"])(t)}function x(e){var t={url:"/auth/cust/searchCustList",method:"get",params:e};return Object(b["a"])(t)}function F(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(b["a"])(e)}function L(e){var t={url:"/setting/product/get_tree",method:"post",data:e};return Object(b["a"])(t)}function O(){var e={url:"/setting/library/get_unit",method:"post"};return Object(b["a"])(e)}function _(e){var t={url:"/setting/library/get_file_list",method:"post",params:e};return Object(b["a"])(t)}function j(e){var t={url:"/setting/library/upload",method:"post",data:e};return Object(b["a"])(t)}var C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"add-edit-organ"},[r("el-form",{ref:"productForm",attrs:{model:e.selectForm,disabled:1===e.selectForm.state,rules:e.formRules,"label-width":"110px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"商品属性",prop:"categorieIds"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",clearable:"","collapse-tags":"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.categorieIds,callback:function(t){e.$set(e.selectForm,"categorieIds",t)},expression:"selectForm.categorieIds"}},e._l(e.productPropertyList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"商品图片",prop:""}},[r("el-upload",{staticClass:"upload-library",attrs:{action:"",multiple:!1,limit:1,"http-request":e.uploadFile,"on-remove":e.onFileRemove,"file-list":e.fileList}},[r("el-button",{attrs:{size:"small"}},[r("i",{staticClass:"el-icon-upload"}),e._v("\n          上传文件\n        ")])],1)],1),r("el-form-item",{attrs:{label:"中文名称",prop:"cnName"}},[r("el-input",{attrs:{maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.cnName,callback:function(t){e.$set(e.selectForm,"cnName",t)},expression:"selectForm.cnName"}})],1),r("el-form-item",{attrs:{label:"英文名称",prop:"enName"}},[r("el-input",{attrs:{maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.enName,callback:function(t){e.$set(e.selectForm,"enName",t)},expression:"selectForm.enName"}})],1),r("el-form-item",{attrs:{label:"SKU编码",prop:"skuCode"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:50},model:{value:e.selectForm.skuCode,callback:function(t){e.$set(e.selectForm,"skuCode",t)},expression:"selectForm.skuCode"}})],1),r("el-form-item",{attrs:{label:"品牌",prop:"brand"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:50},model:{value:e.selectForm.brand,callback:function(t){e.$set(e.selectForm,"brand",t)},expression:"selectForm.brand"}})],1),r("el-form-item",{attrs:{label:"规格",prop:"size"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:50},model:{value:e.selectForm.size,callback:function(t){e.$set(e.selectForm,"size",t)},expression:"selectForm.size"}})],1),r("el-form-item",{attrs:{label:"中文材质",prop:"cnMaterial"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.cnMaterial,callback:function(t){e.$set(e.selectForm,"cnMaterial",t)},expression:"selectForm.cnMaterial"}})],1),r("el-form-item",{attrs:{label:"英文材质",prop:"enMaterial"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.enMaterial,callback:function(t){e.$set(e.selectForm,"enMaterial",t)},expression:"selectForm.enMaterial"}})],1),r("el-form-item",{attrs:{label:"中文用途",prop:"cnPurpose"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.cnPurpose,callback:function(t){e.$set(e.selectForm,"cnPurpose",t)},expression:"selectForm.cnPurpose"}})],1),r("el-form-item",{attrs:{label:"英文用途",prop:"enPurpose"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.enPurpose,callback:function(t){e.$set(e.selectForm,"enPurpose",t)},expression:"selectForm.enPurpose"}})],1),r("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.unit,callback:function(t){e.$set(e.selectForm,"unit",t)},expression:"selectForm.unit"}},e._l(e.unitList,function(e){return r("el-option",{key:e.id,attrs:{label:e.unit,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"功率(W-瓦特)",prop:"power"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.power,callback:function(t){e.$set(e.selectForm,"power",t)},expression:"selectForm.power"}})],1),r("el-form-item",{attrs:{label:"采购链接",prop:"purchaseUrl"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.purchaseUrl,callback:function(t){e.$set(e.selectForm,"purchaseUrl",t)},expression:"selectForm.purchaseUrl"}})],1),r("el-form-item",{attrs:{label:"一件代发",prop:"issued"}},[r("el-radio-group",{model:{value:e.selectForm.issued,callback:function(t){e.$set(e.selectForm,"issued",t)},expression:"selectForm.issued"}},[r("el-radio",{attrs:{label:"1"}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:"0"}},[e._v("\n          是\n        ")])],1)],1),"0"===e.custType?r("el-form-item",{attrs:{label:"公共库产品",prop:"onPublic"}},[r("el-radio-group",{model:{value:e.selectForm.onPublic,callback:function(t){e.$set(e.selectForm,"onPublic",t)},expression:"selectForm.onPublic"}},[r("el-radio",{attrs:{label:"1"}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:"0"}},[e._v("\n          是\n        ")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1),"0"===e.selectForm.issued?r("div",{staticStyle:{"border-top":"1px solid #f2f2f2","padding-top":"20px","margin-top":"5px"}},[r("el-form-item",{attrs:{label:"包装类型",prop:"packing"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.packing,callback:function(t){e.$set(e.selectForm,"packing",t)},expression:"selectForm.packing"}},[r("el-option",{attrs:{label:"自带包装",value:"0"}}),r("el-option",{attrs:{label:"特殊包装",value:"1"}}),r("el-option",{attrs:{label:"无包装",value:"2"}})],1)],1),r("el-form-item",{attrs:{label:"仓储条件",prop:"storage"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.storage,callback:function(t){e.$set(e.selectForm,"storage",t)},expression:"selectForm.storage"}},[r("el-option",{attrs:{label:"常温",value:"0"}}),r("el-option",{attrs:{label:"恒温",value:"1"}}),r("el-option",{attrs:{label:"冷冻",value:"2"}}),r("el-option",{attrs:{label:"冷藏",value:"3"}})],1)],1),r("el-form-item",{attrs:{label:"重量单位",prop:"weight"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.weight,callback:function(t){e.$set(e.selectForm,"weight",t)},expression:"selectForm.weight"}},[r("el-option",{attrs:{label:"LBS-磅",value:"LBS"}}),r("el-option",{attrs:{label:"KGS-公斤",value:"KGS"}}),r("el-option",{attrs:{label:"OZS-盎司",value:"OZS"}})],1)],1),r("el-form-item",{attrs:{label:"长度单位",prop:"length"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.length,callback:function(t){e.$set(e.selectForm,"length",t)},expression:"selectForm.length"}},[r("el-option",{attrs:{label:"IN-英寸",value:"IN"}}),r("el-option",{attrs:{label:"CM-厘米",value:"CM"}})],1)],1),r("el-form-item",{attrs:{label:"长度",prop:"lengthen"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.lengthen,callback:function(t){e.$set(e.selectForm,"lengthen",t)},expression:"selectForm.lengthen"}})],1),r("el-form-item",{attrs:{label:"宽度",prop:"wide"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.wide,callback:function(t){e.$set(e.selectForm,"wide",t)},expression:"selectForm.wide"}})],1),r("el-form-item",{attrs:{label:"高度",prop:"high"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.high,callback:function(t){e.$set(e.selectForm,"high",t)},expression:"selectForm.high"}})],1),r("el-form-item",{attrs:{label:"毛重",prop:"gross"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.gross,callback:function(t){e.$set(e.selectForm,"gross",t)},expression:"selectForm.gross"}})],1),r("el-form-item",{attrs:{label:"净重",prop:"net"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.net,callback:function(t){e.$set(e.selectForm,"net",t)},expression:"selectForm.net"}})],1)],1):e._e()],1),r("div",{staticStyle:{"text-align":"right",padding:"10px 10px 20px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("\n      取 消\n    ")]),r("el-button",{attrs:{disabled:1===e.selectForm.state,type:"primary"},on:{click:e.saveConfirm}},[e._v("\n      确 定\n    ")])],1)],1)},S=[],$=(r("7f7f"),r("ac1a")),P=r("b311"),I=r.n(P),N=r("2b0e"),D=function(){return N["default"].prototype.$message({message:"Copy successfully",type:"success",duration:1500})},E=function(){return N["default"].prototype.$message({message:"Copy failed",type:"error"})},z=function(e,t){var r=new I.a(t.target,{text:function(){return e}});r.on("success",function(){D(),r.destroy()}),r.on("error",function(){E(),r.destroy()}),r.onClick(t)},q=r("5a0c"),A=r.n(q);function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach(function(t){Object(l["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function R(){return{status:void 0,state:void 0,productId:"",attribute:void 0,categorieIds:[],skuCode:void 0,brand:void 0,size:void 0,cnName:void 0,cnMaterial:void 0,cnPurpose:void 0,enName:void 0,enPurpose:void 0,enMaterial:void 0,issued:"1",onPublic:"1",unit:void 0,packing:void 0,storage:void 0,weight:void 0,length:void 0,lengthen:void 0,wide:void 0,high:void 0,gross:void 0,net:void 0,power:void 0,purchaseUrl:void 0,url:void 0,remark:void 0}}var M=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.selectLoading=!1,e.selectForm=R(),e.companyList=[],e.fileList=[],e.handleClipboard=z,e.formRules={productId:{required:!0,message:"请选择商品列表",trigger:"change"},categorieIds:{required:!0,message:"请选择商品属性",trigger:"change"},cnName:{required:!0,message:"中文名称不能为空",trigger:"blur"},enName:[{required:!0,message:"英文名称不能为空",trigger:"blur"},{validator:function(e,t,r){var a=/[\u4e00-\u9fa5]/;t?a.test(t)?r(new Error("英文名称不能有中文")):r():r(new Error("英文名称不能为空"))},trigger:"blur"}],skuCode:{required:!0,message:"SKU编码不能为空",trigger:"blur"},brand:{required:!0,message:"品牌不能为空",trigger:"blur"},size:{required:!0,message:"规格不能为空",trigger:"blur"},cnMaterial:{required:!0,message:"中文材质不能为空",trigger:"blur"},enMaterial:[{required:!0,message:"英文材质不能为空",trigger:"blur"},{validator:function(e,t,r){var a=/[\u4e00-\u9fa5]/;t?a.test(t)?r(new Error("英文材质不能有中文")):r():r(new Error("英文材质不能为空"))},trigger:"blur"}],cnPurpose:{required:!0,message:"中文用途不能为空",trigger:"blur"},enPurpose:[{required:!0,message:"英文用途不能为空",trigger:"blur"},{validator:function(e,t,r){var a=/[\u4e00-\u9fa5]/;t?a.test(t)?r(new Error("英文用途不能有中文")):r():r(new Error("英文用途不能为空"))},trigger:"blur"}],url:{required:!0,message:"商品照片不能为空",trigger:"blur"},power:{required:!1,message:"功率不能为空",trigger:"blur"},issued:{required:!0,message:"请选择是否一件代发",trigger:"change"},onPublic:{required:!0,message:"请选择是否公共产品库",trigger:"change"},unit:{required:!0,message:"请选择计量单位",trigger:"change"},packing:{required:!0,message:"请选择包装类型",trigger:"change"},storage:{required:!0,message:"请选择仓储条件",trigger:"change"},weight:{required:!0,message:"请选择重量单位",trigger:"change"},length:{required:!0,message:"请选择长度单位",trigger:"change"},lengthen:{required:!0,message:"长度不能为空",trigger:"blur"},wide:{required:!0,message:"宽度不能为空",trigger:"blur"},high:{required:!0,message:"高度不能为空",trigger:"blur"},gross:{required:!0,message:"毛重不能为空",trigger:"blur"},net:{required:!0,message:"净重不能为空",trigger:"blur"},purchaseUrl:{required:!1,message:"请输入采购链接",trigger:"blur"}},e.props={label:"name",value:"id"},e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"getCompanyList",value:function(){var e=this,t={page:1,size:99999,type:"0,1,2"};this.selectLoading=!0,x(t).then(function(t){var r=t.data||{};e.companyList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onProduct",value:function(e){var t=this,r=this.goodsList,a=this.selectForm;r.map(function(r){e===r.value&&(a.productId="",t.$message.error("请选择下级类别"))})}},{key:"uploadFile",value:function(e){var t=this,r=e.file;this.$upload(!0,r,"jht-admin/productLibrary/".concat(A()().valueOf()+"/"+r.name)).then(function(e){var r=e.data,a=t.selectForm;a.url=r}).catch(function(e){return e})}},{key:"onFileRemove",value:function(e,t){this.$deleteLoad(e.url,!0).then(function(e){}).catch(function(e){return e}),this.selectForm.url=""}},{key:"setData",value:function(e,t){var r=this.custType;"0"===r&&this.getCompanyList(),this.fileList=e,t&&(this.selectForm=T({},t))}},{key:"resetForm",value:function(){this.selectForm=R();var e=this.$refs.productForm;e.clearValidate()}},{key:"cancel",value:function(){this.$emit("cancel")}},{key:"saveConfirm",value:function(){this.$emit("confirm")}},{key:"labelPosition",get:function(){var e=$["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=$["a"].language;return e||"en"}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=h["a"].info||{},t=e.custName;return t}}]),t}(g["e"]);M=f["a"]([Object(g["a"])({name:"AddEditProduct",components:{},props:{productPropertyList:{type:Array,default:function(){return[]}},goodsList:{type:Array,default:function(){return[]}},unitList:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1},loading:{type:Boolean,default:!1}}})],M);var U=M,G=U,B=(r("3fac"),r("2877")),J=Object(B["a"])(G,C,S,!1,null,"7925d9cf",null),K=J.exports,Z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goodsDeclarationInfoAdd"],expression:"['goodsDeclarationInfoAdd']"}],staticStyle:{"margin-right":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("\n    新增报关信息\n  ")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.list,height:"400px",border:""}},[r("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?r("span",[e._v("待审核")]):1===t.row.status?r("span",[e._v("审核通过")]):2===t.row.status?r("span",[e._v("审核拒绝")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"startCountryName",label:"起运国","min-width":"120"}}),r("el-table-column",{attrs:{prop:"countryName",label:"目的国","min-width":"120"}}),r("el-table-column",{attrs:{prop:"code",label:"海关编码","min-width":"120"}}),r("el-table-column",{attrs:{prop:"price",label:"单价",width:"120"}}),r("el-table-column",{attrs:{prop:"unitName",label:"单位",width:"120"}}),r("el-table-column",{attrs:{prop:"isClearance",label:"通关要求",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.isClearance?r("span",[e._v("需要")]):"1"===t.row.isClearance?r("span",[e._v("不需要")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"认证文件",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["goodsDeclarationInfoUploadFile"]),type:"text",size:"medium"},on:{click:function(r){return e.onFiles(t.row)}}},[e._v("\n          上传文件\n        ")])]}}])}),r("el-table-column",{attrs:{prop:"rate",label:"税率(%)",width:"120"}}),r("el-table-column",{attrs:{prop:"",label:"证书","min-width":"120"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goodsDeclarationInfoEdit"],expression:"['goodsDeclarationInfoEdit']"}],attrs:{type:"text",size:"medium"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("\n          编辑\n        ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["goodsDeclarationInfoDel"],expression:"['goodsDeclarationInfoDel']"}],attrs:{type:"text",size:"medium"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.isEdit?"编辑报关信息":"新增报关信息",width:"600px",visible:e.addEditVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.addEditVisible=t},closed:e.cancel}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[r("el-form",{ref:"infoForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,disabled:1===e.selectForm.status,"label-width":"100px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"起运国",prop:"startCountry"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.selectForm.startCountry,callback:function(t){e.$set(e.selectForm,"startCountry",t)},expression:"selectForm.startCountry"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"目的国",prop:"countryId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),e._e(),r("el-form-item",{attrs:{label:"销售单价",prop:"price"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:99999,precision:2},model:{value:e.selectForm.price,callback:function(t){e.$set(e.selectForm,"price",t)},expression:"selectForm.price"}})],1),r("el-form-item",{attrs:{label:"销售单位",prop:"unit"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",size:"small",placeholder:"请选择"},model:{value:e.selectForm.unit,callback:function(t){e.$set(e.selectForm,"unit",t)},expression:"selectForm.unit"}},e._l(e.unitList,function(e){return r("el-option",{key:e.id,attrs:{label:e.unit,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"销售链接"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.url,callback:function(t){e.$set(e.selectForm,"url",t)},expression:"selectForm.url"}})],1),r("el-form-item",{attrs:{label:"备注"}},[r("el-input",{attrs:{placeholder:"请输入",maxlength:150},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1)],1),r("div",{staticStyle:{"text-align":"right",padding:"10px 20px 0 0"}},[r("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n          取 消\n        ")]),r("el-button",{attrs:{disabled:1===e.selectForm.status,type:"primary",size:"small"},on:{click:e.comfirm}},[e._v("\n          确 定\n        ")])],1)],1)]),r("el-dialog",{attrs:{title:"上传文件",width:"800px",visible:e.fileVisible,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.fileVisible=t},closed:function(t){e.fileVisible=!1}}},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.fileLoading,expression:"fileLoading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:e.fileData,height:"380px",border:""}},[r("el-table-column",{attrs:{width:"100",property:"status",label:"文件状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.url?"已上传":"待上传")+"\n        ")]}}])}),r("el-table-column",{attrs:{prop:"status",label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((e.fileStatus.find(function(e){return e.id===t.row.status})||{}).name)+"\n        ")]}}])}),r("el-table-column",{attrs:{prop:"fileName",label:"文件名称"}}),r("el-table-column",{attrs:{"min-width":"100",label:"拒绝原因","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(4===t.row.status?t.row.reason:"")+"\n        ")]}}])}),r("el-table-column",{attrs:{label:"上传文件",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-upload",{ref:"uploadFile",attrs:{action:"",multiple:!1,limit:1,"auto-upload":!1,"show-file-list":!1,"http-request":e.uploadFile,"on-change":e.onFileChange,"file-list":e.fileList,disabled:1===e.selectForm.status}},[r("el-button",{attrs:{disabled:1===e.selectForm.status,type:"text",size:"medium"},on:{click:function(r){return e.fileBtn(t.row)}}},[e._v("\n              上传文件\n            ")])],1)]}}])}),r("el-table-column",{attrs:{label:"下载",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(r){return e.loadFile(t.row)}}},[e._v("\n            下载\n          ")])]}}])})],1)],1)],1)},W=[];function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(r,!0).forEach(function(t){Object(l["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var X=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.selectForm={startCountry:void 0,startCountryName:void 0,countryId:void 0,countryName:void 0,status:0,categoryId:"",id:void 0,price:void 0,unit:void 0,url:void 0,remark:void 0},e.formRules={startCountry:{required:!0,message:"请选择起运国",trigger:"change"},countryId:{required:!0,message:"请选择目的国",trigger:"change"},status:{required:!1,message:"请选择商品状态",trigger:"change"},categoryId:{required:!0,message:"请选择商品类别",trigger:"change"},price:{required:!0,message:"销售单价不能为空",trigger:"blur"},unit:{required:!0,message:"销售单位不能为空",trigger:"blur"}},e.form={},e.formLoading=!1,e.countryList=[],e.goodsList=[],e.unitList=[],e.fileObj={},e.oldUrl="",e.declareId="",e.fileList=[],e.fileData=[],e.fileLoading=!1,e.addEditVisible=!1,e.fileVisible=!1,e.loading=!1,e.selectLoading=!1,e.isEdit=!1,e.list=[],e.page=1,e.size=10,e.total=0,e.fileStatus=[{id:1,name:"待审核"},{id:2,name:"审核中"},{id:3,name:"审核通过"},{id:4,name:"审核拒绝"}],e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,F().then(function(t){var r=t.data||{};e.countryList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,[t,null]})}},{key:"getGoodsList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,a,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L({type:2,parentId:0});case 3:t=e.sent,r=t.data||[],a=JSON.parse(JSON.stringify(r).replace(/title/g,"label").replace(/id/g,"value")),this.$nextTick(function(){i.goodsList=a}),e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](0),this.formLoading=!1,e.abrupt("return",e.t0);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getUnitList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:t=e.sent,r=t.data||[],this.unitList=r,e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](0),this.formLoading=!1,e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"setData",value:function(e){var t=e.id;this.form={libraryId:t},this.getCountryList(),this.getTableData()}},{key:"getTableData",value:function(){var e=this;this.loading=!0;var t={page:this.page,size:this.size,model:{libraryId:this.form.libraryId}};w(t).then(function(t){var r=t.data||{};e.list=r.result||[],e.loading=!1}).catch(function(t){return e.loading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"handleAdd",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addEditVisible=!0,this.isEdit=!1,this.formLoading=!0,e.next=5,this.getUnitList();case 5:return e.next=7,this.getGoodsList();case 7:this.formLoading=!1;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleEdit",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n,l,o,s,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.addEditVisible=!0,this.isEdit=!0,this.formLoading=!0,e.next=5,this.getGoodsList();case 5:return e.next=7,this.getUnitList();case 7:r=t.countryId,a=t.status,i=t.categoryId,n=t.price,l=t.unit,o=t.url,s=t.remark,c=t.id,u=t.startCountry,this.selectForm={countryId:r,startCountry:u,status:a,price:n,unit:l,url:o,remark:s,id:c,categoryId:i||""},this.formLoading=!1;case 10:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleDelete",value:function(e){var t=this;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,k(Q({},e,{deleted:1})).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"onFiles",value:function(e){this.fileVisible=!0,this.declareId=e.id,this.getFileList()}},{key:"getFileList",value:function(){var e=this;this.fileLoading=!0,_({declareId:this.declareId}).then(function(t){var r=t.data||[];e.fileData=r,e.fileLoading=!1}).catch(function(t){return e.fileLoading=!1,t})}},{key:"fileBtn",value:function(e){this.fileObj=Q({},e),this.oldUrl=e.url}},{key:"fileSave",value:function(){var e=this;j(Q({},this.fileObj)).then(function(t){e.$message({type:"success",message:"上传成功"}),e.getFileList()}).catch(function(t){return e.fileLoading=!1,t})}},{key:"uploadFile",value:function(e){}},{key:"fileRemove",value:function(){var e=this;this.$deleteLoad(this.oldUrl,!0).then(function(e){}).catch(function(t){return e.fileLoading=!1,t})}},{key:"onFileChange",value:function(e,t){var r=this,a=e.raw,i=e.name;this.fileLoading=!0,this.$upload(!0,a,"jht-admin/declaration/".concat(A()().valueOf()+"/"+i)).then(function(e){var t=e.data;r.fileObj.url=t,r.fileRemove(),r.fileSave()}).catch(function(e){return r.fileLoading=!1,e})}},{key:"loadFile",value:function(e){if(e.url){var t="https://file.jhtinfo.net/"+e.url;window.open(t)}else this.$message.error("暂无文件可下载")}},{key:"cancel",value:function(){var e=this;this.addEditVisible=!1,this.resetForm(),this.$nextTick(function(){var t=e.$refs.infoForm;t.clearValidate()})}},{key:"comfirm",value:function(){var e=this,t=this.$refs.infoForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var r=Q({},e.selectForm,{},e.form);e.countryList.map(function(t){t.id===e.selectForm.countryId&&(r.countryName=t.name),t.id===e.selectForm.startCountry&&(r.startCountryName=t.name)}),e.unitList.map(function(t){t.id===e.selectForm.unit&&(r.unitName=t.unit)}),k(r).then(function(t){e.$message({type:"success",message:"保存成功"}),e.resetForm(),e.cancel(),e.formLoading=!1,e.addEditVisible=!1,e.getTableData()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"resetForm",value:function(){this.selectForm={startCountry:void 0,countryId:void 0,status:0,categoryId:"",price:void 0,unit:void 0,url:void 0,remark:void 0}}}]),t}(g["e"]);X=f["a"]([Object(g["a"])({name:"",components:{},props:{}})],X);var Y=X,ee=Y,te=(r("9b65"),r("13c0"),Object(B["a"])(ee,Z,W,!1,null,"a38e98cc",null)),re=te.exports;function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(r,!0).forEach(function(t){Object(l["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ne=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(d["a"])(this,Object(p["a"])(t).apply(this,arguments)),e.isAddEditVisible=!1,e.isEdit=!1,e.loading=!1,e.isAddFormLoading=!1,e.isDeclareVisible=!1,e.tableData=[],e.selectType="1",e.selectValue={countryId:void 0,state:void 0,keyword:void 0,cnName:void 0,skuCode:void 0,enName:void 0},e.productPropertyList=[{name:"普货",id:"0"},{name:"纯电",id:"1"},{name:"带电",id:"2"},{name:"带磁",id:"3"},{name:"危险",id:"4"}],e.selectLoading=!1,e.page=1,e.size=10,e.total=0,e.countryList=[],e.companyList=[{id:"0",name:"聚货通"}],e.typeList=[],e.goodsList=[],e.unitList=[],e.sbtp="",e}return Object(m["a"])(t,e),Object(u["a"])(t,[{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t=this.custType,"0"===t&&this.getCompanyList(),this.queryAll();case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCompanyList",value:function(){var e=this,t={page:1,size:99999,type:"0,1,2"};this.selectLoading=!0,x(t).then(function(t){var r=t.data||{};e.companyList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,F().then(function(t){var r=t.data||{};e.countryList=r.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,[t,null]})}},{key:"queryAll",value:function(e){var t=this;this.loading=!0;var r=this.selectValue,a=r.keyword,i=Object(o["a"])(r,["keyword"]);e&&(this.page=e);var n={page:this.page,size:this.size,model:ie({},i)};switch(this.selectType){case"1":n.model.skuCode=a;break;case"2":n.model.cnName=a;break;case"3":n.model.enName=a;break}v(n).then(function(e){var r=e.data||{};t.tableData=r.result||[],t.total=r.total,t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"cancel",value:function(){var e=this;this.isAddEditVisible=!1,this.$nextTick(function(){var t=e.$refs.addEditProduct;t.setData([]),t.resetForm()})}},{key:"saveConfirm",value:function(){var e=this,t=this.$refs.addEditProduct,r=t.$refs.productForm,a=t.selectForm;r.validate(function(t){if(!t)return!1;e.isAddFormLoading=!0;var r=a.categorieIds,i=Object(o["a"])(a,["categorieIds"]),n=r.join(","),l=ie({},i,{attribute:n});"1"===a.issued&&(l.packing=void 0,l.storage=void 0,l.weight=void 0,l[length]=void 0,l.lengthen=void 0,l.wide=void 0,l.high=void 0,l.gross=void 0,l.net=void 0),e.unitList.map(function(e){a.unit===e.id&&(l.unitName=e.unit)}),y(l).then(function(t){e.$message({type:"success",message:"操作成功"}),e.isAddEditVisible=!1,e.isAddFormLoading=!1,e.cancel(),e.queryAll()}).catch(function(t){return e.isAddFormLoading=!1,t})})}},{key:"onDeclaration",value:function(e){var t=this;this.isDeclareVisible=!0,this.$nextTick(function(){var r=t.$refs.declarationInfo;r.setData(e)})}},{key:"closeDeclaration",value:function(){this.isDeclareVisible=!1}},{key:"onStatus",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,r){var a,i,l,o,s,c,u,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.status.toString(),i=r.toString(),a&&a!==i){e.next=4;break}return e.abrupt("return");case 4:return l="1"===i?"禁用":"开启",e.next=7,this.$confirm("此操作将".concat(l,"该产品库，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 7:if(o=e.sent,s=Object(n["a"])(o,2),c=s[0],s[1],!c){e.next=13;break}return e.abrupt("return");case 13:this.loading=!0,u=ie({},t,{status:r}),y(u).then(function(e){d.$message({type:"success",message:"更新成功"}),d.queryAll()}).catch(function(e){return d.loading=!1,e});case 16:case"end":return e.stop()}},e,this)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"getGoodsList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L({type:2,parentId:0});case 3:t=e.sent,r=t.data||[],a=JSON.parse(JSON.stringify(r).replace(/title/g,"label").replace(/id/g,"value")),this.goodsList=a,e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](0),this.isAddFormLoading=!1,e.abrupt("return",e.t0);case 13:case"end":return e.stop()}},e,this,[[0,9]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getUnitList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O();case 3:t=e.sent,r=t.data||[],this.unitList=r,e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](0),this.isAddFormLoading=!1,e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e,this,[[0,8]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"addProduct",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isAddEditVisible=!0,this.isEdit=!1,this.isAddFormLoading=!0,e.next=5,this.getGoodsList();case 5:return e.next=7,this.getUnitList();case 7:t=this.$refs.addEditProduct,this.$nextTick(function(){t.setData([])}),this.isAddFormLoading=!1;case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"editProduct",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var r,a,i,n,l,o,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isAddEditVisible=!0,this.isEdit=!0,this.isAddFormLoading=!0,e.next=5,this.getGoodsList();case 5:return e.next=7,this.getUnitList();case 7:r=t.url,a=t.attribute,i=t.productId,n=a?a.split(","):[],l=r?r.split(".").splice(1):[],o=ie({},t,{categorieIds:n,productId:i||""}),s=this.$refs.addEditProduct,this.$nextTick(function(){r?s.setData([{name:l.join("."),url:r}],o):s.setData([],o)}),this.isAddFormLoading=!1;case 14:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"deleteProduct",value:function(e){var t=this;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,y({id:e.id,deleted:1}).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=h["a"].info||{},t=e.custSubtype;return t}},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=h["a"].info||{},t=e.custName;return t}}]),t}(g["e"]);ne=f["a"]([Object(g["a"])({name:"",components:{AddEditProduct:K,DeclarationInfo:re},props:{}})],ne);var le=ne,oe=le,se=(r("be35"),Object(B["a"])(oe,a,i,!1,null,"9ed3584e",null));t["default"]=se.exports},6770:function(e,t,r){},"9b65":function(e,t,r){"use strict";var a=r("ee3d"),i=r.n(a);i.a},be35:function(e,t,r){"use strict";var a=r("6770"),i=r.n(a);i.a},dbc9:function(e,t,r){e.exports={menuBg:"#304156",menuText:"#bfcbd9",menuActiveText:"#409EFF"}},ed9d:function(e,t,r){},ee3d:function(e,t,r){}}]);