(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["calc-weight"],{"36bd":function(e,t,a){"use strict";var r=a("4bf8"),l=a("77f1"),i=a("9def");e.exports=function(e){var t=r(this),a=i(t.length),o=arguments.length,n=l(o>1?arguments[1]:void 0,a),s=o>2?arguments[2]:void 0,c=void 0===s?a:l(s,a);while(c>n)t[n++]=e;return t}},"6a97":function(e,t,a){},"6c7b":function(e,t,a){var r=a("5ca1");r(r.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},"834d":function(e,t,a){"use strict";a.r(t);var r,l,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("head-info",{attrs:{title:"收费重量计算",info:""}}),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-panel"},[a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"success",closable:!1},scopedSlots:e._u([{key:"title",fn:function(){return[a("p",[e._v("\n          长度单位：CM，重量单位：KG     \n          从左到右依次是：批次箱数，单箱实重，单箱长度，单箱宽度，单箱高度\n        ")])]},proxy:!0}])}),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{span:10}},[a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"130px"}},[a("el-form-item",{attrs:{label:"结算重量算法",prop:"a1"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.ruleForm.a1,callback:function(t){e.$set(e.ruleForm,"a1",t)},expression:"ruleForm.a1"}},[a("el-option",{attrs:{label:"取实重",value:e.A1.TakeActualWeight}}),a("el-option",{attrs:{label:"取实重或体积重的最大值",value:e.A1.MaxInWeightOrVolume}}),a("el-option",{attrs:{label:"取实重或体积重的平均值",value:e.A1.AvgInWeightOrVolume}})],1)],1),e.ruleForm.a1===e.A1.MaxInWeightOrVolume?a("el-form-item",{attrs:{label:"分泡比率(%)",prop:"bubble"}},[a("el-input",{attrs:{type:"number",step:"0.01"},model:{value:e.ruleForm.bubble,callback:function(t){e.$set(e.ruleForm,"bubble",e._n(t))},expression:"ruleForm.bubble"}})],1):e._e(),a("el-form-item",{attrs:{label:"单箱最低收费重",prop:"boxLowestWeight"}},[a("el-input",{attrs:{type:"number",step:"0.01",clearable:""},model:{value:e.ruleForm.boxLowestWeight,callback:function(t){e.$set(e.ruleForm,"boxLowestWeight",e._n(t))},expression:"ruleForm.boxLowestWeight"}})],1),a("el-form-item",{attrs:{label:"单票最低收费重",prop:"orderLowestWeight"}},[a("el-input",{attrs:{type:"number",step:"0.01",clearable:""},model:{value:e.ruleForm.orderLowestWeight,callback:function(t){e.$set(e.ruleForm,"orderLowestWeight",e._n(t))},expression:"ruleForm.orderLowestWeight"}})],1),e.ruleForm.a1===e.A1.MaxInWeightOrVolume?a("el-form-item",{attrs:{label:"多件重量算法",prop:"a2"}},[a("el-radio-group",{model:{value:e.ruleForm.a2,callback:function(t){e.$set(e.ruleForm,"a2",t)},expression:"ruleForm.a2"}},[a("el-radio",{attrs:{label:e.A2.AccBeforeCompare}},[e._v("\n                先累加后比较\n              ")]),a("el-radio",{attrs:{label:e.A2.CompareBeforeAcc}},[e._v("\n                先比较后累加\n              ")])],1)],1):e._e()],1)],1),a("el-col",{attrs:{span:14}},e._l(e.boxForm,function(t,r){return a("el-row",{key:r,staticStyle:{"align-items":"center","margin-bottom":"22px"},attrs:{type:"flex"}},[a("div",{staticStyle:{color:"#606266","font-size":"14px"}},[e._v("\n            批次"+e._s(r+1)+"\n          ")]),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{type:"number",step:"0.01",clearable:"",placeholder:"总箱数"},model:{value:t.beachTotal,callback:function(a){e.$set(t,"beachTotal",e._n(a))},expression:"item.beachTotal"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{type:"number",step:"0.01",clearable:"",placeholder:"单箱实重"},model:{value:t.weight,callback:function(a){e.$set(t,"weight",e._n(a))},expression:"item.weight"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{type:"number",step:"0.01",clearable:"",placeholder:"单箱长度"},model:{value:t.length,callback:function(a){e.$set(t,"length",e._n(a))},expression:"item.length"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{type:"number",step:"0.01",placeholder:"单箱宽度",clearable:""},model:{value:t.width,callback:function(a){e.$set(t,"width",e._n(a))},expression:"item.width"}}),a("el-input",{staticStyle:{width:"100px","margin-left":"10px"},attrs:{type:"number",step:"0.01",clearable:"",placeholder:"单箱高度"},model:{value:t.height,callback:function(a){e.$set(t,"height",e._n(a))},expression:"item.height"}}),a("i",{directives:[{name:"show",rawName:"v-show",value:0===r,expression:"index === 0"}],staticClass:"el-icon-circle-plus-outline",staticStyle:{"margin-left":"10px",color:"#409eff","font-size":"20px",cursor:"pointer"},on:{click:e.addBeatch}}),a("i",{directives:[{name:"show",rawName:"v-show",value:0!==r,expression:"index !== 0"}],staticClass:"el-icon-remove-outline",staticStyle:{"margin-left":"10px",color:"#f14535","font-size":"20px",cursor:"pointer"},on:{click:function(t){return e.delBeatch(r)}}})],1)}),1)],1),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("\n        计算\n      ")]),a("el-button",{on:{click:function(t){return e.reset("ruleForm")}}},[e._v("\n        重置\n      ")])],1),a("el-row",[a("p",{directives:[{name:"show",rawName:"v-show",value:e.isBubble,expression:"isBubble"}]},[e._v("\n        是否需要分泡: "+e._s(!0===e.isBubble?"是":"否")+"，分泡前："+e._s(e.beforeBubble)+" 分泡后："+e._s(e.afterbubble)+"\n      ")]),a("p",[e._v("收费重量："+e._s(e.estimatedWeight))]),a("p",[e._v("最终结算重量："+e._s(e.settlementWeight))])])],1)],1)},o=[],n=(a("6c7b"),a("75fc")),s=(a("c5f6"),a("ac6a"),a("d225")),c=a("b0b4"),u=a("308d"),h=a("6bb5"),b=a("4e2b"),m=a("9ab4"),g=a("60a3");function p(){return[{beachTotal:1,weight:7.95,height:41,length:57,width:40},{beachTotal:1,weight:13.8,height:32,length:47,width:32},{beachTotal:1,weight:13,height:38,length:53,width:33}]}(function(e){e[e["TakeActualWeight"]=1]="TakeActualWeight",e[e["MaxInWeightOrVolume"]=2]="MaxInWeightOrVolume",e[e["AvgInWeightOrVolume"]=3]="AvgInWeightOrVolume"})(r||(r={})),function(e){e[e["AccBeforeCompare"]=1]="AccBeforeCompare",e[e["CompareBeforeAcc"]=2]="CompareBeforeAcc"}(l||(l={}));var f=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(u["a"])(this,Object(h["a"])(t).apply(this,arguments)),e.loading=!1,e.A1=r,e.A2=l,e.ruleForm={a1:r.MaxInWeightOrVolume,bubble:20,boxLowestWeight:10,orderLowestWeight:50,a2:l.CompareBeforeAcc},e.boxForm=p(),e.boxs=[],e.isBubble=null,e.beforeBubble=0,e.afterbubble=0,e.estimatedWeight=0,e.settlementWeight=0,e.rules={a1:[{required:!0,message:"请选择结算重量算法",trigger:"blur"}],bubble:[{required:!0,message:"请输入分泡比率",trigger:"blur"}],a2:[{required:!0,message:"请选择多件重量算法",trigger:"blur"}]},e}return Object(b["a"])(t,e),Object(c["a"])(t,[{key:"reset",value:function(e){var t={a1:r.MaxInWeightOrVolume,bubble:20,boxLowestWeight:10,orderLowestWeight:50,a2:l.AccBeforeCompare};this.boxForm=p(),this.ruleForm=t,this.isBubble=null,this.beforeBubble=0,this.afterbubble=0,this.estimatedWeight=0,this.settlementWeight=0,this.boxs=[];var a=this.$refs[e];a.clearValidate(),this.submitForm()}},{key:"submitForm",value:function(){this.settlementWeight=this.calc()}},{key:"addBeatch",value:function(){var e={beachTotal:0,weight:0,height:0,length:0,width:0};this.boxForm.push(e)}},{key:"delBeatch",value:function(e){var t=this.boxForm;this.boxForm=t.filter(function(t,a){return a!==e})}},{key:"measuringBox",value:function(){var e=this.boxForm,t=[];return e.forEach(function(e){var a=e.weight,r=e.height,l=e.length,i=e.width,o=e.beachTotal,s=l*i*r/1e3/1e3,c=167*Number(s),u={aWeight:a,vWeight:Number(c)};t=[].concat(Object(n["a"])(t),Object(n["a"])(Array(o).fill(u)))}),t}},{key:"calcVweight",value:function(e){var t=this.ruleForm.boxLowestWeight,a=0;return e.forEach(function(e){var r=Math.max(e.vWeight,t||0);a+=r}),a}},{key:"calcAweight",value:function(e){var t=this.ruleForm.boxLowestWeight,a=0;return e.forEach(function(e){var r=Math.max(e.aWeight,t||0);a+=r}),a}},{key:"handleBubble",value:function(){var e=this.calcAweight,t=this.estimatedWeight,a=this.boxs,l=this.ruleForm.bubble,i=this.ruleForm.a1,o=e(a);return i===r.MaxInWeightOrVolume&&t>o?(this.isBubble=!0,this.beforeBubble=t,this.afterbubble=(t-o)*(1-(l||0)/100)+o,(t-o)*(1-(l||0)/100)+o):(this.isBubble=!1,t)}},{key:"calcAccBeforeCompare",value:function(e){var t=this.calcVweight,a=this.calcAweight,r=t(e),l=a(e);return Math.max(r,l)}},{key:"calcCompareBeforeAcc",value:function(e){var t=this.ruleForm.boxLowestWeight,a=0;return e.forEach(function(e){var r=Math.max(e.aWeight,t||0),l=Math.max(e.vWeight,t||0),i=Math.max(r,l);a+=i}),a}},{key:"calcAverageOfAwAndVw",value:function(e){var t=this.calcAweight,a=this.calcVweight;return(t(e)+a(e))/2}},{key:"calcSettlementWeight",value:function(){var e=this.estimatedWeight,t=this.ruleForm.orderLowestWeight;return Math.max(Math.ceil(e),t||0)}},{key:"calcEstimatedWeight",value:function(e){var t=this.ruleForm,a=t.a1,i=t.a2,o=this.calcAccBeforeCompare,n=this.calcCompareBeforeAcc,s=this.calcAverageOfAwAndVw,c=this.calcAweight;switch(a){case r.MaxInWeightOrVolume:return i===l.AccBeforeCompare?o(e):n(e);case r.AvgInWeightOrVolume:return s(e);case r.TakeActualWeight:return c(e);default:return 0}}},{key:"calc",value:function(){var e=this.measuringBox();return this.boxs=e,this.estimatedWeight=this.calcEstimatedWeight(e),this.estimatedWeight=this.handleBubble(),this.calcSettlementWeight()}},{key:"created",value:function(){this.submitForm()}}]),t}(g["e"]);f=m["a"]([Object(g["a"])({name:"CalcWeight",components:{}})],f);var d=f,v=d,x=(a("dbea"),a("2877")),w=Object(x["a"])(v,i,o,!1,null,"ae3b707a",null);t["default"]=w.exports},dbea:function(e,t,a){"use strict";var r=a("6a97"),l=a.n(r);l.a}}]);