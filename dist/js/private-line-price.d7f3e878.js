(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["private-line-price"],{"0ad1":function(e,t,i){},"0dca":function(e,t,i){"use strict";i.d(t,"f",function(){return a}),i.d(t,"m",function(){return s}),i.d(t,"e",function(){return n}),i.d(t,"p",function(){return o}),i.d(t,"k",function(){return c}),i.d(t,"o",function(){return l}),i.d(t,"a",function(){return u}),i.d(t,"d",function(){return d}),i.d(t,"c",function(){return m}),i.d(t,"l",function(){return p}),i.d(t,"n",function(){return h}),i.d(t,"b",function(){return f}),i.d(t,"i",function(){return v}),i.d(t,"h",function(){return g}),i.d(t,"g",function(){return y}),i.d(t,"j",function(){return b}),i.d(t,"q",function(){return w});var r=i("b32d");function a(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function s(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function n(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function o(e){var t={url:"/cfg/csc/getCscList",method:"get",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/price/declare/page",method:"post",data:e};return Object(r["a"])(t)}function l(e){var t={url:"/price/declare/page1",method:"post",data:e};return Object(r["a"])(t)}function u(e){var t={url:"/price/declare/add",method:"post",data:e};return Object(r["a"])(t)}function d(e){var t={url:"/price/declare/update",method:"post",data:e};return Object(r["a"])(t)}function m(e){var t={url:"/price/declare/del",method:"delete",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/price/declare/refStandard",method:"post",data:e};return Object(r["a"])(t)}function h(e){var t={url:"/price/declare/superior",method:"post",data:e};return Object(r["a"])(t)}function f(e){var t={url:"/price/declare/review",method:"post",data:e};return Object(r["a"])(t)}function v(e){var t={url:"/price/declare/history",method:"get",params:e};return Object(r["a"])(t)}function g(e){var t={url:"/price/declare/history/get",method:"get",params:e};return Object(r["a"])(t)}function y(e){var t={url:"/cfg/csc/getCscCostitem",method:"get",params:e};return Object(r["a"])(t)}function b(e){var t={url:"/cfg/csc/find_customs",method:"post",data:e};return Object(r["a"])(t)}function w(e){var t={url:"/price/declare/doExpire",method:"get",params:e};return Object(r["a"])(t)}},"13f5":function(e,t,i){"use strict";i.d(t,"f",function(){return a}),i.d(t,"r",function(){return s}),i.d(t,"h",function(){return n}),i.d(t,"k",function(){return o}),i.d(t,"i",function(){return c}),i.d(t,"s",function(){return l}),i.d(t,"z",function(){return u}),i.d(t,"t",function(){return d}),i.d(t,"a",function(){return m}),i.d(t,"u",function(){return p}),i.d(t,"x",function(){return h}),i.d(t,"l",function(){return f}),i.d(t,"q",function(){return v}),i.d(t,"j",function(){return g}),i.d(t,"b",function(){return y}),i.d(t,"n",function(){return b}),i.d(t,"m",function(){return w}),i.d(t,"c",function(){return x}),i.d(t,"v",function(){return k}),i.d(t,"g",function(){return F}),i.d(t,"y",function(){return S}),i.d(t,"w",function(){return L}),i.d(t,"p",function(){return _}),i.d(t,"e",function(){return I}),i.d(t,"o",function(){return C}),i.d(t,"d",function(){return T});var r=i("b32d");function a(e){var t={url:"/setting/area/getAreasOfOneCountry",method:"get",params:e};return Object(r["a"])(t)}function s(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(r["a"])(t)}function n(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(r["a"])(t)}function o(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(r["a"])(t)}function c(e){var t={url:"/setting/area/getCounties",method:"get",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/cfg/tsc/getTscList",method:"get",params:e};return Object(r["a"])(t)}function u(e){var t={url:"/cfg/tsc/saveTsc",method:"post",data:e};return Object(r["a"])(t)}function d(e){var t={url:"/cfg/tsc/changeStatus",method:"post",params:e};return Object(r["a"])(t)}function m(e){var t={url:"/cfg/tsc/deleteTsc",method:"delete",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/cfg/tsc/getAgentList",method:"get",params:e};return Object(r["a"])(t)}function h(e){var t={url:"/cfg/tsc/saveAgent",method:"post",data:e};return Object(r["a"])(t)}function f(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(r["a"])(t)}function v(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function g(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function y(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function b(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(r["a"])(t)}function w(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(r["a"])(t)}function x(e){var t={url:"/cfg/tsc/find_objective",method:"post",data:e};return Object(r["a"])(t)}function k(e){var t={url:"/cfg/tsc/save_objective",method:"post",data:e};return Object(r["a"])(t)}function F(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(r["a"])(t)}function S(e){var t={url:"/cfg/tsc/save_cabinet",method:"post",data:e};return Object(r["a"])(t)}function L(e){var t={url:"/cfg/tsc/save_address",method:"post",data:e};return Object(r["a"])(t)}function _(e){var t={url:"/cfg/tsc/find_cabinet",method:"post",data:e};return Object(r["a"])(t)}function I(e){var t={url:"/setting/area/getAllStreet",method:"get",params:e};return Object(r["a"])(t)}function C(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(r["a"])(t)}function T(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(r["a"])(t)}},"155b":function(e,t,i){"use strict";var r=i("cd63"),a=i.n(r);a.a},"1ab7":function(e,t,i){},"1e9b":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABHNCSVQICAgIfAhkiAAAAGRJREFUGJXF0LEJgFAQA9Ccdm7yCxewdBixdBMb4W/iKsmfRfGshN+c2Hld4JHAAcFJGkn2T24DlAGcKaU9KoKkLGkOwSfk7k0pZSM5RaYBADO73P0ws+51sppeJS0/Y5JD/fAbvDw8mbaIFiYAAAAASUVORK5CYII="},2094:function(e,t,i){"use strict";i.d(t,"d",function(){return a}),i.d(t,"o",function(){return s}),i.d(t,"k",function(){return n}),i.d(t,"a",function(){return o}),i.d(t,"l",function(){return c}),i.d(t,"m",function(){return l}),i.d(t,"g",function(){return u}),i.d(t,"f",function(){return d}),i.d(t,"i",function(){return m}),i.d(t,"b",function(){return p}),i.d(t,"e",function(){return h}),i.d(t,"j",function(){return f}),i.d(t,"p",function(){return v}),i.d(t,"c",function(){return g}),i.d(t,"n",function(){return y}),i.d(t,"h",function(){return b});var r=i("b32d");function a(e){var t={url:"/cfg/csc/getCscList",method:"get",params:e};return Object(r["a"])(t)}function s(e){var t={url:"/cfg/csc/saveCsc",method:"post",data:e};return Object(r["a"])(t)}function n(e){var t={url:"/cfg/csc/changeStatus",method:"post",params:e};return Object(r["a"])(t)}function o(e){var t={url:"/cfg/csc/deleteCsc",method:"delete",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/cfg/csc/getAgentList",method:"get",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/cfg/csc/saveAgent",method:"post",data:e};return Object(r["a"])(t)}function u(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(r["a"])(t)}function d(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function m(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function h(e){var t={url:"/finance/costitem/getCostitemList",method:"get",params:e};return Object(r["a"])(t)}function f(e){var t={url:"/cfg/csc/getCscCostitem",method:"get",params:e};return Object(r["a"])(t)}function v(e){var t={url:"/cfg/csc/saveCscCostitem",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(r["a"])(t)}function y(e){var t={url:"/cfg/csc/save_customs",method:"post",data:e};return Object(r["a"])(t)}function b(e){var t={url:"/cfg/csc/find_customs",method:"post",data:e};return Object(r["a"])(t)}},"252a":function(e,t,i){},"254e":function(e,t,i){"use strict";i.d(t,"p",function(){return a}),i.d(t,"z",function(){return s}),i.d(t,"m",function(){return n}),i.d(t,"q",function(){return o}),i.d(t,"B",function(){return c}),i.d(t,"i",function(){return l}),i.d(t,"K",function(){return u}),i.d(t,"A",function(){return d}),i.d(t,"b",function(){return m}),i.d(t,"x",function(){return p}),i.d(t,"C",function(){return h}),i.d(t,"w",function(){return f}),i.d(t,"a",function(){return v}),i.d(t,"v",function(){return g}),i.d(t,"I",function(){return y}),i.d(t,"D",function(){return b}),i.d(t,"g",function(){return w}),i.d(t,"j",function(){return x}),i.d(t,"E",function(){return k}),i.d(t,"c",function(){return F}),i.d(t,"L",function(){return S}),i.d(t,"k",function(){return L}),i.d(t,"r",function(){return _}),i.d(t,"F",function(){return I}),i.d(t,"l",function(){return C}),i.d(t,"d",function(){return T}),i.d(t,"n",function(){return O}),i.d(t,"G",function(){return j}),i.d(t,"o",function(){return A}),i.d(t,"e",function(){return P}),i.d(t,"s",function(){return N}),i.d(t,"H",function(){return D}),i.d(t,"u",function(){return z}),i.d(t,"t",function(){return $}),i.d(t,"f",function(){return M}),i.d(t,"y",function(){return R}),i.d(t,"J",function(){return Y}),i.d(t,"h",function(){return E}),i.d(t,"M",function(){return V});var r=i("b32d");function a(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function s(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(r["a"])(t)}function n(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(r["a"])(t)}function o(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(r["a"])(t)}function c(e){var t={url:"/auth/supplier/getSupplierList",method:"get",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/auth/supplier/deleteSupplier",method:"delete",params:{id:e}};return Object(r["a"])(t)}function u(e){var t={url:"/auth/supplier/saveSupplier",method:"post",data:e};return Object(r["a"])(t)}function d(e){var t={url:"/auth/supplier/getSupplier",method:"get",params:{id:e}};return Object(r["a"])(t)}function m(e){var t={url:"/auth/supplier/changeStatus",method:"post",params:e};return Object(r["a"])(t)}function p(){var e={url:"/cfg/type/getServiceTypeList",method:"get",params:{custType:1}};return Object(r["a"])(e)}function h(e){var t={url:"/auth/user/user4position",method:"post",data:e};return Object(r["a"])(t)}function f(e){var t={url:"/auth/supplier/getStaffList",method:"get",params:e};return Object(r["a"])(t)}function v(e){var t={url:"/auth/supplier/saveStaff",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/auth/contact/getContactList",method:"get",params:e};return Object(r["a"])(t)}function y(e){var t={url:"/auth/contact/saveContact",method:"post",data:e};return Object(r["a"])(t)}function b(e){var t={url:"/auth/contact/getContact",method:"get",params:e};return Object(r["a"])(t)}function w(e){var t={url:"/auth/contact/deleteContact",method:"delete",params:e};return Object(r["a"])(t)}function x(e){var t={url:"/auth/address/getAddressList",method:"get",params:e};return Object(r["a"])(t)}function k(e){var t={url:"/auth/address/saveAddress",method:"post",data:e};return Object(r["a"])(t)}function F(e){var t={url:"/auth/address/deleteAddress",method:"delete",params:e};return Object(r["a"])(t)}function S(e){var t={url:"/auth/address/setAddressDefault",method:"post",params:e};return Object(r["a"])(t)}function L(e){var t={url:"/auth/invoice/getInvoiceList",method:"get",params:e};return Object(r["a"])(t)}function _(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function I(e){var t={url:"/auth/invoice/saveInvoice",method:"post",data:e};return Object(r["a"])(t)}function C(e){var t={url:"/auth/invoice/getInvoice",method:"get",params:e};return Object(r["a"])(t)}function T(e){var t={url:"/auth/invoice/deleteInvoice",method:"delete",params:e};return Object(r["a"])(t)}function O(e){var t={url:"/auth/acct/getAcctList",method:"get",params:e};return Object(r["a"])(t)}function j(e){var t={url:"/auth/acct/saveAcct",method:"post",data:e};return Object(r["a"])(t)}function A(e){var t={url:"/auth/acct/getAcct",method:"get",params:e};return Object(r["a"])(t)}function P(e){var t={url:"/auth/acct/deleteAcct",method:"delete",params:e};return Object(r["a"])(t)}function N(e){var t={url:"/auth/doc/getDocList",method:"get",params:e};return Object(r["a"])(t)}function D(e){var t={url:"/auth/doc/saveDoc",method:"post",data:e};return Object(r["a"])(t)}function z(e){var t={url:"/setting/util/getFileUrl",method:"get",params:e};return Object(r["a"])(t)}function $(e){var t={url:"/auth/doc/getDoc",method:"get",params:e};return Object(r["a"])(t)}function M(e){var t={url:"/auth/doc/deleteDoc",method:"delete",params:e};return Object(r["a"])(t)}function R(e){var t={url:"/auth/bookc/getBookcList",method:"get",params:e};return Object(r["a"])(t)}function Y(e){var t={url:"/auth/bookc/saveBookc",method:"post",data:e};return Object(r["a"])(t)}function E(e){var t={url:"/auth/bookc/deleteBookc",method:"delete",params:e};return Object(r["a"])(t)}function V(e){var t={url:"/auth/bookc/setBookcDefault",method:"post",params:e};return Object(r["a"])(t)}},"255a":function(e,t,i){"use strict";var r=i("2a32"),a=i.n(r);a.a},"2a32":function(e,t,i){},"2aa5":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"400","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:12}},[e._v("\n          卡车报价\n        ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["kapaiOfferAdd"],expression:"['kapaiOfferAdd']"}],attrs:{type:"text",size:"small"},on:{click:e.addPrice}},[e._v("\n            新增报价\n          ")])],1)],1),r("div",{staticStyle:{padding:"10px 0"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"国家","label-width":"50px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.countryChange},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"50px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("search")},change:function(t){return e.onService("search",t)}},model:{value:e.searchForm.kscId,callback:function(t){e.$set(e.searchForm,"kscId",t)},expression:"searchForm.kscId"}},e._l(e.searchServiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["kapaiOfferQuery"],expression:"['kapaiOfferQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("1")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.kscName,callback:function(t){e.$set(e.searchForm,"kscName",t)},expression:"searchForm.kscName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"价格标准","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.ifStandard,callback:function(t){e.$set(e.searchForm,"ifStandard",t)},expression:"searchForm.ifStandard"}},[r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:!0}},[e._v("\n                      标准\n                    ")]),r("el-radio-button",{attrs:{label:!1}},[e._v("\n                      特殊\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"计费方式","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.priceType,callback:function(t){e.$set(e.searchForm,"priceType",t)},expression:"searchForm.priceType"}},[r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      按车型\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      按托数\n                    ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                      按重量&方数\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"地址类型","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.addressType,callback:function(t){e.$set(e.searchForm,"addressType",t)},expression:"searchForm.addressType"}},[r("el-radio-button",{attrs:{label:"5"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      机场\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      港口\n                    ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                      火车站\n                    ")]),r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                      海外仓\n                    ")]),r("el-radio-button",{attrs:{label:"4"}},[e._v("\n                      私人地址\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["kapaiOfferQuery"],expression:"['kapaiOfferQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("2")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 275px)"}},[0===e.priceList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):e._e(),e._l(e.priceList,function(t,i){return r("div",{key:i,staticClass:"price-card",class:{"active-card":e.selectCardId===t.id},staticStyle:{"font-size":"12px",cursor:"pointer"},attrs:{shadow:"hover"},on:{click:function(i){return e.onSelectCard(t)},contextmenu:function(i){return i.preventDefault(),e.showMenu(t,i)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待审核",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-blue"})]):e._e(),2===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-y"})]):e._e(),3===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已拒绝",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-red"})]):e._e(),4===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已通过",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-success"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:18}},[e._v("\n                "+e._s(t.kscName)+"\n              ")]),t.ifStandard?r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("\n                标准报价\n              ")]):r("el-col",{staticStyle:{"text-align":"right",display:"flex","align-items":"center","justify-content":"flex-end"},attrs:{span:5}},[e._v("\n                特殊报价\n                ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},["4"!==t.addressType?r("el-col",{attrs:{span:4}},[e._v("\n                起运地\n              ")]):e._e(),"4"!==t.addressType?r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:16}},[e._v("\n                "+e._s(e.formatTag(t,"1"))+"\n              ")]):r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:20}},[e._v("\n                "+e._s((t.country.countryName||"")+" "+(t.country.stateName||"")+" "+(t.country.cityName||"")+" "+(t.country.countyName||""))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["2"===t.toCustType?r("span",[e._v("代理商价")]):"1"===t.toCustType&&"0"===t.toCustSubtype?r("span",[e._v("直客价")]):"1"===t.toCustType&&"1"===t.toCustSubtype?r("span",[e._v("同行价")]):"3"===t.toCustType?r("span",[e._v("聚货通价")]):e._e()])],1),r("el-row",[r("el-col",{attrs:{span:4}},["1"===t.status?r("span",{staticClass:"btn-tip-success"},[e._v("\n                  生效中\n                ")]):"2"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                  待生效\n                ")]):"3"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                  已失效\n                ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:12}},[e._v("\n                "+e._s(e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                  "+e._s(e.formatTag(t))+"\n                ")])])],1)],1)})],2)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-pagination",{attrs:{small:"",layout:"total,prev, pager, next",total:e.pagination.total,"page-size":e.pagination.size,"current-page":e.pagination.page},on:{"current-change":e.currentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),e.showAddForm?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("el-form",{ref:"editForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[r("div",{staticStyle:{flex:"1"}},[r("el-form-item",{attrs:{label:"业务类型：",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getSubtypeList,change:e.subTypeChange},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"国家：",prop:"countryId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},on:{change:e.onCountryChange},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.countryId||e.isView,filterable:""},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectForm.stateId,callback:function(t){e.$set(e.selectForm,"stateId",t)},expression:"selectForm.stateId"}},e._l(e.stateList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.stateId||e.isView,filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.selectForm.cityId,callback:function(t){e.$set(e.selectForm,"cityId",t)},expression:"selectForm.cityId"}},e._l(e.cityList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),r("el-form-item",{attrs:{slot:"reference",label:"国家/省市：",prop:"countryId"},slot:"reference"},[r("el-button",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{type:"text",size:"mini"}},[e._v("\n                "+e._s(e.selectForm.cityName?e.selectForm.cityName:e.selectForm.stateName?e.selectForm.stateName:e.selectForm.countryName?e.selectForm.countryName:"请选择")+"\n              ")])],1)],1),r("el-form-item",{attrs:{prop:"kscId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectService.name,expression:"selectService.name"}],attrs:{slot:"label",content:e.selectService.label+"/"+e.selectService.ksId,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",disabled:e.isView,placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("select")},change:function(t){return e.onService("select",t)}},model:{value:e.selectForm.kscId,callback:function(t){e.$set(e.selectForm,"kscId",t)},expression:"selectForm.kscId"}},e._l(e.selectServiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"报价对象：",prop:"0"===e.custType?"":"toCustSubtype"}},["0"===e.custType?r("span",[e._v("\n              一级代理商\n            ")]):r("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",disabled:e.isView,filterable:"",placeholder:"请选择"},on:{change:e.custSubtypeChange},model:{value:e.selectForm.toCustSubtype,callback:function(t){e.$set(e.selectForm,"toCustSubtype",t)},expression:"selectForm.toCustSubtype"}},e._l(e.custList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"2"===e.custType?r("el-form-item",{attrs:{label:"参考报价："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.superiorPriceChange,focus:e.getSuperiorPrice},model:{value:e.selectForm.refId,callback:function(t){e.$set(e.selectForm,"refId",t)},expression:"selectForm.refId"}},e._l(e.superiorPriceList,function(t){return r("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1):e._e()],1),e.selectCard.id&&4===e.selectCard.auditing||e.edition?e._e():r("div",{staticStyle:{"text-align":"right","margin-bottom":"18px"}},[e.isEdit||!e.isView||1!==e.selectCard.auditing&&3!==e.selectCard.auditing||!e.$checkPermission(["kapaiOfferEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.editRow}},[e._v("\n            编辑\n          ")]),4!==e.selectCard.auditing&&!e.isEdit&&e.isView&&e.$checkPermission(["kapaiOfferAudit"])?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{show:e.showAuditModal,hide:e.hidePopover},model:{value:e.visibleAudit,callback:function(t){e.visibleAudit=t},expression:"visibleAudit"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"通过/拒绝：",prop:"status","label-width":"110px"}},[r("el-radio-group",{model:{value:e.selectForm.status,callback:function(t){e.$set(e.selectForm,"status",t)},expression:"selectForm.status"}},[r("el-radio",{attrs:{label:"4"}},[e._v("\n                    通过\n                  ")]),r("el-radio",{attrs:{label:"3"}},[e._v("\n                    拒绝\n                  ")])],1)],1),"3"===e.selectForm.status?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"note","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.selectForm.note,callback:function(t){e.$set(e.selectForm,"note",t)},expression:"selectForm.note"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"mini"},on:{click:e.hidePopover}},[e._v("\n                  取消\n                ")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.auditPrice}},[e._v("\n                  确认\n                ")])],1)],1),r("el-button",{staticStyle:{margin:"0 10px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              审核\n            ")])],1):e._e(),e.isEdit||!e.isView||1!==e.selectCard.auditing&&3!==e.selectCard.auditing||!e.$checkPermission(["kapaiOfferDel"])?e._e():r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteRow(1)}}},[e._v("\n            删除\n          ")]),e.isView&&!e.isEdit||!e.$checkPermission(["kapaiOfferAdd","kapaiOfferEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.cancelEdit}},[e._v("\n            取消\n          ")]),!e.isEdit&&e.isView||!e.$checkPermission(["kapaiOfferAdd","kapaiOfferEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.saveRow}},[e._v("\n            保存\n          ")])],1),!e.selectCard.id&&!e.edition||e.isEdit?e._e():r("div",{staticStyle:{"text-align":"right","margin-bottom":"18px"}},[e.$checkPermission(["kapaiOfferCopy"])?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.copyPrice}},[e._v("\n            复制此版本\n          ")]):e._e(),4!==e.selectCard.auditing||e.edition?e._e():r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:e.invalidPrice}},[e._v("\n            失效\n          ")])],1)]),r("div",{staticClass:"service-info"},[r("el-form-item",{attrs:{label:"计费方式："}},["0"===e.selectService.priceType?r("span",[e._v("\n            车型\n          ")]):"1"===e.selectService.priceType?r("span",[e._v("\n            托数\n          ")]):"2"===e.selectService.priceType?r("span",[e._v("\n            重量&方数\n          ")]):r("span",[e._v("\n            --\n          ")])]),"4"!==e.selectService.addressType?r("el-form-item",{attrs:{label:"起运地址："}},[e._v("\n          "+e._s(e.selectService.addressName||"--")+"\n        ")]):e._e(),r("el-form-item",{attrs:{label:"距离单位："}},[r("span",[e._v("\n            "+e._s(e.formattUnit(e.selectService.umDistance,e.umDistanceList))+"\n          ")])]),r("el-form-item",{attrs:{label:"重量单位："}},[r("span",[e._v("\n            "+e._s(e.formattUnit(e.selectService.umWeight,e.umWeightList))+"\n          ")])]),r("el-form-item",{attrs:{label:"体积单位："}},[r("span",[e._v("\n            "+e._s(e.formattUnit(e.selectService.umVolume,e.umVolumeList))+"\n          ")])]),r("el-form-item",{attrs:{label:"货币单位："}},[e._v("\n          "+e._s(e.formattCurrency(e.selectService.currencyId))+"\n        ")])],1),r("el-row",[r("el-col",{attrs:{span:21}},[e.selectService.id&&"3"===e.custType&&"4"===e.selectService.addressType?r("el-form-item",{attrs:{label:"设置里程："}},[r("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEdit&&e.isView},on:{click:function(t){return e.handleRelevance("3")}}},[e._v("\n              里程\n            ")])],1):e._e(),e.selectService.id&&"3"===e.custType&&"0"!==e.selectService.priceType?r("el-form-item",{attrs:{label:"计费区间："}},[r("el-button",{attrs:{type:"text",size:"mini",disabled:!e.isEdit&&e.isView},on:{click:function(t){return e.handleRelevance(e.selectService.priceType)}}},[e._v("\n              区间\n            ")])],1):e._e(),"3"!==e.custType||"3"===e.custType&&e.selectForm.toCustSubtype&&"-1"!==e.selectForm.toCustSubtype?r("el-form-item",{attrs:{label:"价格标准：",prop:"ifStandard","label-width":"100px"}},[r("el-radio-group",{attrs:{disabled:e.isView},on:{change:e.ifStandardChange},model:{value:e.selectForm.ifStandard,callback:function(t){e.$set(e.selectForm,"ifStandard",t)},expression:"selectForm.ifStandard"}},[r("el-radio",{attrs:{label:!0}},[e._v("\n                标准\n              ")]),r("el-radio",{attrs:{label:!1}},[e._v("\n                特殊\n              ")])],1)],1):e._e(),e.selectForm.ifStandard?e._e():r("el-form-item",{attrs:{label:e.formLabel+"：",prop:"associatedAgents","label-width":"120px"}},[r("el-button",{staticStyle:{"padding-right":"30px"},attrs:{type:"text",size:"mini"},on:{click:e.showAgencyModel}},[e._v("\n              已选择("+e._s((e.selectForm.associatedAgents||[]).length)+")\n            ")])],1),e.selectForm.ifStandard?e._e():r("el-form-item",{attrs:{label:"有效时间：","label-width":"90px",prop:"refStandardId"}},[e.isView?r("el-date-picker",{staticStyle:{width:"220px"},attrs:{clearable:!1,disabled:!e.selectForm.ifStandard||!e.isEdit&&e.isView,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间","picker-options":e.pickerOptions},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}}):r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.refStandardChange,focus:e.getRefStandard},model:{value:e.selectForm.refStandardId,callback:function(t){e.$set(e.selectForm,"refStandardId",t)},expression:"selectForm.refStandardId"}},e._l(e.refStandardList,function(t){return r("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.ifStandard,expression:"selectForm.ifStandard"}],attrs:{label:"有效时间：","label-width":"90px",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"220px"},attrs:{clearable:!1,disabled:!e.selectForm.ifStandard||!e.isEdit&&e.isView,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间","picker-options":e.pickerOptions},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1),r("el-form-item",{attrs:{label:"单票最低收费：","label-width":"130px",prop:"floorPrice"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{disabled:!e.isEdit&&e.isView,controls:!1,placeholder:"请输入",min:0,max:999999,precision:2,size:"mini"},model:{value:e.selectForm.floorPrice,callback:function(t){e.$set(e.selectForm,"floorPrice",t)},expression:"selectForm.floorPrice"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:3}},[e.isView&&!e.isEdit?r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"历史版本"},on:{focus:e.getEditionList,change:function(t){return e.viewHistoryPrice(t,!1)}},model:{value:e.edition,callback:function(t){e.edition=t},expression:"edition"}},e._l(e.editionList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1):e._e(),e.isView&&!e.isEdit||"2"!==e.custType?e._e():r("el-popover",{attrs:{placement:"bottom",trigger:"click"},on:{show:e.showBatchAddForm},model:{value:e.isShowPopover,callback:function(t){e.isShowPopover=t},expression:"isShowPopover"}},[r("div",{staticStyle:{padding:"0 20px 0 10px",width:"240px"}},[r("div",[e._v("请输入需要批量修改的值")]),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{margin:"13px 0 26px 0"},attrs:{controls:!1,placeholder:"请输入",precision:2,size:"mini"},on:{focus:function(e){e.stopPropagation()}},model:{value:e.addNumber,callback:function(t){e.addNumber=t},expression:"addNumber"}}),r("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{color:"#FF6D00"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNumberChange(0)}}},[e._v("\n                  重置\n                ")]),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticStyle:{color:"#999999"},attrs:{type:"text",size:"mini"},on:{click:e.hidePopover}},[e._v("\n                    取消\n                  ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNumberChange(1)}}},[e._v("\n                    保存\n                  ")])],1)],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              批量修改\n            ")])],1)],1),3===e.selectCard.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因："}},[r("span",[e._v("\n              "+e._s(e.selectCard.reason)+"\n            ")])])],1):e._e()],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{"min-height":"200px"}},[e.aAxisData.length?r("vxe-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"620",border:"",resizable:"",size:"small","row-class-name":e.tableRowClassName,"auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",field:"label",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.label)+"\n          ")]}}],null,!1,799874427)},[r("template",{slot:"header"},[r("span",{staticClass:"header-column"},[e._v("\n              "+e._s("4"===e.selectService.addressType?"里程":"目的地")+"\n            ")]),r("span",[e._v(" \\ ")]),"0"===e.selectService.priceType?r("span",[e._v("\n              车型\n            ")]):e._e(),"1"===e.selectService.priceType?r("span",[e._v("\n              托数\n            ")]):e._e(),"2"===e.selectService.priceType?r("span",[e._v("\n              重量&方数\n            ")]):e._e()])],2),"2"!==e.selectService.priceType?e._l(e.aAxisData,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,field:t.value,resizable:!0,"show-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(i){return["remark"!==t.value?r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                  "+e._s(i.row[t.value])+"\n                ")]):r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2,size:"mini"},model:{value:i.row[t.value],callback:function(r){e.$set(i.row,t.value,r)},expression:"scope.row[item.value]"}})],1):r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                  "+e._s(i.row.remark)+"\n                ")]):r("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:i.row.remark,callback:function(t){e.$set(i.row,"remark",t)},expression:"scope.row.remark"}})],1)]}}],null,!0)})}):[e._l(e.aAxisDataPlanar,function(t,i){return r("vxe-table-colgroup",{key:i,attrs:{title:0===i?" 重量":"方数",align:"center","show-overflow":!0}},e._l(t,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,field:t.value,resizable:!0,"show-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(i){return[r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                    "+e._s(i.row[t.value])+"\n                  ")]):r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2,size:"mini"},model:{value:i.row[t.value],callback:function(r){e.$set(i.row,t.value,r)},expression:"scope.row[item.value]"}})],1)]}}],null,!0)})}),1)}),r("vxe-table-column",{attrs:{title:"备注",align:"center","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[t.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                  "+e._s(t.row.remark)+"\n                ")]):r("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:t.row.remark,callback:function(i){e.$set(t.row,"remark",i)},expression:"scope.row.remark"}})],1)]}}],null,!1,559762274)})]],2):e._e()],1)],1):e._e(),r("set-section",{ref:"setSection",on:{change:e.changeSection}}),r("relevance-agency",{ref:"relevanceAgency",attrs:{"select-card":e.selectCard,"is-add-form":e.showAddForm,"is-edit":e.isEdit,"is-view":e.isView,edition:!e.edition,"modal-title":e.formLabel},on:{save:e.saveAgency}}),r("agent-price",{ref:"AgentPrice",on:{close:e.closeAgentPrice}}),r("transition",{attrs:{name:"el-fade-in-linear"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showAgentPriceModel&&e.showAddForm&&"0"===e.custType&&e.$checkPermission(["kapaiOfferQuotation"]),expression:"showAgentPriceModel && showAddForm && custType === '0' && $checkPermission(['kapaiOfferQuotation'])"},{name:"drag",rawName:"v-drag"}],staticClass:"agent-price"},[r("el-tooltip",{attrs:{effect:"dark",content:"供应商报价",placement:"top"}},[r("i",{staticClass:"icon-price",on:{click:e.showAgentPrice}})])],1)]),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"}],staticClass:"contextmenu",style:{left:e.menuLeft+"px",top:e.menuTop+"px"}},[r("li",{directives:[{name:"permission",rawName:"v-permission",value:["kapaiOfferCopy"],expression:"['kapaiOfferCopy']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.onSelectCard(e.showMenuRow,!0)}}},[e._v("\n      复制\n    ")]),r("li",{directives:[{name:"permission",rawName:"v-permission",value:["kapaiOfferGet"],expression:"['kapaiOfferGet']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.onSelectCard(e.showMenuRow)}}},[e._v("\n      查看\n    ")]),1!==e.showMenuRow.auditing&&3!==e.showMenuRow.auditing||!e.$checkPermission(["kapaiOfferDel"])?e._e():r("li",{staticClass:"contextmenu-item",on:{click:function(t){return e.deleteRow(2)}}},[e._v("\n      删除\n    ")])])],1)},a=[],s=(i("8e6e"),i("456d"),i("55dd"),i("ac4d"),i("8a81"),i("75fc")),n=(i("7f7f"),i("bd86")),o=(i("7514"),i("ac6a"),i("96cf"),i("3b8d")),c=i("d225"),l=i("b0b4"),u=i("308d"),d=i("6bb5"),m=i("4e2b"),p=i("9ab4"),h=i("60a3"),f=i("9dba"),v=i("dcc4"),g=i("59c4"),y=i("5a0c"),b=i.n(y),w=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{visible:e.visible,"close-on-click-modal":!1,width:e.modelWidth},on:{close:e.dialogClose}},[i("div",{attrs:{slot:"title"},slot:"title"},[i("p",[e._v("\n      "+e._s("设置区间-"+e.relevanceRow.name)+"\n    ")]),i("p",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v("\n      "+e._s(e.text)+"\n    ")])]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"100px"}},["1"===e.sectionType?i("div",e._l(e.form.sectionList,function(t,r){return i("el-form-item",{key:r,attrs:{label:0===r?"托数范围：":" ",prop:"sectionList."+r+".start"}},[i("div",{staticClass:"item-after-icon"},[i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?0:e.form.sectionList[r-1].end,max:0===r?9999:e.form.sectionList[r+1]?e.form.sectionList[r+1].start:9999,placeholder:"输入下限",controls:!1,"step-strictly":""},model:{value:t.start,callback:function(i){e.$set(t,"start",i)},expression:"section.start"}}),i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?t.start+1:e.form.sectionList[r].start+1,max:0===r?9999:e.form.sectionList[r+1]?e.form.sectionList[r+1].start:9999,placeholder:"输入上限",controls:!1,"step-strictly":""},model:{value:t.end,callback:function(i){e.$set(t,"end",i)},expression:"section.end"}}),i("i",0===r?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:function(t){return t.preventDefault(),e.addSection("sectionList")}}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(i){return i.preventDefault(),e.removeSection(t,r,"sectionList")}}})],1)])}),1):"3"===e.sectionType?i("div",e._l(e.form.mileageSectionList,function(t,r){return i("el-form-item",{key:r,attrs:{label:0===r?"里程范围：":" ",prop:"mileageSectionList."+r+".start"}},[i("div",{staticClass:"item-after-icon"},[i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?0:e.form.mileageSectionList[r-1].end,max:0===r?9999:e.form.mileageSectionList[r+1]?e.form.mileageSectionList[r+1].start:9999,placeholder:"输入下限",controls:!1,"step-strictly":""},model:{value:t.start,callback:function(i){e.$set(t,"start",i)},expression:"section.start"}}),i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?t.start+1:e.form.mileageSectionList[r].start+1,max:0===r?9999:e.form.mileageSectionList[r+1]?e.form.mileageSectionList[r+1].start:9999,placeholder:"输入上限",controls:!1,"step-strictly":""},model:{value:t.end,callback:function(i){e.$set(t,"end",i)},expression:"section.end"}}),i("i",0===r?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:function(t){return t.preventDefault(),e.addSection("mileageSectionList")}}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(i){return i.preventDefault(),e.removeSection(t,r,"mileageSectionList")}}})],1)])}),1):i("div",{staticClass:"section-wrap"},[i("div",{staticClass:"section"},e._l(e.form.weightSectionList,function(t,r){return i("el-form-item",{key:r,attrs:{label:0===r?"重量范围：":" ",prop:"weightSectionList."+r+".start"}},[i("div",{staticClass:"item-after-icon"},[i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?0:e.form.weightSectionList[r-1].end,max:0===r?9999:e.form.weightSectionList[r+1]?e.form.weightSectionList[r+1].start:9999,placeholder:"输入下限",controls:!1,"step-strictly":""},model:{value:t.start,callback:function(i){e.$set(t,"start",i)},expression:"section.start"}}),i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?t.start+1:e.form.weightSectionList[r].start+1,max:0===r?9999:e.form.weightSectionList[r+1]?e.form.weightSectionList[r+1].start:9999,placeholder:"输入上限",controls:!1,"step-strictly":""},model:{value:t.end,callback:function(i){e.$set(t,"end",i)},expression:"section.end"}}),i("i",0===r?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:function(t){return t.preventDefault(),e.addSection("weightSectionList")}}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(i){return i.preventDefault(),e.removeSection(t,r,"weightSectionList")}}})],1)])}),1),i("div",{staticClass:"section"},e._l(e.form.volumeSectionList,function(t,r){return i("el-form-item",{key:r,attrs:{label:0===r?"方数范围：":" ",prop:"volumeSectionList."+r+".start"}},[i("div",{staticClass:"item-after-icon"},[i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?0:e.form.volumeSectionList[r-1].end,max:0===r?9999:e.form.volumeSectionList[r+1]?e.form.volumeSectionList[r+1].start:9999,placeholder:"输入下限",controls:!1,"step-strictly":""},model:{value:t.start,callback:function(i){e.$set(t,"start",i)},expression:"section.start"}}),i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{"controls-position":"right",min:0===r?t.start+1:e.form.volumeSectionList[r].start+1,max:0===r?9999:e.form.volumeSectionList[r+1]?e.form.volumeSectionList[r+1].start:9999,placeholder:"输入上限",controls:!1,"step-strictly":""},model:{value:t.end,callback:function(i){e.$set(t,"end",i)},expression:"section.end"}}),i("i",0===r?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:function(t){return t.preventDefault(),e.addSection("volumeSectionList")}}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(i){return i.preventDefault(),e.removeSection(t,r,"volumeSectionList")}}})],1)])}),1)])]),i("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n        保 存\n      ")])],1)],1)])},x=[],k=i("31d4"),F=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.visible=!1,e.text="(取值范围：>=起始值， <结束值)",e.sectionType="",e.modelWidth="700px",e.isEdit=!1,e.relevanceRow={},e.form={sectionList:[{start:void 0,end:void 0}],mileageSectionList:[{start:void 0,end:void 0}],weightSectionList:[{start:void 0,end:void 0}],volumeSectionList:[{start:void 0,end:void 0}]},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"showModel",value:function(e,t){this.sectionType=t,this.modelWidth="2"===t?"960px":"700px",this.relevanceRow=e,this.visible=!0,this.viewRange()}},{key:"cancel",value:function(){this.dialogClose("0")}},{key:"viewRange",value:function(){var e=this;this.loading=!0;var t={id:this.relevanceRow.id,priceType:this.relevanceRow.priceType};"3"===this.sectionType&&(t.priceType="4"),Object(k["A"])(t).then(function(t){if(e.loading=!1,t.success){var i=t.data||{};i.rangeList&&i.rangeList.length?(e.isEdit=!0,"1"===e.sectionType&&(e.form.sectionList=i.rangeList.map(function(e){return{start:e.min,end:e.max}})),"2"===e.sectionType&&(e.form.weightSectionList=i.rangeList.filter(function(e){return"0"===e.type}).map(function(e){return{start:e.min,end:e.max}}),e.form.volumeSectionList=i.rangeList.filter(function(e){return"1"===e.type}).map(function(e){return{start:e.min,end:e.max}})),"3"===e.sectionType&&(e.form.mileageSectionList=i.rangeList.map(function(e){return{start:e.min,end:e.max}}))):e.isEdit=!1}}).catch(function(t){return e.isEdit=!1,e.loading=!1,t})}},{key:"removeSection",value:function(e,t,i){this.form[i]=this.form[i].filter(function(e,i){return i!==t})}},{key:"addSection",value:function(e){this.form[e]=[].concat(Object(s["a"])(this.form[e]),[{start:void 0,end:void 0}])}},{key:"dialogClose",value:function(e){this.form={sectionList:[{start:void 0,end:void 0}],mileageSectionList:[{start:void 0,end:void 0}],weightSectionList:[{start:void 0,end:void 0}],volumeSectionList:[{start:void 0,end:void 0}]},this.visible=!1,"1"===e&&this.$emit("change")}},{key:"checkout",value:function(e){for(var t=!0,i=0;i<e.length;i++)if(i>0){var r=e[i],a=e[i-1];if(r.start!==a.end){t=!1;break}}return t}},{key:"chechoutRequired",value:function(e){var t=!0,i=!0,r=!1,a=void 0;try{for(var s,n=e[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var o=s.value;if(0!==o.start&&!o.start||!o.end){t=!1;break}}}catch(c){r=!0,a=c}finally{try{i||null==n.return||n.return()}finally{if(r)throw a}}return t}},{key:"save",value:function(){var e=this,t=!0,i=!0,r=[],a=this.relevanceRow.priceType;if("1"===this.sectionType&&(t=this.checkout(this.form.sectionList),i=this.chechoutRequired(this.form.sectionList),r=this.form.sectionList.map(function(e){return{max:e.end,min:e.start}})),"2"===this.sectionType){t=!(!this.checkout(this.form.weightSectionList)||!this.checkout(this.form.volumeSectionList)),i=!(!this.chechoutRequired(this.form.weightSectionList)||!this.chechoutRequired(this.form.volumeSectionList));var s=this.form.weightSectionList.map(function(e){return{max:e.end,min:e.start,type:"0"}}),n=this.form.volumeSectionList.map(function(e){return{max:e.end,min:e.start,type:"1"}});r=s.concat(n)}if("3"===this.sectionType&&(a="4",t=this.checkout(this.form.mileageSectionList),i=this.chechoutRequired(this.form.mileageSectionList),r=this.form.mileageSectionList.map(function(e){return{max:e.end,min:e.start}})),i)if(t){var o={ifEdit:this.isEdit,kscId:this.relevanceRow.id,priceType:a,rangeList:r};this.loading=!1,Object(k["y"])(o).then(function(t){e.loading=!1,t.success&&(e.$message.success("操作成功"),e.dialogClose("1"))}).catch(function(t){return e.loading=!1,t})}else this.$message.warning("区间不能出现断层");else this.$message.warning("区间范围不能为空")}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}}]),t}(h["e"]);F=p["a"]([Object(h["a"])({name:"",components:{},props:{}})],F);var S=F,L=S,_=(i("a311"),i("2877")),I=Object(_["a"])(L,w,x,!1,null,"848e9e10",null),C=I.exports,T=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.modalTitle,visible:e.visible,"close-on-click-modal":!1,width:"960px"},on:{close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-transfer",{ref:"transferItem",staticClass:"transfer-agent",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.agentList},model:{value:e.relevanceList,callback:function(t){e.relevanceList=t},expression:"relevanceList"}}),(e.isAddForm&&!e.isEdit&&!e.isView||e.selectCard.id&&4===e.selectCard.auditing)&&e.edition?i("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n        保 存\n      ")])],1):e._e()],1)])},O=[],j=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.visible=!1,e.agentList=[],e.relevanceList=[],e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"getCustTypeList",value:function(e){var t=this;this.loading=!0,Object(g["j"])(e).then(function(e){var i=e.data||[];t.agentList=i.filter(function(e){return e}).map(function(e){return e.name=e.name||e.id,e}),!t.isEdit&&t.isView&&(t.agentList=t.agentList.map(function(e){return e.disabled=!1,-1!==t.relevanceList.indexOf(e.id)&&(e.disabled=!0),e})),t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"showModel",value:function(e,t,i){this.relevanceList=[],this.agentList=[],e.associatedAgents&&e.associatedAgents.length&&(this.relevanceList=e.associatedAgents),this.visible=!0;var r={toCustSubtype:t.toCustSubtype,toCustType:t.toCustType,subtypeId:e.subtypeId||"",typeId:"01"};this.getCustTypeList(r)}},{key:"cancel",value:function(){this.dialogClose()}},{key:"dialogClose",value:function(){this.relevanceList=[],this.visible=!1}},{key:"save",value:function(){0!==this.relevanceList.length?(this.$emit("save",this.relevanceList),this.dialogClose()):this.$message.warning("请选择关联的代理商/客户")}},{key:"filterMethod",value:function(e,t){var i=t.name||"";return i.indexOf(e)>-1}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}}]),t}(h["e"]);j=p["a"]([Object(h["a"])({name:"",components:{},props:{selectCard:{type:Object,default:function(){return{}}},isAddForm:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},edition:{type:Boolean,default:!1},modalTitle:{type:String,default:"关联代理商"}}})],j);var A=j,P=A,N=(i("abc7"),Object(_["a"])(P,T,O,!1,null,"391df971",null)),D=N.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("vxe-modal",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"show-zoom":"",resize:"","z-index":1314,"lock-view":!1,mask:!1,"lock-scroll":!1,width:"1100","min-width":"700",height:"500","min-height":"400"},on:{close:e.close},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"my-title",attrs:{slot:"title"},on:{click:function(e){return e.stopPropagation(),function(e){return e}(e)}},slot:"title"},[i("span",[e._v("供应商")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px","margin-right":"20px"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"请选择"},on:{change:e.selectAgentChange},model:{value:e.form.agent,callback:function(t){e.$set(e.form,"agent",t)},expression:"form.agent"}},e._l(e.agentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("span",[e._v("版本")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{clearable:"",filterable:"",disabled:!e.form.agent,size:"mini",placeholder:"请选择"},on:{change:e.showPrice},model:{value:e.form.edition,callback:function(t){e.$set(e.form,"edition",t)},expression:"form.edition"}},e._l(e.editionList,function(t){return i("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1),i("div",[e.aAxisData.length?i("vxe-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,border:"",resizable:"",size:"small","auto-resize":!0}},[i("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.label)+"\n        ")]}}],null,!1,2520297979)},[i("template",{slot:"header"},[i("span",{staticClass:"header-column"},[e._v("\n            "+e._s("4"===e.selectService.addressType?"里程":"目的地")+"\n          ")]),i("span",[e._v(" \\ ")]),"0"===e.selectService.priceType?i("span",[e._v("\n            车型\n          ")]):e._e(),"1"===e.selectService.priceType?i("span",[e._v("\n            托数\n          ")]):e._e(),"2"===e.selectService.priceType?i("span",[e._v("\n            重量&方数\n          ")]):e._e()])],2),"2"!==e.selectService.priceType?e._l(e.aAxisData,function(t,r){return i("vxe-table-column",{key:r,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(r){return["remark"!==t.value?i("div",[e._v("\n              "+e._s(r.row[t.value])+"\n            ")]):i("div",[e._v("\n              "+e._s(r.row.remark)+"\n            ")])]}}],null,!0)})}):[e._l(e.aAxisDataPlanar,function(t,r){return i("vxe-table-colgroup",{key:r,attrs:{title:0===r?" 重量":"方数",align:"center","show-overflow":!0}},e._l(t,function(t,r){return i("vxe-table-column",{key:r,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(r){return[i("div",[e._v("\n                "+e._s(r.row[t.value])+"\n              ")])]}}],null,!0)})}),1)}),i("vxe-table-column",{attrs:{title:"备注",align:"center","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e._v("\n              "+e._s(t.row.remark)+"\n            ")])]}}],null,!1,2295837747)})]],2):e._e()],1)])},$=[];function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function R(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var Y=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.visible=!1,e.isMinimize=!1,e.loading=!1,e.agentList=[],e.agentPriceList=[],e.aAxisData=[],e.tableData=[],e.aAxisDataPlanar=[],e.editionList=[],e.selectService={},e.dayjs=b.a,e.form={agent:"",edition:""},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"minimize",value:function(){this.isMinimize=!0,this.visible=!1,this.$emit("close")}},{key:"close",value:function(){this.isMinimize=!1,this.visible=!1,this.$emit("close")}},{key:"show",value:function(e){this.isMinimize||(this.selectService=e,this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[],this.agentList=[],this.agentPriceList=[],this.editionList=[],this.form={agent:"",edition:""},this.getAgentPriceList()),this.visible=!0}},{key:"getAgentPriceList",value:function(){var e=this,t={addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,kscId:this.selectService.id,kscName:this.selectService.name,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,country:{cityId:this.selectService.cityId,cityName:this.selectService.cityName,countryId:this.selectService.countryId,countryName:this.selectService.countryName,countyId:this.selectService.countyId,countyName:this.selectService.countyName,stateId:this.selectService.stateId,stateName:this.selectService.stateName}};this.loading=!0,Object(g["s"])(t).then(function(t){e.loading=!1,t.success&&t.data&&t.data.length&&(e.agentPriceList=t.data||[]),e.getAgentList()}).catch(function(t){return e.loading=!1,e.agentPriceList=[],e.agentList=[],t})}},{key:"getAxis",value:function(e){var t=this,i=JSON.parse(JSON.stringify(e));if(0===i.length)return{tableData:[],aAxisData:[],aAxisDataPlanar:[]};i=i.map(function(e){return e.pricelist.length&&(e.pricelist=e.pricelist.map(function(e){return{code:e.codex,max:e.maxx,min:e.minx,name:e.namex,price:e.price,type:e.type}})),{code:e.codey,max:e.maxy,min:e.miny,name:e.namey,pricelist:e.pricelist,remark:e.remark}});var r=i[0].pricelist.map(function(e,i){var r=R({value:"x"+i},e);return"0"===t.selectService.priceType?r.label=e.name:r.label=e.min+" - "+e.max,r}),a=[];"2"===this.selectService.priceType&&(a=[r.filter(function(e){return"0"===e.type}),r.filter(function(e){return"1"===e.type})]);var n=i.map(function(e){var i={label:"",remark:e.remark};return e.pricelist.forEach(function(e,t){i["x"+t]=e.price}),"4"===t.selectService.addressType?(i.label=e.min+" - "+e.max,i=Object.assign(i,R({},e))):(i.label=e.name,i=Object.assign(i,R({},e))),i});return r=[].concat(Object(s["a"])(r),[{label:"备注",value:"remark"}]),{tableData:n,aAxisData:r,aAxisDataPlanar:a}}},{key:"getAgentList",value:function(){var e=this.agentPriceList.map(function(e){return{name:e.fromCustName,id:e.fromCustId}});this.agentList=e.reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[])}},{key:"selectAgentChange",value:function(e){this.editionList=this.agentPriceList.filter(function(t){return t.fromCustId===e}),this.form.edition="",this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[]}},{key:"showPrice",value:function(e){this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[];var t=this.agentPriceList.find(function(t){return t.id===e});if(t){var i=t.excelModelList,r=this.getAxis(i);this.aAxisData=r.aAxisData,this.aAxisDataPlanar=r.aAxisDataPlanar,this.tableData=r.tableData}}}]),t}(h["e"]);Y=p["a"]([Object(h["a"])({name:"agentPrice"})],Y);var E=Y,V=E,q=(i("54ef"),Object(_["a"])(V,z,$,!1,null,"d0b8aea8",null)),B=q.exports;function H(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function Q(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?H(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):H(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var W=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.showMenuRow={},e.isShowMenu=!1,e.addNumber="",e.menuTop=0,e.menuLeft=0,e.showAgentPriceModel=!0,e.isShowPopover=!1,e.optionBtnNum=1,e.formLabel="关联代理商",e.edition="",e.selectCardId="",e.isActive=!0,e.selectLoading=!1,e.visible=!1,e.visible2=!1,e.visibleAudit=!1,e.loading=!1,e.showAddForm=!1,e.isView=!1,e.isEdit=!1,e.isEditRow=!1,e.loadingForm=!1,e.loadingTable=!1,e.searchForm={subtypeId:void 0,countryId:void 0,service:void 0,kscId:void 0,kscName:"",auditing:void 0,ifStandard:"0",priceType:"3",addressType:"5",times:[]},e.selectForm={countryId:void 0,countryName:"",cityName:"",cityId:"",stateId:"",stateName:"",redId:void 0,refStandardId:void 0,subtypeId:void 0,kscId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[],status:"4",floorPrice:0,note:""},e.formRules={refStandardId:[{required:!0,message:"请选择参考标准报价",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],kscId:[{required:!0,message:"请选择服务",trigger:"change"}],ifStandard:[{required:!0,message:"请选择价格标准",trigger:"change"}],associatedAgents:[{required:!0,message:"请选择关联代理商",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],toCustSubtype:[{required:!0,message:"请选择报价对象",trigger:"change"}],status:[{required:!0,message:"请选择通过/拒绝",trigger:"change"}],floorPrice:[{required:!0,message:"请输入单票最低收费",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.selectCard={},e.selectService={},e.dayjs=b.a,e.pagination={page:1,size:10,total:0},e.pickerOptions={disabledDate:function(e){return b()(e)<b()()}},e.refStandardList=[],e.currencyList=[],e.aAxisDataPlanar=[],e.aAxisData=[],e.tableData=[],e.typeList=[],e.countryList=[],e.stateList=[],e.cityList=[],e.searchServiceList=[],e.selectServiceList=[],e.priceList=[],e.custList=[],e.superiorPriceList=[],e.editionList=[],e.auditList=[{label:"待审核",value:1},{label:"审核中",value:2},{label:"已拒绝",value:3},{label:"已通过",value:4}],e.umDistanceList=[],e.umWeightList=[],e.umVolumeList=[],e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"onIsShowMenuChange",value:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},{key:"showBatchAddForm",value:function(){this.addNumber=void 0}},{key:"addNumberChange",value:function(e){var t=this;this.tableData.map(function(i,r,a){if(r%2!==0){var s=a[r-1];t.aAxisData.map(function(r){"remark"!==r.value&&(i[r.value]=0===e?void 0:parseFloat((s[r.value]+t.addNumber).toFixed(2)))})}}),this.aAxisDataPlanar=[this.aAxisData.filter(function(e){return"0"===e.type}),this.aAxisData.filter(function(e){return"1"===e.type})],0===e&&(this.addNumber=void 0)}},{key:"copyPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.edition){e.next=5;break}return e.next=3,this.viewHistoryPrice(this.edition,!0);case 3:e.next=7;break;case 5:return e.next=7,this.onSelectCard(this.selectCard,!0);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"invalidPrice",value:function(){var e=this;this.$confirm("该操作会使此报价及相关代理报价失效，请确认是否操作?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.selectCard.id},i=e.$loading({lock:!0,text:"",background:"hsla(0,0%,100%,.9)"});Object(g["q"])(t).then(function(){i.close(),e.resetSelect(),e.getPriceList()}).catch(function(){i.close()})}).catch(function(){return!1})}},{key:"showMenu",value:function(e,t){this.$checkPermission(["kapaiOfferDel","kapaiOfferGet","kapaiOfferCopy"])&&(this.showMenuRow=e,this.menuLeft=t.clientX,this.menuTop=t.clientY,this.isShowMenu=!0)}},{key:"closeMenu",value:function(){this.isShowMenu=!1}},{key:"closeAgentPrice",value:function(){this.showAgentPriceModel=!0}},{key:"showAgentPrice",value:function(){this.selectForm.kscId?(this.$refs.AgentPrice.show(this.selectService),this.showAgentPriceModel=!1):this.$message.warning("请选择服务")}},{key:"getChildren",value:function(e,t){var i=!1,r={},a=function t(a){Array.isArray(a)&&!i&&a.forEach(function(a){a.id===e?(r=a,i=!0):a.children&&t(a.children)})};return a(t),r}},{key:"refStandardChange",value:function(e){var t=this.refStandardList.find(function(t){return t.id===e});this.selectForm.times=[],t&&(this.selectForm.times=[b()(t.startTime).format("YYYY-MM-DD"),b()(t.endTime).format("YYYY-MM-DD")])}},{key:"ifStandardChange",value:function(){this.refStandardList=[],this.selectForm.times=[],this.selectForm.refStandardId=""}},{key:"getRefStandard",value:function(){var e=this,t=["subtypeId","kscId","toCustSubtype"];if(0===this.validateForm(t)){var i=this.getOfferObject();if(i.toCustType){var r=Q({},i,{addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,kscId:this.selectService.id,kscName:this.selectService.label,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,country:{cityId:this.selectService.cityId,cityName:this.selectService.cityName,countryId:this.selectService.countryId,countryName:this.selectService.countryName,countyId:this.selectService.countyId,countyName:this.selectService.countyName,stateId:this.selectService.stateId,stateName:this.selectService.stateName}});this.selectLoading=!0,Object(g["r"])(r).then(function(t){e.selectLoading=!1,t.success&&(e.refStandardList=t.data||[],e.refStandardList.length||e.$message.warning("暂无可参考的标准报价"))}).catch(function(t){e.selectLoading=!1})}}}},{key:"onSelectCard",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$checkPermission(["kapaiOfferGet","kapaiOfferCopy"])){e.next=2;break}return e.abrupt("return");case 2:return this.edition="",this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[],this.superiorPriceList=[],this.selectCard=Q({},t),this.selectCardId=t.id,this.selectForm.refId=t.refId||"",this.setTableData(t),this.showAddForm=!0,i?(this.isView=!1,this.isEdit=!1,this.isEditRow=!0,this.selectCardId="",this.selectCard.auditing=void 0,this.selectForm.refId=void 0,this.selectForm.refStandardId=void 0,this.selectForm.times=[],this.selectCard={}):(this.isView=!0,this.isEdit=!1,this.isEditRow=!1),this.loadingForm=!0,e.prev=14,e.next=17,this.getSubtypeList();case 17:return e.next=19,this.getStateList();case 19:return e.next=21,this.getCityList();case 21:return e.next=23,this.getServiceList("select");case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](14),this.loadingForm=!1;case 28:this.selectService=this.selectServiceList.find(function(e){return e.id===t.kscId})||{},t.refId?("2"===this.custType&&this.getSuperiorPrice(),this.getPriceById(t.refId).then(function(e){var i=[];e.excelModelList.forEach(function(e,r){e.isSuperiorPrice=!0,i.push(e),i.push(t.excelModelList[r])});var r=a.getAxisBySuperiorPriceAndView(i);a.aAxisData=r.aAxisData,a.aAxisDataPlanar=r.aAxisDataPlanar,a.tableData=r.tableData,a.loadingForm=!1}).catch(function(e){a.loadingForm=!1})):(r=this.getAxisBySuperiorPriceAndView(t.excelModelList),this.aAxisData=r.aAxisData,this.aAxisDataPlanar=r.aAxisDataPlanar,this.tableData=r.tableData,this.loadingForm=!1),"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice();case 31:case"end":return e.stop()}},e,this,[[14,25]])}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getPriceById",value:function(e){return new Promise(function(t,i){var r={id:e};Object(g["k"])(r).then(function(e){e.success?t(e.data||{}):i(e)}).catch(function(e){i(e)})})}},{key:"addPrice",value:function(){this.showAddForm=!0,this.optionBtnNum=1,this.selectCardId="",this.edition="",this.resetSelect()}},{key:"custSubtypeChange",value:function(){"3"===this.custType&&("1"===this.selectForm.toCustSubtype?this.formLabel="关联同行":this.formLabel="关联直客"),"0"===this.custType&&(this.formLabel="关联代理商"),"2"===this.custType&&("2"===this.selectForm.toCustSubtype?this.formLabel="关联代理商":"1"===this.selectForm.toCustSubtype?this.formLabel="关联同行":this.formLabel="关联直客")}},{key:"resetSelect",value:function(){var e=this;this.edition="",this.isView=!1,this.selectForm={countryId:void 0,countryName:"",cityName:"",stateName:"",refId:void 0,refStandardId:void 0,subtypeId:void 0,kscId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[],status:"4",note:""},this.selectService={},this.selectCard={},this.aAxisData=[],this.tableData=[],this.$nextTick(function(){var t=e.$refs.editForm;t&&t.clearValidate()})}},{key:"validateForm",value:function(e){var t=this.$refs.editForm,i=[];return t.validateField(e,function(e){e&&i.push(e)}),i.length}},{key:"onService",value:function(e,t){"search"===e?this.searchForm.kscName=(this.searchServiceList.find(function(e){return e.id===t})||{}).label:(this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[],t&&(this.selectService=this.selectServiceList.find(function(e){return e.id===t})||{},"2"!==this.custType&&this.getCarServeAxis(),"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice()))}},{key:"getSuperiorPrice",value:function(){var e=this,t=["subtypeId","kscId","toCustSubtype"];if(0===this.validateForm(t)){var i={addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,kscId:this.selectService.id,kscName:this.selectService.label,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,country:{cityId:this.selectService.cityId,cityName:this.selectService.cityName,countryId:this.selectService.countryId,countryName:this.selectService.countryName,countyId:this.selectService.countyId,countyName:this.selectService.countyName,stateId:this.selectService.stateId,stateName:this.selectService.stateName}};this.superiorPriceList=[],Object(g["s"])(i).then(function(t){e.loadingTable=!1,t.success&&t.data&&t.data.length?e.superiorPriceList=t.data||[]:e.$message.warning("暂无参考报价")}).catch(function(t){return e.loadingTable=!1,t})}}},{key:"subTypeChange",value:function(e){this.selectForm.kscId=void 0,this.selectService={},this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[]}},{key:"superiorPriceChange",value:function(e){var t=this,i=this.superiorPriceList.find(function(t){return t.id===e}),r=i.excelModelList.map(function(e,t){return e.isSuperiorPrice=!0,e}),a=this.getAxisBySuperiorPriceAndView(r);this.aAxisData=a.aAxisData,this.aAxisDataPlanar=a.aAxisDataPlanar;var s=[];a.tableData.forEach(function(e){if(s.push(e),!t.isView){var i={code:e.code,max:e.max,min:e.min,name:e.name,label:e.label,remark:""};e.pricelist.forEach(function(e,t){i["x"+t]=void 0}),s.push(i)}}),this.tableData=s}},{key:"getAxisBySuperiorPriceAndView",value:function(e){var t=this,i=JSON.parse(JSON.stringify(e));if(0===i.length)return{tableData:[],aAxisData:[],aAxisDataPlanar:[]};i=i.map(function(e){return e.pricelist.length&&(e.pricelist=e.pricelist.map(function(e){return{code:e.codex,max:e.maxx,min:e.minx,name:e.namex,price:e.price,type:e.type}})),{isSuperiorPrice:e.isSuperiorPrice||!1,code:e.codey,max:e.maxy,min:e.miny,name:e.namey,pricelist:e.pricelist,remark:e.remark}});var r=i[0].pricelist.map(function(e,i){var r=Q({value:"x"+i},e);return"0"===t.selectService.priceType?r.label=e.name:r.label=e.min+" - "+e.max,r}),a=[];"2"===this.selectService.priceType&&(a=[r.filter(function(e){return"0"===e.type}),r.filter(function(e){return"1"===e.type})]);var n=i.map(function(e){var i={label:"",remark:e.remark};return e.pricelist.forEach(function(e,t){i["x"+t]=e.price||void 0}),"4"===t.selectService.addressType?(i.label=e.min+" - "+e.max,i=Object.assign(i,Q({},e))):(i.label=e.name,i=Object.assign(i,Q({},e))),i});return r=[].concat(Object(s["a"])(r),[{label:"备注",value:"remark"}]),{tableData:n,aAxisData:r,aAxisDataPlanar:a}}},{key:"viewHistoryPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}this.loadingForm=!0,this.getPriceById(t).then(function(e){if(e.refId)r.getPriceById(e.refId).then(function(t){r.loadingForm=!1;var a=[];t.excelModelList.forEach(function(t,i){t.isSuperiorPrice=!0,a.push(t),a.push(e.excelModelList[i])});var s=r.getAxisBySuperiorPriceAndView(a);r.aAxisData=s.aAxisData,r.aAxisDataPlanar=s.aAxisDataPlanar,r.tableData=s.tableData,i?(r.edition="",r.isView=!1,r.isEdit=!1,r.isEditRow=!0,r.selectCardId="",r.selectCard.auditing=void 0,r.selectForm.refId=void 0,r.selectForm.refStandardId=void 0,r.selectForm.times=[],r.selectCard={}):(r.isView=!0,r.isEdit=!1,r.isEditRow=!1)}).catch(function(e){r.loadingForm=!1});else{r.loadingForm=!1;var t=r.getAxisBySuperiorPriceAndView(e.excelModelList);r.aAxisData=t.aAxisData,r.aAxisDataPlanar=t.aAxisDataPlanar,r.tableData=t.tableData,r.selectForm.times=[b()(e.startTime).format("YYYY-MM-DD"),b()(e.endTime).format("YYYY-MM-DD")],r.selectForm.associatedAgents=e.associatedAgents,i?(r.edition="",r.isView=!1,r.isEdit=!1,r.isEditRow=!0,r.selectCardId="",r.selectCard.auditing=void 0,r.selectForm.refId=void 0,r.selectForm.refStandardId=void 0,r.selectForm.times=[],r.selectCard={}):(r.isView=!0,r.isEdit=!1,r.isEditRow=!1)}}).catch(function(e){r.loadingForm=!1}),e.next=7;break;case 5:return e.next=7,this.onSelectCard(this.selectCard);case 7:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"showAuditModal",value:function(){var e=this,t=this.selectCard,i=t.auditing,r=t.reason;if(1===i){var a={id:this.selectCard.id,tag:2,reason:""};Object(g["b"])(a).then(function(t){e.priceList.map(function(t){t.id===e.selectCard.id&&(t.auditing=2,e.selectCard.auditing=2)})}).catch(function(e){return e})}else this.selectForm.status="4",this.selectForm.note=r}},{key:"auditPrice",value:function(){var e=this,t={},i=this.$refs.editForm,r=["status"];"3"===this.selectForm.status&&r.push("note");var a=[];i.validateField(r,function(e){e&&a.push(e)}),0===a.length&&(t={id:this.selectCard.id,tag:this.selectForm.status,reason:this.selectForm.note},this.visibleAudit=!1,this.loadingTable=!0,Object(g["b"])(t).then(function(i){e.loadingTable=!1,i.success&&(e.selectService={},e.selectCard={},e.selectForm={refId:void 0,refStandardId:void 0,subtypeId:void 0,kscId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[],status:"4",note:""},e.showAddForm=!1,e.isView=!1,e.isEditRow=!1,e.isEdit=!1,e.$message.success("操作成功"),e.getPriceList(t.id))}).catch(function(t){return e.loadingTable=!1,t}))}},{key:"getCarServeAxis",value:function(){var e=this,t={kscId:this.selectService.id};this.loadingTable=!0,Object(g["f"])(t).then(function(t){if(e.loadingTable=!1,t.success){var i=t.data||{};e.aAxisData=i.x.map(function(t,i){var r=Q({value:"x"+i},t);return"0"===e.selectService.priceType?r.label=t.name:r.label=t.min+" - "+t.max,r}),"2"===e.selectService.priceType&&(e.aAxisDataPlanar=[e.aAxisData.filter(function(e){return"0"===e.type}),e.aAxisData.filter(function(e){return"1"===e.type})]),e.tableData=i.y.map(function(t,i){var r={label:"",remark:""};return e.aAxisData.forEach(function(e){r[e.value]=void 0}),"4"===e.selectService.addressType?(r.label=t.min+" - "+t.max,r=Object.assign(r,Q({},t))):(r.label=t.name,r=Object.assign(r,Q({},t))),r}),e.aAxisData.length&&(e.aAxisData=[].concat(Object(s["a"])(e.aAxisData),[{label:"备注",value:"remark"}]))}}).catch(function(t){return e.loadingTable=!1,t})}},{key:"cancelEdit",value:function(){this.isView&&this.isEdit?(1===this.selectCard.auditing&&(this.optionBtnNum=3),3===this.selectCard.auditing&&(this.optionBtnNum=2),this.showAddForm=!0,this.isView=!0,this.isEdit=!1,this.isEditRow=!1,this.selectForm.associatedAgents=this.selectCard.associatedAgents,this.selectForm.ifStandard=this.selectCard.ifStandard,this.selectForm.times=[b()(this.selectCard.startTime).format("YYYY-MM-DD"),b()(this.selectCard.endTime).format("YYYY-MM-DD")]):(this.showAddForm=!1,this.selectCard={},this.selectCardId="",this.edition="")}},{key:"saveRow",value:function(){var e=["subtypeId","kscId","floorPrice","ifStandard","times","refStandardId"];if(this.isEdit||this.selectForm.ifStandard||this.refStandardList.length){if(this.selectForm.ifStandard||e.push("associatedAgents"),"2"===this.custType&&e.push("toCustSubtype"),0===this.validateForm(e)&&this.validate()){var t=this.getParams();this.isEdit?(t.id=this.selectCard.id,t.fromCustId=this.selectCard.fromCustId,t.fromCustName=this.selectCard.fromCustName,t.fromCustSubtype=this.selectCard.fromCustSubtype,t.fromCustType=this.selectCard.fromCustType,this.savePriceByEdit(t)):this.savePriceByAdd(t)}}else this.$message.warning("操作失败，暂无可参考的标准报价")}},{key:"getParams",value:function(){var e=this,t=this.getOfferObject(),i=Q({},t,{addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,associatedAgents:this.selectForm.associatedAgents,currencyId:this.selectService.currencyId,endTime:this.selectForm.times[1]+" 23:59:59",startTime:this.selectForm.times[0]+" 00:00:00",ifStandard:this.selectForm.ifStandard,floorPrice:this.selectForm.floorPrice,refStandard:this.selectForm.ifStandard?"":this.selectForm.refStandardId,kscId:this.selectService.id,kscName:this.selectService.label,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,country:{cityId:this.selectService.cityId,cityName:this.selectService.cityName,countryId:this.selectService.countryId,countryName:this.selectService.countryName,countyId:this.selectService.countyId,countyName:this.selectService.countyName,stateId:this.selectService.stateId,stateName:this.selectService.stateName},refId:this.selectForm.refId,excelModelList:[]});return this.tableData.forEach(function(t){if(!t.isSuperiorPrice){var r={codey:t.code,maxy:t.max,miny:t.min,namey:t.name,remark:t.remark,pricelist:[]};e.aAxisData.forEach(function(e){if("remark"!==e.value){var i={type:e.type,codex:e.code,maxx:e.max,minx:e.min,namex:e.name,price:t[e.value]};r.pricelist.push(i)}}),i.excelModelList.push(r)}}),i}},{key:"savePriceByAdd",value:function(e){var t=this;this.loadingForm=!0,Object(g["a"])(e).then(function(e){t.loadingForm=!1,t.isView=!0,t.isEdit=!1,t.isEditRow=!1,e.success&&(t.$message.success("保存成功"),t.refStandardList=[],t.getPriceList(e.data.id))}).catch(function(e){return t.loadingForm=!1,e})}},{key:"savePriceByEdit",value:function(e){var t=this;this.loadingForm=!0,Object(g["d"])(e).then(function(i){t.loadingForm=!1,t.isView=!0,t.isEdit=!1,t.isEditRow=!1,i.success&&(t.$message.success("保存成功"),t.refStandardList=[],t.getPriceList(e.id))}).catch(function(e){return t.loadingForm=!1,e})}},{key:"editRow",value:function(){this.optionBtnNum=3,this.isEdit=!0,this.isEditRow=!0,this.setTableData(this.selectCard)}},{key:"setTableData",value:function(e){var t=this;this.$nextTick(function(){var e=t.$refs.editForm;e&&e.clearValidate()}),this.selectForm.floorPrice=e.floorPrice,this.selectForm.toCustSubtype=e.toCustSubtype,this.selectForm.toCustType=e.toCustType,this.selectForm.subtypeId=e.subtypeId,this.selectForm.countryId=e.country.countryId,this.selectForm.countryName=e.country.countryName,this.selectForm.cityName=e.country.cityName,this.selectForm.stateName=e.country.stateName,this.selectForm.stateId=e.country.stateId,this.selectForm.cityId=e.country.cityId,this.selectForm.associatedAgents=e.associatedAgents,this.selectForm.kscId=e.kscId,this.selectForm.ifStandard=e.ifStandard,this.selectForm.refStandardId=e.refStandard,this.selectForm.times=[b()(e.startTime).format("YYYY-MM-DD"),b()(e.endTime).format("YYYY-MM-DD")]}},{key:"deleteRow",value:function(e){var t=this,i={id:1===e?this.selectCard.id:this.showMenuRow.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loadingTable=!0,Object(g["c"])(i).then(function(e){t.loadingTable=!1,t.selectService={},t.selectCard={},t.selectForm={refId:void 0,refStandardId:void 0,subtypeId:void 0,kscId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[],status:"4",note:""},t.showAddForm=!1,t.isView=!1,t.isEditRow=!1,t.isEdit=!1,t.$message.success("删除成功"),t.getPriceList();var i=t.$refs.AgentPrice;i.close()}).catch(function(e){return t.loadingTable=!1,e})}).catch(function(){return!1})}},{key:"handleRelevance",value:function(e){var t=this.$refs.setSection;t.showModel(this.selectService,e)}},{key:"changeSection",value:function(){this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[],this.getCarServeAxis()}},{key:"showAgencyModel",value:function(){var e=this.getOfferObject();if(this.selectForm.subtypeId){var t=this.$refs.relevanceAgency;e.toCustType&&t.showModel(this.selectForm,e)}else this.$message.warning("请选择业务类型")}},{key:"getEditionList",value:function(){var e=this,t={id:this.selectCard.id};this.editionList=[],this.selectLoading=!0,Object(g["l"])(t).then(function(t){e.selectLoading=!1,t.success&&(e.editionList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getOfferObject",value:function(){var e="",t="";if("2"===this.custType){var i=["toCustSubtype"];if(0!==this.validateForm(i))return this.$message.warning("请选择报价对象"),{toCustSubtype:e,toCustType:t}}if("3"===this.custType)if("-1"===this.selectForm.toCustSubtype)t="0";else{var r=["toCustSubtype"];if(0!==this.validateForm(r))return this.$message.warning("请选择报价对象"),{toCustSubtype:e,toCustType:t};t="1",e=this.selectForm.toCustSubtype}return"0"===this.custType&&(t="2",e="1"),"2"===this.custType&&(t="2"===this.selectForm.toCustSubtype?"2":"1",e=this.selectForm.toCustSubtype),{toCustSubtype:e,toCustType:t}}},{key:"validate",value:function(){var e=!1;if(0===this.tableData.length||0===this.aAxisData.length)return this.$message.warning("暂无参考报价"),e=!1,e;var t=!0,i=!1,r=void 0;try{for(var a,s=this.tableData[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var n=a.value,o=!1,c=!0,l=!1,u=void 0;try{for(var d,m=this.aAxisData[Symbol.iterator]();!(c=(d=m.next()).done);c=!0){var p=d.value;if(n[p.value]){o=!0;break}}}catch(h){l=!0,u=h}finally{try{c||null==m.return||m.return()}finally{if(l)throw u}}if(o){e=o;break}}}catch(h){i=!0,r=h}finally{try{t||null==s.return||s.return()}finally{if(i)throw r}}return e||this.$message.warning("请填写区间报价"),e}},{key:"getServiceList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={page:1,size:9999,model:{}},"search"===t?(i.model.subtypeId=this.searchForm.subtypeId,i.model.countryId=this.searchForm.countryId):(i.model.subtypeId=this.selectForm.subtypeId,i.model.countryId=this.selectForm.countryId,i.model.stateId=this.selectForm.stateId,i.model.cityId=this.selectForm.cityId,this.selectServiceList=[]),this.selectLoading=!0,e.next=5,Object(g["g"])(i).then(function(e){if(r.selectLoading=!1,e.success){var i=e.data||{},a=i.result||[];"search"===t?r.searchServiceList=a.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}):r.isEdit?r.selectServiceList=a.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}):r.selectServiceList=a.filter(function(e){return"1"===e.status}).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}}).catch(function(e){return r.selectLoading=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSubtypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(g["n"])({typeId:"01"}).then(function(e){t.selectLoading=!1,e.success&&(t.typeList=e.data||[])}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(g["i"])().then(function(t){if(e.selectLoading=!1,t.success){var i=t.data||{};e.countryList=i.result||[]}}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(g["o"])(this.selectForm.countryId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.stateList=r}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(g["h"])(this.selectForm.stateId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.cityList=r}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this.countryList.find(function(e){return e.id===t})||{},this.selectForm.countryName=i.name,this.selectForm.stateId="",this.selectForm.cityId="",this.selectForm.stateName="",this.selectForm.cityName="";case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(e){var t=this.stateList.find(function(t){return t.id===e})||{};this.selectForm.stateName=t.name,this.selectForm.cityId="",this.selectForm.cityName=""}},{key:"onCityChange",value:function(e){var t=this.cityList.find(function(t){return t.id===e})||{};this.selectForm.cityName=t.name}},{key:"countryChange",value:function(e){this.searchForm.kscId=void 0,this.searchForm.kscName=""}},{key:"saveAgency",value:function(e){if(this.selectForm.associatedAgents=e,"2"!==this.selectCard.auditing&&this.isView){var t=this.getParams();t.id=this.selectCard.id,t.fromCustId=this.selectCard.fromCustId,t.fromCustName=this.selectCard.fromCustName,t.fromCustSubtype=this.selectCard.fromCustSubtype,t.fromCustType=this.selectCard.fromCustType,t.auditing=this.selectCard.auditing,t.effective=this.selectCard.effective,this.savePriceByEdit(t)}}},{key:"getPriceList",value:function(e){var t=this;this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.showAddForm=!1;var i={model:{subtypeId:this.searchForm.subtypeId,kscId:this.searchForm.kscId,ifStandard:"0"===this.searchForm.ifStandard?"":this.searchForm.ifStandard,auditing:this.searchForm.auditing,addressType:"5"===this.searchForm.addressType?"":this.searchForm.addressType,priceType:"3"===this.searchForm.priceType?"":this.searchForm.priceType,startTime:this.searchForm.times[0]?this.searchForm.times[0]+" 00:00:00":"",endTime:this.searchForm.times[1]?this.searchForm.times[1]+" 23:59:59":""},page:this.pagination.page,size:this.pagination.size};this.selectCard={},this.selectCardId="",this.loading=!0,Object(g["m"])(i).then(function(){var i=Object(o["a"])(regeneratorRuntime.mark(function i(r){var a,s,n,o;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(t.loading=!1,!r.success){i.next=15;break}if(a=r.data||{},s=a.result||[],t.priceList=s.map(function(e){return 2===e.effective&&(e.status="1"),1===e.effective&&(e.status="2"),9===e.effective&&(e.status="3"),e}).sort(function(e,t){return 1*e.status-1*t.status}),t.pagination.total=a.total||0,!e){i.next=13;break}if(n=t.priceList.find(function(t){return t.id===e}),!n){i.next=11;break}return i.next=11,t.onSelectCard(n);case 11:i.next=15;break;case 13:o=t.$refs.AgentPrice,o.close();case 15:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.loading=!1,e})}},{key:"hidePopover",value:function(){this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.isShowPopover=!1}},{key:"showPopover",value:function(e){"1"===e?this.visible=!0:this.visible2=!0}},{key:"clearForm",value:function(e){"1"===e?(this.searchForm.countryId=void 0,this.searchForm.kscId=void 0,this.searchForm.kscName=""):(this.searchForm.times=[],this.searchForm.addressType="5",this.searchForm.priceType="3",this.searchForm.ifStandard="0"),this.getPriceList()}},{key:"formatTag",value:function(e,t){var i="",r="",a=(this.typeList.find(function(t){return t.id===e.subtypeId})||{}).name;switch(e.priceType){case"0":i="车型";break;case"1":i="托数";break;case"2":i="重量&方数";break;default:i=""}switch(e.addressType){case"0":r="机场";break;case"1":r="港口";break;case"2":r="火车站";break;case"3":r="海外仓";break;case"4":r="里程";break;default:r=""}return"1"===t?r?e.addressName+" - "+r:e.addressName:"".concat(a," - ").concat(i)}},{key:"currentChange",value:function(e){this.pagination.page=e,this.getPriceList()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"tableRowClassName",value:function(e){return e.row.isSuperiorPrice?"success-row":""}},{key:"formattCurrency",value:function(e){var t=this.currencyList.find(function(t){return t.id===e});return t?"".concat(t.name,"(").concat(t.sign,")"):"--"}},{key:"formattUnit",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label," - ").concat(i.value):"--"}},{key:"geCurrencyList",value:function(){var e=this,t={page:1,size:999};Object(g["e"])(t).then(function(t){var i=t.data||{};e.currencyList=i.result||[]}).catch(function(e){return e})}},{key:"getUmDistanceList",value:function(){var e=this;this.selectLoading=!0,Object(v["n"])({type:"DISTANCE_TYPE"}).then(function(t){e.selectLoading=!1,t.success&&(e.umDistanceList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getUmWeightList",value:function(){var e=this;this.selectLoading=!0,Object(v["n"])({type:"weight_type"}).then(function(t){e.selectLoading=!1,t.success&&(e.umWeightList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getUmVolumeList",value:function(){var e=this;this.selectLoading=!0,Object(v["n"])({type:"VOLUME_TYPE"}).then(function(t){e.selectLoading=!1,t.success&&(e.umVolumeList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCustId",value:function(){var e=this.custSubtype;if("3"===this.custType&&(this.custList=[{name:"聚货通",id:"-1"},{name:"直客",id:"0"},{name:"同行",id:"1"}]),"0"===this.custType&&(this.custList=[]),"2"===this.custType)switch(e){case"1":this.custList=[{name:"二级代理商",id:"2"},{name:"直客",id:"0"},{name:"同行",id:"1"}];break;case"2":this.custList=[{name:"直客",id:"0"},{name:"同行",id:"1"}];break;default:this.custList=[];break}}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.getCustId(),e.next=4,this.getSubtypeList();case 4:this.geCurrencyList(),this.getPriceList(),this.getUmDistanceList(),this.getUmWeightList(),this.getUmVolumeList(),this.getCountryList();case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}}]),t}(h["e"]);p["a"]([Object(h["f"])("isShowMenu")],W.prototype,"onIsShowMenuChange",null),W=p["a"]([Object(h["a"])({name:"",components:{setSection:C,relevanceAgency:D,AgentPrice:B},props:{}})],W);var U=W,X=U,G=(i("ed6a"),Object(_["a"])(X,r,a,!1,null,"3ef611d8",null));t["default"]=G.exports},"31d4":function(e,t,i){"use strict";i.d(t,"s",function(){return a}),i.d(t,"r",function(){return s}),i.d(t,"x",function(){return n}),i.d(t,"u",function(){return o}),i.d(t,"b",function(){return c}),i.d(t,"w",function(){return l}),i.d(t,"v",function(){return u}),i.d(t,"q",function(){return d}),i.d(t,"c",function(){return m}),i.d(t,"z",function(){return p}),i.d(t,"g",function(){return h}),i.d(t,"o",function(){return f}),i.d(t,"k",function(){return v}),i.d(t,"i",function(){return g}),i.d(t,"d",function(){return y}),i.d(t,"l",function(){return b}),i.d(t,"j",function(){return w}),i.d(t,"p",function(){return x}),i.d(t,"f",function(){return k}),i.d(t,"h",function(){return F}),i.d(t,"m",function(){return S}),i.d(t,"a",function(){return L}),i.d(t,"t",function(){return _}),i.d(t,"y",function(){return I}),i.d(t,"A",function(){return C}),i.d(t,"n",function(){return T}),i.d(t,"e",function(){return O});var r=i("b32d");function a(e){var t={url:"/cfg/ksc/getKscList",method:"post",data:e};return Object(r["a"])(t)}function s(e){var t={url:"/cfg/ksc/"+e.id,method:"get",params:e};return Object(r["a"])(t)}function n(e){var t={url:"/cfg/ksc/saveKsc",method:"post",data:e};return Object(r["a"])(t)}function o(e){var t={url:"/cfg/ksc/changeStatus",method:"post",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/cfg/ksc/deleteKsc",method:"delete",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/cfg/ksc/saveAgent",method:"post",data:e};return Object(r["a"])(t)}function u(e){var t={url:"/cfg/ksc/getAgentList",method:"get",params:e};return Object(r["a"])(t)}function d(e){var t={url:"/cfg/svcgroup/getSvcGroupList",method:"get",params:e};return Object(r["a"])(t)}function m(e){var t={url:"/cfg/svcgroup/deleteSvcGroup",method:"delete",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/cfg/svcgroup/saveSvcGroup",method:"post",data:e};return Object(r["a"])(t)}function h(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function f(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function v(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(r["a"])(t)}function y(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function b(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(r["a"])(t)}function w(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(r["a"])(t)}function x(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(r["a"])(t)}function k(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(r["a"])(t)}function F(e){var t={url:"/setting/area/getCountyByCity",method:"get",params:{cityId:e}};return Object(r["a"])(t)}function S(e){var t={url:"/cfg/ksc/destination/page",method:"post",data:e};return Object(r["a"])(t)}function L(e){var t={url:"/cfg/ksc/destination/add",method:"post",data:e};return Object(r["a"])(t)}function _(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(r["a"])(t)}function I(e){var t={url:"/cfg/ksc/range/save",method:"post",data:e};return Object(r["a"])(t)}function C(e){var t={url:"/cfg/ksc/range/get",method:"post",params:e};return Object(r["a"])(t)}function T(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(r["a"])(t)}function O(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(r["a"])(t)}},3408:function(e,t,i){},3831:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:12}},[e._v("\n          外协报价\n        ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["priceOutsourcAdd"],expression:"['priceOutsourcAdd']"}],attrs:{type:"text",size:"small"},on:{click:e.addPrice}},[e._v("\n            新增报价\n          ")])],1)],1),r("el-row",{staticStyle:{"padding-top":"10px"},attrs:{gutter:2}},[r("el-form",{staticClass:"search-form",attrs:{model:e.queryParams,size:"mini"}},[r("el-col",{attrs:{span:6}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"供应商"},on:{change:e.supplierChange},model:{value:e.queryParams.supplierId,callback:function(t){e.$set(e.queryParams,"supplierId",t)},expression:"queryParams.supplierId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",loading:e.selectLoading,placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:e.subtypeChange},model:{value:e.queryParams.subtypeId,callback:function(t){e.$set(e.queryParams,"subtypeId",t)},expression:"queryParams.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",loading:e.selectLoading,filterable:"",placeholder:"目的国"},on:{focus:e.getCountryList,change:e.countryChange},model:{value:e.queryParams.countryId,callback:function(t){e.$set(e.queryParams,"countryId",t)},expression:"queryParams.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),r("el-col",{attrs:{span:6}},[r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"交货区域","label-width":"90px"}},[r("div",[r("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n                        全选\n                      ")]),r("el-checkbox-group",{on:{change:e.handleChecked},model:{value:e.queryParams.deliveryArea,callback:function(t){e.$set(e.queryParams,"deliveryArea",t)},expression:"queryParams.deliveryArea"}},e._l(e.deliveryAreaList,function(t,i){return r("el-checkbox",{key:i,attrs:{label:t.id}},[e._v("\n                          "+e._s(t.name)+"\n                        ")])}),1)],1)]),r("el-form-item",{attrs:{label:"目的地类型","label-width":"90px"}},[r("el-radio-group",{on:{change:e.handlePurpose},model:{value:e.queryParams.purposeType,callback:function(t){e.$set(e.queryParams,"purposeType",t)},expression:"queryParams.purposeType"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                        全部\n                      ")]),r("el-radio-button",{attrs:{label:0}},[e._v("\n                        FBA\n                      ")]),r("el-radio-button",{attrs:{label:1}},[e._v("\n                        私人\n                      ")]),r("el-radio-button",{attrs:{label:2}},[e._v("\n                        自有海外仓\n                      ")])],1)],1),r("el-form-item",{attrs:{label:"目的港关税","label-width":"90px"}},[r("el-radio-group",{on:{change:e.handlerChange},model:{value:e.queryParams.includeTax,callback:function(t){e.$set(e.queryParams,"includeTax",t)},expression:"queryParams.includeTax"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                        全部\n                      ")]),r("el-radio-button",{attrs:{label:!0}},[e._v("\n                        包税\n                      ")]),r("el-radio-button",{attrs:{label:!1}},[e._v("\n                        不包税\n                      ")])],1)],1),r("el-form-item",{attrs:{label:"派送方式","label-width":"90px"}},[r("el-radio-group",{on:{change:e.handlerChange},model:{value:e.queryParams.dispatch,callback:function(t){e.$set(e.queryParams,"dispatch",t)},expression:"queryParams.dispatch"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                        全部\n                      ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                        卡派\n                      ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                        快递\n                      ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                        自提\n                      ")]),"1"===e.queryParams.subtypeId||"2"===e.queryParams.subtypeId?r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                        整柜直送\n                      ")]):e._e(),2===e.queryParams.purposeType?r("el-radio-button",{attrs:{label:"4"}},[e._v("\n                        到仓\n                      ")]):e._e()],1)],1),r("el-form-item",{attrs:{label:"审核状态","label-width":"90px"}},[r("el-select",{staticStyle:{width:"280px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.queryParams.audit,callback:function(t){e.$set(e.queryParams,"audit",t)},expression:"queryParams.audit"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"90px"}},[r("el-select",{staticStyle:{width:"280px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getPrivatelineList},model:{value:e.queryParams.lscId,callback:function(t){e.$set(e.queryParams,"lscId",t)},expression:"queryParams.lscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.queryParams.times,callback:function(t){e.$set(e.queryParams,"times",t)},expression:"queryParams.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleClear}},[e._v("\n                      清空\n                    ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("\n                      筛选\n                    ")])],1)],1),r("div",{staticClass:"el-select el-select--small",attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1)],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 280px)"}},[0===e.priceList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n          暂无报价\n        ")]):e._e(),e._l(e.priceList,function(t){return r("div",{key:t.id,staticClass:"price-card",class:{"active-card":e.showPriceId===t.id},on:{click:function(i){return e.showPrice(t.id,!1)},contextmenu:function(i){return i.preventDefault(),e.showMenu(t,i)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"待审核",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-zero"})]):e._e(),4===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已通过",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-one"})]):e._e(),3===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已拒绝",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-two"})]):e._e(),2===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"审核中",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-three"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n              "+e._s((t.lsc||{}).value)+"\n            ")])],1),r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:4}},[e._v("\n              交货区域\n            ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:20}},[e._v("\n              "+e._s((t.deliveries||[]).map(function(e){return e.value}).join("，"))+"\n            ")])],1),r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:4}},[e._v("\n              供应商\n            ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:20}},[e._v("\n              "+e._s(t.fromCustName)+"\n            ")])],1),"0"===e.userInfo.custType?r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:4}},[e._v("\n              所属公司\n            ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:20}},[e._v("\n              "+e._s(t.toCustName)+"\n            ")])],1):e._e(),r("el-row",{staticStyle:{"margin-top":"10px"}},[r("el-col",{attrs:{span:3}},[2===t.status?r("span",{staticClass:"btn-tip-green"},[e._v("\n                生效中\n              ")]):e._e(),1===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                待生效\n              ")]):e._e(),9===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                已失效\n              ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:21}},[e._v("\n              "+e._s(t.startTime+"-"+t.endTime)+"\n            ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                "+e._s((t.subtype||{}).value)+"\n              ")]),e._v(" \n              "),r("span",{staticClass:"border-tip-blue"},[e._v("\n                "+e._s(t.includeTax?"包税":"不包税")+"\n              ")]),e._v(" \n              "),r("span",{staticClass:"border-tip-blue"},["0"===t.dispatch?r("span",[e._v("\n                  卡派\n                ")]):e._e(),"1"===t.dispatch?r("span",[e._v("\n                  快递\n                ")]):e._e(),"2"===t.dispatch?r("span",[e._v("\n                  自提\n                ")]):e._e(),"3"===t.dispatch?r("span",[e._v("\n                  整柜直送\n                ")]):e._e()])])],1)],1)})],2),r("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{small:"","current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),r("price-form",{ref:"priceForm",attrs:{"delivery-area-list":e.deliveryAreaList},on:{cancel:e.cancelPriceForm,save:e.saveSuccess,delete:e.deletePriceSuccess}}),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"}],staticClass:"contextmenu",style:{left:e.menuLeft+"px",top:e.menuTop+"px"}},[r("li",{directives:[{name:"permission",rawName:"v-permission",value:["priceOutsourcCopy"],expression:"['priceOutsourcCopy']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.showPrice(e.showMenuRow.id,!0)}}},[e._v("\n      复制\n    ")]),r("li",{directives:[{name:"permission",rawName:"v-permission",value:["priceOutsourcView"],expression:"['priceOutsourcView']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.showPrice(e.showMenuRow.id,!1)}}},[e._v("\n      查看\n    ")]),[1,3].includes(e.showMenuRow.audit)&&e.$checkPermission(["priceOutsourcDel"])?r("li",{staticClass:"contextmenu-item",on:{click:e.deletePrice}},[e._v("\n      删除\n    ")]):e._e()])],1)},a=[],s=(i("7f7f"),i("c5f6"),i("d225")),n=i("b0b4"),o=i("308d"),c=i("6bb5"),l=i("4e2b"),u=i("9ab4"),d=i("60a3"),m=i("9dba"),p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"price-form"},[e.show?i("div",{staticClass:"price-form-content"},[i("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"mini",inline:!0,"label-width":"90px"}},[i("el-row",[i("el-col",{attrs:{span:20}},[i("el-form-item",{attrs:{label:"业务类型",prop:"subtypeId"}},[i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",clearable:"",filterable:"",disabled:"add"!==e.formType,loading:e.selectLoading,placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:e.subtypeChange},model:{value:e.form.subtypeId,callback:function(t){e.$set(e.form,"subtypeId",t)},expression:"form.subtypeId"}},e._l(e.typeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),i("el-form-item",{attrs:{prop:"lscId","label-width":"75px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v("服务")]),i("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.form.lscId,expression:"form.lscId"}],attrs:{slot:"label",content:e.form.lscName+"/"+e.form.lscCode,placement:"top",effect:"light"},slot:"label"},[i("i",{staticClass:"el-icon-warning-outline"})]),i("el-popover",{attrs:{placement:"bottom-start",trigger:"click"}},[i("el-row",{staticStyle:{width:"300px"}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"目的国","label-width":"90px"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",disabled:"add"!==e.formType,filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"派送方式","label-width":"90px"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",disabled:"add"!==e.formType,filterable:"",placeholder:"请选择"},model:{value:e.form.dispatch,callback:function(t){e.$set(e.form,"dispatch",t)},expression:"form.dispatch"}},[i("el-option",{attrs:{label:"卡派",value:"0"}}),i("el-option",{attrs:{label:"快递",value:"1"}}),i("el-option",{attrs:{label:"自提",value:"2"}}),"1"===e.form.subtypeId||"2"===e.form.subtypeId?i("el-option",{attrs:{label:"整柜直送",value:"3"}}):e._e(),i("el-option",{attrs:{label:"到仓",value:"4"}})],1)],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"目的港关税","label-width":"90px"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",disabled:"add"!==e.formType,filterable:"",placeholder:"请选择"},model:{value:e.form.includeTax,callback:function(t){e.$set(e.form,"includeTax",t)},expression:"form.includeTax"}},[i("el-option",{attrs:{label:"包税",value:!0}}),i("el-option",{attrs:{label:"不包税",value:!1}})],1)],1)],1),i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"服务","label-width":"90px"}},[i("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:!e.form.subtypeId||"add"!==e.formType,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getServiceList,change:e.serviceChange},model:{value:e.form.lscId,callback:function(t){e.$set(e.form,"lscId",t)},expression:"form.lscId"}},e._l(e.serviceList,function(e){return i("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1)],1),i("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[i("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.form.lscName,callback:function(t){e.$set(e.form,"lscName",t)},expression:"form.lscName"}})],1)],1)],1),i("el-form-item",{attrs:{label:"供应商",prop:"supplierId"}},[i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",clearable:"",loading:e.selectLoading,filterable:"",disabled:!(e.form.subtypeId&&e.form.lscId)||"add"!==e.formType,placeholder:"供应商"},on:{focus:e.getSupplierListByType},model:{value:e.form.supplierId,callback:function(t){e.$set(e.form,"supplierId",t)},expression:"form.supplierId"}},e._l(e.supplierList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"0"===e.userInfo.custType?i("el-form-item",{attrs:{label:"所属公司",prop:"agentId"}},[i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",clearable:"",filterable:"",disabled:"add"!==e.formType,loading:e.selectLoading,placeholder:"所属公司"},on:{focus:e.getAgentList,change:e.agentChange},model:{value:e.form.agentId,callback:function(t){e.$set(e.form,"agentId",t)},expression:"form.agentId"}},e._l(e.agentlist,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e()],1),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[["add","edit"].includes(e.formType)?i("div",[i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.cancel}},[e._v("\n              取消\n            ")]),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["priceOutsourcAdd","priceOutsourcEdit"],expression:"['priceOutsourcAdd', 'priceOutsourcEdit']"}],attrs:{type:"text",size:"small"},on:{click:e.savePrice}},[e._v("\n              保存\n            ")])],1):e._e(),"view"===e.formType?i("div",[i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.goBack}},[e._v("\n              返回\n            ")]),[1,3].includes(e.priceDetail.audit)&&e.$checkPermission(["priceOutsourcEdit"])?i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.edit}},[e._v("\n              编辑\n            ")]):e._e(),1===e.priceDetail.audit&&"view"===e.formType&&e.$checkPermission(["priceOutsourcAudit"])?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.audit(2)}}},[e._v("\n              审核\n            ")]):e._e(),[1,3].includes(e.priceDetail.audit)&&e.$checkPermission(["priceOutsourcDel"])?i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.deletePrice}},[e._v("\n              删除\n            ")]):e._e(),2===e.priceDetail.audit&&"view"===e.formType&&e.$checkPermission(["priceOutsourcAudit"])?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.audit(4)}}},[e._v("\n              审核通过\n            ")]):e._e(),2===e.priceDetail.audit&&"view"===e.formType&&e.$checkPermission(["priceOutsourcAudit"])?i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.audit(3)}}},[e._v("\n              审核拒绝\n            ")]):e._e(),i("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["priceOutsourcCopy"],expression:"['priceOutsourcCopy']"}],attrs:{type:"text",size:"small"},on:{click:e.copyPrice}},[e._v("\n              复制此版本\n            ")]),2===e.priceDetail.status&&"view"===e.formType&&e.$checkPermission(["priceOutsourcInvalid"])?i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.invalidPrice}},[e._v("\n              失效\n            ")]):e._e()],1):e._e()])],1),e.form.lscId?i("div",{staticClass:"service-info"},[i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("目的港：")]),i("span",{staticClass:"value"},[e._v(e._s(e.selectService.departureName))])]),"1"===e.selectService.subtypeId||"2"===e.selectService.subtypeId?i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("整柜/拼箱：")]),"1"===e.selectService.containerType?i("span",[e._v("\n            整柜\n          ")]):e._e(),"0"===e.selectService.containerType?i("span",[e._v("\n            拼箱\n          ")]):e._e()]):e._e(),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("目的港关税：")]),e.selectService.includeTax?i("span",[e._v("\n            包税\n          ")]):e._e(),e.selectService.includeTax?e._e():i("span",[e._v("\n            不包税\n          ")])]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("目的港派送方式：")]),"0"===e.selectService.dispatch?i("span",[e._v("\n            卡派\n          ")]):e._e(),"1"===e.selectService.dispatch?i("span",[e._v("\n            快递\n          ")]):e._e(),"2"===e.selectService.dispatch?i("span",[e._v("\n            自提\n          ")]):e._e(),"3"===e.selectService.dispatch?i("span",[e._v("\n            整柜直送\n          ")]):e._e(),"4"===e.selectService.dispatch?i("span",[e._v("\n            到仓\n          ")]):e._e()]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("重量单位：")]),"T"===e.selectService.umWeight?i("span",[e._v("\n            T-吨\n          ")]):e._e(),"LBS"===e.selectService.umWeight?i("span",[e._v("\n            LB-磅\n          ")]):e._e(),"KGS"===e.selectService.umWeight?i("span",[e._v("\n            KG-公斤\n          ")]):e._e(),"OZS"===e.selectService.umWeight?i("span",[e._v("\n            OZ-盎\n          ")]):e._e()]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("长度单位：")]),"FT"===e.selectService.umLength?i("span",[e._v("\n            FT-英尺\n          ")]):e._e(),"M"===e.selectService.umLength?i("span",[e._v("\n            M-米\n          ")]):e._e(),"CM"===e.selectService.umLength?i("span",[e._v("\n            CM-厘米\n          ")]):e._e()]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("体积单位：")]),"CBM"===e.selectService.umVolume?i("span",[e._v("\n            CBM-立方米\n          ")]):e._e(),"CBCM"===e.selectService.umVolume?i("span",[e._v("\n            CBCM-立方厘米\n          ")]):e._e()]),e.selectService.currencyId?i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("货币单位：")]),i("span",{staticClass:"value"},[e._v(e._s(e.selectService.currencyId+"-"+e.selectService.currencyName))])]):e._e(),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("计费方式：")]),"2"===e.selectService.priceType?i("span",[e._v("\n            按重量\n          ")]):e._e(),"3"===e.selectService.priceType?i("span",[e._v("\n            按体积\n          ")]):e._e(),"4"===e.selectService.priceType?i("span",[e._v("\n            按整柜\n          ")]):e._e()]),"0"===e.chargeForm.type?[i("div",{staticClass:"info-item"},[i("span",{directives:[{name:"show",rawName:"v-show",value:"0"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '0'"}]},[e._v("取实重")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"2"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '2'"}]},[e._v("取实重或体积重的平均值")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}]},[e._v("取实重或体积重的最大值")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}]},[e._v(" | ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm&&"0"===e.chargeForm.multiWeight,expression:"chargeForm.algorithm === '1' && chargeForm.multiWeight === '0'"}]},[e._v("先累加后比较")]),i("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm&&"1"===e.chargeForm.multiWeight,expression:"chargeForm.algorithm === '1' && chargeForm.multiWeight === '1'"}]},[e._v("先比较后累加")])]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("计量误差率(%)：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.deviation))])]),"1"===e.chargeForm.algorithm?i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("分泡比率(%)：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.bulky))])]):e._e(),"1"===e.chargeForm.algorithm?i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("分泡条件：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.fenestration))])]):e._e(),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("单箱重量：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.sbmc))])]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("单票重量：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.simc))])])]:e._e(),"1"===e.chargeForm.type?[i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("计量误差率(%)：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.deviation))])]),i("div",{staticClass:"info-item"},[i("span",{staticClass:"label"},[e._v("体积密度：")]),i("span",{staticClass:"value"},[e._v(e._s(e.chargeForm.density))])])]:e._e()],2):e._e(),i("el-row",[i("el-col",{attrs:{span:20}},[i("el-form-item",{attrs:{label:"交货区域",prop:"areaId"}},[i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",clearable:"",filterable:"",disabled:"view"===e.formType,multiple:"","collapse-tags":"",placeholder:"交货区域"},model:{value:e.form.areaId,callback:function(t){e.$set(e.form,"areaId",t)},expression:"form.areaId"}},e._l(e.deliveryAreaList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"4"!==e.selectService.priceType?i("el-form-item",{attrs:{prop:"measureId","label-width":"100px"}},[i("span",{attrs:{slot:"label"},slot:"label"},[e._v("计费配置")]),i("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.form.measureId,expression:"form.measureId"}],attrs:{slot:"label",content:e.form.measureName,placement:"top",effect:"light"},slot:"label"},[i("i",{staticClass:"el-icon-warning-outline"})]),i("el-select",{staticStyle:{width:"140px"},attrs:{size:"mini",loading:e.selectLoading,clearable:"",filterable:"",disabled:!e.form.agentId||!e.form.lscId||"view"===e.formType,placeholder:"计费配置"},on:{focus:e.getChargeList,change:e.chargeChange},model:{value:e.form.measureId,callback:function(t){e.$set(e.form,"measureId",t)},expression:"form.measureId"}},e._l(e.chargeList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),i("el-form-item",{attrs:{label:"有效时间",prop:"times"}},[i("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"],"unlink-panels":"",disabled:"view"===e.formType,type:"datetimerange",align:"left",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.form.times,callback:function(t){e.$set(e.form,"times",t)},expression:"form.times"}})],1)],1),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["view"===e.formType?i("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getHistoryList,change:e.historyChange},model:{value:e.historyPriceId,callback:function(t){e.historyPriceId=t},expression:"historyPriceId"}},e._l(e.historyList,function(e,t){return i("el-option",{key:t,attrs:{label:e.startTime+"-"+e.endTime,value:e.id}})}),1):e._e(),"view"!==e.formType&&e.aAxisData.length?i("el-popover",{attrs:{placement:"bottom",trigger:"click"},on:{show:e.onOpen,hide:e.onClose},model:{value:e.batchShow,callback:function(t){e.batchShow=t},expression:"batchShow"}},[i("div",{staticStyle:{padding:"0 20px 0 10px",width:"240px"}},[i("div",[e._v("请输入需要批量修改的值")]),i("el-input-number",{staticClass:"input-number-valiate",staticStyle:{margin:"13px 0 26px 0"},attrs:{controls:!1,placeholder:"请输入",precision:2,size:"mini"},on:{focus:function(e){e.stopPropagation()}},model:{value:e.batchNum,callback:function(t){e.batchNum=t},expression:"batchNum"}}),i("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{staticStyle:{color:"#FF6D00"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.batchConfirm(0)}}},[e._v("\n                  重置\n                ")]),i("div",{staticStyle:{"text-align":"right"}},[i("el-button",{staticStyle:{color:"#999999"},attrs:{type:"text",size:"mini"},on:{click:function(t){e.batchShow=!1}}},[e._v("\n                    取消\n                  ")]),i("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.batchConfirm(1)}}},[e._v("\n                    保存\n                  ")])],1)],1)],1),i("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              批量修改\n            ")])],1):e._e()],1)],1)],1),i("div",{staticStyle:{height:"calc(100vh - 355px)"}},[e.aAxisData.length?i("vxe-table",{ref:"priceTable",staticStyle:{width:"100%"},attrs:{border:"","row-key":"",height:"auto",data:e.tableData,size:"small","auto-resize":!0}},[i("vxe-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(){return[i("span",{staticClass:"drag-btn"},[i("i",{staticClass:"vxe-icon--menu"})])]},proxy:!0}],null,!1,3318083338)}),i("vxe-table-column",{attrs:{"show-overflow":!0,"show-header-overflow":!0,width:"200",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.value)+"\n          ")]}}],null,!1,1139140054)},[i("template",{slot:"header"},[i("span",{staticClass:"header-row"},[e._v(e._s(e.tableYTitle))]),i("span",[e._v("  \\  ")]),i("span",{staticClass:"header-column"},[e._v(e._s(e.tableXTitle))])])],2),e.isShowRegionalDetailCol?i("vxe-table-column",{attrs:{"show-overflow":!0,"show-header-overflow":!0,width:"200",resizable:!0,title:"区域详情",field:"regionalDetails"}}):e._e(),e._l(e.aAxisData,function(t,r){return i("vxe-table-column",{key:r,attrs:{title:t.label,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(r){return[i("div",[e.isEditRow?i("el-input-number",{staticClass:"input-number-valiate",attrs:{size:"small",controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:r.row[t.value],callback:function(i){e.$set(r.row,t.value,i)},expression:"scope.row[item.value]"}}):i("span",[e._v(e._s(r.row[t.value]))])],1)]}}],null,!0)})}),i("vxe-table-column",{attrs:{"min-width":"100",title:"参考时效(天)","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditRow?i("el-input",{attrs:{placeholder:"请填写例:1-2或1至2或1到2",size:"small"},model:{value:t.row.prescription,callback:function(i){e.$set(t.row,"prescription",i)},expression:"scope.row.prescription"}}):i("span",[e._v(e._s(t.row.prescription))])]}}],null,!1,2572513155)}),i("vxe-table-column",{attrs:{"min-width":"120",title:"备注","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditRow?i("el-input",{attrs:{placeholder:"请输入",maxlength:100,size:"small"},model:{value:t.row.remark,callback:function(i){e.$set(t.row,"remark",i)},expression:"scope.row.remark"}}):i("span",[e._v(e._s(t.row.remark))])]}}],null,!1,1288637396)})],2):e._e()],1)],1):e._e()])},h=[],f=(i("8e6e"),i("6762"),i("2fdb"),i("55dd"),i("456d"),i("28a5"),i("bd86")),v=(i("7514"),i("96cf"),i("3b8d")),g=(i("ac6a"),i("5a0c")),y=i.n(g),b=i("a8db"),w=i("b32d");function x(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function k(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?x(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):x(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function F(e){var t={url:"/auth/supplier/getSupplierList",method:"get",params:e};return Object(w["a"])(t)}function S(e){var t={url:"/auth/custtype/getcustlist",method:"post",data:e};return Object(w["a"])(t)}function L(e){var t={url:"/auth/agent/getAgentList",method:"get",params:e};return Object(w["a"])(t)}function _(e){var t={url:"/auth/custtype/getSubtypeByCustAndType",method:"get",params:e};return Object(w["a"])(t)}function I(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(w["a"])(t)}function C(e){var t={url:"/auth/custtype/countries",method:"get",params:e};return Object(w["a"])(t)}function T(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(w["a"])(e)}function O(){var e={url:"/cfg/lsc/getDeliveryCity",method:"get"};return Object(w["a"])(e)}function j(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(w["a"])(t)}function A(e){var t=e.page,i=e.size,r=Object(b["a"])(e,["page","size"]),a={url:"/cfg/lsc/getLscList",method:"post",data:{page:t,size:i,model:k({},r)}};return Object(w["a"])(a)}function P(e){var t={url:"/price/measure/getMeasureList",method:"get",params:e};return Object(w["a"])(t)}function N(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(w["a"])(t)}function D(e){var t={url:"setting/area_type/groupbypid",method:"post",data:e};return Object(w["a"])(t)}function z(e){var t={url:"/price/takeout/add",method:"post",data:e};return Object(w["a"])(t)}function $(e){var t={url:"/price/takeout/update",method:"post",data:e};return Object(w["a"])(t)}function M(e){var t={url:"/price/takeout/audit",method:"post",data:e};return Object(w["a"])(t)}function R(e){var t={url:"/price/takeout/page",method:"post",data:e};return Object(w["a"])(t)}function Y(e){var t={url:"/price/takeout/info",method:"get",params:e};return Object(w["a"])(t)}function E(e){var t={url:"/price/takeout/doExpire",method:"get",params:e};return Object(w["a"])(t)}function V(e){var t={url:"/price/takeout/history",method:"get",params:e};return Object(w["a"])(t)}function q(e){var t={url:"/price/takeout/delete",method:"delete",params:e};return Object(w["a"])(t)}var B=i("53fe"),H=i.n(B);function Q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function W(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Q(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Q(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var U=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.show=!1,e.batchShow=!1,e.formType="add",e.isEditRow=!0,e.loading=!1,e.selectLoading=!1,e.isShowRegionalDetailCol=!1,e.form={supplierId:"",subtypeId:"",lscId:"",lscName:"",lscCode:"",countryId:"",dispatch:"",includeTax:"",agentId:"",agentName:"",areaId:[],measureId:"",measureName:"",times:[]},e.rules={supplierId:[{required:!0,message:"请选择供应商",trigger:"change"}],agentId:[{required:!0,message:"请选择所属公司",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],areaId:[{required:!0,message:"请选择交货区域",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],measureId:[{required:!0,message:"请选择计费配置",trigger:"change"}],lscId:[{required:!0,message:"请选择服务",trigger:"change"}]},e.selectService={},e.chargeForm={},e.priceDetail={},e.showPriceId="",e.historyPriceId="",e.typeList=[],e.countryList=[],e.serviceList=[],e.supplierList=[],e.agentlist=[],e.chargeList=[],e.aAxisData=[],e.tableData=[],e.historyList=[],e.tableYTitle="",e.tableXTitle="",e.batchNum="",e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"onOpen",value:function(){this.batchNum=""}},{key:"onClose",value:function(){this.batchNum=""}},{key:"batchConfirm",value:function(e){var t=this;if(this.batchNum&&0!==this.batchNum){var i=0===e?-this.batchNum:this.batchNum;this.tableData=this.tableData.map(function(e){return t.aAxisData.forEach(function(t){e[t.value]=parseFloat(((e[t.value]||0)+i).toFixed(2))}),e})}else"add"===this.formType&&this.getPriceConfig(),"edit"===this.formType&&this.getPriceById(this.showPriceId,!1)}},{key:"historyChange",value:function(){this.formType="view",this.getPriceById(this.historyPriceId||this.showPriceId,!1)}},{key:"getHistoryList",value:function(){var e=this,t={id:this.showPriceId};this.historyList=[],this.selectLoading=!0,V(t).then(function(t){e.selectLoading=!1,e.historyList=t.data||[]}).catch(function(){e.selectLoading=!1})}},{key:"invalidPrice",value:function(){var e=this;this.$confirm("请确认是否失效该报价?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.priceDetail.id};E(t).then(function(t){e.$message.success("操作成功"),e.resetForm(),e.show=!1,e.$emit("delete")}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"deletePrice",value:function(){var e=this;this.$confirm("请确认是否删除该报价?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.priceDetail.id};q(t).then(function(t){e.$message.success("删除成功"),e.resetForm(),e.show=!1,e.$emit("delete")}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"audit",value:function(e){var t=this,i={audit:e,id:this.priceDetail.id};this.loading=!0,M(i).then(function(){t.loading=!1,t.$message.success("操作成功"),t.$emit("save",t.priceDetail.id)}).catch(function(){t.loading=!1})}},{key:"showForm",value:function(e,t){this.historyPriceId="",this.resetForm(),t?(this.formType="add",this.isEditRow=!0,this.showPriceId=""):(this.showPriceId=e,this.formType="view",this.isEditRow=!1),this.show=!0,this.getPriceById(e,t)}},{key:"getPriceById",value:function(e,t){var i=this;this.loading=!0;var r={id:e};Y(r).then(function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(r){var a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=r.data||{},i.getPriceRow(a),i.form={supplierId:a.fromCustId,subtypeId:(a.subtype||{}).key,lscId:(a.lsc||{}).key,lscName:(a.lsc||{}).value,lscCode:"",countryId:"",dispatch:"",includeTax:"",agentId:a.toCustId,agentName:a.toCustName,areaId:(a.deliveries||[]).map(function(e){return e.key}),measureId:(a.billing||{}).key,measureName:(a.billing||{}).value,times:[]},t||(i.priceDetail=a,i.form.times=[a.startTime,a.endTime]),"0"===i.userInfo.custType&&i.getAgentList(),i.getSubtypeList(),e.next=8,i.getServiceList();case 8:return s=i.serviceList.find(function(e){return e.id===i.form.lscId})||{},i.form.lscName=s.label||"",i.form.lscCode=s.lsId||"",i.form.includeTax=s.includeTax,i.form.dispatch=s.dispatch||"",i.selectService=s,e.next=16,i.getChargeList();case 16:i.chargeForm=i.chargeList.find(function(e){return e.id===i.form.measureId})||{},i.getSupplierListByType(),i.loading=!1;case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){i.loading=!1})}},{key:"getPriceRow",value:function(e){var t=e.ytype,i=e.xtype,r={0:"国家",1:"州省",5:"国内区域",7:"仓库代码",100:"城市区域",101:"仓库区域",102:"国家区域"},a={0:"重量区间",1:"体积区间",2:"柜型"};this.tableYTitle=r[t],this.tableXTitle=a[i];var s=e.rows||[],n=s[0]||{},o=n.prices||[];this.aAxisData=o.map(function(t,r){var a={label:"",value:"",xId:e.axisIdX,xtype:i};return"2"===i?(a.label=t.cellName,a.value=t.cellValue):(a.label="".concat(t.min,"-").concat(t.max),a.value="price_"+r),a});var c={ids:[]};"5"===t&&(c.type=1),this.tableData=s.map(function(r){-1===c.ids.indexOf(r.address.key)&&c.ids.push(r.address.key);var a=W({},r.address,{remark:r.remark,prescription:r.prescription,yType:t,yId:e.axisIdY}),s=r.prices||[];return s.forEach(function(e,t){"2"===i?a[e.cellValue]=e.price:a["price_"+t]=e.price}),a});var l=["5","100","101","102"];-1===l.indexOf(t)?(this.isShowRegionalDetailCol=!1,c=null):(this.isShowRegionalDetailCol=!0,this.groupByPid(c,t))}},{key:"edit",value:function(){this.formType="edit",this.isEditRow=!0,this.setSort()}},{key:"copyPrice",value:function(){this.formType="add",this.isEditRow=!0,this.getPriceById(this.historyPriceId||this.showPriceId,!0),this.showPriceId="",this.historyPriceId=""}},{key:"goBack",value:function(){this.resetForm(),this.showPriceId="",this.historyPriceId="",this.show=!1,this.$emit("cancel")}},{key:"cancel",value:function(){this.resetForm(),"add"===this.formType?(this.showPriceId="",this.historyPriceId="",this.show=!1,this.$emit("cancel")):(this.isEditRow=!1,this.formType="view",this.getPriceById(this.showPriceId,!1))}},{key:"resetForm",value:function(){var e=this;this.form={supplierId:"",subtypeId:"",lscId:"",lscName:"",lscCode:"",countryId:"",dispatch:"",includeTax:"",agentId:"",agentName:"",areaId:[],measureId:"",measureName:"",times:[]},this.selectService={},this.priceDetail={},this.chargeForm={},this.tableYTitle="",this.tableXTitle="",this.aAxisData=[],this.tableData=[],this.$nextTick(function(){var t=e.$refs.form;t&&t.clearValidate()})}},{key:"add",value:function(){this.formType="add",this.resetForm(),this.show=!0,this.isEditRow=!0,"2"===this.userInfo.custType&&(this.form.agentId=this.userInfo.custId,this.form.agentName=this.userInfo.custName)}},{key:"validatePriceRow",value:function(){var e=this,t=this.tableData.some(function(t){return e.aAxisData.some(function(e){return t[e.value]})});if(!t)return this.$message.warning("请至少填写一条报价"),!1;for(var i=/^\d+[-|至|到]\d+$/,r=function(r){var a=e.tableData[r];if(e.aAxisData.some(function(e){return a[e.value]})){if(!a.prescription)return e.$message.error("第"+(r+1)+"行参考时效不能为空，请填写如(1-2或1至2或1到2)"),t=!1,"break";if(!i.test(a.prescription))return e.$message.error("第"+(r+1)+"行参考时效格式不正确，请填写如(1-2或1至2或1到2)"),t=!1,"break"}},a=0;a<this.tableData.length;a++){var s=r(a);if("break"===s)break}return t}},{key:"savePrice",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(t&&e.validatePriceRow()){var i=e.supplierList.find(function(t){return t.id===e.form.supplierId})||{},r={fromCustType:"3",fromCustSubtype:"",fromCustId:e.form.supplierId,fromCustName:i.name},a={toCustType:"2",toCustSubtype:"1",toCustId:e.form.agentId,toCustName:e.form.agentName},s=W({},r,{},a,{subtype:{key:e.selectService.subtypeId,value:e.selectService.subtypeName},containerType:e.selectService.containerType,lsc:{key:e.selectService.id,value:e.selectService.name},umWeight:e.selectService.umWeight,umLength:e.selectService.umLength,umVolume:e.selectService.umVolume,currency:{key:e.selectService.currencyId,value:e.selectService.currencyName},purposeType:e.selectService.purposeType,dispatch:e.selectService.dispatch,includeTax:e.selectService.includeTax,priceType:e.selectService.priceType,deliveries:e.form.areaId.map(function(t){var i=e.deliveryAreaList.find(function(e){return e.id===t})||{};return{key:t,value:i.name}}),ytype:(e.tableData[0]||{}).yType,xtype:(e.aAxisData[0]||{}).xtype,axisIdY:(e.tableData[0]||{}).yId,axisIdX:(e.aAxisData[0]||{}).xId,rows:e.tableData.map(function(t){return{address:{key:t.key,value:t.value},prescription:t.prescription,remark:t.remark,prices:e.aAxisData.map(function(e){var i={cellName:"",cellValue:"",max:"",min:"",price:t[e.value]||""};return"2"===e.xtype?(i.cellName=e.label,i.cellValue=e.value):(i.max=e.label.split("-")[1],i.min=e.label.split("-")[0]),i})}}),billing:{key:e.form.measureId,value:e.form.measureName},startTime:y()(e.form.times[0]).format("YYYY-MM-DD HH:mm:ss"),endTime:y()(e.form.times[1]).format("YYYY-MM-DD HH:mm:ss")});e.loading=!0,"edit"===e.formType?(s.id=e.priceDetail.id,s.remark=e.priceDetail.remark,$(s).then(function(t){e.loading=!1,e.$message.success("操作成功"),e.$emit("save",e.priceDetail.id)}).catch(function(){e.loading=!1})):z(s).then(function(t){e.loading=!1,e.$message.success("操作成功"),e.$emit("save",t.data)}).catch(function(){e.loading=!1})}})}},{key:"setSort",value:function(){var e=this;this.aAxisData.length>0&&this.$nextTick(function(){var t=e.$refs.priceTable,i=t.$el,r=i.querySelector(".body--wrapper>.vxe-table--body tbody"),a=e;H.a.create(r,{handle:".drag-btn",animation:300,onEnd:function(e){var t=e.newIndex,i=e.oldIndex,r=a.tableData.splice(i,1)[0];a.tableData.splice(t,0,r)}})})}},{key:"groupByPid",value:function(e,t){var i=this;this.loading=!0,D(e).then(function(e){i.loading=!1;var r=e.data||{},a=Object.keys(r).map(function(e){var i={key:e+"",value:r[e].map(function(e){var i="";return"101"===t&&(i=e.warehouseName),"102"===t&&(i=e.countryId+"-"+e.countryName),"100"===t&&(i=e.cityName),"5"===t&&(i=e.stateName),i}).join("，")};return i});i.tableData=i.tableData.map(function(e){return a.forEach(function(t){t.key===e.key&&(e.regionalDetails=t.value)}),e})}).catch(function(){i.loading=!1})}},{key:"getPriceConfig",value:function(){var e=this,t={serviceId:this.form.lscId,serviceType:"05"};this.loading=!0,N(t).then(function(t){e.loading=!1;var i=t.data||[];if(0!==i.length){var r=i.find(function(e){return"X"===e.xy});if(r){var a=i.find(function(e){return"Y"===e.xy});if(a){var s=r.ranges||[],n=a.keyValues||[];if(0!==s.length&&0!==n){var o=a.yType||"",c={0:"国家",1:"州省",5:"国内区域",7:"仓库代码",100:"城市区域",101:"仓库区域",102:"国家区域"};e.tableYTitle=c[o];var l=r.loadType;e.aAxisData=s.map(function(t,i){var a="2"===l?t.keyValue:t.upperLower,s={label:"",value:"",xId:r.id,xtype:""};return"2"===l?(e.tableXTitle="柜型",s.label=(a||{}).value,s.value=(a||{}).key,s.xtype="2"):(e.tableXTitle="0"===t.type?"重量区间":"5"===l&&"1"===t.type?"方数区间":"体积区间",s.label="".concat((a||{}).lower,"-").concat((a||{}).upper),s.value="price_"+i,s.xtype="0"===t.type?"0":"1"),s}),e.tableData=n.map(function(t){var i=t.keyValue||{},r=W({},i,{remark:"",prescription:"",yId:a.id,yType:o});return e.aAxisData.forEach(function(e){r[e.value]=void 0}),r}).sort(function(e,t){return e.value.localeCompare(t.value)});var u=["5","100","101","102"];if(-1===u.indexOf(o))e.isShowRegionalDetailCol=!1;else{e.isShowRegionalDetailCol=!0;var d=n.reduce(function(e,t){var i=t.keyValue?t.keyValue.key:"";return i&&-1===e.indexOf(i)&&e.push(i),e},[]),m={ids:d};"5"===o&&(m.type=1),e.groupByPid(m,o)}e.setSort()}else e.$message.error("服务暂无报价配置")}else e.$message.error("服务暂无报价配置")}else e.$message.error("服务暂无报价配置")}else e.$message.error("服务暂无报价配置")}).catch(function(){e.loading=!1})}},{key:"serviceChange",value:function(){var e=this,t=this.serviceList.find(function(t){return t.id===e.form.lscId})||{};this.form.lscName=t.label||"",this.form.lscCode=t.lsId||"",this.form.includeTax=t.includeTax,this.form.dispatch=t.dispatch||"",this.selectService=t,this.form.supplierId="",this.form.measureId="",this.form.measureName="",this.chargeForm={},this.aAxisData=[],this.tableData=[],this.getPriceConfig()}},{key:"agentChange",value:function(){var e=this,t=this.agentlist.find(function(t){return t.id===e.form.agentId})||{};this.form.measureId="",this.form.measureName="",this.form.agentName=t.name,this.chargeForm={}}},{key:"subtypeChange",value:function(){this.form.lscId="",this.form.lscName="",this.form.lscCode="",this.form.supplierId="",this.form.measureId="",this.form.measureName="",this.form.dispatch="",this.selectService={},this.chargeForm={}}},{key:"chargeChange",value:function(){var e=this,t=this.chargeList.find(function(t){return t.id===e.form.measureId})||{};this.chargeForm=t,this.form.measureName=t.name}},{key:"getChargeList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.form.agentId){e.next=2;break}return e.abrupt("return");case 2:return t={agentId:this.form.agentId,type:"2"===this.selectService.priceType?"0":"3"===this.selectService.priceType?"1":void 0,subtypeId:this.selectService.subtypeId,page:1,size:9999},this.selectLoading=!0,e.next=6,P(t).then(function(e){var t=e.data||{};i.chargeList=t.result||[],i.selectLoading=!1}).catch(function(){i.selectLoading=!1,i.chargeList=[]});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAgentList",value:function(){var e=this,t={parentId:"0",subtype:"1",page:1,size:999};this.selectLoading=!0,L(t).then(function(t){e.selectLoading=!1;var i=t.data||{};e.agentlist=i.result||[]}).catch(function(){e.selectLoading=!1,e.agentlist=[]})}},{key:"getSupplierListByType",value:function(){var e=this,t=this.selectService.targets||[],i={cas:"S",countries:t.map(function(e){return e.countryId}),subtypes:this.form.subtypeId,types:"05"};this.selectLoading=!0,S(i).then(function(t){e.selectLoading=!1,e.supplierList=(t.data||[]).map(function(e){return W({},e,{id:e.custId,name:e.custName})})}).catch(function(){e.selectLoading=!1,e.supplierList=[]})}},{key:"getServiceList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:9999,countryId:this.form.countryId,subtypeId:this.form.subtypeId,includeTax:this.form.includeTax,dispatch:this.form.dispatch,outsourcing:"1,2"},["1","2"].includes(this.form.subtypeId)&&(t.containerType=0),this.selectLoading=!0,e.next=5,A(t).then(function(e){i.selectLoading=!1;var t=e.data||{};i.serviceList=(t.result||[]).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}).catch(function(){i.selectLoading=!1,i.serviceList=[]});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountryList",value:function(){var e=this;this.countryList=[],this.selectLoading=!0,T().then(function(t){e.selectLoading=!1;var i=t.data||{};e.countryList=i.result||[]}).catch(function(){e.selectLoading=!1,e.countryList=[]})}},{key:"getSubtypeList",value:function(){var e=this;this.typeList=[];var t={typeId:"05"};I(t).then(function(t){e.selectLoading=!1,e.typeList=t.data||[]}).catch(function(){e.selectLoading=!1,e.typeList=[]})}},{key:"userInfo",get:function(){return m["a"].info||{}}},{key:"pickerOptions",get:function(){return{disabledDate:function(e){return y()(e)<y()().subtract(1,"d")},selectableRange:"00:00:00 - 20:30:00"}}}]),t}(d["e"]);U=u["a"]([Object(d["a"])({name:"",components:{},props:{deliveryAreaList:{type:Array,default:function(){return[]}}}})],U);var X=U,G=X,J=(i("fd18"),i("2877")),K=Object(J["a"])(G,p,h,!1,null,"66a90ba6",null),Z=K.exports,ee=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isActive=!0,e.loading=!1,e.isShowMenu=!1,e.popoverShow=!1,e.checkAll=!1,e.isIndeterminate=!1,e.selectLoading=!1,e.queryParams={audit:"",supplierId:"",subtypeId:"",countryId:"",deliveryArea:[],includeTax:void 0,purposeType:void 0,dispatch:void 0,lscId:void 0,times:[]},e.pagination={page:1,size:10,total:0},e.showMenuRow={},e.priceList=[],e.supplierList=[],e.typeList=[],e.countryList=[],e.deliveryAreaList=[],e.serviceList=[],e.auditList=[{id:1,name:"待审核"},{id:2,name:"审核中"},{id:4,name:"已通过"},{id:3,name:"已拒绝"}],e.showPriceId="",e.menuLeft=0,e.menuTop=0,e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"onIsShowMenuChange",value:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},{key:"closeMenu",value:function(){this.isShowMenu=!1,this.showMenuRow={}}},{key:"deletePrice",value:function(){var e=this;this.$confirm("请确认是否删除该报价?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.showMenuRow.id};e.loading=!0,e.isShowMenu=!1,e.showMenuRow={},q(t).then(function(t){e.$message.success("删除成功"),e.loading=!1,e.getPriceList(1)}).catch(function(t){return e.loading=!1,t})}).catch(function(){return e.isShowMenu=!1,!1})}},{key:"showMenu",value:function(e,t){this.showMenuRow=e,this.menuLeft=t.clientX,this.menuTop=t.clientY,this.isShowMenu=!0}},{key:"deletePriceSuccess",value:function(){this.cancelPriceForm(),this.getPriceList(1)}},{key:"saveSuccess",value:function(e){this.getPriceList(),this.showPrice(e,!1)}},{key:"cancelPriceForm",value:function(){this.showPriceId=""}},{key:"showPrice",value:function(e,t){if(this.$checkPermission(["priceOutsourcView","priceOutsourcCopy"])){this.showPriceId=e,this.isShowMenu=!1,this.showMenuRow={};var i=this.$refs.priceForm;i.showForm(e,t)}}},{key:"addPrice",value:function(){this.showPriceId="";var e=this.$refs.priceForm;e.add()}},{key:"handlePurpose",value:function(){this.queryParams.dispatch=void 0}},{key:"handlerChange",value:function(){this.queryParams.lscId=""}},{key:"countryChange",value:function(){this.queryParams.lscId="",this.getPriceList(1)}},{key:"subtypeChange",value:function(){this.queryParams.lscId="",this.queryParams.dispatch=void 0,this.getPriceList(1)}},{key:"supplierChange",value:function(){this.queryParams.subtypeId="",this.queryParams.countryId="",this.getPriceList(1)}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.getPriceList()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.getPriceList()}},{key:"getPriceList",value:function(e){var t=this;1===e&&(this.pagination.page=1);var i={model:{supplierId:this.queryParams.supplierId,audit:this.queryParams.audit,deliveries:this.queryParams.deliveryArea,destinationCountry:this.queryParams.countryId,dispatch:this.queryParams.dispatch,endTime:"",includeTax:this.queryParams.includeTax,lscId:this.queryParams.lscId,purposeType:this.queryParams.purposeType,startTime:"",subtypeId:this.queryParams.subtypeId},page:this.pagination.page,size:this.pagination.size};this.queryParams.times.length&&(i.model.startTime=y()(this.queryParams.times[0]).format("YYYY:MM:DD HH:mm:ss"),i.model.endTime=y()(this.queryParams.times[1]).format("YYYY:MM:DD HH:mm:ss")),this.loading=!0,R(i).then(function(e){t.loading=!1;var i=e.data||{};t.priceList=i.result||[],t.pagination.total=i.total||0}).catch(function(){t.priceList=[],t.pagination.total=0,t.loading=!1})}},{key:"handleClear",value:function(){this.checkAll=!1,this.isIndeterminate=!1,this.queryParams.deliveryArea=[],this.queryParams.purposeType=void 0,this.queryParams.includeTax=void 0,this.queryParams.dispatch=void 0,this.queryParams.lscId=void 0,this.queryParams.audit="",this.queryParams.times=[],this.getPriceList(1)}},{key:"handleConfirm",value:function(){this.popoverShow=!1,this.getPriceList(1)}},{key:"getPrivatelineList",value:function(){var e=this,t={countryId:this.queryParams.countryId,subtypeId:this.queryParams.subtypeId,includeTax:this.queryParams.includeTax,dispatch:this.queryParams.dispatch,purposeType:this.queryParams.purposeType,outsourcing:"1,2"};this.selectLoading=!0,j(t).then(function(t){e.selectLoading=!1;var i=t.data||[];e.serviceList=i.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}).catch(function(){e.selectLoading=!1,e.serviceList=[]})}},{key:"handleCheckAll",value:function(e){this.isIndeterminate=!1,this.queryParams.deliveryArea=e?this.deliveryAreaList.map(function(e){return e.id}):[]}},{key:"handleChecked",value:function(e){var t=(e||[]).length,i=(this.deliveryAreaList||[]).length;this.checkAll=t===i,this.isIndeterminate=t>0&&t<i}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"getDeliveryCity",value:function(){var e=this;O().then(function(t){e.deliveryAreaList=t.data||[]}).catch(function(){e.deliveryAreaList=[]})}},{key:"getCountryList",value:function(){var e=this;this.countryList=[];var t={typeId:"05"},i=null;this.queryParams.supplierId?(t.custId=this.queryParams.supplierId,i=C,this.selectLoading=!0):(i=T,this.selectLoading=!0),i&&i(t).then(function(i){if(e.selectLoading=!1,t.custId)e.countryList=i.data||[];else{var r=i.data||{};e.countryList=r.result||[]}}).catch(function(){e.selectLoading=!1,e.countryList=[]})}},{key:"getSubtypeList",value:function(){var e=this;this.typeList=[];var t={typeId:"05"},i=null;this.queryParams.supplierId?(t.custId=this.queryParams.supplierId,i=_,this.selectLoading=!0):(i=I,this.selectLoading=!0),i&&i(t).then(function(t){e.selectLoading=!1,e.typeList=t.data||[]}).catch(function(){e.selectLoading=!1,e.typeList=[]})}},{key:"getSupplierList",value:function(){var e=this,t={page:1,size:999,parentId:0,types:"05"};F(t).then(function(t){var i=t.data||{};e.supplierList=i.result||[]}).catch(function(){e.supplierList=[]})}},{key:"created",value:function(){this.getPriceList(),this.getSupplierList(),this.getDeliveryCity()}},{key:"userInfo",get:function(){return m["a"].info||{}}}]),t}(d["e"]);u["a"]([Object(d["f"])("isShowMenu")],ee.prototype,"onIsShowMenuChange",null),ee=u["a"]([Object(d["a"])({name:"",components:{priceForm:Z},props:{}})],ee);var te=ee,ie=te,re=(i("94b6"),Object(J["a"])(ie,r,a,!1,null,"36adf410",null));t["default"]=re.exports},4773:function(e,t,i){},"479e":function(e,t,i){},"4f97":function(e,t,i){"use strict";var r=i("50d3"),a=i.n(r);a.a},"50d3":function(e,t,i){},"54ef":function(e,t,i){"use strict";var r=i("1ab7"),a=i.n(r);a.a},"55ae":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"关联海关【"+e.title+"】",visible:e.visible,width:"960px","close-on-click-modal":!1},on:{close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部海关","已关联海关"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.cabinetList},model:{value:e.selectCabinet,callback:function(t){e.selectCabinet=t},expression:"selectCabinet"}}),i("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.dialogClose}},[e._v("\n        取 消\n      ")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveCabinet}},[e._v("\n        确 定\n      ")])],1)],1)])},a=[],s=(i("96cf"),i("3b8d")),n=(i("7514"),i("7f7f"),i("ac6a"),i("d225")),o=i("b0b4"),c=i("308d"),l=i("6bb5"),u=i("4e2b"),d=i("9ab4"),m=i("60a3"),p=i("2094"),h=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.visible=!1,e.loading=!1,e.setCabinetData={},e.title="",e.selectCabinet=[],e.selectCabinetList=[],e.cabinetList=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"saveCabinet",value:function(){var e=this,t={delList:[],insList:[]};if(0===this.selectCabinetList.length)this.cabinetList.forEach(function(i){-1!==e.selectCabinet.indexOf(i.id)&&t.insList.push({customsId:i.id,customsName:i.name,cscId:e.setCabinetData.id})});else{var i=this.selectCabinetList.map(function(e){return e.customsId});i.forEach(function(i,r){-1===e.selectCabinet.indexOf(i)&&t.delList.push(e.selectCabinetList[r])}),this.selectCabinet.forEach(function(r,a){if(-1===i.indexOf(r)){var s=e.cabinetList.find(function(e){return e.id===r});t.insList.push({customsId:s.id,customsName:s.name,cscId:e.setCabinetData.id})}})}this.loading=!0,Object(p["n"])(t).then(function(t){e.loading=!1,t.success&&(e.$message.success("操作成功"),e.dialogClose())}).catch(function(t){return e.loading=!1,t})}},{key:"filterMethod",value:function(e,t){var i=t.name||"";return i.indexOf(e)>-1}},{key:"dialogClose",value:function(){this.selectCabinet=[],this.selectCabinetList=[],this.visible=!1,this.$emit("close")}},{key:"show",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,i){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.visible=!0,this.setCabinetData=t,this.title=i,this.loading=!0,e.next=6,this.getCabinetList();case 6:return e.next=8,this.getServiceCabinetList();case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getServiceCabinetList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={model:this.setCabinetData.id,page:1,size:99999},e.next=3,Object(p["h"])(t).then(function(e){if(e.success){var t=e.data||{};i.selectCabinetList=t.result||[],i.selectCabinet=i.selectCabinetList.map(function(e){return e.customsId})}}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCabinetList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={type:0,countryId:this.setCabinetData.countryId,page:1,size:99999},e.next=3,Object(p["c"])(t).then(function(e){if(e.success){var t=e.data||{};i.cabinetList=t.result||[]}}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["e"]);h=d["a"]([Object(m["a"])({name:"",components:{},props:{}})],h);var f=h,v=f,g=i("2877"),y=Object(g["a"])(v,r,a,!1,null,"8005b47c",null);t["a"]=y.exports},"59c4":function(e,t,i){"use strict";i.d(t,"i",function(){return a}),i.d(t,"o",function(){return s}),i.d(t,"h",function(){return n}),i.d(t,"n",function(){return o}),i.d(t,"e",function(){return c}),i.d(t,"j",function(){return l}),i.d(t,"g",function(){return u}),i.d(t,"f",function(){return d}),i.d(t,"m",function(){return m}),i.d(t,"p",function(){return p}),i.d(t,"a",function(){return h}),i.d(t,"d",function(){return f}),i.d(t,"c",function(){return v}),i.d(t,"s",function(){return g}),i.d(t,"r",function(){return y}),i.d(t,"b",function(){return b}),i.d(t,"l",function(){return w}),i.d(t,"k",function(){return x}),i.d(t,"q",function(){return k});var r=i("b32d");function a(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function s(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(r["a"])(t)}function n(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(r["a"])(t)}function o(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/auth/custtype/queryAgents",method:"post",data:e};return Object(r["a"])(t)}function u(e){var t={url:"/cfg/ksc/getKscList",method:"post",data:e};return Object(r["a"])(t)}function d(e){var t={url:"/cfg/ksc/axis",method:"post",params:e};return Object(r["a"])(t)}function m(e){var t={url:"/price/truck/page",method:"post",data:e};return Object(r["a"])(t)}function p(e){var t={url:"/price/truck/page1",method:"post",data:e};return Object(r["a"])(t)}function h(e){var t={url:"/price/truck/add",method:"post",data:e};return Object(r["a"])(t)}function f(e){var t={url:"/price/truck/update",method:"post",data:e};return Object(r["a"])(t)}function v(e){var t={url:"/price/truck/del",method:"delete",params:e};return Object(r["a"])(t)}function g(e){var t={url:"/price/truck/superior",method:"post",data:e};return Object(r["a"])(t)}function y(e){var t={url:"/price/truck/refStandard",method:"post",data:e};return Object(r["a"])(t)}function b(e){var t={url:"/price/truck/review",method:"post",data:e};return Object(r["a"])(t)}function w(e){var t={url:"/price/truck/history",method:"get",params:e};return Object(r["a"])(t)}function x(e){var t={url:"/price/truck/history/get",method:"get",params:e};return Object(r["a"])(t)}function k(e){var t={url:"/price/truck/doExpire",method:"get",params:e};return Object(r["a"])(t)}},"5b63":function(e,t,i){"use strict";i.d(t,"l",function(){return a}),i.d(t,"h",function(){return s}),i.d(t,"j",function(){return n}),i.d(t,"f",function(){return o}),i.d(t,"d",function(){return c}),i.d(t,"e",function(){return l}),i.d(t,"a",function(){return u}),i.d(t,"o",function(){return d}),i.d(t,"c",function(){return m}),i.d(t,"b",function(){return p}),i.d(t,"m",function(){return h}),i.d(t,"k",function(){return f}),i.d(t,"g",function(){return v}),i.d(t,"i",function(){return g}),i.d(t,"n",function(){return y});var r=i("b32d");function a(){var e={url:"/wms/warehouse/c",method:"get"};return Object(r["a"])(e)}function s(e){var t={url:"/price/warehouse/page",method:"post",data:e};return Object(r["a"])(t)}function n(e){var t={url:"/price/warehouse/page1",method:"post",data:e};return Object(r["a"])(t)}function o(e){var t={url:"/price/warehouse/history/get",method:"get",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/price/warehouse/superior",method:"post",data:e};return Object(r["a"])(t)}function l(e){var t={url:"/price/warehouse/history",method:"get",params:e};return Object(r["a"])(t)}function u(e){var t={url:"/price/warehouse/add",method:"post",data:e};return Object(r["a"])(t)}function d(e){var t={url:"/price/warehouse/update",method:"post",data:e};return Object(r["a"])(t)}function m(e){var t={url:"/price/warehouse/del",method:"delete",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/price/warehouse/review",method:"post",data:e};return Object(r["a"])(t)}function h(e){var t={url:"/wms/warehouse/server/cat",method:"get",params:e};return Object(r["a"])(t)}function f(e){var t={url:"/wms/warehouse/getWarehouse",method:"get",params:e};return Object(r["a"])(t)}function v(e){var t={url:"/finance/r/axis",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/price/warehouse/refStandard",method:"post",data:e};return Object(r["a"])(t)}function y(e){var t={url:"/price/warehouse/doExpire",method:"get",params:e};return Object(r["a"])(t)}},"615c":function(e,t,i){"use strict";i.d(t,"n",function(){return a}),i.d(t,"h",function(){return s}),i.d(t,"f",function(){return n}),i.d(t,"c",function(){return o}),i.d(t,"m",function(){return c}),i.d(t,"q",function(){return l}),i.d(t,"k",function(){return u}),i.d(t,"i",function(){return d}),i.d(t,"j",function(){return m}),i.d(t,"t",function(){return p}),i.d(t,"b",function(){return h}),i.d(t,"a",function(){return f}),i.d(t,"u",function(){return v}),i.d(t,"l",function(){return g}),i.d(t,"v",function(){return y}),i.d(t,"g",function(){return b}),i.d(t,"d",function(){return w}),i.d(t,"r",function(){return x}),i.d(t,"e",function(){return k}),i.d(t,"o",function(){return F}),i.d(t,"p",function(){return S}),i.d(t,"s",function(){return L});var r=i("b32d");function a(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function s(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function n(e){var t={url:"/cfg/bs/getBsList",method:"post",data:e};return Object(r["a"])(t)}function o(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/price/booking/getPriceBookList",method:"get",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/price/booking/page",method:"post",data:e};return Object(r["a"])(t)}function u(e){var t={url:"/price/booking/getPriceBook",method:"get",params:e};return Object(r["a"])(t)}function d(e){var t={url:"/price/booking/getEffectiveBook",method:"get",params:e};return Object(r["a"])(t)}function m(e){var t={url:"/price/booking/getHistory",method:"get",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/price/booking/savePriceBook",method:"post",data:e};return Object(r["a"])(t)}function h(e){var t={url:"/price/booking/deletePriceBook",method:"delete",params:e};return Object(r["a"])(t)}function f(e){var t={url:"/price/booking/audit",method:"post",data:e};return Object(r["a"])(t)}function v(e){var t={url:"/price/booking/addSpecialCust",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(r["a"])(t)}function y(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(r["a"])(t)}function b(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(r["a"])(t)}function w(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(r["a"])(t)}function x(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(r["a"])(t)}function k(e){var t={url:"/cfg/bs/getBsTransList",method:"post",data:e};return Object(r["a"])(t)}function F(e){var t={url:"/price/booking/getStandardPeriod",method:"get",params:e};return Object(r["a"])(t)}function S(e){var t={url:"/price/booking/supplier",method:"get",params:e};return Object(r["a"])(t)}function L(e){var t={url:"/price/booking/doExpire",method:"get",params:e};return Object(r["a"])(t)}},"641b":function(e,t,i){},"6fb5":function(e,t,i){"use strict";var r=i("7164"),a=i.n(r);a.a},7164:function(e,t,i){},"768a":function(e,t,i){"use strict";i.d(t,"o",function(){return c}),i.d(t,"h",function(){return l}),i.d(t,"e",function(){return u}),i.d(t,"k",function(){return d}),i.d(t,"c",function(){return m}),i.d(t,"n",function(){return p}),i.d(t,"r",function(){return h}),i.d(t,"l",function(){return f}),i.d(t,"u",function(){return v}),i.d(t,"i",function(){return g}),i.d(t,"j",function(){return y}),i.d(t,"w",function(){return b}),i.d(t,"v",function(){return w}),i.d(t,"b",function(){return x}),i.d(t,"a",function(){return k}),i.d(t,"d",function(){return F}),i.d(t,"x",function(){return S}),i.d(t,"m",function(){return L}),i.d(t,"y",function(){return _}),i.d(t,"g",function(){return I}),i.d(t,"f",function(){return C}),i.d(t,"p",function(){return T}),i.d(t,"q",function(){return O}),i.d(t,"t",function(){return j}),i.d(t,"s",function(){return A});i("8e6e"),i("ac6a"),i("456d");var r=i("bd86"),a=i("a8db"),s=i("b32d");function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(i,!0).forEach(function(t){Object(r["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function c(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(s["a"])(t)}function l(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(s["a"])(e)}function u(e){var t={url:"/cfg/lsc/getDeliveryCity",method:"get",params:e};return Object(s["a"])(t)}function d(e){var t=e.page,i=e.size,r=Object(a["a"])(e,["page","size"]),n={url:"/cfg/lsc/getLscList",method:"post",data:{page:t,size:i,model:o({},r)}};return Object(s["a"])(n)}function m(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(s["a"])(t)}function p(e){var t={url:"/price/line/getPriceBookList",method:"get",params:e};return Object(s["a"])(t)}function h(e){var t={url:"/price/line/page",method:"post",data:e};return Object(s["a"])(t)}function f(e){var t={url:"/price/line/getPriceBook",method:"get",params:e};return Object(s["a"])(t)}function v(e){var t={url:"/price/line/doExpire",method:"get",params:e};return Object(s["a"])(t)}function g(e){var t={url:"/price/line/getEffectiveBook",method:"post",data:e};return Object(s["a"])(t)}function y(e){var t={url:"/price/line/getHistory",method:"get",params:e};return Object(s["a"])(t)}function b(e){var t={url:"/price/line/savePriceBook",method:"post",data:e};return Object(s["a"])(t)}function w(e){var t={url:"/price/line/prescription",method:"post",data:e};return Object(s["a"])(t)}function x(e){var t={url:"/price/line/deletePriceBook",method:"delete",params:e};return Object(s["a"])(t)}function k(e){var t={url:"/price/line/audit",method:"post",data:e};return Object(s["a"])(t)}function F(e){var t={url:"/auth/agent/getAgentList",method:"get",params:e};return Object(s["a"])(t)}function S(e){var t={url:"/price/line/addSpecialCust",method:"post",data:e};return Object(s["a"])(t)}function L(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(s["a"])(t)}function _(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(s["a"])(t)}function I(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(s["a"])(t)}function C(e){var t={url:"/price/measure/getMeasureList",method:"get",params:e};return Object(s["a"])(t)}function T(e){var t={url:"/price/line/getStandardPeriod",method:"post",data:e};return Object(s["a"])(t)}function O(e){var t={url:"/price/line/supplier",method:"get",params:e};return Object(s["a"])(t)}function j(e){var t={url:"setting/area_type/groupbypid",method:"post",data:e};return Object(s["a"])(t)}function A(e){var t={url:"/auth/agent/customer_by_id",method:"get",params:e};return Object(s["a"])(t)}},"89ee":function(e,t,i){},"8aac":function(e,t,i){},"90be":function(e,t,i){"use strict";var r=i("a38b"),a=i.n(r);a.a},"935d":function(e,t,i){},"94b6":function(e,t,i){"use strict";var r=i("252a"),a=i.n(r);a.a},"9e61":function(e,t,i){"use strict";var r=i("3408"),a=i.n(r);a.a},"9ec0":function(e,t,i){"use strict";i.d(t,"g",function(){return a}),i.d(t,"n",function(){return s}),i.d(t,"f",function(){return n}),i.d(t,"m",function(){return o}),i.d(t,"e",function(){return c}),i.d(t,"h",function(){return l}),i.d(t,"q",function(){return u}),i.d(t,"k",function(){return d}),i.d(t,"p",function(){return m}),i.d(t,"a",function(){return p}),i.d(t,"d",function(){return h}),i.d(t,"c",function(){return f}),i.d(t,"l",function(){return v}),i.d(t,"o",function(){return g}),i.d(t,"b",function(){return y}),i.d(t,"j",function(){return b}),i.d(t,"i",function(){return w}),i.d(t,"r",function(){return x});var r=i("b32d");function a(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function s(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(r["a"])(t)}function n(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(r["a"])(t)}function o(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(r["a"])(t)}function l(e){var t={url:"/auth/custtype/queryAgents",method:"post",data:e};return Object(r["a"])(t)}function u(e){var t={url:"/cfg/tsc/getTscList",method:"get",params:e};return Object(r["a"])(t)}function d(e){var t={url:"/price/trailer/page",method:"post",data:e};return Object(r["a"])(t)}function m(e){var t={url:"/price/trailer/page1",method:"post",data:e};return Object(r["a"])(t)}function p(e){var t={url:"/price/trailer/add",method:"post",data:e};return Object(r["a"])(t)}function h(e){var t={url:"/price/trailer/update",method:"post",data:e};return Object(r["a"])(t)}function f(e){var t={url:"/price/trailer/del",method:"delete",params:e};return Object(r["a"])(t)}function v(e){var t={url:"/price/trailer/refStandard",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/price/trailer/superior",method:"post",data:e};return Object(r["a"])(t)}function y(e){var t={url:"/price/trailer/review",method:"post",data:e};return Object(r["a"])(t)}function b(e){var t={url:"/price/trailer/history",method:"get",params:e};return Object(r["a"])(t)}function w(e){var t={url:"/price/trailer/history/get",method:"get",params:e};return Object(r["a"])(t)}function x(e){var t={url:"/price/trailer/doExpire",method:"get",params:e};return Object(r["a"])(t)}},a311:function(e,t,i){"use strict";var r=i("af58"),a=i.n(r);a.a},a38b:function(e,t,i){},a771:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"supplier-price"},["01"===e.priceType?i("price-car",{attrs:{"price-type-list":e.priceTypeList,"price-type":e.priceType,"supplier-list":e.supplierList},on:{priceTypeChange:e.priceTypeChange}}):e._e(),"06"===e.priceType?i("price-trailer",{attrs:{"price-type-list":e.priceTypeList,"price-type":e.priceType,"supplier-list":e.supplierList},on:{priceTypeChange:e.priceTypeChange}}):e._e(),"03"===e.priceType?i("price-customs-clearance",{attrs:{"price-type-list":e.priceTypeList,"price-type":e.priceType,"supplier-list":e.supplierList},on:{priceTypeChange:e.priceTypeChange}}):e._e(),"04"===e.priceType?i("price-warehouse",{attrs:{"price-type-list":e.priceTypeList,"price-type":e.priceType,"supplier-list":e.supplierList},on:{priceTypeChange:e.priceTypeChange}}):e._e(),"02"===e.priceType?i("price-booking",{attrs:{"price-type-list":e.priceTypeList,"price-type":e.priceType,"supplier-list":e.supplierList},on:{priceTypeChange:e.priceTypeChange}}):e._e(),"05"===e.priceType?i("price-line",{attrs:{"price-type-list":e.priceTypeList,"price-type":e.priceType,"supplier-list":e.supplierList},on:{priceTypeChange:e.priceTypeChange}}):e._e()],1)},a=[],s=i("d225"),n=i("b0b4"),o=i("308d"),c=i("6bb5"),l=i("4e2b"),u=i("9ab4"),d=i("60a3"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px",cursor:"pointer"},attrs:{span:12}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"my-popover"},on:{hide:e.hidePopover},model:{value:e.myPopoverVisible,callback:function(t){e.myPopoverVisible=t},expression:"myPopoverVisible"}},[r("div",[r("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},e._l(e.priceTypeList,function(t){return r("li",{key:t.value,staticClass:"el-select-dropdown__item",on:{click:function(i){return e.priceTypeChange(t.value)}}},[r("span",[e._v("\n                    "+e._s(t.label)+"\n                  ")])])}),0)]),r("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("span",[e._v("\n                "+e._s(e.formattPriceType(e.priceType,e.priceTypeList))+"\n              ")]),r("i",{staticClass:"el-icon-caret-bottom"})])])],1)],1),r("div",{staticStyle:{padding:"10px 0"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"国家","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.countryChange},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("search")},change:e.onService},model:{value:e.searchForm.kscId,callback:function(t){e.$set(e.searchForm,"kscId",t)},expression:"searchForm.kscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.custId,callback:function(t){e.$set(e.searchForm,"custId",t)},expression:"searchForm.custId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("1")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.kscName,callback:function(t){e.$set(e.searchForm,"kscName",t)},expression:"searchForm.kscName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"计费方式","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.priceType,callback:function(t){e.$set(e.searchForm,"priceType",t)},expression:"searchForm.priceType"}},[r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      按车型\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      按托数\n                    ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                      按重量&方数\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"地址类型","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.addressType,callback:function(t){e.$set(e.searchForm,"addressType",t)},expression:"searchForm.addressType"}},[r("el-radio-button",{attrs:{label:"5"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      机场\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      港口\n                    ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                      火车站\n                    ")]),r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                      海外仓\n                    ")]),r("el-radio-button",{attrs:{label:"4"}},[e._v("\n                      私人地址\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("2")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 275px)"}},[0===e.priceList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):e._e(),e._l(e.priceList,function(t,i){return r("div",{key:i,staticClass:"price-card",class:{"active-card":e.selectCard.id===t.id},staticStyle:{"font-size":"12px",cursor:"pointer"},attrs:{shadow:"hover"},on:{click:function(i){return e.onSelectCard(t)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待审核",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-blue"})]):e._e(),2===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-y"})]):e._e(),3===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已拒绝",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-red"})]):e._e(),4===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已通过",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-success"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n                "+e._s(t.kscName)+"\n              ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                供应商\n              ")]),r("el-col",{attrs:{span:21}},[e._v("\n                "+e._s(t.fromCustName)+"\n              ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},["4"!==t.addressType?r("el-col",{attrs:{span:4}},[e._v("\n                起运地\n              ")]):e._e(),"4"!==t.addressType?r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:20}},[e._v("\n                "+e._s(e.formatTag(t,"1"))+"\n              ")]):r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:24}},[e._v("\n                "+e._s((t.country.countryName||"")+" "+(t.country.stateName||"")+" "+(t.country.cityName||"")+" "+(t.country.countyName||""))+"\n              ")])],1),r("el-row",[r("el-col",{attrs:{span:4}},["1"===t.status?r("span",{staticClass:"btn-tip-success"},[e._v("\n                  生效中\n                ")]):"2"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                  待生效\n                ")]):"3"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                  已失效\n                ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:12}},[e._v("\n                "+e._s(e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                  "+e._s(e.formatTag(t))+"\n                ")])])],1)],1)})],2)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-pagination",{attrs:{small:"",layout:"total,prev, pager, next",total:e.pagination.total,"page-size":e.pagination.size,"current-page":e.pagination.page},on:{"current-change":e.currentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),e.showAddForm?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("el-form",{ref:"editForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"业务类型：",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"国家：",prop:"countryId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},on:{change:e.onCountryChange},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.countryId||e.isView,filterable:""},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectForm.stateId,callback:function(t){e.$set(e.selectForm,"stateId",t)},expression:"selectForm.stateId"}},e._l(e.stateList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.stateId||e.isView,filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.selectForm.cityId,callback:function(t){e.$set(e.selectForm,"cityId",t)},expression:"selectForm.cityId"}},e._l(e.cityList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),r("el-form-item",{attrs:{slot:"reference",label:"国家/省市：",prop:"countryId"},slot:"reference"},[r("el-button",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"},attrs:{type:"text",size:"mini"}},[e._v("\n                "+e._s(e.selectForm.cityName?e.selectForm.cityName:e.selectForm.stateName?e.selectForm.stateName:e.selectForm.countryName?e.selectForm.countryName:"请选择")+"\n              ")])],1)],1),r("el-form-item",{attrs:{prop:"kscId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectService.label,expression:"selectService.label"}],attrs:{slot:"label",content:e.selectService.label+"/"+e.selectService.ksId,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",disabled:e.isView,placeholder:"请选择"},model:{value:e.selectForm.kscId,callback:function(t){e.$set(e.selectForm,"kscId",t)},expression:"selectForm.kscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商："}},[e._v("\n            "+e._s(e.selectForm.fromCustName)+"\n          ")])],1),r("el-col",{attrs:{span:3}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getEditionList,change:e.viewHistoryPrice},model:{value:e.edition,callback:function(t){e.edition=t},expression:"edition"}},e._l(e.editionList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1)],1),r("div",{staticClass:"service-info"},[r("el-form-item",{attrs:{label:"计费方式："}},["0"===e.selectService.priceType?r("span",[e._v("\n            车型\n          ")]):"1"===e.selectService.priceType?r("span",[e._v("\n            托数\n          ")]):"2"===e.selectService.priceType?r("span",[e._v("\n            重量&方数\n          ")]):r("span",[e._v("\n            --\n          ")])]),"4"!==e.selectService.addressType?r("el-form-item",{attrs:{label:"起运地址："}},[e._v("\n          "+e._s(e.selectService.addressName||"--")+"\n        ")]):e._e(),r("el-form-item",{attrs:{label:"距离单位："}},[r("span",[e._v("\n            "+e._s(e.formattUnit(e.selectService.umDistance,e.umDistanceList))+"\n          ")])]),r("el-form-item",{attrs:{label:"重量单位："}},[r("span",[e._v("\n            "+e._s(e.formattUnit(e.selectService.umWeight,e.umWeightList))+"\n          ")])]),r("el-form-item",{attrs:{label:"体积单位："}},[r("span",[e._v("\n            "+e._s(e.formattUnit(e.selectService.umVolume,e.umVolumeList))+"\n          ")])]),r("el-form-item",{attrs:{label:"货币单位："}},[e._v("\n          "+e._s(e.formattCurrency(e.selectService.currencyId))+"\n        ")])],1),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"有效时间：","label-width":"100px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{disabled:e.isView,clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1),r("el-form-item",{attrs:{label:"单票最低收费：","label-width":"130px",prop:"floorPrice"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{disabled:e.isView,controls:!1,placeholder:"请输入",min:0,max:999999,precision:2,size:"mini"},model:{value:e.selectForm.floorPrice,callback:function(t){e.$set(e.selectForm,"floorPrice",t)},expression:"selectForm.floorPrice"}})],1)],1),e.edition?e._e():r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[2===e.selectCard.auditing?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visibleAudit,callback:function(t){e.visibleAudit=t},expression:"visibleAudit"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"通过/拒绝：",prop:"status","label-width":"110px"}},[r("el-radio-group",{model:{value:e.selectForm.status,callback:function(t){e.$set(e.selectForm,"status",t)},expression:"selectForm.status"}},[r("el-radio",{attrs:{label:"4"}},[e._v("\n                    通过\n                  ")]),r("el-radio",{attrs:{label:"3"}},[e._v("\n                    拒绝\n                  ")])],1)],1),"3"===e.selectForm.status?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"note","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.selectForm.note,callback:function(t){e.$set(e.selectForm,"note",t)},expression:"selectForm.note"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.hidePopover}},[e._v("\n                  取消\n                ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.auditPrice}},[e._v("\n                  确认\n                ")])],1)],1),r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              审核\n            ")])],1):e._e(),1===e.selectCard.auditing?r("span",[r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text",size:"mini"},on:{click:e.auditPrice}},[e._v("\n              审核\n            ")])],1):e._e()],1),3===e.selectCard.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因："}},[r("span",[e._v("\n              "+e._s(e.selectCard.reason)+"\n            ")])])],1):e._e()],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{"min-height":"200px"}},[e.aAxisData.length?r("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"520",border:"",resizable:"",size:"small","auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.label)+"\n          ")]}}],null,!1,799874427)},[r("template",{slot:"header"},[r("span",{staticClass:"header-column"},[e._v("\n              "+e._s("4"===e.selectService.addressType?"里程":"目的地")+"\n            ")]),r("span",[e._v(" \\ ")]),"0"===e.selectService.priceType?r("span",[e._v("\n              车型\n            ")]):e._e(),"1"===e.selectService.priceType?r("span",[e._v("\n              托数\n            ")]):e._e(),"2"===e.selectService.priceType?r("span",[e._v("\n              重量&方数\n            ")]):e._e()])],2),"2"!==e.selectService.priceType?e._l(e.aAxisData,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(i){return["remark"!==t.value?r("div",[r("span",[e._v("\n                  "+e._s(i.row[t.value])+"\n                ")])]):r("div",[r("span",[e._v("\n                  "+e._s(i.row.remark)+"\n                ")])])]}}],null,!0)})}):[e._l(e.aAxisDataPlanar,function(t,i){return r("vxe-table-colgroup",{key:i,attrs:{title:0===i?" 重量":"方数",align:"center","show-overflow":!0}},e._l(t,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(i){return[r("div",[r("span",[e._v("\n                    "+e._s(i.row[t.value])+"\n                  ")])])]}}],null,!0)})}),1)}),r("vxe-table-column",{attrs:{title:"备注",align:"center","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("span",[e._v("\n                  "+e._s(t.row.remark)+"\n                ")])])]}}],null,!1,3029574504)})]],2):e._e()],1)],1):e._e()],1)},p=[],h=(i("8e6e"),i("456d"),i("55dd"),i("75fc")),f=(i("ac6a"),i("7f7f"),i("bd86")),v=(i("96cf"),i("3b8d")),g=(i("7514"),i("9dba")),y=i("dcc4"),b=i("59c4"),w=i("5a0c"),x=i.n(w);function k(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function F(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?k(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):k(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var S=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.edition="",e.isActive=!0,e.selectLoading=!1,e.myPopoverVisible=!1,e.loadingTable=!1,e.loading=!1,e.visible=!1,e.visible2=!1,e.visibleAudit=!1,e.showAddForm=!1,e.loadingForm=!1,e.isView=!0,e.formRules={refStandardId:[{required:!0,message:"请选择参考标准报价",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],kscId:[{required:!0,message:"请选择服务",trigger:"change"}],ifStandard:[{required:!0,message:"请选择价格标准",trigger:"change"}],associatedAgents:[{required:!0,message:"请选择关联代理商",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],toCustSubtype:[{required:!0,message:"请选择报价对象",trigger:"change"}],status:[{required:!0,message:"请选择通过/拒绝",trigger:"change"}],floorPrice:[{required:!0,message:"请输入单票最低收费",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.searchForm={custId:void 0,subtypeId:void 0,countryId:void 0,service:void 0,kscId:void 0,kscName:"",auditing:void 0,ifStandard:"0",priceType:"3",addressType:"5",times:[]},e.selectForm={fromCustName:"",cityId:"",stateId:"",countryId:void 0,countryName:"",cityName:"",stateName:"",redId:void 0,refStandardId:void 0,subtypeId:void 0,kscId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[],status:"4",floorPrice:0,note:""},e.selectCard={},e.selectService={},e.pagination={page:1,size:10,total:0},e.dayjs=x.a,e.aAxisData=[],e.aAxisDataPlanar=[],e.tableData=[],e.editionList=[],e.countryList=[],e.selectAddresList=[],e.stateList=[],e.cityList=[],e.priceList=[],e.auditList=[{label:"待审核",value:1},{label:"审核中",value:2},{label:"已拒绝",value:3},{label:"已通过",value:4}],e.typeList=[],e.serviceList=[],e.currencyList=[],e.umDistanceList=[],e.umWeightList=[],e.umVolumeList=[],e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"priceTypeChange",value:function(e){this.myPopoverVisible=!1,this.$emit("priceTypeChange",e)}},{key:"formattPriceType",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label):"--"}},{key:"auditPrice",value:function(){var e=this,t={};if(1===this.selectCard.auditing)t={id:this.selectCard.id,tag:2,reason:this.selectForm.note};else{var i=this.$refs.editForm,r=["status"];"3"===this.selectForm.status&&r.push("note");var a=[];if(i.validateField(r,function(e){e&&a.push(e)}),0!==a.length)return;t={id:this.selectCard.id,tag:this.selectForm.status,reason:this.selectForm.note}}this.visibleAudit=!1,this.loadingTable=!0,Object(b["b"])(t).then(function(i){e.loadingTable=!1,i.success&&(e.selectService={},e.selectCard={},e.selectForm={refId:void 0,refStandardId:void 0,subtypeId:void 0,kscId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[],status:"4",note:""},e.showAddForm=!1,e.$message.success("操作成功"),e.getPriceList(t.id))}).catch(function(t){return e.loadingTable=!1,t})}},{key:"getPriceById",value:function(e){return new Promise(function(t,i){var r={id:e};Object(b["k"])(r).then(function(e){e.success?t(e.data||{}):i(e)}).catch(function(e){i(e)})})}},{key:"viewHistoryPrice",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}this.loadingForm=!0,this.getPriceById(t).then(function(e){i.loadingForm=!1;var t=i.getAxisBySuperiorPriceAndView(e.excelModelList);i.aAxisData=t.aAxisData,i.aAxisDataPlanar=t.aAxisDataPlanar,i.tableData=t.tableData}).catch(function(e){i.loadingForm=!1}),e.next=7;break;case 5:return e.next=7,this.onSelectCard(this.selectCard);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getEditionList",value:function(){var e=this,t={id:this.selectCard.id};this.editionList=[],this.selectLoading=!0,Object(b["l"])(t).then(function(t){e.selectLoading=!1,t.success&&(e.editionList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onSelectCard",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loadingForm){e.next=2;break}return e.abrupt("return");case 2:return this.selectCard=F({},t),this.edition="",this.aAxisData=[],this.aAxisDataPlanar=[],this.tableData=[],this.showAddForm=!0,this.setTableForm(t),this.loadingForm=!0,e.prev=10,e.next=13,this.getSubtypeList();case 13:return e.next=15,this.getStateList();case 15:return e.next=17,this.getCityList();case 17:return e.next=19,this.getServiceList("select");case 19:e.next=24;break;case 21:e.prev=21,e.t0=e["catch"](10),this.loadingForm=!1;case 24:this.selectService=this.serviceList.find(function(e){return e.id===t.kscId})||{},i=this.getAxisBySuperiorPriceAndView(t.excelModelList),this.aAxisData=i.aAxisData,this.aAxisDataPlanar=i.aAxisDataPlanar,this.tableData=i.tableData,this.loadingForm=!1;case 30:case"end":return e.stop()}},e,this,[[10,21]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAxisBySuperiorPriceAndView",value:function(e){var t=this,i=JSON.parse(JSON.stringify(e));if(0===i.length)return{tableData:[],aAxisData:[],aAxisDataPlanar:[]};i=i.map(function(e){return e.pricelist.length&&(e.pricelist=e.pricelist.map(function(e){return{code:e.codex,max:e.maxx,min:e.minx,name:e.namex,price:e.price,type:e.type}})),{isSuperiorPrice:e.isSuperiorPrice||!1,code:e.codey,max:e.maxy,min:e.miny,name:e.namey,pricelist:e.pricelist,remark:e.remark}});var r=i[0].pricelist.map(function(e,i){var r=F({value:"x"+i},e);return"0"===t.selectService.priceType?r.label=e.name:r.label=e.min+" - "+e.max,r}),a=[];"2"===this.selectService.priceType&&(a=[r.filter(function(e){return"0"===e.type}),r.filter(function(e){return"1"===e.type})]);var s=i.map(function(e){var i={label:"",remark:e.remark};return e.pricelist.forEach(function(e,t){i["x"+t]=e.price||void 0}),"4"===t.selectService.addressType?(i.label=e.min+" - "+e.max,i=Object.assign(i,F({},e))):(i.label=e.name,i=Object.assign(i,F({},e))),i});return r=[].concat(Object(h["a"])(r),[{label:"备注",value:"remark"}]),{tableData:s,aAxisData:r,aAxisDataPlanar:a}}},{key:"setTableForm",value:function(e){var t=this.$refs.addForm;t&&t.clearValidate(),this.selectAddresList=[],this.selectForm.floorPrice=e.floorPrice,this.selectForm.toCustSubtype=e.toCustSubtype,this.selectForm.toCustType=e.toCustType,this.selectForm.subtypeId=e.subtypeId,this.selectForm.fromCustName=e.fromCustName,this.selectForm.countryId=e.country.countryId,this.selectForm.countryName=e.country.countryName,this.selectForm.cityName=e.country.cityName,this.selectForm.stateName=e.country.stateName,this.selectForm.stateId=e.country.stateId,this.selectForm.cityId=e.country.cityId,this.selectForm.associatedAgents=e.associatedAgents,this.selectForm.kscId=e.kscId,this.selectForm.ifStandard=e.ifStandard,this.selectForm.refStandardId=e.refStandard,this.selectForm.times=[x()(e.startTime).format("YYYY-MM-DD"),x()(e.endTime).format("YYYY-MM-DD")];var i=[];this.selectForm.countryName&&i.push(this.selectForm.countryName),this.selectForm.stateName&&i.push(this.selectForm.stateName),this.selectForm.cityName&&i.push(this.selectForm.cityName),this.selectAddresList=i}},{key:"showPopover",value:function(e){"1"===e?this.visible=!0:this.visible2=!0}},{key:"clearForm",value:function(e){"1"===e?(this.searchForm.custId=void 0,this.searchForm.countryId=void 0,this.searchForm.kscId=void 0,this.searchForm.kscName=""):(this.searchForm.times=[],this.searchForm.addressType="5",this.searchForm.priceType="3",this.searchForm.ifStandard="0"),this.getPriceList()}},{key:"onService",value:function(e){this.searchForm.kscName=(this.serviceList.find(function(t){return t.id===e})||{}).label}},{key:"countryChange",value:function(e){this.searchForm.kscId=void 0,this.searchForm.kscName=""}},{key:"getServiceList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={page:1,size:9999,model:{}},"search"===t?(i.model.subtypeId=this.searchForm.subtypeId,i.model.countryId=this.searchForm.countryId):(i.model.subtypeId=this.selectForm.subtypeId,i.model.countryId=this.selectForm.countryId,i.model.stateId=this.selectForm.stateId,i.model.cityId=this.selectForm.cityId),this.selectLoading=!0,e.next=5,Object(b["g"])(i).then(function(e){if(r.selectLoading=!1,e.success){var t=e.data||{},i=t.result||[];r.serviceList=i.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}}).catch(function(e){return r.selectLoading=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"currentChange",value:function(e){this.pagination.page=e,this.getPriceList()}},{key:"getSubtypeList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(b["n"])({typeId:"01"}).then(function(e){t.selectLoading=!1,e.success&&(t.typeList=e.data||[])}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"hidePopover",value:function(){this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.myPopoverVisible=!1}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(b["i"])().then(function(t){if(e.selectLoading=!1,t.success){var i=t.data||{};e.countryList=i.result||[]}}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(b["o"])(this.selectForm.countryId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.stateList=r}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(b["h"])(this.selectForm.stateId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.cityList=r}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this.countryList.find(function(e){return e.id===t})||{},this.selectForm.countryName=i.name,this.selectForm.stateId="",this.selectForm.cityId="",this.selectForm.stateName="",this.selectForm.cityName="";case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(e){var t=this.stateList.find(function(t){return t.id===e})||{};this.selectForm.stateName=t.name,this.selectForm.cityId="",this.selectForm.cityName=""}},{key:"onCityChange",value:function(e){var t=this.cityList.find(function(t){return t.id===e})||{};this.selectForm.cityName=t.name}},{key:"formatTag",value:function(e,t){var i="",r="",a=(this.typeList.find(function(t){return t.id===e.subtypeId})||{}).name;switch(e.priceType){case"0":i="车型";break;case"1":i="托数";break;case"2":i="重量&方数";break;default:i=""}switch(e.addressType){case"0":r="机场";break;case"1":r="港口";break;case"2":r="火车站";break;case"3":r="海外仓";break;case"4":r="里程";break;default:r=""}return"1"===t?r?e.addressName+" - "+r:e.addressName:"".concat(a," - ").concat(i)}},{key:"getPriceList",value:function(e){var t=this;this.visible=!1,this.visible2=!1,this.showAddForm=!1;var i={model:{subtypeId:this.searchForm.subtypeId,custId:this.searchForm.custId,kscId:this.searchForm.kscId,ifStandard:"0"===this.searchForm.ifStandard?"":this.searchForm.ifStandard,auditing:this.searchForm.auditing,addressType:"5"===this.searchForm.addressType?"":this.searchForm.addressType,priceType:"3"===this.searchForm.priceType?"":this.searchForm.priceType,startTime:this.searchForm.times[0]?this.searchForm.times[0]+" 00:00:00":"",endTime:this.searchForm.times[1]?this.searchForm.times[1]+" 23:59:59":""},page:this.pagination.page,size:this.pagination.size};this.selectCard={},this.loading=!0,Object(b["p"])(i).then(function(){var i=Object(v["a"])(regeneratorRuntime.mark(function i(r){var a,s,n;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(t.loading=!1,!r.success){i.next=11;break}if(a=r.data||{},s=a.result||[],t.priceList=s.map(function(e){return 2===e.effective&&(e.status="1"),1===e.effective&&(e.status="2"),9===e.effective&&(e.status="3"),e}).sort(function(e,t){return 1*e.status-1*t.status}),t.pagination.total=a.total||0,!e){i.next=11;break}if(n=t.priceList.find(function(t){return t.id===e}),!n){i.next=11;break}return i.next=11,t.onSelectCard(n);case 11:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.loading=!1,e})}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"formattCurrency",value:function(e){var t=this.currencyList.find(function(t){return t.id===e});return t?"".concat(t.name,"(").concat(t.sign,")"):"--"}},{key:"formattUnit",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label," - ").concat(i.value):"--"}},{key:"geCurrencyList",value:function(){var e=this,t={page:1,size:999};Object(b["e"])(t).then(function(t){var i=t.data||{};e.currencyList=i.result||[]}).catch(function(e){return e})}},{key:"getUmDistanceList",value:function(){var e=this;this.selectLoading=!0,Object(y["n"])({type:"DISTANCE_TYPE"}).then(function(t){e.selectLoading=!1,t.success&&(e.umDistanceList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getUmWeightList",value:function(){var e=this;this.selectLoading=!0,Object(y["n"])({type:"weight_type"}).then(function(t){e.selectLoading=!1,t.success&&(e.umWeightList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getUmVolumeList",value:function(){var e=this;this.selectLoading=!0,Object(y["n"])({type:"VOLUME_TYPE"}).then(function(t){e.selectLoading=!1,t.success&&(e.umVolumeList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}},{key:"created",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getSubtypeList();case 3:this.geCurrencyList(),this.getPriceList(),this.getUmDistanceList(),this.getUmWeightList(),this.getUmVolumeList(),this.getCountryList();case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=g["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=g["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=g["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=g["a"].info||{},t=e.custSubtype;return t}}]),t}(d["e"]);S=u["a"]([Object(d["a"])({name:"price-car",components:{},props:{priceTypeList:{type:Array,default:function(){return[]}},supplierList:{type:Array,default:function(){return[]}},priceType:{type:String,default:""}}})],S);var L=S,_=L,I=(i("90be"),i("2877")),C=Object(I["a"])(_,m,p,!1,null,"1dbd0ce6",null),T=C.exports,O=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px",cursor:"pointer"},attrs:{span:12}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"my-popover"},on:{hide:e.hidePopover},model:{value:e.myPopoverVisible,callback:function(t){e.myPopoverVisible=t},expression:"myPopoverVisible"}},[r("div",[r("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},e._l(e.priceTypeList,function(t){return r("li",{key:t.value,staticClass:"el-select-dropdown__item",on:{click:function(i){return e.priceTypeChange(t.value)}}},[r("span",[e._v("\n                    "+e._s(t.label)+"\n                  ")])])}),0)]),r("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("span",[e._v("\n                "+e._s(e.formattPriceType(e.priceType,e.priceTypeList))+"\n              ")]),r("i",{staticClass:"el-icon-caret-bottom"})])])],1)],1),r("div",{staticStyle:{padding:"10px 0"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"国家","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getTrailerServeList("search")},change:e.serviceChange},model:{value:e.searchForm.serviceId,callback:function(t){e.$set(e.searchForm,"serviceId",t)},expression:"searchForm.serviceId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.fromCustId,callback:function(t){e.$set(e.searchForm,"fromCustId",t)},expression:"searchForm.fromCustId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("1")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.serviceName,callback:function(t){e.$set(e.searchForm,"serviceName",t)},expression:"searchForm.serviceName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"地址类型","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.addressType,callback:function(t){e.$set(e.searchForm,"addressType",t)},expression:"searchForm.addressType"}},e._l(e.addressTypeList,function(t){return r("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])}),1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("2")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 275px)"}},[0===e.tableList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):e._e(),e._l(e.tableList,function(t,i){return r("div",{key:i,staticClass:"price-card",class:{"active-card":e.selectCard.id===t.id},staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return e.viewPrice(t)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待审核",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-blue"})]):e._e(),2===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-y"})]):e._e(),3===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已拒绝",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-red"})]):e._e(),4===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已通过",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-success"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n                "+e._s(t.service.value)+"\n              ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                供应商\n              ")]),r("el-col",{attrs:{span:21}},[e._v("\n                "+e._s(t.fromCustName)+"\n              ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                起运地\n              ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:21}},[e._v("\n                "+e._s((t.city||"")+" "+t.addressName)+"\n              ")])],1),r("el-row",[r("el-col",{attrs:{span:4}},["1"===t.status?r("span",{staticClass:"btn-tip-success"},[e._v("\n                  生效中\n                ")]):"2"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                  待生效\n                ")]):"3"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                  已失效\n                ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:15}},[e._v("\n                "+e._s(e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                  "+e._s(e.formatTag(t))+"\n                ")])])],1)],1)})],2)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-pagination",{attrs:{small:"",layout:"total,prev, pager, next",total:e.pagination.total,"page-size":e.pagination.size,"current-page":e.pagination.page},on:{"current-change":e.currentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),e.showAddForm?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("el-form",{ref:"addForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"业务类型：",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"所在国家：",prop:"selectCountryId"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},model:{value:e.selectForm.selectCountryId,callback:function(t){e.$set(e.selectForm,"selectCountryId",t)},expression:"selectForm.selectCountryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"serviceId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectService.name,expression:"selectService.name"}],attrs:{slot:"label",content:e.selectService.label+"/"+e.selectService.tsId,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",disabled:e.isView,placeholder:"请选择"},model:{value:e.selectForm.serviceId,callback:function(t){e.$set(e.selectForm,"serviceId",t)},expression:"selectForm.serviceId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商："}},[e._v("\n            "+e._s(e.selectForm.fromCustName)+"\n          ")])],1),r("el-col",{attrs:{span:3}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getEditionList,change:e.viewHistoryPrice},model:{value:e.selectForm.edition,callback:function(t){e.$set(e.selectForm,"edition",t)},expression:"selectForm.edition"}},e._l(e.editionList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1)],1),r("div",{staticClass:"service-info"},[r("el-form-item",{attrs:{label:"起运地址："}},[e._v("\n          "+e._s(e.selectService.addressName||"--")+"\n        ")]),r("el-form-item",{attrs:{label:"货币单位："}},[e._v("\n          "+e._s(e.formattCurrency(e.selectService.currencyId))+"\n        ")])],1),r("el-row",[r("el-col",{attrs:{span:20}},[0===e.selectService.endAddressType?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"国家：",prop:"countryId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},on:{change:e.onCountryChange},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.countryId||e.isView,filterable:""},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectForm.stateId,callback:function(t){e.$set(e.selectForm,"stateId",t)},expression:"selectForm.stateId"}},e._l(e.stateList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.stateId||e.isView,filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.selectForm.cityId,callback:function(t){e.$set(e.selectForm,"cityId",t)},expression:"selectForm.cityId"}},e._l(e.cityList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),r("el-form-item",{staticClass:"is-required",attrs:{slot:"reference",label:"城市："},slot:"reference"},[r("el-button",{staticStyle:{"padding-right":"30px"},attrs:{type:"text",size:"mini"}},[e._v("\n                "+e._s(e.selectForm.cityName||"请选择")+"\n              ")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"有效时间：",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间",disabled:e.isView},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1)],1),e.selectForm.edition?e._e():r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[2===e.selectCard.auditing?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visibleAudit,callback:function(t){e.visibleAudit=t},expression:"visibleAudit"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"通过/拒绝：",prop:"status","label-width":"110px"}},[r("el-radio-group",{model:{value:e.selectForm.status,callback:function(t){e.$set(e.selectForm,"status",t)},expression:"selectForm.status"}},[r("el-radio",{attrs:{label:"4"}},[e._v("\n                    通过\n                  ")]),r("el-radio",{attrs:{label:"3"}},[e._v("\n                    拒绝\n                  ")])],1)],1),"3"===e.selectForm.status?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"note","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.selectForm.note,callback:function(t){e.$set(e.selectForm,"note",t)},expression:"selectForm.note"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.hidePopover}},[e._v("\n                  取消\n                ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.auditPrice}},[e._v("\n                  确认\n                ")])],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              审核\n            ")])],1):e._e(),1===e.selectCard.auditing?r("span",[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.auditPrice}},[e._v("\n              审核\n            ")])],1):e._e()],1),3===e.selectCard.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因："}},[r("span",[e._v("\n              "+e._s(e.selectCard.reason)+"\n            ")])])],1):e._e()],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}]},[e.xAxis.length?r("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.yAxis,height:"520",border:"",resizable:"",size:"small","auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.label)+"\n          ")]}}],null,!1,799874427)},[r("template",{slot:"header"},[e._v("\n            目的地\\柜型\n          ")])],2),e._l(e.xAxis,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(i){return["remark"!==t.value?r("div",[r("span",[e._v("\n                "+e._s(i.row[t.value])+"\n              ")])]):r("div",[r("span",[e._v("\n                "+e._s(i.row.remark)+"\n              ")])])]}}],null,!0)})})],2):e._e()],1)],1):e._e()],1)},j=[],A=i("9ec0");function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function N(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var D=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isActive=!0,e.visible=!1,e.visible2=!1,e.visibleAudit=!1,e.myPopoverVisible=!1,e.loading=!1,e.selectLoading=!1,e.showAddForm=!1,e.loadingForm=!1,e.loadingTable=!1,e.isView=!0,e.searchForm={fromCustId:void 0,subtypeId:void 0,countryId:void 0,serviceId:void 0,serviceName:"",auditing:void 0,ifStandard:"0",addressType:"99",times:[]},e.selectForm={fromCustName:"",selectCountryId:void 0,cityName:"",stateName:"",cityId:"",stateId:"",refId:void 0,edition:"",refStandardId:void 0,note:"",status:"4",countryId:void 0,country:"",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.formRules={refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],refStandardId:[{required:!0,message:"请选择参考标准报价",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],serviceId:[{required:!0,message:"请选择服务",trigger:"change"}],toCustSubtype:[{required:!0,message:"请选择报价对象",trigger:"change"}],associatedAgents:[{required:!0,message:"请选择报价对象",trigger:"change"}],countryId:[{required:!0,message:"请选择国家",trigger:"change"}],stateId:[{required:!0,message:"请选择州/省",trigger:"change"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],times:[{required:!0,message:"请选择有效日期",trigger:"change"}],status:[{required:!0,message:"请选择通过/拒绝",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.selectCard={},e.selectService={},e.dayjs=x.a,e.pagination={page:1,size:10,total:0},e.auditList=[{name:"待审核",id:"1"},{name:"审核中",id:"2"},{name:"已拒绝",id:"3"},{name:"已通过",id:"4"}],e.addressTypeList=[{name:"全部",id:"99"},{name:"港口",id:"1"},{name:"火车站",id:"2"}],e.stateList=[],e.cityList=[],e.editionList=[],e.xAxis=[],e.yAxis=[],e.tableList=[],e.typeList=[],e.countryList=[],e.currencyList=[],e.serviceList=[],e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"priceTypeChange",value:function(e){this.myPopoverVisible=!1,this.$emit("priceTypeChange",e)}},{key:"formattPriceType",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label):"--"}},{key:"auditPrice",value:function(){var e=this,t={};if(1===this.selectCard.auditing)t={id:this.selectCard.id,status:2,reason:this.selectForm.note};else{var i=this.$refs.addForm,r=["status"];"3"===this.selectForm.status&&r.push("note");var a=[];if(i.validateField(r,function(e){e&&a.push(e)}),0!==a.length)return;t={id:this.selectCard.id,status:this.selectForm.status,reason:this.selectForm.note}}t.fromCustId=this.selectCard.fromCustId,this.visibleAudit=!1,this.loadingTable=!0,Object(A["b"])(t).then(function(i){e.loadingTable=!1,i.success&&(e.selectService={},e.selectCard={},e.selectForm={fromCustName:"",cityName:"",cityId:"",stateId:"",stateName:"",edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",countryId:void 0,countryName:"",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.showAddForm=!1,e.isView=!0,e.$message.success("操作成功"),e.getPriceList(t.id))}).catch(function(t){return e.loadingTable=!1,t})}},{key:"getEditionList",value:function(){var e=this;if(this.selectCard.id){var t={id:this.selectCard.id};this.editionList=[],this.selectLoading=!0,Object(A["j"])(t).then(function(t){e.selectLoading=!1,t.success&&(e.editionList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}}},{key:"viewHistoryPrice",value:function(e){var t=this;this.xAxis=[],this.yAxis=[],this.loadingForm=!0,this.getPriceById(e).then(function(e){var i=e.priceList||[];t.loadingForm=!1,t.getAxisByView(i),t.selectForm.associatedAgents=e.associatedAgents,t.selectForm.times=[x()(e.startTime).format("YYYY-MM-DD"),x()(e.endTime).format("YYYY-MM-DD")]}).catch(function(e){return t.loadingForm=!1,e})}},{key:"getPriceById",value:function(e){return new Promise(function(t,i){var r={id:e};Object(A["i"])(r).then(function(e){e.success?t(e.data||{}):i(e)}).catch(function(e){i(e)})})}},{key:"viewPrice",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.showAddForm=!0,this.xAxis=[],this.yAxis=[],this.selectCard=N({},t),this.setTableForm(t),this.isView=!0,this.loadingForm=!0,e.prev=7,e.next=10,this.getTrailerServeList("select");case 10:return e.next=12,this.getStateList();case 12:return e.next=14,this.getCityList();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](7),this.loadingForm=!1;case 19:this.selectService=this.serviceList.find(function(e){return e.id===t.service.key})||{},i=t.priceList||[],this.selectForm.selectCountryId=this.selectService.countryId||void 0,this.getAxisByView(i),this.loadingForm=!1;case 24:case"end":return e.stop()}},e,this,[[7,16]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"setTableForm",value:function(e){var t=this.$refs.addForm;t&&t.clearValidate(),this.selectForm.selectCountryId=void 0,this.selectForm.stateId=e.provinceId,this.selectForm.stateName=e.province,this.selectForm.cityId=e.cityId,this.selectForm.cityName=e.city,this.selectForm.countryId=e.countryId,this.selectForm.countryName=e.country,this.selectForm.fromCustName=e.fromCustName,this.selectForm.refId=e.refId,this.selectForm.refStandardId=e.refStandard,this.selectForm.toCustSubtype=e.toSubtype,this.selectForm.subtypeId=e.subtypeId,this.selectForm.associatedAgents=e.associatedAgents,this.selectForm.serviceId=e.service.key,this.selectForm.ifStandard=e.ifStandard,this.selectForm.times=[x()(e.startTime).format("YYYY-MM-DD"),x()(e.endTime).format("YYYY-MM-DD")],this.selectForm.edition=""}},{key:"getAxisByView",value:function(e){this.xAxis=e[0].priceList.map(function(e){return{label:e.nameX,value:e.codeX}}),this.yAxis=e.map(function(e){var t={label:e.nameY,value:e.codeY,isSuperiorPrice:e.isSuperiorPrice||!1,remark:e.remark};return e.priceList.forEach(function(e){t[e.codeX]=e.price||void 0}),t}),this.xAxis.length&&(this.xAxis=[].concat(Object(h["a"])(this.xAxis),[{label:"备注",value:"remark"}]))}},{key:"showPopover",value:function(e){"1"===e?this.visible=!0:this.visible2=!0}},{key:"clearForm",value:function(e){"1"===e?(this.searchForm.fromCustId=void 0,this.searchForm.serviceId=void 0,this.searchForm.serviceName="",this.searchForm.countryId=void 0):(this.searchForm.times=[],this.searchForm.addressType="99",this.searchForm.ifStandard="0"),this.getPriceList()}},{key:"serviceChange",value:function(e){if(this.searchForm.serviceName="",e){var t=this.serviceList.find(function(t){return t.id===e});this.searchForm.serviceName=(t||{}).label}}},{key:"getTrailerServeList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={page:1,size:9999},"search"===t?(i.subtypeId=this.searchForm.subtypeId,i.countryId=this.searchForm.countryId):(i.subtypeId=this.selectForm.subtypeId,i.countryId=this.selectForm.selectCountryId),this.selectLoading=!0,e.next=5,Object(A["q"])(i).then(function(e){if(r.selectLoading=!1,e.success){var t=e.data||{},i=t.result||[];r.serviceList=i.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}}).catch(function(e){return r.selectLoading=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(A["g"])().then(function(t){var i=t.data||{};e.countryList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(A["n"])(this.selectForm.countryId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.stateList=r}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(A["f"])(this.selectForm.stateId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.cityList=r}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this.countryList.find(function(e){return e.id===t})||{},this.selectForm.countryName=i.name,this.selectForm.stateId="",this.selectForm.cityId="",this.selectForm.stateName="",this.selectForm.cityName="";case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(e){var t=this.stateList.find(function(t){return t.id===e})||{};this.selectForm.stateName=t.name,this.selectForm.cityId="",this.selectForm.cityName=""}},{key:"onCityChange",value:function(e){var t=this.cityList.find(function(t){return t.id===e})||{};this.selectForm.cityName=t.name}},{key:"hidePopover",value:function(){this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.myPopoverVisible=!1}},{key:"getPriceList",value:function(e){var t=this,i={model:{subtypeId:this.searchForm.subtypeId,fromCustId:this.searchForm.fromCustId,serviceId:this.searchForm.serviceId,auditing:this.searchForm.auditing,ifStandard:"0"===this.searchForm.ifStandard?"":this.searchForm.ifStandard,addressType:"99"===this.searchForm.addressType?"":this.searchForm.addressType,startTime:this.searchForm.times[0]?this.searchForm.times[0]+" 00:00:00":"",endTime:this.searchForm.times[1]?this.searchForm.times[1]+" 23:59:59":""},page:this.pagination.page,size:this.pagination.size};this.visible=!1,this.visible2=!1,this.selectCard={},this.loading=!0,this.showAddForm=!1,Object(A["p"])(i).then(function(){var i=Object(v["a"])(regeneratorRuntime.mark(function i(r){var a,s,n;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(t.loading=!1,!r.success){i.next=11;break}if(a=r.data||{},s=a.result||[],t.tableList=s.map(function(e){return 2===e.effective&&(e.status="1"),1===e.effective&&(e.status="2"),9===e.effective&&(e.status="3"),e}).sort(function(e,t){return 1*e.status-1*t.status}),t.pagination.total=a.total||0,!e){i.next=11;break}if(n=t.tableList.find(function(t){return t.id===e}),!n){i.next=11;break}return i.next=11,t.viewPrice(n);case 11:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.loading=!1,e})}},{key:"getSubtypeList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(A["m"])({typeId:"06"}).then(function(e){t.typeList=e.data||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"formattCurrency",value:function(e){var t=this.currencyList.find(function(t){return t.id===e});return t?"".concat(t.name,"(").concat(t.sign,")"):"--"}},{key:"currentChange",value:function(e){this.pagination.page=e,this.getPriceList()}},{key:"formatTag",value:function(e,t){return(this.typeList.find(function(t){return t.id===e.subtypeId})||{}).name}},{key:"geCurrencyList",value:function(){var e=this,t={page:1,size:999};Object(A["e"])(t).then(function(t){if(t.success){var i=t.data||{};e.currencyList=i.result||[]}}).catch(function(e){return e})}},{key:"created",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getSubtypeList();case 3:this.geCurrencyList(),this.getPriceList(),this.getCountryList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(d["e"]);D=u["a"]([Object(d["a"])({name:"",components:{},props:{priceTypeList:{type:Array,default:function(){return[]}},supplierList:{type:Array,default:function(){return[]}},priceType:{type:String,default:""}}})],D);var z=D,$=z,M=(i("c8ce"),Object(I["a"])($,O,j,!1,null,"620853bb",null)),R=M.exports,Y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px",cursor:"pointer"},attrs:{span:12}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"my-popover"},on:{hide:e.hidePopover},model:{value:e.myPopoverVisible,callback:function(t){e.myPopoverVisible=t},expression:"myPopoverVisible"}},[r("div",[r("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},e._l(e.priceTypeList,function(t){return r("li",{key:t.value,staticClass:"el-select-dropdown__item",on:{click:function(i){return e.priceTypeChange(t.value)}}},[r("span",[e._v("\n                    "+e._s(t.label)+"\n                  ")])])}),0)]),r("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("span",[e._v("\n                "+e._s(e.formattPriceType(e.priceType,e.priceTypeList))+"\n              ")]),r("i",{staticClass:"el-icon-caret-bottom"})])])],1)],1),r("div",{staticStyle:{padding:"10px 0"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"国家","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getTrailerServeList("search")},change:e.serviceChange},model:{value:e.searchForm.serviceId,callback:function(t){e.$set(e.searchForm,"serviceId",t)},expression:"searchForm.serviceId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商","label-width":"70px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.fromCustId,callback:function(t){e.$set(e.searchForm,"fromCustId",t)},expression:"searchForm.fromCustId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("1")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.serviceName,callback:function(t){e.$set(e.searchForm,"serviceName",t)},expression:"searchForm.serviceName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("2")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 275px)"}},[0===e.tableList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):e._e(),e._l(e.tableList,function(t,i){return r("div",{key:i,staticClass:"price-card",class:{"active-card":e.selectCard.id===t.id},staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return e.viewPrice(t)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待审核",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-blue"})]):e._e(),2===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-y"})]):e._e(),3===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已拒绝",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-red"})]):e._e(),4===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已通过",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-success"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n                "+e._s(t.service.value)+"\n              ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                供应商\n              ")]),r("el-col",{attrs:{span:21}},[e._v("\n                "+e._s(t.fromCustName)+"\n              ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:2}},[e._v("\n                国家\n              ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:22}},[e._v("\n                "+e._s(t.country)+"\n              ")])],1),r("el-row",[r("el-col",{attrs:{span:4}},["1"===t.status?r("span",{staticClass:"btn-tip-success"},[e._v("\n                  生效中\n                ")]):"2"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                  待生效\n                ")]):"3"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                  已失效\n                ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:15}},[e._v("\n                "+e._s(e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                  "+e._s(e.formatTag(t))+"\n                ")])])],1)],1)})],2)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-pagination",{attrs:{small:"",layout:"total,prev, pager, next",total:e.pagination.total,"page-size":e.pagination.size,"current-page":e.pagination.page},on:{"current-change":e.currentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),e.showAddForm?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("el-form",{ref:"addForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"业务类型：",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"所在国家：",prop:"selectCountryId"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},model:{value:e.selectForm.selectCountryId,callback:function(t){e.$set(e.selectForm,"selectCountryId",t)},expression:"selectForm.selectCountryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"serviceId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectService.name,expression:"selectService.name"}],attrs:{slot:"label",content:e.selectService.label+"/"+e.selectService.csId,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",disabled:e.isView,placeholder:"请选择"},model:{value:e.selectForm.serviceId,callback:function(t){e.$set(e.selectForm,"serviceId",t)},expression:"selectForm.serviceId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商："}},[e._v("\n            "+e._s(e.selectForm.fromCustName)+"\n          ")])],1),r("el-col",{attrs:{span:3}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getEditionList,change:e.viewHistoryPrice},model:{value:e.selectForm.edition,callback:function(t){e.$set(e.selectForm,"edition",t)},expression:"selectForm.edition"}},e._l(e.editionList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1)],1),r("div",{staticClass:"service-info"},[r("el-form-item",{attrs:{label:"国家："}},[e._v("\n          "+e._s(e.selectService.countryName||"--")+"\n        ")]),r("el-form-item",{attrs:{label:"货币单位："}},[e._v("\n          "+e._s(e.formattCurrency(e.selectService.currencyId))+"\n        ")])],1),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"有效时间：","label-width":"100px",prop:"refStandardId"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间",disabled:e.isView},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1)],1),e.selectForm.edition?e._e():r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[2===e.selectCard.auditing?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visibleAudit,callback:function(t){e.visibleAudit=t},expression:"visibleAudit"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"通过/拒绝：",prop:"status","label-width":"110px"}},[r("el-radio-group",{model:{value:e.selectForm.status,callback:function(t){e.$set(e.selectForm,"status",t)},expression:"selectForm.status"}},[r("el-radio",{attrs:{label:"4"}},[e._v("\n                    通过\n                  ")]),r("el-radio",{attrs:{label:"3"}},[e._v("\n                    拒绝\n                  ")])],1)],1),"3"===e.selectForm.status?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"note","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.selectForm.note,callback:function(t){e.$set(e.selectForm,"note",t)},expression:"selectForm.note"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.hidePopover}},[e._v("\n                  取消\n                ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.auditPrice}},[e._v("\n                  确认\n                ")])],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              审核\n            ")])],1):e._e(),1===e.selectCard.auditing?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.auditPrice}},[e._v("\n            审核\n          ")]):e._e()],1),3===e.selectCard.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因："}},[r("span",[e._v("\n              "+e._s(e.selectCard.reason)+"\n            ")])])],1):e._e()],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{"min-height":"200px"}},[e.xAxis.length?r("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.yAxis,height:"520",border:"",resizable:"",size:"small","auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.label)+"\n          ")]}}],null,!1,799874427)},[r("template",{slot:"header"},[e._v("\n            成本项目\\海关\n          ")])],2),e._l(e.xAxis,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(i){return["remark"!==t.value?r("div",[r("span",[e._v("\n                "+e._s(i.row[t.value])+"\n              ")])]):r("div",[r("span",[e._v("\n                "+e._s(i.row.remark)+"\n              ")])])]}}],null,!0)})})],2):e._e()],1)],1):e._e()],1)},E=[],V=i("0dca");function q(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?q(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):q(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var H=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isActive=!0,e.loading=!1,e.selectLoading=!1,e.visible=!1,e.visible2=!1,e.visibleAudit=!1,e.showAddForm=!1,e.loadingForm=!1,e.loadingTable=!1,e.myPopoverVisible=!1,e.isView=!0,e.searchForm={fromCustId:void 0,subtypeId:void 0,countryId:void 0,serviceId:void 0,serviceName:"",auditing:void 0,ifStandard:"0",addressType:"99",times:[]},e.pagination={page:1,size:10,total:0},e.selectForm={fromCustName:"",selectCountryId:void 0,refId:void 0,edition:"",refStandardId:void 0,note:"",status:"4",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.formRules={refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],refStandardId:[{required:!0,message:"请选择参考标准报价",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],serviceId:[{required:!0,message:"请选择服务",trigger:"change"}],toCustSubtype:[{required:!0,message:"请选择报价对象",trigger:"change"}],associatedAgents:[{required:!0,message:"请选择报价对象",trigger:"change"}],times:[{required:!0,message:"请选择有效日期",trigger:"change"}],status:[{required:!0,message:"请选择通过/拒绝",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.selectCard={},e.selectService={},e.dayjs=x.a,e.auditList=[{name:"待审核",id:"1"},{name:"审核中",id:"2"},{name:"已通过",id:"4"},{name:"已拒绝",id:"3"}],e.typeList=[],e.tableList=[],e.editionList=[],e.countryList=[],e.currencyList=[],e.serviceList=[],e.xAxis=[],e.yAxis=[],e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"priceTypeChange",value:function(e){this.myPopoverVisible=!1,this.$emit("priceTypeChange",e)}},{key:"formattPriceType",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label):"--"}},{key:"auditPrice",value:function(e){var t=this,i={};if(1===this.selectCard.auditing)i={id:this.selectCard.id,status:2,reason:this.selectForm.note};else{var r=this.$refs.addForm,a=["status"];"3"===this.selectForm.status&&a.push("note");var s=[];if(r.validateField(a,function(e){e&&s.push(e)}),0!==s.length)return;i={id:this.selectCard.id,status:this.selectForm.status,reason:this.selectForm.note}}i.fromCustId=this.selectCard.fromCustId,this.visibleAudit=!1,this.loadingTable=!0,Object(V["b"])(i).then(function(e){t.loadingTable=!1,e.success&&(t.selectService={},t.selectCard={},t.selectForm={edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},t.showAddForm=!1,t.isView=!0,t.$message.success("操作成功"),t.getPriceList(i.id))}).catch(function(e){return t.loadingTable=!1,e})}},{key:"clearForm",value:function(e){"1"===e?(this.searchForm.fromCustId=void 0,this.searchForm.serviceId=void 0,this.searchForm.serviceName="",this.searchForm.countryId=void 0):(this.searchForm.times=[],this.searchForm.addressType="99",this.searchForm.ifStandard="0"),this.getPriceList()}},{key:"showPopover",value:function(e){"1"===e?this.visible=!0:this.visible2=!0}},{key:"setTableForm",value:function(e){var t=this.$refs.addForm;t&&t.clearValidate(),this.selectForm.selectCountryId=void 0,this.selectForm.refId=e.refId,this.selectForm.refStandardId=e.refStandard,this.selectForm.fromCustName=e.fromCustName,this.selectForm.toCustSubtype=e.toSubtype,this.selectForm.subtypeId=e.subtypeId,this.selectForm.associatedAgents=e.associatedAgents,this.selectForm.serviceId=e.service.key,this.selectForm.ifStandard=e.ifStandard,this.selectForm.times=[x()(e.startTime).format("YYYY-MM-DD"),x()(e.endTime).format("YYYY-MM-DD")]}},{key:"viewPrice",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loadingForm){e.next=2;break}return e.abrupt("return");case 2:return this.showAddForm=!0,this.loadingForm=!0,this.isView=!0,this.xAxis=[],this.yAxis=[],this.selectCard=B({},t),this.setTableForm(t),e.next=11,this.getTrailerServeList("select");case 11:this.selectService=this.serviceList.find(function(e){return e.id===t.service.key})||{},i=t.priceList||[],this.selectForm.selectCountryId=this.selectService.countryId,this.getAxisByView(i),this.loadingForm=!1;case 16:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAxisByView",value:function(e){this.xAxis=e[0].priceList.map(function(e){return{label:e.nameX,value:e.codeX}}),this.yAxis=e.map(function(e){var t={label:e.nameY,yId:e.codeY,isSuperiorPrice:e.isSuperiorPrice||!1,remark:e.remark};return e.priceList.forEach(function(e){t[e.codeX]=e.price||void 0}),t}),this.xAxis.length&&(this.xAxis=[].concat(Object(h["a"])(this.xAxis),[{label:"备注",value:"remark"}]))}},{key:"hidePopover",value:function(){this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.myPopoverVisible=!1}},{key:"getTrailerServeList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={page:1,size:9999},"search"===t?(i.subtypeId=this.searchForm.subtypeId,i.countryId=this.searchForm.countryId):(i.subtypeId=this.selectForm.subtypeId,i.countryId=this.selectForm.selectCountryId),this.serviceList=[],this.selectLoading=!0,e.next=6,Object(V["p"])(i).then(function(e){if(r.selectLoading=!1,e.success){var t=e.data||{},i=t.result||[];r.serviceList=i.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}}).catch(function(e){return r.selectLoading=!1,e});case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"serviceChange",value:function(e){if(this.searchForm.serviceName="",e){var t=this.serviceList.find(function(t){return t.id===e});this.searchForm.serviceName=(t||{}).label}}},{key:"getPriceList",value:function(e){var t=this,i={model:{subtypeId:this.searchForm.subtypeId,fromCustId:this.searchForm.fromCustId,serviceId:this.searchForm.serviceId,auditing:this.searchForm.auditing,ifStandard:"0"===this.searchForm.ifStandard?"":this.searchForm.ifStandard,addressType:"99"===this.searchForm.addressType?"":this.searchForm.addressType,startTime:this.searchForm.times[0]?this.searchForm.times[0]+" 00:00:00":"",endTime:this.searchForm.times[1]?this.searchForm.times[1]+" 23:59:59":""},page:this.pagination.page,size:this.pagination.size};this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.showAddForm=!1,this.selectCard={},this.loading=!0,Object(V["o"])(i).then(function(){var i=Object(v["a"])(regeneratorRuntime.mark(function i(r){var a,s,n;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(t.loading=!1,!r.success){i.next=11;break}if(a=r.data||{},s=a.result||[],t.tableList=s.map(function(e){return 2===e.effective&&(e.status="1"),1===e.effective&&(e.status="2"),9===e.effective&&(e.status="3"),e}).sort(function(e,t){return 1*e.status-1*t.status}),t.pagination.total=a.total||0,!e){i.next=11;break}if(n=t.tableList.find(function(t){return t.id===e}),!n){i.next=11;break}return i.next=11,t.viewPrice(n);case 11:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.loading=!1,e})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(V["f"])().then(function(t){var i=t.data||{};e.countryList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getEditionList",value:function(){var e=this;if(this.selectCard.id){var t={id:this.selectCard.id};this.editionList=[],this.selectLoading=!0,Object(V["i"])(t).then(function(t){e.selectLoading=!1,t.success&&(e.editionList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}}},{key:"viewHistoryPrice",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.xAxis=[],this.yAxis=[],t){e.next=6;break}return e.next=5,this.viewPrice(this.selectCard);case 5:return e.abrupt("return");case 6:this.getPriceById(t).then(function(e){var t=e.priceList||[];i.loadingForm=!1,i.getAxisByView(t),i.selectForm.associatedAgents=e.associatedAgents,i.selectForm.times=[x()(e.startTime).format("YYYY-MM-DD"),x()(e.endTime).format("YYYY-MM-DD")]}).catch(function(e){return i.loadingForm=!1,e});case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getPriceById",value:function(e){return new Promise(function(t,i){var r={id:e};Object(V["h"])(r).then(function(e){e.success?t(e.data||{}):i(e)}).catch(function(e){i(e)})})}},{key:"getSubtypeList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(V["m"])({typeId:"03"}).then(function(e){t.typeList=e.data||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"formatTag",value:function(e,t){return(this.typeList.find(function(t){return t.id===e.subtypeId})||{}).name}},{key:"formattCurrency",value:function(e){var t=this.currencyList.find(function(t){return t.id===e});return t?"".concat(t.name,"(").concat(t.sign,")"):"--"}},{key:"currentChange",value:function(e){this.pagination.page=e,this.getPriceList()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"geCurrencyList",value:function(){var e=this,t={page:1,size:999};Object(V["e"])(t).then(function(t){if(t.success){var i=t.data||{};e.currencyList=i.result||[]}}).catch(function(e){return e})}},{key:"created",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getSubtypeList();case 3:this.getPriceList(),this.getCountryList(),this.geCurrencyList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(d["e"]);H=u["a"]([Object(d["a"])({name:"",components:{},props:{priceTypeList:{type:Array,default:function(){return[]}},supplierList:{type:Array,default:function(){return[]}},priceType:{type:String,default:""}}})],H);var Q=H,W=Q,U=(i("155b"),Object(I["a"])(W,Y,E,!1,null,"39c1c107",null)),X=U.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px",cursor:"pointer"},attrs:{span:12}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"my-popover"},model:{value:e.myPopoverVisible,callback:function(t){e.myPopoverVisible=t},expression:"myPopoverVisible"}},[r("div",[r("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},e._l(e.priceTypeList,function(t){return r("li",{key:t.value,staticClass:"el-select-dropdown__item",on:{click:function(i){return e.priceTypeChange(t.value)}}},[r("span",[e._v("\n                    "+e._s(t.label)+"\n                  ")])])}),0)]),r("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("span",[e._v("\n                "+e._s(e.formattPriceType(e.priceType,e.priceTypeList))+"\n              ")]),r("i",{staticClass:"el-icon-caret-bottom"})])])],1)],1),r("div",{staticStyle:{"padding-top":"10px"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"仓库"},on:{change:e.getTableData},model:{value:e.searchForm.warehouseId,callback:function(t){e.$set(e.searchForm,"warehouseId",t)},expression:"searchForm.warehouseId"}},e._l(e.warehouseList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"供应商"},on:{change:function(t){return e.getTableData("")}},model:{value:e.searchForm.custId,callback:function(t){e.$set(e.searchForm,"custId",t)},expression:"searchForm.custId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:e.getTableData},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow,callback:function(t){e.popoverShow=t},expression:"popoverShow"}},[r("div",{staticStyle:{padding:"8px 15px 0 0"}},[r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.handleClear}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleConfirm}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading,expression:"cardLoading"}],staticStyle:{height:"calc(100vh - 280px)"}},[0===e.cardList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):r("div",e._l(e.cardList,function(t,i){return r("div",{key:i,staticClass:"el-card is-hover-shadow",class:{"active-card":e.selectCard.id===t.id},staticStyle:{"font-size":"12px","margin-bottom":"10px",cursor:"pointer"},on:{click:function(i){return e.onRow(t)}}},[r("div",{staticClass:"el-card__body"},[r("el-row",{staticStyle:{"padding-bottom":"10px"}},[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{attrs:{effect:"dark",content:"待审核",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-zero"})]):e._e(),4===t.auditing?r("el-tooltip",{attrs:{effect:"dark",content:"已通过",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-one"})]):e._e(),3===t.auditing?r("el-tooltip",{attrs:{effect:"dark",content:"已拒绝",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-two"})]):e._e(),2===t.auditing?r("el-tooltip",{attrs:{effect:"dark",content:"审核中",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-three"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n                    "+e._s(t.warehouseName)+"\n                  ")])],1),r("el-row",[r("el-col",{attrs:{span:3}},[e._v("\n                    供应商\n                  ")]),r("el-col",{attrs:{span:21}},[e._v("\n                    "+e._s(t.fromCustName)+"\n                  ")])],1),r("el-row",[r("el-col",{attrs:{span:4}},[1===t.effective?r("span",{staticClass:"btn-tip-blue"},[e._v("待生效")]):2===t.effective?r("span",{staticClass:"btn-tip-green"},[e._v("生效中")]):3===t.effective?r("span",{staticClass:"btn-tip-grey"},[e._v("已失效")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:16}},[e._v("\n                    "+e._s(e.formatTime(t))+"\n                  ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("\n                    聚货通价\n                  ")])],1)],1)])}),0)]),r("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{small:"","current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isRightShow,expression:"isRightShow"}]},[r("el-form",{ref:"editForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{prop:"warehouseId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("\n                  仓库\n                ")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.warehouseId,expression:"selectForm.warehouseId"}],attrs:{slot:"label",content:e.selectForm.warehouseName,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.warehouseId,callback:function(t){e.$set(e.selectForm,"warehouseId",t)},expression:"selectForm.warehouseId"}},e._l(e.warehouseList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商：",prop:"toCustSubtype"}},[r("div",{staticStyle:{padding:"0 10px"}},[e._v("\n                "+e._s(e.selectForm.fromCustName)+"\n              ")])])],1),r("el-col",{attrs:{span:3}},[e.isView?r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getHistoryPrice,change:e.onHistory},model:{value:e.historyId,callback:function(t){e.historyId=t},expression:"historyId"}},e._l(e.historyList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"-"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1):e._e()],1)],1),r("div",{staticClass:"item-read"},[r("el-form-item",{attrs:{label:"重量单位：",prop:"umWeight"}},[r("div",{staticStyle:{width:"60px"}},["T"===e.selectForm.umWeight?r("span",[e._v("\n                T-吨\n              ")]):e._e(),"LBS"===e.selectForm.umWeight?r("span",[e._v("\n                LB-磅\n              ")]):e._e(),"KGS"===e.selectForm.umWeight?r("span",[e._v("\n                KG-公斤\n              ")]):e._e(),"OZS"===e.selectForm.umWeight?r("span",[e._v("\n                OZ-盎\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"长度单位：",prop:"umLength"}},[r("div",{staticStyle:{width:"60px"}},["FT"===e.selectForm.umLength?r("span",[e._v("\n                FT-英尺\n              ")]):e._e(),"M"===e.selectForm.umLength?r("span",[e._v("\n                M-米\n              ")]):e._e(),"CM"===e.selectForm.umLength?r("span",[e._v("\n                CM-厘米\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"货币单位：",prop:"currencyId"}},[e.selectForm.currencyId?r("span",[e._v("\n              "+e._s(e.selectForm.currencyId)+"\n            ")]):e._e()])],1),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"有效时间","label-width":"90px",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"240px","margin-right":"20px"},attrs:{disabled:e.isView,clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1),r("el-form-item",{attrs:{label:"单票最低收费","label-width":"110px",prop:"floorPrice"}},[r("el-input-number",{staticClass:"input-number-valiate",attrs:{disabled:e.isView,controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.floorPrice,callback:function(t){e.$set(e.selectForm,"floorPrice",t)},expression:"selectForm.floorPrice"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[r("div",{directives:[{name:"show",rawName:"v-show",value:!e.historyId,expression:"!historyId"}]},[r("el-popover",{directives:[{name:"show",rawName:"v-show",value:2===e.selectForm.auditing,expression:"selectForm.auditing === 2"}],attrs:{placement:"bottom",trigger:"click"},on:{show:e.onShow,hide:e.onHide},model:{value:e.auditShow,callback:function(t){e.auditShow=t},expression:"auditShow"}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}],staticStyle:{"padding-right":"15px"}},[r("el-form",{ref:"auditForm",attrs:{model:e.auditForm,rules:e.auditRules,"label-width":"90px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"审核状态：",prop:"auditing","label-width":"110px"}},[r("el-radio-group",{model:{value:e.auditForm.auditing,callback:function(t){e.$set(e.auditForm,"auditing",t)},expression:"auditForm.auditing"}},[r("el-radio",{attrs:{label:4}},[e._v("\n                          通过\n                        ")]),r("el-radio",{attrs:{label:3}},[e._v("\n                          拒绝\n                        ")])],1)],1),3===e.auditForm.auditing?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"reason","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:100,placeholder:"请输入原因"},model:{value:e.auditForm.reason,callback:function(t){e.$set(e.auditForm,"reason",t)},expression:"auditForm.reason"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.auditShow=!1}}},[e._v("\n                        取消\n                      ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.auditRow}},[e._v("\n                        确认\n                      ")])],1)],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n                  审核\n                ")])],1),r("el-button",{directives:[{name:"show",rawName:"v-show",value:1===e.selectForm.auditing,expression:"selectForm.auditing === 1"}],attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n                审核\n              ")])],1)]),3===e.selectForm.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因"}},[r("span",[e._v(e._s(e.selectCard.reason))])])],1):e._e()],1)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isTableShow,expression:"isTableShow"}]},[r("div",{staticClass:"table-header-title"},[e._v("\n          供应商报价\n        ")]),r("el-table",{ref:"priceTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"span-method":e.tableDataSpanMethod,height:"calc(100vh - 380px)",border:""}},[r("el-table-column",{attrs:{prop:"name",width:"150",label:"收费项目","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"type",width:"100",label:"计费方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.formatType(t.row.type))+"\n            ")]}}])}),r("el-table-column",{attrs:{width:"150",label:"计费配置","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[5===t.row.type||6===t.row.type?r("span",[e._v(e._s(t.row.cellName))]):t.row.min&&t.row.max?r("span",[e._v(e._s(t.row.min+"-"+t.row.max))]):r("span",[e._v("单位单价")])]}}])}),r("el-table-column",{attrs:{label:"价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.price))])]}}])}),r("el-table-column",{attrs:{"min-width":"120",label:"备注"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.remark))])]}}])})],1)],1)],1)])],1)},J=[],K=(i("c5f6"),i("a8db")),Z=i("5b63");function ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function te(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ee(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ee(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var ie=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isActive=!0,e.isView=!0,e.selectLoading=!1,e.cardLoading=!1,e.formLoading=!1,e.isRightShow=!1,e.popoverShow=!1,e.auditShow=!1,e.myPopoverVisible=!1,e.isTableShow=!1,e.searchForm={warehouseId:void 0,auditing:void 0,custId:void 0,times:[]},e.selectCard={},e.selectForm={fromCustName:"",id:void 0,warehouseId:void 0,warehouseName:void 0,refStandard:void 0,auditing:void 0,reason:void 0,refId:void 0,floorPrice:void 0,countryId:void 0,toCustSubtype:void 0,umWeight:void 0,umLength:void 0,currencyId:void 0,associatedAgents:[],ifStandard:!0,times:[],country:{}},e.formRules={warehouseId:[{required:!0,message:"请选择仓库",trigger:"change"}],toCustSubtype:[{message:"请选择报价对象",trigger:"change"}],refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],ifStandard:[{required:!0,message:"请选择价格标准",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],refStandard:[{required:!0,message:"请选择有效时间",trigger:"change"}],floorPrice:[{required:!0,message:"单票最低收费不能为空",trigger:"change"}]},e.pagination={page:1,size:10,total:0},e.auditForm={auditing:void 0,reason:void 0},e.auditRules={auditing:[{required:!0,message:"请选择审核状态",trigger:"change"}]},e.auditList=[{name:"待审核",id:1},{name:"已通过",id:4},{name:"已拒绝",id:3},{name:"审核中",id:2}],e.warehouseList=[],e.cardList=[],e.historyList=[],e.tableData=[],e.settlementList=[{id:0,name:"按重量"},{id:1,name:"按体积"},{id:2,name:"按金额"},{id:3,name:"按票"},{id:4,name:"按箱"},{id:5,name:"按车"},{id:6,name:"按柜"},{id:7,name:"按里程"},{id:8,name:"按时间"},{id:9,name:"按托"},{id:"A",name:"按个数"}],e.spanArr1=[],e.spanArr2=[],e.spanNum1=0,e.spanNum2=0,e.historyId="",e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"auditRow",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t={},1!==this.selectCard.auditing){e.next=5;break}t={tag:2,id:this.selectCard.id,reason:""},e.next=9;break;case 5:if(this.$refs.auditForm,3===this.auditForm.auditing||4===this.auditForm.auditing){e.next=8;break}return e.abrupt("return");case 8:this.selectLoading=!0;case 9:return t={tag:this.auditForm.auditing,id:this.selectCard.id,reason:this.auditForm.reason},e.prev=10,e.next=13,Object(Z["b"])(t);case 13:e.sent,this.$message({type:"success",message:"审核成功"}),this.auditShow=!1,this.getTableData(this.selectCard.id),this.resetForm(),this.selectLoading=!1,e.next=25;break;case 21:return e.prev=21,e.t0=e["catch"](10),this.selectLoading=!1,e.abrupt("return",e.t0);case 25:case"end":return e.stop()}},e,this,[[10,21]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getHistoryPrice",value:function(){var e=this;this.selectLoading=!0;var t={id:this.selectCard.id};Object(Z["e"])(t).then(function(t){var i=t.data||[];e.historyList=i,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onHistory",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,this.onRow(this.selectCard);case 3:e.next=7;break;case 5:return e.next=7,this.getRowDetail(t);case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onRow",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.formLoading){e.next=2;break}return e.abrupt("return");case 2:return this.resetForm(),this.formLoading=!0,this.isRightShow=!0,this.selectCard=te({},t),e.next=8,this.getRowDetail(t.id);case 8:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRowDetail",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r,a,s,n,o,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.formLoading=!0,e.prev=1,e.next=4,Object(Z["f"])({id:t});case 4:i=e.sent,r=i.data||{},a=r.priceList,s=r.endTime,n=r.startTime,o=Object(K["a"])(r,["priceList","endTime","startTime"]),this.selectForm=te({},o),n&&s&&(c=x()(n).format("YYYY-MM-DD"),l=x()(s).format("YYYY-MM-DD"),this.$set(this.selectForm,"times",[c,l])),this.tableData=a,this.getSpanArr(this.tableData),this.isTableShow=!0,this.formLoading=!1,e.next=19;break;case 15:return e.prev=15,e.t0=e["catch"](1),this.formLoading=!1,e.abrupt("return",e.t0);case 19:case"end":return e.stop()}},e,this,[[1,15]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSpanArr",value:function(e){for(var t=0;t<e.length;t++)0===t?(this.spanArr1.push(1),this.spanNum1=0,this.spanArr2.push(1),this.spanNum2=0):e[t].name===e[t-1].name?(this.spanArr1[this.spanNum1]+=1,this.spanArr1.push(0),e[t].type===e[t-1].type&&(this.spanArr2[this.spanNum2]+=1,this.spanArr2.push(0))):(this.spanArr1.push(1),this.spanNum1=t,this.spanArr2.push(1),this.spanNum2=t)}},{key:"tableDataSpanMethod",value:function(e){e.row,e.column;var t=e.rowIndex,i=e.columnIndex;if(0===i){var r=this.spanArr1[t],a=r>0?1:0;return{rowspan:r,colspan:a}}if(1===i){var s=this.spanArr2[t],n=s>0?1:0;return{rowspan:s,colspan:n}}}},{key:"onShow",value:function(){var e=this.selectForm,t=e.auditing,i=e.reason;this.auditForm={auditing:t,reason:i}}},{key:"onHide",value:function(){this.auditForm={auditing:void 0,reason:void 0};var e=this.$refs.auditForm;this.$nextTick(function(){e.clearValidate()})}},{key:"formatType",value:function(e){var t=this.settlementList.find(function(t){return t.id===e})||{};return t.name||""}},{key:"priceTypeChange",value:function(e){this.myPopoverVisible=!1,this.$emit("priceTypeChange",e)}},{key:"formattPriceType",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label):"--"}},{key:"getWarehouseList",value:function(){var e=this;this.selectLoading=!0,Object(Z["l"])().then(function(t){e.warehouseList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getTableData",value:function(e){var t=this;this.cardLoading=!0;var i=this.searchForm,r=i.times,a=Object(K["a"])(i,["times"]),s={model:te({},a,{startTime:Array.isArray(r)&&r.length>0?r[0]:void 0,endTime:Array.isArray(r)&&r.length>0?r[1]:void 0}),page:this.pagination.page,size:this.pagination.size};Object(Z["j"])(s).then(function(){var i=Object(v["a"])(regeneratorRuntime.mark(function i(r){var a,s;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(a=r.data||{},t.cardList=a.result||[],t.pagination.total=a.total,t.resetForm(),t.cardLoading=!1,!e){i.next=10;break}if(s=t.cardList.find(function(t){return t.id===e}),!s){i.next=10;break}return i.next=10,t.onRow(s);case 10:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.cardLoading=!1,e})}},{key:"resetForm",value:function(){var e=this;this.selectForm={id:void 0,warehouseId:void 0,warehouseName:void 0,refStandard:void 0,auditing:void 0,reason:void 0,refId:void 0,floorPrice:void 0,countryId:void 0,toCustSubtype:void 0,umWeight:void 0,umLength:void 0,currencyId:void 0,associatedAgents:[],ifStandard:!0,times:[],country:{}},this.isTableShow=!1,this.isRightShow=!1,this.tableData=[],this.spanArr1=[],this.spanArr2=[],this.spanNum1=0,this.spanNum2=0,this.$nextTick(function(){var t=e.$refs.editForm,i=e.$refs.priceTable;t.clearValidate(),i.doLayout()})}},{key:"handleClear",value:function(){this.searchForm.times=[]}},{key:"handleConfirm",value:function(e){this.popoverShow=!1,this.getTableData()}},{key:"formatTime",value:function(e){var t=(e||{}).startTime,i=(e||{}).endTime;return t&&i?x()(t).format("YYYY-MM-DD")+"-"+x()(i).format("YYYY-MM-DD"):""}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.getTableData()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"created",value:function(){this.getWarehouseList(),this.getTableData()}}]),t}(d["e"]);ie=u["a"]([Object(d["a"])({name:"",components:{},props:{priceTypeList:{type:Array,default:function(){return[]}},supplierList:{type:Array,default:function(){return[]}},priceType:{type:String,default:""}}})],ie);var re=ie,ae=re,se=(i("6fb5"),Object(I["a"])(ae,G,J,!1,null,"78d3b9e0",null)),ne=se.exports,oe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px",cursor:"pointer"},attrs:{span:12}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"my-popover"},model:{value:e.myPopoverVisible,callback:function(t){e.myPopoverVisible=t},expression:"myPopoverVisible"}},[r("div",[r("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},e._l(e.priceTypeList,function(t){return r("li",{key:t.value,staticClass:"el-select-dropdown__item",on:{click:function(i){return e.priceTypeChange(t.value)}}},[r("span",[e._v("\n                    "+e._s(t.label)+"\n                  ")])])}),0)]),r("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("span",[e._v("\n                "+e._s(e.formattPriceType(e.priceType,e.priceTypeList))+"\n              ")]),r("i",{staticClass:"el-icon-caret-bottom"})])])],1)],1),r("div",{staticStyle:{"padding-top":"10px"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{change:e.getTableData},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow1,callback:function(t){e.popoverShow1=t},expression:"popoverShow1"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"目的国","label-width":"60px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"60px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("sea")},change:e.onServiceSea},model:{value:e.searchForm.bscId,callback:function(t){e.$set(e.searchForm,"bscId",t)},expression:"searchForm.bscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商","label-width":"60px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.custId,callback:function(t){e.$set(e.searchForm,"custId",t)},expression:"searchForm.custId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.handleClear("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("1")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.bscName,callback:function(t){e.$set(e.searchForm,"bscName",t)},expression:"searchForm.bscName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:e.getTableData},model:{value:e.searchForm.audit,callback:function(t){e.$set(e.searchForm,"audit",t)},expression:"searchForm.audit"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow2,callback:function(t){e.popoverShow2=t},expression:"popoverShow2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.handleClear("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("2")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading,expression:"cardLoading"}],staticStyle:{height:"calc(100vh - 280px)"}},[0===e.cardList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):r("div",e._l(e.cardList,function(t,i){return r("div",{key:i,staticClass:"el-card is-hover-shadow",class:{"active-card":e.selectCard.id===t.id},staticStyle:{"font-size":"12px","margin-bottom":"10px",cursor:"pointer"},on:{click:function(i){return e.onRow(t)}}},[r("div",{staticClass:"el-card__body"},[r("el-row",[r("el-col",{attrs:{span:1}},["0"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"待审核",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-zero"})]):e._e(),"1"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已通过",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-one"})]):e._e(),"2"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已拒绝",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-two"})]):e._e(),"3"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"审核中",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-three"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n                    "+e._s(t.bsc.value)+"\n                  ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                    供应商\n                  ")]),r("el-col",{attrs:{span:21}},[e._v("\n                    "+e._s(t.cust.value)+"\n                  ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:24}},[e._v("\n                    "+e._s((t.portsFrom||{}).value)+" --- "+e._s((t.portsTo||{}).value)+"\n                  ")])],1),r("el-row",[r("el-col",{attrs:{span:3}},["1"===t.status?r("span",{staticClass:"btn-tip-green"},[e._v("\n                      生效中\n                    ")]):e._e(),"0"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                      待生效\n                    ")]):e._e(),"2"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                      已失效\n                    ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:13}},[e._v("\n                    "+e._s(e.formatTime(t.period))+"\n                  ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                      "+e._s((t.subtype||{}).value)+"\n                    ")]),e._v(" \n                    "),t.loadType?r("span",{staticClass:"border-tip-blue"},[e._v("\n                      "+e._s(e.formatType(t.loadType))+"\n                    ")]):e._e()])],1)],1)])}),0)]),r("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{small:"","current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isRightShow,expression:"isRightShow"}]},[r("el-form",{ref:"editForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"业务类型",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:e.isView,loading:e.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"bscId","label-width":"75px"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.bscId,expression:"selectForm.bscId"}],attrs:{slot:"label",content:e.selectForm.bscName+"/"+e.selectForm.bscCode,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.bscId,callback:function(t){e.$set(e.selectForm,"bscId",t)},expression:"selectForm.bscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商"}},[e._v("\n              "+e._s(e.selectForm.custName)+"\n            ")])],1),r("el-col",{attrs:{span:3}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getHistoryPrice,change:e.onHistory},model:{value:e.historyId,callback:function(t){e.historyId=t},expression:"historyId"}},e._l(e.historyList,function(t,i){return r("el-option",{key:i,attrs:{label:e.formatTime(t.period),value:t.id}})}),1)],1)],1),r("div",{staticClass:"item-read"},[e.selectForm.portsFrom||e.selectForm.portsTo?r("el-form-item",{staticStyle:{"margin-left":"20px"},attrs:{"label-width":"200"}},[r("span",{staticClass:"word-limit"},[e._v("\n              "+e._s((e.selectForm.portsFrom||{}).value)+" --- "+e._s((e.selectForm.portsTo||{}).value)+"\n            ")])]):e._e(),r("el-form-item",{attrs:{label:"重量单位：",prop:"umWeight"}},[r("div",{staticStyle:{width:"60px"}},["T"===e.selectForm.umWeight||"TS"===e.selectForm.umWeight?r("span",[e._v("\n                T-吨\n              ")]):e._e(),"LB"===e.selectForm.umWeight||"LBS"===e.selectForm.umWeight?r("span",[e._v("\n                LB-磅\n              ")]):e._e(),"KG"===e.selectForm.umWeight||"KGS"===e.selectForm.umWeight?r("span",[e._v("\n                KG-公斤\n              ")]):e._e(),"OZ"===e.selectForm.umWeight||"OZS"===e.selectForm.umWeight?r("span",[e._v("\n                OZ-盎\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"长度单位：",prop:"umLength"}},[r("div",{staticStyle:{width:"60px"}},["FT"===e.selectForm.umLength?r("span",[e._v("\n                FT-英尺\n              ")]):e._e(),"M"===e.selectForm.umLength?r("span",[e._v("\n                M-米\n              ")]):e._e(),"CM"===e.selectForm.umLength?r("span",[e._v("\n                CM-厘米\n              ")]):e._e()])]),"1"!==e.selectForm.subtypeId&&"2"!==e.selectForm.subtypeId?r("el-form-item",{attrs:{label:"货币单位：",prop:"currencyId"}},[e.selectForm.currencyId?r("span",[e._v(e._s(e.selectForm.currencyId))]):e._e(),e.selectForm.currencyName?r("span",[e._v(e._s("-"+e.selectForm.currencyName))]):e._e()]):e._e(),"1"!==e.selectForm.subtypeId&&"2"!==e.selectForm.subtypeId||"2"!==e.selectForm.loadType?e._e():r("el-form-item",{attrs:{label:"整柜货币单位：","label-width":"130px",prop:"currencyId1"}},[e.selectForm.currencyId1?r("span",[e._v(e._s(e.selectForm.currencyId1))]):e._e(),e.selectForm.currencyName1?r("span",[e._v(e._s("-"+e.selectForm.currencyName1))]):e._e()]),"1"!==e.selectForm.subtypeId&&"2"!==e.selectForm.subtypeId||"3"!==e.selectForm.loadType?e._e():r("el-form-item",{attrs:{label:"拼箱货币单位：","label-width":"130px",prop:"currencyId2"}},[e.selectForm.currencyId2?r("span",[e._v(e._s(e.selectForm.currencyId2))]):e._e(),e.selectForm.currencyName2?r("span",[e._v(e._s("-"+e.selectForm.currencyName2))]):e._e()])],1),r("el-row",[r("el-col",{attrs:{span:20}},[e.selectForm.subtypeId&&e.selectForm.bscId?r("el-form-item",{attrs:{label:"请选择",prop:"loadType"}},[r("el-radio-group",{attrs:{disabled:e.isView},model:{value:e.selectForm.loadType,callback:function(t){e.$set(e.selectForm,"loadType",t)},expression:"selectForm.loadType"}},e._l(e.typeOption,function(t,i){return r("el-radio",{key:i,attrs:{label:t.value}},[e._v("\n                  "+e._s(t.label)+"\n                ")])}),1)],1):e._e(),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"310px","margin-right":"20px"},attrs:{disabled:e.isView,clearable:!1,"default-time":["00:00:00","23:59:59"],"unlink-panels":"",type:"datetimerange",align:"left",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["0"===e.selectForm.audit?r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text",size:"small"},on:{click:e.auditRow}},[e._v("\n              审核\n            ")]):e._e(),r("el-popover",{directives:[{name:"show",rawName:"v-show",value:"3"===e.selectForm.audit,expression:"selectForm.audit === '3'"}],attrs:{placement:"bottom-start",trigger:"click"},on:{show:e.onShow,hide:e.onHide},model:{value:e.auditShow,callback:function(t){e.auditShow=t},expression:"auditShow"}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}],staticStyle:{"padding-right":"15px"}},[r("el-form",{ref:"auditForm",attrs:{model:e.auditForm,rules:e.auditRules,"label-width":"90px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"审核状态：",prop:"audit","label-width":"110px"}},[r("el-radio-group",{model:{value:e.auditForm.audit,callback:function(t){e.$set(e.auditForm,"audit",t)},expression:"auditForm.audit"}},[r("el-radio",{attrs:{label:"1"}},[e._v("\n                        通过\n                      ")]),r("el-radio",{attrs:{label:"2"}},[e._v("\n                        拒绝\n                      ")])],1)],1),"2"===e.auditForm.audit?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"remark","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:100,placeholder:"请输入原因"},model:{value:e.auditForm.remark,callback:function(t){e.$set(e.auditForm,"remark",t)},expression:"auditForm.remark"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.auditShow=!1}}},[e._v("\n                      取消\n                    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.auditRow}},[e._v("\n                      确认\n                    ")])],1)],1)],1),r("el-button",{staticStyle:{"padding-right":"10px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n                审核\n              ")])],1)],1)],1),"2"===e.selectForm.audit?r("div",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"拒绝原因：","label-width":"90px"}},[e._v("\n            "+e._s(e.selectForm.remark)+"\n          ")])],1):e._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isTableShow,expression:"isTableShow"}]},[e.aAxisData.length?r("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"520",border:"",resizable:"",size:"small","auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"150",title:"服务机构","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.trans||{}).orgName)+"\n            ")]}}],null,!1,3785199123)}),r("vxe-table-column",{attrs:{width:"150",title:"服务编码","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.trans||{}).serviceCode)+"\n            ")]}}],null,!1,958355582)}),r("vxe-table-column",{attrs:{width:"180",title:"截止报关 / 起运时间","show-header-overflow":!0,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.formatDays(t.row.trans||{}))+"\n            ")]}}],null,!1,2714159884)}),e._l(e.aAxisData,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[r("span",[e._v(e._s(t.row.prices[i].price))])])]}}],null,!0)})}),r("vxe-table-column",{attrs:{"min-width":"120",title:"备注","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.remark))])]}}],null,!1,186672324)})],2):e._e()],1)],1)])],1)},ce=[],le=i("615c");function ue(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function de(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ue(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ue(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var me=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isActive=!0,e.isView=!0,e.selectLoading=!1,e.formLoading=!1,e.isRightShow=!1,e.cardLoading=!1,e.popoverShow1=!1,e.popoverShow2=!1,e.myPopoverVisible=!1,e.isTableShow=!1,e.auditShow=!1,e.historyId="",e.dayjs=x.a,e.pagination={page:1,size:10,total:0},e.selectCard={},e.searchForm={custId:void 0,subtypeId:void 0,bscId:void 0,bscName:void 0,countryId:void 0,audit:void 0,effect:void 0,expire:void 0,times:[]},e.selectForm={custName:"",subtypeId:void 0,subtypeName:void 0,portsFrom:{key:void 0,value:void 0},portsTo:{key:void 0,value:void 0},stdId:void 0,audit:void 0,status:void 0,remark:void 0,loadType:void 0,bscId:void 0,bscName:void 0,bscCode:void 0,refId:void 0,currencyId:void 0,currencyId1:void 0,currencyId2:void 0,countryId:void 0,category:void 0,umWeight:void 0,umLength:void 0,agentId:[],mode:"0",times:[],sections:[{lower:void 0,upper:void 0}]},e.formRules={subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],countryId:[{required:!1,message:"请选择目的国",trigger:"change"}],bscId:[{required:!0,message:"请选择服务",trigger:"change"}],category:[{required:!0,message:"请选择报价对象",trigger:"change"}],refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],loadType:[{required:!0,message:"请选择服务类型",trigger:"change"}],mode:[{required:!0,message:"请选择价格标准",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],stdId:[{required:!0,message:"请选择有效时间",trigger:"change"}]},e.auditForm={audit:void 0,remark:void 0},e.auditRules={audit:[{required:!0,message:"请选择审核状态",trigger:"change"}]},e.cardList=[],e.typeList=[],e.countryList=[],e.serviceList=[],e.typeOption=[],e.historyList=[],e.tableData=[],e.aAxisData=[],e.weekdays=[{label:"星期一",value:1},{label:"星期二",value:2},{label:"星期三",value:3},{label:"星期四",value:4},{label:"星期五",value:5},{label:"星期六",value:6},{label:"星期日",value:7}],e.auditList=[{name:"待审核",id:"0"},{name:"已通过",id:"1"},{name:"已拒绝",id:"2"},{name:"审核中",id:"3"}],e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"auditRow",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={},this.$refs.auditForm,this.formLoading=!0,t="0"===this.selectCard.audit?{audit:"3",id:this.selectCard.id}:{audit:this.auditForm.audit,id:this.selectCard.id,reason:this.auditForm.remark},e.prev=4,e.next=7,Object(le["a"])(t);case 7:return e.sent,this.$message({type:"success",message:"审核成功"}),this.auditShow=!1,this.getTableData(),e.next=13,this.getRowDetail(this.selectCard.id);case 13:this.formLoading=!1,e.next=20;break;case 16:return e.prev=16,e.t0=e["catch"](4),this.formLoading=!1,e.abrupt("return",e.t0);case 20:case"end":return e.stop()}},e,this,[[4,16]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getHistoryPrice",value:function(){var e=this;this.selectLoading=!0;var t={id:this.selectCard.id,mode:this.selectForm.mode,page:1,size:9999};Object(le["j"])(t).then(function(t){var i=t.data||{};e.historyList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onHistory",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.aAxisData=[],this.tableData=[],t){e.next=7;break}return e.next=5,this.onRow(this.selectCard);case 5:e.next=9;break;case 7:return e.next=9,this.getRowDetail(t);case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onShow",value:function(){var e=this.selectForm,t=e.audit,i=e.remark;this.auditForm={audit:t,remark:i}}},{key:"onHide",value:function(){this.auditForm={audit:void 0,remark:void 0};var e=this.$refs.auditForm;this.$nextTick(function(){e.clearValidate()})}},{key:"onRow",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.formLoading){e.next=2;break}return e.abrupt("return");case 2:return this.formLoading=!0,this.resetForm(),this.isView=!0,this.selectCard=de({},t),this.isRightShow=!0,e.next=9,this.getServiceList("sel");case 9:return e.next=11,this.getRowDetail(t.id);case 11:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getRowDetail",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r,a,s,n,o,c,l,u,d,m,p,h,f,v,g,y,b,w=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(le["k"])({id:t});case 3:return i=e.sent,r=i.data||{},a=r.cust,s=r.currency,n=r.currency1,o=r.currency2,c=r.bsc,l=r.period,u=r.specials,d=r.subtype,m=r.rows,p=r.refId,h=r.loadType,f=Object(K["a"])(r,["cust","currency","currency1","currency2","bsc","period","specials","subtype","rows","refId","loadType"]),this.selectForm=de({},f),this.selectForm.refId=p,this.selectForm.custName=a.value,this.selectForm.loadType=h,this.selectForm.bscId=1*c.key,this.selectForm.bscName=c.value,this.selectForm.subtypeId=d.key,this.selectForm.subtypeName=d.value,l.effect&&l.expire&&(v=x()(l.effect).format("YYYY-MM-DD HH:mm:ss"),g=x()(l.expire).format("YYYY-MM-DD HH:mm:ss"),this.$set(this.selectForm,"times",[v,g])),this.selectForm.agentId=u.map(function(e){return e.key}),this.selectForm.currencyName=s.value,this.selectForm.currencyId=s.key,this.selectForm.currencyName1=n.value,this.selectForm.currencyId1=n.key,this.selectForm.currencyName2=o.value,this.selectForm.currencyId2=o.key,y=[],m.map(function(e,t){y.push(e)}),this.tableData=y,Array.isArray(m)&&m.length>0&&(b=m[0].prices||[],this.aAxisData=b.map(function(e,t){var i=e.x||{},r={label:"",aAxisArr:[]};return"5"===h&&"0"===e.type?(r.label="重量",r.aAxisArr.push({index:t,label:"".concat(i.lower,"-").concat(i.upper)})):"5"===h&&"1"===e.type?(r.label="方数",r.aAxisArr.push({index:t,label:"".concat(i.lower,"-").concat(i.upper)})):"1"===h||"2"===h||"4"===h?r.label=i:"0"!==h&&"3"!==h||(r.label="".concat(i.lower,"-").concat(i.upper)),r})),this.getSvTypes(),e.next=29,this.getServiceList("sel");case 29:this.serviceList.map(function(e){e.id===w.selectForm.bscId&&(w.selectForm.bscCode=e.serviceCode)}),this.isTableShow=!0,this.formLoading=!1,e.next=38;break;case 34:return e.prev=34,e.t0=e["catch"](0),this.formLoading=!1,e.abrupt("return",e.t0);case 38:case"end":return e.stop()}},e,this,[[0,34]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"resetForm",value:function(){this.selectForm={subtypeId:void 0,subtypeName:void 0,portsFrom:{key:void 0,value:void 0},portsTo:{key:void 0,value:void 0},stdId:void 0,audit:void 0,status:void 0,remark:void 0,loadType:void 0,bscId:void 0,bscName:void 0,bscCode:void 0,refId:void 0,currencyId:void 0,currencyId1:void 0,currencyId2:void 0,countryId:void 0,category:void 0,umWeight:void 0,umLength:void 0,agentId:[],mode:"0",times:[],sections:[{lower:void 0,upper:void 0}]},this.tableData=[],this.historyId="",this.isTableShow=!1,this.isRightShow=!1;var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"getSvTypes",value:function(){var e=this;if(this.selectForm.subtypeId){var t={type:"BOOKING_BUSINESS_TYPE"+this.selectForm.subtypeId};Object(le["r"])(t).then(function(t){var i=t.data||[];"0"===e.selectForm.subtypeId?e.typeOption=[{value:"0",label:"散货"},{value:"1",label:"包板"}]:e.typeOption=i}).catch(function(e){return e})}}},{key:"formatDays",value:function(e){var t=this.weekdays.find(function(t){return t.value===e.shipDay})||{},i=this.weekdays.find(function(t){return t.value===e.customDay})||{};return(i.label||"")+" / "+(t.label||"")}},{key:"priceTypeChange",value:function(e){this.myPopoverVisible=!1,this.$emit("priceTypeChange",e)}},{key:"formattPriceType",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label):"--"}},{key:"getTableData",value:function(){var e=this;this.cardLoading=!0;var t=this.searchForm,i=t.times,r=Object(K["a"])(t,["times"]),a={model:de({},r,{effect:Array.isArray(i)&&i.length>0?i[0]+" 00:00:00":void 0,expire:Array.isArray(i)&&i.length>0?i[1]+" 23:59:59":void 0}),page:this.pagination.page,size:this.pagination.size};Object(le["q"])(a).then(function(t){var i=t.data||{};e.cardList=i.result||[],e.pagination.total=i.total,e.cardLoading=!1}).catch(function(t){return e.cardLoading=!1,t})}},{key:"getServiceList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,i={page:1,size:9999,model:{countryToId:"sea"===t?this.searchForm.countryId:this.selectForm.countryId,conveyance:"sea"===t?this.searchForm.subtypeId:this.selectForm.subtypeId}},e.next=4,Object(le["f"])(i).then(function(e){var t=e.data||{};r.serviceList=(t.result||[]).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}),r.selectLoading=!1}).catch(function(e){return r.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleClear",value:function(e){switch(e){case"1":this.searchForm.countryId=void 0,this.searchForm.custId=void 0,this.searchForm.bscId=void 0,this.searchForm.bscName=void 0;break;case"2":this.searchForm.times=[];break;default:break}}},{key:"handleConfirm",value:function(e){"1"===e?this.popoverShow1=!1:"2"===e&&(this.popoverShow2=!1),this.getTableData()}},{key:"onCountry",value:function(){this.searchForm.bscId=void 0,this.searchForm.bscName=void 0}},{key:"onServiceSea",value:function(){var e=this;this.searchForm.bscId?this.serviceList.map(function(t){t.id===e.searchForm.bscId&&(e.searchForm.bscName=t.name)}):this.searchForm.bscName=void 0}},{key:"getSubtypeList",value:function(){var e=this;this.selectLoading=!0,Object(le["n"])({typeId:"02"}).then(function(t){var i=t.data||[];e.typeList=i,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(le["h"])().then(function(t){var i=t.data||{};e.countryList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"formatTime",value:function(e){var t=(e||{}).effect,i=(e||{}).expire;return x()(t).format("YYYY-MM-DD HH:mm")+"-"+x()(i).format("YYYY-MM-DD HH:mm")}},{key:"formatType",value:function(e){var t;switch(e){case"0":t="散货";break;case"1":t="包板";break;case"2":t="整柜";break;case"3":t="拼箱";break;case"4":t="整车";break;case"5":t="散货";break;default:break}return t}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.getTableData()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"created",value:function(){this.getTableData(),this.getCountryList(),this.getSubtypeList()}}]),t}(d["e"]);me=u["a"]([Object(d["a"])({name:"",components:{},props:{priceTypeList:{type:Array,default:function(){return[]}},supplierList:{type:Array,default:function(){return[]}},priceType:{type:String,default:""}}})],me);var pe=me,he=pe,fe=(i("9e61"),Object(I["a"])(he,oe,ce,!1,null,"a86cc980",null)),ve=fe.exports,ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px",cursor:"pointer"},attrs:{span:12}},[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click","popper-class":"my-popover"},model:{value:e.myPopoverVisible,callback:function(t){e.myPopoverVisible=t},expression:"myPopoverVisible"}},[r("div",[r("ul",{staticClass:"el-scrollbar__view el-select-dropdown__list"},e._l(e.priceTypeList,function(t){return r("li",{key:t.value,staticClass:"el-select-dropdown__item",on:{click:function(i){return e.priceTypeChange(t.value)}}},[r("span",[e._v("\n                    "+e._s(t.label)+"\n                  ")])])}),0)]),r("div",{staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("span",[e._v("\n                "+e._s(e.formattPriceType(e.priceType,e.priceTypeList))+"\n              ")]),r("i",{staticClass:"el-icon-caret-bottom"})])])],1)],1),r("div",{staticStyle:{"padding-top":"10px"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{change:e.onBusiness},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow1,callback:function(t){e.popoverShow1=t},expression:"popoverShow1"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"目的国","label-width":"60px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{change:function(t){return e.onCountry("sea")}},model:{value:e.searchForm.destinationCountry,callback:function(t){e.$set(e.searchForm,"destinationCountry",t)},expression:"searchForm.destinationCountry"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"60px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.destinationCountry,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("sea")},change:e.onServiceSea},model:{value:e.searchForm.lscId,callback:function(t){e.$set(e.searchForm,"lscId",t)},expression:"searchForm.lscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商","label-width":"60px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.searchForm.custId,callback:function(t){e.$set(e.searchForm,"custId",t)},expression:"searchForm.custId"}},e._l(e.supplierList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.handleClear("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("1")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.lscName,callback:function(t){e.$set(e.searchForm,"lscName",t)},expression:"searchForm.lscName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:e.getTableData},model:{value:e.searchForm.audit,callback:function(t){e.$set(e.searchForm,"audit",t)},expression:"searchForm.audit"}},e._l(e.auditList,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow2,callback:function(t){e.popoverShow2=t},expression:"popoverShow2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"交货区域","label-width":"90px"}},[r("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n                    全选\n                  ")]),r("el-checkbox-group",{on:{change:e.handleChecked},model:{value:e.searchForm.areaId,callback:function(t){e.$set(e.searchForm,"areaId",t)},expression:"searchForm.areaId"}},e._l(e.areaList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"目的地类型","label-width":"90px"}},[r("el-radio-group",{on:{change:function(t){e.searchForm.dispatch=void 0}},model:{value:e.searchForm.purposeType,callback:function(t){e.$set(e.searchForm,"purposeType",t)},expression:"searchForm.purposeType"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:0}},[e._v("\n                      FBA\n                    ")]),r("el-radio-button",{attrs:{label:1}},[e._v("\n                      私人\n                    ")]),r("el-radio-button",{attrs:{label:2}},[e._v("\n                      自有海外仓\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"目的港关税","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.includeTax,callback:function(t){e.$set(e.searchForm,"includeTax",t)},expression:"searchForm.includeTax"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:!0}},[e._v("\n                      包税\n                    ")]),r("el-radio-button",{attrs:{label:!1}},[e._v("\n                      不包税\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"派送方式","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.dispatch,callback:function(t){e.$set(e.searchForm,"dispatch",t)},expression:"searchForm.dispatch"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      卡派\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      快递\n                    ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                      自提\n                    ")]),"1"===e.searchForm.subtypeId||"2"===e.searchForm.subtypeId?r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                      整柜直送\n                    ")]):e._e(),2===e.searchForm.purposeType?r("el-radio-button",{attrs:{label:"4"}},[e._v("\n                      到仓\n                    ")]):e._e()],1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.handleClear("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("2")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading,expression:"cardLoading"}],staticStyle:{height:"calc(100vh - 280px)"}},[0===e.cardList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):r("div",e._l(e.cardList,function(t){return r("div",{key:t.id,staticClass:"el-card is-hover-shadow",class:{"active-card":e.selectCard.id===t.id},staticStyle:{"font-size":"12px","margin-bottom":"10px",cursor:"pointer"},on:{click:function(i){return e.onRow(t)}}},[r("div",{staticClass:"el-card__body"},[r("el-row",[r("el-col",{attrs:{span:1}},["0"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"待审核",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-zero"})]):e._e(),"1"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已通过",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-one"})]):e._e(),"2"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已拒绝",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-two"})]):e._e(),"3"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"审核中",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-three"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:23}},[e._v("\n                    "+e._s(t.lsc.value)+"\n                  ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                    供应商\n                  ")]),r("el-col",{attrs:{span:21}},[e._v("\n                    "+e._s(t.cust?t.cust.value:"")+"\n                  ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:4}},[e._v("\n                    交货区域\n                  ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:16}},[e._v("\n                    "+e._s(e.formatArea(t.deliveries))+"\n                  ")])],1),r("el-row",[r("el-col",{attrs:{span:3}},["1"===t.status?r("span",{staticClass:"btn-tip-green"},[e._v("\n                      生效中\n                    ")]):e._e(),"0"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                      待生效\n                    ")]):e._e(),"2"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                      已失效\n                    ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:13}},[e._v("\n                    "+e._s(e.formatTime(t.period))+"\n                  ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                      "+e._s((t.subtype||{}).value)+"\n                    ")]),e._v(" \n                    "),r("span",{staticClass:"border-tip-blue"},[e._v("\n                      "+e._s(t.includeTax?"包税":"不包税")+"\n                    ")]),e._v(" \n                    "),r("span",{staticClass:"border-tip-blue"},["0"===t.dispatch?r("span",[e._v("\n                        卡派\n                      ")]):e._e(),"1"===t.dispatch?r("span",[e._v("\n                        快递\n                      ")]):e._e(),"2"===t.dispatch?r("span",[e._v("\n                        自提\n                      ")]):e._e(),"3"===t.dispatch?r("span",[e._v("\n                        整柜直送\n                      ")]):e._e(),"4"===t.dispatch?r("span",[e._v("\n                        到仓\n                      ")]):e._e()])])],1)],1)])}),0)]),r("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{small:"","current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isRightShow,expression:"isRightShow"}]},[r("el-form",{ref:"editForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{attrs:{label:"业务类型",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:e.isView,loading:e.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"lscId","label-width":"75px"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.lscId,expression:"selectForm.lscId"}],attrs:{slot:"label",content:e.selectForm.lscName+"/"+e.selectForm.lscCode,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.lscId,callback:function(t){e.$set(e.selectForm,"lscId",t)},expression:"selectForm.lscId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"供应商"}},[e._v("\n              "+e._s(e.selectForm.custName)+"\n            ")])],1),r("el-col",{attrs:{span:3}},[r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getHistoryPrice,change:e.onHistory},model:{value:e.historyId,callback:function(t){e.historyId=t},expression:"historyId"}},e._l(e.historyList,function(t,i){return r("el-option",{key:i,attrs:{label:e.formatTime(t.period),value:t.id}})}),1)],1)],1),r("div",{staticClass:"item-read"},["1"===e.selectForm.subtypeId||"2"===e.selectForm.subtypeId?r("el-form-item",{attrs:{label:"整柜/拼箱：","label-width":"95px",prop:"containerType"}},[r("div",{staticStyle:{width:"60px"}},["1"===e.selectForm.containerType?r("span",[e._v("\n                整柜\n              ")]):e._e(),"0"===e.selectForm.containerType?r("span",[e._v("\n                拼箱\n              ")]):e._e()])]):e._e(),r("el-form-item",{attrs:{label:"目的港关税：",prop:"includeTax","label-width":"110px"}},[r("div",{staticStyle:{width:"60px"}},[e.selectForm.includeTax?r("span",[e._v("\n                包税\n              ")]):r("span",[e._v("\n                不包税\n              ")])])]),r("el-form-item",{attrs:{label:"目的港派送方式：","label-width":"130px",prop:"dispatch"}},[r("div",{staticStyle:{width:"60px"}},["0"===e.selectForm.dispatch?r("span",[e._v("\n                卡派\n              ")]):e._e(),"1"===e.selectForm.dispatch?r("span",[e._v("\n                快递\n              ")]):e._e(),"2"===e.selectForm.dispatch?r("span",[e._v("\n                自提\n              ")]):e._e(),"3"===e.selectForm.dispatch?r("span",[e._v("\n                整柜直送\n              ")]):e._e(),"4"===e.selectForm.dispatch?r("span",[e._v("\n                到仓\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"重量单位：",prop:"umWeight"}},[r("div",{staticStyle:{width:"60px"}},["T"===e.selectForm.umWeight?r("span",[e._v("\n                T-吨\n              ")]):e._e(),"LBS"===e.selectForm.umWeight?r("span",[e._v("\n                LB-磅\n              ")]):e._e(),"KGS"===e.selectForm.umWeight?r("span",[e._v("\n                KG-公斤\n              ")]):e._e(),"OZS"===e.selectForm.umWeight?r("span",[e._v("\n                OZ-盎\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"长度单位：",prop:"umLength"}},[r("div",{staticStyle:{width:"60px"}},["FT"===e.selectForm.umLength?r("span",[e._v("\n                FT-英尺\n              ")]):e._e(),"M"===e.selectForm.umLength?r("span",[e._v("\n                M-米\n              ")]):e._e(),"CM"===e.selectForm.umLength?r("span",[e._v("\n                CM-厘米\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"货币单位：",prop:"currencyId"}},[e.selectForm.currencyId?r("span",[e._v(e._s(e.selectForm.currencyId))]):e._e(),e.selectForm.currencyName?r("span",[e._v(e._s("-"+e.selectForm.currencyName))]):e._e()])],1),r("div",{staticClass:"item-read",staticStyle:{"margin-bottom":"10px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.chargeForm.type,expression:"chargeForm.type === '0'"}]},[r("div",{staticStyle:{display:"inline-block","font-size":"14px","line-height":"28px","padding-left":"10px"}},[r("span",{directives:[{name:"show",rawName:"v-show",value:"0"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '0'"}]},[e._v("取实重")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"2"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '2'"}]},[e._v("取实重或体积重的平均值")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}]},[e._v("取实重或体积重的最大值")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}]},[e._v(" | ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm&&"0"===e.chargeForm.multiWeight,expression:"chargeForm.algorithm === '1' && chargeForm.multiWeight === '0'"}]},[e._v("先累加后比较")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm&&"1"===e.chargeForm.multiWeight,expression:"chargeForm.algorithm === '1' && chargeForm.multiWeight === '1'"}]},[e._v("先比较后累加")])]),r("el-form-item",{attrs:{label:"计量误差率(%)：",prop:"deviation","label-width":"130px"}},[e._v("\n              "+e._s(e.chargeForm.deviation)+"\n            ")]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}],attrs:{label:"分泡比率(%)：","label-width":"110px",prop:"bulky"}},[e._v("\n              "+e._s(e.chargeForm.bulky)+"\n            ")]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}],attrs:{label:"分泡条件：",prop:"fenestration"}},[e._v("\n              "+e._s(e.chargeForm.fenestration)+"\n            ")]),r("el-form-item",{attrs:{label:"单箱重量：",prop:"sbmc"}},[e._v("\n              "+e._s(e.chargeForm.sbmc)+"\n            ")]),r("el-form-item",{attrs:{label:"单票重量：",prop:"simc"}},[e._v("\n              "+e._s(e.chargeForm.simc)+"\n            ")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.type,expression:"chargeForm.type === '1'"}]},[r("el-form-item",{attrs:{label:"计量误差率(%)：","label-width":"130px",prop:"deviation"}},[e._v("\n              "+e._s(e.chargeForm.deviation)+"\n            ")]),r("el-form-item",{attrs:{label:"体积密度：",prop:"density"}},[e._v("\n              "+e._s(e.chargeForm.density)+"\n            ")])],1)]),r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"交货区域","label-width":"90px",prop:"areaId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isView,placeholder:"请选择",clearable:"",filterable:"",multiple:""},model:{value:e.selectForm.areaId,callback:function(t){e.$set(e.selectForm,"areaId",t)},expression:"selectForm.areaId"}},e._l(e.areaList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"4"!==e.selectForm.priceType?r("el-form-item",{attrs:{prop:"measureId","label-width":"105px"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("计费配置")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.measureId,expression:"selectForm.measureId"}],attrs:{slot:"label",content:e.selectForm.measureName,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("el-select",{staticStyle:{width:"140px"},attrs:{loading:e.selectLoading,disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},model:{value:e.selectForm.measureId,callback:function(t){e.$set(e.selectForm,"measureId",t)},expression:"selectForm.measureId"}},e._l(e.chargeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"310px","margin-right":"10px"},attrs:{disabled:e.isView,clearable:!1,"default-time":["00:00:00","23:59:59"],"unlink-panels":"",type:"datetimerange",align:"left",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["0"===e.selectForm.audit?r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.auditRow}},[e._v("\n              审核\n            ")]):e._e(),"3"===e.selectForm.audit?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{show:e.onShow,hide:e.onHide},model:{value:e.auditShow,callback:function(t){e.auditShow=t},expression:"auditShow"}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}],staticStyle:{"padding-right":"15px"}},[r("el-form",{ref:"auditForm",attrs:{model:e.auditForm,rules:e.auditRules,"label-width":"90px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"审核状态：",prop:"audit","label-width":"110px"}},[r("el-radio-group",{model:{value:e.auditForm.audit,callback:function(t){e.$set(e.auditForm,"audit",t)},expression:"auditForm.audit"}},[r("el-radio",{attrs:{label:"1"}},[e._v("\n                        通过\n                      ")]),r("el-radio",{attrs:{label:"2"}},[e._v("\n                        拒绝\n                      ")])],1)],1),"2"===e.auditForm.audit?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"remark","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:100,placeholder:"请输入原因"},model:{value:e.auditForm.remark,callback:function(t){e.$set(e.auditForm,"remark",t)},expression:"auditForm.remark"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.auditShow=!1}}},[e._v("\n                      取消\n                    ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.auditRow}},[e._v("\n                      确认\n                    ")])],1)],1)],1),r("el-button",{staticStyle:{"padding-right":"10px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n                审核\n              ")])],1):e._e()],1)],1),"2"===e.selectForm.audit?r("div",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"拒绝原因：","label-width":"90px"}},[e._v("\n            "+e._s(e.selectForm.remark)+"\n          ")])],1):e._e()],1),r("div",{directives:[{name:"show",rawName:"v-show",value:e.isTableShow,expression:"isTableShow"}]},[e.aAxisData.length?r("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"520",border:"",resizable:"",size:"small","auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.address||{}).value)+"\n            ")]}}],null,!1,1197677353)},[r("template",{slot:"header"},[r("span",{staticClass:"header-row"},[e._v(e._s(e.leftTitle))]),r("span",[e._v("  \\  ")]),r("span",{staticClass:"header-column"},[e._v(e._s(e.rightTitle))])])],2),e.isShowRegionalDetailCol?r("vxe-table-column",{attrs:{"show-overflow":!0,"show-header-overflow":!0,width:"200",resizable:!0,title:"区域详情",field:"regionalDetails"}}):e._e(),e._l(e.aAxisData,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[e._v("\n                "+e._s(t.row.prices[i].price)+"\n              ")])]}}],null,!0)})}),r("vxe-table-column",{attrs:{"min-width":"100",title:"参考时效(天)","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v("\n                "+e._s(t.row.prescription)+"\n              ")])]}}],null,!1,2839741414)}),r("vxe-table-column",{attrs:{"min-width":"120",title:"备注","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.remark))])]}}],null,!1,186672324)})],2):e._e()],1)],1)])],1)},ye=[],be=i("768a");function we(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function xe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?we(i,!0).forEach(function(t){Object(f["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):we(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function ke(){return{custName:"",subtypeId:void 0,subtypeName:void 0,containerType:void 0,lscId:void 0,lscName:void 0,lscCode:void 0,status:void 0,areaId:[],refId:void 0,measureId:void 0,measureName:void 0,deliveryId:void 0,deliveryName:void 0,priceType:void 0,currencyId:void 0,countryId:void 0,category:void 0,umWeight:void 0,umLength:void 0,includeTax:void 0,agentId:[],mode:"0",times:[],stdId:void 0,dispatch:void 0,includExpressFee:!1,sections:[{lower:void 0,upper:void 0}],audit:void 0,remark:""}}function Fe(){return{type:void 0,deviation:void 0,density:void 0,algorithm:void 0,bulky:void 0,fenestration:void 0,sbmc:void 0,simc:void 0,multiWeight:void 0}}var Se=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.isActive=!0,e.isView=!0,e.selectLoading=!1,e.popoverShow1=!1,e.popoverShow2=!1,e.checkAll=!1,e.isIndeterminate=!1,e.isRightShow=!1,e.cardLoading=!1,e.formLoading=!1,e.myPopoverVisible=!1,e.isTableShow=!1,e.auditShow=!1,e.dayjs=x.a,e.searchForm={custId:void 0,subtypeId:void 0,purposeType:void 0,lscId:void 0,lscName:void 0,destinationCountry:void 0,mode:void 0,areaId:[],dispatch:void 0,includeTax:void 0,audit:void 0,effect:void 0,expire:void 0,times:[]},e.selectCard={},e.pagination={page:1,size:10,total:0},e.selectForm=ke(),e.chargeForm=Fe(),e.auditForm={audit:void 0,remark:void 0},e.auditRules={audit:[{required:!0,message:"请选择审核状态",trigger:"change"}]},e.formRules={subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],countryId:[{required:!1,message:"请选择目的国",trigger:"change"}],lscId:[{required:!0,message:"请选择服务",trigger:"change"}],category:[{required:!0,message:"请选择报价对象",trigger:"change"}],refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],areaId:[{required:!0,message:"请选择交货区域",trigger:"change"}],measureId:[{required:!0,message:"请选择计费配置",trigger:"change"}],mode:[{required:!0,message:"请选择价格标准",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],stdId:[{required:!0,message:"请选择有效时间",trigger:"change"}]},e.tableData=[],e.aAxisData=[],e.typeList=[],e.countryList=[],e.serviceList=[],e.auditList=[{label:"待审核",value:0},{label:"审核中",value:3},{label:"已拒绝",value:2},{label:"已通过",value:1}],e.areaList=[],e.cardList=[],e.chargeList=[],e.historyList=[],e.historyId="",e.leftTitle="",e.rightTitle="",e.isShowRegionalDetailCol=!1,e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"auditRow",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={},t="0"===this.selectForm.audit?{audit:"3",id:this.selectCard.id}:{audit:this.auditForm.audit,id:this.selectCard.id,reason:this.auditForm.remark},this.formLoading=!0,e.prev=3,e.next=6,Object(be["a"])(t);case 6:e.sent,this.$message({type:"success",message:"审核成功"}),this.auditShow=!1,this.getTableData(),this.getRowDetail(this.selectCard.id),this.formLoading=!1,e.next=18;break;case 14:return e.prev=14,e.t0=e["catch"](3),this.formLoading=!1,e.abrupt("return",e.t0);case 18:case"end":return e.stop()}},e,this,[[3,14]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"onShow",value:function(){var e=this.selectForm,t=e.audit,i=e.remark;this.auditForm={audit:t,remark:i}}},{key:"onHide",value:function(){this.auditForm={audit:void 0,remark:void 0};var e=this.$refs.auditForm;this.$nextTick(function(){e.clearValidate()})}},{key:"getHistoryPrice",value:function(){var e=this;this.selectLoading=!0;var t={id:this.selectCard.id,mode:this.selectForm.mode,page:1,size:9999};Object(be["j"])(t).then(function(t){var i=t.data||{};e.historyList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"groupByPid",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=["5","100","101","102"],i=this.tableData[0].addressType,-1!==t.indexOf(i)){e.next=6;break}this.isShowRegionalDetailCol=!1,e.next=12;break;case 6:return this.isShowRegionalDetailCol=!0,r=this.tableData.reduce(function(e,t){var i=t.address?t.address.key:"";return i&&-1===e.indexOf(i)&&e.push(i),e},[]),a={ids:r},"5"===i&&(a.type=1),e.next=12,Object(be["t"])(a).then(function(e){s.formLoading=!1;var t=e.data||{},r=Object.keys(t).map(function(e){var r={key:e,value:t[e].map(function(e){var t="";return"101"===i&&(t=e.warehouseName),"102"===i&&(t=e.countryId+"-"+e.countryName),"100"===i&&(t=e.cityName+"-"+e.cityName),"5"===i&&(t=e.stateName),t}).join("，")};return r});s.tableData=s.tableData.map(function(e){var t=e.address?e.address.key:"";return r.map(function(i){i.key===t&&(e.regionalDetails=i.value)}),e})}).catch(function(e){return s.formLoading=!1,e});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onHistory",value:function(e){this.tableData=[],this.aAxisData=[],e?this.getRowDetail(e):this.onRow(this.selectCard)}},{key:"onRow",value:function(e){this.formLoading||(this.formLoading=!0,this.resetForm(),this.selectCard=xe({},e),this.isRightShow=!0,this.selectForm.lscId=e.lsc.key,this.selectForm.refId=e.refId,this.selectForm.areaId=e.deliveries.map(function(e){return e.key}),this.getRowDetail(this.selectCard.id))}},{key:"getRowDetail",value:function(e){var t=this;this.historyList=[],this.formLoading=!0,Object(be["l"])({id:e}).then(function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(i){var r,a,s,n,o,c,l,u,d,m,p,h,f,v,g,y,b,w,k;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=i.data||{},a=r.cust,s=r.currency,n=r.deliveries,o=r.lsc,c=r.period,l=r.specials,u=r.subtype,d=r.mode,m=r.rows,p=r.measure,h=r.refId,f=r.loadType,v=Object(K["a"])(r,["cust","currency","deliveries","lsc","period","specials","subtype","mode","rows","measure","refId","loadType"]),t.selectForm=xe({},v),t.selectForm.custName=a.value,t.getChargeList(a.key),m.map(function(e){t.selectForm.yType=e.addressType}),"0"===t.selectForm.yType?t.leftTitle="国家":"1"===t.selectForm.yType?t.leftTitle="州省":"5"===t.selectForm.yType?t.leftTitle="国内区域":"7"===t.selectForm.yType?t.leftTitle="仓库代码":"100"===t.selectForm.yType?t.leftTitle="城市区域":"101"===t.selectForm.yType?t.leftTitle="仓库区域":"102"===t.selectForm.yType&&(t.leftTitle="国家区域"),t.selectForm.mode=d,t.selectForm.loadType=f,t.selectForm.refId=h,t.selectForm.measureId=p.key,t.selectForm.measureName=p.value,t.selectForm.lscId=o.key,t.selectForm.lscName=o.value,t.selectForm.subtypeId=u.key,t.selectForm.subtypeName=u.value,c.effect&&c.expire?(g=x()(c.effect).format("YYYY-MM-DD HH:mm:ss"),y=x()(c.expire).format("YYYY-MM-DD HH:mm:ss"),t.$set(t.selectForm,"times",[g,y])):t.$set(t.selectForm,"times",[]),t.selectForm.agentId=l.map(function(e){return e.key}),t.selectForm.currencyName=s.value,t.selectForm.currencyId=s.key,b=n.map(function(e){return e.key}),t.$set(t.selectForm,"areaId",b),w=[],m.map(function(e,t){w.push(e)}),t.tableData=w,e.next=27,t.groupByPid();case 27:return t.isTableShow=!0,Array.isArray(m)&&m.length>0&&(k=m[0].prices||[],t.aAxisData=k.map(function(e,i){var r=e.x||{},a={label:"",aAxisArr:[]};return"5"===f&&"0"===e.type?(a.label="".concat(r.lower,"-").concat(r.upper),t.rightTitle="重量区间"):"5"===f&&"1"===e.type?(a.label="".concat(r.lower,"-").concat(r.upper),t.rightTitle="方数区间"):"2"===f?(t.rightTitle="柜型",a.label=r.value):("0"===e.type&&(t.rightTitle="重量区间"),"1"===e.type&&(t.rightTitle="体积区间"),a.label="".concat(r.lower,"-").concat(r.upper)),a})),e.next=31,t.getServiceList("sel");case 31:t.serviceList.map(function(e){e.id===t.selectForm.lscId&&(t.selectForm.lscCode=e.lsId)}),t.formLoading=!1;case 33:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t.formLoading=!1,e})}},{key:"resetForm",value:function(){this.selectForm=ke(),this.chargeForm=Fe(),this.tableData=[],this.aAxisData=[],this.historyId="",this.isTableShow=!1,this.isRightShow=!1,this.leftTitle="",this.rightTitle="";var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"getChargeList",value:function(e){var t=this;this.selectLoading=!0,Object(be["f"])({agentId:e,type:"2"===this.selectForm.priceType?"0":"3"===this.selectForm.priceType?"1":void 0,page:1,size:9999}).then(function(e){var i=e.data||{};t.chargeList=i.result||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e})}},{key:"priceTypeChange",value:function(e){this.myPopoverVisible=!1,this.$emit("priceTypeChange",e)}},{key:"formattPriceType",value:function(e,t){var i=t.find(function(t){return t.value===e});return i?"".concat(i.label):"--"}},{key:"handleClear",value:function(e){switch(e){case"1":this.searchForm.destinationCountry=void 0,this.searchForm.custId=void 0,this.searchForm.lscId=void 0,this.searchForm.lscName=void 0;break;case"2":this.searchForm.areaId=[],this.searchForm.includeTax=void 0,this.searchForm.dispatch=void 0,this.searchForm.times=[];break;default:break}}},{key:"handleConfirm",value:function(e){"1"===e?this.popoverShow1=!1:"2"===e&&(this.popoverShow2=!1),this.getTableData()}},{key:"getServiceList",value:function(){var e=Object(v["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,i={page:1,size:9999,countryId:"sea"===t?this.searchForm.destinationCountry:void 0,subtypeId:"sea"===t?this.searchForm.subtypeId:this.selectForm.subtypeId,purposeType:"sea"===t?this.searchForm.purposeType:void 0},e.next=4,Object(be["k"])(i).then(function(e){var t=e.data||{};r.serviceList=(t.result||[]).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}),r.selectLoading=!1}).catch(function(e){return r.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onServiceSea",value:function(){var e=this;this.searchForm.lscId?this.serviceList.map(function(t){t.id===e.searchForm.lscId&&(e.searchForm.lscName=t.label)}):this.searchForm.lscName=void 0}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(be["h"])().then(function(t){var i=t.data||{};e.countryList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onCountry",value:function(){this.searchForm.lscId=void 0,this.searchForm.lscName=void 0}},{key:"getTableData",value:function(){var e=this;this.cardLoading=!0;var t=this.searchForm,i=t.areaId,r=t.times,a=Object(K["a"])(t,["areaId","times"]),s={model:xe({},a,{effect:Array.isArray(r)&&r.length>0?r[0]+" 00:00:00":void 0,expire:Array.isArray(r)&&r.length>0?r[1]+" 23:59:59":void 0}),page:this.pagination.page,size:this.pagination.size},n=(i||[]).map(function(t){var i=e.areaList.find(function(e){return t===e.name})||{};if(i.id&&i.name)return i.id});s.model.deliveries=n.join(","),Object(be["r"])(s).then(function(t){var i=t.data||{};e.cardList=i.result||[],e.pagination.total=i.total,e.cardLoading=!1}).catch(function(t){return e.cardLoading=!1,t})}},{key:"formatArea",value:function(e){var t=(e||[]).map(function(e){return e.value});return t.join(",")}},{key:"getSubtypeList",value:function(){var e=this;this.selectLoading=!0,Object(be["o"])({typeId:"05"}).then(function(t){var i=t.data||[];e.typeList=i.filter(function(e){return"3"!==e.id}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getAreaList",value:function(){var e=this;this.selectLoading=!0,Object(be["e"])().then(function(t){e.areaList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"formatTime",value:function(e){var t=(e||{}).effect,i=(e||{}).expire;return x()(t).format("YYYY-MM-DD HH:mm")+"-"+x()(i).format("YYYY-MM-DD HH:mm")}},{key:"handleChecked",value:function(e){var t=(e||[]).length,i=(this.areaList||[]).length;this.checkAll=t===i,this.isIndeterminate=t>0&&t<i}},{key:"handleCheckAll",value:function(e){var t=this.areaList.map(function(e){return e.name});this.searchForm.areaId=e?t:[],this.isIndeterminate=!1}},{key:"onBusiness",value:function(){this.searchForm.dispatch=void 0,this.getTableData()}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.getTableData()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"created",value:function(){this.getTableData(),this.getCountryList(),this.getSubtypeList(),this.getAreaList()}}]),t}(d["e"]);Se=u["a"]([Object(d["a"])({name:"",components:{},props:{priceTypeList:{type:Array,default:function(){return[]}},supplierList:{type:Array,default:function(){return[]}},priceType:{type:String,default:""}}})],Se);var Le=Se,_e=Le,Ie=(i("abef"),Object(I["a"])(_e,ge,ye,!1,null,"b2879948",null)),Ce=Ie.exports,Te=i("254e"),Oe=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.priceType="05",e.priceTypeList=[{value:"05",label:"专线报价"},{value:"02",label:"订舱报价"},{value:"04",label:"仓储报价"},{value:"01",label:"卡车报价"},{value:"06",label:"拖车报价"},{value:"03",label:"报关报价"}],e.supplierList=[],e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"priceTypeChange",value:function(e){this.priceType=e,this.getSupplierList()}},{key:"getSupplierList",value:function(){var e=this,t={page:1,size:999,subtypeId:this.priceType};Object(Te["B"])(t).then(function(t){var i=t.data||{};e.supplierList=i.result||[]}).catch(function(e){return e})}},{key:"created",value:function(){this.getSupplierList()}}]),t}(d["e"]);Oe=u["a"]([Object(d["a"])({name:"supplier",components:{PriceCar:T,PriceTrailer:R,PriceCustomsClearance:X,PriceWarehouse:ne,PriceBooking:ve,PriceLine:Ce}})],Oe);var je=Oe,Ae=je,Pe=Object(I["a"])(Ae,r,a,!1,null,"3bfbadf7",null);t["default"]=Pe.exports},a9ce:function(e,t,i){},abc7:function(e,t,i){"use strict";var r=i("8aac"),a=i.n(r);a.a},abef:function(e,t,i){"use strict";var r=i("c247"),a=i.n(r);a.a},af58:function(e,t,i){},b256:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"400","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:12}},[e._v("\n          报关报价\n        ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsQuoteAdd"],expression:"['customsQuoteAdd']"}],attrs:{type:"text",size:"small"},on:{click:e.showAddPriceForm}},[e._v("\n            新增报价\n          ")])],1)],1),r("div",{staticStyle:{padding:"10px 0"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"国家","label-width":"50px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"50px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getTrailerServeList("search")},change:function(t){return e.serviceChange(t,"search")}},model:{value:e.searchForm.serviceId,callback:function(t){e.$set(e.searchForm,"serviceId",t)},expression:"searchForm.serviceId"}},e._l(e.searchServiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsQuoteQuery"],expression:"['customsQuoteQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("1")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.serviceName,callback:function(t){e.$set(e.searchForm,"serviceName",t)},expression:"searchForm.serviceName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"价格标准","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.ifStandard,callback:function(t){e.$set(e.searchForm,"ifStandard",t)},expression:"searchForm.ifStandard"}},[r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:!0}},[e._v("\n                      标准\n                    ")]),r("el-radio-button",{attrs:{label:!1}},[e._v("\n                      特殊\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsQuoteQuery"],expression:"['customsQuoteQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("2")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 275px)"}},[0===e.tableList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):e._e(),e._l(e.tableList,function(t,i){return r("div",{key:i,staticClass:"price-card",class:{"active-card":e.selectCardId===t.id},staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return e.viewPrice(t)},contextmenu:function(i){return i.preventDefault(),e.showMenu(t,i)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待审核",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-blue"})]):e._e(),2===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-y"})]):e._e(),3===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已拒绝",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-red"})]):e._e(),4===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已通过",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-success"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:18}},[e._v("\n                "+e._s(t.service.value)+"\n              ")]),t.ifStandard?r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("\n                标准报价\n              ")]):r("el-col",{staticStyle:{"text-align":"right",display:"flex","align-items":"center","justify-content":"flex-end"},attrs:{span:5}},[e._v("\n                特殊报价\n                ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:2}},[e._v("\n                国家\n              ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:18}},[e._v("\n                "+e._s(t.country)+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["2"===t.toType?r("span",[e._v("代理商价")]):"1"===t.toType&&"0"===t.toSubtype?r("span",[e._v("直客价")]):"1"===t.toType&&"1"===t.toSubtype?r("span",[e._v("同行价")]):"3"===t.toType?r("span",[e._v("聚货通价")]):e._e()])],1),r("el-row",[r("el-col",{attrs:{span:4}},["1"===t.status?r("span",{staticClass:"btn-tip-success"},[e._v("\n                  生效中\n                ")]):"2"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                  待生效\n                ")]):"3"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                  已失效\n                ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:15}},[e._v("\n                "+e._s(e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                  "+e._s(e.formatTag(t))+"\n                ")])])],1)],1)})],2)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-pagination",{attrs:{small:"",layout:"total,prev, pager, next",total:e.pagination.total,"page-size":e.pagination.size,"current-page":e.pagination.page},on:{"current-change":e.currentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),e.showAddForm?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("el-form",{ref:"addForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[r("div",{staticStyle:{flex:"1"}},[r("el-form-item",{attrs:{label:"业务类型：",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getSubtypeList,change:e.subTypeChange},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"所在国家：",prop:"selectCountryId"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},on:{focus:e.getCountryList},model:{value:e.selectForm.selectCountryId,callback:function(t){e.$set(e.selectForm,"selectCountryId",t)},expression:"selectForm.selectCountryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"serviceId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectService.name,expression:"selectService.name"}],attrs:{slot:"label",content:e.selectService.label+"/"+e.selectService.csId,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",disabled:e.isView,placeholder:"请选择"},on:{focus:function(t){return e.getTrailerServeList("select")},change:function(t){return e.serviceChange(t,"select")}},model:{value:e.selectForm.serviceId,callback:function(t){e.$set(e.selectForm,"serviceId",t)},expression:"selectForm.serviceId"}},e._l(e.selectServiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"报价对象：",prop:"0"===e.custType?"":"toCustSubtype"}},["0"===e.custType?r("span",[e._v("\n              一级代理商\n            ")]):r("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",disabled:e.isView,filterable:"",placeholder:"请选择"},on:{change:e.custSubtypeChange},model:{value:e.selectForm.toCustSubtype,callback:function(t){e.$set(e.selectForm,"toCustSubtype",t)},expression:"selectForm.toCustSubtype"}},e._l(e.custList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"2"===e.custType?r("el-form-item",{attrs:{label:"参考报价："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.superiorPriceChange,focus:e.getSuperiorPrice},model:{value:e.selectForm.refId,callback:function(t){e.$set(e.selectForm,"refId",t)},expression:"selectForm.refId"}},e._l(e.superiorPriceList,function(t){return r("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1):e._e()],1),e.selectCard.id&&4===e.selectCard.auditing||e.selectForm.edition?e._e():r("div",{staticStyle:{"margin-bottom":"18px"}},[e.isEdit||!e.isView||1!==e.selectCard.auditing&&3!==e.selectCard.auditing||!e.$checkPermission(["customsQuoteEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.editRow}},[e._v("\n            编辑\n          ")]),4!==e.selectCard.auditing&&!e.isEdit&&e.isView&&e.$checkPermission(["customsQuoteAudit"])?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{show:e.showAuditModal,hide:e.hidePopover},model:{value:e.visibleAudit,callback:function(t){e.visibleAudit=t},expression:"visibleAudit"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"通过/拒绝：",prop:"status","label-width":"110px"}},[r("el-radio-group",{model:{value:e.selectForm.status,callback:function(t){e.$set(e.selectForm,"status",t)},expression:"selectForm.status"}},[r("el-radio",{attrs:{label:"4"}},[e._v("\n                    通过\n                  ")]),r("el-radio",{attrs:{label:"3"}},[e._v("\n                    拒绝\n                  ")])],1)],1),"3"===e.selectForm.status?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"note","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.selectForm.note,callback:function(t){e.$set(e.selectForm,"note",t)},expression:"selectForm.note"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.hidePopover}},[e._v("\n                  取消\n                ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.auditPrice}},[e._v("\n                  确认\n                ")])],1)],1),r("el-button",{staticStyle:{margin:"0 10px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              审核\n            ")])],1):e._e(),e.isView&&!e.isEdit||!e.$checkPermission(["customsQuoteAdd","customsQuoteEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.cancelEdit}},[e._v("\n            取消\n          ")]),e.isView&&!e.isEdit||!e.$checkPermission(["customsQuoteAdd","customsQuoteEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.savePrice}},[e._v("\n            保存\n          ")]),e.isEdit||!e.isView||1!==e.selectCard.auditing&&3!==e.selectCard.auditing||!e.$checkPermission(["customsQuoteDel"])?e._e():r("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteRow(1)}}},[e._v("\n            删除\n          ")])],1),!e.selectCard.id&&!e.selectForm.edition||e.isEdit?e._e():r("div",{staticStyle:{"text-align":"right","margin-bottom":"18px"}},[e.$checkPermission(["customsQuoteCopy"])?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.copyPrice}},[e._v("\n            复制此版本\n          ")]):e._e(),4!==e.selectCard.auditing||e.selectForm.edition?e._e():r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:e.invalidPrice}},[e._v("\n            失效\n          ")])],1)]),r("div",{staticClass:"service-info"},[r("el-form-item",{attrs:{label:"国家："}},[e._v("\n          "+e._s(e.selectService.countryName||"--")+"\n        ")]),r("el-form-item",{attrs:{label:"货币单位："}},[e._v("\n          "+e._s(e.formattCurrency(e.selectService.currencyId))+"\n        ")])],1),r("el-row",[r("el-col",{attrs:{span:21}},["3"===e.custType?r("el-form-item",{attrs:{label:"设置成本项目","label-width":"100px"}},[r("el-button",{staticStyle:{padding:"0 10px"},attrs:{type:"text",size:"mini",disabled:e.isView},on:{click:e.showCostModal}},[e._v("\n              设置成本项目\n            ")])],1):e._e(),"3"===e.custType?r("el-form-item",{attrs:{label:"设置海关"}},[r("el-button",{staticStyle:{padding:"0 10px"},attrs:{type:"text",size:"mini",disabled:e.isView},on:{click:e.showTransferModal}},[e._v("\n              设置海关\n            ")])],1):e._e(),"3"!==e.custType||"3"===e.custType&&e.selectForm.toCustSubtype&&"-1"!==e.selectForm.toCustSubtype?r("el-form-item",{attrs:{label:"价格标准：","label-width":"90px",prop:"ifStandard"}},[r("el-radio-group",{attrs:{disabled:e.isView},on:{change:e.ifStandardChange},model:{value:e.selectForm.ifStandard,callback:function(t){e.$set(e.selectForm,"ifStandard",t)},expression:"selectForm.ifStandard"}},[r("el-radio",{attrs:{label:!0}},[e._v("\n                标准\n              ")]),r("el-radio",{attrs:{label:!1}},[e._v("\n                特殊\n              ")])],1)],1):e._e(),e.selectForm.ifStandard?e._e():r("el-form-item",{attrs:{label:e.formLabel+"：",prop:"associatedAgents","label-width":"100px"}},[r("el-button",{staticStyle:{"padding-right":"20px"},attrs:{type:"text",size:"mini"},on:{click:e.showModel}},[e._v("\n              已选择("+e._s((e.selectForm.associatedAgents||[]).length)+")\n            ")])],1),e.selectForm.ifStandard?e._e():r("el-form-item",{attrs:{label:"有效时间：","label-width":"100px",prop:"refStandardId"}},[e.isView?r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间","picker-options":e.pickerOptions,disabled:!e.selectForm.ifStandard||!e.isEdit&&e.isView},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}}):r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.refStandardChange,focus:e.getStandardPrice},model:{value:e.selectForm.refStandardId,callback:function(t){e.$set(e.selectForm,"refStandardId",t)},expression:"selectForm.refStandardId"}},e._l(e.refStandardList,function(t){return r("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.ifStandard,expression:"selectForm.ifStandard"}],attrs:{label:"有效时间：","label-width":"90px",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间","picker-options":e.pickerOptions,disabled:!e.selectForm.ifStandard||!e.isEdit&&e.isView},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:3}},[e.isView&&!e.isEdit?r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"历史版本"},on:{focus:e.getEditionList,change:function(t){return e.viewHistoryPrice(t,!1)}},model:{value:e.selectForm.edition,callback:function(t){e.$set(e.selectForm,"edition",t)},expression:"selectForm.edition"}},e._l(e.editionList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1):e._e(),e.isView&&!e.isEdit||"2"!==e.custType?e._e():r("el-popover",{attrs:{placement:"bottom",trigger:"click"},on:{show:e.showBatchAddForm},model:{value:e.isShowPopover,callback:function(t){e.isShowPopover=t},expression:"isShowPopover"}},[r("div",{staticStyle:{padding:"0 20px 0 10px",width:"240px"}},[r("div",[e._v("请输入需要批量修改的值")]),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{margin:"13px 0 26px 0"},attrs:{controls:!1,placeholder:"请输入",precision:2,size:"mini"},on:{focus:function(e){e.stopPropagation()}},model:{value:e.addNumber,callback:function(t){e.addNumber=t},expression:"addNumber"}}),r("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{color:"#FF6D00"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNumberChange(0)}}},[e._v("\n                  重置\n                ")]),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticStyle:{color:"#999999"},attrs:{type:"text",size:"mini"},on:{click:e.hidePopover}},[e._v("\n                    取消\n                  ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNumberChange(1)}}},[e._v("\n                    保存\n                  ")])],1)],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              批量修改\n            ")])],1)],1),3===e.selectCard.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因："}},[r("span",[e._v("\n              "+e._s(e.selectCard.reason)+"\n            ")])])],1):e._e()],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{"min-height":"200px"}},[e.xAxis.length?r("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.yAxis,height:"520",resizable:"",size:"small",border:"","row-class-name":e.tableRowClassName,"auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.label)+"\n          ")]}}],null,!1,799874427)},[r("template",{slot:"header"},[e._v("\n            成本项目\\海关\n          ")])],2),e._l(e.xAxis,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(i){return["remark"!==t.value?r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                "+e._s(i.row[t.value])+"\n              ")]):r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2,size:"mini"},model:{value:i.row[t.value],callback:function(r){e.$set(i.row,t.value,r)},expression:"scope.row[item.value]"}})],1):r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                "+e._s(i.row.remark)+"\n              ")]):r("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:i.row.remark,callback:function(t){e.$set(i.row,"remark",t)},expression:"scope.row.remark"}})],1)]}}],null,!0)})})],2):e._e()],1)],1):e._e(),r("cost-modal",{ref:"costModal",on:{close:e.serviceChange}}),r("hs-modal",{ref:"hsModal",on:{close:function(){return e.serviceChange(e.selectService.id,"select")}}}),r("transfer-modal",{ref:"transferModal",attrs:{"select-card":e.selectCard,"is-add-form":e.showAddForm,"is-edit":e.isEdit,"is-view":e.isView,edition:!e.selectForm.edition},on:{save:e.transferModalSave}}),r("agent-price",{ref:"AgentPrice",on:{close:e.closeAgentPrice}}),r("transition",{attrs:{name:"el-fade-in-linear"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showAgentPriceModel&&e.showAddForm&&"0"===e.custType&&e.$checkPermission(["customsQuoteQuotation"]),expression:"showAgentPriceModel && showAddForm && custType === '0' && $checkPermission(['customsQuoteQuotation'])"},{name:"drag",rawName:"v-drag"}],staticClass:"agent-price"},[r("el-tooltip",{attrs:{effect:"dark",content:"供应商报价",placement:"top"}},[r("i",{staticClass:"icon-price",on:{click:e.showAgentPrice}})])],1)]),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"}],staticClass:"contextmenu",style:{left:e.menuLeft+"px",top:e.menuTop+"px"}},[r("li",{directives:[{name:"permission",rawName:"v-permission",value:["customsQuoteCopy"],expression:"['customsQuoteCopy']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.viewPrice(e.showMenuRow,!0)}}},[e._v("\n      复制\n    ")]),r("li",{directives:[{name:"permission",rawName:"v-permission",value:["customsQuoteGet"],expression:"['customsQuoteGet']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.viewPrice(e.showMenuRow)}}},[e._v("\n      查看\n    ")]),1!==e.showMenuRow.auditing&&3!==e.showMenuRow.auditing||!e.$checkPermission(["customsQuoteDel"])?e._e():r("li",{staticClass:"contextmenu-item",on:{click:function(t){return e.deleteRow(2)}}},[e._v("\n      删除\n    ")])])],1)},a=[],s=(i("8e6e"),i("456d"),i("55dd"),i("7f7f"),i("ac4d"),i("8a81"),i("75fc")),n=(i("ac6a"),i("bd86")),o=(i("7514"),i("96cf"),i("3b8d")),c=i("d225"),l=i("b0b4"),u=i("308d"),d=i("6bb5"),m=i("4e2b"),p=i("9ab4"),h=i("60a3"),f=i("9dba"),v=i("0dca"),g=i("5a0c"),y=i.n(g),b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.modalTitle,visible:e.visible,"close-on-click-modal":!1,width:"960px"},on:{close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-transfer",{ref:"transferItem",staticClass:"transfer-agent",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.list},model:{value:e.relevanceList,callback:function(t){e.relevanceList=t},expression:"relevanceList"}}),(e.isAddForm&&!e.isEdit&&!e.isView||e.selectCard.id&&4===e.selectCard.auditing)&&e.edition?i("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),i("el-button",{attrs:{type:"primary",size:"small",disabled:!e.edition},on:{click:e.save}},[e._v("\n        保 存\n      ")])],1):e._e()],1)])},w=[],x=i("9ec0"),k=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.visible=!1,e.list=[],e.relevanceList=[],e.modalTitle="",e.selectService={},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"getCustTypeList",value:function(e){var t=this,i={toCustSubtype:e.toCustSubtype,toCustType:e.toCustType,subtypeId:this.selectService.subtypeId||"",typeId:"03"};this.loading=!0,Object(x["h"])(i).then(function(e){var i=e.data||[];t.list=i.filter(function(e){return e}),!t.isEdit&&t.isView&&(t.list=t.list.map(function(e){return e.disabled=!1,-1!==t.relevanceList.indexOf(e.id)&&(e.disabled=!0),e})),t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"showModel",value:function(e,t,i,r){this.relevanceList=t,this.visible=!0,this.selectService=e,this.modalTitle=i||"",this.getCustTypeList(r)}},{key:"cancel",value:function(){this.dialogClose()}},{key:"dialogClose",value:function(){this.relevanceList=[],this.visible=!1}},{key:"save",value:function(){var e=this;0!==this.relevanceList.length?(this.$emit("save",this.relevanceList,this.relevanceList.map(function(t){return e.list.find(function(e){return e.id===t})})),this.dialogClose()):this.$message.warning("请选择关联的数据")}},{key:"filterMethod",value:function(e,t){var i=t.name||"";return i.indexOf(e)>-1}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}}]),t}(h["e"]);k=p["a"]([Object(h["a"])({name:"",components:{},props:{selectCard:{type:Object,default:function(){return{}}},isAddForm:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},edition:{type:Boolean,default:!0}}})],k);var F=k,S=F,L=(i("de59"),i("2877")),_=Object(L["a"])(S,b,w,!1,null,"012e33b8",null),I=_.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("vxe-modal",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"show-zoom":"",resize:"","z-index":1314,"lock-view":!1,mask:!1,"lock-scroll":!1,width:"1100","min-width":"700",height:"500","min-height":"400"},on:{close:e.close},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"my-title",attrs:{slot:"title"},on:{click:function(e){return e.stopPropagation(),function(e){return e}(e)}},slot:"title"},[i("span",[e._v("供应商")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px","margin-right":"20px"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"请选择"},on:{change:e.selectAgentChange},model:{value:e.form.agent,callback:function(t){e.$set(e.form,"agent",t)},expression:"form.agent"}},e._l(e.agentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("span",[e._v("版本")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{clearable:"",filterable:"",disabled:!e.form.agent,size:"mini",placeholder:"请选择"},on:{change:e.showPrice},model:{value:e.form.edition,callback:function(t){e.$set(e.form,"edition",t)},expression:"form.edition"}},e._l(e.editionList,function(t){return i("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1),i("div",[e.xAxis.length?i("vxe-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.yAxis,border:"",resizable:"",size:"small","auto-resize":!0}},[i("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.label)+"\n        ")]}}],null,!1,2520297979)},[i("template",{slot:"header"},[e._v("\n          成本项目\\海关\n        ")])],2),e._l(e.xAxis,function(t,r){return i("vxe-table-column",{key:r,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(r){return["remark"!==t.value?i("div",[e._v("\n            "+e._s(r.row[t.value])+"\n          ")]):i("div",[e._v("\n            "+e._s(r.row.remark)+"\n          ")])]}}],null,!0)})})],2):e._e()],1)])},T=[],O=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.visible=!1,e.isMinimize=!1,e.loading=!1,e.agentList=[],e.agentPriceList=[],e.xAxis=[],e.yAxis=[],e.editionList=[],e.selectService={},e.dayjs=y.a,e.form={agent:"",edition:""},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"minimize",value:function(){this.isMinimize=!0,this.visible=!1,this.$emit("close")}},{key:"close",value:function(){this.isMinimize=!1,this.visible=!1,this.$emit("close")}},{key:"show",value:function(e,t){this.isMinimize||(this.selectService=e,this.xAxis=[],this.yAxis=[],this.agentList=[],this.agentPriceList=[],this.editionList=[],this.form={agent:"",edition:""},this.getAgentPriceList(t)),this.visible=!0}},{key:"getAgentPriceList",value:function(e){var t=this;this.loading=!0,Object(v["n"])(e).then(function(e){t.loading=!1,e.success&&e.data&&e.data.length&&(t.agentPriceList=e.data||[]),t.getAgentList()}).catch(function(e){return t.loading=!1,t.agentPriceList=[],t.agentList=[],e})}},{key:"getAxis",value:function(e){this.xAxis=e[0].priceList.map(function(e){return{label:e.nameX,value:e.codeX}}),this.yAxis=e.map(function(e){var t={label:e.nameY,yId:e.codeY,remark:e.remark};return e.priceList.forEach(function(e){t[e.codeX]=e.price}),t}),this.xAxis.length&&(this.xAxis=[].concat(Object(s["a"])(this.xAxis),[{label:"备注",value:"remark"}]))}},{key:"getAgentList",value:function(){var e=this.agentPriceList.map(function(e){return{name:e.fromCustName,id:e.fromCustId}});this.agentList=e.reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[])}},{key:"selectAgentChange",value:function(e){this.editionList=this.agentPriceList.filter(function(t){return t.fromCustId===e}),this.form.edition="",this.xAxis=[],this.yAxis=[]}},{key:"showPrice",value:function(e){this.xAxis=[],this.yAxis=[];var t=this.agentPriceList.find(function(t){return t.id===e});if(t){var i=t.priceList;this.getAxis(i)}}}]),t}(h["e"]);O=p["a"]([Object(h["a"])({name:"agentPrice"})],O);var j=O,A=j,P=(i("e976"),Object(L["a"])(A,C,T,!1,null,"319bb230",null)),N=P.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:"关联成本项目【"+e.title+"】",visible:e.visible,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.visible=t},close:e.cancelCostItem}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.costLoading,expression:"costLoading"}]},[i("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["成本项目","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.costItemList},model:{value:e.costItemOption,callback:function(t){e.costItemOption=t},expression:"costItemOption"}}),i("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancelCostItem}},[e._v("\n        取 消\n      ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCostItem}},[e._v("\n        确 定\n      ")])],1)],1)])},z=[],$=(i("6762"),i("2fdb"),i("5df3"),i("2094")),M=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.title="",e.visible=!1,e.costLoading=!1,e.costItemOption=[],e.costItemList=[],e.serviceData={},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"show",value:function(e){var t=this;this.serviceData=e,this.costItemOption=[],this.costItemList=[],this.title=e.countryName+"-"+e.subtypeName+"-"+e.csId,this.costLoading=!0,this.visible=!0;var i={serviceTypeId:"03",typeId:e.subtypeId,page:1,size:99999};Promise.all([this.getServerProjectList(e.id),this.getCostitemList(i)]).then(function(e){t.costLoading=!1}).catch(function(e){return t.costLoading=!1,e})}},{key:"getCostitemList",value:function(e){var t=this;return Object($["e"])(e).then(function(e){var i=e.data||{},r=i.result||[];t.costItemList=r}).catch(function(e){return e})}},{key:"getServerProjectList",value:function(e){var t=this,i={id:e};return Object($["j"])(i).then(function(e){var i=e.data||[];t.costItemOption=i.map(function(e){return e.id})||[]}).catch(function(e){return e})}},{key:"cancelCostItem",value:function(){this.visible=!1,this.$emit("close",this.serviceData.id,"select")}},{key:"filterMethod",value:function(e,t){var i=t.name||"";return i.indexOf(e)>-1}},{key:"saveCostItem",value:function(){var e=this;this.costLoading=!0;var t=this.costItemOption,i=this.costItemList.filter(function(e){return t.includes(e.id)}).map(function(e){return{id:e.id,name:e.name}}),r={cscId:this.serviceData.id,cscCostitems:i};Object($["p"])(r).then(function(t){e.$message({type:"success",message:"更新成功"}),e.cancelCostItem(),e.costLoading=!1}).catch(function(t){return e.costLoading=!1,t})}}]),t}(h["e"]);M=p["a"]([Object(h["a"])({name:"CostModal"})],M);var R=M,Y=R,E=Object(L["a"])(Y,D,z,!1,null,"52020c37",null),V=E.exports,q=i("55ae");function B(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function H(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?B(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):B(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var Q=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectCardId="",e.addNumber="",e.showMenuRow={},e.isShowMenu=!1,e.isShowPopover=!1,e.menuTop=0,e.menuLeft=0,e.optionBtnNum=1,e.formLabel="关联代理商",e.city="",e.isActive=!0,e.showAgentPriceModel=!0,e.selectLoading=!1,e.loading=!1,e.visible=!1,e.visible2=!1,e.visibleAudit=!1,e.showAddForm=!1,e.loadingForm=!1,e.loadingTable=!1,e.isView=!1,e.isEditRow=!1,e.isEdit=!1,e.tableList=[],e.editionList=[],e.superiorPriceList=[],e.refStandardList=[],e.typeList=[],e.auditList=[{name:"待审核",id:"1"},{name:"审核中",id:"2"},{name:"已通过",id:"4"},{name:"已拒绝",id:"3"}],e.countryList=[],e.detailAreaList=[],e.currencyList=[],e.searchServiceList=[],e.selectServiceList=[],e.yAxis=[],e.xAxis=[],e.custList=[],e.props={label:"name",value:"id"},e.searchForm={subtypeId:void 0,countryId:void 0,serviceId:void 0,serviceName:"",auditing:void 0,ifStandard:"0",addressType:"99",times:[]},e.selectCard={},e.selectService={},e.selectForm={selectCountryId:void 0,refId:void 0,edition:"",refStandardId:void 0,note:"",status:"4",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.formRules={refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],refStandardId:[{required:!0,message:"请选择参考标准报价",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],serviceId:[{required:!0,message:"请选择服务",trigger:"change"}],toCustSubtype:[{required:!0,message:"请选择报价对象",trigger:"change"}],associatedAgents:[{required:!0,message:"请选择报价对象",trigger:"change"}],times:[{required:!0,message:"请选择有效日期",trigger:"change"}],status:[{required:!0,message:"请选择通过/拒绝",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.pagination={page:1,size:10,total:0},e.dayjs=y.a,e.pickerOptions={disabledDate:function(e){return y()(e)<y()()}},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"onIsShowMenuChange",value:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},{key:"addNumberChange",value:function(e){var t=this;this.yAxis.map(function(i,r,a){if(r%2!==0){var s=a[r-1];t.xAxis.map(function(r){"remark"!==r.value&&(i[r.value]=0===e?void 0:parseFloat((s[r.value]+t.addNumber).toFixed(2)))})}}),0===e&&(this.addNumber=void 0)}},{key:"showBatchAddForm",value:function(){this.addNumber=void 0}},{key:"showTransferModal",value:function(){this.selectService.id?this.$refs.hsModal.show(this.selectService,this.selectService.countryName+"-"+this.selectService.subtypeName+"-"+this.selectService.csId):this.$message.warning("请选择服务")}},{key:"showCostModal",value:function(){this.selectService.id?this.$refs.costModal.show(this.selectService):this.$message.warning("请选择服务")}},{key:"currentChange",value:function(e){this.pagination.page=e,this.getPriceList()}},{key:"copyPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectForm.edition){e.next=5;break}return e.next=3,this.viewHistoryPrice(this.selectForm.edition,!0);case 3:e.next=7;break;case 5:return e.next=7,this.viewPrice(this.selectCard,!0);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"invalidPrice",value:function(){var e=this;this.$confirm("该操作会使此报价及相关代理报价失效，请确认是否操作?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.selectCard.id},i=e.$loading({lock:!0,text:"",background:"hsla(0,0%,100%,.9)"});Object(v["q"])(t).then(function(){i.close(),e.getPriceList()}).catch(function(){i.close()})}).catch(function(){return!1})}},{key:"showMenu",value:function(e,t){this.$checkPermission(["customsQuoteCopy","customsQuoteGet","customsQuoteDel"])&&(this.showMenuRow=e,this.menuLeft=t.clientX,this.menuTop=t.clientY,this.isShowMenu=!0)}},{key:"closeMenu",value:function(){this.isShowMenu=!1}},{key:"closeAgentPrice",value:function(){this.showAgentPriceModel=!0}},{key:"showAgentPrice",value:function(){if(this.selectForm.serviceId){var e=this.$refs.AgentPrice,t=this.getOfferObject(),i={toSubtype:t.toCustSubtype,toType:t.toCustType,currencyId:this.selectService.currencyId,subtypeId:this.selectService.subtypeId,service:{key:this.selectService.id,value:this.selectService.label}};e.show(this.selectService,i),this.showAgentPriceModel=!1}else this.$message.warning("请选择服务")}},{key:"getSuperiorPrice",value:function(){var e=this,t=["serviceId","subtypeId"];if(this.yAxis=[],this.xAxis=[],0===this.validateService(t)){var i={toSubtype:this.custSubtype,toType:this.custType,currencyId:this.selectService.currencyId,subtypeId:this.selectService.subtypeId,service:{key:this.selectService.id,value:this.selectService.label}};this.superiorPriceList=[],this.loadingForm=!0,Object(v["n"])(i).then(function(t){e.loadingForm=!1,t.success&&t.data&&t.data.length?e.superiorPriceList=t.data||[]:e.$message.warning("暂无参考报价")}).catch(function(t){return e.loadingForm=!1,t})}}},{key:"superiorPriceChange",value:function(e){this.yAxis=[],this.xAxis=[];var t=this.superiorPriceList.find(function(t){return t.id===e});if(t){var i=t.priceList.reduce(function(e,t){var i=JSON.parse(JSON.stringify(t));return i.remark="",t.isSuperiorPrice=!0,i.priceList=i.priceList.map(function(e){return e.price=void 0,e.remark="",e}),i.isSuperiorPrice=!1,e.push(t),e.push(i),e},[]);this.getAxisByView(i)}}},{key:"ifStandardChange",value:function(){this.refStandardList=[],this.selectForm.times=[],this.selectForm.refStandardId=""}},{key:"getStandardPrice",value:function(){var e=this;if(!this.selectForm.ifStandard){var t=["serviceId","subtypeId","toCustSubtype"];if(0===this.validateService(t)){var i=this.getOfferObject(),r={toSubtype:i.toCustSubtype,toType:i.toCustType,addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,service:{key:this.selectService.id,value:this.selectService.label}};this.loadingTable=!0,Object(v["l"])(r).then(function(t){e.loadingTable=!1,t.success&&(e.refStandardList=t.data||[],e.refStandardList.length||e.$message.warning("暂无可参考的标准报价"))}).catch(function(t){return e.loadingTable=!1,t})}}}},{key:"refStandardChange",value:function(e){var t=this.refStandardList.find(function(t){return t.id===e});this.selectForm.times=[],t&&(this.selectForm.times=[y()(t.startTime).format("YYYY-MM-DD"),y()(t.endTime).format("YYYY-MM-DD")])}},{key:"editRow",value:function(){this.optionBtnNum=3,this.isEdit=!0,this.isEditRow=!0}},{key:"cancelEdit",value:function(){this.isView&&this.isEdit?(1===this.selectCard.auditing&&(this.optionBtnNum=3),3===this.selectCard.auditing&&(this.optionBtnNum=2),this.showAddForm=!0,this.isView=!0,this.isEdit=!1,this.isEditRow=!1,this.selectForm.associatedAgents=this.selectCard.associatedAgents):(this.selectCard={},this.selectCardId="",this.showAddForm=!1)}},{key:"deleteRow",value:function(e){var t=this,i={id:1===e?this.selectCard.id:this.showMenuRow.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loadingTable=!0,Object(v["c"])(i).then(function(e){t.loadingTable=!1,t.selectService={},t.selectCard={},t.selectForm={edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},t.showAddForm=!1,t.isView=!1,t.isEditRow=!1,t.isEdit=!1,t.$message.success("删除成功"),t.getPriceList()}).catch(function(e){return t.loadingTable=!1,e})}).catch(function(){return!1})}},{key:"showAuditModal",value:function(){var e=this,t=this.selectCard,i=t.auditing,r=t.reason;if(1===i){var a={id:this.selectCard.id,status:2,reason:""};Object(v["b"])(a).then(function(t){e.tableList.map(function(t){t.id===e.selectCard.id&&(t.auditing=2,e.selectCard.auditing=2)})}).catch(function(e){return e})}else this.selectForm.status="4",this.selectForm.note=r}},{key:"auditPrice",value:function(){var e=this,t={},i=["status"];"3"===this.selectForm.status&&i.push("note"),0===this.validateService(i)&&(t={id:this.selectCard.id,status:this.selectForm.status,reason:this.selectForm.note},t.fromCustId=this.selectCard.fromCustId,t.fromCustName=this.selectCard.fromCustName,this.visibleAudit=!1,this.loadingTable=!0,Object(v["b"])(t).then(function(i){e.loadingTable=!1,i.success&&(e.selectService={},e.selectCard={},e.selectForm={edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.showAddForm=!1,e.isView=!1,e.isEditRow=!1,e.isEdit=!1,e.$message.success("提交成功"),e.getPriceList(t.id))}).catch(function(t){return e.loadingTable=!1,t}))}},{key:"viewHistoryPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.viewPrice(this.selectCard);case 3:return e.abrupt("return");case 4:this.getPriceById(t).then(function(e){var t=e.priceList||[];e.refId?r.getPriceById(e.refId).then(function(e){r.loadingForm=!1;var a=e.priceList.reduce(function(e,i){i.isSuperiorPrice=!0,e.push(i);var r=t.find(function(e){return e.codeY===i.codeY});return r&&e.push(r),e},[]);i?(r.isView=!1,r.isEdit=!1,r.isEditRow=!0,r.selectCardId="",r.selectCard={},r.selectCard.auditing=void 0,r.selectForm.refId=void 0,r.selectForm.refStandardId=void 0,r.selectForm.times=[]):(r.isView=!0,r.isEdit=!1,r.isEditRow=!1),r.getAxisByView(a)}).catch(function(e){return r.loadingForm=!1,e}):(i?(r.isView=!1,r.isEdit=!1,r.isEditRow=!0,r.selectCardId="",r.selectCard={},r.selectCard.auditing=void 0,r.selectForm.refId=void 0,r.selectForm.refStandardId=void 0,r.selectForm.times=[]):(r.isView=!0,r.isEdit=!1,r.isEditRow=!1),r.loadingForm=!1,r.getAxisByView(t)),r.selectForm.associatedAgents=e.associatedAgents,r.selectForm.times=[y()(e.startTime).format("YYYY-MM-DD"),y()(e.endTime).format("YYYY-MM-DD")]}).catch(function(e){return r.loadingForm=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"viewPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$checkPermission(["customsQuoteCopy","customsQuoteGet"])){e.next=2;break}return e.abrupt("return");case 2:if(!this.loadingForm){e.next=4;break}return e.abrupt("return");case 4:return this.loadingForm=!0,this.showAddForm=!0,this.isView=!0,this.isEdit=!1,this.isEditRow=!1,this.xAxis=[],this.yAxis=[],this.selectCard=H({},t),this.selectCardId=t.id,this.superiorPriceList=[],this.refStandardList=[],this.setTableForm(t),i?(this.isView=!1,this.isEdit=!1,this.isEditRow=!0,this.selectCardId="",this.selectCard={},this.selectCard.auditing=void 0,this.selectForm.refId=void 0,this.selectForm.refStandardId=void 0,this.selectForm.times=[]):(this.isView=!0,this.isEdit=!1,this.isEditRow=!1),e.next=19,this.getSubtypeList();case 19:return e.next=21,this.getTrailerServeList("select");case 21:return e.next=23,this.getCountryList();case 23:this.loadingForm=!1,this.selectService=this.selectServiceList.find(function(e){return e.id===t.service.key})||{},r=t.priceList||[],this.selectForm.selectCountryId=this.selectService.countryId,t.refId?("2"===this.custType&&this.getSuperiorPrice(),this.loadingForm=!0,this.getPriceById(t.refId).then(function(e){a.loadingForm=!1;var t=e.priceList.reduce(function(e,t){t.isSuperiorPrice=!0,e.push(t);var i=r.find(function(e){return e.codeY===t.codeY});return i&&e.push(i),e},[]);a.getAxisByView(t)}).catch(function(e){return a.loadingForm=!1,e})):this.getAxisByView(r),"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice();case 29:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getAxisByView",value:function(e){this.xAxis=e[0].priceList.map(function(e){return{label:e.nameX,value:e.codeX}}),this.yAxis=e.map(function(e){var t={label:e.nameY,yId:e.codeY,isSuperiorPrice:e.isSuperiorPrice||!1,remark:e.remark};return e.priceList.forEach(function(e){t[e.codeX]=e.price||void 0}),t}),this.xAxis.length&&(this.xAxis=[].concat(Object(s["a"])(this.xAxis),[{label:"备注",value:"remark"}]))}},{key:"setTableForm",value:function(e){var t=this.$refs.addForm;t&&t.clearValidate(),this.selectForm.selectCountryId=void 0,this.selectForm.refId=e.refId,this.selectForm.refStandardId=e.refStandard,this.selectForm.toCustSubtype=e.toSubtype,this.selectForm.subtypeId=e.subtypeId,this.selectForm.associatedAgents=e.associatedAgents,this.selectForm.serviceId=e.service.key,this.selectForm.ifStandard=e.ifStandard,this.selectForm.times=[y()(e.startTime).format("YYYY-MM-DD"),y()(e.endTime).format("YYYY-MM-DD")]}},{key:"getPriceById",value:function(e){return new Promise(function(t,i){var r={id:e};Object(v["h"])(r).then(function(e){e.success?t(e.data||{}):i(e)}).catch(function(e){i(e)})})}},{key:"getEditionList",value:function(){var e=this;if(this.selectCard.id){var t={id:this.selectCard.id};this.editionList=[],this.selectLoading=!0,Object(v["i"])(t).then(function(t){e.selectLoading=!1,t.success&&(e.editionList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}}},{key:"savePrice",value:function(){var e=["subtypeId","kscId","ifStandard","times","refStandardId"],t=!1;if(this.isEdit||this.selectForm.ifStandard||this.refStandardList.length){if(this.selectForm.ifStandard||e.push("associatedAgents"),"2"===this.custType&&e.push("toCustSubtype"),this.selectForm.ifStandard||e.push("associatedAgents"),0===this.validateService(e)){var i=!0,r=!1,a=void 0;try{for(var s,n=this.yAxis[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var o=s.value,c=!1,l=!0,u=!1,d=void 0;try{for(var m,p=this.xAxis[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var h=m.value;if(o[h.value]){c=!0;break}}}catch(v){u=!0,d=v}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}if(c){t=c;break}}}catch(v){r=!0,a=v}finally{try{i||null==n.return||n.return()}finally{if(r)throw a}}if(t){var f=this.getParams();this.isEdit?(f.id=this.selectCard.id,f.fromSubtype=this.selectCard.fromSubtype,f.fromType=this.selectCard.fromType,f.fromCustId=this.selectCard.fromCustId,f.fromCustName=this.selectCard.fromCustName,this.savePriceByEdit(f)):this.savePriceByAdd(f)}else this.$message.warning("请填写区间报价")}}else this.$message.warning("操作失败，暂无可参考的标准报价")}},{key:"getParams",value:function(){var e=this,t=this.getOfferObject(),i={refId:this.selectForm.refId,associatedAgents:this.selectForm.associatedAgents,ifStandard:this.selectForm.ifStandard,refStandard:this.selectForm.ifStandard?"":this.selectForm.refStandardId,subtypeId:this.selectForm.subtypeId,country:this.selectService.countryName,countryId:this.selectService.countryId,currencyId:this.selectService.currencyId,toSubtype:t.toCustSubtype,toType:t.toCustType,deleted:0,priceList:[],endTime:this.selectForm.times[1]+" 23:59:59",startTime:this.selectForm.times[0]+" 00:00:00",service:{key:this.selectService.id,value:this.selectService.label}};return i.priceList=this.yAxis.filter(function(e){return!e.isSuperiorPrice}).map(function(t){var i={nameY:t.label,codeY:t.yId,remark:t.remark,priceList:[]};return e.xAxis.forEach(function(e){"remark"!==e.value&&i.priceList.push({nameX:e.label,codeX:e.value,price:t[e.value]})}),i}),i}},{key:"savePriceByAdd",value:function(e){var t=this;this.loadingForm=!0,Object(v["a"])(e).then(function(e){if(t.loadingForm=!1,e.success){var i=e.data;t.$message.success("保存成功"),t.refStandardList=[],t.getPriceList(i.id||"")}}).catch(function(e){return t.loadingForm=!1,e})}},{key:"savePriceByEdit",value:function(e){var t=this;this.loadingForm=!0,Object(v["d"])(e).then(function(e){t.loadingForm=!1,e.success&&(t.$message.success("保存成功"),t.refStandardList=[],t.getPriceList(t.selectCard.id))}).catch(function(e){return t.loadingForm=!1,e})}},{key:"getXAxis",value:function(){var e=this;return new Promise(function(t,i){var r={model:e.selectService.id,page:1,size:99999};Object(v["j"])(r).then(function(r){if(r.success){var a=r.data||{},n=a.result||[];e.xAxis=n.map(function(e){return H({},e,{label:e.customsName,value:e.customsId})}),e.xAxis.length&&(e.xAxis=[].concat(Object(s["a"])(e.xAxis),[{label:"备注",value:"remark"}])),t(r)}else e.$message.warning("请设置报价海关"),i(r)}).catch(function(e){i(e)})})}},{key:"getYAxis",value:function(){var e=this;if(0===this.xAxis.length)return this.loadingTable=!1,void this.$message.warning("请设置报价海关");var t={id:this.selectService.id};Object(v["g"])(t).then(function(t){if(e.loadingTable=!1,t.success){var i=t.data;if(0===i.length)return void e.$message.warning("请设置报价成本项目");e.yAxis=i.map(function(t){var i=H({},t,{label:t.name,yId:t.id,remark:""});return e.xAxis.forEach(function(e){i[e.value]=void 0}),i})}}).catch(function(t){return e.loadingTable=!1,t})}},{key:"validateService",value:function(e){var t=[],i=this.$refs.addForm;return i.validateField(e,function(e){e&&t.push(e)}),t.length}},{key:"getOfferObject",value:function(){var e="",t="";return"3"===this.custType&&("-1"===this.selectForm.toCustSubtype?t="0":(t="1",e=this.selectForm.toCustSubtype)),"0"===this.custType&&(t="2",e="1"),"2"===this.custType&&(t="2"===this.selectForm.toCustSubtype?"2":"1",e=this.selectForm.toCustSubtype),{toCustSubtype:e,toCustType:t}}},{key:"subTypeChange",value:function(e){var t=this;this.selectForm.serviceId=void 0,this.selectForm.refId=void 0,"2"!==this.custType&&this.selectService.id&&(this.loadingTable=!0,this.getXAxis().then(function(e){t.getYAxis()}).catch(function(e){return t.loadingTable=!1,e}))}},{key:"showAddPriceForm",value:function(){var e=this;this.optionBtnNum=1,this.showAddForm=!0,this.isView=!1,this.isEditRow=!0,this.isEdit=!1,this.yAxis=[],this.xAxis=[],this.selectCardId="",this.selectForm={edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},this.selectCard={},this.selectService={},this.$nextTick(function(){var t=e.$refs.addForm;t&&t.clearValidate()})}},{key:"custSubtypeChange",value:function(){"3"===this.custType&&("1"===this.selectForm.toCustSubtype?this.formLabel="关联同行":this.formLabel="关联直客"),"0"===this.custType&&(this.formLabel="关联代理商"),"2"===this.custType&&("2"===this.selectForm.toCustSubtype?this.formLabel="关联代理商":"1"===this.selectForm.toCustSubtype?this.formLabel="关联同行":this.formLabel="关联直客")}},{key:"getTrailerServeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={page:1,size:9999},"search"===t?(i.subtypeId=this.searchForm.subtypeId,i.countryId=this.searchForm.countryId):(i.subtypeId=this.selectForm.subtypeId,i.countryId=this.selectForm.selectCountryId,this.selectServiceList=[]),this.selectLoading=!0,e.next=5,Object(v["p"])(i).then(function(e){if(r.selectLoading=!1,e.success){var i=e.data||{},a=i.result||[];"search"===t?r.searchServiceList=a.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}):r.isEdit?r.selectServiceList=a.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}):r.selectServiceList=a.filter(function(e){return"1"===e.status}).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}}).catch(function(e){return r.selectLoading=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"serviceChange",value:function(e,t){var i=this;if("search"===t){if(this.searchForm.serviceName="",e){var r=this.searchServiceList.find(function(t){return t.id===e});this.searchForm.serviceName=(r||{}).label}}else if(this.xAxis=[],this.yAxis=[],this.selectService={},this.selectForm.refId=void 0,e){var a=this.selectServiceList.find(function(t){return t.id===e});this.selectService=a||{},"2"!==this.custType&&(this.loadingTable=!0,this.getXAxis().then(function(e){i.getYAxis()}).catch(function(e){return i.loadingTable=!1,e})),"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice()}}},{key:"getSubtypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["m"])({typeId:"03"}).then(function(e){t.typeList=e.data||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"tableRowClassName",value:function(e){return e.row.isSuperiorPrice?"success-row":""}},{key:"getCustId",value:function(){var e=this.custSubtype;if("3"===this.custType&&(this.custList=[{name:"聚货通",id:"-1"},{name:"直客",id:"0"},{name:"同行",id:"1"}]),"0"===this.custType&&(this.custList=[]),"2"===this.custType)switch(e){case"1":this.custList=[{name:"二级代理商",id:"2"},{name:"直客",id:"0"},{name:"同行",id:"1"}];break;case"2":this.custList=[{name:"直客",id:"0"},{name:"同行",id:"1"}];break;default:this.custList=[];break}}},{key:"showModel",value:function(){var e=["subtypeId","serviceId","toCustSubtype"],t=this.getOfferObject();if(0===this.validateService(e)){var i=this.$refs.transferModal;i.showModel(this.selectService,this.selectForm.associatedAgents,this.formLabel,t)}}},{key:"transferModalSave",value:function(e,t){if(this.selectForm.associatedAgents=e,"1"!==this.selectCard.status&&4===this.selectCard.auditing){var i=this.getParams();i.id=this.selectCard.id,i.fromSubtype=this.selectCard.fromSubtype,i.fromType=this.selectCard.fromType,i.fromCustId=this.selectCard.fromCustId,i.fromCustName=this.selectCard.fromCustName,i.auditing=this.selectCard.auditing,i.effective=this.selectCard.effective,this.savePriceByEdit(i)}}},{key:"getCountryList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["f"])().then(function(e){var i=e.data||{};t.countryList=i.result||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"geCurrencyList",value:function(){var e=this,t={page:1,size:999};Object(v["e"])(t).then(function(t){if(t.success){var i=t.data||{};e.currencyList=i.result||[]}}).catch(function(e){return e})}},{key:"clearForm",value:function(e){"1"===e?(this.searchForm.serviceId=void 0,this.searchForm.serviceName="",this.searchForm.countryId=void 0):(this.searchForm.times=[],this.searchForm.addressType="99",this.searchForm.ifStandard="0"),this.getPriceList()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"showPopover",value:function(e){"1"===e?this.visible=!0:this.visible2=!0}},{key:"getPriceList",value:function(e){var t=this,i={model:{subtypeId:this.searchForm.subtypeId,serviceId:this.searchForm.serviceId,auditing:this.searchForm.auditing,ifStandard:"0"===this.searchForm.ifStandard?"":this.searchForm.ifStandard,addressType:"99"===this.searchForm.addressType?"":this.searchForm.addressType,startTime:this.searchForm.times[0]?this.searchForm.times[0]+" 00:00:00":"",endTime:this.searchForm.times[1]?this.searchForm.times[1]+" 23:59:59":""},page:this.pagination.page,size:this.pagination.size};this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.showAddForm=!1,this.selectCard={},this.loading=!0,this.refStandardList=[],Object(v["k"])(i).then(function(){var i=Object(o["a"])(regeneratorRuntime.mark(function i(r){var a,s,n,o;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(t.loading=!1,!r.success){i.next=15;break}if(a=r.data||{},s=a.result||[],t.tableList=s.map(function(e){return 2===e.effective&&(e.status="1"),1===e.effective&&(e.status="2"),9===e.effective&&(e.status="3"),e}).sort(function(e,t){return 1*e.status-1*t.status}),t.pagination.total=a.total||0,!e){i.next=13;break}if(n=t.tableList.find(function(t){return t.id===e}),!n){i.next=11;break}return i.next=11,t.viewPrice(n);case 11:i.next=15;break;case 13:o=t.$refs.AgentPrice,o.close();case 15:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.loading=!1,e})}},{key:"formattCurrency",value:function(e){var t=this.currencyList.find(function(t){return t.id===e});return t?"".concat(t.name,"(").concat(t.sign,")"):"--"}},{key:"formatTag",value:function(e,t){return(this.typeList.find(function(t){return t.id===e.subtypeId})||{}).name}},{key:"hidePopover",value:function(){this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.isShowPopover=!1}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getSubtypeList();case 3:this.geCurrencyList(),this.getCustId(),this.getPriceList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}}]),t}(h["e"]);p["a"]([Object(h["f"])("isShowMenu")],Q.prototype,"onIsShowMenuChange",null),Q=p["a"]([Object(h["a"])({name:"",components:{transferModal:I,AgentPrice:N,costModal:V,hsModal:q["a"]},props:{}})],Q);var W=Q,U=W,X=(i("b3e5"),Object(L["a"])(U,r,a,!1,null,"b16fa21c",null));t["default"]=X.exports},b277:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"415","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:12}},[e._v("\n          专线报价\n        ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},["0"!==e.custType&&e.$checkPermission(["lineQuoteAdd"])?r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.addPrice}},[e._v("\n            新增报价\n          ")]):e._e()],1)],1),r("div",{staticStyle:{"padding-top":"10px"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:e.onBusiness},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"目的国"},on:{focus:e.getCountryList,change:function(t){return e.onCountry("sea")}},model:{value:e.searchForm.destinationCountry,callback:function(t){e.$set(e.searchForm,"destinationCountry",t)},expression:"searchForm.destinationCountry"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getTableData(1)}},model:{value:e.searchForm.audit,callback:function(t){e.$set(e.searchForm,"audit",t)},expression:"searchForm.audit"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.popoverShow2,callback:function(t){e.popoverShow2=t},expression:"popoverShow2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"交货区域","label-width":"90px"}},[r("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAll},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n                    全选\n                  ")]),r("el-checkbox-group",{on:{change:e.handleChecked},model:{value:e.searchForm.areaId,callback:function(t){e.$set(e.searchForm,"areaId",t)},expression:"searchForm.areaId"}},e._l(e.areaList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"目的地类型","label-width":"90px"}},[r("el-radio-group",{on:{change:function(t){e.searchForm.lscId=void 0}},model:{value:e.searchForm.purposeType,callback:function(t){e.$set(e.searchForm,"purposeType",t)},expression:"searchForm.purposeType"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:0}},[e._v("\n                      FBA\n                    ")]),r("el-radio-button",{attrs:{label:1}},[e._v("\n                      私人\n                    ")]),r("el-radio-button",{attrs:{label:2}},[e._v("\n                      自有海外仓\n                    ")])],1)],1),"2"===e.custType||"0"===e.custType?r("el-form-item",{attrs:{label:"报价对象","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.category,callback:function(t){e.$set(e.searchForm,"category",t)},expression:"searchForm.category"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),e._l(e.custList,function(t){return r("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])})],2)],1):e._e(),r("el-form-item",{attrs:{label:"价格标准","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.mode,callback:function(t){e.$set(e.searchForm,"mode",t)},expression:"searchForm.mode"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      标准\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      特殊\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"目的港关税","label-width":"90px"}},[r("el-radio-group",{on:{change:function(t){e.searchForm.lscId=void 0}},model:{value:e.searchForm.includeTax,callback:function(t){e.$set(e.searchForm,"includeTax",t)},expression:"searchForm.includeTax"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:!0}},[e._v("\n                      包税\n                    ")]),r("el-radio-button",{attrs:{label:!1}},[e._v("\n                      不包税\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"派送方式","label-width":"90px"}},[r("el-radio-group",{on:{change:function(t){e.searchForm.lscId=void 0}},model:{value:e.searchForm.dispatch,callback:function(t){e.$set(e.searchForm,"dispatch",t)},expression:"searchForm.dispatch"}},[r("el-radio-button",{attrs:{label:void 0}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      卡派\n                    ")]),r("el-radio-button",{attrs:{label:"1"}},[e._v("\n                      快递\n                    ")]),r("el-radio-button",{attrs:{label:"2"}},[e._v("\n                      自提\n                    ")]),"1"===e.searchForm.subtypeId||"2"===e.searchForm.subtypeId?r("el-radio-button",{attrs:{label:"3"}},[e._v("\n                      整柜直送\n                    ")]):e._e(),2===e.searchForm.purposeType?r("el-radio-button",{attrs:{label:"4"}},[e._v("\n                      到仓\n                    ")]):e._e()],1)],1),"0"===e.custType?r("el-form-item",{attrs:{label:"一级代理商","label-width":"90px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getAgentList},model:{value:e.searchForm.custId,callback:function(t){e.$set(e.searchForm,"custId",t)},expression:"searchForm.custId"}},e._l(e.agentList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"服务","label-width":"90px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:e.isLsc,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("sea")}},model:{value:e.searchForm.lscId,callback:function(t){e.$set(e.searchForm,"lscId",t)},expression:"searchForm.lscId"}},e._l(e.serviceList1,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.handleClear("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lineQuoteQuery"],expression:"['lineQuoteQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm("2")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.cardLoading,expression:"cardLoading"}],staticStyle:{height:"calc(100vh - 280px)"}},e._l(e.cardList,function(t){return r("div",{key:t.id,staticClass:"el-card is-hover-shadow",class:{"active-card":e.currentId===t.id},staticStyle:{"font-size":"12px","margin-bottom":"10px",cursor:"pointer"},on:{click:function(i){return e.onRow(t)},contextmenu:function(i){return i.preventDefault(),e.showMenu(t,i)}}},[r("div",{staticClass:"el-card__body"},[r("el-row",[r("el-col",{attrs:{span:1}},["0"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"待审核",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-zero"})]):e._e(),"1"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已通过",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-one"})]):e._e(),"2"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"已拒绝",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-two"})]):e._e(),"3"===t.audit?r("el-tooltip",{attrs:{effect:"dark",content:"审核中",placement:"top"}},[r("i",{staticClass:"card-tips card-tip-three"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:19}},[e._v("\n                  "+e._s(t.lsc.value)+"\n                ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e._v("\n                  "+e._s("1"===t.mode?"特殊报价":"标准报价")+"\n                ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:4}},[e._v("\n                  交货区域\n                ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:16}},[e._v("\n                  "+e._s(e.formatArea(t.deliveries))+"\n                ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["1"===t.category||"2"===t.category?r("span",[e._v("代理商价")]):e._e(),"3"===t.category?r("span",[e._v("直客价")]):e._e(),"4"===t.category?r("span",[e._v("同行价")]):e._e(),"0"===t.category?r("span",[e._v("聚货通价")]):e._e()])],1),r("el-row",[r("el-col",{attrs:{span:3}},["1"===t.status?r("span",{staticClass:"btn-tip-green"},[e._v("\n                    生效中\n                  ")]):e._e(),"0"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                    待生效\n                  ")]):e._e(),"2"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                    已失效\n                  ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:21}},[e._v("\n                  "+e._s(e.formatTime(t.period))+"\n                ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                    "+e._s((t.subtype||{}).value)+"\n                  ")]),e._v(" \n                  "),r("span",{staticClass:"border-tip-blue"},[e._v("\n                    "+e._s(t.includeTax?"包税":"不包税")+"\n                  ")]),e._v(" \n                  "),r("span",{staticClass:"border-tip-blue"},["0"===t.dispatch?r("span",[e._v("\n                      卡派\n                    ")]):e._e(),"1"===t.dispatch?r("span",[e._v("\n                      快递\n                    ")]):e._e(),"2"===t.dispatch?r("span",[e._v("\n                      自提\n                    ")]):e._e(),"3"===t.dispatch?r("span",[e._v("\n                      整柜直送\n                    ")]):e._e(),"4"===t.dispatch?r("span",[e._v("\n                      到仓\n                    ")]):e._e()])])],1)],1)])}),0),r("el-pagination",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{small:"","current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isRightShow,expression:"isRightShow"}]},[r("el-form",{ref:"editForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("el-row",[r("el-col",{attrs:{span:20}},[r("el-form-item",{attrs:{label:"业务类型",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:e.isEdit||!e.isAdd,loading:e.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getSubtypeList,change:e.onSubtype},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"lscId","label-width":"75px"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.lscId,expression:"selectForm.lscId"}],attrs:{slot:"label",content:e.selectForm.lscName+"/"+e.selectForm.lscCode,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"}},[r("div",{staticStyle:{"padding-right":"10px"}},[e.isAdd?r("el-form-item",{attrs:{label:"目的国","label-width":"90px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isEdit||!e.isAdd,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList,change:function(t){return e.onCountry("sel")}},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"派送方式","label-width":"90px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isEdit||!e.isAdd,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{change:function(t){return e.onCountry("sel")}},model:{value:e.selectForm.dispatch,callback:function(t){e.$set(e.selectForm,"dispatch",t)},expression:"selectForm.dispatch"}},[r("el-option",{attrs:{label:"卡派",value:"0"}}),r("el-option",{attrs:{label:"快递",value:"1"}}),r("el-option",{attrs:{label:"自提",value:"2"}}),"1"===e.selectForm.subtypeId||"2"===e.selectForm.subtypeId?r("el-option",{attrs:{label:"整柜直送",value:"3"}}):e._e(),r("el-option",{attrs:{label:"到仓",value:"4"}})],1)],1),r("el-form-item",{attrs:{label:"目的港关税","label-width":"90px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isEdit||!e.isAdd,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{change:function(t){return e.onCountry("sel")}},model:{value:e.selectForm.includeTax,callback:function(t){e.$set(e.selectForm,"includeTax",t)},expression:"selectForm.includeTax"}},[r("el-option",{attrs:{label:"包税",value:!0}}),r("el-option",{attrs:{label:"不包税",value:!1}})],1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"90px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,disabled:e.isEdit||!e.isAdd||!e.selectForm.subtypeId,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getServiceList("sel")},change:e.onServiceSel},model:{value:e.selectForm.lscId,callback:function(t){e.$set(e.selectForm,"lscId",t)},expression:"selectForm.lscId"}},e._l(e.serviceList2,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.selectForm.lscName,callback:function(t){e.$set(e.selectForm,"lscName",t)},expression:"selectForm.lscName"}})],1)])],1),"2"===e.custType&&"2"===e.custSubtype?r("el-form-item",{attrs:{prop:"refId",label:"参考报价"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{loading:e.selectLoading,disabled:e.isEdit||!e.isAdd||!e.selectForm.lscId,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getEffectiveBook,change:e.onEffect},model:{value:e.selectForm.refId,callback:function(t){e.$set(e.selectForm,"refId",t)},expression:"selectForm.refId"}},e._l(e.effectList,function(t,i){return r("el-option",{key:i,attrs:{label:e.formatAreaTime(t.period,t.deliveries),value:t.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"报价对象",prop:"category",required:"2"===e.custType||"0"===e.custType}},["3"===e.custType?r("div",[e._v("\n                聚货通\n              ")]):"2"===e.custType||"0"===e.custType?r("el-select",{staticStyle:{width:"100px"},attrs:{disabled:e.isEdit||!e.isAdd,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.onType},model:{value:e.selectForm.category,callback:function(t){e.$set(e.selectForm,"category",t)},expression:"selectForm.category"}},e._l(e.custList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e()],1),e.wyId!==e.custId&&"0"!==e.custType||"0"!==e.selectForm.mode||"2"!==e.selectForm.category?e._e():r("el-form-item",{attrs:{label:"分公司报价","label-width":"100px"}},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"70px","margin-right":"10px"},attrs:{controls:!1,disabled:!e.isAdd&&!e.isEdit,placeholder:"同行价"},model:{value:e.branch.peer,callback:function(t){e.$set(e.branch,"peer",t)},expression:"branch.peer"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"70px"},attrs:{controls:!1,disabled:!e.isAdd&&!e.isEdit,placeholder:"直客价"},model:{value:e.branch.direct,callback:function(t){e.$set(e.branch,"direct",t)},expression:"branch.direct"}})],1),e.wyId===e.custId&&"0"===e.selectForm.mode&&"2"===e.selectForm.category?r("el-form-item",{attrs:{label:"计费配置","label-width":"100px"}},[r("el-select",{staticStyle:{width:"140px"},attrs:{loading:e.selectLoading,disabled:!e.isAdd&&!e.isEdit,clearable:"",filterable:"",placeholder:"同行计费配置"},on:{focus:e.getChargeList},model:{value:e.measure.peer,callback:function(t){e.$set(e.measure,"peer",t)},expression:"measure.peer"}},e._l(e.chargeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-select",{staticStyle:{"margin-left":"10px",width:"140px"},attrs:{loading:e.selectLoading,disabled:!e.isAdd&&!e.isEdit,clearable:"",filterable:"",placeholder:"直客计费配置"},on:{focus:e.getChargeList},model:{value:e.measure.direct,callback:function(t){e.$set(e.measure,"direct",t)},expression:"measure.direct"}},e._l(e.chargeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e()],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[e.isHistory||"2"===e.selectForm.status||"0"===e.custType?e._e():[!e.isEdit&&!e.isAdd&&("2"===e.custType&&"1"===e.custSubtype&&!e.editOther||"1"!==e.selectForm.audit&&"3"!==e.selectForm.audit)&&e.$checkPermission(["lineQuoteEdit"])?r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.editRow}},[e._v("\n                编辑\n              ")]):e._e(),e.isEdit||e.isAdd||e.editOther||"1"===e.selectForm.audit||"2"===e.selectForm.status||!e.$checkPermission(["lineQuoteAudit"])?e._e():r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.onShow}},[e._v("\n                审核\n              ")]),(e.isAdd||e.isEdit||e.editOther)&&e.$checkPermission(["lineQuoteAdd","lineQuoteEdit"])?r("el-button",{staticStyle:{"padding-right":"10px"},attrs:{type:"text",size:"small"},on:{click:e.cancelRow}},[e._v("\n                取消\n              ")]):e._e(),(e.isAdd||e.isEdit||e.editOther)&&e.$checkPermission(["lineQuoteAdd","lineQuoteEdit"])?r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.saveRow}},[e._v("\n                保存\n              ")]):e._e(),e.isAdd||e.isEdit||e.editOther||"1"===e.selectForm.audit||"3"===e.selectForm.audit||!e.$checkPermission(["lineQuoteDel"])?e._e():r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteRow(1)}}},[e._v("\n                删除\n              ")])],e.isEdit||e.isAdd||e.editOther||"0"===e.custType?e._e():[e.$checkPermission(["lineQuoteCopy"])?r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:e.copyPrice}},[e._v("\n                复制此版本\n              ")]):e._e(),"1"===e.selectForm.audit&&"0"!==e.custType&&!e.historyId&&e.$checkPermission(["linePriceInvalid"])?r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:e.invalidPrice}},[e._v("\n                失效\n              ")]):e._e()]],2)],1),r("div",{staticClass:"item-read"},[r("el-form-item",{attrs:{label:"目的港：","label-width":"95px",prop:""}},[r("div",[e._v("\n              "+e._s(e.selectForm.destinationName)+"\n            ")])]),"1"===e.selectForm.subtypeId||"2"===e.selectForm.subtypeId?r("el-form-item",{attrs:{label:"整柜/拼箱：","label-width":"95px",prop:"containerType"}},[r("div",{staticStyle:{width:"60px"}},["1"===e.selectForm.containerType?r("span",[e._v("\n                整柜\n              ")]):e._e(),"0"===e.selectForm.containerType?r("span",[e._v("\n                拼箱\n              ")]):e._e()])]):e._e(),r("el-form-item",{attrs:{label:"目的港关税：",prop:"includeTax","label-width":"110px"}},[r("div",{staticStyle:{width:"60px"}},[e.selectForm.includeTax?r("span",[e._v("\n                包税\n              ")]):e._e(),e.selectForm.includeTax?e._e():r("span",[e._v("\n                不包税\n              ")])])]),r("el-form-item",{attrs:{label:"目的港派送方式：","label-width":"130px",prop:"dispatch"}},[r("div",{staticStyle:{width:"60px"}},["0"===e.selectForm.dispatch?r("span",[e._v("\n                卡派\n              ")]):e._e(),"1"===e.selectForm.dispatch?r("span",[e._v("\n                快递\n              ")]):e._e(),"2"===e.selectForm.dispatch?r("span",[e._v("\n                自提\n              ")]):e._e(),"3"===e.selectForm.dispatch?r("span",[e._v("\n                整柜直送\n              ")]):e._e(),"4"===e.selectForm.dispatch?r("span",[e._v("\n                到仓\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"重量单位：",prop:"umWeight"}},[r("div",{staticStyle:{width:"60px"}},["T"===e.selectForm.umWeight?r("span",[e._v("\n                T-吨\n              ")]):e._e(),"LBS"===e.selectForm.umWeight?r("span",[e._v("\n                LB-磅\n              ")]):e._e(),"KGS"===e.selectForm.umWeight?r("span",[e._v("\n                KG-公斤\n              ")]):e._e(),"OZS"===e.selectForm.umWeight?r("span",[e._v("\n                OZ-盎\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"长度单位：",prop:"umLength"}},[r("div",{staticStyle:{width:"60px"}},["FT"===e.selectForm.umLength?r("span",[e._v("\n                FT-英尺\n              ")]):e._e(),"M"===e.selectForm.umLength?r("span",[e._v("\n                M-米\n              ")]):e._e(),"CM"===e.selectForm.umLength?r("span",[e._v("\n                CM-厘米\n              ")]):e._e()])]),r("el-form-item",{attrs:{label:"货币单位：",prop:"currencyId"}},[e.selectForm.currencyId?r("span",[e._v(e._s(e.selectForm.currencyId))]):e._e(),e.selectForm.currencyName?r("span",[e._v(e._s("-"+e.selectForm.currencyName))]):e._e()])],1),r("div",{staticClass:"item-read",staticStyle:{"margin-bottom":"10px"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"0"===e.chargeForm.type,expression:"chargeForm.type === '0'"}]},[r("el-form-item",{staticStyle:{"padding-left":"10px"},attrs:{"label-width":"0"}},[r("span",{directives:[{name:"show",rawName:"v-show",value:"0"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '0'"}]},[e._v("取实重")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"2"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '2'"}]},[e._v("取实重或体积重的平均值")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}]},[e._v("取实重或体积重的最大值")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}]},[e._v(" | ")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm&&"0"===e.chargeForm.multiWeight,expression:"chargeForm.algorithm === '1' && chargeForm.multiWeight === '0'"}]},[e._v("先累加后比较")]),r("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm&&"1"===e.chargeForm.multiWeight,expression:"chargeForm.algorithm === '1' && chargeForm.multiWeight === '1'"}]},[e._v("先比较后累加")])]),r("el-form-item",{attrs:{label:"计量误差率(%)：",prop:"deviation","label-width":"130px"}},[e._v("\n              "+e._s(e.chargeForm.deviation)+"\n            ")]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}],attrs:{label:"分泡比率(%)：","label-width":"110px",prop:"bulky"}},[e._v("\n              "+e._s(e.chargeForm.bulky)+"\n            ")]),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.algorithm,expression:"chargeForm.algorithm === '1'"}],attrs:{label:"分泡条件：",prop:"fenestration"}},[e._v("\n              "+e._s(e.chargeForm.fenestration)+"\n            ")]),r("el-form-item",{attrs:{label:"单箱重量：",prop:"sbmc"}},[e._v("\n              "+e._s(e.chargeForm.sbmc)+"\n            ")]),r("el-form-item",{attrs:{label:"单票重量：",prop:"simc"}},[e._v("\n              "+e._s(e.chargeForm.simc)+"\n            ")])],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.chargeForm.type,expression:"chargeForm.type === '1'"}]},[r("el-form-item",{attrs:{label:"计量误差率(%)：","label-width":"130px",prop:"deviation"}},[e._v("\n              "+e._s(e.chargeForm.deviation)+"\n            ")]),r("el-form-item",{attrs:{label:"体积密度：",prop:"density"}},[e._v("\n              "+e._s(e.chargeForm.density)+"\n            ")])],1)]),r("el-row",[r("el-col",{attrs:{span:21}},[r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"3"===e.custType&&e.selectForm.lscId&&e.rangeTitle,expression:"custType === '3' && selectForm.lscId && rangeTitle"}],staticClass:"is-required",attrs:{label:e.rangeTitle}},[r("el-button",{attrs:{disabled:!e.isEdit&&!e.isAdd,type:"primary",size:"mini",plain:""},on:{click:e.onRangeReset}},[e._v("\n                "+e._s(e.rangeTitle)+"\n              ")])],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"3"===e.custType&&e.selectForm.lscId,expression:"custType === '3' && selectForm.lscId"}],staticClass:"is-required",attrs:{label:"目的地/区域","label-width":"110px"}},[r("el-button",{attrs:{disabled:!e.isEdit&&!e.isAdd,type:"primary",size:"mini",plain:""},on:{click:e.onAreaReset}},[e._v("\n                目的地/区域\n              ")])],1),r("el-form-item",{attrs:{label:"交货区域","label-width":"90px",prop:"areaId"}},[r("el-select",{staticStyle:{width:"140px"},attrs:{loading:e.selectLoading,disabled:!e.isEdit&&!e.isAdd||"2"===e.custType&&"2"===e.custSubtype,placeholder:"请选择",clearable:"",filterable:"",multiple:"","collapse-tags":""},model:{value:e.selectForm.areaId,callback:function(t){e.$set(e.selectForm,"areaId",t)},expression:"selectForm.areaId"}},e._l(e.areaList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"4"!==e.selectForm.priceType?r("el-form-item",{attrs:{prop:"measureId","label-width":"105px"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v("计费配置")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.measureId,expression:"selectForm.measureId"}],attrs:{slot:"label",content:e.selectForm.measureName,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("el-select",{staticStyle:{width:"140px"},attrs:{loading:e.selectLoading,disabled:!e.isEdit&&!e.isAdd||!e.selectForm.lscId,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getChargeList,change:e.onCharge},model:{value:e.selectForm.measureId,callback:function(t){e.$set(e.selectForm,"measureId",t)},expression:"selectForm.measureId"}},e._l(e.chargeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):e._e(),r("el-form-item",{attrs:{label:"计费方式",prop:""}},["2"===e.selectForm.priceType?r("span",[e._v("按重量")]):e._e(),"3"===e.selectForm.priceType?r("span",[e._v("按体积")]):e._e(),"4"===e.selectForm.priceType?r("span",[e._v("按整柜")]):e._e()]),"0"===e.custType||"2"===e.custType?r("el-form-item",{attrs:{label:"价格标准",prop:"mode"}},[r("el-radio-group",{attrs:{disabled:!e.isEdit&&!e.isAdd},on:{change:e.onMode},model:{value:e.selectForm.mode,callback:function(t){e.$set(e.selectForm,"mode",t)},expression:"selectForm.mode"}},[r("el-radio",{attrs:{label:"0"}},[e._v("\n                  标准\n                ")]),r("el-radio",{attrs:{label:"1"}},[e._v("\n                  特殊\n                ")])],1)],1):e._e(),"0"!==e.custType&&"2"!==e.custType||"1"!==e.selectForm.mode?e._e():r("el-form-item",{staticClass:"is-required",attrs:{label:"3"===e.selectForm.category||"4"===e.selectForm.category?"关联客户":"关联代理商","label-width":"110px"}},[r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.onCompany}},[e._v("\n                已选择("+e._s((e.selectForm.agentId||[]).length)+")\n              ")])],1),"1"===e.selectForm.mode?r("el-form-item",{attrs:{label:"有效时间",prop:"stdId"}},[r("el-select",{staticStyle:{width:"240px"},attrs:{loading:e.selectLoading,disabled:!e.isEdit&&!e.isAdd,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getTimeList},model:{value:e.selectForm.stdId,callback:function(t){e.$set(e.selectForm,"stdId",t)},expression:"selectForm.stdId"}},e._l(e.timeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.effect+"-"+e.expire,value:e.id}})}),1)],1):e._e(),"0"===e.selectForm.mode?r("el-form-item",{attrs:{label:"有效时间","label-width":"90px",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"310px","margin-right":"10px"},attrs:{disabled:!e.isEdit&&!e.isAdd,clearable:!1,"picker-options":e.pickerOptions,"default-time":["00:00:00","23:59:59"],"unlink-panels":"",type:"datetimerange",align:"left",size:"mini","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1):e._e()],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:3}},[e.isEdit||e.isAdd?e._e():r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",placeholder:"历史版本",size:"mini"},on:{focus:e.getHistoryPrice,change:e.onHistory},model:{value:e.historyId,callback:function(t){e.historyId=t},expression:"historyId"}},e._l(e.historyList,function(t,i){return r("el-option",{key:i,attrs:{label:e.formatTime(t.period),value:t.id}})}),1),["2"].includes(e.custType)&&(e.isAdd||e.isEdit)?r("el-popover",{attrs:{placement:"bottom",trigger:"click"},on:{show:e.onOpen,hide:e.onClose},model:{value:e.batchShow,callback:function(t){e.batchShow=t},expression:"batchShow"}},[r("div",{staticStyle:{padding:"0 20px 0 10px",width:"240px"}},[r("div",[e._v("请输入需要批量修改的值")]),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{margin:"13px 0 26px 0"},attrs:{controls:!1,placeholder:"请输入",precision:2,size:"mini"},on:{focus:function(e){e.stopPropagation()}},model:{value:e.batchNum,callback:function(t){e.batchNum=t},expression:"batchNum"}}),r("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{color:"#FF6D00"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.batchConfirm(0)}}},[e._v("\n                    重置\n                  ")]),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticStyle:{color:"#999999"},attrs:{type:"text",size:"mini"},on:{click:function(t){e.batchShow=!1}}},[e._v("\n                      取消\n                    ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.batchConfirm(1)}}},[e._v("\n                      保存\n                    ")])],1)],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n                批量修改\n              ")])],1):e._e()],1)],1),e.isEdit||e.isAdd||"2"!==e.selectForm.audit?e._e():r("div",[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"拒绝原因：","label-width":"90px"}},[e._v("\n            "+e._s(e.selectForm.remark)+"\n          ")])],1)],1),r("div",[e.aAxisData.length?r("vxe-table",{ref:"priceTable",staticStyle:{width:"100%"},attrs:{border:"","row-key":"",data:e.tableData,size:"small",height:"540","row-class-name":e.tableRowClassName,"auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"50"},scopedSlots:e._u([{key:"default",fn:function(){return[r("span",{staticClass:"drag-btn"},[r("i",{staticClass:"vxe-icon--menu"})])]},proxy:!0}],null,!1,3318083338)}),r("vxe-table-column",{attrs:{"show-overflow":!0,"show-header-overflow":!0,width:"200",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.address||{}).value)+"\n            ")]}}],null,!1,1197677353)},[r("template",{slot:"header"},[r("span",{staticClass:"header-row"},[e._v(e._s(e.leftTitle))]),r("span",[e._v("  \\  ")]),r("span",{staticClass:"header-column"},[e._v(e._s(e.rightTitle))])])],2),e.isShowRegionalDetailCol?r("vxe-table-column",{attrs:{"show-overflow":!0,"show-header-overflow":!0,width:"200",resizable:!0,title:"区域详情",field:"regionalDetails"}}):e._e(),e._l(e.aAxisData,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",[!e.isEdit&&!e.isAdd||t.row.isUpper?r("span",[e._v(e._s((t.row.prices[i]||{}).price))]):r("el-input-number",{staticClass:"input-number-valiate",attrs:{size:"small",controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:t.row.prices[i].price,callback:function(r){e.$set(t.row.prices[i],"price",r)},expression:"scope.row.prices[index].price"}})],1)]}}],null,!0)})}),r("vxe-table-column",{attrs:{"min-width":"100",title:"参考时效(天)","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[(e.isEdit||e.isAdd||e.editOther)&&"2"===e.custType&&"1"===e.custSubtype?r("el-input",{attrs:{placeholder:"请填写例:1-2或1至2或1到2",size:"small"},model:{value:t.row.prescription,callback:function(i){e.$set(t.row,"prescription",i)},expression:"scope.row.prescription"}}):r("span",[e._v(e._s(t.row.prescription))])]}}],null,!1,727444108)}),r("vxe-table-column",{attrs:{"min-width":"120",title:"备注","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[(e.isEdit||e.isAdd||e.editOther)&&!t.row.isUpper?r("el-input",{attrs:{placeholder:"请输入",maxlength:100,size:"small"},model:{value:t.row.remark,callback:function(i){e.$set(t.row,"remark",i)},expression:"scope.row.remark"}}):r("span",[e._v(e._s(t.row.remark))])]}}],null,!1,1475408165)})],2):e._e()],1)],1)]),r("el-dialog",{attrs:{width:"600px",title:"审核状态",visible:e.auditShow,"append-to-body":""},on:{"update:visible":function(t){e.auditShow=t},closed:e.onHide}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}],staticStyle:{"padding-right":"15px"}},[r("el-form",{ref:"auditForm",attrs:{model:e.auditForm,rules:e.auditRules,"label-width":"90px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"审核状态：",prop:"audit","label-width":"110px"}},[r("el-radio-group",{model:{value:e.auditForm.audit,callback:function(t){e.$set(e.auditForm,"audit",t)},expression:"auditForm.audit"}},[r("el-radio",{attrs:{label:"1"}},[e._v("\n              通过\n            ")]),r("el-radio",{attrs:{label:"2"}},[e._v("\n              拒绝\n            ")])],1)],1),"2"===e.auditForm.audit?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"remark","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,maxlength:100,placeholder:"请输入原因"},model:{value:e.auditForm.remark,callback:function(t){e.$set(e.auditForm,"remark",t)},expression:"auditForm.remark"}})],1):e._e(),r("div",{directives:[{name:"show",rawName:"v-show",value:"1"===e.auditForm.audit&&"2"===e.selectForm.category&&e.unCompanyList.length>0,expression:"auditForm.audit === '1' && selectForm.category === '2' && unCompanyList.length > 0"}],staticStyle:{"margin-left":"20px"}},[r("div",{staticClass:"audit-check"},[r("el-checkbox",{attrs:{indeterminate:e.isIndeterminate2},on:{change:e.onCheckAll},model:{value:e.checkAll2,callback:function(t){e.checkAll2=t},expression:"checkAll2"}},[e._v("\n              分公司同步审核通过\n            ")])],1),r("div",{staticClass:"audit-group"},[r("el-checkbox-group",{on:{change:e.onChecked},model:{value:e.auditForm.companyIds,callback:function(t){e.$set(e.auditForm,"companyIds",t)},expression:"auditForm.companyIds"}},e._l(e.unCompanyList,function(t,i){return r("el-checkbox",{key:i,staticStyle:{display:"block",margin:"8px 0"},attrs:{label:t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),1)],1)]),r("div",{staticStyle:{"text-align":"right","padding-top":"10px"}},[r("el-button",{attrs:{size:"small"},on:{click:e.onHide}},[e._v("\n            取消\n          ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.auditRow}},[e._v("\n            确认\n          ")])],1)],1)],1)]),r("el-dialog",{attrs:{visible:e.dialogRange,"close-on-click-modal":!1,width:"one"===e.isType?"600px":"960px"},on:{"update:visible":function(t){e.dialogRange=t},closed:e.cancelRange}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("p",[e._v("\n        "+e._s("选择"+e.title)+"\n      ")]),"one"===e.isType||"two"===e.isType?r("p",{staticStyle:{"font-size":"14px",color:"#606266"}},[e._v("\n        "+e._s(e.text)+"\n      ")]):e._e()]),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}]},[r("el-form",{ref:"dialogForm",staticClass:"dialog-form",attrs:{model:e.dialogForm,"label-width":"100px","label-position":"right",size:"small"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:"one"===e.isType,expression:"isType === 'one'"}]},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"80%"},attrs:{label:"区间范围",prop:"sections"}},e._l(e.dialogForm.sections,function(t,i){return r("div",{key:i,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections[i].lower,callback:function(t){e.$set(e.dialogForm.sections[i],"lower",t)},expression:"dialogForm.sections[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections[i].upper,callback:function(t){e.$set(e.dialogForm.sections[i],"upper",t)},expression:"dialogForm.sections[index].upper"}}),r("span",[r("i",0===i?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:function(t){return e.addRangeData("0")}}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData(i,"0")}}})])],1)}),0)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"two"===e.isType,expression:"isType === 'two'"}]},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"80%"},attrs:{label:"重量范围",prop:"sections1"}},e._l(e.dialogForm.sections1,function(t,i){return r("div",{key:i,staticClass:"item-after-icon"},[r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入下限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections1[i].lower,callback:function(t){e.$set(e.dialogForm.sections1[i],"lower",t)},expression:"dialogForm.sections1[index].lower"}}),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{width:"45%"},attrs:{controls:!1,placeholder:"输入上限",min:0,max:999999,step:1,"step-strictly":""},model:{value:e.dialogForm.sections1[i].upper,callback:function(t){e.$set(e.dialogForm.sections1[i],"upper",t)},expression:"dialogForm.sections1[index].upper"}}),r("span",[r("i",0===i?{staticClass:"el-icon-circle-plus-outline item-icon-plus",on:{click:function(t){return e.addRangeData("1")}}}:{staticClass:"el-icon-remove-outline item-icon-reduce",on:{click:function(t){return e.deleteRangeData(i,"1")}}})])],1)}),0)],1),r("div",{directives:[{name:"show",rawName:"v-show",value:"four"===e.isType,expression:"isType === 'four'"}],staticStyle:{padding:"0 30px"}},[r("el-form-item",{staticClass:"is-required",staticStyle:{width:"50%"},attrs:{label:"地址类型"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",filterable:"",clearable:"",placeholder:"请选择"},on:{change:e.onAddress},model:{value:e.dialogForm.yType,callback:function(t){e.$set(e.dialogForm,"yType",t)},expression:"dialogForm.yType"}},e._l(e.addressList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"0"!==e.dialogForm.yType&&"102"!==e.dialogForm.yType?r("el-form-item",{staticClass:"is-required",staticStyle:{width:"50%"},attrs:{label:"国家"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList,change:e.onAxisYCountry},model:{value:e.dialogForm.countryId,callback:function(t){e.$set(e.dialogForm,"countryId",t)},expression:"dialogForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1):e._e()],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:"three"===e.isType||"four"===e.isType,expression:"isType === 'three' || isType === 'four'"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择"+e.title,"已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.boxList},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}})],1),r("div",{staticStyle:{"text-align":"right",margin:"20px 20px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveRange}},[e._v("\n          保存\n        ")])],1)],1)]),r("el-dialog",{attrs:{title:e.title,visible:e.dialogCompany,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.dialogCompany=t},closed:e.cancelCompany}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}]},[r("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择"+e.title,"已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.companyList},model:{value:e.options,callback:function(t){e.options=t},expression:"options"}}),!e.isEdit&&!e.isAdd&&e.isHistory||!e.isEdit&&!e.isAdd&&"1"!==e.selectForm.audit?e._e():r("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogCompany=!1}}},[e._v("\n          取消\n        ")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCompany}},[e._v("\n          保存\n        ")])],1)],1)]),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"}],staticClass:"contextmenu",style:{left:e.menuLeft+"px",top:e.menuTop+"px"}},[r("li",{directives:[{name:"permission",rawName:"v-permission",value:["lineQuoteCopy"],expression:"['lineQuoteCopy']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.onRow(e.showMenuRow,!0)}}},[e._v("\n      复制\n    ")]),r("li",{directives:[{name:"permission",rawName:"v-permission",value:["lineQuoteGet"],expression:"['lineQuoteGet']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.onRow(e.showMenuRow)}}},[e._v("\n      查看\n    ")]),"1"!==e.showMenuRow.audit&&"3"!==e.showMenuRow.audit&&e.$checkPermission(["lineQuoteDel"])?r("li",{staticClass:"contextmenu-item",on:{click:function(t){return e.deleteRow(2)}}},[e._v("\n      删除\n    ")]):e._e()]),r("agent-price",{ref:"AgentPrice",on:{close:e.closeAgentPrice}}),r("transition",{attrs:{name:"el-fade-in-linear"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showAgentPriceModel&&e.isRightShow&&"0"===e.custType&&e.$checkPermission(["lineQuoteQuotation"]),expression:"showAgentPriceModel && isRightShow && custType === '0' && $checkPermission(['lineQuoteQuotation'])"},{name:"drag",rawName:"v-drag"}],staticClass:"agent-price"},[r("el-tooltip",{attrs:{effect:"dark",content:"供应商报价",placement:"top"}},[r("i",{staticClass:"icon-price",on:{click:e.showAgentPrice}})])],1)])],1)},a=[],s=(i("8e6e"),i("6762"),i("2fdb"),i("c5f6"),i("7f7f"),i("7514"),i("a8db")),n=(i("55dd"),i("bd86")),o=(i("ac6a"),i("456d"),i("96cf"),i("3b8d")),c=i("d225"),l=i("b0b4"),u=i("308d"),d=i("6bb5"),m=i("4e2b"),p=i("9ab4"),h=i("60a3"),f=i("9dba"),v=i("768a"),g=i("d2ca"),y=i("5a0c"),b=i.n(y),w=i("59c4"),x=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("vxe-modal",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"show-zoom":"",resize:"","z-index":1314,"lock-view":!1,mask:!1,"lock-scroll":!1,width:"1100","min-width":"700",height:"500","min-height":"400"},on:{close:e.close},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"my-title",attrs:{slot:"title"},on:{click:function(e){return e.stopPropagation(),function(e){return e}(e)}},slot:"title"},[i("span",[e._v("供应商")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px","margin-right":"20px"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"请选择"},on:{change:e.selectAgentChange},model:{value:e.form.agent,callback:function(t){e.$set(e.form,"agent",t)},expression:"form.agent"}},e._l(e.agentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("span",[e._v("版本")]),i("el-select",{staticStyle:{width:"240px","margin-left":"10px"},attrs:{clearable:"",filterable:"",disabled:!e.form.agent,size:"mini",placeholder:"请选择"},on:{change:e.showPrice},model:{value:e.form.edition,callback:function(t){e.$set(e.form,"edition",t)},expression:"form.edition"}},e._l(e.editionList,function(t){return i("el-option",{key:t.id,attrs:{label:e.formatTime(t.period),value:t.id}})}),1)],1),i("div",[e.aAxisData.length?i("vxe-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",resizable:"",size:"small","auto-resize":!0}},[i("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s((t.row.address||{}).value)+"\n        ")]}}],null,!1,341388585)},[i("template",{slot:"header"},[i("span",{staticClass:"header-row"},[e._v(e._s(e.leftTitle))]),i("span",[e._v("  \\  ")]),i("span",{staticClass:"header-column"},[e._v(e._s(e.rightTitle))])])],2),e.isShowRegionalDetailCol?i("vxe-table-column",{attrs:{"show-overflow":!0,"show-header-overflow":!0,width:"200",resizable:!0,title:"区域详情",field:"regionalDetails"}}):e._e(),e._l(e.aAxisData,function(t,r){return i("vxe-table-column",{key:r,attrs:{title:t.label,resizable:!0,"show-overflow":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v("\n            "+e._s(t.row.prices[r].price)+"\n          ")])]}}],null,!0)})}),i("vxe-table-column",{attrs:{"min-width":"100",title:"参考时效(天)","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v("\n            "+e._s(t.row.prescription)+"\n          ")])]}}],null,!1,267041766)}),i("vxe-table-column",{attrs:{"min-width":"120",title:"备注","show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v("\n            "+e._s(t.row.remark)+"\n          ")])]}}],null,!1,3622360964)})],2):e._e()],1)])},k=[],F=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.leftTitle="",e.rightTitle="",e.visible=!1,e.isMinimize=!1,e.loading=!1,e.isShowRegionalDetailCol=!1,e.agentList=[],e.agentPriceList=[],e.aAxisData=[],e.tableData=[],e.editionList=[],e.selectService={},e.dayjs=b.a,e.form={agent:"",edition:""},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"show",value:function(e){this.isMinimize||(this.selectService=e,this.aAxisData=[],this.tableData=[],this.agentList=[],this.agentPriceList=[],this.editionList=[],this.form={agent:"",edition:""},this.getAgentPriceList()),this.visible=!0}},{key:"getAgentPriceList",value:function(){var e=this,t={lscId:this.selectService.id};this.loading=!0,Object(v["q"])(t).then(function(t){e.loading=!1,t.success&&(e.agentPriceList=t.data||[],e.getAgentList())}).catch(function(t){return e.loading=!1,t})}},{key:"groupByPid",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=["5","100","101","102"],i=this.tableData[0].addressType,-1!==t.indexOf(i)){e.next=6;break}this.isShowRegionalDetailCol=!1,e.next=12;break;case 6:return this.isShowRegionalDetailCol=!0,r=this.tableData.reduce(function(e,t){var i=t.address?t.address.key:"";return i&&-1===e.indexOf(i)&&e.push(i),e},[]),a={ids:r},"5"===i&&(a.type=1),e.next=12,Object(v["t"])(a).then(function(e){var t=e.data||{},r=Object.keys(t).map(function(e){var r={key:e,value:t[e].map(function(e){var t="";return"101"===i&&(t=e.warehouseName),"102"===i&&(t=e.countryId+"-"+e.countryName),"100"===i&&(t=e.cityName+"-"+e.cityName),"5"===i&&(t=e.stateName),t}).join("，")};return r});s.tableData=s.tableData.map(function(e){var t=e.address?e.address.key:"";return r.map(function(i){i.key===t&&(e.regionalDetails=i.value)}),e})}).catch(function(e){return e});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAxis",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,r,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.rows||[],r=t.loadType,i[0]&&"0"===i[0].addressType?this.leftTitle="国家":i[0]&&"1"===i[0].addressType?this.leftTitle="州省":i[0]&&"5"===i[0].addressType?this.leftTitle="国内区域":i[0]&&"7"===i[0].addressType?this.leftTitle="仓库代码":i[0]&&"100"===i[0].addressType?this.leftTitle="城市区域":i[0]&&"101"===i[0].addressType?this.leftTitle="仓库区域":i[0]&&"102"===i[0].addressType&&(this.leftTitle="国家区域"),this.tableData=i,e.next=6,this.groupByPid();case 6:Array.isArray(i)&&i.length>0&&(a=i[0].prices||[],this.aAxisData=a.map(function(e,t){var i=e.x||{},a={label:"",aAxisArr:[]};return"5"===r&&"0"===e.type?(a.label="".concat(i.lower,"-").concat(i.upper),s.rightTitle="重量区间"):"5"===r&&"1"===e.type?(a.label="".concat(i.lower,"-").concat(i.upper),s.rightTitle="方数区间"):"2"===r?(s.rightTitle="柜型",a.label=i.value):("0"===e.type&&(s.rightTitle="重量区间"),"1"===e.type&&(s.rightTitle="体积区间"),a.label="".concat(i.lower,"-").concat(i.upper)),a}));case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getAgentList",value:function(){var e=this.agentPriceList.map(function(e){return{name:e.cust.value,id:e.cust.key}});this.agentList=e.reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[])}},{key:"selectAgentChange",value:function(e){this.editionList=this.agentPriceList.filter(function(t){return t.cust.key===e}),this.form.edition="",this.aAxisData=[],this.tableData=[]}},{key:"showPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.aAxisData=[],this.tableData=[],i=this.agentPriceList.find(function(e){return e.id===t}),!i){e.next=6;break}return e.next=6,this.getAxis(i);case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"formatTime",value:function(e){var t=(e||{}).effect,i=(e||{}).expire;return b()(t).format("YYYY-MM-DD HH:mm")+"-"+b()(i).format("YYYY-MM-DD HH:mm")}},{key:"minimize",value:function(){this.isMinimize=!0,this.visible=!1,this.$emit("close")}},{key:"close",value:function(){this.isMinimize=!1,this.visible=!1,this.$emit("close")}}]),t}(h["e"]);F=p["a"]([Object(h["a"])({name:"agentPrice"})],F);var S=F,L=S,_=(i("cde1"),i("2877")),I=Object(_["a"])(L,x,k,!1,null,"04420215",null),C=I.exports,T=i("53fe"),O=i.n(T);function j(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?j(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):j(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function P(){return{destinationName:"",subtypeId:void 0,subtypeName:void 0,containerType:void 0,lscId:void 0,lscName:void 0,lscCode:void 0,status:void 0,areaId:[],refId:void 0,measureId:void 0,measureName:void 0,deliveryId:void 0,deliveryName:void 0,priceType:void 0,purposeType:void 0,currencyId:void 0,countryId:void 0,category:void 0,umWeight:void 0,umLength:void 0,includeTax:void 0,agentId:[],mode:"0",times:[],stdId:void 0,dispatch:void 0,sections:[{lower:void 0,upper:void 0}],audit:void 0,remark:""}}function N(){return{loadType:void 0,yType:void 0,xType:void 0,serviceSubtype:{key:void 0,value:void 0},service:{key:void 0,value:void 0},keyValues:[{country:{key:void 0,value:void 0},keyValue:{key:void 0,value:void 0}}],ranges:[{type:void 0,upperLower:{key:void 0,value:void 0},keyValue:{key:void 0,value:void 0}}],countryId:void 0,sections:[{lower:void 0,upper:void 0}],sections1:[{lower:void 0,upper:void 0}],sections2:[{lower:void 0,upper:void 0}],xy:""}}function D(){return{type:void 0,deviation:void 0,density:void 0,algorithm:void 0,bulky:void 0,fenestration:void 0,sbmc:void 0,simc:void 0,multiWeight:void 0}}var z=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.wyId="280b587801744450a6b5aa3155c25e61",e.branch={peer:void 0,direct:void 0},e.measure={peer:void 0,direct:void 0},e.showAgentPriceModel=!0,e.text="(取值范围：>=起始值， <结束值)",e.showMenuRow={},e.isShowMenu=!1,e.menuTop=0,e.menuLeft=0,e.searchForm={subtypeId:void 0,lscId:void 0,custId:void 0,category:void 0,purposeType:void 0,lscName:void 0,destinationCountry:void 0,mode:void 0,areaId:[],dispatch:void 0,includeTax:void 0,audit:void 0,effect:void 0,expire:void 0,times:[]},e.selectForm=P(),e.dialogForm=N(),e.auditForm={audit:void 0,remark:void 0,companyIds:[]},e.chargeForm=D(),e.auditRules={audit:[{required:!0,message:"请选择审核状态",trigger:"change"}]},e.formRules={subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],countryId:[{required:!1,message:"请选择目的国",trigger:"change"}],lscId:[{required:!0,message:"请选择服务",trigger:"change"}],category:[{required:!0,message:"请选择报价对象",trigger:"change"}],refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],areaId:[{required:!0,message:"请选择交货区域",trigger:"change"}],measureId:[{required:!0,message:"请选择计费配置",trigger:"change"}],mode:[{required:!0,message:"请选择价格标准",trigger:"change"}],times:[{required:!0,message:"请选择有效时间",trigger:"change"}],stdId:[{required:!0,message:"请选择有效时间",trigger:"change"}]},e.addressList=[{name:"国家",id:"0"},{name:"国内区域",id:"5"},{name:"城市区域",id:"100"},{name:"仓库区域",id:"101"},{name:"国家区域",id:"102"},{name:"州省",id:"1"},{name:"仓库代码",id:"7"}],e.editOther=!1,e.isActive=!0,e.popoverShow1=!1,e.popoverShow2=!1,e.selectLoading=!1,e.formLoading=!1,e.cardLoading=!1,e.checkAll=!1,e.isIndeterminate=!1,e.checkAll2=!1,e.isIndeterminate2=!1,e.isEdit=!1,e.isAdd=!1,e.dialogRange=!1,e.dialogCompany=!1,e.isType="",e.title="",e.leftTitle="",e.rightTitle="",e.rangeTitle="",e.currentId="",e.currentLscId="",e.currentRefId="",e.currentAreaId=[],e.isTableShow=!1,e.isRightShow=!1,e.isHistory=!1,e.options=[],e.boxList=[],e.companyList=[],e.typeList=[],e.countryList=[],e.agentList=[],e.unCompanyList=[],e.auditList=[{name:"待审核",id:"0"},{name:"已通过",id:"1"},{name:"已拒绝",id:"2"},{name:"审核中",id:"3"}],e.auditShow=!1,e.batchShow=!1,e.isShowRegionalDetailCol=!1,e.batchNum="",e.effectList=[],e.copyTable=[],e.custList=[],e.historyId="",e.historyList=[],e.areaList=[],e.serviceList1=[],e.serviceList2=[],e.currencyList=[],e.warehouseList=[],e.chargeList=[],e.tableData=[],e.cardList=[],e.tableUpper=[],e.timeList=[],e.tableXY=[],e.aAxisData=[],e.page=1,e.size=10,e.total=0,e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"onIsShowMenuChange",value:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},{key:"getAgentList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:9999,parentId:this.custId};Object(v["d"])(t).then(function(t){var i=t.data||{},r=i.result||[];e.agentList=r.filter(function(e){return"1"===e.status}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"invalidPrice",value:function(){var e=this;this.$confirm("该操作会使此报价及相关代理报价失效，请确认是否操作?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.currentId},i=e.$loading({lock:!0,text:"",background:"hsla(0,0%,100%,.9)"});Object(v["u"])(t).then(function(){i.close(),e.resetForm(),e.getTableData()}).catch(function(){i.close()})}).catch(function(){return!1})}},{key:"groupByPid",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=["5","100","101","102"],i=this.tableData[0].addressType,-1!==t.indexOf(i)){e.next=6;break}this.isShowRegionalDetailCol=!1,e.next=12;break;case 6:return this.isShowRegionalDetailCol=!0,r=this.tableData.reduce(function(e,t){var i=t.address?t.address.key:"";return i&&-1===e.indexOf(i)&&e.push(i),e},[]),a={ids:r},"5"===i&&(a.type=1),e.next=12,Object(v["t"])(a).then(function(e){s.formLoading=!1;var t=e.data||{},r=Object.keys(t).map(function(e){var r={key:e,value:t[e].map(function(e){var t="";return"101"===i&&(t=e.warehouseName),"102"===i&&(t=e.countryId+"-"+e.countryName),"100"===i&&(t=e.cityName),"5"===i&&(t=e.stateName),t}).join("，")};return r});s.tableData=s.tableData.map(function(e){var t=e.address?e.address.key:"";return r.map(function(i){i.key===t&&(e.regionalDetails=i.value)}),e})}).catch(function(e){return s.formLoading=!1,e});case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setSort",value:function(){var e=this;this.aAxisData.length>0&&this.$nextTick(function(){var t=e.$refs.priceTable,i=t.$el,r=i.querySelector(".body--wrapper>.vxe-table--body tbody"),a=e;O.a.create(r,{handle:".drag-btn",animation:300,onEnd:function(e){var t=e.newIndex,i=e.oldIndex,r=a.tableData.splice(i,1)[0];a.tableData.splice(t,0,r)}})})}},{key:"copyPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t="",!this.historyId){e.next=10;break}return t=this.historyId,this.historyList.map(function(e){i.historyId===e.id&&(i.selectForm.refId=e.refId,i.selectForm.areaId=e.deliveries.map(function(e){return e.key}))}),this.selectForm.lscId=this.currentLscId,e.next=7,this.getEffectiveBook();case 7:this.effectList.map(function(e){if(i.selectForm.refId===e.id){var t=e.rows||[];i.tableUpper=t.map(function(e){if(e)return A({},e,{isUpper:!0})})}}),e.next=11;break;case 10:t=this.currentId;case 11:return this.tableUpper=this.tableUpper.sort(function(e,t){return e.address.value.localeCompare(t.address.value)}),e.next=14,this.getRowDetail(t,!0);case 14:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"showMenu",value:function(e,t){this.$checkPermission(["lineQuoteGet","lineQuoteCopy","lineQuoteDel"])&&(this.showMenuRow=e,this.menuLeft=t.clientX,this.menuTop=t.clientY,this.isShowMenu=!0)}},{key:"closeMenu",value:function(){this.isShowMenu=!1}},{key:"formatArea",value:function(e){var t=(e||[]).map(function(e){return e.value});return t.join(",")}},{key:"formatAreaTime",value:function(e,t){var i=(t||[]).map(function(e){return e.value}),r=(e||{}).effect,a=(e||{}).expire;return b()(r).format("YYYY-MM-DD HH:mm")+"-"+b()(a).format("YYYY-MM-DD HH:mm")+" "+i.join(",")}},{key:"formatTime",value:function(e){var t=(e||{}).effect,i=(e||{}).expire;return b()(t).format("YYYY-MM-DD HH:mm")+"-"+b()(i).format("YYYY-MM-DD HH:mm")}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"tableRowClassName",value:function(e){return e.row.isUpper?"success-row":""}},{key:"handleClear",value:function(e){switch(e){case"1":this.searchForm.destinationCountry=void 0,this.searchForm.lscId=void 0,this.searchForm.lscName=void 0;break;case"2":this.searchForm.areaId=[],this.searchForm.mode=void 0,this.searchForm.includeTax=void 0,this.searchForm.category=void 0,this.searchForm.dispatch=void 0,this.searchForm.custId=void 0,this.searchForm.times=[];break;default:break}}},{key:"handleConfirm",value:function(e){"1"===e?this.popoverShow1=!1:"2"===e&&(this.popoverShow2=!1),this.getTableData(1)}},{key:"getTableData",value:function(e){var t=this;this.cardLoading=!0;var i=this.searchForm,r=i.areaId,a=i.times,n=i.custId,o=Object(s["a"])(i,["areaId","times","custId"]);1===e&&(this.page=e);var c=A({},o,{custId:"0"===this.custType?n:this.custId,effect:Array.isArray(a)&&a.length>0?a[0]+" 00:00:00":void 0,expire:Array.isArray(a)&&a.length>0?a[1]+" 23:59:59":void 0,page:this.page,size:this.size}),l=(r||[]).map(function(e){var i=t.areaList.find(function(t){return e===t.name})||{};if(i.id&&i.name)return i.id});c.deliveries=l.join(","),Object(v["n"])(c).then(function(e){var i=e.data||{};t.cardList=i.result||[],t.total=i.total,t.cardLoading=!1}).catch(function(e){return t.cardLoading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getTableData()}},{key:"onRow",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$checkPermission(["lineQuoteGet","lineQuoteCopy"])){e.next=2;break}return e.abrupt("return");case 2:if(!this.formLoading){e.next=4;break}return e.abrupt("return");case 4:return this.resetForm(),this.showMenuRow=t,this.isRightShow=!0,this.formLoading=!0,this.currentId=t.id,this.currentLscId=t.lsc.key,this.currentRefId=t.refId,this.currentAreaId=t.deliveries.map(function(e){return e.key}),this.selectForm.lscId=t.lsc.key,this.selectForm.refId=t.refId,this.selectForm.areaId=t.deliveries.map(function(e){return e.key}),e.next=17,this.getEffectiveBook();case 17:return this.effectList.map(function(e){if(r.selectForm.refId===e.id){var t=e.rows||[];r.tableUpper=t.map(function(e){if(e)return A({},e,{isUpper:!0})})}}),this.tableUpper=this.tableUpper.sort(function(e,t){return e.address.value.localeCompare(t.address.value)}),e.next=21,this.getRowDetail(this.currentId,i);case 21:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getRowDetail",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r,a,n,o,c,l,u,d,m,p,h,f,g,y,w,x,k,F,S,L,_,I,C,T,O,j,P=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.historyList=[],this.formLoading=!0,e.prev=2,e.next=5,Object(v["l"])({id:t});case 5:return r=e.sent,a=r.data||{},n=a.measureDirect,o=void 0===n?{}:n,c=a.measurePeer,l=void 0===c?{}:c,u=a.peer,d=a.direct,m=a.currency,p=a.deliveries,h=a.lsc,f=a.period,g=a.specials,y=a.subtype,w=a.rows,x=a.measure,k=a.loadType,F=Object(s["a"])(a,["measureDirect","measurePeer","peer","direct","currency","deliveries","lsc","period","specials","subtype","rows","measure","loadType"]),this.branch={peer:u,direct:d},this.measure={peer:(l||{}).key,direct:(o||{}).key},S=((w||[])[0]||{}).addressType,L={0:"国家",1:"州省",5:"国内区域",7:"仓库代码",100:"城市区域",101:"仓库区域",102:"国家区域"},Object.keys(L).map(function(e){e===S&&(P.leftTitle=L[e])}),_=((w||[])[0]||{}).prices||[],this.aAxisData=_.map(function(e){var t=e.x||{},i={label:"",aAxisArr:[]};return"2"===k?(i.label=t.value,P.rightTitle="柜型"):(P.rightTitle="5"===k&&"1"===e.type?"方数区间":"0"===e.type?"重量区间":"体积区间",i.label="".concat(t.lower,"-").concat(t.upper)),i}),I="",C="",f.effect&&f.expire&&!i&&(I=b()(f.effect).format("YYYY-MM-DD HH:mm:ss"),C=b()(f.expire).format("YYYY-MM-DD HH:mm:ss")),this.selectForm=A({},F,{yType:S,loadType:k,measureId:(x||{}).key,measureName:(x||{}).value,lscId:(h||{}).key,lscName:(h||{}).value,subtypeId:(y||{}).key,subtypeName:(y||{}).value,currencyId:(m||{}).key,currencyName:(m||{}).value,times:I&&C?[I,C]:[],agentId:g.map(function(e){return e.key}),areaId:p.map(function(e){return e.key})}),e.next=21,this.getServiceList("sel");case 21:return T=this.serviceList2.find(function(e){return e.id===P.selectForm.lscId})||{},this.selectForm.lscCode=T.lsId,this.selectForm.destinationName=T.destinationName,O=[],w.map(function(e,t){e.prices=e.prices.map(function(e){var t=A({},e);return t.price=String(t.price)?t.price:void 0,t}),O.push(e)}),j=O.sort(function(e,t){return e.address.value.localeCompare(t.address.value)}),this.tableData=j.reduce(function(e,t,i){if(Array.isArray(P.tableUpper)&&P.tableUpper[i]){var r=P.tableUpper[i]||{address:t.address,addressType:t.addressType,prices:[],remark:void 0,prescription:"",isUpper:!0};e.push(r),t.prescription=r.prescription,t.remark=r.remark}return e.push(t),e},[]),this.setSort(),e.next=31,this.groupByPid();case 31:return this.copyTable=JSON.parse(JSON.stringify(O)),this.isTableShow=!0,i?(this.selectForm.audit=void 0,this.selectForm.id=void 0,this.isAdd=!0,this.isEdit=!1,this.editOther=!1,this.currentId="",this.historyId="",this.isHistory=!1,this.selectForm.status=void 0):this.isAdd=!1,"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice(),e.next=37,this.getChargeCopyList();case 37:this.onRangeTitle(),this.getSubtypeList(),this.getTimeList(),this.getCustTypeList(),this.formLoading=!1,e.next=47;break;case 44:e.prev=44,e.t0=e["catch"](2),this.formLoading=!1;case 47:case"end":return e.stop()}},e,this,[[2,44]])}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"addPrice",value:function(){this.resetForm(),this.isRightShow=!0,this.isAdd=!0}},{key:"editRow",value:function(){"1"!==this.selectForm.audit&&"3"!==this.selectForm.audit?this.isEdit=!0:this.editOther=!0}},{key:"onShow",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.auditingRow(),t=this.selectForm,t.audit,i=t.remark,this.auditForm={audit:"1",companyIds:[],remark:i},this.auditShow=!0,this.custId!==this.wyId){e.next=9;break}return e.next=7,this.getUnFinanceCompanyList();case 7:this.checkAll2=!0,this.onCheckAll(this.checkAll2);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onHide",value:function(){this.auditShow=!1,this.checkAll2=!1,this.isIndeterminate2=!1,this.auditForm={audit:void 0,remark:void 0,companyIds:[]};var e=this.$refs.auditForm;this.$nextTick(function(){e.clearValidate()})}},{key:"onCheckAll",value:function(e){var t=this.unCompanyList.map(function(e){return e.id});this.auditForm.companyIds=e?t:[],this.isIndeterminate2=!1}},{key:"onChecked",value:function(e){var t=(e||[]).length,i=(this.unCompanyList||[]).length;this.checkAll2=t===i,this.isIndeterminate2=t>0&&t<i}},{key:"getUnFinanceCompanyList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={custId:this.custId},e.next=4,Object(v["s"])(t).then(function(e){var t=e.data||[];i.unCompanyList=t,i.selectLoading=!1}).catch(function(e){return i.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onOpen",value:function(){this.batchNum=void 0}},{key:"onClose",value:function(){this.batchNum=void 0}},{key:"batchConfirm",value:function(e){var t=this;this.tableData=this.tableData.map(function(i,r,a){if("0"===t.custType||"2"===t.custType)i.prices=i.prices.map(function(r,a){return 1===e?i.prices[a]&&(r.price=parseFloat(((i.prices[a].price||0)+t.batchNum).toFixed(2))):t.batchNum?i.prices[a]&&i.prices[a].price&&(r.price=parseFloat((i.prices[a].price-t.batchNum).toFixed(2))):r.price=void 0,r});else if(r%2!==0){var s=a[r-1];i.prices=i.prices.map(function(i,r){return 1===e?s.prices[r]&&s.prices[r].price&&(i.price=parseFloat((s.prices[r].price+t.batchNum).toFixed(2))):i.price=void 0,i})}return i})}},{key:"auditingRow",value:function(){var e=this,t=this.selectForm.audit;if("0"===t){var i={audit:"3",id:this.currentId,reason:""};Object(v["a"])(i).then(function(t){e.cardList.map(function(t){t.id===e.currentId&&(t.audit="3",e.selectForm.audit="3")})}).catch(function(e){return e})}}},{key:"auditRow",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$refs.auditForm,"1"===this.auditForm.audit||"2"===this.auditForm.audit){e.next=3;break}return e.abrupt("return");case 3:return this.selectLoading=!0,t=this.auditForm.companyIds,i=this.unCompanyList.map(function(e){return{custType:"2",customerId:e.id,customerName:e.name,flag:t.includes(e.id)}}),r={audit:this.auditForm.audit,id:this.currentId,list:i.filter(function(e){return e.customerId&&e.customerName}),reason:this.auditForm.remark},e.prev=7,e.next=10,Object(v["a"])(r);case 10:e.sent,this.$message({type:"success",message:"审核成功"}),this.onHide(),this.getTableData(),this.resetForm(),this.selectLoading=!1,a=this.$refs.AgentPrice,a.close(),e.next=24;break;case 20:return e.prev=20,e.t0=e["catch"](7),this.selectLoading=!1,e.abrupt("return",e.t0);case 24:case"end":return e.stop()}},e,this,[[7,20]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"cancelRow",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.editOther){e.next=4;break}return this.editOther=!1,e.next=4,this.getRowDetail(this.currentId);case 4:if(!this.isEdit){e.next=8;break}return this.isEdit=!1,e.next=8,this.getRowDetail(this.currentId);case 8:this.isAdd&&(this.$refs.AgentPrice.close(),this.resetForm());case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"deleteRow",value:function(e){var t=this,i={id:1===e?this.currentId:this.showMenuRow.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(v["b"])(i).then(function(e){t.$message({type:"success",message:"删除成功"}),t.resetForm(),t.getTableData();var i=t.$refs.AgentPrice;i.close()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"modeChange",value:function(){this.branch={peer:void 0,direct:void 0},this.measure={peer:void 0,direct:void 0}}},{key:"saveRow",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;var i=e.tableData.filter(function(e){return!e.isUpper});if(i.length<=0)e.$message.error("暂未配置，无法报价");else{var r=i.every(function(e){return e.prices.every(function(e){return!e.price&&0!==e.price})});if(r)e.$message.error("请至少填写一条报价");else{for(var a=!0,n=/^\d+[-|至|到]\d+$/,o=0;o<i.length;o++){var c=i[o],l=c.prices||[];if(l.some(function(e){return e.price})){if(!c.prescription){e.$message.error("第"+(o+1)+"行参考时效不能为空，请填写如(1-2或1至2或1到2)"),a=!1;break}if(!n.test(c.prescription)){e.$message.error("第"+(o+1)+"行参考时效格式不正确，请填写如(1-2或1至2或1到2)"),a=!1;break}}}if(a){i.map(function(e){(e.prices||[]).map(function(e){String(e.price)||(e.price=void 0)})}),e.typeList.map(function(t){t.id===e.selectForm.subtypeId&&(e.selectForm.subtypeName=t.name)});var u=e.selectForm,d=u.currencyId,m=u.currencyName,p=u.areaId,h=u.measureId,f=u.measureName,g=u.times,y=u.refId,w=u.lscId,x=u.lscName,k=u.agentId,F=u.mode,S=u.stdId,L=u.subtypeId,_=u.subtypeName,I=(u.sections,u.audit),C=u.includeTax,T=Object(s["a"])(u,["currencyId","currencyName","areaId","measureId","measureName","times","refId","lscId","lscName","agentId","mode","stdId","subtypeId","subtypeName","sections","audit","includeTax"]),O=[];if("1"===F&&Array.isArray(k)&&k.length<=0)e.$message.error("请选择关联代理商");else{"1"===F&&k.map(function(t){var i=e.companyList.find(function(e){return e.id===t})||{};O.push({key:t,value:i.name})});var j=p.map(function(t,i){var r=e.areaList.find(function(e){return t===e.id});return{key:t,value:r.name}}).filter(function(e){return e.key&&e.value}),P={},N={};if(e.wyId===e.custId&&"0"===e.selectForm.mode&&"2"===e.selectForm.category){if(!e.branch.peer&&0!==e.branch.peer)return void e.$message.warning("请填写分公司同行价");if(!e.branch.direct&&0!==e.branch.direct)return void e.$message.warning("请填写分公司直客价");if(!e.measure.peer)return void e.$message.warning("请选择分公司同行计费配置");if(!e.measure.direct)return void e.$message.warning("请选择分公司直客计费配置");e.chargeList.forEach(function(t){t.id===e.measure.peer&&(N={key:t.id,value:t.name}),t.id===e.measure.direct&&(P={key:t.id,value:t.name})})}var D=e.custType,z=A({peer:e.branch.peer||0,direct:e.branch.direct||0,flag:e.wyId===e.custId,measureDirect:P,measurePeer:N},T,{includeTax:C,audit:"2"===I?"0":I,mode:F,stdId:S,cust:{key:e.custId,value:e.custName,fromCustType:e.custType,fromCustSubtype:e.custSubtype},refId:"0"===D||"2"===D?y:e.custId,custType:e.custType,currency:{key:d,value:m},lsc:{key:w,value:x},subtype:{key:L,value:_},measure:{key:h,value:f},period:{},deliveries:j,specials:O,rows:i});if("1"===F?e.timeList.map(function(e){S===e.id&&(z.period.effect=e.effect,z.period.expire=e.expire)}):z.period={effect:Array.isArray(g)&&g.length>0?b()(g[0]).format("YYYY-MM-DD HH:mm:ss"):void 0,expire:Array.isArray(g)&&g.length>0?b()(g[1]).format("YYYY-MM-DD HH:mm:ss"):void 0},e.formLoading=!0,e.editOther){var $={id:z.id,rows:z.rows.map(function(e){return{addressId:e.address.key,prescription:e.prescription,remark:e.remark}})};Object(v["v"])($).then(function(t){e.$message({type:"success",message:"保存成功"}),e.resetForm(),e.formLoading=!1,e.getTableData();var i=e.$refs.AgentPrice;i.close()}).catch(function(t){return e.formLoading=!1,t})}else Object(v["w"])(z).then(function(t){e.$message({type:"success",message:"保存成功"}),e.resetForm(),e.formLoading=!1,e.getTableData();var i=e.$refs.AgentPrice;i.close()}).catch(function(t){return e.formLoading=!1,t})}}}}})}},{key:"resetForm",value:function(){this.selectForm=P(),this.chargeForm=D(),this.branch={peer:void 0,direct:void 0},this.measure={peer:void 0,direct:void 0},this.getCustId(),this.tableUpper=[],this.tableData=[],this.copyTable=[],this.aAxisData=[],this.options=[],this.currentId="",this.currentLscId="",this.currentRefId="",this.currentAreaId=[],this.historyId="",this.isHistory=!1,this.isTableShow=!1,this.isRightShow=!1,this.isAdd=!1,this.isEdit=!1,this.editOther=!1,this.leftTitle="",this.rightTitle="";var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"onRangeTitle",value:function(){var e=this.selectForm,t=e.subtypeId,i=e.containerType;e.lscId;switch(t){case"0":this.rangeTitle="重量区间";break;case"1":"0"===i?this.rangeTitle="体积区间":"1"===i&&(this.rangeTitle="柜型");break;case"2":"0"===i?this.rangeTitle="体积区间":"1"===i&&(this.rangeTitle="柜型");break;case"3":this.rangeTitle="";break;case"4":this.rangeTitle="重量&方数区间";break;default:break}}},{key:"onRangeReset",value:function(){var e=this;if(this.selectForm.lscId){var t=this.selectForm,i=t.subtypeId,r=t.containerType,a=t.lscId;switch(i){case"0":this.title="重量区间",this.isType="one",this.dialogForm.loadType="0";break;case"1":"0"===r?(this.title="体积区间",this.dialogForm.loadType="3",this.isType="one"):"1"===r&&(this.title="柜型",this.dialogForm.loadType="2",this.isType="three",this.getContainerList());break;case"2":"0"===r?(this.title="体积区间",this.dialogForm.loadType="3",this.isType="one"):"1"===r&&(this.title="柜型",this.dialogForm.loadType="2",this.isType="three",this.getContainerList());break;case"3":this.title="";break;case"4":this.title="重量区间",this.isType="two",this.dialogForm.loadType="5";break;default:break}this.dialogRange=!0,this.selectLoading=!0;var n={serviceId:a,xy:"X",serviceType:"05"};Object(v["m"])(n).then(function(t){var r=t.data||[];if(Array.isArray(r)&&r.length<=0){e.selectLoading=!1;var n=e.selectForm,o=n.subtypeName,c=n.lscName,l={serviceType:{key:"05",value:"专线"},serviceSubtype:{key:i,value:o},service:{key:a,value:c},xy:"X"};Object.assign(e.dialogForm,l)}else{var u=r[0]||{},d=(u.keyValues,u.ranges),m=Object(s["a"])(u,["keyValues","ranges"]);if(e.dialogForm=A({},m),"one"===e.isType){var p=[{lower:void 0,upper:void 0}];if(Array.isArray(d)&&d.length>0){var h=d.map(function(e){return e.upperLower});e.$set(e.dialogForm,"sections",h)}else e.dialogForm.sections=p}else if("three"===e.isType)e.options=d.map(function(e){return(e.keyValue||{}).key});else if("two"===e.isType){var f=[{lower:void 0,upper:void 0}];if(Array.isArray(d)&&d.length>0){var v=d.filter(function(e){return"0"===e.type}).map(function(e){if("0"===e.type)return e.upperLower});e.$set(e.dialogForm,"sections1",v)}else e.dialogForm.sections1=f}e.selectLoading=!1}}).catch(function(t){return e.selectLoading=!1,t})}else this.$message.error("请先选择服务")}},{key:"onAreaReset",value:function(){var e=this;if(this.selectForm.lscId){var t=this.selectForm.lscId;this.title="地址类型",this.isType="four",this.dialogRange=!0,this.selectLoading=!0;var i={serviceId:t,xy:"Y",serviceType:"05"};Object(v["m"])(i).then(function(i){var r=i.data||[];if(Array.isArray(r)&&r.length<=0){e.selectLoading=!1;var a=e.selectForm,n=a.subtypeId,o=a.subtypeName,c=a.lscName,l={serviceType:{key:"05",value:"专线"},serviceSubtype:{key:n,value:o},service:{key:t,value:c},xy:"Y"};Object.assign(e.dialogForm,l)}else{var u=r[0]||{},d=u.keyValues,m=(u.ranges,u.yType),p=Object(s["a"])(u,["keyValues","ranges","yType"]);e.dialogForm=A({},p),e.dialogForm.yType=m,e.options=[],d.map(function(t){e.dialogForm.countryId=(t.country||{}).key,e.options.push((t.keyValue||{}).key)}),e.onAxisYCountry(),"0"!==m&&e.getCountryList(),e.selectLoading=!1}}).catch(function(t){return e.selectLoading=!1,t})}else this.$message.error("请先选择服务")}},{key:"onAxisYCountry",value:function(){var e=this.dialogForm.yType;switch(e){case"0":this.getCountryData();break;case"5":this.getRegionList();break;case"1":this.getStateByCountry();break;case"7":this.getFbastoreList();break;case"100":this.getAllAreaList(1);break;case"101":this.getAllAreaList(3);break;case"102":this.getAllAreaList(2);break;default:this.boxList=[],this.options=[],this.selectLoading=!1;break}}},{key:"getAllAreaList",value:function(e){var t=this,i={model:{type:e,countryId:this.dialogForm.countryId},page:1,size:999};this.selectLoading=!0,Object(g["d"])(i).then(function(e){if(t.selectLoading=!1,e.success){var i=e.data||{},r=i.result||[];t.boxList=r.map(function(e){return{id:e.id,name:e.name}})}}).catch(function(e){return t.selectLoading=!1,e})}},{key:"onAddress",value:function(){this.options=[],"0"===this.dialogForm.yType?(this.dialogForm.countryId=void 0,this.getCountryData()):"102"===this.dialogForm.yType?(this.dialogForm.countryId=void 0,this.getAllAreaList(2)):(this.dialogForm.countryId=void 0,this.boxList=[])}},{key:"getCountryData",value:function(){var e=this;this.selectLoading=!0,Object(v["h"])().then(function(t){var i=t.data||{};e.boxList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateByCountry",value:function(){var e=this;this.selectLoading=!0,Object(g["x"])({countryId:this.dialogForm.countryId}).then(function(t){var i=t.data||{},r=i.result||[];e.boxList=r,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getRegionList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.dialogForm.countryId,page:1,size:9999};Object(g["v"])(t).then(function(t){var i=t.data||{},r=i.result||[];e.boxList=r,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getFbastoreList",value:function(){var e=this;this.selectLoading=!0;var t={countryId:this.dialogForm.countryId,codeSort:"A",page:1,size:9999};Object(g["n"])(t).then(function(t){var i=t.data.result.map(function(e){return{id:e.id,name:e.code+"-"+e.address}});e.boxList=i,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getContainerList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:9999};Object(v["g"])(t).then(function(t){var i=t.data||{},r=i.result||[];e.boxList=r,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"addRangeData",value:function(e){switch(e){case"0":this.dialogForm.sections.push({lower:void 0,upper:void 0});break;case"1":this.dialogForm.sections1.push({lower:void 0,upper:void 0});break;case"2":this.dialogForm.sections2.push({lower:void 0,upper:void 0});break;default:break}}},{key:"deleteRangeData",value:function(e,t){switch(t){case"0":this.dialogForm.sections.splice(e,1);break;case"1":this.dialogForm.sections1.splice(e,1);break;case"2":this.dialogForm.sections2.splice(e,1);break;default:break}}},{key:"cancelRange",value:function(){this.dialogRange=!1,this.isType="",this.options=[],this.boxList=[],this.dialogForm=N();var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"rangeValidate",value:function(e){var t=e.every(function(e){return(0===e.lower||e.lower)&&e.upper});if(!t)return this.$message.error("请完整填写区间值"),!1;var i=e.some(function(e){return e.upper<=e.lower});if(i)return this.$message({type:"error",message:"下限值不能大于等于上限值"}),!1;var r=!1;if(e.map(function(t,i){r=e.some(function(e,r){return i!==r&&(e.lower<=t.lower&&t.lower<e.upper||e.lower<t.upper&&t.upper<=e.upper)})}),r)return this.$message({type:"error",message:"区间范围不能重叠"}),!1;for(var a=!1,s=0;s<e.length;s++)if(s>0){var n=e[s],o=e[s-1];if(n.lower!==o.upper){a=!0;break}}return!a||(this.$message({type:"error",message:"区间范围必须连续"}),!1)}},{key:"saveRange",value:function(){var e=this,t=this.dialogForm,i=t.sections,r=t.sections1,a=(t.sections2,t.keyValues,t.ranges,Object(s["a"])(t,["sections","sections1","sections2","keyValues","ranges"])),n=A({},a),o=[],c=[],l=[],u=[];if("four"===this.isType)this.options.map(function(t){var i=e.boxList.find(function(e){return e.id===t})||{},r=e.countryList.find(function(e){return e.id===n.countryId})||{};i.id&&i.name&&o.push({type:n.yType,country:{key:n.countryId,value:r.name},keyValue:{key:i.id,value:i.name}})}),n.keyValues=o;else if("one"===this.isType){i.map(function(e){c.push({upperLower:e})});var d=this.rangeValidate(i);if(!d)return;n.ranges=c}else if("three"===this.isType)this.options.map(function(t){var i=e.boxList.find(function(e){return e.id===t})||{};i.id&&i.name&&c.push({keyValue:{key:i.id,value:i.name}})}),n.ranges=c;else if("two"===this.isType){r.map(function(e){l.push({type:"0",upperLower:e})});var m=this.rangeValidate(r);if(!m)return;n.ranges=[].concat(l,u)}this.selectLoading=!0,Object(v["y"])(n).then(function(t){e.$message({type:"success",message:"保存成功"}),e.cancelRange(),e.getPriceConfig(),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getSubtypeList",value:function(){var e=this;this.selectLoading=!0,Object(v["o"])({typeId:"05"}).then(function(t){var i=t.data||[];e.typeList=i.filter(function(e){return"3"!==e.id}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getChargeList",value:function(){var e=this;this.selectLoading=!0,Object(v["f"])({agentId:this.custId,type:"2"===this.selectForm.priceType?"0":"3"===this.selectForm.priceType?"1":void 0,subtypeId:this.selectForm.subtypeId,page:1,size:9999}).then(function(t){var i=t.data||{};e.chargeList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getChargeCopyList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(v["f"])({agentId:this.custId,type:"2"===this.selectForm.priceType?"0":"3"===this.selectForm.priceType?"1":void 0,subtypeId:this.selectForm.subtypeId,page:1,size:9999}).then(function(e){var i=e.data||{};t.chargeList=i.result||[],t.chargeList.map(function(e){if(t.selectForm.measureId===e.id){e.name,e.id;var i=Object(s["a"])(e,["name","id"]);t.chargeForm=A({},i)}})}).catch(function(e){return e});case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCharge",value:function(){var e=this;this.chargeForm=D(),this.selectForm.measureName=void 0,this.chargeList.map(function(t){if(e.selectForm.measureId===t.id){e.selectForm.measureName=t.name;t.name,t.id;var i=Object(s["a"])(t,["name","id"]);e.chargeForm=A({},i)}})}},{key:"getTimeList",value:function(){var e=this;this.selectLoading=!0,Object(v["p"])({custId:this.custId,lscId:this.selectForm.lscId,deliveryIds:this.selectForm.areaId,category:this.selectForm.category}).then(function(t){var i=t.data||[];e.timeList=i,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(v["h"])().then(function(t){var i=t.data||{};e.countryList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onSubtype",value:function(){this.selectForm.lscId=void 0,this.onServiceSel()}},{key:"onBusiness",value:function(){this.searchForm.dispatch=void 0,this.getTableData(1)}},{key:"onCountry",value:function(e){"sel"===e?(this.selectForm.lscId=void 0,this.onServiceSel()):"sea"===e&&(this.searchForm.lscId=void 0,this.getTableData(1))}},{key:"getAreaList",value:function(){var e=this;this.selectLoading=!0,Object(v["e"])().then(function(t){e.areaList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleCheckAll",value:function(e){var t=this.areaList.map(function(e){return e.name});this.searchForm.areaId=e?t:[],this.isIndeterminate=!1}},{key:"handleChecked",value:function(e){var t=(e||[]).length,i=(this.areaList||[]).length;this.checkAll=t===i,this.isIndeterminate=t>0&&t<i}},{key:"getServiceList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,i={page:1,size:9999,countryId:"sea"===t?this.searchForm.destinationCountry:this.selectForm.countryId,subtypeId:"sea"===t?this.searchForm.subtypeId:this.selectForm.subtypeId,includeTax:"sea"===t?this.searchForm.includeTax:this.selectForm.includeTax,dispatch:"sea"===t?this.searchForm.dispatch:this.selectForm.dispatch,purposeType:"sea"===t?this.searchForm.purposeType:void 0},e.next=4,Object(v["k"])(i).then(function(e){var i=e.data||{};if("sea"===t)r.serviceList1=(i.result||[]).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e});else{var a=i.result||[];r.serviceList2=a.filter(function(e){return"1"===e.status}).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}r.selectLoading=!1}).catch(function(e){return r.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onServiceSea",value:function(){var e=this;this.searchForm.lscId?this.serviceList1.map(function(t){t.id===e.searchForm.lscId&&(e.searchForm.lscName=t.name)}):this.searchForm.lscName=void 0}},{key:"onServiceSel",value:function(){var e=this;this.selectForm.refId=void 0,this.effectList=[],this.selectForm.mode="0",this.selectForm.times=[],this.selectForm.agentId=[],this.selectForm.stdId=void 0,this.selectForm.lscName=void 0,this.selectForm.lscCode=void 0,this.selectForm.subtypeName=void 0,this.selectForm.containerType=void 0,this.selectForm.destinationName="",this.selectForm.umLength=void 0,this.selectForm.umWeight=void 0,this.selectForm.currencyName=void 0,this.selectForm.currencyId=void 0,this.selectForm.priceType=void 0,this.selectForm.purposeType=void 0,this.selectForm.measureId=void 0,this.selectForm.measureName=void 0,this.chargeForm=D(),this.isTableShow=!1,this.tableData=[],this.copyTable=[],this.aAxisData=[];var t=this.serviceList2.find(function(t){return t.id===e.selectForm.lscId});t&&(this.selectForm.lscName=t.label,this.selectForm.lscCode=t.lsId,this.selectForm.subtypeName=t.subtypeName,this.selectForm.containerType=t.containerType,this.selectForm.destinationName=t.destinationName,this.selectForm.umLength=t.umLength,this.selectForm.umWeight=t.umWeight,this.selectForm.currencyName=t.currencyName,this.selectForm.currencyId=t.currencyId,this.selectForm.dispatch=t.dispatch,this.selectForm.includeTax=t.includeTax,this.selectForm.priceType=t.priceType,this.selectForm.purposeType=t.purposeType);var i=this.custType,r=this.custSubtype;("0"===i||"3"===i||"2"===i&&"1"===r)&&this.getPriceConfig(),"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice()}},{key:"onEffect",value:function(e){var t=this;this.tableData=[],this.copyTable=[],this.effectList.map(function(e){if(t.selectForm.refId===e.id){var i=e.deliveries.map(function(e){return e.key});t.$set(t.selectForm,"areaId",i),t.selectForm.measureId=(e.measure||{}).key,t.selectForm.measureName=(e.measure||{}).value;var r=e.rows||[];t.tableUpper=r.map(function(e){if(e)return A({},e,{isUpper:!0})})}}),this.tableUpper=this.tableUpper.sort(function(e,t){return e.address.value.localeCompare(t.address.value)}),"4"!==this.selectForm.priceType&&this.getChargeList(),this.getPriceConfig()}},{key:"getEffectiveBook",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectForm.lscId||!this.parentId){e.next=21;break}return this.selectLoading=!0,t={custId:this.parentId,lscId:this.selectForm.lscId,deliveryIds:this.selectForm.areaId,category:void 0,targetId:this.custId},i=this.custType,r=this.custSubtype,t.category="1"===i&&"0"===r?"3":"1"===i&&"1"===r?"4":"2"===i&&"1"===r?"1":"2"===i&&"2"===r?"2":i,e.prev=6,e.next=9,Object(v["i"])(t);case 9:a=e.sent,s=a.data||[],this.effectList=s,this.selectLoading=!1,e.next=19;break;case 15:return e.prev=15,e.t0=e["catch"](6),this.selectLoading=!1,e.abrupt("return",e.t0);case 19:e.next=22;break;case 21:this.effectList=[];case 22:case"end":return e.stop()}},e,this,[[6,15]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getPriceConfig",value:function(){var e=this;this.formLoading=!0;var t={serviceId:this.selectForm.lscId,serviceType:"05"};Object(v["m"])(t).then(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(i){var r,a,n,o,c,l,u,d,m,p,h,f,v;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(r=i.data||[],!(r.length<=0)){t.next=6;break}return e.tableData=[],e.aAxisData=[],e.formLoading=!1,t.abrupt("return");case 6:if(a={},n={},o=[],c=[],r.map(function(t){"Y"===t.xy?(n=t,e.selectForm.yType=t.yType):"X"===t.xy&&(a=t,e.selectForm.loadType=t.loadType)}),o=n.keyValues||[],c=a.ranges||[],!(o.length<=0||c.length<=0)){t.next=18;break}return e.tableData=[],e.aAxisData=[],e.formLoading=!1,t.abrupt("return");case 18:return e.isTableShow=!0,l=e.selectForm,u=l.yType,d=l.loadType,e.onRangeTitle(),m={0:"国家",1:"州省",5:"国内区域",7:"仓库代码",100:"城市区域",101:"仓库区域",102:"国家区域"},Object.keys(m).map(function(t){t===u&&(e.leftTitle=m[t])}),p=[],e.aAxisData=c.map(function(t){var i="2"===d?t.keyValue:t.upperLower,r={label:""};return"2"===d?(e.rightTitle="柜型",r.label=(i||{}).value):(e.rightTitle="0"===t.type?"重量区间":"5"===d&&"1"===t.type?"方数区间":"体积区间",r.label="".concat((i||{}).lower,"-").concat((i||{}).upper),r.aAxisArr=[]),r}),o.map(function(e,t){var i={address:e.keyValue||{},addressType:u,prices:[],remark:void 0,prescription:""};c.map(function(e){i.prices.push({price:void 0,type:"2"===d?"2":e.type,x:"2"===d?e.keyValue:e.upperLower})}),p.push(i)}),h=[],f=e.custType,v=e.custSubtype,"0"===f||"3"===f||"2"===f&&"1"===v?h=p.sort(function(e,t){return e.address.value.localeCompare(t.address.value)}):e.tableUpper.length>0&&(h=e.tableUpper.map(function(e){e.isUpper;var t=e.prices,i=Object(s["a"])(e,["isUpper","prices"]),r=t.map(function(e){e.price;var t=Object(s["a"])(e,["price"]);return A({},t,{price:void 0})});return A({},i,{prices:r,prescription:"",remark:void 0})})),e.tableData=h.reduce(function(t,i,r){if(e.tableUpper[r]){var a=e.tableUpper[r];t.push(a),i.prescription=a.prescription,i.remark=a.remark}return t.push(i),t},[]),e.copyTable=JSON.parse(JSON.stringify(e.tableData)),e.setSort(),t.next=35,e.groupByPid();case 35:e.formLoading=!1;case 36:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){return e.formLoading=!1,t})}},{key:"geCurrencyList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:999};Object(v["c"])(t).then(function(t){var i=t.data||{};e.currencyList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onHistory",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t="",this.historyId?(t=this.historyId,this.isHistory=!0,this.historyList.map(function(e){i.historyId===e.id&&(i.selectForm.refId=e.refId,i.selectForm.areaId=e.deliveries.map(function(e){return e.key}))})):(this.selectForm.refId=this.currentRefId,this.selectForm.areaId=this.currentAreaId,t=this.currentId,this.isHistory=!1),this.selectForm.lscId=this.currentLscId,e.next=5,this.getEffectiveBook();case 5:return this.effectList.map(function(e){if(i.selectForm.refId===e.id){var t=e.rows||[];i.tableUpper=t.map(function(e){if(e)return A({},e,{isUpper:!0})})}}),this.tableUpper=this.tableUpper.sort(function(e,t){return e.address.value.localeCompare(t.address.value)}),e.next=9,this.getRowDetail(t);case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getHistoryPrice",value:function(){var e=this;this.selectLoading=!0;var t={id:this.currentId,mode:this.selectForm.mode,page:1,size:9999};Object(v["j"])(t).then(function(t){var i=t.data||{};e.historyList=i.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onMode",value:function(){"0"===this.selectForm.mode&&(this.selectForm.agentId=[]),this.selectForm.stdId=void 0,this.selectForm.times=[],this.modeChange()}},{key:"onCompany",value:function(){"2"!==this.custType||this.selectForm.category?(this.dialogCompany=!0,this.options=JSON.parse(JSON.stringify(this.selectForm.agentId)),this.getCustTypeList()):this.$message.warning("请选择报价对象")}},{key:"cancelCompany",value:function(){this.dialogCompany=!1,this.options=[]}},{key:"saveCompany",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,i,r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("1"===this.selectForm.audit){e.next=4;break}return this.dialogCompany=!1,this.selectForm.agentId=this.options,e.abrupt("return");case 4:if(this.selectLoading=!0,t={id:this.currentId},i=this.selectForm.agentId,r=[],this.options.map(function(e){if(i.every(function(t){return e!==t})){var t=a.companyList.find(function(t){return t.id===e})||{},s=t.id,n=t.name;r.push({key:s,value:n})}}),0!==r.length){e.next=12;break}return this.dialogCompany=!1,e.abrupt("return");case 12:return t.specials=r.filter(function(e){return e.key&&e.value}),e.prev=13,e.next=16,Object(v["x"])(t);case 16:return e.sent,this.selectLoading=!1,this.dialogCompany=!1,this.options=[],e.next=22,this.getRowDetail(this.currentId);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](13),this.selectLoading=!1;case 27:case"end":return e.stop()}},e,this,[[13,24]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCustTypeList",value:function(){var e=this,t="",i="",r=this.selectForm,a=r.subtypeId,s=r.category,n=this.custType;"3"===n&&(t="0"),"2"!==n&&"0"!==n||("2"===s?(t="2",i="2"):"3"===s?(t="1",i="0"):"4"===s&&(t="1",i="1"));var o={toCustSubtype:i,toCustType:t,subtypeId:a||"",typeId:"05"};if("0"===n)this.title="关联代理商";else if("2"===n&&"2"===s)this.title="关联代理商";else{if("2"!==n||"2"===s)return;this.title="关联客户"}this.selectLoading=!0,Object(w["j"])(o).then(function(t){var i=t.data||[],r=i.filter(function(e){return e}).map(function(e){return e.name=e.name||e.id,e});"1"===e.selectForm.audit&&r.map(function(t,i){e.options.map(function(e){e===t.id&&(r[i].disabled=!0)})}),e.companyList=r,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"filterMethod",value:function(e,t){var i=t.name||"";return i.indexOf(e)>-1}},{key:"onType",value:function(){this.selectForm.agentId=[],this.companyList=[],this.modeChange()}},{key:"getCustId",value:function(){var e=this.custType,t=this.custSubtype;switch(e){case"0":this.custList=[{name:"二级代理商",id:"2"},{name:"直客",id:"3"},{name:"同行",id:"4"}];break;case"2":"1"===t?this.custList=[{name:"二级代理商",id:"2"},{name:"直客",id:"3"},{name:"同行",id:"4"}]:"2"===t&&(this.custList=[{name:"直客",id:"3"},{name:"同行",id:"4"}]);break;case"3":this.selectForm.category="0";break;default:break}}},{key:"closeAgentPrice",value:function(){this.showAgentPriceModel=!0}},{key:"showAgentPrice",value:function(){var e=this;if(this.selectForm.lscId){var t=this.serviceList2.find(function(t){return t.id===e.selectForm.lscId});if(t){if("0"===t.outsourcing)return void this.$message.warning("非外协不能查看供应商报价");this.$refs.AgentPrice.show(t),this.showAgentPriceModel=!1}else this.$message.warning("请选择服务")}else this.$message.warning("请选择服务")}},{key:"created",value:function(){this.getAreaList(),this.getCustId(),this.getTableData()}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"parentId",get:function(){var e=f["a"].info||{},t=e.parentId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}},{key:"pickerOptions",get:function(){return{disabledDate:function(e){return b()(e)<b()().subtract(1,"d")},selectableRange:"00:00:00 - 20:30:00"}}},{key:"isLsc",get:function(){var e=this.searchForm;return!e.destinationCountry}}]),t}(h["e"]);p["a"]([Object(h["f"])("isShowMenu")],z.prototype,"onIsShowMenuChange",null),z=p["a"]([Object(h["a"])({name:"",components:{AgentPrice:C},props:{}})],z);var $=z,M=$,R=(i("255a"),Object(_["a"])(M,r,a,!1,null,"1473056c",null));t["default"]=R.exports},b3e5:function(e,t,i){"use strict";var r=i("ba0c"),a=i.n(r);a.a},b5c6:function(e,t,i){"use strict";var r=i("0ad1"),a=i.n(r);a.a},ba0c:function(e,t,i){},c247:function(e,t,i){},c8ce:function(e,t,i){"use strict";var r=i("89ee"),a=i.n(r);a.a},cd63:function(e,t,i){},cde1:function(e,t,i){"use strict";var r=i("479e"),a=i.n(r);a.a},d2ca:function(e,t,i){"use strict";i.d(t,"w",function(){return c}),i.d(t,"g",function(){return l}),i.d(t,"i",function(){return u}),i.d(t,"q",function(){return d}),i.d(t,"p",function(){return m}),i.d(t,"A",function(){return p}),i.d(t,"a",function(){return h}),i.d(t,"b",function(){return f}),i.d(t,"c",function(){return v}),i.d(t,"z",function(){return g}),i.d(t,"s",function(){return y}),i.d(t,"f",function(){return b}),i.d(t,"l",function(){return w}),i.d(t,"k",function(){return x}),i.d(t,"y",function(){return k}),i.d(t,"u",function(){return F}),i.d(t,"j",function(){return S}),i.d(t,"h",function(){return L}),i.d(t,"o",function(){return _}),i.d(t,"m",function(){return I}),i.d(t,"t",function(){return C}),i.d(t,"B",function(){return T}),i.d(t,"v",function(){return O}),i.d(t,"e",function(){return j}),i.d(t,"x",function(){return A}),i.d(t,"n",function(){return P}),i.d(t,"d",function(){return N}),i.d(t,"r",function(){return D});i("8e6e"),i("ac6a"),i("456d");var r=i("bd86"),a=i("a8db"),s=i("b32d");function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(i,!0).forEach(function(t){Object(r["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function c(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(s["a"])(t)}function l(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(s["a"])(e)}function u(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(s["a"])(t)}function d(e){var t=e.page,i=e.size,r=Object(a["a"])(e,["page","size"]),n={url:"/cfg/lsc/getLscList",method:"post",data:{page:t,size:i,model:o({},r)}};return Object(s["a"])(n)}function m(e){var t={url:"/cfg/lsc/getLsc",method:"get",params:e};return Object(s["a"])(t)}function p(e){var t={url:"/cfg/lsc/saveLsc",method:"post",data:e};return Object(s["a"])(t)}function h(e){var t={url:"/cfg/lsc/changeStatus",method:"post",params:e};return Object(s["a"])(t)}function f(e){var t={url:"/cfg/lsc/deleteLsc",method:"delete",params:e};return Object(s["a"])(t)}function v(e){var t={url:"/cfg/lsc/getAgentList",method:"get",params:e};return Object(s["a"])(t)}function g(e){var t={url:"/cfg/lsc/saveAgent",method:"post",data:e};return Object(s["a"])(t)}function y(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(s["a"])(t)}function b(e){var t={url:"/finance/costgroup/getCostgroupList",method:"get",params:e};return Object(s["a"])(t)}function w(e){var t={url:"/cfg/esc/getEscList",method:"post",data:e};return Object(s["a"])(t)}function x(){var e={url:"/cfg/lsc/getDeliveryCity",method:"get"};return Object(s["a"])(e)}function k(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(s["a"])(t)}function F(){var e={url:"/cfg/lsc/getProductAll",method:"get"};return Object(s["a"])(e)}function S(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(s["a"])(t)}function L(e){var t={url:"/cfg/csc/getCscList",method:"get",params:e};return Object(s["a"])(t)}function _(e){var t={url:"/cfg/ksc/getKscList",method:"post",data:e};return Object(s["a"])(t)}function I(e){var t={url:"/cfg/examine/getExamineList",method:"get",params:e};return Object(s["a"])(t)}function C(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(s["a"])(t)}function T(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(s["a"])(t)}function O(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(s["a"])(t)}function j(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(s["a"])(t)}function A(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:e};return Object(s["a"])(t)}function P(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(s["a"])(t)}function N(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(s["a"])(t)}function D(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(s["a"])(t)}},dcc4:function(e,t,i){"use strict";i.d(t,"p",function(){return a}),i.d(t,"h",function(){return s}),i.d(t,"j",function(){return n}),i.d(t,"l",function(){return o}),i.d(t,"f",function(){return c}),i.d(t,"k",function(){return l}),i.d(t,"g",function(){return u}),i.d(t,"a",function(){return d}),i.d(t,"b",function(){return m}),i.d(t,"c",function(){return p}),i.d(t,"q",function(){return h}),i.d(t,"s",function(){return f}),i.d(t,"o",function(){return v}),i.d(t,"d",function(){return g}),i.d(t,"n",function(){return y}),i.d(t,"m",function(){return b}),i.d(t,"r",function(){return w}),i.d(t,"i",function(){return x}),i.d(t,"e",function(){return k});var r=i("b32d");function a(e){var t={url:"/cfg/bs/addBs",method:"post",data:e};return Object(r["a"])(t)}function s(e){var t={url:"/cfg/bs/getByIds",method:"post",data:e};return Object(r["a"])(t)}function n(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(r["a"])(e)}function o(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(r["a"])(t)}function c(e){var t={url:"/cfg/bs/getBsList",method:"post",data:e};return Object(r["a"])(t)}function l(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(r["a"])(t)}function u(e){var t={url:"/cfg/bs/getBsTransList",method:"post",data:e};return Object(r["a"])(t)}function d(e){var t={url:"/cfg/bs/changeStatus",method:"post",params:e};return Object(r["a"])(t)}function m(e){var t={url:"/cfg/bs/del",method:"get",params:e};return Object(r["a"])(t)}function p(e){var t={url:"/cfg/bs/deleteBsTrans",method:"delete",params:e};return Object(r["a"])(t)}function h(e){var t={url:"/cfg/bs/saveBsTrans",method:"post",data:e};return Object(r["a"])(t)}function f(e){var t={url:"/cfg/bs/updateBsTrans",method:"put",data:e};return Object(r["a"])(t)}function v(e){var t={url:"/cfg/bs/saveAgent",method:"post",data:e};return Object(r["a"])(t)}function g(e){var t={url:"/cfg/bs/getAgentList",method:"get",params:e};return Object(r["a"])(t)}function y(e){var t={url:"/setting/dict/item/type",method:"get",params:e};return Object(r["a"])(t)}function b(e){var t={url:"/price/axis/getAxisSet",method:"get",params:e};return Object(r["a"])(t)}function w(e){var t={url:"/price/axis/saveAxis",method:"post",data:e};return Object(r["a"])(t)}function x(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(r["a"])(t)}function k(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(r["a"])(t)}},de59:function(e,t,i){"use strict";var r=i("641b"),a=i.n(r);a.a},e292:function(e,t,i){"use strict";var r=i("935d"),a=i.n(r);a.a},e68a:function(e,t,i){},e976:function(e,t,i){"use strict";var r=i("a9ce"),a=i.n(r);a.a},ed6a:function(e,t,i){"use strict";var r=i("e68a"),a=i.n(r);a.a},f9cc:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("app-slide",{staticStyle:{margin:"15px 0 15px 15px",padding:"0"},attrs:{width:"400","is-active":e.isActive}},[r("div",{staticStyle:{padding:"20px"}},[r("el-row",[r("el-col",{staticStyle:{"line-height":"32px"},attrs:{span:12}},[e._v("\n          拖车报价\n        ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["trailerQuoteAdd"],expression:"['trailerQuoteAdd']"}],attrs:{type:"text",size:"small"},on:{click:e.showAddPriceForm}},[e._v("\n            新增报价\n          ")])],1)],1),r("div",{staticStyle:{padding:"10px 0"}},[r("el-form",{staticClass:"search-form",attrs:{model:e.searchForm,size:"mini"}},[r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"业务类型"},on:{focus:e.getSubtypeList,change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("div",{staticStyle:{"padding-right":"10px"}},[r("el-form-item",{attrs:{label:"国家","label-width":"50px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getCountryList},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"服务","label-width":"50px"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{disabled:!e.searchForm.countryId,loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getTrailerServeList("search")},change:function(t){return e.serviceChange(t,"search")}},model:{value:e.searchForm.serviceId,callback:function(t){e.$set(e.searchForm,"serviceId",t)},expression:"searchForm.serviceId"}},e._l(e.searchServiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("1")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["trailerQuoteQuery"],expression:"['trailerQuoteQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("1")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"服务",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"},model:{value:e.searchForm.serviceName,callback:function(t){e.$set(e.searchForm,"serviceName",t)},expression:"searchForm.serviceName"}})],1)])],1),r("el-form-item",[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"mini",clearable:"",filterable:"",placeholder:"审核状态"},on:{change:function(t){return e.getPriceList("")}},model:{value:e.searchForm.auditing,callback:function(t){e.$set(e.searchForm,"auditing",t)},expression:"searchForm.auditing"}},e._l(e.auditList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",[r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"价格标准","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.ifStandard,callback:function(t){e.$set(e.searchForm,"ifStandard",t)},expression:"searchForm.ifStandard"}},[r("el-radio-button",{attrs:{label:"0"}},[e._v("\n                      全部\n                    ")]),r("el-radio-button",{attrs:{label:!0}},[e._v("\n                      标准\n                    ")]),r("el-radio-button",{attrs:{label:!1}},[e._v("\n                      特殊\n                    ")])],1)],1),r("el-form-item",{attrs:{label:"地址类型","label-width":"90px"}},[r("el-radio-group",{model:{value:e.searchForm.addressType,callback:function(t){e.$set(e.searchForm,"addressType",t)},expression:"searchForm.addressType"}},e._l(e.addressTypeList,function(t){return r("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v("\n                      "+e._s(t.name)+"\n                    ")])}),1)],1),r("el-form-item",{attrs:{label:"有效时间","label-width":"90px"}},[r("el-date-picker",{staticStyle:{width:"280px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.searchForm.times,callback:function(t){e.$set(e.searchForm,"times",t)},expression:"searchForm.times"}})],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.clearForm("2")}}},[e._v("\n                    清空\n                  ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["trailerQuoteQuery"],expression:"['trailerQuoteQuery']"}],attrs:{type:"primary"},on:{click:function(t){return e.getPriceList("")}}},[e._v("\n                    筛选\n                  ")])],1)],1),r("div",{staticClass:"el-select el-select--small",staticStyle:{width:"100%"},attrs:{slot:"reference"},on:{focus:function(t){return e.showPopover("2")}},slot:"reference"},[r("el-input",{attrs:{placeholder:"全部筛选",readonly:"","suffix-icon":"el-select__caret el-input__icon el-icon-arrow-up"}})],1)])],1)],1),r("el-scrollbar",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{height:"calc(100vh - 275px)"}},[0===e.tableList.length?r("div",{staticClass:"empty",staticStyle:{"text-align":"center","line-height":"50px","font-size":"12px",color:"#909399"}},[e._v("\n            暂无报价\n          ")]):e._e(),e._l(e.tableList,function(t,i){return r("div",{key:i,staticClass:"price-card",class:{"active-card":e.selectCardId===t.id},staticStyle:{"font-size":"12px",cursor:"pointer"},on:{click:function(i){return e.viewPrice(t)},contextmenu:function(i){return i.preventDefault(),e.showMenu(t,i)}}},[r("el-row",[r("el-col",{attrs:{span:1}},[1===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"待审核",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-blue"})]):e._e(),2===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"审核中",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-y"})]):e._e(),3===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已拒绝",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-red"})]):e._e(),4===t.auditing?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"已通过",placement:"top-start"}},[r("i",{staticClass:"card-tips card-tip-success"})]):e._e()],1),r("el-col",{staticClass:"word-limit",attrs:{span:18}},[e._v("\n                "+e._s(t.service.value)+"\n              ")]),t.ifStandard?r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[e._v("\n                标准报价\n              ")]):r("el-col",{staticStyle:{"text-align":"right",display:"flex","align-items":"center","justify-content":"flex-end"},attrs:{span:5}},[e._v("\n                特殊报价\n                ")])],1),r("el-row",{staticStyle:{margin:"10px 0"}},[r("el-col",{attrs:{span:3}},[e._v("\n                起运地\n              ")]),r("el-col",{staticClass:"word-limit",staticStyle:{color:"#409EFF"},attrs:{span:17}},[e._v("\n                "+e._s((t.city||"")+" "+t.addressName)+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},["2"===t.toType?r("span",[e._v("代理商价")]):"1"===t.toType&&"0"===t.toSubtype?r("span",[e._v("直客价")]):"1"===t.toType&&"1"===t.toSubtype?r("span",[e._v("同行价")]):"3"===t.toType?r("span",[e._v("聚货通价")]):e._e()])],1),r("el-row",[r("el-col",{attrs:{span:4}},["1"===t.status?r("span",{staticClass:"btn-tip-success"},[e._v("\n                  生效中\n                ")]):"2"===t.status?r("span",{staticClass:"btn-tip-blue"},[e._v("\n                  待生效\n                ")]):"3"===t.status?r("span",{staticClass:"btn-tip-grey"},[e._v("\n                  已失效\n                ")]):e._e()]),r("el-col",{staticStyle:{"line-height":"16px"},attrs:{span:15}},[e._v("\n                "+e._s(e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"))+"\n              ")]),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:5}},[r("span",{staticClass:"border-tip-blue"},[e._v("\n                  "+e._s(e.formatTag(t))+"\n                ")])])],1)],1)})],2)],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-pagination",{attrs:{small:"",layout:"total,prev, pager, next",total:e.pagination.total,"page-size":e.pagination.size,"current-page":e.pagination.page},on:{"current-change":e.currentChange}})],1)],1)]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("div",{staticClass:"arrow-btn",on:{click:e.toggle}},[r("img",{class:{arrow:!e.isActive},attrs:{src:i("1e9b"),alt:""}})])]),e.showAddForm?r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticStyle:{flex:"1",overflow:"auto",margin:"15px","background-color":"#fff",padding:"20px"}},[r("el-form",{ref:"addForm",staticClass:"select-form",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"90px","label-position":"right",size:"mini"}},[r("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between"}},[r("div",{staticStyle:{flex:"1"}},[r("el-form-item",{attrs:{label:"业务类型：",prop:"subtypeId"}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getSubtypeList,change:e.subTypeChange},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"所在国家：",prop:"selectCountryId"}},[r("el-select",{staticStyle:{width:"100px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},on:{focus:e.getCountryList},model:{value:e.selectForm.selectCountryId,callback:function(t){e.$set(e.selectForm,"selectCountryId",t)},expression:"selectForm.selectCountryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"serviceId"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("服务")]),r("el-tooltip",{directives:[{name:"show",rawName:"v-show",value:e.selectService.name,expression:"selectService.name"}],attrs:{slot:"label",content:e.selectService.label+"/"+e.selectService.tsId,placement:"top",effect:"light"},slot:"label"},[r("i",{staticClass:"el-icon-warning-outline"})]),r("span",[e._v("：")])],1),r("el-select",{staticStyle:{width:"150px"},attrs:{clearable:"",filterable:"",disabled:e.isView,placeholder:"请选择"},on:{focus:function(t){return e.getTrailerServeList("select")},change:function(t){return e.serviceChange(t,"select")}},model:{value:e.selectForm.serviceId,callback:function(t){e.$set(e.selectForm,"serviceId",t)},expression:"selectForm.serviceId"}},e._l(e.selectServiceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.label,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"报价对象：",prop:"0"===e.custType?"":"toCustSubtype"}},["0"===e.custType?r("span",[e._v("\n              一级代理商\n            ")]):r("el-select",{staticStyle:{width:"100px"},attrs:{clearable:"",disabled:e.isView,filterable:"",placeholder:"请选择"},on:{change:e.custSubtypeChange},model:{value:e.selectForm.toCustSubtype,callback:function(t){e.$set(e.selectForm,"toCustSubtype",t)},expression:"selectForm.toCustSubtype"}},e._l(e.custList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"2"===e.custType?r("el-form-item",{attrs:{label:"参考报价："}},[r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.superiorPriceChange,focus:e.getSuperiorPrice},model:{value:e.selectForm.refId,callback:function(t){e.$set(e.selectForm,"refId",t)},expression:"selectForm.refId"}},e._l(e.superiorPriceList,function(t){return r("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1):e._e()],1),e.selectCard.id&&4===e.selectCard.auditing||e.selectForm.edition?e._e():r("div",{staticStyle:{"margin-bottom":"18px"}},[e.isEdit||!e.isView||1!==e.selectCard.auditing&&3!==e.selectCard.auditing||!e.$checkPermission(["trailerQuoteEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.editRow}},[e._v("\n            编辑\n          ")]),!e.isEdit&&e.isView&&4!==e.selectCard.auditing&&e.$checkPermission(["trailerQuoteAudit"])?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{show:e.showAuditModal,hide:e.hidePopover},model:{value:e.visibleAudit,callback:function(t){e.visibleAudit=t},expression:"visibleAudit"}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"通过/拒绝：",prop:"status","label-width":"110px"}},[r("el-radio-group",{model:{value:e.selectForm.status,callback:function(t){e.$set(e.selectForm,"status",t)},expression:"selectForm.status"}},[r("el-radio",{attrs:{label:"4"}},[e._v("\n                    通过\n                  ")]),r("el-radio",{attrs:{label:"3"}},[e._v("\n                    拒绝\n                  ")])],1)],1),"3"===e.selectForm.status?r("el-form-item",{attrs:{label:"拒绝原因：",prop:"note","label-width":"110px"}},[r("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入拒绝原因"},model:{value:e.selectForm.note,callback:function(t){e.$set(e.selectForm,"note",t)},expression:"selectForm.note"}})],1):e._e(),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.hidePopover}},[e._v("\n                  取消\n                ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.auditPrice}},[e._v("\n                  确认\n                ")])],1)],1),r("el-button",{staticStyle:{margin:"0 10px"},attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              审核\n            ")])],1):e._e(),e.isView&&!e.isEdit||!e.$checkPermission(["trailerQuoteAdd","trailerQuoteEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.cancelEdit}},[e._v("\n            取消\n          ")]),!e.isEdit&&e.isView||!e.$checkPermission(["trailerQuoteAdd","trailerQuoteEdit"])?e._e():r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.savePrice}},[e._v("\n            保存\n          ")]),e.isEdit||!e.isView||1!==e.selectCard.auditing&&3!==e.selectCard.auditing||!e.$checkPermission(["trailerQuoteDel"])?e._e():r("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.deleteRow(1)}}},[e._v("\n            删除\n          ")])],1),!e.selectCard.id&&!e.selectForm.edition||e.isEdit?e._e():r("div",{staticStyle:{"text-align":"right","margin-bottom":"18px"}},[e.$checkPermission(["trailerQuoteCopy"])?r("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.copyPrice}},[e._v("\n            复制此版本\n          ")]):e._e(),4!==e.selectCard.auditing||e.selectForm.edition?e._e():r("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:e.invalidPrice}},[e._v("\n            失效\n          ")])],1)]),r("div",{staticClass:"service-info"},[r("el-form-item",{attrs:{label:"起运地址："}},[e._v("\n          "+e._s(e.selectService.addressName||"--")+"\n        ")]),r("el-form-item",{attrs:{label:"货币单位："}},[e._v("\n          "+e._s(e.formattCurrency(e.selectService.currencyId))+"\n        ")])],1),r("el-row",[r("el-col",{attrs:{span:21}},[0===e.selectService.endAddressType?r("el-popover",{attrs:{placement:"bottom-start",trigger:"click"},on:{hide:e.hidePopover}},[r("div",{staticStyle:{"padding-right":"15px"}},[r("el-form-item",{attrs:{label:"国家：",prop:"countryId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,size:"mini",clearable:"",filterable:"",placeholder:"请选择",disabled:e.isView},on:{focus:e.getCountryList,change:e.onCountryChange},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.countryId||e.isView,filterable:""},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectForm.stateId,callback:function(t){e.$set(e.selectForm,"stateId",t)},expression:"selectForm.stateId"}},e._l(e.stateList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[r("el-select",{staticStyle:{width:"200px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.selectForm.stateId||e.isView,filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.selectForm.cityId,callback:function(t){e.$set(e.selectForm,"cityId",t)},expression:"selectForm.cityId"}},e._l(e.cityList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),r("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"})],1),r("el-form-item",{staticClass:"is-required",attrs:{slot:"reference",label:"城市："},slot:"reference"},[r("el-button",{staticStyle:{"padding-right":"30px"},attrs:{type:"text",size:"mini"}},[e._v("\n                "+e._s(e.selectForm.cityName||"请选择")+"\n              ")])],1)],1):e._e(),"3"!==e.custType||"3"===e.custType&&e.selectForm.toCustSubtype&&"-1"!==e.selectForm.toCustSubtype?r("el-form-item",{attrs:{label:"价格标准：",prop:"ifStandard"}},[r("el-radio-group",{attrs:{disabled:e.isView},on:{change:e.ifStandardChange},model:{value:e.selectForm.ifStandard,callback:function(t){e.$set(e.selectForm,"ifStandard",t)},expression:"selectForm.ifStandard"}},[r("el-radio",{attrs:{label:!0}},[e._v("\n                标准\n              ")]),r("el-radio",{attrs:{label:!1}},[e._v("\n                特殊\n              ")])],1)],1):e._e(),e.selectForm.ifStandard?e._e():r("el-form-item",{attrs:{label:e.formLabel+"：",prop:"associatedAgents","label-width":"100px"}},[r("el-button",{staticStyle:{"padding-right":"35px"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.showModel("a")}}},[e._v("\n              已选择("+e._s((e.selectForm.associatedAgents||[]).length)+")\n            ")])],1),e.selectForm.ifStandard?e._e():r("el-form-item",{attrs:{label:"有效时间：",prop:"refStandardId"}},[e.isView?r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间","picker-options":e.pickerOptions,disabled:e.isView},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}}):r("el-select",{staticStyle:{width:"150px"},attrs:{disabled:e.isView,clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.refStandardChange,focus:e.getStandardPirce},model:{value:e.selectForm.refStandardId,callback:function(t){e.$set(e.selectForm,"refStandardId",t)},expression:"selectForm.refStandardId"}},e._l(e.refStandardList,function(t){return r("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.selectForm.ifStandard,expression:"selectForm.ifStandard"}],attrs:{label:"有效时间：",prop:"times"}},[r("el-date-picker",{staticStyle:{width:"200px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"mini","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间","picker-options":e.pickerOptions,disabled:!e.selectForm.ifStandard||!e.isEdit&&e.isView},model:{value:e.selectForm.times,callback:function(t){e.$set(e.selectForm,"times",t)},expression:"selectForm.times"}})],1)],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:3}},[e.isView&&!e.isEdit?r("el-select",{staticStyle:{width:"100%"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"历史版本"},on:{focus:e.getEditionList,change:function(t){return e.viewHistoryPrice(t,!1)}},model:{value:e.selectForm.edition,callback:function(t){e.$set(e.selectForm,"edition",t)},expression:"selectForm.edition"}},e._l(e.editionList,function(t,i){return r("el-option",{key:i,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1):e._e(),e.isView&&!e.isEdit||"2"!==e.custType?e._e():r("el-popover",{attrs:{placement:"bottom",trigger:"click"},on:{show:e.showBatchAddForm},model:{value:e.isShowPopover,callback:function(t){e.isShowPopover=t},expression:"isShowPopover"}},[r("div",{staticStyle:{padding:"0 20px 0 10px",width:"240px"}},[r("div",[e._v("请输入需要批量修改的值")]),r("el-input-number",{staticClass:"input-number-valiate",staticStyle:{margin:"13px 0 26px 0"},attrs:{controls:!1,placeholder:"请输入",precision:2,size:"mini"},on:{focus:function(e){e.stopPropagation()}},model:{value:e.addNumber,callback:function(t){e.addNumber=t},expression:"addNumber"}}),r("div",{staticStyle:{display:"flex","justify-content":"space-between"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{staticStyle:{color:"#FF6D00"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNumberChange(0)}}},[e._v("\n                  重置\n                ")]),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{staticStyle:{color:"#999999"},attrs:{type:"text",size:"mini"},on:{click:e.hidePopover}},[e._v("\n                    取消\n                  ")]),r("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.addNumberChange(1)}}},[e._v("\n                    保存\n                  ")])],1)],1)],1),r("el-button",{attrs:{slot:"reference",type:"text",size:"mini"},slot:"reference"},[e._v("\n              批量修改\n            ")])],1)],1),3===e.selectCard.auditing?r("el-col",{attrs:{span:24}},[r("el-form-item",{attrs:{label:"拒绝原因："}},[r("span",[e._v("\n              "+e._s(e.selectCard.reason)+"\n            ")])])],1):e._e()],1)],1),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}],staticStyle:{"min-height":"200px"}},[e.xAxis.length?r("vxe-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.yAxis,height:"630",border:"",resizable:"",size:"small","row-class-name":e.tableRowClassName,"auto-resize":!0}},[r("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.label)+"\n          ")]}}],null,!1,799874427)},[r("template",{slot:"header"},[e._v("\n            目的地\\柜型\n          ")])],2),e._l(e.xAxis,function(t,i){return r("vxe-table-column",{key:i,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(i){return["remark"!==t.value?r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                "+e._s(i.row[t.value])+"\n              ")]):r("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2,size:"mini"},model:{value:i.row[t.value],callback:function(r){e.$set(i.row,t.value,r)},expression:"scope.row[item.value]"}})],1):r("div",[i.row.isSuperiorPrice||e.isView&&!e.isEditRow?r("span",[e._v("\n                "+e._s(i.row.remark)+"\n              ")]):r("el-input",{attrs:{placeholder:"请输入",size:"mini"},model:{value:i.row.remark,callback:function(t){e.$set(i.row,"remark",t)},expression:"scope.row.remark"}})],1)]}}],null,!0)})})],2):e._e()],1)],1):e._e(),r("transfer-modal",{ref:"transferModal",attrs:{"select-card":e.selectCard,"is-add-form":e.showAddForm,"is-edit":e.isEdit,"is-view":e.isView,edition:!e.selectForm.edition},on:{save:e.transferModalSave}}),r("agent-price",{ref:"AgentPrice",on:{close:e.closeAgentPrice}}),r("transition",{attrs:{name:"el-fade-in-linear"}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.showAgentPriceModel&&e.showAddForm&&"0"===e.custType&&e.$checkPermission(["trailerQuoteQuotation"]),expression:"showAgentPriceModel && showAddForm && custType === '0' && $checkPermission(['trailerQuoteQuotation'])"},{name:"drag",rawName:"v-drag"}],staticClass:"agent-price"},[r("el-tooltip",{attrs:{effect:"dark",content:"供应商报价",placement:"top"}},[r("i",{staticClass:"icon-price",on:{click:e.showAgentPrice}})])],1)]),r("ul",{directives:[{name:"show",rawName:"v-show",value:e.isShowMenu,expression:"isShowMenu"}],staticClass:"contextmenu",style:{left:e.menuLeft+"px",top:e.menuTop+"px"}},[r("li",{directives:[{name:"permission",rawName:"v-permission",value:["trailerQuoteCopy"],expression:"['trailerQuoteCopy']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.viewPrice(e.showMenuRow,!0)}}},[e._v("\n      复制\n    ")]),r("li",{directives:[{name:"permission",rawName:"v-permission",value:["trailerQuoteGet"],expression:"['trailerQuoteGet']"}],staticClass:"contextmenu-item",on:{click:function(t){return e.viewPrice(e.showMenuRow)}}},[e._v("\n      查看\n    ")]),1!==e.showMenuRow.auditing&&3!==e.showMenuRow.auditing||!e.$checkPermission(["trailerQuoteDel"])?e._e():r("li",{staticClass:"contextmenu-item",on:{click:function(t){return e.deleteRow(2)}}},[e._v("\n      删除\n    ")])])],1)},a=[],s=(i("8e6e"),i("456d"),i("55dd"),i("7f7f"),i("ac4d"),i("8a81"),i("75fc")),n=(i("ac6a"),i("bd86")),o=(i("7514"),i("96cf"),i("3b8d")),c=i("d225"),l=i("b0b4"),u=i("308d"),d=i("6bb5"),m=i("4e2b"),p=i("9ab4"),h=i("60a3"),f=i("9dba"),v=i("9ec0"),g=i("5a0c"),y=i.n(g),b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-dialog",{attrs:{title:e.modalTitle,visible:e.visible,"close-on-click-modal":!1,width:"960px"},on:{close:e.dialogClose}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("el-transfer",{ref:"transferItem",staticClass:"transfer-agent",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.list},model:{value:e.relevanceList,callback:function(t){e.relevanceList=t},expression:"relevanceList"}}),(e.isAddForm&&!e.isEdit&&!e.isView||e.selectCard.id&&4===e.selectCard.auditing)&&e.edition?i("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n        保 存\n      ")])],1):e._e()],1)])},w=[],x=i("13f5"),k=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.visible=!1,e.list=[],e.relevanceList=[],e.modalTitle="",e.modalType="",e.selectService={},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"getCustTypeList",value:function(e){var t=this,i={toCustSubtype:e.toCustSubtype,toCustType:e.toCustType,subtypeId:this.selectService.subtypeId||"",typeId:"06"};this.loading=!0,Object(v["h"])(i).then(function(e){var i=e.data||[];t.list=i.filter(function(e){return e}),!t.isEdit&&t.isView&&(t.list=t.list.map(function(e){return e.disabled=!1,-1!==t.relevanceList.indexOf(e.id)&&(e.disabled=!0),e})),t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"getAddressList",value:function(){var e=this,t={model:{tscId:this.selectService.id},page:1,size:9999};this.loading=!0,Object(x["c"])(t).then(function(t){var i=t.data||{},r=i.result||[];e.list=r.map(function(e){return e.name="".concat(e.country," ").concat(e.province," ").concat(e.city," ").concat(e.area),e}),e.loading=!1}).catch(function(t){return e.loading=!1,t})}},{key:"showModel",value:function(e,t,i,r,a){this.relevanceList=i,this.visible=!0,this.selectService=t,this.modalType=e,"a"===e&&(this.modalTitle=r||"",this.getCustTypeList(a)),"y"===e&&(this.modalTitle="关联目的地",this.getAddressList())}},{key:"cancel",value:function(){this.dialogClose()}},{key:"dialogClose",value:function(){this.relevanceList=[],this.visible=!1}},{key:"save",value:function(){var e=this;0!==this.relevanceList.length?(this.$emit("save",this.modalType,this.relevanceList,this.relevanceList.map(function(t){return e.list.find(function(e){return e.id===t})})),this.dialogClose()):this.$message.warning("请选择关联的数据")}},{key:"filterMethod",value:function(e,t){var i=t.name||"";return i.indexOf(e)>-1}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}}]),t}(h["e"]);k=p["a"]([Object(h["a"])({name:"",components:{},props:{selectCard:{type:Object,default:function(){return{}}},isAddForm:{type:Boolean,default:!1},isEdit:{type:Boolean,default:!1},isView:{type:Boolean,default:!1},edition:{type:Boolean,default:!0}}})],k);var F=k,S=F,L=(i("b5c6"),i("2877")),_=Object(L["a"])(S,b,w,!1,null,"52d92e14",null),I=_.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("vxe-modal",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"show-zoom":"",resize:"","z-index":1314,"lock-view":!1,mask:!1,"lock-scroll":!1,width:"1100","min-width":"700",height:"500","min-height":"400"},on:{close:e.close},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"my-title",attrs:{slot:"title"},on:{click:function(e){return e.stopPropagation(),function(e){return e}(e)}},slot:"title"},[i("span",[e._v("供应商")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px","margin-right":"20px"},attrs:{clearable:"",filterable:"",size:"mini",placeholder:"请选择"},on:{change:e.selectAgentChange},model:{value:e.form.agent,callback:function(t){e.$set(e.form,"agent",t)},expression:"form.agent"}},e._l(e.agentList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),i("span",[e._v("版本")]),i("el-select",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{clearable:"",filterable:"",disabled:!e.form.agent,size:"mini",placeholder:"请选择"},on:{change:e.showPrice},model:{value:e.form.edition,callback:function(t){e.$set(e.form,"edition",t)},expression:"form.edition"}},e._l(e.editionList,function(t){return i("el-option",{key:t.id,attrs:{label:e.dayjs(t.startTime).format("YYYY-MM-DD")+"/"+e.dayjs(t.endTime).format("YYYY-MM-DD"),value:t.id}})}),1)],1),i("div",[e.xAxis.length?i("vxe-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.yAxis,border:"",resizable:"",size:"small","auto-resize":!0}},[i("vxe-table-column",{attrs:{width:"200","show-overflow":!0,"show-header-overflow":!0,"class-name":"first-col-header",resizable:!0},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.label)+"\n        ")]}}],null,!1,2520297979)},[i("template",{slot:"header"},[e._v("\n          目的地\\柜型\n        ")])],2),e._l(e.xAxis,function(t,r){return i("vxe-table-column",{key:r,attrs:{title:t.label,prop:t.value,"show-overflow":!0,resizable:!0},scopedSlots:e._u([{key:"default",fn:function(r){return["remark"!==t.value?i("div",[e._v("\n            "+e._s(r.row[t.value])+"\n          ")]):i("div",[e._v("\n            "+e._s(r.row.remark)+"\n          ")])]}}],null,!0)})})],2):e._e()],1)])},T=[],O=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.visible=!1,e.isMinimize=!1,e.loading=!1,e.agentList=[],e.agentPriceList=[],e.xAxis=[],e.yAxis=[],e.editionList=[],e.selectService={},e.dayjs=y.a,e.form={agent:"",edition:""},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"minimize",value:function(){this.isMinimize=!0,this.visible=!1,this.$emit("close")}},{key:"close",value:function(){this.isMinimize=!1,this.visible=!1,this.$emit("close")}},{key:"show",value:function(e,t){this.isMinimize||(this.selectService=e,this.xAxis=[],this.yAxis=[],this.agentList=[],this.agentPriceList=[],this.editionList=[],this.form={agent:"",edition:""},this.getAgentPriceList(t)),this.visible=!0}},{key:"getAgentPriceList",value:function(e){var t=this;this.loading=!0,Object(v["o"])(e).then(function(e){t.loading=!1,e.success&&e.data&&e.data.length&&(t.agentPriceList=e.data||[]),t.getAgentList()}).catch(function(e){return t.loading=!1,t.agentPriceList=[],t.agentList=[],e})}},{key:"getAxis",value:function(e){this.xAxis=e[0].priceList.map(function(e){return{label:e.nameX,value:e.codeX}}),this.yAxis=e.map(function(e){var t={label:e.nameY,value:e.codeY,remark:e.remark};return e.priceList.forEach(function(e){t[e.codeX]=e.price}),t}),this.xAxis.length&&(this.xAxis=[].concat(Object(s["a"])(this.xAxis),[{label:"备注",value:"remark"}]))}},{key:"getAgentList",value:function(){var e=this.agentPriceList.map(function(e){return{name:e.fromCustName,id:e.fromCustId}});this.agentList=e.reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[])}},{key:"selectAgentChange",value:function(e){this.editionList=this.agentPriceList.filter(function(t){return t.fromCustId===e}),this.form.edition="",this.xAxis=[],this.yAxis=[]}},{key:"showPrice",value:function(e){this.xAxis=[],this.yAxis=[];var t=this.agentPriceList.find(function(t){return t.id===e});if(t){var i=t.priceList;this.getAxis(i)}}}]),t}(h["e"]);O=p["a"]([Object(h["a"])({name:"agentPrice"})],O);var j=O,A=j,P=(i("e292"),Object(L["a"])(A,C,T,!1,null,"4a1731e6",null)),N=P.exports;function D(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?D(i,!0).forEach(function(t){Object(n["a"])(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):D(i).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var $=function(e){function t(){var e;return Object(c["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectCardId="",e.addNumber="",e.showMenuRow={},e.isShowMenu=!1,e.isShowPopover=!1,e.menuTop=0,e.menuLeft=0,e.optionBtnNum=1,e.formLabel="关联代理商",e.city="",e.showAgentPriceModel=!0,e.isActive=!0,e.selectLoading=!1,e.loading=!1,e.visible=!1,e.visible2=!1,e.visibleAudit=!1,e.showAddForm=!1,e.loadingForm=!1,e.loadingTable=!1,e.isView=!1,e.isEditRow=!1,e.isEdit=!1,e.tableList=[],e.editionList=[],e.superiorPriceList=[],e.refStandardList=[],e.typeList=[],e.auditList=[{name:"待审核",id:"1"},{name:"审核中",id:"2"},{name:"已拒绝",id:"3"},{name:"已通过",id:"4"}],e.addressTypeList=[{name:"全部",id:"99"},{name:"港口",id:"1"},{name:"火车站",id:"2"}],e.countryList=[],e.stateList=[],e.cityList=[],e.currencyList=[],e.searchServiceList=[],e.selectServiceList=[],e.yAxis=[],e.xAxis=[],e.custList=[],e.props={label:"name",value:"id"},e.searchForm={subtypeId:void 0,countryId:void 0,serviceId:void 0,serviceName:"",auditing:void 0,ifStandard:"0",addressType:"99",times:[]},e.selectCard={},e.selectService={},e.selectForm={selectCountryId:void 0,cityName:"",stateName:"",cityId:"",stateId:"",refId:void 0,edition:"",refStandardId:void 0,note:"",status:"4",countryId:void 0,countryName:"",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.formRules={refId:[{required:!0,message:"请选择参考报价",trigger:"change"}],refStandardId:[{required:!0,message:"请选择参考标准报价",trigger:"change"}],subtypeId:[{required:!0,message:"请选择业务类型",trigger:"change"}],serviceId:[{required:!0,message:"请选择服务",trigger:"change"}],toCustSubtype:[{required:!0,message:"请选择报价对象",trigger:"change"}],associatedAgents:[{required:!0,message:"请选择报价对象",trigger:"change"}],countryId:[{required:!0,message:"请选择国家",trigger:"change"}],stateId:[{required:!0,message:"请选择州/省",trigger:"change"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],times:[{required:!0,message:"请选择有效日期",trigger:"change"}],status:[{required:!0,message:"请选择通过/拒绝",trigger:"change"}],note:[{required:!0,message:"请填写拒绝原因",trigger:"change"}]},e.pagination={page:1,size:10,total:0},e.dayjs=y.a,e.pickerOptions={disabledDate:function(e){return y()(e)<y()()}},e}return Object(m["a"])(t,e),Object(l["a"])(t,[{key:"onIsShowMenuChange",value:function(e){e?document.body.addEventListener("click",this.closeMenu):document.body.removeEventListener("click",this.closeMenu)}},{key:"addNumberChange",value:function(e){var t=this;this.yAxis.map(function(i,r,a){if(r%2!==0){var s=a[r-1];t.xAxis.map(function(r){"remark"!==r.value&&(i[r.value]=0===e?void 0:parseFloat((s[r.value]+t.addNumber).toFixed(2)))})}}),0===e&&(this.addNumber=void 0)}},{key:"showBatchAddForm",value:function(){this.addNumber=void 0}},{key:"currentChange",value:function(e){this.pagination.page=e,this.getPriceList()}},{key:"copyPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.selectForm.edition){e.next=5;break}return e.next=3,this.viewHistoryPrice(this.selectForm.edition,!0);case 3:e.next=7;break;case 5:return e.next=7,this.viewPrice(this.selectCard,!0);case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"invalidPrice",value:function(){var e=this;this.$confirm("该操作会使此报价及相关代理报价失效，请确认是否操作?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.selectCard.id},i=e.$loading({lock:!0,text:"",background:"hsla(0,0%,100%,.9)"});Object(v["r"])(t).then(function(){i.close(),e.getPriceList()}).catch(function(){i.close()})}).catch(function(){return!1})}},{key:"showMenu",value:function(e,t){this.$checkPermission(["trailerQuoteGet","trailerQuoteCopy","trailerQuoteDel"])&&(this.showMenuRow=e,this.menuLeft=t.clientX,this.menuTop=t.clientY,this.isShowMenu=!0)}},{key:"closeMenu",value:function(){this.isShowMenu=!1}},{key:"closeAgentPrice",value:function(){this.showAgentPriceModel=!0}},{key:"showAgentPrice",value:function(){if(this.selectForm.serviceId){var e=this.$refs.AgentPrice,t={city:this.selectForm.cityName,cityId:this.selectForm.cityId,province:this.selectForm.stateName,provinceId:this.selectForm.stateId,country:this.selectForm.countryName,countryId:this.selectForm.countryId,toSubtype:this.custSubtype,toType:this.custType,addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,service:{key:this.selectService.id,value:this.selectService.label}};e.show(this.selectService,t),this.showAgentPriceModel=!1}else this.$message.warning("请选择服务")}},{key:"getSuperiorPrice",value:function(){var e=this,t=["countryId","stateId","cityId","serviceId","subtypeId"];if(this.yAxis=[],this.xAxis=[],this.superiorPriceList=[],0===this.validateService(t)){var i={city:this.selectForm.cityName,cityId:this.selectForm.cityId,province:this.selectForm.stateName,provinceId:this.selectForm.stateId,country:this.selectForm.countryName,countryId:this.selectForm.countryId,toSubtype:this.custSubtype,toType:this.custType,addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,service:{key:this.selectService.id,value:this.selectService.label}};this.loadingForm=!0,Object(v["o"])(i).then(function(t){e.loadingForm=!1,t.success&&t.data&&t.data.length?e.superiorPriceList=t.data||[]:e.isView||e.$message.warning("暂无参考报价")}).catch(function(t){return e.loadingForm=!1,t})}}},{key:"superiorPriceChange",value:function(e){this.yAxis=[],this.xAxis=[];var t=this.superiorPriceList.find(function(t){return t.id===e});if(t){var i=t.priceList.reduce(function(e,t){var i=JSON.parse(JSON.stringify(t));return i.remark="",t.isSuperiorPrice=!0,i.priceList=i.priceList.map(function(e){return e.price=void 0,e}),i.isSuperiorPrice=!1,e.push(t),e.push(i),e},[]);this.getAxisByView(i)}}},{key:"ifStandardChange",value:function(){this.refStandardList=[],this.selectForm.times=[],this.selectForm.refStandardId=""}},{key:"getStandardPirce",value:function(){var e=this;if(this.refStandardList=[],!this.selectForm.ifStandard){var t=["countryId","stateId","cityId","serviceId","subtypeId"];if(0===this.validateService(t)){var i=this.getOfferObject(),r={city:this.selectForm.cityName,cityId:this.selectForm.cityId,province:this.selectForm.stateName,provinceId:this.selectForm.stateId,country:this.selectForm.countryName,countryId:this.selectForm.countryId,toSubtype:i.toCustSubtype,toType:i.toCustType,addressId:this.selectService.addressId,addressName:this.selectService.addressName,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,priceType:this.selectService.priceType,subtypeId:this.selectService.subtypeId,umDistance:this.selectService.umDistance,umVolume:this.selectService.umVolume,umWeight:this.selectService.umWeight,service:{key:this.selectService.id,value:this.selectService.label}};this.loadingTable=!0,Object(v["l"])(r).then(function(t){e.loadingTable=!1,t.success&&(e.refStandardList=t.data||[],e.refStandardList.length||e.$message.warning("暂无可参考的标准报价"))}).catch(function(t){return e.loadingTable=!1,t})}}}},{key:"refStandardChange",value:function(e){var t=this.refStandardList.find(function(t){return t.id===e});this.selectForm.times=[],t&&(this.selectForm.times=[y()(t.startTime).format("YYYY-MM-DD"),y()(t.endTime).format("YYYY-MM-DD")])}},{key:"editRow",value:function(){this.optionBtnNum=3,this.isEdit=!0,this.isEditRow=!0}},{key:"cancelEdit",value:function(){this.isView&&this.isEdit?(1===this.selectCard.auditing&&(this.optionBtnNum=3),3===this.selectCard.auditing&&(this.optionBtnNum=2),this.showAddForm=!0,this.isView=!0,this.isEdit=!1,this.isEditRow=!1,this.selectForm.associatedAgents=this.selectCard.associatedAgents):(this.selectCard={},this.selectCardId="",this.showAddForm=!1)}},{key:"deleteRow",value:function(e){var t=this,i={id:1===e?this.selectCard.id:this.showMenuRow.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loadingTable=!0,Object(v["c"])(i).then(function(e){t.loadingTable=!1,t.selectService={},t.selectCard={},t.selectForm={cityName:"",cityId:"",stateId:"",stateName:"",edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",countryId:void 0,countryName:"",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},t.showAddForm=!1,t.isView=!1,t.isEditRow=!1,t.isEdit=!1,t.$message.success("删除成功"),t.getPriceList()}).catch(function(e){return t.loadingTable=!1,e})}).catch(function(){return!1})}},{key:"showAuditModal",value:function(){var e=this,t=this.selectCard,i=t.auditing,r=t.reason;if(1===i){var a={id:this.selectCard.id,status:"2",reason:""};Object(v["b"])(a).then(function(t){e.tableList.map(function(t){t.id===e.selectCard.id&&(t.auditing=2,e.selectCard.auditing=2)})}).catch(function(e){return e})}else this.selectForm.status="4",this.selectForm.note=r}},{key:"auditPrice",value:function(){var e=this,t={},i=["status"];"3"===this.selectForm.status&&i.push("note"),0===this.validateService(i)&&(t={id:this.selectCard.id,status:this.selectForm.status,reason:this.selectForm.note},t.fromCustId=this.selectCard.fromCustId,t.fromCustName=this.selectCard.fromCustName,this.visibleAudit=!1,this.loadingTable=!0,Object(v["b"])(t).then(function(i){e.loadingTable=!1,i.success&&(e.selectService={},e.selectCard={},e.selectForm={cityName:"",cityId:"",stateId:"",stateName:"",edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",countryId:void 0,countryName:"",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],times:[]},e.showAddForm=!1,e.isView=!1,e.isEditRow=!1,e.isEdit=!1,e.$message.success("操作成功"),e.getPriceList(t.id))}).catch(function(t){return e.loadingTable=!1,t}))}},{key:"viewHistoryPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=4;break}return e.next=3,this.viewPrice(this.selectCard);case 3:return e.abrupt("return");case 4:this.getPriceById(t).then(function(e){var t=e.priceList||[];e.refId?r.getPriceById(e.refId).then(function(e){r.loadingForm=!1;var a=e.priceList.reduce(function(e,i){i.isSuperiorPrice=!0,e.push(i);var r=t.find(function(e){return e.codeY===i.codeY});return r&&e.push(r),e},[]);i?(r.isView=!1,r.isEdit=!1,r.isEditRow=!0,r.selectCardId="",r.selectCard={},r.selectCard.auditing=void 0,r.selectForm.refId=void 0,r.selectForm.refStandardId=void 0,r.selectForm.times=[]):(r.isView=!0,r.isEdit=!1,r.isEditRow=!1),r.getAxisByView(a)}).catch(function(e){return r.loadingForm=!1,e}):(i?(r.isView=!1,r.isEdit=!1,r.isEditRow=!0,r.selectCardId="",r.selectCard.auditing=void 0,r.selectForm.refId=void 0,r.selectForm.refStandardId=void 0,r.selectForm.times=[],r.selectCard={}):(r.isView=!0,r.isEdit=!1,r.isEditRow=!1),r.loadingForm=!1,r.getAxisByView(t)),r.selectForm.associatedAgents=e.associatedAgents,r.selectForm.times=[y()(e.startTime).format("YYYY-MM-DD"),y()(e.endTime).format("YYYY-MM-DD")]}).catch(function(e){return r.loadingForm=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"viewPrice",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,i){var r,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.$checkPermission(["trailerQuoteGet","trailerQuoteCopy"])){e.next=2;break}return e.abrupt("return");case 2:if(!this.loadingForm){e.next=4;break}return e.abrupt("return");case 4:return this.loadingForm=!1,this.showAddForm=!0,this.xAxis=[],this.yAxis=[],this.selectCard=z({},t),this.selectCardId=t.id,this.superiorPriceList=[],this.refStandardList=[],this.setTableForm(t),i?(this.isView=!1,this.isEdit=!1,this.isEditRow=!0,this.selectCardId="",this.selectCard.auditing=void 0,this.selectForm.refId=void 0,this.selectForm.refStandardId=void 0,this.selectForm.times=[],this.selectCard={}):(this.isView=!0,this.isEdit=!1,this.isEditRow=!1),this.loadingForm=!0,e.prev=15,e.next=18,this.getSubtypeList();case 18:return e.next=20,this.getTrailerServeList("select");case 20:return e.next=22,this.getCountryList();case 22:return e.next=24,this.getStateList();case 24:return e.next=26,this.getCityList();case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](15),this.loadingForm=!1;case 31:this.selectService=this.selectServiceList.find(function(e){return e.id===t.service.key})||{},r=t.priceList||[],this.selectForm.selectCountryId=this.selectService.countryId||void 0,t.refId?("2"===this.custType&&this.getSuperiorPrice(),this.loadingForm=!0,this.getPriceById(t.refId).then(function(e){a.loadingForm=!1;var t=e.priceList.reduce(function(e,t){t.isSuperiorPrice=!0,e.push(t);var i=r.find(function(e){return e.codeY===t.codeY});return i&&e.push(i),e},[]);a.getAxisByView(t)}).catch(function(e){return a.loadingForm=!1,e})):(this.getAxisByView(r),this.loadingForm=!1),"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice();case 36:case"end":return e.stop()}},e,this,[[15,28]])}));function t(t,i){return e.apply(this,arguments)}return t}()},{key:"getAxisByView",value:function(e){this.xAxis=e[0].priceList.map(function(e){return{label:e.nameX,value:e.codeX}}),this.yAxis=e.map(function(e){var t={label:e.nameY,value:e.codeY,isSuperiorPrice:e.isSuperiorPrice||!1,remark:e.remark};return e.priceList.forEach(function(e){t[e.codeX]=e.price||void 0}),t}),this.xAxis.length&&(this.xAxis=[].concat(Object(s["a"])(this.xAxis),[{label:"备注",value:"remark"}]))}},{key:"setTableForm",value:function(e){var t=this.$refs.addForm;t&&t.clearValidate(),this.selectForm.selectCountryId=void 0,this.selectForm.cityId=e.cityId,this.selectForm.cityName=e.city,this.selectForm.stateId=e.provinceId,this.selectForm.stateName=e.province,this.selectForm.countryId=e.countryId,this.selectForm.countryName=e.country,this.selectForm.refId=e.refId,this.selectForm.refStandardId=e.refStandard,this.selectForm.toCustSubtype=e.toSubtype,this.selectForm.subtypeId=e.subtypeId,this.selectForm.associatedAgents=e.associatedAgents,this.selectForm.serviceId=e.service.key,this.selectForm.ifStandard=e.ifStandard,this.selectForm.times=[y()(e.startTime).format("YYYY-MM-DD"),y()(e.endTime).format("YYYY-MM-DD")],this.selectForm.edition=""}},{key:"getAddressList",value:function(){var e=this,t={model:{tscId:this.selectService.id,countryId:this.selectForm.countryId,provinceId:this.selectForm.stateId,cityId:this.selectForm.cityId,type:this.selectService.endAddressType},page:1,size:9999};this.loadingTable=!0,"0"!==this.custType||this.showAgentPriceModel||this.showAgentPrice(),Object(x["c"])(t).then(function(i){if(e.loadingTable=!1,i.success){var r=i.data||{},a=r.result||[];if(0===e.selectService.endAddressType){e.city=r.result[0].city;var s=a.reduce(function(e,i){return i.result&&i.result.length?i.result.forEach(function(t){e.find(function(e){return e.streetId===t.streetId})||e.push(t)}):"CN"!==t.model.countryId&&e.push({street:i.city,streetId:i.cityId}),e},[]);e.yAxis=s.map(function(t){var i=z({label:t.street,value:t.streetId},t,{remark:""});return e.xAxis.length&&e.xAxis.forEach(function(e,t){i[e.cabinetId]=void 0}),i})}else e.yAxis=a.map(function(t){var i=z({label:t.addrName,value:t.addrId},t,{remark:""});return e.xAxis.length&&e.xAxis.forEach(function(e,t){i[e.cabinetId]=void 0}),i})}}).catch(function(t){return e.loadingTable=!1,t})}},{key:"getChildren",value:function(e,t){var i=!1,r={},a=function t(a){Array.isArray(a)&&!i&&a.forEach(function(a){a.id===e?(r=a,i=!0):a.children&&t(a.children)})};return a(t),r}},{key:"getPriceById",value:function(e){return new Promise(function(t,i){var r={id:e};Object(v["i"])(r).then(function(e){e.success?t(e.data||{}):i(e)}).catch(function(e){i(e)})})}},{key:"getEditionList",value:function(){var e=this;if(this.selectCard.id){var t={id:this.selectCard.id};this.editionList=[],this.selectLoading=!0,Object(v["j"])(t).then(function(t){e.selectLoading=!1,t.success&&(e.editionList=t.data||[])}).catch(function(t){return e.selectLoading=!1,t})}}},{key:"savePrice",value:function(){var e=["subtypeId","kscId","ifStandard","times","refStandardId"],t=!1;if(this.isEdit||this.selectForm.ifStandard||this.refStandardList.length){if(this.selectForm.ifStandard||e.push("associatedAgents"),"2"===this.custType&&e.push("toCustSubtype"),this.selectForm.ifStandard||e.push("associatedAgents"),0===this.validateService(e)){var i=!0,r=!1,a=void 0;try{for(var s,n=this.yAxis[Symbol.iterator]();!(i=(s=n.next()).done);i=!0){var o=s.value,c=!1,l=!0,u=!1,d=void 0;try{for(var m,p=this.xAxis[Symbol.iterator]();!(l=(m=p.next()).done);l=!0){var h=m.value;if(o[h.value]){c=!0;break}}}catch(v){u=!0,d=v}finally{try{l||null==p.return||p.return()}finally{if(u)throw d}}if(c){t=c;break}}}catch(v){r=!0,a=v}finally{try{i||null==n.return||n.return()}finally{if(r)throw a}}if(t){var f=this.getParams();this.isEdit?(f.id=this.selectCard.id,f.fromSubtype=this.selectCard.fromSubtype,f.fromType=this.selectCard.fromType,f.fromCustId=this.selectCard.fromCustId,f.fromCustName=this.selectCard.fromCustName,this.savePriceByEdit(f)):this.savePriceByAdd(f)}else this.$message.warning("请填写区间报价")}}else this.$message.warning("操作失败，暂无可参考的标准报价")}},{key:"getParams",value:function(){var e=this,t=this.getOfferObject(),i={refId:this.selectForm.refId,city:this.selectForm.cityName,cityId:this.selectForm.cityId,province:this.selectForm.stateName,provinceId:this.selectForm.stateId,country:this.selectForm.country,countryId:this.selectForm.countryId,associatedAgents:this.selectForm.associatedAgents,ifStandard:this.selectForm.ifStandard,refStandard:this.selectForm.ifStandard?"":this.selectForm.refStandardId,subtypeId:this.selectForm.subtypeId,addressId:this.selectService.addressId,addressName:this.selectService.addressName,priceType:this.selectService.priceType,addressType:this.selectService.addressType,currencyId:this.selectService.currencyId,toSubtype:t.toCustSubtype,toType:t.toCustType,deleted:0,priceList:[],endTime:this.selectForm.times[1]+" 23:59:59",startTime:this.selectForm.times[0]+" 00:00:00",service:{key:this.selectService.id,value:this.selectService.label}};return i.priceList=this.yAxis.filter(function(e){return!e.isSuperiorPrice}).map(function(t){var i={nameY:t.label,codeY:t.value,remark:t.remark,priceList:[]};return e.xAxis.forEach(function(e){"remark"!==e.value&&i.priceList.push({nameX:e.label,codeX:e.value,price:t[e.value]})}),i}),i}},{key:"savePriceByAdd",value:function(e){var t=this;this.loadingForm=!0,Object(v["a"])(e).then(function(e){if(t.loadingForm=!1,e.success){var i=e.data;t.$message.success("保存成功"),t.refStandardList=[],t.getPriceList(i.id||"")}}).catch(function(e){return t.loadingForm=!1,e})}},{key:"savePriceByEdit",value:function(e){var t=this;this.loadingForm=!0,Object(v["d"])(e).then(function(e){t.loadingForm=!1,e.success&&(t.$message.success("保存成功"),t.refStandardList=[],t.getPriceList(t.selectCard.id))}).catch(function(e){return t.loadingForm=!1,e})}},{key:"transferModalSave",value:function(e,t,i){var r=this;if("y"===e&&(this.yAxis=i.map(function(e){var t=z({},e,{remark:""});return r.xAxis.length&&r.xAxis.forEach(function(e,i){t[e.cabinetId]=void 0}),t})),"a"===e){var a=this.$refs.addForm;if(a&&a.clearValidate(),this.selectForm.associatedAgents=t,"2"!==this.selectCard.auditing&&this.isView){var s=this.getParams();s.id=this.selectCard.id,s.fromSubtype=this.selectCard.fromSubtype,s.fromType=this.selectCard.fromType,s.fromCustId=this.selectCard.fromCustId,s.fromCustName=this.selectCard.fromCustName,s.auditing=this.selectCard.auditing,s.effective=this.selectCard.effective,this.savePriceByEdit(s)}}}},{key:"getXAxis",value:function(){var e=this;this.xAxis=[];var t=["subtypeId","serviceId"];if(0===this.validateService(t)){var i={model:this.selectService.id,page:1,size:99999};this.loadingTable=!0,Object(x["p"])(i).then(function(t){if(e.loadingTable=!1,t.success){var i=t.data||{},r=i.result||[];e.xAxis=r.map(function(e,t){return e.value=e.cabinetId,e.label=e.cabinetName,e}),e.xAxis.length?e.xAxis=[].concat(Object(s["a"])(e.xAxis),[{label:"备注",value:"remark"}]):e.$message.info("暂无报价柜型")}}).catch(function(t){return e.loadingTable=!1,t})}}},{key:"validateService",value:function(e){var t=[],i=this.$refs.addForm;return i.validateField(e,function(e){e&&t.push(e)}),t.length}},{key:"getOfferObject",value:function(){var e="",t="";return"3"===this.custType&&("-1"===this.selectForm.toCustSubtype?t="0":(t="1",e=this.selectForm.toCustSubtype)),"0"===this.custType&&(t="2",e="1"),"2"===this.custType&&(t="2"===this.selectForm.toCustSubtype?"2":"1",e=this.selectForm.toCustSubtype),{toCustSubtype:e,toCustType:t}}},{key:"showModel",value:function(e){var t=["subtypeId","serviceId"];"a"===e&&t.push("toCustSubtype");var i=this.getOfferObject();if(0===this.validateService(t)){var r=this.$refs.transferModal;"y"===e&&r.showModel(e,this.selectService,this.yAxis),"a"===e&&r.showModel(e,this.selectService,this.selectForm.associatedAgents,this.formLabel,i)}}},{key:"subTypeChange",value:function(e){this.selectForm.serviceId=void 0,this.selectForm.countryId=void 0,this.selectForm.refStandardId=void 0,this.selectForm.detailArea=[],this.selectForm.cityName="","2"!==this.custType&&this.getXAxis()}},{key:"showAddPriceForm",value:function(){var e=this;this.optionBtnNum=1,this.showAddForm=!0,this.isView=!1,this.isEditRow=!0,this.isEdit=!1,this.yAxis=[],this.xAxis=[],this.selectCardId="",this.selectForm={cityName:"",edition:"",refId:void 0,refStandardId:void 0,note:"",status:"4",countryId:void 0,country:"",serviceId:void 0,serviceName:"",subtypeId:void 0,toCustSubtype:void 0,ifStandard:!0,associatedAgents:[],detailArea:[],times:[]},this.selectCard={},this.selectService={},this.$nextTick(function(){var t=e.$refs.addForm;t&&t.clearValidate()})}},{key:"custSubtypeChange",value:function(){"3"===this.custType&&("1"===this.selectForm.toCustSubtype?this.formLabel="关联同行":this.formLabel="关联直客"),"0"===this.custType&&(this.formLabel="关联代理商"),"2"===this.custType&&("2"===this.selectForm.toCustSubtype?this.formLabel="关联代理商":"1"===this.selectForm.toCustSubtype?this.formLabel="关联同行":this.formLabel="关联直客")}},{key:"getTrailerServeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i={page:1,size:9999},"search"===t?(i.subtypeId=this.searchForm.subtypeId,i.countryId=this.searchForm.countryId):(i.subtypeId=this.selectForm.subtypeId,i.countryId=this.selectForm.selectCountryId,this.selectServiceList=[]),this.selectLoading=!0,e.next=5,Object(v["q"])(i).then(function(e){if(r.selectLoading=!1,e.success){var i=e.data||{},a=i.result||[];"search"===t?r.searchServiceList=a.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}):r.isEdit?r.selectServiceList=a.map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e}):r.selectServiceList=a.filter(function(e){return"1"===e.status}).map(function(e){return e.label="".concat(e.name,"(").concat(e.abbr,")"),e})}}).catch(function(e){return r.selectLoading=!1,e});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"serviceChange",value:function(e,t){if("search"===t){if(this.searchForm.serviceName="",e){var i=this.searchServiceList.find(function(t){return t.id===e});this.searchForm.serviceName=(i||{}).label}}else{if(this.selectForm.countryId=void 0,this.selectForm.refStandardId=void 0,this.selectForm.detailArea=[],this.selectForm.cityName="",this.xAxis=[],this.yAxis=[],this.selectService={},e){var r=this.selectServiceList.find(function(t){return t.id===e});this.selectService=r||{}}"2"!==this.custType&&this.getXAxis(),"2"!==this.custType&&0!==this.selectService.endAddressType&&this.getAddressList()}}},{key:"getSubtypeList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["m"])({typeId:"06"}).then(function(e){t.typeList=e.data||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"tableRowClassName",value:function(e){return e.row.isSuperiorPrice?"success-row":""}},{key:"getCustId",value:function(){var e=this.custSubtype;if("3"===this.custType&&(this.custList=[{name:"聚货通",id:"-1"},{name:"直客",id:"0"},{name:"同行",id:"1"}]),"0"===this.custType&&(this.custList=[]),"2"===this.custType)switch(e){case"1":this.custList=[{name:"二级代理商",id:"2"},{name:"直客",id:"0"},{name:"同行",id:"1"}];break;case"2":this.custList=[{name:"直客",id:"0"},{name:"同行",id:"1"}];break;default:this.custList=[];break}}},{key:"getCountryList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(v["g"])().then(function(e){var i=e.data||{};t.countryList=i.result||[],t.selectLoading=!1}).catch(function(e){return t.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getStateList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["n"])(this.selectForm.countryId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.stateList=r}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(v["f"])(this.selectForm.stateId).then(function(e){t.selectLoading=!1;var i=e.data||{},r=i.result||[];t.cityList=r}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=this.countryList.find(function(e){return e.id===t})||{},this.selectForm.countryName=i.name,this.selectForm.stateId="",this.selectForm.cityId="",this.selectForm.stateName="",this.selectForm.cityName="";case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(e){var t=this.stateList.find(function(t){return t.id===e})||{};this.selectForm.stateName=t.name,this.selectForm.cityId="",this.selectForm.cityName=""}},{key:"onCityChange",value:function(e){var t=this.$refs.addForm;t&&t.clearValidate();var i=this.cityList.find(function(t){return t.id===e})||{};this.selectForm.cityName=i.name,e?this.getAddressList():this.$message.warning("请选择城市")}},{key:"geCurrencyList",value:function(){var e=this,t={page:1,size:999};Object(v["e"])(t).then(function(t){if(t.success){var i=t.data||{};e.currencyList=i.result||[]}}).catch(function(e){return e})}},{key:"clearForm",value:function(e){"1"===e?(this.searchForm.serviceId=void 0,this.searchForm.serviceName="",this.searchForm.countryId=void 0):(this.searchForm.times=[],this.searchForm.addressType="99",this.searchForm.ifStandard="0"),this.getPriceList()}},{key:"toggle",value:function(){this.isActive=!this.isActive}},{key:"showPopover",value:function(e){"1"===e?this.visible=!0:this.visible2=!0}},{key:"getPriceList",value:function(e){var t=this,i={model:{subtypeId:this.searchForm.subtypeId,serviceId:this.searchForm.serviceId,auditing:this.searchForm.auditing,ifStandard:"0"===this.searchForm.ifStandard?"":this.searchForm.ifStandard,addressType:"99"===this.searchForm.addressType?"":this.searchForm.addressType,startTime:this.searchForm.times[0]?this.searchForm.times[0]+" 00:00:00":"",endTime:this.searchForm.times[1]?this.searchForm.times[1]+" 23:59:59":""},page:this.pagination.page,size:this.pagination.size};this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.selectCard={},this.selectCardId="",this.loading=!0,this.refStandardList=[],this.showAddForm=!1,Object(v["k"])(i).then(function(){var i=Object(o["a"])(regeneratorRuntime.mark(function i(r){var a,s,n,o;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:if(t.loading=!1,!r.success){i.next=15;break}if(a=r.data||{},s=a.result||[],t.tableList=s.map(function(e){return 2===e.effective&&(e.status="1"),1===e.effective&&(e.status="2"),9===e.effective&&(e.status="3"),e}).sort(function(e,t){return 1*e.status-1*t.status}),t.pagination.total=a.total||0,!e){i.next=13;break}if(n=t.tableList.find(function(t){return t.id===e}),!n){i.next=11;break}return i.next=11,t.viewPrice(n);case 11:i.next=15;break;case 13:o=t.$refs.AgentPrice,o.close();case 15:case"end":return i.stop()}},i)}));return function(e){return i.apply(this,arguments)}}()).catch(function(e){return t.loading=!1,e})}},{key:"formattCurrency",value:function(e){var t=this.currencyList.find(function(t){return t.id===e});return t?"".concat(t.name,"(").concat(t.sign,")"):"--"}},{key:"formatTag",value:function(e,t){return(this.typeList.find(function(t){return t.id===e.subtypeId})||{}).name}},{key:"hidePopover",value:function(){this.visible=!1,this.visible2=!1,this.visibleAudit=!1,this.isShowPopover=!1}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getSubtypeList();case 3:this.geCurrencyList(),this.getCustId(),this.getPriceList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=f["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=f["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=f["a"].info||{},t=e.custSubtype;return t}}]),t}(h["e"]);p["a"]([Object(h["f"])("isShowMenu")],$.prototype,"onIsShowMenuChange",null),$=p["a"]([Object(h["a"])({name:"",components:{transferModal:I,AgentPrice:N},props:{}})],$);var M=$,R=M,Y=(i("4f97"),Object(L["a"])(R,r,a,!1,null,"49bfba3c",null));t["default"]=Y.exports},fd18:function(e,t,i){"use strict";var r=i("4773"),a=i.n(r);a.a}}]);