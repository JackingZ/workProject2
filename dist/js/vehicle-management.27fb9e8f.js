(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["vehicle-management"],{"0e29":function(e,t,a){},"905f":function(e,t,a){"use strict";var i=a("0e29"),l=a.n(i);l.a},d5f7:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"car-management",staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"车型管理"}}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["addVehicleType"],expression:"['addVehicleType']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addCar}},[e._v("\n              新增车型\n            ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:18}},[a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"国家/地区",filterable:"",clearable:"",size:"small"},on:{focus:e.getCountryList},model:{value:e.selectValue.countryId,callback:function(t){e.$set(e.selectValue,"countryId",t)},expression:"selectValue.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{size:"small",clearable:"",placeholder:"车型名称关键字"},model:{value:e.selectValue.name,callback:function(t){e.$set(e.selectValue,"name",t)},expression:"selectValue.name"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["queryVehicleType"],expression:"['queryVehicleType']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{formatter:e.formatCountry,label:"国家/地区","min-width":"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"name",label:"车型名称"}}),a("el-table-column",{attrs:{prop:"alias",label:"英文名称"}}),a("el-table-column",{attrs:{prop:"length",label:"车长","min-width":"100",formatter:function(t,a,i,l){return e.formatterUnit(t,i,e.umLengthList,"umLength")}}}),a("el-table-column",{attrs:{prop:"width",label:"车宽","min-width":"100",formatter:function(t,a,i,l){return e.formatterUnit(t,i,e.umLengthList,"umLength")}}}),a("el-table-column",{attrs:{prop:"height",label:"车高","min-width":"100",formatter:function(t,a,i,l){return e.formatterUnit(t,i,e.umLengthList,"umLength")}}}),a("el-table-column",{attrs:{prop:"volume",label:"装载体积","min-width":"100",formatter:function(t,a,i,l){return e.formatterUnit(t,i,e.umVolumeList,"umVolume")}}}),a("el-table-column",{attrs:{prop:"loadLimit",label:"最大限重","min-width":"100",formatter:function(t,a,i,l){return e.formatterUnit(t,i,e.umWeightList,"umWeight")}}}),a("el-table-column",{attrs:{prop:"seats",label:"座位数",width:"110px"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"160px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["editVehicleType"],expression:"['editVehicleType']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editVehicle(t.row)}}},[e._v("\n                编辑\n              ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["deleteVehicleType"],expression:"['deleteVehicleType']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteVehicle(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:e.isEdit?"编辑车型":"新增车型",visible:e.isAddEditVisible,"close-on-click-modal":!1,width:"900px"},on:{"update:visible":function(t){e.isAddEditVisible=t},closed:e.cancel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,"label-width":"100px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{prop:"area",label:"国家/地区"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.selectForm.area.length+")",disabled:""},model:{value:e.s,callback:function(t){e.s=t},expression:"s"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleStates},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"车型名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),a("el-form-item",{attrs:{label:"英文名称",prop:"alias"}},[a("el-input",{attrs:{maxlength:20,placeholder:"请输入"},model:{value:e.selectForm.alias,callback:function(t){e.$set(e.selectForm,"alias",t)},expression:"selectForm.alias"}})],1),a("el-form-item",{attrs:{label:"长度单位",prop:"umLength"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.onLength},model:{value:e.selectForm.umLength,callback:function(t){e.$set(e.selectForm,"umLength",t)},expression:"selectForm.umLength"}},e._l(e.umLengthList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"体积单位",prop:"umVolume"}},[a("el-select",{attrs:{placeholder:"请选择",disabled:""},model:{value:e.selectForm.umVolume,callback:function(t){e.$set(e.selectForm,"umVolume",t)},expression:"selectForm.umVolume"}},e._l(e.umVolumeList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"重量单位",prop:"umWeight"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectForm.umWeight,callback:function(t){e.$set(e.selectForm,"umWeight",t)},expression:"selectForm.umWeight"}},e._l(e.umWeightList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"长度",prop:"length"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:1,max:9999,precision:2},model:{value:e.selectForm.length,callback:function(t){e.$set(e.selectForm,"length",t)},expression:"selectForm.length"}})],1),a("el-form-item",{attrs:{label:"宽度",prop:"width"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:1,max:9999,precision:2},model:{value:e.selectForm.width,callback:function(t){e.$set(e.selectForm,"width",t)},expression:"selectForm.width"}})],1),a("el-form-item",{attrs:{label:"高度",prop:"height"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:1,max:9999,precision:2},model:{value:e.selectForm.height,callback:function(t){e.$set(e.selectForm,"height",t)},expression:"selectForm.height"}})],1),a("el-form-item",{attrs:{label:"装载体积",prop:"volume"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.volume,callback:function(t){e.$set(e.selectForm,"volume",t)},expression:"selectForm.volume"}})],1),a("el-form-item",{attrs:{label:"最大限重",prop:"loadLimit"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999,precision:2},model:{value:e.selectForm.loadLimit,callback:function(t){e.$set(e.selectForm,"loadLimit",t)},expression:"selectForm.loadLimit"}})],1),a("el-form-item",{attrs:{label:"座位数",prop:"seats"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,step:1,"step-strictly":"",placeholder:"请输入",min:1,max:100},model:{value:e.selectForm.seats,callback:function(t){e.$set(e.selectForm,"seats",t)},expression:"selectForm.seats"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("\n              取 消\n            ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveConfirm}},[e._v("\n              确 定\n            ")])],1)],1),a("el-dialog",{attrs:{title:"国家/地区",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[a("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["国家/地区","已选择"],props:{key:"id",label:"label"},"filter-placeholder":"输入搜索",data:e.countryList},model:{value:e.selectForm.area,callback:function(t){e.$set(e.selectForm,"area",t)},expression:"selectForm.area"}}),a("div",{staticStyle:{"text-align":"right",margin:"0 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n              取 消\n            ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemDialogClose}},[e._v("\n              确 定\n            ")])],1)],1)],1)],1)])])},l=[],r=(a("8e6e"),a("456d"),a("c5f6"),a("bd86")),n=(a("7f7f"),a("ac6a"),a("5df3"),a("96cf"),a("3b8d")),o=(a("7514"),a("d225")),s=a("b0b4"),c=a("308d"),u=a("6bb5"),m=a("4e2b"),d=a("9ab4"),h=a("60a3"),p=a("ac1a"),g=a("b32d");function f(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(g["a"])(t)}function v(e){var t={url:"/setting/vehicletype/saveVehicleType",method:"post",data:e};return Object(g["a"])(t)}function b(e){var t={url:"/setting/vehicletype/deleteVehicleType",method:"delete",params:e};return Object(g["a"])(t)}function y(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(g["a"])(e)}var L=a("bef3");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(r["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var x=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.isAddEditVisible=!1,e.dialogLoading=!1,e.isEdit=!1,e.tableData=[],e.area=[],e.areaList=[],e.volumeUnit="1",e.weightUnit="1",e.currentId="",e.selectValue={countryId:void 0,name:""},e.selectForm={name:void 0,alias:void 0,umLength:void 0,umVolume:void 0,umWeight:void 0,length:void 0,width:void 0,height:void 0,volume:void 0,loadLimit:void 0,seats:void 0,area:[]},e.countryList=[],e.props={label:"name",value:"id"},e.s="",e.formLoading=!1,e.isItemDialogShow=!1,e.formRules={name:[{required:!0,message:"车型名称不能为空",trigger:"blur"}],alias:[{required:!0,message:"英文名称不能为空",trigger:"blur"},{validator:function(e,t,a){var i=/[\u4e00-\u9fa5]/;t?i.test(t)?a(new Error("英文名称不能有中文")):a():a(new Error("英文名称不能为空"))},trigger:"blur"}],umLength:[{required:!0,message:"长度单位不能为空",trigger:"change"}],umVolume:[{required:!0,message:"体积单位不能为空",trigger:"change"}],umWeight:[{required:!0,message:"重量单位不能为空",trigger:"change"}],length:[{required:!0,message:"长度不能为空",trigger:"blur"}],width:[{required:!0,message:"宽度不能为空",trigger:"blur"}],height:[{required:!0,message:"高度不能为空",trigger:"blur"}],volume:[{required:!0,message:"装载体积不能为空",trigger:"change"}],loadLimit:[{required:!0,message:"载重不能为空",trigger:"blur"}],seats:[{required:!0,message:"座位数不能为空",trigger:"blur"}],area:[{required:!0,message:"国家/地区不能为空",trigger:"change"}]},e.umLengthList=[],e.umVolumeList=[],e.umWeightList=[],e.page=1,e.size=10,e.total=0,e}return Object(m["a"])(t,e),Object(s["a"])(t,[{key:"formatterUnit",value:function(e,t,a,i){var l=a.find(function(t){return t.value===e[i]});return l?"".concat(t," (").concat(l.label,")"):t}},{key:"getWordsList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(L["d"])({type:"measurement_type"}),Object(L["d"])({type:"VOLUME_TYPE"}),Object(L["d"])({type:"weight_type"})]).then(function(e){t.umLengthList=e[0].data||[],t.umVolumeList=e[1].data||[],t.umWeightList=e[2].data||[]}).catch(function(e){return e});case 2:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"formatCountry",value:function(e){var t=e.countries.map(function(e){return e.countryName});return t.join(", ")}},{key:"handleStates",value:function(){this.isItemDialogShow=!0}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"filterMethod",value:function(e,t){var a=t.name||"";return a.indexOf(e)>-1}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,y().then(function(t){var a=t.data||{},i=a.result||[];e.countryList=i.map(function(e){var t=e.name,a=e.id,i=e.alias;return{id:a,name:t,alias:i,label:t+"-"+i}}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a=k({page:this.page,size:this.size},this.selectValue);f(a).then(function(e){t.loading=!1,t.tableData=e.data.result,t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"deleteVehicle",value:function(e){var t=this,a={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){b(a).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"onLength",value:function(e){if(e){e.toUpperCase();switch(e){case"CM":this.selectForm.umVolume="CBCM";break;case"M":this.selectForm.umVolume="CBM";break;case"IN":this.selectForm.umVolume="CUIN";break;case"FT":this.selectForm.umVolume="CUFT";break;default:this.selectForm.umVolume=void 0;break}}else this.selectForm.umVolume=void 0}},{key:"addCar",value:function(){this.isEdit=!1,this.isAddEditVisible=!0}},{key:"cancel",value:function(){this.isAddEditVisible=!1,this.resetForm(),this.clearValidate()}},{key:"saveConfirm",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=k({},e.selectForm),i=e.selectForm.area,l=i.map(function(t){var a=(e.countryList||[]).find(function(e){return e.id===t}),i=a.id,l=a.label;return{countryId:i,countryName:l}});a.countries=l,e.isEdit?a.id=e.currentId:a.id="",v(a).then(function(t){e.$message({type:"success",message:"操作成功"}),e.isAddEditVisible=!1,e.formLoading=!1,e.resetForm(),e.clearValidate(),e.queryAll()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"resetForm",value:function(){this.selectForm={name:void 0,alias:void 0,umLength:void 0,umVolume:void 0,umWeight:void 0,length:void 0,width:void 0,height:void 0,volume:void 0,loadLimit:void 0,seats:void 0,area:[]}}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"editVehicle",value:function(e){this.currentId=e.id;var t=e.name,a=e.alias,i=e.umLength,l=e.umVolume,r=e.umWeight,n=e.length,o=e.width,s=e.height,c=e.volume,u=e.loadLimit,m=e.seats,d=e.countries,h=(d||[]).map(function(e){return e.countryId});this.selectForm={name:t,alias:a,umLength:i,umVolume:l,umWeight:r,length:n,width:o,height:s,volume:c,loadLimit:u,seats:m,area:h},this.isEdit=!0,this.isAddEditVisible=!0}},{key:"close",value:function(){this.isAddEditVisible=!1,this.resetForm()}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getWordsList();case 3:this.queryAll(),this.getCountryList();case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"labelPosition",get:function(){var e=p["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=p["a"].language;return e||"en"}}]),t}(h["e"]);x=d["a"]([Object(h["a"])({name:"Port",components:{},props:{}})],x);var F=x,V=F,C=(a("905f"),a("2877")),O=Object(C["a"])(V,i,l,!1,null,"f460c4d4",null);t["default"]=O.exports}}]);