(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["container-shipment"],{"0226":function(e,t,a){},"0fd8":function(e,t,a){"use strict";var i=a("74b9"),r=a.n(i);r.a},"12fe":function(e,t,a){"use strict";a.d(t,"R",function(){return r}),a.d(t,"Q",function(){return s}),a.d(t,"P",function(){return n}),a.d(t,"O",function(){return o}),a.d(t,"db",function(){return l}),a.d(t,"b",function(){return c}),a.d(t,"o",function(){return u}),a.d(t,"q",function(){return d}),a.d(t,"L",function(){return p}),a.d(t,"p",function(){return m}),a.d(t,"I",function(){return f}),a.d(t,"u",function(){return h}),a.d(t,"v",function(){return v}),a.d(t,"X",function(){return g}),a.d(t,"W",function(){return y}),a.d(t,"M",function(){return b}),a.d(t,"s",function(){return w}),a.d(t,"t",function(){return _}),a.d(t,"l",function(){return k}),a.d(t,"n",function(){return x}),a.d(t,"V",function(){return L}),a.d(t,"m",function(){return S}),a.d(t,"U",function(){return O}),a.d(t,"T",function(){return C}),a.d(t,"S",function(){return I}),a.d(t,"r",function(){return N}),a.d(t,"f",function(){return F}),a.d(t,"k",function(){return j}),a.d(t,"h",function(){return T}),a.d(t,"d",function(){return $}),a.d(t,"F",function(){return D}),a.d(t,"x",function(){return E}),a.d(t,"y",function(){return P}),a.d(t,"H",function(){return z}),a.d(t,"w",function(){return W}),a.d(t,"E",function(){return M}),a.d(t,"Z",function(){return V}),a.d(t,"Y",function(){return A}),a.d(t,"i",function(){return R}),a.d(t,"g",function(){return B}),a.d(t,"j",function(){return K}),a.d(t,"e",function(){return Y}),a.d(t,"c",function(){return G}),a.d(t,"z",function(){return U}),a.d(t,"N",function(){return H}),a.d(t,"G",function(){return J}),a.d(t,"B",function(){return q}),a.d(t,"J",function(){return X}),a.d(t,"ab",function(){return Q}),a.d(t,"cb",function(){return Z}),a.d(t,"A",function(){return ee}),a.d(t,"C",function(){return te}),a.d(t,"D",function(){return ae}),a.d(t,"bb",function(){return ie}),a.d(t,"a",function(){return re}),a.d(t,"K",function(){return se});var i=a("b32d");function r(e){var t={url:"/orders/fill/query",method:"post",data:e};return Object(i["a"])(t)}function s(e){var t={url:"/orders/fill/getFillSheetLines",method:"post",data:e};return Object(i["a"])(t)}function n(e){var t={url:"/orders/fill/getFillSheet",method:"get",params:e};return Object(i["a"])(t)}function o(e){var t={url:"/orders/fill/getFullOrderByCode",method:"get",params:e};return Object(i["a"])(t)}function l(e){var t={url:"/orders/fill/saveFillSheet",method:"post",data:e};return Object(i["a"])(t)}function c(e){var t={url:"/orders/fill/editFillSheet",method:"post",data:e};return Object(i["a"])(t)}function u(e){var t={url:"/orders/fullorder/getOrders",method:"get",params:e};return Object(i["a"])(t)}function d(e){var t={url:"/auth/custtype/getcustlist",method:"post",data:e};return Object(i["a"])(t)}function p(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}function m(e){var t={url:"/auth/custtype/getcountries",method:"get",params:e};return Object(i["a"])(t)}function f(e){var t={url:"/setting/ports/getPortList",method:"get",params:e};return Object(i["a"])(t)}function h(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(i["a"])(t)}function v(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(i["a"])(t)}function g(){var e={url:"/wms/warehouse/selectlist",method:"get"};return Object(i["a"])(e)}function y(e){var t={url:"/wms/warehouse/getWarehouseList",method:"post",data:e};return Object(i["a"])(t)}function b(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(i["a"])(t)}function w(e){var t={url:"/setting/plan/plan_list",method:"post",data:e};return Object(i["a"])(t)}function _(e){var t={url:"/setting/plan/plan_list_view",method:"post",data:e};return Object(i["a"])(t)}function k(e){var t={url:"/setting/aviation/page",method:"post",data:e};return Object(i["a"])(t)}function x(e){var t={url:"/setting/container/getContainerList",method:"get",params:e};return Object(i["a"])(t)}function L(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(i["a"])(t)}function S(e){var t={url:"/cfg/bs/getBs",method:"get",params:e};return Object(i["a"])(t)}function O(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(i["a"])(t)}function C(){var e={url:"/orders/fullorder/status",method:"get"};return Object(i["a"])(e)}function I(e){var t={url:"/orders/booking/getSoByPlanId",method:"get",params:e};return Object(i["a"])(t)}function N(e){var t={url:"/auth/credit/getCustRatingList",method:"post",data:e};return Object(i["a"])(t)}function F(e){var t={url:"/orders/fill/exportOrderInfo",method:"get",responseType:"blob",params:e};return Object(i["a"])(t)}function j(e){var t={url:"/orders/fill/exportUnLoadingBox",method:"get",responseType:"blob",params:e};return Object(i["a"])(t)}function T(e){var t={url:"/wms/fill/fillExport",method:"get",responseType:"blob",params:e};return Object(i["a"])(t)}function $(e){var t={url:"/orders/fill/exportInsuranceList",method:"get",responseType:"blob",params:e};return Object(i["a"])(t)}function D(e){var t={url:"/orders/declare_order/create_out_declare",method:"get",params:e};return Object(i["a"])(t)}function E(e){var t={url:"/orders/declare_order/create_enter_declare",method:"get",params:e};return Object(i["a"])(t)}function P(e){var t={url:"/orders/trailer/create_trailer",method:"post",data:e};return Object(i["a"])(t)}function z(e){var t={url:"/orders/trailer/create_out_trailer",method:"post",data:e};return Object(i["a"])(t)}function W(e){var t={url:"/orders/card/create_Enter_car",method:"post",data:e};return Object(i["a"])(t)}function M(e){var t={url:"/orders/card/create_start_car",method:"post",data:e};return Object(i["a"])(t)}function V(e){var t={url:"/orders/pallet/savePalletLine",method:"post",data:e};return Object(i["a"])(t)}function A(e){var t={url:"wms/warehouse/country",method:"post",data:e};return Object(i["a"])(t)}function R(e){var t={url:"orders/fullorder/exportPackingStartList",method:"post",responseType:"blob",data:e};return Object(i["a"])(t)}function B(e){var t={url:"orders/fullorder/exportPackingEndList",method:"post",responseType:"blob",data:e};return Object(i["a"])(t)}function K(e){var t={url:"/orders/fill/exportTrackingNumber",method:"post",responseType:"blob",params:e};return Object(i["a"])(t)}function Y(e){var t={url:"/orders/fill/exportOpenArk",method:"post",responseType:"blob",params:e};return Object(i["a"])(t)}function G(e){var t={url:"/orders/fill/exportArkExpress",method:"get",responseType:"blob",params:e};return Object(i["a"])(t)}function U(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(i["a"])(t)}function H(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(i["a"])(t)}function J(e){var t={url:"/orders/outorder/create_order",method:"post",data:e};return Object(i["a"])(t)}function q(e){var t={url:"/orders/fill/query_by_task",method:"get",params:e};return Object(i["a"])(t)}function X(e){var t={url:"/orders/fill/search_by_inter",method:"get",params:e};return Object(i["a"])(t)}function Q(e){var t={url:"/orders/outorder/supplement_order",method:"post",data:e};return Object(i["a"])(t)}function Z(e){var t={url:"/orders/fill/updateContainerNo",method:"post",data:e};return Object(i["a"])(t)}function ee(e){var t={url:"/cfg/lsc/getLscGroupList",method:"post",data:e};return Object(i["a"])(t)}function te(e){var t={url:"orders/split_sheet/get_order_by_file",method:"get",params:e};return Object(i["a"])(t)}function ae(e){var t={url:"/orders/split_sheet/loading_4_warehouse",method:"get",params:e};return Object(i["a"])(t)}function ie(e){var t={url:"orders/split_sheet/check_order",method:"get",params:e};return Object(i["a"])(t)}function re(e){var t={url:"/orders/split_sheet/edit_confirm",method:"get",params:e};return Object(i["a"])(t)}function se(e){var t={url:"/wms/packing/page_return_box",method:"post",data:e};return Object(i["a"])(t)}},"28a7":function(e,t,a){"use strict";var i=a("7664"),r=a.n(i);r.a},"2a31":function(e,t,a){"use strict";var i=a("325c"),r=a.n(i);r.a},"325c":function(e,t,a){},"35ec":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"index"===e.pageType,expression:"pageType === 'index'"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"外协发货"}}),a("div",{staticClass:"app-panel"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[!e.$checkPermission(["outsourcAdd"])||"0"!==e.userInfo.custType&&"1"!==("2"===e.userInfo.custType&&e.userInfo.custSubtype)?e._e():a("el-button",{staticStyle:{margin:"0 10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.add}},[e._v("\n              新增\n            ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"业务类型",loading:e.selectLoading,clearable:"",size:"small",filterable:""},on:{focus:e.getServiceSubtypeList},model:{value:e.searchForm.subtypeId,callback:function(t){e.$set(e.searchForm,"subtypeId",t)},expression:"searchForm.subtypeId"}},e._l(e.subtypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"150px",margin:"0 10px"},attrs:{placeholder:"供应商",loading:e.selectLoading,clearable:"",size:"small",filterable:""},on:{focus:e.getSupplierList},model:{value:e.searchForm.supplierId,callback:function(t){e.$set(e.searchForm,"supplierId",t)},expression:"searchForm.supplierId"}},e._l(e.supplierList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{placeholder:"是否安排出库",clearable:"",size:"small",filterable:""},model:{value:e.searchForm.ifWareHouseOut,callback:function(t){e.$set(e.searchForm,"ifWareHouseOut",t)},expression:"searchForm.ifWareHouseOut"}},[a("el-option",{attrs:{label:"是",value:"1"}}),a("el-option",{attrs:{label:"否",value:"0"}})],1),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"240px","margin-right":"10px"},attrs:{placeholder:"原单号",size:"small"},model:{value:e.searchForm.code,callback:function(t){e.$set(e.searchForm,"code",t)},expression:"searchForm.code"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcQuery"],expression:"['outsourcQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.loadData(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("div",{staticClass:"table-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{prop:"type",label:"业务类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?a("span",[e._v("空运")]):e._e(),"1"===t.row.type?a("span",[e._v("海运")]):e._e(),"2"===t.row.type?a("span",[e._v("铁路")]):e._e(),"4"===t.row.type?a("span",[e._v("卡航")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"serviceName",label:"服务",width:"230"}}),a("el-table-column",{attrs:{prop:"supplierName",label:"供应商",width:"200"}}),a("el-table-column",{attrs:{prop:"warehouseName",label:"仓库",width:"200"}}),a("el-table-column",{attrs:{prop:"subtypeName",label:"柜号/提单号",width:"150"}}),a("el-table-column",{attrs:{prop:"totalPackages",label:"总票数",width:"150"}}),a("el-table-column",{attrs:{prop:"totalVolume",label:"总体积",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.totalVolume)+" CBM\n              ")]}}])}),a("el-table-column",{attrs:{prop:"totalWeight",label:"总重量",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(t.row.totalWeight)+" KGS\n              ")]}}])}),a("el-table-column",{attrs:{label:"安排出库",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(0===t.row.ifWareHouseOut?"否":"是")+"\n              ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"165",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcView"],expression:"['outsourcView']"}],attrs:{type:"text"},on:{click:function(a){return e.view(t.row)}}},[e._v("\n                  查看\n                ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcEdit"],expression:"['outsourcEdit']"}],attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("\n                  编辑\n                ")]),e.$checkPermission(["outsourcExpress","outsourcMetering","arrangeDelivery","replenishmentDelivery"])?a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(a){return e.handleCommand(a,t.row)}}},[a("el-button",{staticStyle:{"padding-left":"10px"},attrs:{type:"text"}},[e._v("\n                    更多\n                    "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcExpress","outsourcMetering","outExport"],expression:"['outsourcExpress', 'outsourcMetering', 'outExport']"}],attrs:{command:"1"}},[e._v("\n                      资料补充\n                    ")]),0===t.row.ifWareHouseOut&&e.$checkPermission(["arrangeDelivery"])?a("el-dropdown-item",{attrs:{command:"2"}},[e._v("\n                      安排出库\n                    ")]):e._e(),1===t.row.ifWareHouseOut&&e.$checkPermission(["replenishmentDelivery"])?a("el-dropdown-item",{attrs:{command:"3"}},[e._v("\n                      补单出库\n                    ")]):e._e(),e.$checkPermission(["outExport"])?a("el-dropdown-item",{attrs:{command:"export"}},[e._v("\n                      导出箱单发票\n                    ")]):e._e()],1)],1):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)],1),a("add-form",{directives:[{name:"show",rawName:"v-show",value:"form"===e.pageType,expression:"pageType === 'form'"}],ref:"addForm",attrs:{"status-list":e.statusList},on:{goBack:function(t){e.pageType="index"},save:e.save}}),a("supplement-info",{directives:[{name:"show",rawName:"v-show",value:"supplement"===e.pageType,expression:"pageType === 'supplement'"}],ref:"supplementInfo",on:{goBack:function(t){e.pageType="index"}}}),a("el-dialog",{attrs:{title:"补单出库",width:"1200px","close-on-click-modal":!1,visible:e.dialogReplenish},on:{"update:visible":function(t){e.dialogReplenish=t},close:e.cancelReplenish}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[a("el-table",{ref:"tables",staticStyle:{width:"100%"},attrs:{data:e.replenishData,border:"","row-key":"id",height:"400px"},on:{select:e.handleSelected,"select-all":e.handleSelectAll}},[a("el-table-column",{attrs:{fixed:"left",type:"selection",width:"55"}}),a("el-table-column",{attrs:{label:"原单号",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"text-info"},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.row.code,expression:"scope.row.code"}],staticClass:"copy-icon"}),a("span",[e._v("\n                  "+e._s(t.row.code)+"\n                ")])]),a("div",[t.row.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                  冻结\n                ")]):e._e(),t.row.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                  锁舱\n                ")]):e._e(),"1"!==t.row.payMethod&&e.formatPay(t.row)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                  "+e._s(t.row.ifPayment?"逾期已付款":"逾期未付款")+"\n                ")]):e._e(),"1"===t.row.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                  "+e._s(t.row.ifPayment?"已付款":"未付款")+"\n                ")]):e._e(),e.formatInsuf(t.row)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                  信用不足\n                ")]):e._e()])]}}])}),a("el-table-column",{attrs:{label:"目的城市",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.consignee||{}).city||"--")+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"服务",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.lsc||{}).value||"--")+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"下单仓库",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.warehouse||{}).name||"--")+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"货物所在仓",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.warehouse1||{}).name||"--")+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"总体积","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.maxVolWeiFormat(t.row,"vol","CBM"))+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"总重量","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.maxVolWeiFormat(t.row,"wei","KGS"))+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"最大重量","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.maxVolWeiFormat(t.row,"maxWei","KGS"))+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"最大体积","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.maxVolWeiFormat(t.row,"maxVol","CBM"))+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"件数",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.packages)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"计量状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["MEASURE"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"验货状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["EXAMINE"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"报关状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.statusList.find(function(e){return e.id===t.row.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"快递单号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.express&&t.row.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[a("div",e._l(t.row.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                    "+e._s(t)+"\n                  ")])}),0),a("el-button",{staticStyle:{padding:"0"},attrs:{slot:"reference",type:"text",size:"small"},slot:"reference"},[e._v("\n                  已出\n                ")])],1):a("div",[e._v("\n                未出\n              ")])]}}])})],1),a("div",{staticStyle:{"text-align":"right",padding:"10px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogReplenish=!1}}},[e._v("\n            取消\n          ")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveReplenish}},[e._v("\n            确定\n          ")])],1)],1)])],1)])},r=[],s=(a("c5f6"),a("7f7f"),a("75fc")),n=(a("7514"),a("d225")),o=a("b0b4"),l=a("308d"),c=a("6bb5"),u=a("4e2b"),d=a("9ab4"),p=a("60a3"),m=a("9dba"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"form-main"},[a("div",{staticClass:"form-header"},[a("el-row",{staticClass:"header-title"},[a("el-col",{attrs:{span:20}},[a("el-steps",{attrs:{simple:"",active:e.activeStep,"finish-status":"wait","process-status":"finish"}},[a("el-step",{attrs:{title:"选择订单"}}),a("el-step",{attrs:{title:"确认订单"}})],1)],1),a("el-col",{staticStyle:{"text-align":"right",padding:"6px"},attrs:{span:4}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"text",size:"small"},on:{click:e.goBack}},[e._v("\n          返 回\n        ")])],1)],1)],1),a("div",{staticClass:"form-content"},[a("first-step",{directives:[{name:"show",rawName:"v-show",value:0===e.activeStep,expression:"activeStep === 0"}],ref:"firstStep",attrs:{"status-list":e.statusList,"form-type":e.formType},on:{nextStep:e.nextStep}}),a("two-step",{directives:[{name:"show",rawName:"v-show",value:1===e.activeStep,expression:"activeStep === 1"}],ref:"twoStep",attrs:{"first-form":e.firstForm,"form-type":e.formType,"select-order-list":e.selectOrderList,"status-list":e.statusList},on:{prevStep:e.prevStep,save:e.save}})],1)])},h=[],v=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"first-step"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"title"},[e._v("\n      订单筛选\n    ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"90px"}},[a("el-row",{staticStyle:{"border-bottom":"1px solid #DCE0E5",padding:"0 15px"}},[a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"业务类型",prop:"subtypeId"}},[a("el-radio-group",{on:{change:e.subtypeChange},model:{value:e.form.subtypeId,callback:function(t){e.$set(e.form,"subtypeId",t)},expression:"form.subtypeId"}},e._l(e.typeList,function(t){return a("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v("\n                "+e._s(t.name)+"\n              ")])}),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"时间范围",prop:"times"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"left",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.form.times,callback:function(t){e.$set(e.form,"times",t)},expression:"form.times"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"目的国",prop:"countryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",filterable:"",disabled:!e.form.subtypeId},on:{focus:e.getCountryList,change:e.countryChange},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"服务",prop:"lscId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.form.countryId||!e.form.subtypeId,filterable:""},on:{focus:e.getPrivatelineList,change:e.lscChange},model:{value:e.form.lscId,callback:function(t){e.$set(e.form,"lscId",t)},expression:"form.lscId"}},e._l(e.lscList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.abbr,value:e.id}})}),1)],1)],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:4}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.loadOrder}},[e._v("\n            查询\n          ")]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("\n            重置\n          ")])],1)],1),a("div",{staticStyle:{"margin-top":"20px",display:"flex","justify-content":"space-between","align-items":"center"}},[a("div",{staticStyle:{display:"flex","align-items":"center",flex:"1"}},[a("span",{staticClass:"title",staticStyle:{padding:"0 30px"}},[e._v("\n            已筛选订单\n          ")]),a("el-radio-group",{attrs:{size:"small"},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("\n              全部\n            ")]),a("el-radio-button",{attrs:{label:"selected"}},[e._v("\n              已选择\n            ")])],1),a("span",{staticStyle:{margin:"0 10px"}},[a("span",{staticClass:"label"},[e._v("已选择：")]),a("span",{staticClass:"value"},[e._v(e._s(e.selectOrderListInfo.num)+" 票，"+e._s(e.selectOrderListInfo.volume)+" CBM，"+e._s(e.selectOrderListInfo.weight)+" KGS")])]),a("span",[a("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{label:"装货仓库",prop:"warehouseId"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",filterable:""},on:{focus:e.getWarehouseList,change:e.warehouseChange},model:{value:e.form.warehouseId,callback:function(t){e.$set(e.form,"warehouseId",t)},expression:"form.warehouseId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),a("div",{staticStyle:{"text-align":"right","padding-right":"15px"}},[a("el-form-item",{staticStyle:{display:"inline-block","margin-bottom":"0"},attrs:{label:"手动添加订单","label-width":"120px"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入",disabled:!e.form.warehouseId},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}}),a("el-button",{attrs:{type:"primary",disabled:!e.form.warehouseId},on:{click:e.searchOrderByCode}},[e._v("\n              添加\n            ")])],1)],1)]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-list-wrap"},[e.showList.length?a("div",{staticClass:"order-list",style:{height:"100%"}},e._l(e.showList,function(t){return a("div",{key:t.code,staticClass:"order-item"},[a("div",{staticClass:"header-recommend"},[a("span",{staticClass:"recommend-item"},[a("span",[e._v("供应商：")]),(t.selectSupplier||{}).supplierId===t.supplierId?a("span",{staticClass:"recommend-supplier"},[e._v("\n                  推荐\n                ")]):e._e(),a("span",[e._v(e._s((t.selectSupplier||{}).supplierName||"--"))]),t.supplierList.length?a("span",{staticStyle:{cursor:"pointer",color:"#409EFF","margin-right":"15px"},on:{click:function(a){return e.showDialog(t)}}},[e._v("\n                  切换\n                ")]):e._e()]),a("span",{staticClass:"recommend-item"},[a("span",[e._v("单价：")]),t.supplierList.length?a("span",[e._v("\n                  "+e._s((t.um||{}).currencyId)+" "+e._s((t.selectSupplier||{}).outPrice)+"\n                  "),"0"===t.xtype?a("span",[e._v(" / "+e._s((t.um||{}).umWeight))]):e._e(),"1"===t.xtype?a("span",[e._v(" / "+e._s((t.um||{}).umVolume))]):e._e(),"2"===t.xtype?a("span",[e._v(" 柜型")]):e._e()]):a("span",[e._v("--")])]),a("span",{staticClass:"recommend-item"},[a("span",[e._v("总价：")]),t.supplierList.length?a("span",{staticClass:"recommend-price"},[e._v("\n                  "+e._s((t.selectSupplier||{}).totalOutPrice)+" "+e._s((t.um||{}).currencyId)+"\n                ")]):a("span",[e._v("--")])])]),a("div",{staticClass:"order-info"},["all"===e.orderType&&e.form.warehouseId&&e.render?a("el-checkbox",{staticStyle:{width:"23px","text-align":"right","padding-right":"5px","margin-right":"0","padding-top":"5px"},attrs:{checked:e.selectOrderCodes.includes(t.code),disabled:!t.isShipment||(t.warehouse1||{}).id!==e.form.warehouseId||0===t.supplierList.length},on:{change:function(a){return e.selectOrder(a,t)}}}):e._e(),a("div",{staticStyle:{display:"flex","flex-flow":"row wrap"}},[a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    原单号：\n                  ")]),a("div",{staticClass:"text-info",attrs:{title:t.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.code,expression:"item.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(t.code))])]),a("div",[t.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                      特批发货\n                    ")]):e._e(),t.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                      冻结\n                    ")]):e._e(),t.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                      锁舱\n                    ")]):e._e(),"1"!==t.payMethod&&e.formatPay(t)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                      "+e._s(t.ifPayment?"逾期已付款":"逾期未付款")+"\n                    ")]):e._e(),"1"===t.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                      "+e._s(t.ifPayment?"已付款":"未付款")+"\n                    ")]):e._e(),e.formatInsuf(t)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                      信用不足\n                    ")]):e._e()])]),"1"===t.addressType?a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    目的城市：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((t.consignee||{}).city||"--")+"\n                  ")])]):e._e(),"0"===t.addressType?a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    目的仓：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((t.fbastore||{}).code)+"\n                  ")])]):e._e(),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    服务：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((t.lsc||{}).value||"--")+"\n                  ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    下单仓库：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((t.warehouse||{}).name||"--")+"\n                  ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    货物所在仓：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((t.warehouse1||{}).name||"--")+"\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    总体积：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s(t.allVolumeNum)+" CBM\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    总重量：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s(t.allWeightNum)+" KGS\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    最大重量：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s(t.maxWei)+" KGS\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    最大体积：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s(t.maxVol)+" CBM\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    件数：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s(t.packages)+"\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    计量状态：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((e.statusList.find(function(e){return e.id===t.status["MEASURE"]})||{name:"--"}).name)+"\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    验货状态：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((e.statusList.find(function(e){return e.id===t.status["EXAMINE"]})||{name:"--"}).name)+"\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    报关状态：\n                  ")]),a("div",{staticClass:"text-info"},[e._v("\n                    "+e._s((e.statusList.find(function(e){return e.id===t.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                  ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                    快递单号：\n                  ")]),a("div",{staticClass:"text-info"},["0"===t.deliveryWay?a("div",[t.express&&t.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[e._l(t.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                          "+e._s(t)+"\n                        ")])}),a("span",{staticStyle:{color:"#2291E6",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v("\n                          已出\n                        ")])],2):a("span",[e._v("\n                        未出\n                      ")])],1):a("div",[e._v("\n                      --\n                    ")])])])])],1)])}),0):a("div",{staticClass:"order-none",style:{height:"100%"}},[e._v("\n          暂无订单\n        ")])])],1)],1),a("div",{staticStyle:{height:"32px","text-align":"right"}},[a("el-pagination",{directives:[{name:"show",rawName:"v-show",value:"all"===e.orderType,expression:"orderType === 'all'"}],staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("div",{staticClass:"bottom-btn"},[a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("\n      清空\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.nextStep}},[e._v("\n      下一步\n    ")])],1),a("el-dialog",{attrs:{title:"选择供应商",visible:e.visible,"close-on-click-modal":!1,width:"500px"},on:{close:e.cancelSupperier}},[a("el-table",{attrs:{data:e.orderSupplierList,height:"500px",border:""}},[a("el-table-column",{attrs:{prop:"fromCustName",label:"供应商"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio",{attrs:{disabled:!t.row.totalPrice,label:t.row.fromCustId},on:{change:e.selectRowChange},model:{value:e.selectSupplier.supplierId,callback:function(t){e.$set(e.selectSupplier,"supplierId",t)},expression:"selectSupplier.supplierId"}},[t.row.fromCustId===e.showDialogRow.supplierId?a("span",{staticClass:"recommend-supplier"},[e._v("\n              推荐\n            ")]):e._e(),e._v("\n            "+e._s(t.row.fromCustName)+"\n          ")])]}}])}),a("el-table-column",{attrs:{label:"单价",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.currencyId+" "+t.row.unitPrice)+"\n          "),"0"===t.row.xtype?a("span",[e._v(" / "+e._s(t.row.umWeight))]):e._e(),"1"===t.row.xtype?a("span",[e._v(" / "+e._s(t.row.umVolume))]):e._e(),"2"===t.row.xtype?a("span",[e._v(" / "+e._s("柜型"))]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"type",label:"总价",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.totalPrice+" "+t.row.currencyId)+"\n        ")]}}])})],1),a("div",{staticStyle:{"text-align":"right"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancelSupperier}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSupperier}},[e._v("\n        确 定\n      ")])],1)],1)],1)},y=[],b=(a("5df3"),a("4f7f"),a("b32d"));function w(e){var t={url:"/auth/custtype/getcountries",method:"get",params:e};return Object(b["a"])(t)}function _(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(b["a"])(t)}function k(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(b["a"])(t)}function x(e){var t={url:"/orders/takeOutOrder/findByParam",method:"post",data:e};return Object(b["a"])(t)}function L(e){var t={url:"auth/supplier/getSupplierList",method:"get",params:e};return Object(b["a"])(t)}function S(e){var t={url:"/orders/takeOutOrder/queryFullOrder",method:"post",data:e};return Object(b["a"])(t)}function O(e){var t={url:"/orders/takeOutOrder/getOrder",method:"get",params:e};return Object(b["a"])(t)}function C(e){var t={url:"/wms/warehouse/getWarehouseList",method:"post",data:e};return Object(b["a"])(t)}function I(e){var t={url:"/orders/takeOutOrder/save",method:"post",data:e};return Object(b["a"])(t)}function N(e){var t={url:"/orders/takeOutOrder/modifyOrder",method:"post",data:e};return Object(b["a"])(t)}function F(e){var t={url:"/orders/takeOutOrder/findById",method:"get",params:e};return Object(b["a"])(t)}function j(e){var t={url:"/orders/guest/outExpress/redaData",method:"get",params:e};return Object(b["a"])(t)}function T(e){var t={url:"/orders/guest/outExpress/export",method:"post",params:e,responseType:"blob"};return Object(b["a"])(t)}function $(e){var t={url:"/orders/takeOutOrder/export",method:"post",params:e,responseType:"blob"};return Object(b["a"])(t)}function D(e){var t={url:"/orders/guest/outExpress/read",method:"post",data:e};return Object(b["a"])(t)}function E(e){var t={url:"/orders/guest/outExpress/modify",method:"post",data:e};return Object(b["a"])(t)}function P(e){var t={url:"/orders/guest/take_metering/redaData",method:"get",params:e};return Object(b["a"])(t)}function z(e){var t={url:"/orders/guest/take_metering/export",method:"post",params:e,responseType:"blob"};return Object(b["a"])(t)}function W(e){var t={url:"/orders/guest/take_metering/read",method:"post",data:e};return Object(b["a"])(t)}function M(e){var t={url:"/orders/guest/take_metering/modify",method:"post",data:e};return Object(b["a"])(t)}function V(e){var t={url:"/orders/takeOutOrder/create_order",method:"post",data:e};return Object(b["a"])(t)}function A(e){var t={url:"/orders/takeOutOrder/searchOrder",method:"get",params:e};return Object(b["a"])(t)}function R(e){var t={url:"/orders/takeOutOrder/supplement",method:"post",data:e};return Object(b["a"])(t)}var B=a("5a0c"),K=a.n(B);function Y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Y(a,!0).forEach(function(t){Object(v["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Y(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var U=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.render=!1,e.loading=!1,e.visible=!1,e.selectLoading=!1,e.orderType="all",e.searchCode="",e.form={subtypeId:"",subtypeName:"",times:[],countryId:"",countryName:"",lscId:"",lscName:"",warehouseId:"",warehouseName:""},e.selectSupplier={},e.showDialogRow={},e.rules={subtypeId:{required:!0,message:"请选择业务类型",trigger:"change"},countryId:{required:!0,message:"请选择目的国",trigger:"change"},lscId:{required:!0,message:"请选择服务",trigger:"change"},warehouseId:{required:!0,message:"请选择装货仓库",trigger:"change"}},e.pagination={page:1,size:10,total:0},e.countryList=[],e.lscList=[],e.typeList=[],e.orderList=[],e.selectOrderList=[],e.warehouseList=[],e.orderSupplierList=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"formatPay",value:function(e){var t=e.payTime?K()(e.payTime).unix():"",a=K()().unix(),i=t||a,r=e.cutoffTime?K()(e.cutoffTime).unix():"";return!!r&&r&&r<i}},{key:"formatInsuf",value:function(e){return!!e.insufficient}},{key:"cancelSupperier",value:function(){this.orderSupplierList=[],this.selectSupplier={},this.showDialogRow={},this.visible=!1}},{key:"confirmSupperier",value:function(){var e=this;this.selectSupplier.supplierId?(this.selectOrderList=this.selectOrderList.map(function(t){return e.showDialogRow.code===t.code&&(t.selectSupplier=G({},e.selectSupplier)),t}),this.orderList=this.orderList.map(function(t){return e.showDialogRow.code===t.code&&(t.selectSupplier=G({},e.selectSupplier)),t}),this.cancelSupperier()):this.$message.warning("请选择供应商")}},{key:"showDialog",value:function(e){var t=e.selectSupplier||{};this.orderSupplierList=e.supplierList||[],this.selectSupplier=JSON.parse(JSON.stringify(t)),this.showDialogRow=e,this.visible=!0}},{key:"selectRowChange",value:function(){var e=this,t=this.orderSupplierList.find(function(t){return t.fromCustId===e.selectSupplier.supplierId})||{};this.selectSupplier.supplierName=t.fromCustName,this.selectSupplier.outPrice=t.unitPrice,this.selectSupplier.totalOutPrice=t.totalPrice,this.selectSupplier.priceId=t.priceId}},{key:"nextStep",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(t){if(0===e.selectOrderList.length)return void e.$message.error("请选择订单");var a=Object(s["a"])(new Set(e.selectOrderList.map(function(e){return(e.selectSupplier||{}).supplierId}).filter(function(e){return e})));if(1!==a.length)return void e.$message.error("已选订单供应商不一致");e.$emit("nextStep",{form:e.form,selectOrderList:e.selectOrderList,selectOrderListInfo:e.selectOrderListInfo})}})}},{key:"subtypeChange",value:function(){var e=this;this.form.subtypeName=(this.typeList.find(function(t){return t.id===e.form.subtypeId})||{}).name,this.lscList=[],this.form.lscId="",this.form.lscName="",this.selectOrderList=[],this.orderList=[]}},{key:"lscChange",value:function(){var e=this;this.form.lscName=(this.lscList.find(function(t){return t.id===e.form.lscId})||{}).name,this.selectOrderList=[],this.orderList=[]}},{key:"countryChange",value:function(){var e=this;this.form.countryName=(this.countryList.find(function(t){return t.id===e.form.countryId})||{}).name,this.lscList=[],this.form.lscId="",this.form.lscName="",this.selectOrderList=[],this.orderList=[]}},{key:"warehouseChange",value:function(){var e=this;this.form.warehouseName=(this.warehouseList.find(function(t){return t.id===e.form.warehouseId})||{}).name,this.selectOrderList=[],this.searchCode="",this.render=!1,this.$nextTick(function(){e.render=!0})}},{key:"searchOrderByCode",value:function(){var e=this;if(this.searchCode){var t={code:this.searchCode};this.loading=!0,O(t).then(function(t){e.loading=!1;var a=t.data||{};if(1!==a.ifLoading)if(e.form.lscId===(a.transChannel||{}).id)if((a.warehouse1||{}).id===e.form.warehouseId)if(a.beShip||"7"===(a.status||{}).MEASURE)if(a.beShip||"10"===(a.status||{}).EXAMINE)if(a.beShip||0!==(a.supplierList||[]).length)if(a.beShip||"1"===a.audit)if(a.beShip||!a.ifFrozen){var i=a.fullorderInsufficient||{};if(a.beShip||1===i.insufficientStatus||"1"===a.payMethod&&a.ifPayment||"1"!==a.payMethod&&!a.insufficient)if(e.boolOrder(a)&&(a.warehouse1||{}).id===e.form.warehouseId){var r=0,s=0,n="",o="",l=a.measure;l&&(r=l.totalWeight,s=l.totalVolume,n="KGS",o="CBCM",a.maxVol=parseFloat(e.$volumeConversion(l.maxVolume,o,"CBM",2)),a.maxWei=parseFloat(e.$volumeConversion(l.maxWeight,n,"KGS",2))),a.allVolumeNum=parseFloat(e.$volumeConversion(s,o,"CBM",2)),a.allWeightNum=parseFloat(e.$volumeConversion(r,n,"KGS",2));var c=(a.supplierList||[]).find(function(e){return e.fromCustId===a.supplierId})||{};a.selectSupplier={supplierId:c.fromCustId,supplierName:c.fromCustName,outPrice:c.unitPrice,totalOutPrice:c.totalPrice,priceId:c.priceId},e.selectOrderList.find(function(e){return e.code===a.code})||e.selectOrderList.push(a)}else e.$message.warning("该订单不满足可发货条件(装货仓库、验货完成、计量完成、审核通过、无欠款、信用良好和快递订单号已出)");else e.$message.warning("用户有欠款或信用不足")}else e.$message.warning("订单已冻结");else e.$message.warning("订单未审核");else e.$message.warning("暂无报价");else e.$message.warning("订单未验货");else e.$message.warning("订单暂无计量信息");else e.$message.warning("货物所在不一致");else e.$message.warning("服务不一致");else e.$message.warning("订单已发货")}).catch(function(){e.loading=!1})}else this.$message.warning("请输入原单号")}},{key:"selectOrder",value:function(e,t){e?this.selectOrderList.push(t):this.selectOrderList=this.selectOrderList.filter(function(e){return e.code!==t.code})}},{key:"getWarehouseList",value:function(){var e=this,t={model:{countryId:"CN",custId:"0"},page:1,size:999};this.selectLoading=!0,C(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.warehouseList=a.result||[]}).catch(function(){e.selectLoading=!1,e.warehouseList=[]})}},{key:"reset",value:function(){this.form.warehouseId="",this.form.warehouseName="",this.selectOrderList=[],this.orderList=[],this.pagination={page:1,size:10,total:0},this.orderType="all",this.searchCode="",this.resetForm()}},{key:"resetForm",value:function(){var e=this;this.form.subtypeId="",this.form.subtypeName="",this.form.times=[K()().subtract(30,"day").format("YYYY-MM-DD HH:mm:ss"),K()().format("YYYY-MM-DD HH:mm:ss")],this.form.countryId="",this.form.countryName="",this.form.lscId="",this.form.lscName="",this.$nextTick(function(){var t=e.$refs.form;t.clearValidate()})}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.loadOrder()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.loadOrder()}},{key:"boolOrder",value:function(e){var t=e.fullorderInsufficient||{};return!!e.beShip||!("1"!==e.audit||"7"!==(e.status||{}).MEASURE||"10"!==(e.status||{}).EXAMINE||e.ifFrozen||!(1===t.insufficientStatus||"1"===e.payMethod&&e.ifPayment||"1"!==e.payMethod&&!e.insufficient))}},{key:"loadOrder",value:function(){var e=this,t=this.$refs.form,a=["subtypeId","times","countryId","lscId"],i=[];if(t.validateField(a,function(e){e&&i.push(e)}),this.selectOrderList.length&&(this.selectOrderList=this.selectOrderList.filter(function(t){return(t.lsc||{}).key===e.form.lscId})),!i.length){var r={model:{delivery:this.form.countryId,endTime:"",service:this.form.lscId,startTime:"",type:this.form.subtypeId},page:this.pagination.page,size:this.pagination.size};this.form.times.length&&(r.model.endTime=K()(this.form.times[1]).format("YYYY-MM-DD")+" 23:59:59",r.model.startTime=K()(this.form.times[0]).format("YYYY-MM-DD")+" 00:00:00"),this.orderList=[],this.loading=!0,S(r).then(function(t){e.loading=!1;var a=t.data||{};e.orderList=(a.result||[]).map(function(t){var a=0,i=0,r="",s="",n=t.measure;n&&(a=n.totalWeight,i=n.totalVolume,r="KGS",s="CBCM",t.maxVol=parseFloat(e.$volumeConversion(n.maxVolume,s,"CBM",2)),t.maxWei=parseFloat(e.$volumeConversion(n.maxWeight,r,"KGS",2))),t.allVolumeNum=parseFloat(e.$volumeConversion(i,s,"CBM",2)),t.allWeightNum=parseFloat(e.$volumeConversion(a,r,"KGS",2)),t.isShipment=e.boolOrder(t);var o=e.selectOrderList.find(function(e){return e.code===t.code})||{},l=(t.supplierList||[]).find(function(e){return e.fromCustId===t.supplierId})||{};return t.selectSupplier=o.selectSupplier||{supplierId:l.fromCustId,supplierName:l.fromCustName,outPrice:l.unitPrice,totalOutPrice:l.totalPrice,priceId:l.priceId},t}),e.pagination.total=a.total||0}).catch(function(){e.loading=!1,e.orderList=[],e.pagination.total=0})}}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,w({typeId:"05",subtypeId:this.form.subtypeId}).then(function(t){e.selectLoading=!1,e.countryList=t.data||[]}).catch(function(){e.selectLoading=!1,e.countryList=[]})}},{key:"getPrivatelineList",value:function(){var e=this,t={countryId:this.form.countryId,subtypeId:this.form.subtypeId,outsourcing:"1,2"};this.selectLoading=!0,k(t).then(function(t){e.selectLoading=!1;var a=t.data||[];e.lscList=a}).catch(function(){e.selectLoading=!1,e.lscList=[]})}},{key:"getServiceSubtypeList",value:function(){var e=this,t={typeId:"05"};_(t).then(function(t){e.typeList=t.data||[]}).catch(function(){e.typeList=[]})}},{key:"created",value:function(){this.getServiceSubtypeList()}},{key:"selectOrderCodes",get:function(){return this.selectOrderList.map(function(e){return e.code})}},{key:"selectOrderListInfo",get:function(){return this.selectOrderList.reduce(function(e,t){return e.volume=parseFloat((t.allVolumeNum+e.volume).toFixed(2)),e.weight=parseFloat((t.allWeightNum+e.weight).toFixed(2)),e.packages=t.packages+e.packages,e},{num:this.selectOrderList.length,volume:0,weight:0,packages:0})}},{key:"showList",get:function(){return"all"===this.orderType?this.orderList:this.selectOrderList}}]),t}(p["e"]);U=d["a"]([Object(p["a"])({name:"index",components:{},props:{formType:{type:String,default:"add"},statusList:{type:Array,default:function(){return[]}}}})],U);var H=U,J=H,q=(a("28a7"),a("2877")),X=Object(q["a"])(J,g,y,!1,null,"2f367c58",null),Q=X.exports,Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"two-step"},[a("div",{staticClass:"title"},[e._v("\n    选择供应商\n  ")]),a("div",{staticClass:"form-wrap"},[a("el-form",{ref:"form",attrs:{model:e.form,size:"mini","label-width":"90px"}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"供应商："}},[e._v("\n            "+e._s(((e.selectOrderList[0]||{}).selectSupplier||{}).supplierName)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"装货仓库："}},[e._v("\n            "+e._s(e.firstForm.warehouseName)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"总票数："}},[e._v("\n            "+e._s(e.selectOrderListInfo.num)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"总件数："}},[e._v("\n            "+e._s(e.selectOrderListInfo.packages)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"总重量："}},[e._v("\n            "+e._s(e.selectOrderListInfo.weight)+" KGS\n          ")])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"总体积："}},[e._v("\n            "+e._s(e.selectOrderListInfo.volume)+" CBM\n          ")])],1),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注："}},["view"!==e.formType?a("el-input",{attrs:{type:"textarea",disabled:"view"===e.formType,rows:2,placeholder:"请输入"},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}}):a("div",[e._v("\n              "+e._s(e.form.remarks)+"\n            ")])],1)],1),"edit"===e.formType?a("el-col",{staticStyle:{"text-align":"right","margin-top":"10px"},attrs:{span:24}},[a("div",{staticStyle:{display:"inline-block"}},[a("el-form-item",{attrs:{label:"添加订单","label-width":"120px"}},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"请输入"},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.searchOrderByCode}},[e._v("\n                添加\n              ")])],1)],1)]):e._e()],1),e.orderList.length?a("div",{staticClass:"order-list-warp"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-list",style:{height:"view"===e.formType?"calc(100vh - 410px)":"calc(100vh - 480px)"}},e._l(e.orderList,function(t){return a("div",{key:t.code,staticClass:"order-item"},[a("div",{staticClass:"header-recommend"},[a("span",{staticClass:"recommend-item"},[a("span",[e._v("供应商：")]),a("span",[e._v(e._s((t.selectSupplier||{}).supplierName))])]),a("span",{staticClass:"recommend-item"},[a("span",[e._v("单价：")]),a("span",[e._v("\n                  "+e._s((t.um||{}).currencyId)+" "+e._s((t.selectSupplier||{}).outPrice)+"\n                  "),"0"===t.xtype?a("span",[e._v(" / "+e._s((t.um||{}).umWeight))]):e._e(),"1"===t.xtype?a("span",[e._v(" / "+e._s((t.um||{}).umVolume))]):e._e(),"2"===t.xtype?a("span",[e._v(" 柜型")]):e._e()])]),a("span",{staticClass:"recommend-item"},[a("span",[e._v("总价：")]),a("span",{staticClass:"recommend-price"},[e._v(e._s((t.selectSupplier||{}).totalOutPrice)+" "+e._s((t.um||{}).currencyId))])])]),a("div",{staticStyle:{display:"flex","align-items":"center","padding-right":"10px"}},[a("div",{staticClass:"order-info"},[a("div",{staticStyle:{display:"flex","flex-flow":"row wrap"}},[a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      原单号：\n                    ")]),a("div",{staticClass:"text-info",attrs:{title:t.code}},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:t.code,expression:"item.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(t.code))])]),a("div",[t.beShip?a("span",{staticClass:"btn-tip-red"},[e._v("\n                        特批发货\n                      ")]):e._e(),t.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                        冻结\n                      ")]):e._e(),t.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                        锁舱\n                      ")]):e._e(),"1"!==t.payMethod&&e.formatPay(t)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                        "+e._s(t.ifPayment?"逾期已付款":"逾期未付款")+"\n                      ")]):e._e(),"1"===t.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                        "+e._s(t.ifPayment?"已付款":"未付款")+"\n                      ")]):e._e(),e.formatInsuf(t)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                        信用不足\n                      ")]):e._e()])]),"1"===t.addressType?a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      目的城市：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((t.consignee||{}).city||"--")+"\n                    ")])]):e._e(),"0"===t.addressType?a("div",{staticStyle:{width:"120px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      目的仓：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((t.fbastore||{}).code)+"\n                    ")])]):e._e(),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      服务：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((t.lsc||{}).value||"--")+"\n                    ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      下单仓库：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((t.warehouse||{}).name||"--")+"\n                    ")])]),a("div",{staticStyle:{width:"150px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      货物所在仓：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((t.warehouse1||{}).name||"--")+"\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      总体积：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s(t.allVolumeNum)+" CBM\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      总重量：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s(t.allWeightNum)+" KGS\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      最大重量：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s(t.maxWei)+" KGS\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      最大体积：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s(t.maxVol)+" CBM\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      件数：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s(t.packages)+"\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      计量状态：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((e.statusList.find(function(e){return e.id===t.status["MEASURE"]})||{name:"--"}).name)+"\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      验货状态：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((e.statusList.find(function(e){return e.id===t.status["EXAMINE"]})||{name:"--"}).name)+"\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      报关状态：\n                    ")]),a("div",{staticClass:"text-info"},[e._v("\n                      "+e._s((e.statusList.find(function(e){return e.id===t.status["CUSTOM_DECLARATION"]})||{name:"--"}).name)+"\n                    ")])]),a("div",{staticStyle:{width:"100px",padding:"5px 5px 0 5px"}},[a("div",{staticClass:"text-tip"},[e._v("\n                      快递单号：\n                    ")]),a("div",{staticClass:"text-info"},["0"===t.deliveryWay?a("div",[t.express&&t.express.trackingNos?a("el-popover",{attrs:{title:"快递单号"}},[e._l(t.express.trackingNos.split(","),function(t){return a("p",{key:t},[e._v("\n                            "+e._s(t)+"\n                          ")])}),a("span",{staticStyle:{color:"#2291E6",cursor:"pointer"},attrs:{slot:"reference"},slot:"reference"},[e._v("\n                            已出\n                          ")])],2):a("span",[e._v("\n                          未出\n                        ")])],1):a("div",[e._v("\n                        --\n                      ")])])])])]),"view"!==e.formType?a("el-button",{staticStyle:{color:"#CB1D1D"},attrs:{type:"text",size:"mini"},on:{click:function(a){return e.cancelDelivery(t)}}},[e._v("\n                取消发货\n              ")]):e._e()],1)])}),0),a("div",{staticClass:"total-price"},[a("span",{staticClass:"label"},[e._v("合计：")]),a("span",{staticClass:"value"},[e._v(e._s(e.totalPrice))])])]):a("div",{staticClass:"order-none"},[e._v("\n        暂无订单\n      ")])],1)],1),"view"!==e.formType?a("div",{staticClass:"bottom-btn"},[a("div",[a("el-button",{attrs:{size:"mini"},on:{click:e.reset}},[e._v("\n        清空\n      ")]),"add"===e.formType?a("el-button",{attrs:{size:"mini"},on:{click:e.prevStep}},[e._v("\n        上一步\n      ")]):e._e()],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcEdit","outsourcAdd"],expression:"['outsourcEdit', 'outsourcAdd']"}],attrs:{type:"primary",size:"mini"},on:{click:e.save}},[e._v("\n      保存\n    ")])],1):e._e()])},ee=[],te=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.form={remarks:""},e.searchCode="",e.orderList=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"selectOrderListChange",value:function(e){this.orderList=e}},{key:"searchOrderByCode",value:function(){var e=this;if(this.searchCode){var t={code:this.searchCode};this.loading=!0,O(t).then(function(t){e.loading=!1;var a=t.data||{};if(1!==a.ifLoading)if(e.firstForm.lscId===(a.transChannel||{}).id)if((a.warehouse1||{}).id===e.firstForm.warehouseId)if(a.beShip||"7"===(a.status||{}).MEASURE)if(a.beShip||"10"===(a.status||{}).EXAMINE)if(a.beShip||0!==(a.supplierList||[]).length)if(a.beShip||"1"===a.audit)if(a.beShip||!a.ifFrozen){var i=a.fullorderInsufficient||{};if(a.beShip||1===i.insufficientStatus||"1"===a.payMethod&&a.ifPayment||"1"!==a.payMethod&&!a.insufficient){var r=e.orderList[0];if(e.boolOrder(a)&&(a.warehouse1||{}).id===e.firstForm.warehouseId){var s=0,n=0,o="",l="",c=a.measure;c&&(s=c.totalWeight,n=c.totalVolume,o="KGS",l="CBCM",a.maxVol=parseFloat(e.$volumeConversion(c.maxVolume,l,"CBM",2)),a.maxWei=parseFloat(e.$volumeConversion(c.maxWeight,o,"KGS",2))),a.allVolumeNum=parseFloat(e.$volumeConversion(n,l,"CBM",2)),a.allWeightNum=parseFloat(e.$volumeConversion(s,o,"KGS",2));var u=(a.supplierList||[]).find(function(e){return e.fromCustId===(r.selectSupplier||{}).supplierId})||{};if(!u.priceId)return void e.$message.warning("供应商不一致");a.selectSupplier={supplierId:u.fromCustId,supplierName:u.fromCustName,outPrice:u.unitPrice,totalOutPrice:u.totalPrice,priceId:u.priceId},e.orderList.find(function(e){return e.code===a.code})||e.orderList.push(a)}else e.$message.warning("该订单不满足可发货条件(装货仓库、验货完成、计量完成、审核通过、无欠款、信用良好和快递订单号已出)")}else e.$message.warning("用户有欠款或信用不足")}else e.$message.warning("订单已冻结");else e.$message.warning("订单未审核");else e.$message.warning("暂无报价");else e.$message.warning("订单未验货");else e.$message.warning("订单暂无计量信息");else e.$message.warning("货物所在不一致");else e.$message.warning("服务不一致");else e.$message.warning("订单已发货")}).catch(function(){e.loading=!1})}else this.$message.warning("请输入原单号")}},{key:"boolOrder",value:function(e){var t=e.fullorderInsufficient||{};return!!e.beShip||!("1"!==e.audit||"7"!==(e.status||{}).MEASURE||"10"!==(e.status||{}).EXAMINE||e.ifFrozen||!(1===t.insufficientStatus||"1"===e.payMethod&&e.ifPayment||"1"!==e.payMethod&&!e.insufficient))}},{key:"save",value:function(){if(0!==this.orderList.length){var e=this.orderList[0]||{},t={remarks:this.form.remarks,deliveryId:this.firstForm.countryId,deliveryName:this.firstForm.countryName,orderList:this.orderList.map(function(e){var t=e.selectSupplier||{};return{code:e.code,fullorderId:e.id,price:t.outPrice,quotedId:t.priceId,totalPrice:t.totalOutPrice,xtype:e.xtype,transChannel:e.transChannel}}),serviceId:this.firstForm.lscId,serviceName:this.firstForm.lscName,supplierId:(e.selectSupplier||{}).supplierId,supplierName:(e.selectSupplier||{}).supplierName,type:this.firstForm.subtypeId,warehouseId:this.firstForm.warehouseId,warehouseName:this.firstForm.warehouseName};this.$emit("save",t)}else this.$message.error("订单不能为空")}},{key:"reset",value:function(){this.form={remarks:""},this.searchCode=""}},{key:"prevStep",value:function(){this.$emit("prevStep",this.orderList)}},{key:"cancelDelivery",value:function(e){var t=this;this.$confirm("确认取消原单号 ".concat(e.code," 发货吗？"),"温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.orderList=t.orderList.filter(function(t){return t.code!==e.code})}).catch(function(){return!1})}},{key:"formatPay",value:function(e){var t=e.payTime?K()(e.payTime).unix():"",a=K()().unix(),i=t||a,r=e.cutoffTime?K()(e.cutoffTime).unix():"";return!!r&&r&&r<i}},{key:"formatInsuf",value:function(e){return!!e.insufficient}},{key:"totalPrice",get:function(){var e="",t=this.orderList.reduce(function(t,a){e=(a.um||{}).currencyId;var i=(a.selectSupplier||{}).totalOutPrice||0;return t+=i,t},0);return parseFloat(t.toFixed(2))+" "+e}},{key:"selectOrderListInfo",get:function(){return this.orderList.reduce(function(e,t){return e.volume=parseFloat((t.allVolumeNum+e.volume).toFixed(2)),e.weight=parseFloat((t.allWeightNum+e.weight).toFixed(2)),e.packages=t.packages+e.packages,e},{num:this.orderList.length,volume:0,weight:0,packages:0})}}]),t}(p["e"]);d["a"]([Object(p["f"])("selectOrderList",{immediate:!0,deep:!0})],te.prototype,"selectOrderListChange",null),te=d["a"]([Object(p["a"])({name:"index",components:{},props:{formType:{type:String,default:"add"},firstForm:{type:Object,default:function(){return{}}},selectOrderList:{type:Array,default:function(){return[]}},statusList:{type:Array,default:function(){return[]}}}})],te);var ae=te,ie=ae,re=(a("f0ac"),Object(q["a"])(ie,Z,ee,!1,null,"7c1d0266",null)),se=re.exports;function ne(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function oe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ne(a,!0).forEach(function(t){Object(v["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ne(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var le=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.formType="add",e.loading=!1,e.activeStep=0,e.firstForm={},e.editRow={},e.selectOrderList=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"reset",value:function(){var e=this.$refs.firstStep,t=this.$refs.twoStep;this.firstForm={},this.editRow={},this.selectOrderList=[],this.activeStep=0,e.reset(),t.reset()}},{key:"view",value:function(e){this.reset(),this.formType="view",this.activeStep=1,this.getOrderById(e);var t=this.$refs.twoStep;t.form.remarks=e.remarks}},{key:"edit",value:function(e){this.reset(),this.formType="edit",this.activeStep=1,this.editRow=e,this.getOrderById(e);var t=this.$refs.twoStep;t.form.remarks=e.remarks}},{key:"getOrderById",value:function(e){var t=this;this.loading=!0,F({id:e.id}).then(function(a){t.loading=!1;var i=a.data||[];t.firstForm={subtypeId:e.type,subtypeName:"",times:[],countryId:e.deliveryId,countryName:e.deliveryName,lscId:e.serviceId,lscName:e.serviceName,warehouseId:e.warehouseId,warehouseName:e.warehouseName},t.selectOrderList=i.map(function(a){var i=a.fullOrder||{},r=0,s=0,n="",o="",l=i.measure;return l&&(r=l.totalWeight,s=l.totalVolume,n="KGS",o="CBCM",i.maxVol=parseFloat(t.$volumeConversion(l.maxVolume,o,"CBM")),i.maxWei=parseFloat(t.$volumeConversion(l.maxWeight,n,"KGS"))),i.allVolumeNum=parseFloat(t.$volumeConversion(s,o,"CBM")),i.allWeightNum=parseFloat(t.$volumeConversion(r,n,"KGS")),oe({xtype:a.xtype},i,{selectSupplier:{supplierId:e.supplierId,supplierName:e.supplierName,outPrice:a.price,totalOutPrice:a.totalPrice,priceId:a.quotedId}})})}).catch(function(){t.loading=!1})}},{key:"save",value:function(e){var t=this;"edit"===this.formType?(this.loading=!0,N(oe({},e,{id:this.editRow.id,ifWareHouseOut:this.editRow.ifWareHouseOut})).then(function(){t.loading=!1,t.$message.success("保存成功"),t.$emit("save")}).catch(function(){t.loading=!1})):(this.loading=!0,I(e).then(function(){t.loading=!1,t.$message.success("保存成功"),t.$emit("save")}).catch(function(){t.loading=!1}))}},{key:"prevStep",value:function(e){var t=this.$refs.firstStep;t.selectOrderList=Object(s["a"])(e),t.loadOrder(),this.activeStep=0}},{key:"nextStep",value:function(e){this.firstForm=e.form,this.selectOrderList=e.selectOrderList,this.activeStep=1}},{key:"goBack",value:function(){this.activeStep=0,this.$emit("goBack")}},{key:"add",value:function(){this.reset(),this.formType="add"}}]),t}(p["e"]);le=d["a"]([Object(p["a"])({name:"index",components:{firstStep:Q,twoStep:se},props:{statusList:{type:Array,default:function(){return[]}}}})],le);var ce=le,ue=ce,de=(a("cc74"),Object(q["a"])(ue,f,h,!1,null,"318679d3",null)),pe=de.exports,me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplement-main"},[a("div",{staticClass:"left-menu"},e._l(e.menuList,function(t){return a("div",{directives:[{name:"permission",rawName:"v-permission",value:t.permission,expression:"item.permission"}],key:t.key,staticClass:"left-menu-item",class:{active:t.key===e.activeKey},on:{click:function(a){return e.menuClick(t)}}},[e._v("\n      "+e._s(t.title)+"\n    ")])}),0),a("div",{staticClass:"right-table"},[a("supplement-express",{directives:[{name:"show",rawName:"v-show",value:"1"===e.activeKey,expression:"activeKey === '1'"}],ref:"supplementExpress",on:{goBack:e.goBack}}),a("supplement-metering",{directives:[{name:"show",rawName:"v-show",value:"2"===e.activeKey,expression:"activeKey === '2'"}],ref:"supplementMetering",on:{goBack:e.goBack}})],1)])},fe=[],he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplement-express"},[a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("\n        返回\n      ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcExpressExport"],expression:"['outsourcExpressExport']"}],attrs:{type:"primary",size:"small",disabled:e.loading},on:{click:e.exportData}},[e._v("\n        导出\n      ")]),a("el-upload",{staticStyle:{display:"inline-block","margin-left":"10px"},attrs:{action:"",accept:".xlsx,.xls",multiple:!1,limit:1,"show-file-list":!1,"file-list":e.fileList,"http-request":e.uploadFile}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcExpressImport"],expression:"['outsourcExpressImport']"}],attrs:{type:"primary",size:"small",disabled:e.loading}},[e._v("\n          导入\n        ")])],1)],1)],1),a("div",{staticClass:"tabel-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableDataPage,height:"calc(100vh - 275px)",border:""}},[a("el-table-column",{attrs:{prop:"code",label:"原单号"}}),a("el-table-column",{attrs:{prop:"pkgNo",label:"箱号"}}),a("el-table-column",{attrs:{prop:"identificationNo",label:"主单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",[a("el-input",{attrs:{size:"small"},model:{value:t.row.identificationNoEdit,callback:function(a){e.$set(t.row,"identificationNoEdit",a)},expression:"scope.row.identificationNoEdit"}})],1):a("span",[e._v(e._s(t.row.identificationNo))])]}}])}),a("el-table-column",{attrs:{prop:"trackingNo",label:"子单号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",[a("el-input",{attrs:{size:"small"},model:{value:t.row.trackingNoEdit,callback:function(a){e.$set(t.row,"trackingNoEdit",a)},expression:"scope.row.trackingNoEdit"}})],1):a("span",[e._v(e._s(t.row.trackingNo))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[!t.row.edit&&e.$checkPermission(["outsourcExpressEdit"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("\n            编辑\n          ")]):e._e(),t.row.edit?a("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("\n            取消\n          ")]):e._e(),t.row.edit?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.save(t.row)}}},[e._v("\n            保存\n          ")]):e._e()]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.pagination.page,"page-size":e.pagination.size,layout:"total, prev, pager, next",total:e.pagination.total},on:{"update:currentPage":function(t){return e.$set(e.pagination,"page",t)},"update:current-page":function(t){return e.$set(e.pagination,"page",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},ve=[];function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function ye(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach(function(t){Object(v["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var be=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.fileList=[],e.pagination={page:1,size:20,total:0},e.showRow={},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"cancel",value:function(){this.tableData=this.tableData.map(function(e){return e.edit=!1,e})}},{key:"edit",value:function(e){this.tableData=this.tableData.map(function(t){return t.id===e.id?(t.edit=!0,t.identificationNoEdit=t.identificationNo,t.trackingNoEdit=t.trackingNo):t.edit=!1,t})}},{key:"save",value:function(e){var t=this;if(e.identificationNoEdit){var a=ye({},e);a.identificationNo=e.identificationNoEdit,a.trackingNo=e.trackingNoEdit,this.loading=!0,E([a]).then(function(){t.loading=!1,t.$message.success("保存成功"),t.loadData()}).catch(function(){t.loading=!1})}else this.$message.error("主单号不能为空")}},{key:"uploadFile",value:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("id",this.showRow.id),this.loading=!0,this.fileList=[e.file],D(a).then(function(){t.loading=!1,t.$message.success("导入成功"),t.fileList=[],t.loadData()}).catch(function(){t.loading=!1,t.fileList=[]})}},{key:"exportData",value:function(){var e=this;this.loading=!0,T({id:this.showRow.id}).then(function(t){e.loading=!1,t.text().then(function(a){var i=JSON.parse(a);i.data&&e.$message.error(t.data.msg||"文件下载失败")}).catch(function(){var e=document.createElement("a");document.body.appendChild(e);var a=new Blob([t],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(a);e.href=i,e.download="快递单"+K()().format("YYYY-MM-DD_HH-mm-ss")+".xls",e.click(),document.body.removeChild(e),URL.revokeObjectURL(i)})}).catch(function(t){e.loading=!1,t.data&&t.data.text().then(function(t){try{var a=JSON.parse(t);200!==a.code&&e.$message.error(a.msg||"文件下载失败")}catch(i){return i}})})}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e)}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e)}},{key:"loadData",value:function(){var e=this;this.loading=!0,j({id:this.showRow.id}).then(function(t){e.loading=!1,e.tableData=(t.data||[]).map(function(e){return ye({identificationNoEdit:e.identificationNo,trackingNoEdit:e.trackingNo},e,{edit:!1})}),e.pagination.total=e.tableData.length}).catch(function(){e.loading=!1,e.tableData=[]})}},{key:"goBack",value:function(){this.tableData=[],this.pagination={page:1,size:20,total:0},this.showRow={},this.$emit("goBack")}},{key:"show",value:function(e){this.showRow=e,this.loadData()}},{key:"tableDataPage",get:function(){return this.tableData.slice((this.pagination.page-1)*this.pagination.size,this.pagination.page*this.pagination.size)}}]),t}(p["e"]);be=d["a"]([Object(p["a"])({name:"supplementExpress",components:{}})],be);var we=be,_e=we,ke=(a("9af8"),Object(q["a"])(_e,he,ve,!1,null,"4ddedbac",null)),xe=ke.exports,Le=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"supplement-express"},[a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-button",{attrs:{size:"small"},on:{click:e.goBack}},[e._v("\n        返回\n      ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcMeteringExport"],expression:"['outsourcMeteringExport']"}],attrs:{type:"primary",size:"small",disabled:e.loading},on:{click:e.exportData}},[e._v("\n        导出\n      ")]),a("el-upload",{staticStyle:{display:"inline-block","margin-left":"10px"},attrs:{action:"",accept:".xlsx,.xls",multiple:!1,limit:1,"file-list":e.fileList,"show-file-list":!1,"http-request":e.uploadFile}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["outsourcMeteringImport"],expression:"['outsourcMeteringImport']"}],attrs:{type:"primary",size:"small",disabled:e.loading}},[e._v("\n          导入\n        ")])],1)],1)],1),a("div",{staticClass:"tabel-wrap"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 275px)",border:"","row-class-name":e.rowClassName}},[a("el-table-column",{attrs:{prop:"code",label:"原单号"}}),a("el-table-column",{attrs:{prop:"box",label:"箱号"}}),a("el-table-column",{attrs:{prop:"length",label:"长"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",[a("el-input",{attrs:{size:"small"},model:{value:t.row.lengthEdit,callback:function(a){e.$set(t.row,"lengthEdit",a)},expression:"scope.row.lengthEdit"}})],1):a("span",[e._v(e._s(t.row.length))])]}}])}),a("el-table-column",{attrs:{prop:"wigth",label:"宽"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",[a("el-input",{attrs:{size:"small"},model:{value:t.row.widthEdit,callback:function(a){e.$set(t.row,"widthEdit",a)},expression:"scope.row.widthEdit"}})],1):a("span",[e._v(e._s(t.row.wigth))])]}}])}),a("el-table-column",{attrs:{prop:"height",label:"高"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",[a("el-input",{attrs:{size:"small"},model:{value:t.row.heightEdit,callback:function(a){e.$set(t.row,"heightEdit",a)},expression:"scope.row.heightEdit"}})],1):a("span",[e._v(e._s(t.row.height))])]}}])}),a("el-table-column",{attrs:{prop:"weight",label:"重量"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?a("span",[a("el-input",{attrs:{size:"small"},model:{value:t.row.weightEdit,callback:function(a){e.$set(t.row,"weightEdit",a)},expression:"scope.row.weightEdit"}})],1):a("span",[e._v(e._s(t.row.weight))])]}}])}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit&&!t.row.edit&&e.$checkPermission(["outsourcMeteringEdit"])?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.edit(t.row)}}},[e._v("\n            编辑\n          ")]):e._e(),t.row.isEdit&&t.row.edit?a("el-button",{attrs:{type:"text"},on:{click:e.cancel}},[e._v("\n            取消\n          ")]):e._e(),t.row.isEdit&&t.row.edit?a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.save(t.row)}}},[e._v("\n            保存\n          ")]):e._e()]}}])})],1)],1)],1)},Se=[];function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function Ce(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(a,!0).forEach(function(t){Object(v["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Ie=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.fileList=[],e.pagination={page:1,size:20,total:0},e.showRow={},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"rowClassName",value:function(e){var t=e.row;e.rowIndex;if(!t.isEdit)return"jhtclass"}},{key:"cancel",value:function(){this.tableData=this.tableData.map(function(e){return e.edit=!1,e})}},{key:"edit",value:function(e){this.tableData=this.tableData.map(function(t){return t.box===e.box&&t.isEdit?(t.edit=!0,t.lengthEdit=t.length,t.widthEdit=t.wigth,t.heightEdit=t.height,t.weightEdit=t.weight):t.edit=!1,t})}},{key:"save",value:function(e){var t=this;if(e.lengthEdit)if(e.widthEdit)if(e.heightEdit)if(e.weightEdit){var a=Ce({},e);a.length=e.lengthEdit,a.width=e.widthEdit,a.height=e.heightEdit,a.weight=e.weightEdit,this.loading=!0,M([a]).then(function(){t.loading=!1,t.$message.success("保存成功"),t.loadData()}).catch(function(){t.loading=!1})}else this.$message.error("重量不能为空");else this.$message.error("高不能为空");else this.$message.error("宽不能为空");else this.$message.error("长不能为空")}},{key:"uploadFile",value:function(e){var t=this,a=new FormData;a.append("file",e.file),a.append("id",this.showRow.id),this.loading=!0,this.fileList=[e.file],W(a).then(function(){t.loading=!1,t.$message.success("导入成功"),t.loadData(),t.fileList=[]}).catch(function(){t.loading=!1,t.fileList=[]})}},{key:"exportData",value:function(){var e=this;this.loading=!0,z({id:this.showRow.id}).then(function(t){e.loading=!1,t.text().then(function(a){var i=JSON.parse(a);i.data&&e.$message.error(t.data.msg||"文件下载失败")}).catch(function(){var e=document.createElement("a");document.body.appendChild(e);var a=new Blob([t],{type:"application/vnd.ms-excel"}),i=URL.createObjectURL(a);e.href=i,e.download="计量单"+K()().format("YYYY-MM-DD_HH-mm-ss")+".xls",e.click(),document.body.removeChild(e),URL.revokeObjectURL(i)})}).catch(function(t){e.loading=!1,t.data&&t.data.text().then(function(t){try{var a=JSON.parse(t);200!==a.code&&e.$message.error(a.msg||"文件下载失败")}catch(i){return i}})})}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e)}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e)}},{key:"loadData",value:function(){var e=this;this.loading=!0,P({id:this.showRow.id}).then(function(t){e.loading=!1;var a=t.data||{},i=a.boxItems||[],r=a.outMeterings||[];e.tableData=r.reduce(function(e,t){var a=i.find(function(e){return e.boxCode===t.box});return a&&e.push(Ce({box:a.boxCode,code:a.originalNo},a,{isEdit:!1})),e.push(Ce({lengthEdit:t.length,widthEdit:t.width,wigth:t.width,heightEdit:t.height,weightEdit:t.weight},t,{edit:!1,isEdit:!0})),e},[]),e.pagination.total=e.tableData.length}).catch(function(){e.loading=!1,e.tableData=[]})}},{key:"goBack",value:function(){this.tableData=[],this.pagination={page:1,size:20,total:0},this.showRow={},this.$emit("goBack")}},{key:"show",value:function(e){this.showRow=e,this.loadData()}},{key:"tableDataPage",get:function(){return this.tableData.slice((this.pagination.page-1)*this.pagination.size,this.pagination.page*this.pagination.size)}}]),t}(p["e"]);Ie=d["a"]([Object(p["a"])({name:"supplementMetering",components:{}})],Ie);var Ne=Ie,Fe=Ne,je=(a("76d7"),Object(q["a"])(Fe,Le,Se,!1,null,"3eea840a",null)),Te=je.exports,$e=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.activeKey="",e.menuList=[{title:"快递单数据",key:"1",permission:["outsourcExpress"]},{title:"计量数据",key:"2",permission:["outsourcMetering"]}],e.showRow={},e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"menuClick",value:function(e){this.activeKey=e.key;var t=this.$refs.supplementExpress,a=this.$refs.supplementMetering;switch(e.key){case"1":t.show(this.showRow);break;case"2":a.show(this.showRow);break}}},{key:"show",value:function(e){this.activeKey="1",this.showRow=e;var t=this.$refs.supplementExpress;t.show(e)}},{key:"goBack",value:function(){this.activeKey="",this.showRow={},this.$emit("goBack")}}]),t}(p["e"]);$e=d["a"]([Object(p["a"])({name:"supplementInfo",components:{supplementExpress:xe,supplementMetering:Te}})],$e);var De=$e,Ee=De,Pe=(a("79be"),Object(q["a"])(Ee,me,fe,!1,null,"b97796cc",null)),ze=Pe.exports,We=a("bef3"),Me=function(e){function t(){var e;return Object(n["a"])(this,t),e=Object(l["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.dialogReplenish=!1,e.formLoading=!1,e.pageType="index",e.searchForm={code:"",subtypeId:"",supplierId:"",ifWareHouseOut:""},e.pagination={page:1,size:10,total:0},e.replenishRow={},e.tableData=[],e.subtypeList=[],e.supplierList=[],e.statusList=[],e.replenishData=[],e.selectedData=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"maxVolWeiFormat",value:function(e,t,a){var i=this.$getVolumeUnitByLengthUnit((e.um||{}).umLength),r=(e.um||{}).umWeight,s=(e.measure||{}).maxVolume,n=(e.measure||{}).totalVolume,o=(e.measure||{}).maxWeight,l=(e.measure||{}).totalWeight,c=0;return"vol"===t&&i&&n?c=this.$volumeConversion(n,i,"CBM",3):"maxVol"===t&&i&&s?c=this.$volumeConversion(s,i,"CBM",3):"wei"===t&&r&&l?c=this.$volumeConversion(l,r,"KGS",3):"maxWei"===t&&r&&o&&(c=this.$volumeConversion(o,r,"KGS",3)),(c||"--")+" "+a}},{key:"formatPay",value:function(e){var t=e.payTime?K()(e.payTime).unix():"",a=K()().unix(),i=t||a,r=e.cutoffTime?K()(e.cutoffTime).unix():"";return!!r&&r&&r<i}},{key:"formatInsuf",value:function(e){return!!e.insufficient}},{key:"handleSelected",value:function(e,t){var a=e.find(function(e){return e.id===t.id});a?this.selectedData.push(t):this.selectedData=this.selectedData.filter(function(e){return e.id!==t.id})}},{key:"handleSelectAll",value:function(e){var t=this;e.length?this.selectedData=[].concat(Object(s["a"])(this.selectedData),Object(s["a"])(e)).reduce(function(e,t){return e.find(function(e){return e.id===t.id})||e.push(t),e},[]):this.selectedData=this.selectedData.filter(function(e){return!t.replenishData.find(function(t){return t.id===e.id})})}},{key:"cancelReplenish",value:function(){this.replenishData=[],this.replenishRow={},this.selectedData=[]}},{key:"saveReplenish",value:function(){var e=this;if(0!==this.selectedData.length){var t={fillId:this.replenishRow.id,codeList:this.selectedData,warehouse:{id:this.replenishRow.warehouseId}};this.formLoading=!0,R(t).then(function(){e.formLoading=!1,e.$message.success("补单出库成功"),e.dialogReplenish=!1,e.loadData()}).catch(function(){e.formLoading=!1})}else this.$message.error("请选择需补单出库的订单")}},{key:"getStatusList",value:function(){var e=this;Object(We["c"])().then(function(t){e.statusList=(t.data||[]).map(function(e){return{name:e.name,id:e.key,type:e.type}})}).catch(function(){e.statusList=[]})}},{key:"handleCommand",value:function(e,t){switch(e){case"1":this.toSupplementInfo(t);break;case"2":this.arrangeDelivery(t);break;case"3":this.replenishmentDelivery(t);break;case"export":this.exportData(t);break}}},{key:"exportData",value:function(e){var t=this;this.loading=!0,$({id:e.id}).then(function(e){t.loading=!1,e.text().then(function(a){var i=JSON.parse(a);i.data&&t.$message.error(e.data.msg||"文件下载失败")}).catch(function(){var t=document.createElement("a");document.body.appendChild(t);var a=URL.createObjectURL(e);t.href=a,t.download="外协发货.zip",t.click(),document.body.removeChild(t),URL.revokeObjectURL(a)})}).catch(function(e){t.loading=!1,e.data&&e.data.text().then(function(e){try{var a=JSON.parse(e);200!==a.code&&t.$message.error(a.msg||"文件下载失败")}catch(i){return i}})})}},{key:"replenishmentDelivery",value:function(e){var t=this,a={countryId:e.deliveryId,takeOutId:e.id,type:e.type};this.loading=!0,this.selectedData=[],A(a).then(function(a){t.loading=!1;var i=a.data||[];0!==i.length?(t.replenishRow=e,t.dialogReplenish=!0,t.replenishData=i):t.$message.error("暂无需要补单的订单")}).catch(function(){t.replenishRow={},t.replenishData=[],t.dialogReplenish=!1,t.loading=!1})}},{key:"arrangeDelivery",value:function(e){var t=this,a=this.$createElement;this.$msgbox({title:"提示",message:a("div",null,[a("h3",{style:"margin: 0 0 5px"},"装货仓库：".concat(e.warehouseName)),a("div",null,"请问是否确认安排出库，此操作会给仓库下出库申请单？")]),showCancelButton:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.loading=!0,V({fillId:e.id,warehouse:{id:e.warehouseId}}).then(function(){t.$message.success("出库成功"),t.loading=!1,t.loadData()}).catch(function(){t.loading=!1})}).catch(function(){return!1})}},{key:"toSupplementInfo",value:function(e){var t=this.$refs.supplementInfo;this.pageType="supplement",t.show(e)}},{key:"view",value:function(e){var t=this.$refs.addForm;this.pageType="form",t.view(e)}},{key:"edit",value:function(e){var t=this.$refs.addForm;this.pageType="form",t.edit(e)}},{key:"save",value:function(){this.pageType="index",this.loadData()}},{key:"add",value:function(){var e=this.$refs.addForm;this.pageType="form",e.add()}},{key:"getSupplierList",value:function(){var e=this,t={parentId:0,types:"05",page:1,size:999,subTypes:this.searchForm.subtypeId};this.selectLoading=!0,L(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.supplierList=a.result||[]}).catch(function(){e.selectLoading=!1,e.supplierList=[]})}},{key:"getServiceSubtypeList",value:function(){var e=this,t={typeId:"05"};this.selectLoading=!0,_(t).then(function(t){e.selectLoading=!1,e.subtypeList=t.data||[]}).catch(function(){e.selectLoading=!1,e.subtypeList=[]})}},{key:"handleSizeChange",value:function(e){this.pagination.size=Number(e),this.loadData()}},{key:"handleCurrentChange",value:function(e){this.pagination.page=Number(e),this.loadData()}},{key:"loadData",value:function(e){var t=this;if("0"===this.userInfo.custType||"1"===("2"===this.userInfo.custType&&this.userInfo.custSubtype)){1===e&&(this.pagination.page=1);var a={model:{type:this.searchForm.subtypeId,code:this.searchForm.code,supplierId:this.searchForm.supplierId,ifWareHouseOut:this.searchForm.ifWareHouseOut},page:this.pagination.page,size:this.pagination.size};this.loading=!0,x(a).then(function(e){t.loading=!1;var a=e.data||{};t.tableData=a.result||[],t.pagination.total=a.total||0}).catch(function(){t.loading=!1,t.tableData=[],t.pagination.total=0})}}},{key:"created",value:function(){this.loadData(),this.getStatusList()}},{key:"userInfo",get:function(){return m["a"].info||{}}}]),t}(p["e"]);Me=d["a"]([Object(p["a"])({name:"index",components:{addForm:pe,supplementInfo:ze}})],Me);var Ve=Me,Ae=Ve,Re=(a("76db"),Object(q["a"])(Ae,i,r,!1,null,"0aa8c956",null));t["default"]=Re.exports},"3fc0":function(e,t,a){},"5c38":function(e,t,a){},"6e91":function(e,t,a){},7334:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"index"===e.pageName,expression:"pageName === 'index'"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"订单派送"}}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{attrs:{span:3}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["orderDeliveryAdd"],expression:"['orderDeliveryAdd']"}],staticStyle:{margin:"0 10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addRow}},[e._v("\n              新增\n            ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:21}},[a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"业务类型",filterable:""},on:{change:e.onType},model:{value:e.searchForm.transport,callback:function(t){e.$set(e.searchForm,"transport",t)},expression:"searchForm.transport"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.searchForm.transport,placeholder:"目的国",clearable:"",filterable:"",size:"small"},on:{focus:e.getCountryList,change:e.onTargetCountry},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.searchForm.countryId,placeholder:"提柜仓库",clearable:"",filterable:"",size:"small"},on:{focus:e.getWarehouseList},model:{value:e.searchForm.warehouseId,callback:function(t){e.$set(e.searchForm,"warehouseId",t)},expression:"searchForm.warehouseId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"是否下单",filterable:"",clearable:""},model:{value:e.searchForm.ifOrder,callback:function(t){e.$set(e.searchForm,"ifOrder",t)},expression:"searchForm.ifOrder"}},[a("el-option",{attrs:{label:"是",value:"1"}}),a("el-option",{attrs:{label:"否",value:"0"}})],1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"状态",filterable:"",clearable:""},model:{value:e.searchForm.status,callback:function(t){e.$set(e.searchForm,"status",t)},expression:"searchForm.status"}},e._l(e.carStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"5px"},attrs:{clearable:"","unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"提货起始时间","end-placeholder":"提货截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),a("el-input",{staticClass:"input-with-select",staticStyle:{width:"240px","margin-right":"10px"},attrs:{placeholder:"请输入",size:"small",clearable:""},model:{value:e.searchForm.code,callback:function(t){e.$set(e.searchForm,"code",t)},expression:"searchForm.code"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.searchForm.codeType,callback:function(t){e.$set(e.searchForm,"codeType",t)},expression:"searchForm.codeType"}},[a("el-option",{attrs:{label:"原单号",value:"1"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:"1"===e.searchForm.transport||"2"===e.searchForm.transport,expression:"searchForm.transport === '1' || searchForm.transport === '2'"}],attrs:{label:"柜号",value:"2"}}),a("el-option",{directives:[{name:"show",rawName:"v-show",value:"0"===e.searchForm.transport,expression:"searchForm.transport === '0'"}],attrs:{label:"提单号",value:"3"}})],1)],1),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["orderDeliveryQuery"],expression:"['orderDeliveryQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,border:"",height:"calc(100vh - 300px)"}},[a("el-table-column",{attrs:{formatter:e.formatType,prop:"",label:"业务类型",width:"100"}}),a("el-table-column",{attrs:{prop:"",label:"目的国","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.country||{}).value)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"提货仓库","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.warehouse||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"车型",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.car||{}).value)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"仓库供应商",width:"160","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.warehouse||{}).custName)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"卡车供应商",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.supply||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"total",label:"总票数",width:"100"}}),a("el-table-column",{attrs:{prop:"count",label:"总件数",width:"100"}}),a("el-table-column",{attrs:{prop:"",label:"总体积","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.volume+t.row.volumeUnit)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"总重量","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(t.row.weight+t.row.weightUnit)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"time",label:"提货时间",width:"180"}}),a("el-table-column",{attrs:{prop:"",label:"是否下单","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(1===t.row.ifOrder?"是":"否")+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"",label:"状态","min-width":"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.carStatusList.find(function(e){return e.id===t.row.status})||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["orderDeliveryDetails"],expression:"['orderDeliveryDetails']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.viewRow(t.row)}}},[e._v("\n                查看\n              ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["orderDeliveryEdit"],expression:"['orderDeliveryEdit']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("\n                编辑\n              ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("add-form",{directives:[{name:"show",rawName:"v-show",value:"form"===e.pageName,expression:"pageName === 'form'"}],ref:"addForm",attrs:{"order-status-list":e.orderStatusList},on:{goBack:e.goBack}})],1)])},r=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),n=(a("c5f6"),a("bd86")),o=a("a8db"),l=(a("7f7f"),a("d225")),c=a("b0b4"),u=a("308d"),d=a("6bb5"),p=a("4e2b"),m=a("9ab4"),f=a("60a3"),h=a("9dba"),v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"form-main"},[a("div",{staticClass:"form-header"},[a("el-row",{staticClass:"header-title"},[a("el-col",{attrs:{span:20}},[a("el-steps",{attrs:{simple:"",active:e.activeStep,"finish-status":"wait","process-status":"finish"}},[a("el-step",{attrs:{title:"选择订单"}}),a("el-step",{attrs:{title:"确认订单"}})],1)],1),a("el-col",{staticStyle:{"text-align":"right",padding:"6px"},attrs:{span:4}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"text",size:"mini"},on:{click:e.goBack}},[e._v("\n          返 回\n        ")])],1)],1)],1),a("div",{staticClass:"form-content"},[a("first-step",{directives:[{name:"show",rawName:"v-show",value:0===e.activeStep,expression:"activeStep === 0"}],ref:"firstStep",attrs:{"order-status-list":e.orderStatusList,"form-type":e.formType},on:{nextStep:e.nextStep}}),a("two-step",{directives:[{name:"show",rawName:"v-show",value:1===e.activeStep,expression:"activeStep === 1"}],ref:"twoStep",attrs:{"first-form":e.firstForm,"form-type":e.formType,"order-status-list":e.orderStatusList,"select-list":e.selectList},on:{save:e.save,prevStep:e.prevStep}})],1)])},g=[],y=(a("55dd"),a("7514"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"first-step"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"title"},[e._v("\n      订单筛选\n    ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"90px"}},[a("div",{staticClass:"search-form"},[a("el-row",{style:{"border-bottom":e.expand?"none":"1px solid #DCE0E5"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"业务类型",prop:"subtypeId"}},[a("el-radio-group",{on:{change:e.subtypeChange},model:{value:e.form.subtypeId,callback:function(t){e.$set(e.form,"subtypeId",t)},expression:"form.subtypeId"}},e._l(e.typeList,function(t){return a("el-radio-button",{key:t.id,attrs:{label:t.id}},[e._v("\n                  "+e._s(t.name)+"\n                ")])}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"目的国",prop:"countryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",filterable:"",disabled:!e.form.subtypeId},on:{focus:e.getCountryList,change:e.countryChange},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"省份",prop:"provinceId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.form.countryId,filterable:""},on:{focus:e.getStateByCountry,change:e.provinceChange},model:{value:e.form.provinceId,callback:function(t){e.$set(e.form,"provinceId",t)},expression:"form.provinceId"}},e._l(e.stateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],attrs:{span:6}},[a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.form.provinceId,filterable:""},on:{focus:e.getCityList,change:e.cityChange},model:{value:e.form.cityId,callback:function(t){e.$set(e.form,"cityId",t)},expression:"form.cityId"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:!e.expand,expression:"!expand"}],staticStyle:{"text-align":"right"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.loadData(1)}}},[e._v("\n              查询\n            ")]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("\n              重置\n            ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.expand=!e.expand}}},[e._v("\n              展开\n              "),a("i",{staticClass:"el-icon-arrow-up el-icon--right"})])],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}]},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"目的港",prop:"targetPort"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:!e.form.countryId,filterable:"",multiple:"","collapse-tags":""},on:{change:e.portChange},model:{value:e.form.targetPort,callback:function(t){e.$set(e.form,"targetPort",t)},expression:"form.targetPort"}},e._l(e.portList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"服务",prop:"lscId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",disabled:!e.form.countryId||!e.form.subtypeId,filterable:"",multiple:"","collapse-tags":""},model:{value:e.form.lscId,callback:function(t){e.$set(e.form,"lscId",t)},expression:"form.lscId"}},e._l(e.lscList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.abbr,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"目的仓",prop:"fbaId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:"",multiple:"","collapse-tags":""},model:{value:e.form.fbaId,callback:function(t){e.$set(e.form,"fbaId",t)},expression:"form.fbaId"}},e._l(e.fbaList,function(e){return a("el-option",{key:e.id,attrs:{label:e.code,value:e.id}})}),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"预计到港时间","label-width":"120px",prop:"time"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{clearable:!1,"unlink-panels":"",type:"datetimerange",align:"right",size:"small","value-format":"yyyy-MM-dd HH:mm:ss","range-separator":"~","default-time":["00:00:00","23:59:59"],"start-placeholder":"起始时间","end-placeholder":"截止时间"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1)],1)],1),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"expand"}],staticStyle:{"border-bottom":"1px solid #DCE0E5"}},[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"柜号",prop:"containerNo"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.containerNo,callback:function(t){e.$set(e.form,"containerNo",t)},expression:"form.containerNo"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"货物状态",prop:"status"}},[a("el-checkbox-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.statusList,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v("\n                  "+e._s(t.name)+"\n                ")])}),1)],1)],1),a("el-col",{staticStyle:{"text-align":"right","padding-bottom":"18px"},attrs:{span:6}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.loadData(1)}}},[e._v("\n              查询\n            ")]),a("el-button",{attrs:{size:"small"},on:{click:e.resetForm}},[e._v("\n              重置\n            ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.expand=!e.expand}}},[e._v("\n              收起\n              "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1)],1)],1),a("div",{staticClass:"select-info"},[a("div",[a("span",{staticClass:"title"},[e._v("\n            已筛选订单\n          ")]),a("el-radio-group",{attrs:{size:"small"},model:{value:e.orderType,callback:function(t){e.orderType=t},expression:"orderType"}},[a("el-radio-button",{attrs:{label:"all"}},[e._v("\n              全部\n            ")]),a("el-radio-button",{attrs:{label:"selected"}},[e._v("\n              已选择\n            ")])],1),a("span",{staticStyle:{margin:"0 10px"}},[e._v("\n            "+e._s("已选择："+e.selectInfo.num+"票，"+e.selectInfo.allVolumeNum+" CBM，"+e.selectInfo.allWeightNum+" KGS")+"\n          ")]),a("el-form-item",{staticStyle:{display:"inline-block","margin-left":"30px"},attrs:{label:"提货仓库",prop:"warehouseId"}},[a("el-select",{staticStyle:{width:"250px"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.form.countryId,filterable:""},on:{focus:e.getWarehouseList,change:e.warehouseChange},model:{value:e.form.warehouseId,callback:function(t){e.$set(e.form,"warehouseId",t)},expression:"form.warehouseId"}},e._l(e.warehouseList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),"selected"===e.orderType?a("div",{staticStyle:{"padding-right":"15px"}},[a("el-form-item",{staticStyle:{display:"inline-block"},attrs:{label:"手动添加订单：","label-width":"120px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{disabled:!e.form.warehouseId,type:"text",placeholder:"请输入"},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}})],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:!e.form.warehouseId,size:"small"},on:{click:function(t){return e.loadData(2)}}},[e._v("\n            添加\n          ")])],1):e._e()])]),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-list-wrap"},[e.showList.length?a("el-collapse",{attrs:{accordion:""}},e._l(e.showList,function(t){return a("el-collapse-item",{key:t.key,staticClass:"collapse-position"},[a("template",{slot:"title"},[a("el-row",{staticStyle:{"background-color":"#ededed"}},[a("el-col",{staticStyle:{"padding-left":"30px"},attrs:{span:24}},["all"===e.orderType&&e.form.warehouseId?a("el-checkbox",{staticStyle:{"margin-right":"0"},attrs:{indeterminate:t.indeterminate},on:{change:function(a){return e.selectGroup(a,t)}},model:{value:t.checkAll,callback:function(a){e.$set(t,"checkAll",a)},expression:"item.checkAll"}}):e._e(),a("span",{staticStyle:{"padding-left":"5px"}},[e._v("\n                  "+e._s("0"===t.addressType?"FBA仓库 ["+t.code+"]":"私人地址")+"\n                ")]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总票数："+e._s(t.orderList.length))]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总重量："+e._s(t.allWeightNum)+" KGS")]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总体积："+e._s(t.allVolumeNum)+" CBM")]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总件数："+e._s(t.packages))])],1)],1)],1),e._l(t.orderList,function(i){return a("div",{key:i.id,staticClass:"order-info"},["all"===e.orderType&&e.form.warehouseId&&e.form.warehouseId===(i.takeWarehouse||{}).id?a("div",{staticStyle:{width:"24px"}},[a("el-checkbox",{staticStyle:{"margin-right":"0"},attrs:{disabled:!i.disabled},on:{change:function(a){return e.selectOrder(a,t,i)}},model:{value:i.checkAll,callback:function(t){e.$set(i,"checkAll",t)},expression:"order.checkAll"}})],1):e._e(),a("div",{staticClass:"order-info-item"},[a("div",{staticClass:"info-item code"},[a("div",{staticClass:"label"},[e._v("\n                  原单号：\n                ")]),a("div",{staticClass:"value"},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:i.code,expression:"order.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(i.code))])]),a("div",[i.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),i.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==t.payMethod&&e.formatPay(i)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===t.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),e.formatInsuf(i)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e()])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  柜号：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.containerNo)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  目的城市：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s((i.consignee||{}).city)+"\n                ")])]),a("div",{staticClass:"info-item w200"},[a("div",{staticClass:"label"},[e._v("\n                  服务：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s((i.lsc||{}).value)+"\n                ")])]),a("div",{staticClass:"info-item w200"},[a("div",{staticClass:"label"},[e._v("\n                  拆柜仓库：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s((i.takeWarehouse||{}).name)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  总体积：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.allVolumeNum)+" CBM\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  总重量：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.allWeightNum)+" KGS\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  总件数：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.packages)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  预计到港时间：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.arrivalTime)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  货物状态：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.statusName)+"\n                ")])])]),"selected"===e.orderType?a("div",{staticClass:"info-item",staticStyle:{width:"100px"}},[a("el-button",{staticStyle:{color:"#CB1D1D"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.delSelectOrder(t,i)}}},[e._v("\n                删除\n              ")])],1):e._e()])})],2)}),1):a("div",{staticClass:"order-none"},[a("div",{staticClass:"none-icon"}),a("span",[e._v("暂无数据")])])],1)],1),a("div",{staticClass:"bottom-btn"},[a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("\n      清空\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.nextStep}},[e._v("\n      下一步\n    ")])],1)])}),b=[],w=(a("6762"),a("2fdb"),a("b32d"));function _(e){var t={url:"/auth/custtype/getcountries",method:"get",params:e};return Object(w["a"])(t)}function k(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(w["a"])(t)}function x(e){var t={url:"setting/ports/getPortList",method:"get",params:e};return Object(w["a"])(t)}function L(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:e};return Object(w["a"])(t)}function S(e){var t={url:"/setting/area/getCityByState",method:"get",params:e};return Object(w["a"])(t)}function O(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(w["a"])(t)}function C(e){var t={url:"/wms/warehouse/getWarehouseList",method:"post",data:e};return Object(w["a"])(t)}function I(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(w["a"])(t)}function N(e){var t={url:"/orders/split_sheet/query",method:"post",data:e};return Object(w["a"])(t)}function F(e){var t={url:"/orders/split_sheet/manual_add",method:"post",data:e};return Object(w["a"])(t)}function j(e){var t={url:"/orders/split_sheet/delivery_page",method:"post",data:e};return Object(w["a"])(t)}function T(e){var t={url:"/orders/split_sheet/save_delivery",method:"post",data:e};return Object(w["a"])(t)}function $(e){var t={url:"/orders/split_sheet/get",method:"get",params:e};return Object(w["a"])(t)}function D(e){var t={url:"/auth/supplier/getSupplierList",method:"get",params:e};return Object(w["a"])(t)}function E(e){var t={url:"/setting/vehicletype/getVehicleTypeList",method:"get",params:e};return Object(w["a"])(t)}var P=a("5a0c"),z=a.n(P);function W(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?W(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):W(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var V=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.expand=!1,e.loading=!1,e.selectLoading=!1,e.orderType="all",e.searchCode="",e.form={subtypeId:"",countryId:"",countryName:"",targetPort:[],lscId:[],provinceId:"",cityId:"",fbaId:[],time:[],containerNo:"",status:[],warehouseId:"",warehouseName:"",warehouse:{}},e.rules={subtypeId:{required:!0,message:"请选择业务类型",trigger:"change"},countryId:{required:!0,message:"请选择目的国",trigger:"change"},warehouseId:{required:!0,message:"请选择提货仓库",trigger:"change"}},e.pagination={page:1,size:10,total:0},e.searchOrderParams={},e.typeList=[],e.countryList=[],e.portList=[],e.lscList=[],e.stateList=[],e.cityList=[],e.fbaList=[],e.warehouseList=[],e.orderList=[],e.statusList=[{name:"在途",value:"0",key:"transit"},{name:"已到港",value:"1",key:"arrival"},{name:"报关已放行",value:"2",key:"declare"},{name:"已提柜",value:"3",key:"carry"},{name:"已入仓",value:"4",key:"win"},{name:"已拆柜",value:"5",key:"open"}],e.selectList=[],e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"formatPay",value:function(e){var t=e.payTime?z()(e.payTime).unix():"",a=z()().unix(),i=t||a,r=e.cutoffTime?z()(e.cutoffTime).unix():"";return!!r&&r&&r<i}},{key:"formatInsuf",value:function(e){return!!e.insufficient}},{key:"initByPrevStep",value:function(e){var t=this;this.selectList=e,this.orderList=this.orderList.map(function(e){e.checkAll=!1,e.indeterminate=!1,e.orderList=e.orderList.map(function(e){return e.checkAll=!1,e});var a=t.selectList.find(function(t){return t.key===e.key});if(a){var i=(a.orderList||[]).filter(function(e){return!e.manual});i.length&&(e.orderList=e.orderList.map(function(e){return i.find(function(t){return t.id===e.id})&&(e.checkAll=!0),e}),e.orderList.length===e.orderList.filter(function(e){return e.checkAll}).length?(e.checkAll=!0,e.indeterminate=!1):e.orderList.filter(function(e){return e.checkAll}).length?(e.checkAll=!1,e.indeterminate=!0):(e.checkAll=!1,e.indeterminate=!1))}return e}),this.computedOrderInfo()}},{key:"nextStep",value:function(){if(0!==this.selectList.length)if(this.selectList.length>1)this.$message.warning("订单目的仓或目的城市不一致");else{var e=this.selectList[0]||{orderList:[]};"1"!==e.addressType||1===e.orderList.length?this.$emit("nextStep",{form:Object.assign(this.searchOrderParams,{warehouseId:this.form.warehouseId,warehouseName:this.form.warehouseName,warehouse:this.form.warehouse}),selectList:this.selectList}):this.$message.warning("私人地址仅能选择一个")}else this.$message.warning("请选择订单")}},{key:"reset",value:function(){this.form.warehouseId="",this.form.warehouseName="",this.form.warehouse={},this.searchCode="",this.orderList=[],this.selectList=[],this.resetForm()}},{key:"searchOrder",value:function(e){var t=this;this.searchCode?(this.loading=!0,F(Object.assign(e,{code:this.searchCode})).then(function(e){t.loading=!1;var a=e.data||{},i=a.takeWarehouse||{};if(i.id===t.form.warehouseId)if(a.beShip||"7"===(a.status||{}).MEASURE)if(a.beShip||"10"===(a.status||{}).EXAMINE)if(a.beShip||"1"===a.audit)if(a.beShip||!a.ifFrozen){var r=a.fullorderInsufficient||{};if(a.beShip||1===r.insufficientStatus||"1"===a.payMethod&&a.ifPayment||"1"!==a.payMethod&&!a.insufficient)if(t.boolOrder(a)){var s=a.measure||{};a.disabled=t.boolOrder(a),a.statusName=t.formatStatus(a),a.allVolumeNum=parseFloat(t.$volumeConversion(s.totalVolume||0,"CBCM","CBM",2)),a.allWeightNum=parseFloat(t.$volumeConversion(s.totalWeight||0,"KGS","KGS",2)),a.manual=!0;var n="0"===a.addressType?(a.fbastore||{}).code:(a.consignee||{}).cityCode,o=t.selectList.find(function(e){return e.key===n});o?o.orderList&&o.orderList.length&&!o.orderList.find(function(e){return e.code===a.code})&&o.orderList.push(a):t.selectList.push("0"===a.addressType?{address:a.fbastore||{},allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.fbastore||{}).code,addressType:a.addressType,code:(a.fbastore||{}).code,orderList:[a]}:{address:a.consignee||{},allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.consignee||{}).cityCode,addressType:a.addressType,cityCode:(a.consignee||{}).cityCode,cityName:(a.consignee||{}).city,orderList:[a]}),t.computedOrderInfo()}else t.$message.warning("该订单不满足可发货条件(装货仓库、验货完成、计量完成、审核通过、无欠款、信用良好和快递订单号已出)");else t.$message.warning("用户有欠款或信用不足")}else t.$message.warning("订单已冻结");else t.$message.warning("订单未审核");else t.$message.warning("订单未验货");else t.$message.warning("订单暂无计量信息");else t.$message.warning("拆柜仓库不一致")}).catch(function(){t.loading=!1})):this.$message.warning("请输入原单号")}},{key:"warehouseChange",value:function(){var e=this,t=this.warehouseList.find(function(t){return t.id===e.form.warehouseId})||{};this.form.warehouseName=t.name,this.form.warehouse=t,this.selectList=[],this.orderList=this.orderList.map(function(e){return e.checkAll=!1,e.indeterminate=!1,e.orderList.forEach(function(e){e.checkAll=!1}),e})}},{key:"boolOrder",value:function(e){var t=e.fullorderInsufficient||{};return!!e.beShip||!("1"!==e.audit||"7"!==(e.status||{}).MEASURE||"10"!==(e.status||{}).EXAMINE||e.ifFrozen||!(1===t.insufficientStatus||"1"===e.payMethod&&e.ifPayment||"1"!==e.payMethod&&!e.insufficient))}},{key:"formatStatus",value:function(e){var t=(e.statusList||[]).sort(function(e,t){return z()(t.time).diff(z()(e.time),"second")}).reduce(function(e,t){return e.find(function(e){return e.orderType===t.orderType})||e.push(t),e},[]),a=t[0];return a?(this.orderStatusList.find(function(e){return e.type===a.orderType&&e.id===a.status})||{name:"--"}).name:"--"}},{key:"getWarehouseList",value:function(){var e=this,t={model:{countryId:this.form.countryId,custId:"0"},page:1,size:999};this.selectLoading=!0,C(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.warehouseList=a.result||[]}).catch(function(){e.selectLoading=!1,e.warehouseList=[]})}},{key:"subtypeChange",value:function(){this.form.countryId="",this.countryChange()}},{key:"countryChange",value:function(){var e=this;this.form.countryName="";var t=this.countryList.find(function(t){return t.id===e.form.countryId});t&&(this.form.countryName=t.name),this.form.provinceId="",this.form.warehouseName="",this.form.warehouseId="",this.form.warehouse={},this.portChange(),this.provinceChange(),this.warehouseChange()}},{key:"provinceChange",value:function(){this.form.cityId="",this.cityChange()}},{key:"cityChange",value:function(){this.form.fbaId=[],this.form.targetPort=[],this.orderList=[],this.selectList=[],this.getPortList(),this.getFbastoreList()}},{key:"portChange",value:function(){this.orderList=[],this.selectList=[],this.form.lscId=[],this.getPrivatelineList()}},{key:"getFbastoreList",value:function(){var e=this,t={page:1,size:9999,codeSort:"A",countryId:this.form.countryId,stateId:this.form.provinceId,cityId:this.form.cityId};this.fbaList=[],O(t).then(function(t){var a=t.data||{};e.fbaList=a.result||[]}).catch(function(){e.fbaList=[]})}},{key:"getCityList",value:function(){var e=this,t={stateId:this.form.provinceId};this.selectLoading=!1,S(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.cityList=a.result||[]}).catch(function(){e.selectLoading=!1,e.cityList=[]})}},{key:"getStateByCountry",value:function(){var e=this,t={countryId:this.form.countryId};this.selectLoading=!0,L(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.stateList=a.result||[]}).catch(function(){e.selectLoading=!1,e.stateList=[]})}},{key:"delSelectOrder",value:function(e,t){var a=this.orderList.find(function(t){return t.key===e.key});a.orderList.forEach(function(e){e.id===t.id&&(e.checkAll=!1)}),this.selectList=this.selectList.reduce(function(i,r){return r.key===e.key?(r.orderList=r.orderList.filter(function(e){return e.code!==t.code}),r.orderList.length?(a.checkAll=!1,a.indeterminate=!0,i.push(r)):(a.checkAll=!1,a.indeterminate=!1)):i.push(r),i},[]),this.computedOrderInfo()}},{key:"selectOrder",value:function(e,t,a){var i=this.selectList.find(function(e){return e.key===t.key});if(e)if(i)i.orderList.find(function(e){return e.id===a.id})||i.orderList.push(JSON.parse(JSON.stringify(a))),i.orderList.length===t.orderList.length?(t.checkAll=!0,t.indeterminate=!1):(t.checkAll=!1,t.indeterminate=!0);else{var r=JSON.parse(JSON.stringify(t)),s=M({},r);s.orderList=[JSON.parse(JSON.stringify(a))],this.selectList.push(s),s.orderList.length===t.orderList.length?(t.checkAll=!0,t.indeterminate=!1):(t.checkAll=!1,t.indeterminate=!0)}else this.selectList=this.selectList.reduce(function(e,i){return i.key===t.key?(i.orderList=i.orderList.filter(function(e){return e.code!==a.code}),i.orderList.length?(t.checkAll=!1,t.indeterminate=!0,e.push(i)):(t.checkAll=!1,t.indeterminate=!1)):e.push(i),e},[]);this.orderList=this.orderList.map(function(i){return i.key===t.key&&i.orderList.forEach(function(t){t.id===a.id&&(t.checkAll=e)}),i}),this.computedOrderInfo()}},{key:"selectGroup",value:function(e,t){var a=this;if(e){var i=JSON.parse(JSON.stringify(t));if(i.orderList=t.orderList.filter(function(e){return(e.takeWarehouse||{}).id===a.form.warehouseId&&e.disabled}),i.orderList.length){i.orderList.length===t.orderList.length?(t.checkAll=!0,t.indeterminate=!1):(t.checkAll=!1,t.indeterminate=!0);var r=this.selectList.find(function(e){return e.key===t.key});r?r.orderList=r.orderList.concat(i.orderList).reduce(function(e,t){return e.find(function(e){return e.code===t.code})||e.push(t),e},[]):this.selectList.push(i)}else t.checkAll=!1,t.indeterminate=!1}else t.checkAll=!1,t.indeterminate=!1,this.selectList=this.selectList.reduce(function(e,a){return a.key!==t.key?e.push(a):(a.orderList=a.orderList.filter(function(e){return e.manual}),a.orderList.length&&e.push(a)),e},[]);this.orderList=this.orderList.map(function(i){return i.key===t.key&&i.orderList.forEach(function(t){t.checkAll=!1,(t.takeWarehouse||{}).id===a.form.warehouseId&&t.disabled&&(t.checkAll=e)}),i}),this.computedOrderInfo()}},{key:"computedOrderInfo",value:function(){this.selectList.forEach(function(e){var t=e.orderList.reduce(function(e,t){return e.allVolumeNum=parseFloat((e.allVolumeNum+t.allVolumeNum).toFixed(2)),e.allWeightNum=parseFloat((e.allWeightNum+t.allWeightNum).toFixed(2)),e.packages=e.packages+t.packages,e},{allVolumeNum:0,allWeightNum:0,packages:0});e.allVolumeNum=t.allVolumeNum,e.allWeightNum=t.allWeightNum,e.packages=t.packages})}},{key:"loadData",value:function(e){var t=this,a=this.$refs.form,i=["subtypeId","countryId"],r=[];if(a.validateField(i,function(e){e&&r.push(e)}),!r.length){var s={transport:this.form.subtypeId,targetCountry:this.form.countryId,targetCountryName:this.form.countryName,targetPort:this.form.targetPort,lscId:this.form.lscId,targetProvince:this.form.provinceId,targetCity:this.form.cityId,fbastoreId:this.form.fbaId,containerNo:this.form.containerNo};this.form.time&&this.form.time.length&&(s.startTime=z()(this.form.time[0]).format("YYYY-MM-DD HH:mm:ss"),s.endTime=z()(this.form.time[1]).format("YYYY-MM-DD HH:mm:ss")),this.statusList.filter(function(e){return t.form.status.includes(e.value)}).forEach(function(e){s[e.key]=!0}),2!==e?(this.selectList=[],this.orderList=[],this.form.warehouseId="",this.form.warehouseName="",this.form.warehouse={},this.loading=!0,this.searchOrderParams=s,N(s).then(function(e){t.loading=!1;var a=e.data||[];t.orderList=a.reduce(function(e,a){var i=a.measure||{};if(a.checkAll=!1,a.disabled=t.boolOrder(a),a.statusName=t.formatStatus(a),a.allVolumeNum=parseFloat(t.$volumeConversion(i.totalVolume||0,"CBCM","CBM",2)),a.allWeightNum=parseFloat(t.$volumeConversion(i.totalWeight||0,"KGS","KGS",2)),"0"===a.addressType){var r=e.find(function(e){return e.code===(a.fbastore||{}).code});r?(r.allVolumeNum=parseFloat((r.allVolumeNum+a.allVolumeNum).toFixed(2)),r.allWeightNum=parseFloat((r.allWeightNum+a.allWeightNum).toFixed(2)),r.packages=r.packages+a.packages,r.orderList.push(a)):e.push({address:a.fbastore||{},allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.fbastore||{}).code,indeterminate:!1,checkAll:!1,addressType:a.addressType,code:(a.fbastore||{}).code,orderList:[a]})}if("1"===a.addressType){var s=e.find(function(e){return e.cityCode===(a.consignee||{}).cityCode});s?(s.allVolumeNum=parseFloat((s.allVolumeNum+a.allVolumeNum).toFixed(2)),s.allWeightNum=parseFloat((s.allWeightNum+a.allWeightNum).toFixed(2)),s.packages=s.packages+a.packages,s.orderList.push(a)):e.push({address:a.consignee||{},allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.consignee||{}).cityCode,indeterminate:!1,checkAll:!1,addressType:a.addressType,cityCode:(a.consignee||{}).cityCode,cityName:(a.consignee||{}).city,orderList:[a]})}return e},[])}).catch(function(){t.orderList=[],t.loading=!1})):this.searchOrder(s)}}},{key:"resetForm",value:function(){var e=this;this.searchOrderParams={},this.form=Object.assign({subtypeId:"",countryId:"",countryName:"",targetPort:[],lscId:[],provinceId:"",cityId:"",fbaId:[],time:[],containerNo:"",status:[]},{warehouseId:this.form.warehouseId,warehouseName:this.form.warehouseName,warehouse:this.form.warehouse}),this.$nextTick(function(){var t=e.$refs.form;t.clearValidate()})}},{key:"getPrivatelineList",value:function(){var e=this,t={countryId:this.form.countryId,subtypeId:this.form.subtypeId,destinationId:this.form.targetPort.join(",")};this.lscList=[],I(t).then(function(t){var a=t.data||[];e.lscList=a}).catch(function(){e.lscList=[]})}},{key:"getPortList",value:function(){var e=this,t={page:1,size:9999,type:"",countryId:this.form.countryId,stateId:this.form.provinceId,cityId:this.form.cityId};switch(this.portList=[],this.form.subtypeId){case"0":t.type=0;break;case"1":t.type=1;break;case"2":t.type=2;break;case"3":t.type=4;break}x(t).then(function(t){var a=t.data||{};e.portList=a.result||[]}).catch(function(){e.portList=[]})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,_({typeId:"05",subtypeId:this.form.subtypeId}).then(function(t){e.selectLoading=!1,e.countryList=t.data||[]}).catch(function(){e.selectLoading=!1,e.countryList=[]})}},{key:"getServiceSubtypeList",value:function(){var e=this,t={typeId:"05"};k(t).then(function(t){e.typeList=t.data||[]}).catch(function(){e.typeList=[]})}},{key:"created",value:function(){this.getServiceSubtypeList()}},{key:"showList",get:function(){return"all"===this.orderType?this.orderList:this.selectList}},{key:"selectInfo",get:function(){return this.selectList.reduce(function(e,t){return t.orderList.forEach(function(t){e.allVolumeNum=parseFloat((e.allVolumeNum+t.allVolumeNum).toFixed(2)),e.allWeightNum=parseFloat((e.allWeightNum+t.allWeightNum).toFixed(2))}),e.num=e.num+t.orderList.length,e},{allVolumeNum:0,allWeightNum:0,num:0})}}]),t}(f["e"]);V=m["a"]([Object(f["a"])({name:"firstStep",props:{orderStatusList:{type:Array,default:function(){return[]}},formType:{type:String,default:"add"}}})],V);var A=V,R=A,B=(a("a996"),a("2877")),K=Object(B["a"])(R,y,b,!1,null,"660f8b18",null),Y=K.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"two-step"},[a("div",{staticClass:"form-wrap"},[a("div",{staticClass:"title"},[e._v("\n      选择供应商\n    ")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,size:"small","label-width":"120px"}},[a("el-row",{style:{"margin-bottom":"view"===e.formType?"0":"18px",padding:"0 15px"}},["add"!==e.formType?a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"是否下单："}},[e._v("\n            "+e._s(1===e.ifOrder?"是":"否")+"\n          ")])],1):e._e(),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"提货仓库："}},[e._v("\n            "+e._s(e.firstForm.warehouseName)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"view"===e.formType?"指定供应商：":"指定供应商",prop:"view"===e.formType?"":"supplierId"}},["view"!==e.formType?a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:"view"===e.formType||1===e.ifOrder&&"edit"===e.formType,filterable:""},on:{focus:e.getSupplierList},model:{value:e.form.supplierId,callback:function(t){e.$set(e.form,"supplierId",t)},expression:"form.supplierId"}},e._l(e.supplierList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):a("div",{staticStyle:{width:"100%","white-space":"nowrap",overflow:"hidden","text-overflow":"ellipsis"},attrs:{title:(e.supplierList.find(function(t){return t.id===e.form.supplierId})||{}).name}},[e._v("\n              "+e._s((e.supplierList.find(function(t){return t.id===e.form.supplierId})||{}).name)+"\n            ")])],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"view"===e.formType?"提货时间：":"提货时间",prop:"time"}},["view"!==e.formType?a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",disabled:"view"===e.formType,placeholder:"请选择","default-time":"12:00:00"},model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}}):a("div",[e._v("\n              "+e._s(e.form.time)+"\n            ")])],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"view"===e.formType?"车型选择：":"车型选择",prop:"carType"}},["view"!==e.formType?a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:"view"===e.formType,filterable:""},on:{focus:e.getVehicleTypeList},model:{value:e.form.carType,callback:function(t){e.$set(e.form,"carType",t)},expression:"form.carType"}},e._l(e.vehicleTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):a("div",[e._v("\n              "+e._s((e.vehicleTypeList.find(function(t){return t.id===e.form.carType})||{}).name)+"\n            ")])],1)],1)],1),a("el-row",{staticStyle:{padding:"0 15px"}},["add"!==e.formType?a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"view"===e.formType?"状态：":"状态",prop:"status"}},["view"!==e.formType?a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:"",disabled:"view"===e.formType},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},e._l(e.carStatusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):a("div",[e._v("\n              "+e._s((e.carStatusList.find(function(t){return t.id===e.form.status})||{}).name)+"\n            ")])],1)],1):e._e(),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"总票数："}},[e._v("\n            "+e._s(e.selectInfo.num)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"总件数："}},[e._v("\n            "+e._s(e.selectInfo.packages)+"\n          ")])],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"总重量："}},[e._v("\n            "+e._s(e.selectInfo.allWeightNum)+" KGS\n          ")])],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{label:"总体积："}},[e._v("\n            "+e._s(e.selectInfo.allVolumeNum)+" CBM\n          ")])],1)],1),a("el-row",{style:{"margin-top":"view"===e.formType?"0":"18px",padding:"0 15px"}},[a("el-col",{staticStyle:{"border-bottom":"1px solid rgb(220, 224, 229)","padding-bottom":"10px"},attrs:{span:24}},[a("el-form-item",{attrs:{label:"view"===e.formType?"备注：":"备注"}},["view"!==e.formType?a("el-input",{attrs:{type:"textarea",disabled:"view"===e.formType,rows:2,placeholder:"请输入"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}}):a("div",[e._v("\n              "+e._s(e.form.remark)+"\n            ")])],1)],1)],1),a("div",{staticClass:"select-info"},[a("span",{staticClass:"title"},[e._v("\n          已筛选订单\n        ")]),"view"!==e.formType&&1!==e.ifOrder?a("div",{staticStyle:{display:"flex"}},[a("el-form-item",{attrs:{label:"手动添加订单：","label-width":"120px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{type:"text",placeholder:"请输入"},model:{value:e.searchCode,callback:function(t){e.searchCode=t},expression:"searchCode"}})],1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:e.searchOrder}},[e._v("\n            添加\n          ")])],1):e._e()])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-list-wrap"},[e.orderList.length?a("el-collapse",{attrs:{accordion:""}},e._l(e.orderList,function(t){return a("el-collapse-item",{key:t.key,staticClass:"collapse-position"},[a("template",{slot:"title"},[a("el-row",{staticStyle:{"background-color":"#ededed"}},[a("el-col",{staticStyle:{"padding-left":"30px"},attrs:{span:24}},[a("span",{staticStyle:{"padding-left":"5px"}},[e._v("\n                  "+e._s("0"===t.addressType?"FBA仓库 ["+t.code+"]":"私人地址")+"\n                ")]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总票数："+e._s(t.orderList.length))]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总重量："+e._s(t.allWeightNum)+" KGS")]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总体积："+e._s(t.allVolumeNum)+" CBM")]),a("span",{staticStyle:{padding:"0 20px"}},[e._v("总件数："+e._s(t.packages))])])],1)],1),e._l(t.orderList,function(i){return a("div",{key:i.id,staticClass:"order-info"},[a("div",{staticClass:"order-info-item"},[a("div",{staticClass:"info-item code"},[a("div",{staticClass:"label"},[e._v("\n                  原单号：\n                ")]),a("div",{staticClass:"value"},[a("span",{directives:[{name:"copy",rawName:"v-copy",value:i.code,expression:"order.code"}],staticClass:"copy-icon"}),a("span",[e._v(e._s(i.code))])]),a("div",[i.ifFrozen?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    冻结\n                  ")]):e._e(),i.ifLocked?a("span",{staticClass:"btn-tip-blue"},[e._v("\n                    锁舱\n                  ")]):e._e(),"1"!==t.payMethod&&e.formatPay(i)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.ifPayment?"逾期已付款":"逾期未付款")+"\n                  ")]):e._e(),"1"===t.payMethod?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    "+e._s(t.ifPayment?"已付款":"未付款")+"\n                  ")]):e._e(),e.formatInsuf(i)?a("span",{staticClass:"btn-tip-red"},[e._v("\n                    信用不足\n                  ")]):e._e()])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  柜号：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.containerNo)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  目的城市：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s((i.consignee||{}).city)+"\n                ")])]),a("div",{staticClass:"info-item w200"},[a("div",{staticClass:"label"},[e._v("\n                  服务：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s((i.lsc||{}).value)+"\n                ")])]),a("div",{staticClass:"info-item w200"},[a("div",{staticClass:"label"},[e._v("\n                  拆柜仓库：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s((i.takeWarehouse||{}).name)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  总体积：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.allVolumeNum)+" CBM\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  总重量：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.allWeightNum)+" KGS\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  总件数：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.packages)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  预计到港时间：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.arrivalTime)+"\n                ")])]),a("div",{staticClass:"info-item w150"},[a("div",{staticClass:"label"},[e._v("\n                  货物状态：\n                ")]),a("div",{staticClass:"value"},[e._v("\n                  "+e._s(i.statusName)+"\n                ")])])]),a("div",{staticClass:"info-item",staticStyle:{width:"100px"}},["view"!==e.formType&&1!==e.ifOrder?a("el-button",{staticStyle:{color:"#CB1D1D"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.deleteOrder(t,i)}}},[e._v("\n                删除\n              ")]):e._e()],1)])})],2)}),1):a("div",{staticClass:"order-none"},[a("div",{staticClass:"none-icon"}),a("span",[e._v("暂无数据")])])],1)],1),a("div",{staticClass:"bottom-btn"},[a("div",["add"===e.formType?a("el-button",{attrs:{size:"small"},on:{click:e.reset}},[e._v("\n        清空\n      ")]):e._e(),"add"===e.formType?a("el-button",{attrs:{size:"small"},on:{click:e.prevStep}},[e._v("\n        上一步\n      ")]):e._e()],1),a("div",["add"===e.formType||"edit"===e.formType&&1!==e.ifOrder?a("el-checkbox",{model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n        下单给供应商\n      ")]):e._e(),"view"!==e.formType?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.save}},[e._v("\n        保存\n      ")]):e._e()],1)])])},U=[];function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var q=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.searchCode="",e.checkAll=!1,e.ifOrder="",e.form={status:"",remark:"",supplierId:"",time:"",carType:""},e.rules={supplierId:{required:!0,message:"请选择供应商",trigger:"change"}},e.orderList=[],e.supplierList=[],e.vehicleTypeList=[],e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"selectListChange",value:function(e){var t=[];e.forEach(function(e){e.orderList.length&&t.push(e)}),this.orderList=t,this.computedOrderInfo()}},{key:"setData",value:function(e){this.ifOrder=e.ifOrder,this.checkAll=1===e.ifOrder,this.form=J({},e.form),this.getSupplierList(),this.getVehicleTypeList()}},{key:"prevStep",value:function(){this.$emit("prevStep",this.orderList)}},{key:"computedOrderInfo",value:function(){this.orderList.forEach(function(e){var t=e.orderList.reduce(function(e,t){return e.allVolumeNum=parseFloat((e.allVolumeNum+t.allVolumeNum).toFixed(2)),e.allWeightNum=parseFloat((e.allWeightNum+t.allWeightNum).toFixed(2)),e.packages=e.packages+t.packages,e},{allVolumeNum:0,allWeightNum:0,packages:0});e.allVolumeNum=t.allVolumeNum,e.allWeightNum=t.allWeightNum,e.packages=t.packages})}},{key:"deleteOrder",value:function(e,t){var a=this;this.$confirm("您确认要删除吗？","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){a.orderList=a.orderList.map(function(a){return a.key===e.key&&(a.orderList=a.orderList.filter(function(e){return e.code!==t.code})),a}).filter(function(e){return e.orderList.length})}).catch(function(){return!1})}},{key:"reset",value:function(){var e=this;this.checkAll=!1,this.ifOrder="",this.form={status:"",remark:"",supplierId:"",time:"",carType:""},this.searchCode="",this.$nextTick(function(){var t=e.$refs.form;t.clearValidate()})}},{key:"save",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(!t)return!1;if(0!==e.orderList.length)if(e.orderList.length>1)e.$message.warning("订单目的仓或目的城市不一致");else{var a=e.orderList[0]||{orderList:[]};if("1"!==a.addressType||1===a.orderList.length){var i=e.form,r=i.supplierId,s=i.carType,n=(i.status,Object(o["a"])(i,["supplierId","carType","status"])),l=e.supplierList.find(function(e){return e.id===r})||{},c=e.vehicleTypeList.find(function(e){return e.id===s})||{},u=[],d=[],p=[];e.orderList.map(function(e){e&&e.orderList&&e.orderList.map(function(e){u.push(e.code),d.push(e.containerNo),p.push(e.billNo)})});var m=J({ifOrder:e.checkAll?1:0,flag:a.addressType,consignee:"1"===a.addressType?a.address:{},fbastore:"0"===a.addressType?a.address:{}},n,{car:{key:c.id,value:c.name},codeList:u,containers:d,bills:p,count:e.selectInfo.num,country:{key:e.firstForm.targetCountry,value:e.firstForm.targetCountryName},supply:{id:l.id,name:l.name},deliveryQuery:e.firstForm,total:e.selectInfo.packages,transport:e.firstForm.transport,volume:e.selectInfo.allVolumeNum,volumeUnit:"CBM",warehouse:e.firstForm.warehouse,weight:e.selectInfo.allWeightNum,weightUnit:"KGS"});"edit"===e.formType&&(m.status=e.form.status),e.$emit("save",m)}else e.$message.warning("私人地址仅能选择一个")}else e.$message.error("订单不能为空")})}},{key:"formatPay",value:function(e){var t=e.payTime?z()(e.payTime).unix():"",a=z()().unix(),i=t||a,r=e.cutoffTime?z()(e.cutoffTime).unix():"";return!!r&&r&&r<i}},{key:"formatInsuf",value:function(e){return!!e.insufficient}},{key:"boolOrder",value:function(e){var t=e.fullorderInsufficient||{};return!!e.beShip||!("1"!==e.audit||"7"!==(e.status||{}).MEASURE||"10"!==(e.status||{}).EXAMINE||e.ifFrozen||!(1===t.insufficientStatus||"1"===e.payMethod&&e.ifPayment||"1"!==e.payMethod&&!e.insufficient))}},{key:"searchOrder",value:function(){var e=this;this.searchCode?(this.loading=!0,F(Object.assign(this.firstForm,{code:this.searchCode})).then(function(t){e.loading=!1;var a=t.data||{},i=a.takeWarehouse||{};if(i.id===e.firstForm.warehouseId)if(a.beShip||"7"===(a.status||{}).MEASURE)if(a.beShip||"10"===(a.status||{}).EXAMINE)if(a.beShip||"1"===a.audit)if(a.beShip||!a.ifFrozen){var r=a.fullorderInsufficient||{};if(a.beShip||1===r.insufficientStatus||"1"===a.payMethod&&a.ifPayment||"1"!==a.payMethod&&!a.insufficient)if(e.boolOrder(a)){var s=a.measure||{};a.statusName=e.formatStatus(a),a.disabled=e.boolOrder(a),a.allVolumeNum=parseFloat(e.$volumeConversion(s.totalVolume||0,"CBCM","CBM",2)),a.allWeightNum=parseFloat(e.$volumeConversion(s.totalWeight||0,"KGS","KGS",2)),a.manual=!0;var n="0"===a.addressType?(a.fbastore||{}).code:(a.consignee||{}).cityCode,o=e.orderList.find(function(e){return e.key===n});o?o.orderList&&o.orderList.length&&!o.orderList.find(function(e){return e.code===a.code})&&o.orderList.push(a):e.orderList.push("0"===a.addressType?{allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.fbastore||{}).code,addressType:a.addressType,code:(a.fbastore||{}).code,orderList:[a]}:{allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.consignee||{}).cityCode,addressType:a.addressType,cityCode:(a.consignee||{}).cityCode,cityName:(a.consignee||{}).city,orderList:[a]})}else e.$message.warning("该订单不满足可发货条件(装货仓库、验货完成、计量完成、审核通过、无欠款、信用良好和快递订单号已出)");else e.$message.warning("用户有欠款或信用不足")}else e.$message.warning("订单已冻结");else e.$message.warning("订单未审核");else e.$message.warning("订单未验货");else e.$message.warning("订单暂无计量信息");else e.$message.warning("拆柜仓库不一致")}).catch(function(){e.loading=!1})):this.$message.warning("请输入原单号")}},{key:"formatStatus",value:function(e){var t=(e.statusList||[]).sort(function(e,t){return z()(t.time).diff(z()(e.time),"second")}).reduce(function(e,t){return e.find(function(e){return e.orderType===t.orderType})||e.push(t),e},[]),a=t[0];return a?(this.orderStatusList.find(function(e){return e.type===a.orderType&&e.id===a.status})||{name:"--"}).name:"--"}},{key:"getSupplierList",value:function(){var e=this,t={types:"01",countryId:this.firstForm.targetCountry,page:1,size:999};this.selectLoading=!0,D(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.supplierList=a.result||[]}).catch(function(){e.selectLoading=!1,e.supplierList=[]})}},{key:"getVehicleTypeList",value:function(){var e=this,t={countryId:this.firstForm.targetCountry,page:1,size:999};this.selectLoading=!0,E(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.vehicleTypeList=a.result||[]}).catch(function(){e.selectLoading=!1,e.vehicleTypeList=[]})}},{key:"carStatusList",get:function(){return this.orderStatusList.filter(function(e){return"TRUCK"===e.type})}},{key:"selectInfo",get:function(){return this.orderList.reduce(function(e,t){return t.orderList.forEach(function(t){e.allVolumeNum=parseFloat((e.allVolumeNum+t.allVolumeNum).toFixed(2)),e.allWeightNum=parseFloat((e.allWeightNum+t.allWeightNum).toFixed(2)),e.packages=e.packages+t.packages}),e.num=e.num+t.orderList.length,e},{allVolumeNum:0,allWeightNum:0,num:0,packages:0})}}]),t}(f["e"]);m["a"]([Object(f["f"])("selectList",{immediate:!0,deep:!0})],q.prototype,"selectListChange",null),q=m["a"]([Object(f["a"])({name:"twoStep",components:{},props:{firstForm:{type:Object,default:function(){return{}}},selectList:{type:Array,default:function(){return[]}},orderStatusList:{type:Array,default:function(){return[]}},formType:{type:String,default:"add"}}})],q);var X=q,Q=X,Z=(a("c23b"),Object(B["a"])(Q,G,U,!1,null,"31f9c915",null)),ee=Z.exports;function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ie=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.loading=!1,e.activeStep=0,e.firstForm={},e.selectList=[],e.formType="add",e.editRow={},e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"prevStep",value:function(e){this.activeStep=0;var t=this.$refs.firstStep;t.initByPrevStep(e)}},{key:"goBack",value:function(){this.$emit("goBack")}},{key:"reset",value:function(){var e=this.$refs.firstStep,t=this.$refs.twoStep;this.firstForm={},this.selectList=[],this.editRow={},e.reset(),t.reset()}},{key:"add",value:function(){this.reset(),this.activeStep=0,this.formType="add",this.editRow={}}},{key:"view",value:function(e){this.reset(),this.formType="view",this.editRow={},this.activeStep=1,this.getDeliveryOrderById(e)}},{key:"edit",value:function(e){this.reset(),this.formType="edit",this.editRow=e,this.activeStep=1,this.getDeliveryOrderById(e)}},{key:"getDeliveryOrderById",value:function(e){var t=this,a=this.$refs.twoStep,i={id:e.id};this.loading=!0,$(i).then(function(i){t.loading=!1;var r=i.data||{},s=r.deliveryQuery||{};t.firstForm=Object.assign(ae({},s,{warehouseId:r.warehouse.id,warehouseName:r.warehouse.name,warehouse:r.warehouse}),{targetCountry:(r.country||{}).key,targetCountryName:(r.country||{}).value}),t.selectList=(r.orders||[]).reduce(function(e,a){var i=a.measure||{};if(a.checkAll=!1,a.statusName=t.formatStatus(a),a.allVolumeNum=parseFloat(t.$volumeConversion(i.totalVolume||0,"CBCM","CBM",2)),a.allWeightNum=parseFloat(t.$volumeConversion(i.totalWeight||0,"KGS","KGS",2)),"0"===a.addressType){var r=e.find(function(e){return e.code===(a.fbastore||{}).code});r?(r.allVolumeNum=parseFloat((r.allVolumeNum+a.allVolumeNum).toFixed(2)),r.allWeightNum=parseFloat((r.allWeightNum+a.allWeightNum).toFixed(2)),r.packages=r.packages+a.packages,r.orderList.push(a)):e.push({address:a.fbastore||{},allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.fbastore||{}).code,indeterminate:!1,checkAll:!1,addressType:a.addressType,code:(a.fbastore||{}).code,orderList:[a]})}if("1"===a.addressType){var s=e.find(function(e){return e.cityCode===(a.consignee||{}).cityCode});s?(s.allVolumeNum=parseFloat((s.allVolumeNum+a.allVolumeNum).toFixed(2)),s.allWeightNum=parseFloat((s.allWeightNum+a.allWeightNum).toFixed(2)),s.packages=s.packages+a.packages,s.orderList.push(a)):e.push({address:a.consignee||{},allVolumeNum:a.allVolumeNum,allWeightNum:a.allWeightNum,packages:a.packages,key:(a.consignee||{}).cityCode,indeterminate:!1,checkAll:!1,addressType:a.addressType,cityCode:(a.consignee||{}).cityCode,cityName:(a.consignee||{}).city,orderList:[a]})}return e},[]),a.setData({ifOrder:r.ifOrder,form:{status:e.status,remark:r.remark,supplierId:(r.supply||{}).id,time:r.time,carType:(r.car||{}).key}})}).catch(function(){t.loading=!1})}},{key:"formatStatus",value:function(e){var t=(e.statusList||[]).sort(function(e,t){return z()(t.time).diff(z()(e.time),"second")}).reduce(function(e,t){return e.find(function(e){return e.orderType===t.orderType})||e.push(t),e},[]),a=t[0];return a?(this.orderStatusList.find(function(e){return e.type===a.orderType&&e.id===a.status})||{name:"--"}).name:"--"}},{key:"save",value:function(e){var t=this;this.loading=!0,"edit"===this.formType&&(e.id=this.editRow.id),T(e).then(function(){t.loading=!1,t.$message.success("保存成功"),t.$emit("goBack",1)}).catch(function(e){return t.loading=!1,e})}},{key:"nextStep",value:function(e){this.activeStep=1,this.firstForm=e.form||{},this.selectList=e.selectList||[]}}]),t}(f["e"]);ie=m["a"]([Object(f["a"])({name:"index",components:{firstStep:Y,twoStep:ee},props:{orderStatusList:{type:Array,default:function(){return[]}}}})],ie);var re=ie,se=re,ne=(a("f4e8"),Object(B["a"])(se,v,g,!1,null,"fa1e1cf8",null)),oe=ne.exports,le=a("bef3");function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var de=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.pageName="index",e.loading=!1,e.selectLoading=!1,e.searchForm={ifOrder:"",status:"",transport:"0",orderTime:[],codeType:"1",code:void 0,countryId:void 0,warehouseId:void 0},e.warehouseList=[],e.typeList=[],e.countryList=[],e.tableData=[],e.orderStatusList=[],e.page=1,e.size=10,e.total=0,e}return Object(p["a"])(t,e),Object(c["a"])(t,[{key:"getStatusList",value:function(){var e=this;Object(le["c"])().then(function(t){e.orderStatusList=(t.data||[]).map(function(e){return{name:e.name,id:e.key,type:e.type}})}).catch(function(){e.orderStatusList=[]})}},{key:"addRow",value:function(){var e=this;this.pageName="form",this.$nextTick(function(){var t=e.$refs.addForm;t.add()})}},{key:"viewRow",value:function(e){var t=this;this.pageName="form",this.$nextTick(function(){var a=t.$refs.addForm;a.view(e)})}},{key:"editRow",value:function(e){var t=this;this.pageName="form",this.$nextTick(function(){var a=t.$refs.addForm;a.edit(e)})}},{key:"goBack",value:function(e){this.pageName="index",1===e&&this.queryAll()}},{key:"queryAll",value:function(e){var t=this,a=this.searchForm,i=a.orderTime,r=a.codeType,s=a.code,n=Object(o["a"])(a,["orderTime","codeType","code"]);this.loading=!0,e&&(this.page=e);var l={model:ue({},n,{code:"1"===r?s:void 0,billNo:"3"===r?s:void 0,containerNo:"2"===r?s:void 0,startTime:"",endTime:""}),page:this.page,size:this.size};Array.isArray(i)&&i.length>0&&(l.model.startTime=i[0]+" 00:00:00",l.model.endTime=i[1]+" 23:59:59"),j(l).then(function(e){var a=e.data||{};t.tableData=a.result||[],t.$nextTick(function(){var e=t.$refs.table;e.doLayout()}),t.total=a.total,t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"formatType",value:function(e){return"0"===e.transport?"空运":"1"===e.transport?"海运":"2"===e.transport?"铁路":"4"===e.transport?"卡航":void 0}},{key:"onType",value:function(){this.searchForm.countryId=void 0,this.searchForm.warehouseId=void 0}},{key:"onTargetCountry",value:function(){this.searchForm.warehouseId=void 0}},{key:"getSubtypeList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={typeId:"05"},e.next=3,k(t).then(function(e){a.typeList=e.data||[],a.searchForm.transport=(a.typeList[0]||{}).id}).catch(function(){a.typeList=[]});case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,_({typeId:"05",subtypeId:this.searchForm.transport}).then(function(t){e.countryList=t.data||[],e.selectLoading=!1}).catch(function(){e.selectLoading=!1,e.countryList=[]})}},{key:"getWarehouseList",value:function(){var e=this,t={model:{countryId:this.searchForm.countryId,custId:"0"},page:1,size:999};this.selectLoading=!0,C(t).then(function(t){e.selectLoading=!1;var a=t.data||{};e.warehouseList=a.result||[]}).catch(function(){e.selectLoading=!1,e.warehouseList=[]})}},{key:"created",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,this.getStatusList(),e.prev=2,e.next=5,this.getSubtypeList();case 5:this.queryAll(),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),this.loading=!1;case 11:case"end":return e.stop()}},e,this,[[2,8]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"userInfo",get:function(){return h["a"].info||{}}},{key:"carStatusList",get:function(){return this.orderStatusList.filter(function(e){return"TRUCK"===e.type})}}]),t}(f["e"]);de=m["a"]([Object(f["a"])({name:"index",components:{addForm:oe}})],de);var pe=de,me=pe,fe=Object(B["a"])(me,i,r,!1,null,"7d935ac6",null);t["default"]=fe.exports},"74b9":function(e,t,a){},7664:function(e,t,a){},"76d7":function(e,t,a){"use strict";var i=a("3fc0"),r=a.n(i);r.a},"76db":function(e,t,a){"use strict";var i=a("77b9"),r=a.n(i);r.a},"77b9":function(e,t,a){},"79be":function(e,t,a){"use strict";var i=a("e979"),r=a.n(i);r.a},"9af8":function(e,t,a){"use strict";var i=a("a4df"),r=a.n(i);r.a},a4df:function(e,t,a){},a996:function(e,t,a){"use strict";var i=a("0226"),r=a.n(i);r.a},ac02:function(e,t,a){},c23b:function(e,t,a){"use strict";var i=a("ac02"),r=a.n(i);r.a},cc74:function(e,t,a){"use strict";var i=a("5c38"),r=a.n(i);r.a},da91:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[e.isEditFormShow?e._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.noticeLoading,expression:"noticeLoading"}],staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"整柜发货"}}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{attrs:{span:4}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["fclShipmentAdd"],expression:"['fclShipmentAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addRow}},[e._v("\n              新增\n            ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",placeholder:"业务类型",filterable:"",clearable:""},on:{focus:e.getSubtypeList},model:{value:e.searchForm.type,callback:function(t){e.$set(e.searchForm,"type",t)},expression:"searchForm.type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-date-picker",{staticStyle:{width:"240px","margin-right":"10px"},attrs:{clearable:!1,"unlink-panels":"",type:"daterange",align:"right",size:"small","value-format":"yyyy-MM-dd","range-separator":"~","start-placeholder":"下单起始时间","end-placeholder":"下单截止时间"},model:{value:e.searchForm.orderTime,callback:function(t){e.$set(e.searchForm,"orderTime",t)},expression:"searchForm.orderTime"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["fclShipmentSearch"],expression:"['fclShipmentSearch']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getShipTable(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.noticeData,border:"",height:"calc(100vh - 300px)"}},[a("el-table-column",{attrs:{formatter:e.formatType,prop:"",label:"业务类型",width:"120"}}),a("el-table-column",{attrs:{formatter:e.formatTrans,prop:"",label:"服务类型",width:"120"}}),a("el-table-column",{attrs:{prop:"",label:"订舱服务",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.bsc||{}).name)+"\n            ")]}}],null,!1,667935777)}),a("el-table-column",{attrs:{prop:"",label:"数量",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.containers||[]).length)+"\n            ")]}}],null,!1,1245465116)}),a("el-table-column",{attrs:{label:"运输类型",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s("0"===t.row.type?"航空版":"")+"\n              "+e._s("1"===t.row.type?"柜型":"")+"\n              "+e._s("2"===t.row.type?"柜型":"")+"\n              "+e._s("3"===t.row.type?"车型":"")+"\n               \n              "+e._s((((t.row.containers||[])[0]||{}).containerInfo||{}).containerName)+"\n            ")]}}],null,!1,114141366)}),a("el-table-column",{attrs:{prop:"",label:"服务机构",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.org||{}).value)+"\n            ")]}}],null,!1,4039354117)}),a("el-table-column",{attrs:{prop:"",label:"服务编码",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.bsc||{}).serviceCode)+"\n            ")]}}],null,!1,3076066262)}),a("el-table-column",{attrs:{prop:"",label:"起运港","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.originPort||{}).value)+"\n            ")]}}],null,!1,958286258)}),a("el-table-column",{attrs:{prop:"",label:"目的港","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.targetPort||{}).value)+"\n            ")]}}],null,!1,3016458967)}),a("el-table-column",{attrs:{prop:"",label:"起运国","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.originCountry||{}).value)+"\n            ")]}}],null,!1,2360745763)}),a("el-table-column",{attrs:{prop:"",label:"目的国","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.targetCountry||{}).value)+"\n            ")]}}],null,!1,3254511110)}),a("el-table-column",{attrs:{formatter:e.dispatchFormat,prop:"",label:"派送方式",width:"120"}}),a("el-table-column",{attrs:{prop:"shippingDate",label:"起运日期",width:"180"}}),a("el-table-column",{attrs:{prop:"cutoffDate",label:"截单日期",width:"180"}}),a("el-table-column",{attrs:{prop:"transitTime",label:"运输时间",width:"180"}}),a("el-table-column",{attrs:{prop:"",label:"目的仓代码","min-width":"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((t.row.fbastore||{}).value)+"\n            ")]}}],null,!1,1890360101)}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$checkPermission(["fclShipmentView"])?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.viewRow(t.row)}}},[e._v("\n                查看\n              ")]):e._e(),e.$checkPermission(["fclShipmentEdit"])?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editRow(t.row)}}},[e._v("\n                编辑\n              ")]):e._e()]}}],null,!1,3297249853)})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e.isEditFormShow?a("add-edit-form",{ref:"addEditForm",attrs:{"single-id":e.singleId,"is-str":e.isEditViewAdd},on:{back:e.handleBack}}):e._e()],1)])},r=[],s=(a("c5f6"),a("7f7f"),a("7514"),a("28a5"),a("d225")),n=a("b0b4"),o=a("308d"),l=a("6bb5"),c=a("4e2b"),u=a("9ab4"),d=a("60a3"),p=a("12fe"),m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"app-container"},[a("div",[a("el-row",{staticClass:"header-title"},[a("el-col",{attrs:{span:20}},[a("h3",[e._v("整柜发货")])]),a("el-col",{staticStyle:{"text-align":"right",padding:"6px"},attrs:{span:4}},[a("el-button",{staticStyle:{"font-size":"14px"},attrs:{type:"text",size:"small"},on:{click:e.goBack}},[e._v("\n          返 回\n        ")])],1)],1),a("div",{staticClass:"app-panel"},[a("el-input",{staticStyle:{width:"200px","margin-right":"10px"},attrs:{disabled:!!e.isStr,placeholder:"原单号",size:"small"},model:{value:e.keyCode,callback:function(t){e.keyCode=t},expression:"keyCode"}}),a("el-button",{attrs:{disabled:!!e.isStr,size:"small",type:"primary"},on:{click:e.onSearch}},[e._v("\n        查询\n      ")]),a("div",{staticStyle:{"font-size":"16px","padding-top":"20px"}},[e._v("\n        订单信息\n      ")]),a("div",{staticStyle:{"font-size":"12px","padding-top":"10px"}},[a("span",{staticClass:"form-span"},[e._v("服务："+e._s(e.orderForm.name))]),a("span",{staticClass:"form-span"},[e._v("目的港："+e._s(e.orderForm.destinationName))]),a("span",{staticClass:"form-span"},[e._v("报关方式：\n          "),a("span",{directives:[{name:"show",rawName:"v-show",value:"0"===e.orderForm.customs0,expression:"orderForm.customs0 === '0'"}]},[e._v("普通报关")]),a("span",{directives:[{name:"show",rawName:"v-show",value:"1"===e.orderForm.customs0,expression:"orderForm.customs0 === '1'"}]},[e._v("出口退税")])]),a("span",{staticClass:"form-span"},[e._v("关税："+e._s(e.orderForm.taxes))]),a("span",{staticClass:"form-span"},[e._v("派送方式："+e._s(e.filterDispatch(e.orderForm.deliveryWay)))]),a("span",{staticClass:"form-span"},["0"===e.orderForm.type?a("span",[e._v("航空板：")]):e._e(),"1"===e.orderForm.type?a("span",[e._v("柜型：")]):e._e(),"2"===e.orderForm.type?a("span",[e._v("柜型：")]):e._e(),"4"===e.orderForm.type?a("span",[e._v("车型：")]):e._e(),e._v("\n          "+e._s(e.orderForm.containerName)+"\n        ")]),a("span",{staticClass:"form-span"},[e._v("装柜地址："+e._s(e.orderForm.pickAddressName))])]),a("div",{staticStyle:{"font-size":"12px",padding:"10px 0"}},[a("span",{staticClass:"form-span"},[e._v("总件数："+e._s(e.orderForm.packages))]),a("span",{staticClass:"form-span"},[e._v("总体积："+e._s(e.orderForm.volumes)+" "+e._s(e.orderForm.umVolume))]),a("span",{staticClass:"form-span"},[e._v("总重量："+e._s(e.orderForm.weights)+" "+e._s(e.orderForm.umWeight))]),a("span",{staticClass:"form-span"},[e._v("总货值："+e._s(e.orderForm.value)+" "+e._s(e.orderForm.currencyId))]),a("span",{staticClass:"form-span"},[e._v("联系人："+e._s(e.orderForm.pickContact))]),a("span",{staticClass:"form-span"},[e._v("联系电话："+e._s(e.orderForm.pickTel))])]),a("el-select",{staticStyle:{width:"200px","margin-top":"10px"},attrs:{loading:e.selectLoading,disabled:!e.orderForm.type||!!e.isStr,size:"small",filterable:"",clearable:"",placeholder:"发货计划"},on:{focus:e.getPlanList,change:e.onPlan},model:{value:e.planForm.planId,callback:function(t){e.$set(e.planForm,"planId",t)},expression:"planForm.planId"}},e._l(e.planList,function(e){return a("el-option",{key:e.id,attrs:{label:e.bscName,value:""+e.id}})}),1),a("div",{staticStyle:{"font-size":"12px","padding-top":"10px"}},[a("span",{staticClass:"form-span"},[e._v("业务类型："+e._s(e.filterType(e.planForm.type)))]),a("span",{staticClass:"form-span"},[e._v("服务类型："+e._s(e.filterTrans(e.planForm.transType)))]),a("span",{staticClass:"form-span"},[e._v("订舱服务："+e._s(e.planForm.bscName))]),a("span",{staticClass:"form-span"},["0"===e.planForm.type?a("span",[e._v("航空板：")]):e._e(),"1"===e.planForm.type?a("span",[e._v("柜型：")]):e._e(),"2"===e.planForm.type?a("span",[e._v("柜型：")]):e._e(),"4"===e.planForm.type?a("span",[e._v("车型：")]):e._e(),e._v("\n          "+e._s(e.planForm.containerName)+"\n        ")]),a("span",{staticClass:"form-span"},[e._v("服务机构："+e._s(e.planForm.serviceName))]),a("span",{staticClass:"form-span"},[e._v("服务编码："+e._s(e.planForm.serviceCode))]),a("span",{staticClass:"form-span"},[e._v("目的仓代码："+e._s((e.planForm.fbastore||{}).value))])]),a("div",{staticStyle:{"font-size":"12px",padding:"10px 0"}},[a("span",{staticClass:"form-span"},[e._v("起运港："+e._s((e.planForm.originPort||{}).value))]),a("span",{staticClass:"form-span"},[e._v("目的港："+e._s((e.planForm.targetPort||{}).value))]),a("span",{staticClass:"form-span"},[e._v("起运国："+e._s((e.planForm.originCountry||{}).value))]),a("span",{staticClass:"form-span"},[e._v("目的国："+e._s((e.planForm.targetCountry||{}).value))]),a("span",{staticClass:"form-span"},[e._v("派件方式："+e._s(e.filterDispatch(e.planForm.dispatch)))]),a("span",{staticClass:"form-span"},[e._v("起运日期："+e._s(e.planForm.shippingDate))]),a("span",{staticClass:"form-span"},[e._v("截单日期："+e._s(e.planForm.cutoffDate))]),a("span",{staticClass:"form-span"},[e._v("运输时间："+e._s(e.planForm.transitTime)+"天")])]),a("el-select",{staticStyle:{width:"200px","margin-top":"10px"},attrs:{loading:e.selectLoading,disabled:"v"===e.isStr,placeholder:"拖车供应商",clearable:"",filterable:"",size:"small"},on:{focus:e.getSupplierList},model:{value:e.planForm.custId,callback:function(t){e.$set(e.planForm,"custId",t)},expression:"planForm.custId"}},e._l(e.supplierList,function(e){return a("el-option",{key:e.custId,attrs:{label:e.custName,value:e.custId}})}),1),a("div",{staticStyle:{"text-align":"right","padding-top":"20px"}},["v"!==e.isStr?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleSave}},[e._v("\n          保存\n        ")]):e._e()],1)],1)],1)])},f=[],h=(a("8e6e"),a("bd86")),v=a("a8db"),g=(a("ac6a"),a("456d"),a("96cf"),a("3b8d")),y=a("5a0c"),b=a.n(y);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(h["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function k(){return{name:void 0,destinationId:void 0,destinationName:void 0,customs0:void 0,customs1:void 0,taxes:void 0,deliveryWay:void 0,containerName:void 0,pickAddressName:void 0,pickContact:void 0,pickTel:void 0,weights:void 0,packages:void 0,volumes:void 0,value:void 0,currencyId:void 0,currencyName:void 0,umVolume:void 0,umWeight:void 0,countryToIds:void 0}}function x(){return{planId:void 0,type:void 0,bscId:void 0,bscName:void 0,containerId:void 0,containerName:void 0,dispatch:void 0,shippingDate:void 0,cutoffDate:void 0,transitTime:void 0,serviceName:void 0,serviceId:void 0,supplyId:void 0,fbastore:void 0,serviceCode:void 0,transType:void 0,originPort:void 0,targetPort:void 0,originCountry:void 0,targetCountry:void 0,custId:void 0,custName:void 0}}var L=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.loading=!1,e.selectLoading=!1,e.planList=[],e.supplierList=[],e.planForm=x(),e.orderForm=k(),e.boxForm={volume:void 0,loadLimit:void 0,umWeight:void 0,name:void 0,quantity:void 0,umLength:void 0},e.shipData={},e.soList=[],e.containerList=[],e.bscObj={},e.keyCode="",e.jsonRow={},e.jsonPId=!1,e}return Object(c["a"])(t,e),Object(n["a"])(t,[{key:"filterType",value:function(e){return"0"===e?"空运":"1"===e?"海运":"2"===e?"铁路":"4"===e?"卡航":void 0}},{key:"filterDispatch",value:function(e){var t={0:"快递",1:"卡派",2:"自提",3:"整柜直送",4:"到仓"},a=("".concat(e)||"").split(","),i=[];return a.map(function(e){i.push(t[e])}),i.join(",")}},{key:"filterTrans",value:function(e){if(e){var t="",a=[{id:"0",name:"包板"},{id:"1",name:"散货"},{id:"2",name:"整柜"},{id:"3",name:"拼箱"},{id:"4",name:"整车"},{id:"5",name:"拼箱"}],i=(e||"").split(",");return i.map(function(e){var i=a.find(function(t){return t.id===e})||{};i.name&&(t+=i.name+" ")}),t}}},{key:"onSearch",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.planList=[],this.planForm=x(),this.containerList=[],this.shipData={},this.keyCode){e.next=7;break}return this.orderForm=k(),e.abrupt("return");case 7:return e.next=9,this.getOrderForm();case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getOrderForm",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(p["O"])({code:this.keyCode}).then(function(e){var a=e.data||{};t.shipData=a,t.setOrderForm(),t.loading=!1}).catch(function(e){return t.loading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"setOrderForm",value:function(){var e=JSON.parse(JSON.stringify(this.shipData)),t=e.type,a=e.customs0,i=e.customs1,r=e.taxes,s=e.deliveryWay,n=e.weights,o=e.packages,l=e.volumes,c=e.value,u=(((e.transChannel||{}).targets||[])[0]||{}).countryId;this.orderForm={type:t,name:(e.lscConfig||{}).name,destinationName:(e.lscConfig||{}).destinationName,destinationId:(e.lscConfig||{}).destinationId,customs0:a,customs1:i,taxes:r,deliveryWay:s,containerName:(e.container||{}).name,pickAddressName:(e.supplement||{}).pickAddressName,pickContact:(e.supplement||{}).pickContact,pickTel:(e.supplement||{}).pickTel,weights:n,packages:o,volumes:l,value:c,currencyId:(e.um||{}).currencyId,currencyName:(e.um||{}).currencyName,umVolume:(e.um||{}).umVolume,umWeight:(e.um||{}).umWeight,countryToIds:u}}},{key:"getPlanList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:9999,model:{params:{conveyance:this.orderForm.type,countryToId:this.orderForm.countryToIds,portsToId:this.orderForm.destinationId}}};Object(p["s"])(t).then(function(t){var a=t.data||{},i=a.result||[];e.planList=i.filter(function(e){return 0===e.ifSo&&0===e.status}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getSupplierList",value:function(){var e=this;this.selectLoading=!0;var t={typeId:"06",cas:"S",page:1,size:9999};Object(p["U"])(t).then(function(t){var a=t.data||{};e.supplierList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"onPlan",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(){var t,a,i,r,s,n,o,l,c,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.planList.find(function(e){return u.planForm.planId==="".concat(e.id)})||{},!(Object.keys(t).length<=0)){e.next=6;break}return this.boxForm={},this.planForm=x(),this.containerList=[],e.abrupt("return");case 6:if(this.containerList=[],this.planForm.type=t.type,this.planForm.bscId=t.bscId,this.planForm.bscName=t.bscName,this.planForm.containerId=t.containerId,this.planForm.containerName=t.containerName,this.planForm.dispatch=t.dispatch,this.planForm.shippingDate=b()(t.shipDate).format("YYYY-MM-DD HH:mm:ss"),this.planForm.cutoffDate=b()(t.cutoffDate).format("YYYY-MM-DD HH:mm:ss"),this.planForm.transitTime=t.transTime,this.planForm.serviceName=t.serviceName,this.planForm.serviceId=t.serviceId,this.planForm.supplyId=t.supplyId,this.planForm.fbastore={key:t.fbastoreId,value:t.fbastoreName},this.boxForm.quantity=t.quantity||1,e.prev=21,this.loading=!0,!this.planForm.planId||"4"===this.planForm.type){e.next=28;break}return e.next=26,Object(p["S"])({planId:parseInt(this.planForm.planId,0),type:"0"===this.planForm.type?"1":"0"});case 26:a=e.sent,this.soList=a.data||[];case 28:if(i={},!String(this.planForm.bscId)){e.next=34;break}return e.next=32,Object(p["m"])({id:this.planForm.bscId});case 32:r=e.sent,i=r.data||{};case 34:if(this.bscObj=i,Object.keys(i).length>0&&(this.planForm.serviceCode=i.serviceCode,this.planForm.transType=i.transType,this.planForm.originPort={key:i.portsFromId,value:i.portsFromName},this.planForm.targetPort={key:i.portsToId,value:i.portsToName},this.planForm.originCountry={key:i.countryFromId,value:i.countryFromName},this.planForm.targetCountry={key:i.countryToId,value:i.countryToName}),s=null,n={page:1,size:9999},"0"!==this.planForm.type){e.next=43;break}n.model={},s=p["l"],e.next=53;break;case 43:if("1"!==this.planForm.type&&"2"!==this.planForm.type){e.next=47;break}s=p["n"],e.next=53;break;case 47:if("4"!==this.planForm.type){e.next=51;break}s=p["V"],e.next=53;break;case 51:return this.loading=!1,e.abrupt("return",!1);case 53:return e.next=55,s(n);case 55:o=e.sent,l=(o.data||{}).result||[],c=l.find(function(e){return u.planForm.containerId==="".concat(e.id)})||{},"0"!==this.planForm.type&&Object.keys(c).length>0&&(this.boxForm.volume=c.volume,this.boxForm.umLength=c.umLength,this.boxForm.umVolume=c.umVolume,this.boxForm.containerId=c.id,this.boxForm.containerName=c.name,this.boxForm.loadLimit=c.loadLimit,this.boxForm.umWeight=c.umWeight),this.setTable(),this.loading=!1,e.next=67;break;case 63:return e.prev=63,e.t0=e["catch"](21),this.loading=!1,e.abrupt("return",e.t0);case 67:case"end":return e.stop()}},e,this,[[21,63]])}));function t(){return e.apply(this,arguments)}return t}()},{key:"setTable",value:function(){if(this.boxForm.quantity>0&&this.soList.length>0){var e=0;while(e<this.boxForm.quantity&&e<this.soList.length&&e<1)this.containerList.push({id:"".concat(e),SO:this.soList[e],containerId:this.boxForm.containerId,containerName:this.boxForm.containerName,volume:0,weight:0,maxVolume:this.boxForm.volume,maxWeight:this.boxForm.loadLimit,umLength:this.boxForm.umLength,umWeight:this.boxForm.umWeight,children:[]}),e++;this.containerList[0].children=[this.shipData],this.volumeWeightChange()}else this.containerList=[]}},{key:"volumeWeightChange",value:function(){var e=this;this.containerList.map(function(t,a){t.weight=0,t.volume=0;var i=0,r=0;t.children.map(function(a,s){var n=a.um||{},o=e.$getVolumeUnitByLengthUnit(n.umLength),l=e.$getVolumeUnitByLengthUnit(t.umLength),c=e.$volumeConversion(a.volumes,o,l,3),u=String(c).length,d=String(t.volume).length,p=u>d?u:d,m=c*Math.pow(10,p);i+=parseFloat((m/Math.pow(10,p)).toFixed(3));var f=e.$fomatWeightKey(n.umWeight),h=e.$fomatWeightKey(t.umWeight),v=e.$volumeConversion(a.weights,f,h,3),g=String(v).length,y=String(t.weight).length,b=g>y?u:y,w=v*Math.pow(10,b);r+=parseFloat((w/Math.pow(10,b)).toFixed(3))}),t.volume=Math.round(1e3*i)/1e3,t.weight=Math.round(1e3*r)/1e3})}},{key:"setRow",value:function(){var e=Object(g["a"])(regeneratorRuntime.mark(function e(t){var a,i,r,s,n,o,l,c,u,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,Object(p["P"])({id:t.id});case 4:a=e.sent,i=a.data||{},r=i.deliveryWay,i.mode,i.org,i.draft,s=i.planId,n=i.bsc,o=i.containers,i.fillQueryParm,i.address,i.warehouses,i.truckSupplier,l=Object(v["a"])(i,["deliveryWay","mode","org","draft","planId","bsc","containers","fillQueryParm","address","warehouses","truckSupplier"]),c=((o||[])[0]||{}).orders||[],u=((o||[])[0]||{}).containerInfo||{},d=JSON.parse(JSON.stringify(u)),d.children=c,this.containerList=[d],this.shipData=c[0]||{},this.keyCode=this.shipData.code,this.setOrderForm(),this.jsonRow=JSON.parse(JSON.stringify(i)),this.jsonPId=JSON.parse(JSON.stringify(s)),this.bscObj=JSON.parse(JSON.stringify(n)),this.planForm=_({},l,{planId:s,dispatch:r,transType:(n||{}).transType,bscName:(n||{}).name,serviceCode:(n||{}).serviceCode,containerName:(((i.containers||[])[0]||{}).containerInfo||{}).containerName,serviceId:(i.org||{}).key,serviceName:(i.org||{}).value,custId:(i.truckSupplier||{}).key,custName:(i.truckSupplier||{}).value}),this.getPlanList(),this.getSupplierList(),this.loading=!1,e.next=27;break;case 24:e.prev=24,e.t0=e["catch"](0),this.loading=!1;case 27:case"end":return e.stop()}},e,this,[[0,24]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleSave",value:function(e){var t=this;if(this.orderForm.type)if(this.planForm.planId)if(this.planForm.custId)if(this.containerList.length<=0)this.$message.error("暂无so号或航空单号");else{var a=this.isStr,i={};if("v"===a&&this.jsonPId===this.planForm.planId)i=this.jsonRow;else{var r=this.planForm,s=r.dispatch,n=r.custId,o=r.custName,l=r.serviceId,c=r.serviceName,u=Object(v["a"])(r,["dispatch","custId","custName","serviceId","serviceName"]),d=this.containerList.map(function(e){e.children;var t=Object(v["a"])(e,["children"]);return{containerInfo:_({},t),orders:e.children}});i=_({deliveryWay:s,mode:"2",bsc:this.bscObj,org:{key:l,value:c},draft:!1,containers:d,fillQueryParm:{},address:{},warehouses:[],truckSupplier:{key:n,value:o}},u)}this.loading=!0,Object(p["db"])(i).then(function(e){t.loading=!1,t.$message({type:"success",message:"保存成功"}),t.goBack()}).catch(function(e){return t.loading=!1,e})}else this.$message.error("请选择拖车供应商");else this.$message.error("请选择发货计划");else this.$message.error("请选择原单号")}},{key:"goBack",value:function(){this.keyCode="",this.planForm=x(),this.orderForm=k(),this.$emit("back")}}]),t}(d["e"]);L=u["a"]([Object(d["a"])({name:"",components:{},props:{singleId:{type:String,default:""},isStr:{type:String,default:""}}})],L);var S=L,O=S,C=(a("0fd8"),a("2877")),I=Object(C["a"])(O,m,f,!1,null,"30e98874",null),N=I.exports,F=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(o["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.noticeLoading=!1,e.selectLoading=!1,e.isEditFormShow=!1,e.isEditViewAdd="",e.noticeData=[],e.typeList=[],e.searchForm={type:void 0,orderTime:[]},e.singleId="",e.page=1,e.size=10,e.total=0,e}return Object(c["a"])(t,e),Object(n["a"])(t,[{key:"dispatchFormat",value:function(e){var t={0:"快递",1:"卡派",2:"自提",3:"整柜直送"},a=("".concat(e.deliveryWay)||"").split(","),i=[];return a.map(function(e){i.push(t[e])}),i.join(",")}},{key:"formatType",value:function(e){return"0"===e.type?"空运":"1"===e.type?"海运":"2"===e.type?"铁路":"4"===e.type?"卡航":void 0}},{key:"formatTrans",value:function(e){var t=(e.bsc||{}).transType;if(t){var a="",i=[{id:"0",name:"包板"},{id:"1",name:"散货"},{id:"2",name:"整柜"},{id:"3",name:"拼箱"},{id:"4",name:"整车"},{id:"5",name:"拼箱"}],r=(t||"").split(",");return r.map(function(e){var t=i.find(function(t){return t.id===e})||{};t.name&&(a+=t.name+" ")}),a}}},{key:"handleBack",value:function(){this.isEditFormShow=!1,this.isEditViewAdd="",this.singleId="",this.getShipTable()}},{key:"viewRow",value:function(e){var t=this;this.isEditFormShow=!0,this.isEditViewAdd="v";var a=e.id;this.singleId=a,this.$nextTick(function(){var a=t.$refs.addEditForm;a.setRow(e)})}},{key:"editRow",value:function(e){var t=this;this.isEditFormShow=!0,this.isEditViewAdd="e";var a=e.id;this.singleId=a,this.$nextTick(function(){var a=t.$refs.addEditForm;a.setRow(e)})}},{key:"addRow",value:function(){this.isEditFormShow=!0,this.isEditViewAdd=""}},{key:"getSubtypeList",value:function(){var e=this;this.selectLoading=!0;var t={typeId:"05"};Object(p["M"])(t).then(function(t){var a=t.data||[];e.typeList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.getShipTable()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.getShipTable()}},{key:"getShipTable",value:function(e){var t=this,a=this.searchForm.orderTime;this.noticeLoading=!0,e&&(this.page=e);var i={model:{type:this.searchForm.type,mode:"2",startTime:"",endTime:""},page:this.page,size:this.size};Array.isArray(a)&&a.length>0&&(i.model.startTime=a[0]+" 00:00:00",i.model.endTime=a[1]+" 23:59:59"),Object(p["Q"])(i).then(function(e){t.noticeLoading=!1;var a=e.data||{};t.noticeData=a.result||[],t.total=a.total}).catch(function(e){return t.noticeLoading=!1,e})}},{key:"created",value:function(){this.searchForm.orderTime=[b()().subtract(30,"d").format("YYYY-MM-DD"),b()().format("YYYY-MM-DD")],this.getShipTable()}}]),t}(d["e"]);F=u["a"]([Object(d["a"])({name:"",components:{addEditForm:N},props:{}})],F);var j=F,T=j,$=(a("2a31"),Object(C["a"])(T,i,r,!1,null,"1b69e63c",null));t["default"]=$.exports},e979:function(e,t,a){},f0ac:function(e,t,a){"use strict";var i=a("f75b"),r=a.n(i);r.a},f4e8:function(e,t,a){"use strict";var i=a("6e91"),r=a.n(i);r.a},f75b:function(e,t,a){}}]);