(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customs-clearance-services"],{"16d8":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:e.id}})},r=[],a=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),s=n("d225"),o=n("b0b4"),c=n("308d"),l=n("6bb5"),u=n("4e2b"),d=n("9ab4"),m=(n("a7be"),n("44f8"),n("a6e0"),n("60a3")),p={previewStyle:"vertical",usageStatistics:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]},f=n("547e"),h=n.n(f);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(a["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var v=function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)},y=function(e){function t(){return Object(s["a"])(this,t),Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments))}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"onValueChange",value:function(e,t){this.markdownEditor&&e!==t&&e!==this.markdownEditor.getValue()&&this.markdownEditor.setValue(e)}},{key:"onLanguageChange",value:function(){this.destroyEditor(),this.initEditor()}},{key:"onHeightChange",value:function(e){this.markdownEditor&&this.markdownEditor.height(e)}},{key:"onModeChange",value:function(e){this.markdownEditor&&this.markdownEditor.changeMode(e)}},{key:"mounted",value:function(){this.initEditor()}},{key:"destroyed",value:function(){this.destroyEditor()}},{key:"initEditor",value:function(){var e=this,t=document.getElementById(this.id);t&&(this.markdownEditor=new h.a(b({el:t},this.editorOptions)),this.value&&this.markdownEditor.setValue(this.value),this.markdownEditor.on("change",function(){e.$emit("input",e.markdownEditor.getValue())}))}},{key:"destroyEditor",value:function(){this.markdownEditor&&(this.markdownEditor.off("change"),this.markdownEditor.remove(),this.markdownEditor=void 0)}},{key:"focus",value:function(){this.markdownEditor&&this.markdownEditor.focus()}},{key:"setValue",value:function(e){this.markdownEditor&&this.markdownEditor.setValue(e)}},{key:"getValue",value:function(){return this.markdownEditor?this.markdownEditor.getValue():""}},{key:"setHtml",value:function(e){this.markdownEditor&&this.markdownEditor.setHtml(e)}},{key:"getHtml",value:function(){return this.markdownEditor?this.markdownEditor.getHtml():""}},{key:"editorOptions",get:function(){var e=Object.assign({},p,this.options);return e.initialEditType=this.mode,e.height=this.height,e.language=this.language,e}}]),t}(m["e"]);d["a"]([Object(m["c"])({required:!0})],y.prototype,"value",void 0),d["a"]([Object(m["c"])({default:v})],y.prototype,"id",void 0),d["a"]([Object(m["c"])({default:function(){return p}})],y.prototype,"options",void 0),d["a"]([Object(m["c"])({default:"markdown"})],y.prototype,"mode",void 0),d["a"]([Object(m["c"])({default:"300px"})],y.prototype,"height",void 0),d["a"]([Object(m["c"])({default:"en_US"})],y.prototype,"language",void 0),d["a"]([Object(m["f"])("value")],y.prototype,"onValueChange",null),d["a"]([Object(m["f"])("language")],y.prototype,"onLanguageChange",null),d["a"]([Object(m["f"])("height")],y.prototype,"onHeightChange",null),d["a"]([Object(m["f"])("mode")],y.prototype,"onModeChange",null),y=d["a"]([Object(m["a"])({name:"MarkdownEditor"})],y);var k=y,w=k,C=n("2877"),O=Object(C["a"])(w,i,r,!1,null,null,null);t["a"]=O.exports},2094:function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"o",function(){return a}),n.d(t,"k",function(){return s}),n.d(t,"a",function(){return o}),n.d(t,"l",function(){return c}),n.d(t,"m",function(){return l}),n.d(t,"g",function(){return u}),n.d(t,"f",function(){return d}),n.d(t,"i",function(){return m}),n.d(t,"b",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"j",function(){return h}),n.d(t,"p",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"n",function(){return v}),n.d(t,"h",function(){return y});var i=n("b32d");function r(e){var t={url:"/cfg/csc/getCscList",method:"get",params:e};return Object(i["a"])(t)}function a(e){var t={url:"/cfg/csc/saveCsc",method:"post",data:e};return Object(i["a"])(t)}function s(e){var t={url:"/cfg/csc/changeStatus",method:"post",params:e};return Object(i["a"])(t)}function o(e){var t={url:"/cfg/csc/deleteCsc",method:"delete",params:e};return Object(i["a"])(t)}function c(e){var t={url:"/cfg/csc/getAgentList",method:"get",params:e};return Object(i["a"])(t)}function l(e){var t={url:"/cfg/csc/saveAgent",method:"post",data:e};return Object(i["a"])(t)}function u(e){var t={url:"/auth/custtype/getCustTypeList",method:"get",params:e};return Object(i["a"])(t)}function d(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(i["a"])(e)}function m(e){var t={url:"/cfg/type/getServiceSubtypeList",method:"get",params:e};return Object(i["a"])(t)}function p(e){var t={url:"/setting/currency/getCurrencyList",method:"get",params:e};return Object(i["a"])(t)}function f(e){var t={url:"/finance/costitem/getCostitemList",method:"get",params:e};return Object(i["a"])(t)}function h(e){var t={url:"/cfg/csc/getCscCostitem",method:"get",params:e};return Object(i["a"])(t)}function g(e){var t={url:"/cfg/csc/saveCscCostitem",method:"post",data:e};return Object(i["a"])(t)}function b(e){var t={url:"/setting/org/getOrgList",method:"get",params:e};return Object(i["a"])(t)}function v(e){var t={url:"/cfg/csc/save_customs",method:"post",data:e};return Object(i["a"])(t)}function y(e){var t={url:"/cfg/csc/find_customs",method:"post",data:e};return Object(i["a"])(t)}},"346d":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[n("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[n("div",{staticClass:"app-container"},[n("head-info",{directives:[{name:"show",rawName:"v-show",value:!e.isCustomsEditFormShow,expression:"!isCustomsEditFormShow"}],attrs:{info:"",title:"报关服务"}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCustomsEditFormShow,expression:"!isCustomsEditFormShow"}],staticClass:"app-panel"},[n("el-row",[n("el-col",{attrs:{span:4}},[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsClearanceAdd"],expression:"['customsClearanceAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addRow}},[e._v("\n              新增服务\n            ")])],1),n("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},[n("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{placeholder:"所在国家",size:"small",filterable:"",clearable:""},model:{value:e.selectValue.countryId,callback:function(t){e.$set(e.selectValue,"countryId",t)},expression:"selectValue.countryId"}},e._l(e.countryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),n("el-select",{staticStyle:{width:"140px","margin-right":"5px"},attrs:{size:"small",clearable:"",placeholder:"服务类型"},model:{value:e.selectValue.subtypeId,callback:function(t){e.$set(e.selectValue,"subtypeId",t)},expression:"selectValue.subtypeId"}},e._l(e.subTypeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),n("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入内容"},model:{value:e.selectValue.keyword,callback:function(t){e.$set(e.selectValue,"keyword",t)},expression:"selectValue.keyword"}},[n("el-select",{staticStyle:{width:"110px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.selectType,callback:function(t){e.selectType=t},expression:"selectType"}},[n("el-option",{attrs:{label:"服务编码",value:"1"}}),n("el-option",{attrs:{label:"服务名称",value:"2"}})],1)],1),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsClearanceQueryPage"],expression:"['customsClearanceQueryPage']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[n("el-table-column",{attrs:{fixed:"left",prop:"name","min-width":"180",label:"服务名称"}}),n("el-table-column",{attrs:{fixed:"left",prop:"csId","min-width":"180",label:"服务编码"}}),n("el-table-column",{attrs:{prop:"abbr","min-width":"160",label:"服务简称"}}),n("el-table-column",{attrs:{prop:"subtypeName",width:"120",label:"服务类型"}}),n("el-table-column",{attrs:{label:"关联成本项目",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[n("strong",[t.row.costitemConfiged?n("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):n("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),n("el-button",{attrs:{disabled:!e.$checkPermission(["customsClearanceAssociated"]),type:"text"},on:{click:function(n){return e.associatedProject(t.row)}}},[e._v("\n                关联成本项目\n              ")])],1)}}])}),n("el-table-column",{attrs:{label:"关联海关",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[n("strong",[t.row.customsConfiged?n("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):n("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")])])]),n("el-button",{attrs:{disabled:!e.$checkPermission(["customsClearanceTransfer"]),type:"text"},on:{click:function(n){return e.showTransferModal(t.row)}}},[e._v("\n                关联海关\n              ")])],1)}}])}),n("el-table-column",{attrs:{width:"130",label:"关联代理商"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("el-button",{attrs:{disabled:!e.$checkPermission(["customsClearanceAgent"]),type:"text"},on:{click:function(n){return e.associatedAgent(t.row)}}},[e._v("\n                关联代理商\n              ")])],1)}}])}),n("el-table-column",{attrs:{prop:"createTime",label:"添加时间",width:"180"}}),n("el-table-column",{attrs:{fixed:"right",width:"130",label:"启用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{staticClass:"switchStyle",attrs:{disabled:!e.$checkPermission(["customsClearanceEnable"]),value:t.row.status,"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0"},on:{input:function(n){return e.onStatus(t.row,n)}}})]}}])}),n("el-table-column",{attrs:{fixed:"right",width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsClearanceCopy"],expression:"['customsClearanceCopy']"}],attrs:{type:"text"},on:{click:function(n){return e.copyRow(t.row)}}},[e._v("\n                复制\n              ")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsClearanceEdit"],expression:"['customsClearanceEdit']"}],attrs:{type:"text"},on:{click:function(n){return e.editRow(t.row)}}},[e._v("\n                编辑\n              ")]),n("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customsClearanceDelete"],expression:"['customsClearanceDelete']"}],attrs:{type:"text"},on:{click:function(n){return e.deleteRow(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),n("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),n("el-dialog",{attrs:{title:"关联代理商【"+e.currentServiceName+"】",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.agentLoading,expression:"agentLoading"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["选择关联代理商","已关联代理商"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.agentList},model:{value:e.selectAgents,callback:function(t){e.selectAgents=t},expression:"selectAgents"}}),n("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n              取 消\n            ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.setAgentConfirm}},[e._v("\n              确 定\n            ")])],1)],1)]),n("el-dialog",{attrs:{title:"关联成本项目【"+e.title+"】",visible:e.isCostItemShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isCostItemShow=t},close:e.cancelCostItem}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.costLoading,expression:"costLoading"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["成本项目","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.costItemList},model:{value:e.costItemOption,callback:function(t){e.costItemOption=t},expression:"costItemOption"}}),n("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.cancelCostItem}},[e._v("\n              取 消\n            ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCostItem}},[e._v("\n              确 定\n            ")])],1)],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isCustomsEditFormShow,expression:"isCustomsEditFormShow"}]},[n("add-edit-form",{ref:"editForm",attrs:{"is-edit":e.isEdit,"is-copy":e.isCopy,"sub-type-data":e.subTypeList,"country-data":e.countryList},on:{saveConfirm:e.saveConfirm,closeForm:e.closeForm}})],1)],1)]),n("transfer-modal",{ref:"transferModal"})],1)},r=[],a=n("768b"),s=(n("96cf"),n("3b8d")),o=(n("c5f6"),n("6762"),n("2fdb"),n("a481"),n("5df3"),n("7f7f"),n("7514"),n("ac6a"),n("d225")),c=n("b0b4"),l=n("308d"),u=n("6bb5"),d=n("4e2b"),m=n("9ab4"),p=n("60a3"),f=n("9dba"),h=n("ac1a"),g=n("2094"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],staticClass:"app-panel customs-clearance-edit"},[n("div",{staticClass:"header-top"},[n("div",{staticStyle:{float:"left"}},[e._v("\n      "+e._s(e.isEdit&&!e.isCopy?"编辑报关服务":"新增报关服务")+"\n    ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.goBack}},[e._v("\n      返 回\n    ")]),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveData}},[e._v("\n      保 存\n    ")])],1),n("div",{staticClass:"content"},[n("el-form",{ref:"selectForm",attrs:{model:e.selectForm,rules:e.formRules,"label-width":"130px",size:"small"}},[n("div",{staticClass:"form-title"},[e._v("\n        基础信息\n      ")]),n("el-form-item",{attrs:{label:"服务名称",prop:"name"}},[n("el-input",{attrs:{maxlength:50,placeholder:"请输入",size:"small"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),n("el-form-item",{attrs:{label:"服务简称",prop:"abbr"}},[n("el-input",{attrs:{maxlength:10,placeholder:"请输入",size:"small"},model:{value:e.selectForm.abbr,callback:function(t){e.$set(e.selectForm,"abbr",t)},expression:"selectForm.abbr"}})],1),n("el-form-item",{attrs:{label:"服务编码",prop:"csId"}},[n("el-input",{attrs:{placeholder:"请输入",maxlength:25,"show-word-limit":""},model:{value:e.selectForm.csId,callback:function(t){e.$set(e.selectForm,"csId",t)},expression:"selectForm.csId"}})],1),n("el-form-item",{attrs:{label:"所在国家",prop:"countryId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",filterable:"",clearable:"",placeholder:"所在国家"},model:{value:e.selectForm.countryId,callback:function(t){e.$set(e.selectForm,"countryId",t)},expression:"selectForm.countryId"}},e._l(e.countryList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"服务类型",prop:"subtypeId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{change:e.onServiceType},model:{value:e.selectForm.subtypeId,callback:function(t){e.$set(e.selectForm,"subtypeId",t)},expression:"selectForm.subtypeId"}},e._l(e.subTypeList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),"0"===e.selectForm.subtypeId?n("el-form-item",{attrs:{label:"出口报关件",prop:"custom"}},[n("el-radio-group",{model:{value:e.selectForm.custom,callback:function(t){e.$set(e.selectForm,"custom",t)},expression:"selectForm.custom"}},[n("el-radio",{attrs:{label:"0"}},[e._v("\n            买单出口\n          ")]),n("el-radio",{attrs:{label:"1"}},[e._v("\n            出口退税\n          ")])],1)],1):e._e(),n("el-form-item",{attrs:{label:"货币单位",prop:"currencyId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.geCurrencyList},model:{value:e.selectForm.currencyId,callback:function(t){e.$set(e.selectForm,"currencyId",t)},expression:"selectForm.currencyId"}},e._l(e.currencyList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name+"-"+e.sign,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"分配客户",prop:"belong"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.selectForm.belong,callback:function(t){e.$set(e.selectForm,"belong",t)},expression:"selectForm.belong"}},[n("el-option",{attrs:{label:"直客",value:"0"}}),n("el-option",{attrs:{label:"同行",value:"1"}}),n("el-option",{attrs:{label:"同行&直客",value:"2"}})],1)],1),n("el-form-item",{attrs:{label:"是否快递报关",prop:"express"}},[n("el-radio-group",{model:{value:e.selectForm.express,callback:function(t){e.$set(e.selectForm,"express",t)},expression:"selectForm.express"}},[n("el-radio",{attrs:{label:!1}},[e._v("\n            否\n          ")]),n("el-radio",{attrs:{label:!0}},[e._v("\n            是\n          ")])],1)],1),e._e(),e._e(),n("el-form-item",{attrs:{label:"默认供应商",prop:"custId"}},[n("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,clearable:"",filterable:"",placeholder:"请选择"},on:{focus:e.getSupplierList},model:{value:e.selectForm.custId,callback:function(t){e.$set(e.selectForm,"custId",t)},expression:"selectForm.custId"}},e._l(e.supplierList,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"备注"}},[n("el-input",{attrs:{maxlength:100,placeholder:"请输入"},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1),n("div",{staticClass:"form-title"},[e._v("\n        运输条款\n      ")])],1),n("div",[n("markdown-editor",{ref:"markdownEditor",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab",toolbarItems:["heading","bold","italic"]},height:"300px"},model:{value:e.terms,callback:function(t){e.terms=t},expression:"terms"}})],1)],1)])},v=[],y=(n("8e6e"),n("456d"),n("bd86")),k=n("a8db"),w=n("16d8");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach(function(t){Object(y["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function x(){return{id:void 0,name:void 0,abbr:void 0,countryId:void 0,subtypeId:void 0,csId:void 0,belong:void 0,terms:void 0,importerId:void 0,isImporter:!1,express:!1,custom:void 0,currencyId:void 0,custId:void 0,remark:void 0}}var I=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.selectLoading=!1,e.serviceCode=[],e.terms="",e.ss="",e.selectForm=x(),e.formLoading=!1,e.isItemDialogShow=!1,e.dialogLoading=!1,e.formRules={id:[{required:!0,message:"服务编码不能为空",trigger:"blur"}],name:[{required:!0,message:"服务名称不能为空",trigger:"blur"}],abbr:[{required:!0,message:"服务简称不能为空",trigger:"blur"}],subtypeId:[{required:!0,message:"请选择服务类型",trigger:"change"}],countryId:[{required:!0,message:"请选择所在国家",trigger:"change"}],csId:[{required:!0,message:"请选择关联服务编码",trigger:"change"}],density:[{required:!0,message:"密度比不能为空",trigger:"blur"}],belong:[{required:!0,message:"请选择分配客户",trigger:"change"}],umDistance:[{required:!0,message:"请选择距离单位",trigger:"change"}],umWeight:[{required:!0,message:"请选择重量单位",trigger:"change"}],umVolume:[{required:!0,message:"请选择体积单位",trigger:"change"}],densityP:[{required:!0,message:"请选择同行体积密度",trigger:"change"}],isImporter:[{required:!0,message:"请选择是否提供进口商",trigger:"change"}],importerId:[{required:!0,message:"请选择默认进口商",trigger:"change"}],express:[{required:!0,message:"请选择是否快递报关",trigger:"change"}],custom:[{required:!0,message:"请选择出口报关件",trigger:"change"}],currencyId:[{required:!0,message:"请选择货币单位",trigger:"change"}]},e.supplierList=[],e.agentList=[],e.currencyList=[],e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"setTerms",value:function(e){this.$refs.markdownEditor.setHtml(e)}},{key:"setData",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isCopy?(t.id,t.name,t.alias,t.csId,t.abbr,n=Object(k["a"])(t,["id","name","alias","csId","abbr"]),this.selectForm=O({},n)):this.selectForm=O({},t),this.formLoading=!0,e.next=4,this.getAgentList();case 4:return e.next=6,this.getSupplierList();case 6:this.formLoading=!1;case 7:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onServiceType",value:function(e){this.selectForm.custom="0"===e?"0":void 0,this.selectForm.custId=void 0,this.selectForm.importerId=void 0,this.supplierList=[],this.agentList=[]}},{key:"closeForm",value:function(){this.resetForm()}},{key:"resetForm",value:function(){this.selectForm=x(),this.clearValidate()}},{key:"clearValidate",value:function(){this.setTerms("");var e=this.$refs.selectForm;this.$nextTick(function(){e.clearValidate()})}},{key:"goBack",value:function(){this.resetForm(),this.$emit("closeForm")}},{key:"saveData",value:function(){var e=this,t=this.$refs.selectForm,n=this.$refs.markdownEditor.getHtml();t.validate(function(t){if(!t)return!1;e.formLoading=!0;var i=O({},e.selectForm);i.terms=n,e.countryList.map(function(e){e.id===i.countryId&&(i.countryName=e.name)}),e.subTypeList.map(function(e){e.id===i.subtypeId&&(i.subtypeName=e.name)}),e.agentList.map(function(e){e.id===i.importerId&&(i.importerName=e.name)}),e.supplierList.map(function(e){e.id===i.custId&&(i.custName=e.name)}),e.currencyList.find(function(e){e.id===i.currencyId&&(i.currencyName=e.name)}),Object(g["o"])(i).then(function(t){e.$message({type:"success",message:"保存成功"}),e.formLoading=!1,e.resetForm(),e.$emit("saveConfirm")}).catch(function(t){return e.formLoading=!1,t})})}},{key:"geCurrencyList",value:function(){var e=this;this.selectLoading=!0;var t={page:1,size:999};Object(g["b"])(t).then(function(t){var n=t.data||{};e.currencyList=n.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getSupplierList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={page:1,size:9999,cas:"S",typeId:"03",subtypeId:this.selectForm.subtypeId},e.next=3,Object(g["g"])(t).then(function(e){var t=e.data||{},i=t.result||[];n.supplierList=JSON.parse(JSON.stringify(i).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getAgentList",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,t={page:1,size:9999,cas:"A",typeId:"03",subtypeId:this.selectForm.subtypeId},e.next=4,Object(g["g"])(t).then(function(e){var t=e.data||{},i=t.result||[],r=JSON.parse(JSON.stringify(i).replace(/custName/g,"name").replace(/custId/g,"id"));n.agentList=r.filter(function(e){return"1"===e.agentType}),n.selectLoading=!1}).catch(function(e){return n.selectLoading=!1,e});case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"subTypeList",get:function(){return this.subTypeData||[]}},{key:"countryList",get:function(){return this.countryData||[]}}]),t}(p["e"]);I=m["a"]([Object(p["a"])({name:"TruckServiceForm",components:{MarkdownEditor:w["a"]},props:{subTypeData:{type:Array,default:function(){return[]}},countryData:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1},isCopy:{type:Boolean,default:!1}}})],I);var L=I,j=L,S=(n("8fb3"),n("2877")),F=Object(S["a"])(j,b,v,!1,null,"584ee796",null),E=F.exports,_=n("55ae"),$=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.loading=!1,e.isEdit=!1,e.isCopy=!1,e.isCustomsEditFormShow=!1,e.tableData=[],e.agentList=[],e.currentServiceId="",e.currentServiceName="",e.selectAgents=[],e.selectValue={countryId:void 0,subtypeId:void 0,keyword:void 0},e.countryList=[],e.subTypeList=[],e.agentLoading=!1,e.isItemDialogShow=!1,e.isCostItemShow=!1,e.costLoading=!1,e.props={label:"name",value:"id"},e.title="",e.currentId="",e.costItemOption=[],e.costItemList=[],e.selectType="1",e.page=1,e.size=10,e.total=0,e}return Object(d["a"])(t,e),Object(c["a"])(t,[{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var n={countryId:this.selectValue.countryId,subtypeId:this.selectValue.subtypeId,page:this.page,size:this.size};switch(this.selectType){case"1":n.code=this.selectValue.keyword;break;case"2":n.name=this.selectValue.keyword;break}Object(g["d"])(n).then(function(e){t.loading=!1,t.tableData=e.data.result,t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"getCountryList",value:function(){var e=this;Object(g["f"])().then(function(t){var n=t.data||{};e.countryList=n.result||[]}).catch(function(t){return e.loading=!1,t})}},{key:"deleteRow",value:function(e){var t=this,n={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(g["a"])(n).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"addRow",value:function(){var e=this;this.isEdit=!1,this.isCopy=!1,this.isCustomsEditFormShow=!0,this.$nextTick(function(){var t=e.$refs.editForm;t.setTerms("")})}},{key:"getSubtypeList",value:function(){var e=this,t={typeId:"03"};Object(g["i"])(t).then(function(t){e.subTypeList=t.data||[]}).catch(function(e){return e})}},{key:"closeForm",value:function(){this.isCustomsEditFormShow=!1,this.resetForm()}},{key:"saveConfirm",value:function(e){this.isCustomsEditFormShow=!1,this.resetForm(),this.queryAll()}},{key:"formatData",value:function(e){var t=this;return e.forEach(function(e){0===e.children.length?delete e.children:t.formatData(e.children)}),e}},{key:"resetForm",value:function(){this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.editForm,t=e.$refs.selectForm;this.$nextTick(function(){e.setTerms(""),t.clearValidate()})}},{key:"setAgentConfirm",value:function(){var e=this;this.agentLoading=!0;var t=this.selectAgents.map(function(t){var n,i=e.agentList.find(function(e){return e.id===t})||{},r=i.name;return n={id:t,name:r},n}),n={agents:t,id:this.currentServiceId};Object(g["m"])(n).then(function(t){e.$message({type:"success",message:"保存成功"}),e.agentLoading=!1,e.itemDialogClose(),e.queryAll()}).catch(function(t){return e.agentLoading=!1,t})}},{key:"associatedAgent",value:function(e){var t=this;this.isItemDialogShow=!0,this.currentServiceId=e.id,this.currentServiceName=e.name,this.agentLoading=!0;var n={cscId:e.id};Promise.all([this.getAgentById(n),this.getCustTypeList((e||{}).subtypeId)]).then(function(e){t.agentLoading=!1}).catch(function(e){return t.agentLoading=!1,e})}},{key:"getAgentById",value:function(e){var t=this;return Object(g["l"])(e).then(function(e){var n=e.data||[];t.selectAgents=n.map(function(e){return e.id})}).catch(function(e){return e})}},{key:"getCustTypeList",value:function(e){var t=this,n={page:1,size:9999,cas:"A",typeId:"03",subtypeId:e};return Object(g["g"])(n).then(function(e){var n=e.data||{},i=n.result||[];t.agentList=JSON.parse(JSON.stringify(i).replace(/custName/g,"name").replace(/custId/g,"id"))}).catch(function(e){return e})}},{key:"showTransferModal",value:function(e){this.$refs.transferModal.show(e,e.countryName+"-"+e.subtypeName+"-"+e.csId)}},{key:"associatedProject",value:function(e){var t=this,n=e.id;this.currentId=n,this.title=e.countryName+"-"+e.subtypeName+"-"+e.csId,this.isCostItemShow=!0,this.costLoading=!0;var i={serviceTypeId:"03",typeId:e.subtypeId,page:1,size:99999};Promise.all([this.getServerProjectList(n),this.getCostitemList(i)]).then(function(e){t.costLoading=!1}).catch(function(e){return t.costLoading=!1,e})}},{key:"getCostitemList",value:function(e){var t=this;return Object(g["e"])(e).then(function(e){var n=e.data||{},i=n.result||[];t.costItemList=i}).catch(function(e){return e})}},{key:"getServerProjectList",value:function(e){var t=this,n={id:e};return Object(g["j"])(n).then(function(e){var n=e.data||[];t.costItemOption=n.map(function(e){return e.id})||[]}).catch(function(e){return e})}},{key:"cancelCostItem",value:function(){this.isCostItemShow=!1,this.costItemList=[],this.costItemOption=[];var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"saveCostItem",value:function(){var e=this;this.costLoading=!0;var t=this.costItemOption,n=this.costItemList.filter(function(e){return t.includes(e.id)}).map(function(e){return{id:e.id,name:e.name}}),i={cscId:this.currentId,cscCostitems:n};Object(g["p"])(i).then(function(t){e.$message({type:"success",message:"更新成功"}),e.cancelCostItem(),e.costLoading=!1,e.queryAll()}).catch(function(t){return e.costLoading=!1,t})}},{key:"copyRow",value:function(e){var t=this;this.isEdit=!0,this.isCopy=!0,this.isCustomsEditFormShow=!0,this.$nextTick(function(){var n=t.$refs.editForm;n.setTerms(e.terms),n.setData(e)})}},{key:"editRow",value:function(e){var t=this;this.isEdit=!0,this.isCopy=!1,this.isCustomsEditFormShow=!0,this.$nextTick(function(){var n=t.$refs.editForm;n.setTerms(e.terms),n.setData(e)})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"onStatus",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,n){var i,r,s,o,c=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.status&&t.status!==n){e.next=2;break}return e.abrupt("return");case 2:return i="0"===n?"禁用":"开启",e.next=5,this.$confirm("此操作将".concat(i,"该报关服务，是否继续？"),"提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(e){return[null,e]}).catch(function(e){return[e,null]});case 5:if(r=e.sent,s=Object(a["a"])(r,2),o=s[0],s[1],!o){e.next=11;break}return e.abrupt("return");case 11:Object(g["k"])({id:t.id,status:n}).then(function(e){c.$message.success("修改成功"),c.queryAll()}).catch(function(e){return e});case 12:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"filterMethod",value:function(e,t){var n=t.name||"";return n.indexOf(e)>-1}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1,this.agentList=[];var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"created",value:function(){this.queryAll(),this.getCountryList(),this.getSubtypeList()}},{key:"custId",get:function(){var e=f["a"].info||{},t=e.custId;return t}},{key:"labelPosition",get:function(){var e=h["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=h["a"].language;return e||"en"}}]),t}(p["e"]);$=m["a"]([Object(p["a"])({name:"CustomsClearance",components:{AddEditForm:E,transferModal:_["a"]},props:{}})],$);var D=$,T=D,N=(n("8a0c"),Object(S["a"])(T,i,r,!1,null,"fb45d254",null));t["default"]=N.exports},"424d":function(e,t,n){},"55ae":function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{title:"关联海关【"+e.title+"】",visible:e.visible,width:"960px","close-on-click-modal":!1},on:{close:e.dialogClose}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[n("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["全部海关","已关联海关"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.cabinetList},model:{value:e.selectCabinet,callback:function(t){e.selectCabinet=t},expression:"selectCabinet"}}),n("div",{staticStyle:{"text-align":"right",margin:"20px 40px 0"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.dialogClose}},[e._v("\n        取 消\n      ")]),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveCabinet}},[e._v("\n        确 定\n      ")])],1)],1)])},r=[],a=(n("96cf"),n("3b8d")),s=(n("7514"),n("7f7f"),n("ac6a"),n("d225")),o=n("b0b4"),c=n("308d"),l=n("6bb5"),u=n("4e2b"),d=n("9ab4"),m=n("60a3"),p=n("2094"),f=function(e){function t(){var e;return Object(s["a"])(this,t),e=Object(c["a"])(this,Object(l["a"])(t).apply(this,arguments)),e.visible=!1,e.loading=!1,e.setCabinetData={},e.title="",e.selectCabinet=[],e.selectCabinetList=[],e.cabinetList=[],e}return Object(u["a"])(t,e),Object(o["a"])(t,[{key:"saveCabinet",value:function(){var e=this,t={delList:[],insList:[]};if(0===this.selectCabinetList.length)this.cabinetList.forEach(function(n){-1!==e.selectCabinet.indexOf(n.id)&&t.insList.push({customsId:n.id,customsName:n.name,cscId:e.setCabinetData.id})});else{var n=this.selectCabinetList.map(function(e){return e.customsId});n.forEach(function(n,i){-1===e.selectCabinet.indexOf(n)&&t.delList.push(e.selectCabinetList[i])}),this.selectCabinet.forEach(function(i,r){if(-1===n.indexOf(i)){var a=e.cabinetList.find(function(e){return e.id===i});t.insList.push({customsId:a.id,customsName:a.name,cscId:e.setCabinetData.id})}})}this.loading=!0,Object(p["n"])(t).then(function(t){e.loading=!1,t.success&&(e.$message.success("操作成功"),e.dialogClose())}).catch(function(t){return e.loading=!1,t})}},{key:"filterMethod",value:function(e,t){var n=t.name||"";return n.indexOf(e)>-1}},{key:"dialogClose",value:function(){this.selectCabinet=[],this.selectCabinetList=[],this.visible=!1,this.$emit("close")}},{key:"show",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.visible=!0,this.setCabinetData=t,this.title=n,this.loading=!0,e.next=6,this.getCabinetList();case 6:return e.next=8,this.getServiceCabinetList();case 8:this.loading=!1;case 9:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"getServiceCabinetList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={model:this.setCabinetData.id,page:1,size:99999},e.next=3,Object(p["h"])(t).then(function(e){if(e.success){var t=e.data||{};n.selectCabinetList=t.result||[],n.selectCabinet=n.selectCabinetList.map(function(e){return e.customsId})}}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCabinetList",value:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={type:0,countryId:this.setCabinetData.countryId,page:1,size:99999},e.next=3,Object(p["c"])(t).then(function(e){if(e.success){var t=e.data||{};n.cabinetList=t.result||[]}}).catch(function(e){return e});case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}]),t}(m["e"]);f=d["a"]([Object(m["a"])({name:"",components:{},props:{}})],f);var h=f,g=h,b=n("2877"),v=Object(b["a"])(g,i,r,!1,null,"8005b47c",null);t["a"]=v.exports},"8a0c":function(e,t,n){"use strict";var i=n("424d"),r=n.n(i);r.a},"8fb3":function(e,t,n){"use strict";var i=n("eeab"),r=n.n(i);r.a},eeab:function(e,t,n){}}]);