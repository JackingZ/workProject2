(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["domestic-area"],{"0150":function(e,t,a){},"03f4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"区域配置"}}),a("div",{staticClass:"app-panel"},[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"国内区域",name:"first"}},["first"===e.activeName?a("internalData"):e._e()],1),a("el-tab-pane",{attrs:{label:"城市分区",name:"second"}},["second"===e.activeName?a("citiesData"):e._e()],1),a("el-tab-pane",{attrs:{label:"国家分区",name:"third"}},["third"===e.activeName?a("countriesData"):e._e()],1),a("el-tab-pane",{attrs:{label:"仓库分区",name:"fourth"}},["fourth"===e.activeName?a("warehousesData"):e._e()],1)],1)],1)],1)])])},n=[],i=a("d225"),l=a("b0b4"),o=a("308d"),s=a("6bb5"),c=a("4e2b"),u=a("9ab4"),d=a("60a3"),m=a("ac1a"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["insideDomesticAdd"],expression:"['insideDomesticAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addArea}},[e._v("\n        新增国内区域\n      ")])],1),a("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:18}},[a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{placeholder:"区域名称",size:"small",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n        查询\n      ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 350px)",border:""}},[a("el-table-column",{attrs:{label:"区域名称","min-width":"120",prop:"name"}}),a("el-table-column",{attrs:{label:"国家","min-width":"150",prop:"countryName"}}),a("el-table-column",{attrs:{label:"区内省份","min-width":"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.filterFunc(t.row.states))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"添加时间",width:"170",sortable:"",prop:"createTime"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["insideDomesticUpdate"],expression:"['insideDomesticUpdate']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editForm(t.row)}}},[e._v("\n          编辑\n        ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["insideDomesticDel"],expression:"['insideDomesticDel']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"区内省份",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[a("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["省份","已选择"],props:{key:"id",label:"label"},"filter-placeholder":"输入搜索",data:e.stateList},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}}),a("div",{staticStyle:{"text-align":"right",margin:"0 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        确 定\n      ")])],1)],1),a("el-dialog",{attrs:{title:e.isEdit?"编辑国内区域":"新增国内区域","close-on-click-modal":!1,width:"600px",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.form,"label-width":"100px",size:"small",rules:e.formRules}},[a("el-form-item",{attrs:{label:"区域名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",placeholder:"请输入",maxlength:50},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"国家",prop:"countryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.countryLoading,placeholder:"请选择",filterable:""},on:{focus:e.getCountryList,change:e.onCountry},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"区内省份",prop:"area"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.form.area.length+")",disabled:""},model:{value:e.s,callback:function(t){e.s=t},expression:"s"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",disabled:!e.form.countryId},on:{click:e.handleStates},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",maxlength:100},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSave}},[e._v("\n        确 定\n      ")])],1)],1)],1)},h=[],p=(a("c5f6"),a("7514"),a("7f7f"),a("b32d"));function g(e){var t={url:"/setting/region/getRegionList",method:"get",params:e};return Object(p["a"])(t)}function y(e){var t={url:"/setting/region/saveRegion",method:"post",data:e};return Object(p["a"])(t)}function v(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:e};return Object(p["a"])(t)}function b(e){var t={url:"/setting/fbastore/getFbastoreList",method:"get",params:e};return Object(p["a"])(t)}function k(e){var t={url:"/setting/region/deleteRegion",method:"delete",params:e};return Object(p["a"])(t)}function w(e){var t={url:"/setting/area_type/delete",method:"post",params:e};return Object(p["a"])(t)}function x(e){var t={url:"/setting/area_type/page",method:"post",data:e};return Object(p["a"])(t)}function S(e){var t={url:"/setting/area_type/save",method:"post",data:e};return Object(p["a"])(t)}function L(){var e={url:"/setting/area/getCountryList",method:"get"};return Object(p["a"])(e)}function I(e){var t={url:"/setting/area/getStateByCountry",method:"get",params:{countryId:e}};return Object(p["a"])(t)}function D(e){var t={url:"/setting/area/getCityByState",method:"get",params:{stateId:e}};return Object(p["a"])(t)}var C=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.dialogShow=!1,e.dialogLoading=!1,e.isEdit=!1,e.tableData=[],e.searchForm={name:""},e.form={countryId:"",countryName:"",area:[],name:"",remark:""},e.countryList=[],e.stateList=[],e.countryLoading=!1,e.stateLoading=!1,e.formLoading=!1,e.currentId=void 0,e.page=1,e.size=10,e.total=0,e.s="",e.isItemDialogShow=!1,e.formRules={name:[{required:!0,message:"区域名称不能为空",trigger:"blur"}],countryId:{required:!0,message:"请选择国家",trigger:"change"},cities:{required:!0,message:"请选择区内城市",trigger:"change"},area:{required:!0,message:"请选择区内省份",trigger:"change"}},e}return Object(c["a"])(t,e),Object(l["a"])(t,[{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a={page:this.page,size:this.size,name:this.searchForm.name||void 0};g(a).then(function(e){t.loading=!1,t.tableData=e.data.result||[],t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"filterMethod",value:function(e,t){return t.label.toUpperCase().indexOf(e.toUpperCase())>-1}},{key:"handleStates",value:function(){this.isItemDialogShow=!0,this.getStateList()}},{key:"filterFunc",value:function(e){var t=e||[],a=t.map(function(e){return e.stateName});return a.join(", ")}},{key:"addArea",value:function(){this.dialogShow=!0,this.isEdit=!1}},{key:"editForm",value:function(e){this.isEdit=!0;var t=e.name,a=e.remark,r=e.countryId,n=e.states,i=e.id,l=n.map(function(e){return e.stateId});this.form={name:t,countryId:r,states:n,remark:a,area:l,id:i},this.getCountryList(),this.getStateList(),this.dialogShow=!0}},{key:"onCountry",value:function(){this.form.area=[],this.stateList=[]}},{key:"confirmSave",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=e.form,r=a.area,n=a.countryId,i=a.name,l=a.remark,o=a.id,s=(e.countryList.find(function(e){return e.id===n})||{}).name,c=r.map(function(t){var a=(e.stateList||[]).find(function(e){return e.id===t}),r=a.id,n=a.label;return{stateId:r,stateName:n}}),u=c.filter(function(e){return e.stateId&&e.stateName}),d={countryId:n,countryName:s,name:i,remark:l,states:u,id:o};y(d).then(function(t){e.$message({type:"success",message:"操作成功"}),e.dialogShow=!1,e.formLoading=!1,e.queryAll(),e.resetForm(),e.clearValidate()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"deleteData",value:function(e){var t=this,a=e.id;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:a};k(e).then(function(e){t.$message({type:"success",message:"操作成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"cancel",value:function(){this.dialogShow=!1,this.stateList=[],this.resetForm(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"resetForm",value:function(){this.form={countryId:"",countryName:"",area:[],name:"",remark:""}}},{key:"getCountryList",value:function(){var e=this;this.countryLoading=!0,L().then(function(t){e.countryList=t.data.result.map(function(e){return e.alias&&(e.name=e.name+"-"+e.alias),e}),e.countryLoading=!1}).catch(function(t){return e.countryLoading=!1,t})}},{key:"getStateList",value:function(){var e=this;if(this.form.countryId){this.stateLoading=!0;var t={countryId:this.form.countryId};v(t).then(function(t){e.stateLoading=!1;var a=t.data||{},r=a.result||[];e.stateList=r.map(function(e){return e.label=e.name,e.alias&&(e.label=e.name+"-"+e.alias),e})}).catch(function(t){return e.stateLoading=!1,t})}else this.$message.error("请先选择国家/地区")}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll()}}]),t}(d["e"]);C=u["a"]([Object(d["a"])({name:"OperatingCenter",components:{},props:{wsId:{type:String,default:""}}})],C);var O=C,_=O,j=(a("bd7a"),a("2877")),F=Object(j["a"])(_,f,h,!1,null,"c67ee6e4",null),N=F.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["cityDomesticAdd"],expression:"['cityDomesticAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addArea}},[e._v("\n        新增城市分区\n      ")])],1),a("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:18}},[a("el-select",{staticStyle:{width:"150px","margin-right":"10px"},attrs:{loading:e.selectLoading,placeholder:"国家",clearable:"",size:"small",filterable:""},on:{focus:e.getCountryList,change:e.onCountryChange},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.searchForm.countryId,placeholder:"州/省",clearable:"",filterable:"",size:"small"},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.searchForm.stateId,callback:function(t){e.$set(e.searchForm,"stateId",t)},expression:"searchForm.stateId"}},e._l(e.stateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.searchForm.stateId,placeholder:"城市",clearable:"",size:"small",filterable:""},on:{focus:e.getCityList},model:{value:e.searchForm.cityId,callback:function(t){e.$set(e.searchForm,"cityId",t)},expression:"searchForm.cityId"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{placeholder:"区域名称",size:"small",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n        查询\n      ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 350px)",border:""}},[a("el-table-column",{attrs:{label:"区域名称","min-width":"120",prop:"name"}}),a("el-table-column",{attrs:{label:"国家","min-width":"150",prop:"countryName"}}),a("el-table-column",{attrs:{label:"城市","min-width":"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.filterFunc(t.row.result))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"添加时间",width:"170",sortable:"",prop:"createTime"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["cityDomesticUpdate"],expression:"['cityDomesticUpdate']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editForm(t.row)}}},[e._v("\n          编辑\n        ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["cityDomesticDel"],expression:"['cityDomesticDel']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"cities-dialog",attrs:{title:"城市",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px","append-to-body":""},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[a("ZjTransfer",{ref:"zjTransfer"}),a("div",{staticStyle:{"text-align":"right",margin:"0 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        确 定\n      ")])],1)],1),a("el-dialog",{attrs:{title:e.isEdit?"编辑城市分区":"新增城市分区","close-on-click-modal":!1,width:"600px",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.form,"label-width":"100px",size:"small",rules:e.formRules}},[a("el-form-item",{attrs:{label:"区域名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",placeholder:"请输入",maxlength:50},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"国家",prop:"countryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",filterable:""},on:{focus:e.getCountryList,change:e.onCountryForm},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"城市",prop:"area"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.form.area.length+")",disabled:""},model:{value:e.s,callback:function(t){e.s=t},expression:"s"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleCities},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",maxlength:100},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSave}},[e._v("\n        确 定\n      ")])],1)],1)],1)},$=[],A=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),q=a("bd86"),R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.selectLoading,expression:"selectLoading"}]},[a("div",{staticStyle:{margin:"0 0 10px 44px"}},[a("span",[e._v("\n      州/省：\n    ")]),a("el-select",{staticStyle:{width:"260px"},attrs:{disabled:!e.countryId,placeholder:"州/省",clearable:"",filterable:"",size:"small"},on:{change:e.onStateChange},model:{value:e.stateId,callback:function(t){e.stateId=t},expression:"stateId"}},e._l(e.stateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),a("div",{staticClass:"el-transfer",staticStyle:{height:"500px"}},[a("div",{staticClass:"el-transfer-panel"},[a("p",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{indeterminate:e.leftIndeterminate},on:{change:e.handleLeftSelectAll},model:{value:e.leftCheckAll,callback:function(t){e.leftCheckAll=t},expression:"leftCheckAll"}},[e._v("\n          城市"),a("span",[e._v(e._s(e.leftSelected.length)+"/"+e._s(e.leftData.length))])])],1),a("div",{staticClass:"el-transfer-panel__body"},[a("el-input",{staticClass:"el-transfer-panel__filter",attrs:{placeholder:"输入搜索"},model:{value:e.leftSearch,callback:function(t){e.leftSearch=t},expression:"leftSearch"}},[a("i",{staticClass:"el-input__icon",class:e.leftSearch?"el-icon-circle-close":"el-icon-search",attrs:{slot:"prefix"},on:{click:function(t){e.leftSearch=""}},slot:"prefix"})]),e.leftList.length?a("div",{staticClass:"el-transfer-panel__list is-filterable"},e._l(e.leftList,function(t,r){return a("el-checkbox",{key:r,staticClass:"el-transfer-panel__item",attrs:{label:t.name+(t.alias?"-"+t.alias:""),value:t.id},on:{change:e.handleLeftSelected},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}})}),1):e._e(),e.leftSearch&&0===e.leftList.length?a("p",{staticClass:"el-transfer-panel__empty"},[e._v("\n          无匹配数据\n        ")]):e._e(),e.leftSearch||0!==e.leftData.length?e._e():a("p",{staticClass:"el-transfer-panel__empty"},[e._v("\n          无数据\n        ")])],1)]),a("div",{staticClass:"el-transfer__buttons"},[a("el-button",{staticClass:"el-transfer__button",attrs:{type:"primary",size:"medium",disabled:0===e.rightData.length||0===e.rightSelected.length},on:{click:e.handleRightToLeft}},[a("i",{staticClass:"el-icon-arrow-left"})]),a("el-button",{staticClass:"el-transfer__button",attrs:{type:"primary",size:"medium",disabled:0===e.leftData.length||0===e.leftSelected.length},on:{click:e.handleLeftToRight}},[a("i",{staticClass:"el-icon-arrow-right"})])],1),a("div",{staticClass:"el-transfer-panel"},[a("p",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{indeterminate:e.rightIndeterminate},on:{change:e.handleRightSelectAll},model:{value:e.rightCheckAll,callback:function(t){e.rightCheckAll=t},expression:"rightCheckAll"}},[e._v("\n          已选择"),a("span",[e._v(e._s(e.rightSelected.length)+"/"+e._s(e.rightData.length))])])],1),a("div",{staticClass:"el-transfer-panel__body"},[a("el-input",{staticClass:"el-transfer-panel__filter",attrs:{placeholder:"输入搜索"},model:{value:e.rightSearch,callback:function(t){e.rightSearch=t},expression:"rightSearch"}},[a("i",{staticClass:"el-input__icon",class:e.rightSearch?"el-icon-circle-close":"el-icon-search",attrs:{slot:"prefix"},on:{click:function(t){e.rightSearch=""}},slot:"prefix"})]),e.rightList.length?a("div",{staticClass:"el-transfer-panel__list is-filterable"},e._l(e.rightList,function(t,r){return a("el-checkbox",{key:r,staticClass:"el-transfer-panel__item",attrs:{label:t.name+(t.alias?"-"+t.alias:""),value:t.id},on:{change:e.handleRightSelected},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"item.checked"}})}),1):e._e(),e.rightSearch&&0===e.rightList.length?a("p",{staticClass:"el-transfer-panel__empty"},[e._v("\n          无匹配数据\n        ")]):e._e(),e.rightSearch||0!==e.rightList.length?e._e():a("p",{staticClass:"el-transfer-panel__empty"},[e._v("\n          无数据\n        ")])],1)])])])},T=[],P=a("75fc"),E=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.leftCheckAll=!1,e.rightCheckAll=!1,e.leftIndeterminate=!1,e.rightIndeterminate=!1,e.leftSearch="",e.rightSearch="",e.leftData=[],e.rightData=[],e.stateList=[],e.countryId="",e.stateId="",e.selectLoading=!1,e}return Object(c["a"])(t,e),Object(l["a"])(t,[{key:"setData",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(t,a,r){var n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.countryId=t,this.reset(),this.selectLoading=!0,a.map(function(e){return n.rightData.push({id:e.cityId,name:e.cityName,stateId:e.stateId,checked:!1}),e}),this.stateList=r,this.stateId=(this.stateList[0]||{}).id,e.next=8,this.getCityList();case 8:this.selectLoading=!1;case 9:case"end":return e.stop()}},e,this)}));function t(t,a,r){return e.apply(this,arguments)}return t}()},{key:"reset",value:function(){this.stateList=[],this.leftData=[],this.rightData=[],this.leftSearch="",this.rightSearch="",this.leftCheckAll=!1,this.rightCheckAll=!1,this.leftIndeterminate=!1,this.rightIndeterminate=!1}},{key:"onStateChange",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.leftData=[],this.leftSearch="",this.leftCheckAll=!1,this.leftIndeterminate=!1,e.next=6,this.getCityList();case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.stateId){e.next=3;break}return this.selectLoading=!1,e.abrupt("return");case 3:return this.selectLoading=!0,e.next=6,D(this.stateId).then(function(e){t.selectLoading=!1;var a=e.data||{},r=a.result||[],n=r.filter(function(e){return t.rightData.every(function(t){return e.id!==t.id})});t.leftData=n.map(function(e){return e.checked=!1,e})}).catch(function(){t.leftData=[],t.selectLoading=!1});case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleLeftSelectAll",value:function(e){this.leftData=this.leftData.map(function(t){return t.checked=e,t}),this.leftIndeterminate=!1}},{key:"handleLeftSelected",value:function(e){var t=this.leftData.length,a=this.leftData.filter(function(e){return e.checked}).length;this.leftIndeterminate=a>0&&a<t,this.leftCheckAll=a>0&&a===t}},{key:"handleRightSelectAll",value:function(e){this.rightData=this.rightData.map(function(t){return t.checked=e,t}),this.rightIndeterminate=!1}},{key:"handleRightSelected",value:function(e){var t=this.rightData.length,a=this.rightData.filter(function(e){return e.checked}).length;this.rightIndeterminate=a>0&&a<t,this.rightCheckAll=a>0&&a===t}},{key:"handleLeftToRight",value:function(){var e=this.leftData.filter(function(e){return e.checked}),t=JSON.parse(JSON.stringify(e)),a=t.map(function(e){return e.checked=!1,e});this.leftData=this.leftData.filter(function(e){return!e.checked});var r=JSON.parse(JSON.stringify(this.rightData)),n=[].concat(Object(P["a"])(r),Object(P["a"])(a)),i={};this.rightData=n.reduce(function(e,t){return i[t.id]||(i[t.id]=!0,e.push(t)),e},[]),this.leftIndeterminate=!1,this.leftCheckAll=!1}},{key:"handleRightToLeft",value:function(){var e=this,t=this.rightData.filter(function(e){return e.checked}),a=JSON.parse(JSON.stringify(t)),r=a.map(function(e){return e.checked=!1,e});r.map(function(t){e.stateId===t.stateId&&e.leftData.every(function(e){return t.id!==e.id})&&e.leftData.push(t)}),this.rightData=this.rightData.filter(function(e){return!e.checked}),this.rightIndeterminate=!1,this.rightCheckAll=!1}},{key:"leftSelected",get:function(){return this.leftData.filter(function(e){return e.checked})}},{key:"rightSelected",get:function(){return this.rightData.filter(function(e){return e.checked})}},{key:"leftList",get:function(){var e=this;return this.leftSearch?this.leftData.filter(function(t){return t.name.toUpperCase().indexOf(e.leftSearch.toUpperCase())>-1}):this.leftData}},{key:"rightList",get:function(){var e=this;return this.rightSearch?this.rightData.filter(function(t){return t.name.toUpperCase().indexOf(e.rightSearch.toUpperCase())>-1}):this.rightData}}]),t}(d["e"]);E=u["a"]([Object(d["a"])({name:"ZjTransfer",components:{},props:{}})],E);var U=E,J=U,V=(a("2b43"),Object(j["a"])(J,R,T,!1,null,"872a3164",null)),B=V.exports;function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(q["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Z=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.dialogShow=!1,e.dialogLoading=!1,e.isEdit=!1,e.tableData=[],e.copyList=[],e.form={countryId:"",countryName:"",area:[],name:"",remark:""},e.searchForm={countryId:"",stateId:"",cityId:"",name:""},e.countryList=[],e.stateList=[],e.cityList=[],e.state2List=[],e.formLoading=!1,e.selectLoading=!1,e.page=1,e.size=10,e.total=0,e.s="",e.isItemDialogShow=!1,e.formRules={name:[{required:!0,message:"区域名称不能为空",trigger:"blur"}],countryId:{required:!0,message:"请选择国家",trigger:"change"},area:{required:!0,message:"请选择区内城市",trigger:"change"}},e}return Object(c["a"])(t,e),Object(l["a"])(t,[{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a={model:Q({},this.searchForm,{type:"1"}),page:this.page,size:this.size};x(a).then(function(e){t.loading=!1,t.tableData=e.data.result||[],t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"itemDialogClose",value:function(){var e=this.$refs.zjTransfer,t=JSON.parse(JSON.stringify(e.rightData));this.form.area=t.map(function(e){var t=e.id,a=e.name,r=e.stateId;return{cityId:t,cityName:a,stateId:r}}).filter(function(e){return e&&e.cityId&&e.cityName}),this.isItemDialogShow=!1,this.$nextTick(function(){e.reset()})}},{key:"filterMethod",value:function(e,t){return t.label.toUpperCase().indexOf(e.toUpperCase())>-1}},{key:"handleCities",value:function(){var e=this;this.isItemDialogShow=!0,this.$nextTick(function(){var t=e.$refs.zjTransfer;t.setData(e.form.countryId,e.form.area,e.state2List)})}},{key:"filterFunc",value:function(e){var t=e||[],a=t.map(function(e){return e.cityName});return a.join(", ")}},{key:"addArea",value:function(){this.dialogShow=!0,this.isEdit=!1}},{key:"editForm",value:function(e){this.isEdit=!0;var t=e.name,a=e.remark,r=e.countryId,n=e.result,i=e.id;this.copyList=JSON.parse(JSON.stringify(n)),this.form={name:t,countryId:r,remark:a,area:n,id:i},this.getCountryList(),this.getState2List(),this.dialogShow=!0}},{key:"onCountryForm",value:function(){this.form.area=[],this.state2List=[],this.getState2List()}},{key:"confirmSave",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=e.form,r=a.area,n=a.countryId,i=a.name,l=a.remark,o=a.id,s=(e.countryList.find(function(e){return e.id===n})||{}).name,c=r.map(function(t){var a=t.cityId,r=t.cityName,n=t.stateId,i=(e.state2List.find(function(e){return e.id===n})||{}).name;return{cityId:a,cityName:r,stateId:n,stateName:i}}).filter(function(e){return e&&e.cityId&&e.cityName}),u=c.map(function(t){var a=e.copyList.every(function(e){return t.cityId!==e.cityId});if(a)return Q({},t,{type:"1",countryId:n,countryName:s,name:i,remark:l})}).filter(function(e){return e&&e.cityId&&e.cityName}),d=e.copyList.map(function(e){if(r.every(function(t){return e.cityId!==t.cityId}))return e.id}).filter(function(e){return e});S({areaType:{id:o,name:i,remark:l,countryId:n,countryName:s,parentId:"0",type:"1"},delList:d,insList:u}).then(function(t){e.$message({type:"success",message:"操作成功"}),e.formLoading=!1,e.queryAll(),e.cancel()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"deleteData",value:function(e){var t=this,a=e.id;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:a};w(e).then(function(e){t.$message({type:"success",message:"操作成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"cancel",value:function(){this.dialogShow=!1,this.state2List=[],this.copyList=[],this.resetForm(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"resetForm",value:function(){this.form={countryId:"",countryName:"",area:[],name:"",remark:""}}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,L().then(function(t){e.countryList=t.data.result.map(function(e){return e.alias&&(e.name=e.name+"-"+e.alias),e}),e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.searchForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,I(this.searchForm.countryId).then(function(e){t.selectLoading=!1;var a=e.data||{},r=a.result||[];t.stateList=r}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.searchForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,D(this.searchForm.stateId).then(function(e){t.selectLoading=!1;var a=e.data||{},r=a.result||[];t.cityList=r}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getState2List",value:function(){var e=this;this.form.countryId?(this.formLoading=!0,I(this.form.countryId).then(function(t){var a=t.data||{},r=a.result||[];e.state2List=r,e.formLoading=!1}).catch(function(t){return e.formLoading=!1,t})):this.$message.error("请先选择国家")}},{key:"onCountryChange",value:function(){var e=Object(A["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.searchForm.stateId="",this.onStateChange();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(){this.searchForm.cityId=""}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll()}}]),t}(d["e"]);Z=u["a"]([Object(d["a"])({name:"cities",components:{ZjTransfer:B},props:{wsId:{type:String,default:""}}})],Z);var G=Z,H=G,K=(a("ecb5"),Object(j["a"])(H,z,$,!1,null,"5c80af2c",null)),W=K.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["countryDomesticAdd"],expression:"['countryDomesticAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addArea}},[e._v("\n        新增国家分区\n      ")])],1),a("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:18}},[a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{placeholder:"区域名称",size:"small",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n        查询\n      ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 350px)",border:""}},[a("el-table-column",{attrs:{label:"区域名称","min-width":"120",prop:"name"}}),a("el-table-column",{attrs:{label:"国家","min-width":"300","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.filterFunc(t.row.result))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"添加时间",width:"170",sortable:"",prop:"createTime"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["countryDomesticUpdate"],expression:"['countryDomesticUpdate']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editForm(t.row)}}},[e._v("\n          编辑\n        ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["countryDomesticDel"],expression:"['countryDomesticDel']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"国家",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[a("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["国家","已选择"],props:{key:"id",label:"name"},"filter-placeholder":"输入搜索",data:e.countryList},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}}),a("div",{staticStyle:{"text-align":"right",margin:"0 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        确 定\n      ")])],1)],1),a("el-dialog",{attrs:{title:e.isEdit?"编辑国家分区":"新增国家分区","close-on-click-modal":!1,width:"600px",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.form,"label-width":"100px",size:"small",rules:e.formRules}},[a("el-form-item",{attrs:{label:"区域名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",placeholder:"请输入",maxlength:50},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"国家",prop:"area"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.form.area.length+")",disabled:""},model:{value:e.s,callback:function(t){e.s=t},expression:"s"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleCountry},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",maxlength:100},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSave}},[e._v("\n        确 定\n      ")])],1)],1)],1)},Y=[];function ee(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function te(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ee(a,!0).forEach(function(t){Object(q["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ee(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var ae=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.dialogShow=!1,e.dialogLoading=!1,e.isEdit=!1,e.tableData=[],e.copyList=[],e.searchForm={name:""},e.form={area:[],name:"",remark:""},e.countryList=[],e.formLoading=!1,e.page=1,e.size=10,e.total=0,e.s="",e.isItemDialogShow=!1,e.formRules={name:[{required:!0,message:"区域名称不能为空",trigger:"blur"}],area:[{required:!0,message:"请选择国家",trigger:"change"}]},e}return Object(c["a"])(t,e),Object(l["a"])(t,[{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a={model:{type:"2",name:this.searchForm.name},page:this.page,size:this.size};x(a).then(function(e){t.loading=!1,t.tableData=e.data.result||[],t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"filterMethod",value:function(e,t){return t.name.toUpperCase().indexOf(e.toUpperCase())>-1}},{key:"handleCountry",value:function(){this.isItemDialogShow=!0,this.getCountryList()}},{key:"filterFunc",value:function(e){var t=e||[],a=t.map(function(e){return e.countryName});return a.join(", ")}},{key:"addArea",value:function(){this.dialogShow=!0,this.isEdit=!1}},{key:"editForm",value:function(e){this.isEdit=!0;var t=e.name,a=e.remark,r=e.result,n=e.id,i=r.map(function(e){return e.countryId});this.copyList=JSON.parse(JSON.stringify(r)),this.form={name:t,remark:a,area:i,id:n},this.getCountryList(),this.dialogShow=!0}},{key:"confirmSave",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=e.form,r=a.area,n=a.name,i=a.remark,l=a.id,o=r.map(function(t){var a=(e.countryList||[]).find(function(e){return e.id===t}),r=a.id,n=a.name;return{countryId:r,countryName:n}}).filter(function(e){return e.countryId&&e.countryName}),s=o.map(function(t){var a=e.copyList.every(function(e){return t.countryId!==e.countryId});if(a)return te({},t,{type:"2",name:n,remark:i})}).filter(function(e){return e&&e.countryId&&e.countryName}),c=e.copyList.map(function(e){if(r.every(function(t){return e.countryId!==t}))return e.id}).filter(function(e){return e});S({areaType:{id:l,name:n,remark:i,parentId:"0",type:"2"},delList:c,insList:s}).then(function(t){e.$message({type:"success",message:"操作成功"}),e.formLoading=!1,e.queryAll(),e.cancel()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"deleteData",value:function(e){var t=this,a=e.id;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:a};w(e).then(function(e){t.$message({type:"success",message:"操作成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"cancel",value:function(){this.dialogShow=!1,this.copyList=[],this.countryList=[],this.resetForm(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"resetForm",value:function(){this.form={area:[],name:"",remark:""}}},{key:"getCountryList",value:function(){var e=this;L().then(function(t){var a=t.data||{},r=a.result||[];e.countryList=r.map(function(e){return e.alias&&(e.name=e.name+"-"+e.alias),e})}).catch(function(e){return e})}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll()}}]),t}(d["e"]);ae=u["a"]([Object(d["a"])({name:"",components:{},props:{wsId:{type:String,default:""}}})],ae);var re=ae,ne=re,ie=(a("4018"),Object(j["a"])(ne,X,Y,!1,null,"7e0dd6d3",null)),le=ie.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehouseDomesticAdd"],expression:"['warehouseDomesticAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addArea}},[e._v("\n        新增仓库分区\n      ")])],1),a("el-col",{staticStyle:{"text-align":"right","padding-right":"10px"},attrs:{span:18}},[a("el-select",{staticStyle:{width:"150px","margin-right":"5px"},attrs:{loading:e.countryLoading,placeholder:"国家",clearable:"",size:"small",filterable:""},on:{focus:e.getCountryList},model:{value:e.searchForm.countryId,callback:function(t){e.$set(e.searchForm,"countryId",t)},expression:"searchForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{placeholder:"区域名称",size:"small",clearable:""},model:{value:e.searchForm.name,callback:function(t){e.$set(e.searchForm,"name",t)},expression:"searchForm.name"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n        查询\n      ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 350px)",border:""}},[a("el-table-column",{attrs:{label:"区域名称","min-width":"120",prop:"name"}}),a("el-table-column",{attrs:{label:"国家","min-width":"150",prop:"countryName"}}),a("el-table-column",{attrs:{label:"fba仓库","min-width":"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.filterFunc(t.row.result))+"\n      ")]}}])}),a("el-table-column",{attrs:{label:"添加时间",width:"170",sortable:"",prop:"createTime"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehouseDomesticUpdate"],expression:"['warehouseDomesticUpdate']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editForm(t.row)}}},[e._v("\n          编辑\n        ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["warehouseDomesticDel"],expression:"['warehouseDomesticDel']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteData(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"fba仓库",visible:e.isItemDialogShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isItemDialogShow=t},close:e.itemDialogClose}},[a("el-transfer",{ref:"transferItem",staticStyle:{height:"500px"},attrs:{filterable:"","filter-method":e.filterMethod,titles:["fba仓库","已选择"],props:{key:"id",label:"label"},"filter-placeholder":"输入搜索",data:e.fbaList},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}}),a("div",{staticStyle:{"text-align":"right",margin:"0 40px 0"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.itemDialogClose}},[e._v("\n        确 定\n      ")])],1)],1),a("el-dialog",{attrs:{title:e.isEdit?"编辑仓库分区":"新增仓库分区","close-on-click-modal":!1,width:"600px",visible:e.dialogShow},on:{"update:visible":function(t){e.dialogShow=t},closed:e.cancel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.form,"label-width":"100px",size:"small",rules:e.formRules}},[a("el-form-item",{attrs:{label:"区域名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{"show-word-limit":"",placeholder:"请输入",maxlength:50},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"国家",prop:"countryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.countryLoading,placeholder:"请选择",filterable:""},on:{focus:e.getCountryList,change:e.onCountry},model:{value:e.form.countryId,callback:function(t){e.$set(e.form,"countryId",t)},expression:"form.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"fba仓库",prop:"area"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"已选择("+e.form.area.length+")",disabled:""},model:{value:e.s,callback:function(t){e.s=t},expression:"s"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleFba},slot:"append"})],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入",maxlength:100},model:{value:e.form.remark,callback:function(t){e.$set(e.form,"remark",t)},expression:"form.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.cancel}},[e._v("\n        取 消\n      ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSave}},[e._v("\n        确 定\n      ")])],1)],1)],1)},se=[];a("55dd");function ce(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ue(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ce(a,!0).forEach(function(t){Object(q["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ce(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var de=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.dialogShow=!1,e.dialogLoading=!1,e.isEdit=!1,e.tableData=[],e.copyList=[],e.searchForm={countryId:"",name:""},e.form={countryId:"",countryName:"",area:[],name:"",remark:""},e.countryList=[],e.fbaList=[],e.countryLoading=!1,e.formLoading=!1,e.page=1,e.size=10,e.total=0,e.s="",e.isItemDialogShow=!1,e.formRules={name:[{required:!0,message:"区域名称不能为空",trigger:"blur"}],countryId:{required:!0,message:"请选择国家/地区",trigger:"change"},area:{required:!0,message:"请选择fba仓库",trigger:"change"}},e}return Object(c["a"])(t,e),Object(l["a"])(t,[{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a={model:{type:"3",countryId:this.searchForm.countryId,name:this.searchForm.name},page:this.page,size:this.size};x(a).then(function(e){t.loading=!1,t.tableData=e.data.result||[],t.total=e.data.total}).catch(function(e){return t.loading=!1,e})}},{key:"itemDialogClose",value:function(){this.isItemDialogShow=!1;var e=this.$refs.transferItem;e.clearQuery("left"),e.clearQuery("right")}},{key:"filterMethod",value:function(e,t){return t.label.toUpperCase().indexOf(e.toUpperCase())>-1}},{key:"handleFba",value:function(){this.isItemDialogShow=!0}},{key:"filterFunc",value:function(e){var t=e||[],a=t.map(function(e){return e.warehouseName});return a.join(", ")}},{key:"addArea",value:function(){this.dialogShow=!0,this.isEdit=!1}},{key:"editForm",value:function(e){this.isEdit=!0;var t=e.name,a=e.remark,r=e.countryId,n=e.result,i=e.id,l=n.map(function(e){return e.warehouseId});this.copyList=JSON.parse(JSON.stringify(n)),this.form={name:t,countryId:r,remark:a,area:l,id:i},this.getCountryList(),this.getFbaList(),this.dialogShow=!0}},{key:"onCountry",value:function(){this.form.area=[],this.fbaList=[],this.getFbaList()}},{key:"confirmSave",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=e.form,r=a.area,n=a.countryId,i=a.name,l=a.remark,o=a.id,s=(e.countryList.find(function(e){return e.id===n})||{}).name,c=r.map(function(t){var a=e.fbaList.find(function(e){return e.id===t});if(a){var r=a.id,n=a.code;return{warehouseId:r,warehouseName:n}}}).filter(function(e){return e&&e.warehouseId&&e.warehouseName}),u=c.map(function(t){var a=e.copyList.every(function(e){return t.warehouseId!==e.warehouseId});if(a)return ue({},t,{id:o,type:"3",countryId:n,countryName:s,name:i,remark:l})}).filter(function(e){return e&&e.warehouseId&&e.warehouseName}),d=e.copyList.map(function(e){if(c.every(function(t){return e.warehouseId!==t.warehouseId}))return e.id}).filter(function(e){return e});S({areaType:{id:o,name:i,remark:l,countryId:n,countryName:s,parentId:"0",type:"3"},delList:d,insList:u}).then(function(t){e.$message({type:"success",message:"操作成功"}),e.dialogShow=!1,e.formLoading=!1,e.queryAll(),e.resetForm(),e.clearValidate()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"deleteData",value:function(e){var t=this,a=e.id;this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:a};w(e).then(function(e){t.$message({type:"success",message:"操作成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"cancel",value:function(){this.dialogShow=!1,this.fbaList=[],this.resetForm(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this;this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"resetForm",value:function(){this.form={countryId:"",countryName:"",area:[],name:"",remark:""}}},{key:"getCountryList",value:function(){var e=this;this.countryLoading=!0,L().then(function(t){e.countryList=(t.data.result||[]).map(function(e){return e.alias&&(e.name=e.name+"-"+e.alias),e}),e.countryLoading=!1}).catch(function(t){return e.countryLoading=!1,t})}},{key:"getFbaList",value:function(){var e=this;if(this.form.countryId){var t={countryId:this.form.countryId,page:1,size:99999};b(t).then(function(t){var a=t.data||{},r=(a.result||[]).filter(function(e){return"1"===e.status}),n=r.map(function(e){var t=e.code,a=e.id,r=e.postal,n=e.stateName;return{id:a,code:t,postal:r,stateName:n,label:t+"-"+r+"-"+n}});e.fbaList=n.sort(function(e,t){return e.label.localeCompare(t.label)})}).catch(function(e){return e})}else this.$message.error("请先选择国家")}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll()}}]),t}(d["e"]);de=u["a"]([Object(d["a"])({name:"OperatingCenter",components:{},props:{wsId:{type:String,default:""}}})],de);var me=de,fe=me,he=(a("4275"),Object(j["a"])(fe,oe,se,!1,null,"418f2ca9",null)),pe=he.exports,ge=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.activeName="first",e}return Object(c["a"])(t,e),Object(l["a"])(t,[{key:"handleClick",value:function(e,t){}},{key:"labelPosition",get:function(){var e=m["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=m["a"].language;return e||"en"}}]),t}(d["e"]);ge=u["a"]([Object(d["a"])({name:"",components:{internalData:N,citiesData:W,countriesData:le,warehousesData:pe},props:{}})],ge);var ye=ge,ve=ye,be=Object(j["a"])(ve,r,n,!1,null,"e9e837da",null);t["default"]=be.exports},"2b43":function(e,t,a){"use strict";var r=a("7e76"),n=a.n(r);n.a},4018:function(e,t,a){"use strict";var r=a("c641"),n=a.n(r);n.a},4275:function(e,t,a){"use strict";var r=a("af55"),n=a.n(r);n.a},"7e76":function(e,t,a){},af55:function(e,t,a){},bd7a:function(e,t,a){"use strict";var r=a("0150"),n=a.n(r);n.a},be20:function(e,t,a){},c641:function(e,t,a){},ecb5:function(e,t,a){"use strict";var r=a("be20"),n=a.n(r);n.a}}]);