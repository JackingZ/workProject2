(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["task-document"],{"426b":function(e,t,a){},"5a68":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info",{attrs:{info:"",title:"任务单证"}}),a("div",{staticClass:"app-panel"},[a("el-row",[a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[a("el-input",{staticStyle:{width:"300px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.selectValue.name,callback:function(t){e.$set(e.selectValue,"name",t)},expression:"selectValue.name"}},[a("template",{slot:"prepend"},[e._v("\n                任务单名称\n              ")])],2),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ttskQuery"],expression:"['ttskQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[a("el-table-column",{attrs:{prop:"name",label:"任务单名称"}}),a("el-table-column",{attrs:{prop:"time",label:"任务时长(分钟)"}}),a("el-table-column",{attrs:{prop:"serviceTypeName",label:"关联服务大类"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"添加时间"}}),a("el-table-column",{attrs:{fixed:"right",width:"150",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ttskUpdate"],expression:"['ttskUpdate']"}],attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("\n                编辑\n              ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{attrs:{title:"编辑任务单",visible:e.isAddEditVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.isAddEditVisible=t},closed:e.cancel}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,"label-width":"110px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"任务单名称",prop:"name"}},[a("el-input",{ref:"firstInput",attrs:{maxlength:50,placeholder:"请输入"},model:{value:e.selectForm.name,callback:function(t){e.$set(e.selectForm,"name",t)},expression:"selectForm.name"}})],1),a("el-form-item",{attrs:{label:"任务时间",prop:"time"}},[a("div",{staticClass:"input-capacity"},[a("div",{staticStyle:{flex:"1"}},[a("el-input-number",{staticClass:"input-number-valiate input-border",attrs:{controls:!1,placeholder:"请输入",min:0,max:9999,precision:2},model:{value:e.selectForm.time,callback:function(t){e.$set(e.selectForm,"time",t)},expression:"selectForm.time"}})],1),a("div",{staticClass:"input-unit"},[e._v("\n                  分钟\n                ")])])]),a("el-form-item",{attrs:{label:"关联服务大类",prop:"serviceTypeId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.selectForm.serviceTypeId,callback:function(t){e.$set(e.selectForm,"serviceTypeId",t)},expression:"selectForm.serviceTypeId"}},e._l(e.serviceTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{maxlength:"100",placeholder:"请输入"},model:{value:e.selectForm.remark,callback:function(t){e.$set(e.selectForm,"remark",t)},expression:"selectForm.remark"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancel}},[e._v("\n              取 消\n            ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("\n              确 定\n            ")])],1)],1)],1)],1)])])},r=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("7f7f"),a("bd86")),l=a("d225"),s=a("b0b4"),o=a("308d"),c=a("6bb5"),u=a("4e2b"),p=a("9ab4"),d=a("60a3"),m=a("b32d");function v(e){var t={url:"/setting/task/getTaskList",method:"get",params:e};return Object(m["a"])(t)}function f(e){var t={url:"/setting/task/updateTask",method:"post",data:e};return Object(m["a"])(t)}function b(e){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:e};return Object(m["a"])(t)}function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(a,!0).forEach(function(t){Object(n["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var y=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.selectValue={name:""},e.selectForm={name:void 0,time:void 0,unit:"2",serviceTypeId:void 0,remark:void 0},e.formRules={name:[{required:!0,message:"任务单名称不能为空",trigger:"blur"}],time:[{required:!0,message:"任务时间不能为空",trigger:"blur"}],serviceTypeId:[{required:!0,message:"请选择服务大类",trigger:"change"}]},e.page=1,e.size=10,e.total=0,e.serviceTypeList=[],e.isAddEditVisible=!1,e.formLoading=!1,e}return Object(u["a"])(t,e),Object(s["a"])(t,[{key:"handleEdit",value:function(e){this.isAddEditVisible=!0,this.selectForm=h({},e)}},{key:"cancel",value:function(){var e=this;this.isAddEditVisible=!1,this.selectForm={name:void 0,time:void 0,unit:"2",serviceTypeId:void 0,remark:void 0},this.$nextTick(function(){var t=e.$refs.editForm;t.clearValidate()})}},{key:"confirm",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var a=h({},e.selectForm);e.serviceTypeList.map(function(e){a.serviceTypeId===e.id&&(a.serviceTypeName=e.name)}),f(a).then(function(t){e.$message({type:"success",message:"操作成功"}),e.formLoading=!1,e.cancel(),e.queryAll()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"getServiceTypeList",value:function(){var e=this,t="1",a={custType:t};b(a).then(function(t){var a=t.data||[];e.serviceTypeList=a}).catch(function(e){return e})}},{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var a={name:this.selectValue.name,page:this.page,size:this.size};v(a).then(function(e){t.loading=!1;var a=e.data||{};t.tableData=a.result||[],t.total=a.total}).catch(function(e){return t.loading=!1,e})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"created",value:function(){this.queryAll(),this.getServiceTypeList()}}]),t}(d["e"]);y=p["a"]([Object(d["a"])({name:"Port",components:{},props:{}})],y);var k=y,x=k,w=(a("a9fa"),a("2877")),O=Object(w["a"])(x,i,r,!1,null,"52d39c6c",null);t["default"]=O.exports},a9fa:function(e,t,a){"use strict";var i=a("426b"),r=a.n(i);r.a}}]);