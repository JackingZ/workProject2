(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["examine-config"],{"8ed8":function(e,t,r){"use strict";var a=r("a1b6"),i=r.n(a);i.a},a1b6:function(e,t,r){},ef3b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{staticClass:"app-container"},[r("head-info",{attrs:{info:"",title:"验货配置"}}),r("div",{staticClass:"app-panel"},[r("el-row",[r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:24}},[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lnspectionConfigAdd"],expression:"['lnspectionConfigAdd']"}],staticStyle:{float:"left"},attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addExamine}},[e._v("\n              新增配置\n            ")]),r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{size:"small",clearable:"",filterable:"",placeholder:"验货方式"},model:{value:e.selectValue.type,callback:function(t){e.$set(e.selectValue,"type",t)},expression:"selectValue.type"}},[r("el-option",{attrs:{label:"按产品",value:"0"}}),r("el-option",{attrs:{label:"按比例",value:"2"}})],1),r("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{maxlength:20,size:"small",placeholder:"验货配置名称"},model:{value:e.selectValue.name,callback:function(t){e.$set(e.selectValue,"name",t)},expression:"selectValue.name"}}),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lnspectionConfigQuery"],expression:"['lnspectionConfigQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableData(1)}}},[e._v("\n              查询\n            ")])],1)],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{prop:"name",label:"验货配置名称","min-width":"130"}}),r("el-table-column",{attrs:{prop:"type",label:"验货方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.type?r("span",[e._v("\n                按产品\n              ")]):"2"===t.row.type?r("span",[e._v("\n                按比例\n              ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"degree",formatter:e.formatExamineType,label:"验货程度","min-width":"200"}}),r("el-table-column",{attrs:{prop:"pick",label:"抽箱方式",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.pick?r("span",[e._v("\n                随机\n              ")]):"1"===t.row.pick?r("span",[e._v("\n                指定\n              ")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"是否验证尺寸",width:"150",prop:"size"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v("\n                "+e._s(t.row.size?"是":"否")+"\n              ")])]}}])}),r("el-table-column",{attrs:{fixed:"right",width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lnspectionConfigUpdate"],expression:"['lnspectionConfigUpdate']"}],attrs:{type:"text"},on:{click:function(r){return e.editExamine(t.row)}}},[e._v("\n                编辑\n              ")]),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["lnspectionConfigDel"],expression:"['lnspectionConfigDel']"}],attrs:{type:"text"},on:{click:function(r){return e.deleteExamine(t.row)}}},[e._v("\n                删除\n              ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)]),r("el-dialog",{attrs:{title:e.isEdit?"编辑验货配置":"新增验货配置",visible:e.visible,"close-on-click-modal":!1,width:"1000px"},on:{"update:visible":function(t){e.visible=t},closed:e.cancel}},[r("addEditForm",{ref:"addModel",attrs:{"type-list":e.typeList,"is-edit":e.isEdit},on:{load:e.getTableData,cancel:e.cancel}})],1)],1)},i=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("bd86")),o=(r("7f7f"),r("7514"),r("28a5"),r("d225")),l=r("b0b4"),s=r("308d"),c=r("6bb5"),d=r("4e2b"),m=r("9ab4"),u=r("60a3"),p=r("ac1a"),f=r("b32d");function g(e){var t={url:"/cfg/examine/getExamineList",method:"get",params:e};return Object(f["a"])(t)}function b(e){var t={url:"/cfg/examine/deleteExamine",method:"delete",params:e};return Object(f["a"])(t)}function v(e){var t={url:"/cfg/examine/saveExamine",method:"post",data:e};return Object(f["a"])(t)}var h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,"label-position":"right","label-width":"150px",size:"small"}},[r("el-form-item",{attrs:{label:"验货配置名称",prop:"name"}},[r("el-input",{attrs:{maxlength:20,placeholder:"请输入",size:"small"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{label:"验货方式",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{change:function(t){e.form.ratio=void 0}},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[r("el-option",{attrs:{label:"按产品",value:"0"}}),r("el-option",{attrs:{label:"按比例",value:"2"}})],1)],1),"2"===e.form.type?r("el-form-item",{attrs:{label:"验货比例",prop:"ratio"}},[r("el-input",{attrs:{placeholder:"请输入"},model:{value:e.form.ratio,callback:function(t){e.$set(e.form,"ratio",t)},expression:"form.ratio"}},[r("span",{attrs:{slot:"append"},slot:"append"},[e._v("%")])])],1):e._e(),r("el-form-item",{attrs:{label:"验货程度",prop:"degreeArr"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.form.degreeArr,callback:function(t){e.$set(e.form,"degreeArr",t)},expression:"form.degreeArr"}},e._l(e.typeList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"验货图片保留",prop:"retain"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",placeholder:"请选择"},model:{value:e.form.retain,callback:function(t){e.$set(e.form,"retain",t)},expression:"form.retain"}},e._l(e.imgTime,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"需检验项",prop:"itemsArr"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",clearable:"",multiple:"","collapse-tags":"",placeholder:"请选择"},model:{value:e.form.itemsArr,callback:function(t){e.$set(e.form,"itemsArr",t)},expression:"form.itemsArr"}},e._l(e.examineList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"查验MadeInChina",prop:"micArr"}},[r("el-checkbox-group",{model:{value:e.form.micArr,callback:function(t){e.$set(e.form,"micArr",t)},expression:"form.micArr"}},e._l(e.micList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"外箱查验",prop:"boxArr"}},[r("el-checkbox-group",{model:{value:e.form.boxArr,callback:function(t){e.$set(e.form,"boxArr",t)},expression:"form.boxArr"}},e._l(e.checkList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"产品查验",prop:"goodsArr"}},[r("el-checkbox-group",{model:{value:e.form.goodsArr,callback:function(t){e.$set(e.form,"goodsArr",t)},expression:"form.goodsArr"}},e._l(e.checkList,function(e,t){return r("el-checkbox",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"抽箱方式",prop:"pick"}},[r("el-radio-group",{model:{value:e.form.pick,callback:function(t){e.$set(e.form,"pick",t)},expression:"form.pick"}},[r("el-radio",{attrs:{label:"0"}},[e._v("\n          随机\n        ")]),r("el-radio",{attrs:{label:"1"}},[e._v("\n          指定\n        ")])],1)],1),r("el-form-item",{attrs:{label:"是否验证订单尺寸",prop:"size"}},[r("el-radio-group",{model:{value:e.form.size,callback:function(t){e.$set(e.form,"size",t)},expression:"form.size"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n          是\n        ")])],1)],1),r("el-form-item",{attrs:{label:"是否查验超重标",prop:"overweight"}},[r("el-radio-group",{model:{value:e.form.overweight,callback:function(t){e.$set(e.form,"overweight",t)},expression:"form.overweight"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n          是\n        ")])],1)],1),r("el-form-item",{attrs:{label:"是否查验带电标",prop:"electrified"}},[r("el-radio-group",{model:{value:e.form.electrified,callback:function(t){e.$set(e.form,"electrified",t)},expression:"form.electrified"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n          是\n        ")])],1)],1),r("el-form-item",{attrs:{label:"是否查验危险品标",prop:"danger"}},[r("el-radio-group",{model:{value:e.form.danger,callback:function(t){e.$set(e.form,"danger",t)},expression:"form.danger"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n          是\n        ")])],1)],1),r("el-form-item",{attrs:{label:"是否允许编织袋",prop:"bag"}},[r("el-radio-group",{model:{value:e.form.bag,callback:function(t){e.$set(e.form,"bag",t)},expression:"form.bag"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n          是\n        ")])],1)],1),r("el-form-item",{attrs:{label:"是否允许捆绑",prop:"binding"}},[r("el-radio-group",{model:{value:e.form.binding,callback:function(t){e.$set(e.form,"binding",t)},expression:"form.binding"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n          否\n        ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n          是\n        ")])],1)],1)],1),r("div",{staticStyle:{"text-align":"right",padding:"10px 0px 20px"},attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("\n      取 消\n    ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("\n      确 定\n    ")])],1)],1)},y=[],x=(r("20d6"),r("a8db"));function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function O(){return{name:void 0,type:void 0,ratio:void 0,mic:void 0,micArr:[],degreeArr:[],degree:void 0,retain:void 0,pick:"0",items:void 0,itemsArr:[],size:!1,goods:void 0,goodsArr:[],foreigns:void 0,boxArr:[],binding:!1,custId:void 0,custName:void 0,overweight:!1,bag:!1,danger:!1,electrified:!1,id:void 0}}function A(e,t,r){var a=/^([1-9]\d{0,1}|100)$/;t&&!a.test(t)?r(new Error("比例为1-100的正整数")):r()}var j=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.form=O(),e.formRules={name:[{required:!0,message:"验货配置名称不能为空",trigger:"blur"}],type:[{required:!1,message:"请选择验货方式",trigger:"change"}],micArr:[{required:!1,message:"请选择查验MadeInChina",trigger:"change"}],ratio:[{required:!1,message:"验货比例不能为空",trigger:"blur"},{validator:A,trigger:"blur"}],degreeArr:[{required:!1,message:"请选择验货程度",trigger:"change"}],pick:[{required:!1,message:"请选择抽箱方式",trigger:"change"}],retain:[{required:!1,message:"请选择验货图片保留",trigger:"change"}],itemsArr:[{required:!1,message:"请选择需检验项",trigger:"change"}],size:[{required:!1,message:"请选择是否验证订单尺寸",trigger:"change"}],boxArr:[{required:!1,message:"请选择外箱查验",trigger:"change"}],goodsArr:[{required:!1,message:"请选择产品查验",trigger:"change"}],overweight:[{required:!1,message:"请选择是否查验超重标",trigger:"change"}],electrified:[{required:!1,message:"请选择是否查验带电标",trigger:"change"}],danger:[{required:!1,message:"请选择是否查验危险品标",trigger:"change"}],bag:[{required:!1,message:"请选择是否允许编织袋",trigger:"change"}],binding:[{required:!1,message:"请选择是否允许捆绑",trigger:"change"}]},e.imgTime=[{id:1,name:"1个月"},{id:2,name:"2个月"},{id:3,name:"3个月"},{id:4,name:"4个月"},{id:5,name:"5个月"},{id:6,name:"6个月"},{id:7,name:"7个月"},{id:8,name:"8个月"},{id:9,name:"9个月"},{id:10,name:"10个月"},{id:11,name:"11个月"},{id:12,name:"12个月"}],e.examineList=[{id:"0",name:"售后地址"},{id:"1",name:"厂商信息"},{id:"2",name:"生产批号"},{id:"3",name:"五国说明书"},{id:"4",name:"包装五国文字"}],e.checkList=[{id:"0",name:"原产地"},{id:"1",name:"工厂信息"}],e.micList=[{id:"0",name:"外箱"},{id:"1",name:"内件"}],e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"show",value:function(e){var t=this,r=e.goods,a=e.foreigns,i=e.degree,n=e.items,o=e.mic,l=Object(x["a"])(e,["goods","foreigns","degree","items","mic"]);this.form=w({},l);var s=[],c=[],d=[],m=r.split(",")||[],u=a.split(",")||[],p=o.split(",")||[];m.map(function(e){var r=t.checkList.find(function(t){return t.id===e});s.push((r||{}).name||"")}),u.map(function(e){var r=t.checkList.find(function(t){return t.id===e});c.push((r||{}).name||"")}),p.map(function(e){var r=t.micList.find(function(t){return t.id===e});d.push((r||{}).name||"")}),s=s.filter(function(e){return e}),c=c.filter(function(e){return e}),d=d.filter(function(e){return e});var f=i?i.split(","):[],g=n?n.split(","):[];this.$set(this.form,"degreeArr",f),this.$set(this.form,"itemsArr",g),this.$set(this.form,"goodsArr",s),this.$set(this.form,"boxArr",c),this.$set(this.form,"micArr",d)}},{key:"reset",value:function(){var e=this;this.form=O(),this.$nextTick(function(){var t=e.$refs.form;t.clearValidate()})}},{key:"submit",value:function(){var e=this,t=this.$refs.form;t.validate(function(t){if(!t)return!1;var r=e.form,a=r.goodsArr,i=r.boxArr,n=r.degreeArr,o=r.itemsArr,l=r.micArr,s=Object(x["a"])(r,["goodsArr","boxArr","degreeArr","itemsArr","micArr"]),c=w({},s),d=[],m=[],u=[];a.map(function(t){var r=e.checkList.findIndex(function(e){return e.name===t});r>-1&&d.push(r)}),i.map(function(t){var r=e.checkList.findIndex(function(e){return e.name===t});r>-1&&m.push(r)}),l.map(function(t){var r=e.micList.findIndex(function(e){return e.name===t});r>-1&&u.push(r)}),c.goods=d.join(","),c.foreigns=m.join(","),c.mic=u.join(","),c.degree=n.join(","),c.items=o.join(","),e.loading=!0,v(c).then(function(t){e.loading=!1,e.$message.success("保存成功"),e.$emit("cancel"),e.$emit("load")}).catch(function(t){return e.loading=!1,t})})}},{key:"cancel",value:function(){this.$emit("cancel")}}]),t}(u["e"]);j=m["a"]([Object(u["a"])({name:"",components:{},props:{typeList:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1}}})],j);var _=j,$=_,z=(r("8ed8"),r("2877")),E=Object(z["a"])($,h,y,!1,null,"14006cd7",null),S=E.exports;function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var L=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(s["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.typeList=[{name:"纯电",id:"0"},{name:"带电",id:"1"},{name:"强磁",id:"2"},{name:"弱磁",id:"3"},{name:"液体",id:"4"},{name:"粉末",id:"5"}],e.selectValue={type:void 0,name:void 0},e.page=1,e.size=10,e.total=0,e.isEdit=!1,e.visible=!1,e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"formatExamineType",value:function(e){var t=this,r=e.degree.split(",")||[],a=r.map(function(e){var r=t.typeList.find(function(t){return t.id===e})||{};return r.name});return a.join(",")}},{key:"getTableData",value:function(e){var t=this;e&&(this.page=e);var r=D({},this.selectValue,{page:this.page,size:this.size});this.loading=!0,g(r).then(function(e){var r=e.data||[];t.tableData=r.result||[],t.total=r.total,t.loading=!1}).catch(function(e){return t.loading=!1,e})}},{key:"editExamine",value:function(e){var t=this;this.isEdit=!0,this.visible=!0,this.$nextTick(function(){var r=t.$refs.addModel;r.show(e)})}},{key:"addExamine",value:function(){this.isEdit=!1,this.visible=!0}},{key:"cancel",value:function(){var e=this;this.visible=!1,this.$nextTick(function(){var t=e.$refs.addModel;t.reset()})}},{key:"deleteExamine",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){t.loading=!0,b(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getTableData()}).catch(function(e){return t.loading=!1,e})}).catch(function(){return!1})}},{key:"handleSizeChange",value:function(e){this.size=e,this.getTableData()}},{key:"handleCurrentChange",value:function(e){this.page=e,this.getTableData()}},{key:"created",value:function(){this.getTableData()}},{key:"labelPosition",get:function(){var e=p["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=p["a"].language;return e||"en"}}]),t}(u["e"]);L=m["a"]([Object(u["a"])({name:"",components:{addEditForm:S},props:{}})],L);var P=L,q=P,T=Object(z["a"])(q,a,i,!1,null,"5f3fe048",null);t["default"]=T.exports}}]);