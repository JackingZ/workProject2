(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["customer-management"],{2165:function(e,t,a){},3616:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[a("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[a("div",{staticClass:"app-container"},[a("head-info-with-back",{attrs:{info:"",title:"客户管理","show-back":e.isMoreInfoShow},on:{goback:e.goBack}}),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.isMoreInfoShow,expression:"!isMoreInfoShow"}],staticClass:"app-panel"},[a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:4}},[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customerClientAdd"],expression:"['customerClientAdd']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:e.handleAdd}},[e._v("\n              新增客户\n            ")]),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customerClientExport"],expression:"['customerClientExport']"}],staticStyle:{"margin-left":"10px"},attrs:{type:"text"},on:{click:e.showExportModal}},[e._v("\n              批量导入\n            ")])],1),a("el-col",{staticStyle:{"text-align":"right"},attrs:{span:20}},["0"===e.custType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",filterable:"",clearable:"",placeholder:"一级代理商"},on:{focus:function(t){return e.getAgentList("1")},change:e.onParent},model:{value:e.selectValue.parentId,callback:function(t){e.$set(e.selectValue,"parentId",t)},expression:"selectValue.parentId"}},e._l(e.agentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),"0"===e.custType?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{disabled:!e.selectValue.parentId,loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"二级代理商"},on:{focus:function(t){return e.getAgentList("2")},change:e.onAgent},model:{value:e.selectValue.agentId,callback:function(t){e.$set(e.selectValue,"agentId",t)},expression:"selectValue.agentId"}},e._l(e.agent2List,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"1"===e.custSubtype?a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{size:"small",placeholder:"公司类型"},on:{change:e.onComType},model:{value:e.selectValue.custTag,callback:function(t){e.$set(e.selectValue,"custTag",t)},expression:"selectValue.custTag"}},e._l(e.companyTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1):e._e(),"2"===e.custType&&"1"===e.custSubtype&&"2"===e.selectValue.custTag?a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,size:"small",placeholder:"所属公司",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.selectValue.comId,callback:function(t){e.$set(e.selectValue,"comId",t)},expression:"selectValue.comId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1):e._e(),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"客户类型",clearable:"",size:"small"},model:{value:e.selectValue.subtype,callback:function(t){e.$set(e.selectValue,"subtype",t)},expression:"selectValue.subtype"}},e._l(e.subtypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"国家/地区",clearable:"",size:"small",filterable:""},on:{focus:e.getCountryList,change:e.onCountryChange},model:{value:e.selectValue.countryId,callback:function(t){e.$set(e.selectValue,"countryId",t)},expression:"selectValue.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.selectValue.countryId,placeholder:"州/省",clearable:"",filterable:"",size:"small"},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.selectValue.stateId,callback:function(t){e.$set(e.selectValue,"stateId",t)},expression:"selectValue.stateId"}},e._l(e.stateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,disabled:!e.selectValue.stateId,placeholder:"城市",clearable:"",size:"small",filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.selectValue.cityId,callback:function(t){e.$set(e.selectValue,"cityId",t)},expression:"selectValue.cityId"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"状态",clearable:"",size:"small"},model:{value:e.selectValue.status,callback:function(t){e.$set(e.selectValue,"status",t)},expression:"selectValue.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"审核状态",clearable:"",size:"small"},model:{value:e.selectValue.audit,callback:function(t){e.$set(e.selectValue,"audit",t)},expression:"selectValue.audit"}},e._l(e.auditList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-select",{staticStyle:{width:"100px","margin-right":"5px"},attrs:{placeholder:"签署合同",clearable:"",size:"small"},model:{value:e.selectValue.signContract,callback:function(t){e.$set(e.selectValue,"signContract",t)},expression:"selectValue.signContract"}},e._l(e.signList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),a("el-input",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{size:"small",clearable:"",placeholder:"公司名称"},model:{value:e.selectValue.name,callback:function(t){e.$set(e.selectValue,"name",t)},expression:"selectValue.name"}}),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customerClientQuery"],expression:"['customerClientQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.getTableList(1)}}},[e._v("\n              查询\n            ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{height:"calc(100vh - 330px)",border:"",data:e.list}},[a("el-table-column",{attrs:{label:"公司名称","min-width":"200",prop:"name"}}),a("el-table-column",{attrs:{label:"签署合同",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("span",{staticStyle:{"font-size":"30px","margin-right":"5px"}},[a("strong",[t.row.signContract&&"0"!==t.row.signContract?e._e():a("span",{staticStyle:{color:"#ccc"}},[e._v("\n                    ·\n                  ")]),"1"===t.row.signContract?a("span",{staticStyle:{color:"#4cd964"}},[e._v("\n                    ·\n                  ")]):e._e(),"2"===t.row.signContract?a("span",{staticStyle:{color:"#ff3b30"}},[e._v("\n                    ·\n                  ")]):e._e()])]),a("el-button",{attrs:{disabled:"1"!==t.row.audit,type:"text"},on:{click:function(a){return e.onSignContract(t.row)}}},[e._v("\n                "+e._s((e.signList.find(function(e){return e.id===t.row.signContract})||{}).name)+"\n              ")])],1)}}])}),a("el-table-column",{attrs:{label:"公司类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s((e.subtypeList.find(function(e){return e.id===t.row.subtype})||{}).name)+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"主体类型",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n              "+e._s(e.entityList[t.row.entity])+"\n            ")]}}])}),a("el-table-column",{attrs:{label:"国家/地区",width:"180",prop:"countryName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"州省市区",width:"250","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.row.stateName,expression:"!!scope.row.stateName"}]},[e._v("\n                "+e._s(t.row.stateName)+"\n              ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.row.cityName,expression:"!!scope.row.cityName"}]},[e._v("\n                > "+e._s(t.row.cityName)+"\n              ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!!t.row.countyName,expression:"!!scope.row.countyName"}]},[e._v("\n                > "+e._s(t.row.countyName)+"\n              ")])]}}])}),a("el-table-column",{attrs:{label:"所属上级",width:"250",prop:"parentName","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"关联人员",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$checkPermission(["associatedPersonnel"])?a("span",{staticStyle:{color:"#1890ff",cursor:"pointer"},on:{click:function(a){return e.onPersonal(t.row)}}},[e._v("关联人员")]):a("span",[e._v("关联人员")])]}}])}),a("el-table-column",{attrs:{label:"添加时间",width:"160",prop:"createTime"}}),a("el-table-column",{attrs:{label:"审核状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.audit?a("span",[e._v("待审核")]):"1"===t.row.audit?a("span",[e._v("审核通过")]):"2"===t.row.audit?a("span",[e._v("审核拒绝")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"状态",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticClass:"switchStyle",attrs:{disabled:!e.$checkPermission(["customerClientEnable"]),"active-text":"启用","inactive-text":"禁用","active-value":"1","inactive-value":"0",value:t.row.status},on:{input:function(a){return e.onSwitch(t.row,a)}}})]}}])}),a("el-table-column",{attrs:{label:"操作",width:"240",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$checkPermission(["customerClientGet"])?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.viewTableItem(t.row)}}},[e._v("\n                查看\n              ")]):e._e(),e.$checkPermission(["customerClientUpdate"])?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editTableItem(t.row)}}},[e._v("\n                编辑\n              ")]):e._e(),"2"===e.selectValue.custTag&&"280b587801744450a6b5aa3155c25e61"===e.custId?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.editCompany(t.row)}}},[e._v("\n                修改归属\n              ")]):e._e(),"1"!==t.row.audit&&e.$checkPermission(["customerClientReview"])?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.checkTableItem(t.row)}}},[e._v("\n                审核\n              ")]):e._e(),"1"!==t.row.audit&&e.$checkPermission(["customerClientDel"])?a("el-button",{attrs:{type:"text",size:"medium"},on:{click:function(a){return e.deleteTableItem(t.row)}}},[e._v("\n                删除\n              ")]):e._e(),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["customerClientMore"],expression:"['customerClientMore']"}],attrs:{type:"text",size:"medium"},on:{click:function(a){return e.handleTableMore(t.row)}}},[e._v("\n                更多\n              ")])]}}])})],1),a("el-pagination",{staticStyle:{"text-align":"right"},attrs:{layout:"total, prev, pager, next","current-page":e.page,"page-size":e.size,total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),a("el-dialog",{staticClass:"customer-dialog",attrs:{title:e.isEdit?"编辑客户":"新增客户",width:"1200px",visible:e.dialogEditShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogEditShow=t},closed:e.clearForm}},[a("addEditForm",{ref:"addEditForm",attrs:{"is-edit":e.isEdit,"subtype-list":e.subtypeList,"company-type-list":e.companyTypeList},on:{close:function(t){e.dialogEditShow=!1},getTableList:e.getTableList}})],1),a("el-dialog",{attrs:{title:"查看客户",width:"1200px",visible:e.dialogViewShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogViewShow=t},closed:e.closeForm}},[a("viewForm",{ref:"viewForm",attrs:{"subtype-list":e.subtypeList,"company-type-list":e.companyTypeList,"sign-list":e.signList},on:{close:function(t){e.dialogViewShow=!1}}})],1),a("el-dialog",{attrs:{title:"关联人员",width:"600px",visible:e.dialogPersonalShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogPersonalShow=t},closed:function(t){e.dialogPersonalShow=!1}}},[a("personalForm",{ref:"personalForm",attrs:{"sc-type":e.scType2},on:{close:function(t){e.dialogPersonalShow=!1},getTableList:e.getTableList}})],1),a("el-dialog",{attrs:{title:"审核",width:"1000px",visible:e.dialogCheckShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCheckShow=t},closed:function(t){e.dialogCheckShow=!1}}},[a("checkForm",{ref:"checkForm",on:{close:function(t){e.dialogCheckShow=!1},getTableList:e.getTableList}})],1),a("el-dialog",{attrs:{title:"修改所属公司",width:"500px",visible:e.dialogCompanyShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogCompanyShow=t},closed:e.clearCompany}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.companyLoading,expression:"companyLoading"}]},[a("el-form",{ref:"companyForm",staticStyle:{padding:"10px 20px 0 0"},attrs:{model:e.companyForm,rules:e.companyRules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"所属上级",prop:"custName"}},[e._v("\n                "+e._s(e.companyForm.custName)+"\n              ")]),a("el-form-item",{attrs:{label:"新公司",prop:"parentId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",placeholder:"请选择",filterable:"",clearable:""},on:{focus:e.getCompanyList},model:{value:e.companyForm.parentId,callback:function(t){e.$set(e.companyForm,"parentId",t)},expression:"companyForm.parentId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.clearCompany}},[e._v("\n                取 消\n              ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmCompany}},[e._v("\n                确 定\n              ")])],1)],1)])],1),a("attach-info",{directives:[{name:"show",rawName:"v-show",value:e.isMoreInfoShow,expression:"isMoreInfoShow"}],ref:"attachInfo",attrs:{"current-cust-id":e.currentCustId,"current-cust-type":e.currentCustType}})],1)]),a("el-dialog",{attrs:{title:"批量导入",width:"500px",visible:e.visible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.visible=t},closed:e.cancelExport}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.exportLoading,expression:"exportLoading"}]},[a("p",[e._v("下载模板导入客户信息")]),e.exportCustomerErrorList.length?a("p",{staticStyle:{color:"red"}},[e._v("\n        "+e._s("导入失败"+e.exportCustomerErrorList.length+"条："+e.exportCustomerErrorList.join("，"))+"\n      ")]):e._e(),a("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{size:"small"},on:{click:e.downloadFile}},[e._v("\n          模板下载\n        ")]),a("el-upload",{attrs:{action:"",multiple:!1,"show-file-list":!1,"http-request":e.uploadFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("\n            导入excel\n          ")])],1)],1)])]),a("el-dialog",{attrs:{title:"修改合同状态",width:"600px",visible:e.dialogSignShow,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogSignShow=t},closed:e.clearSign}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.companyLoading,expression:"companyLoading"}]},[a("el-form",{ref:"signForm",staticStyle:{padding:"10px 20px 0 0"},attrs:{model:e.signForm,rules:e.signRules,"label-width":"100px",size:"small"}},[a("el-form-item",{attrs:{label:"签署合同",prop:"status"}},[a("el-radio-group",{model:{value:e.signForm.status,callback:function(t){e.$set(e.signForm,"status",t)},expression:"signForm.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("\n              未签署\n            ")]),a("el-radio",{attrs:{label:"1"}},[e._v("\n              已签署\n            ")]),a("el-radio",{attrs:{label:"2"}},[e._v("\n              已注销\n            ")])],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.clearSign}},[e._v("\n          取 消\n        ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSign}},[e._v("\n          确 定\n        ")])],1)],1)])],1)},r=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("7f7f"),a("a8db")),s=a("bd86"),o=(a("96cf"),a("3b8d")),l=a("d225"),c=a("b0b4"),u=a("308d"),d=a("6bb5"),m=a("4e2b"),p=a("9ab4"),g=a("60a3"),h=a("9dba"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}]},[a("el-form",{ref:"detailForm",staticClass:"customer-form",attrs:{model:e.detailForm,rules:e.formRules,"label-width":"100px","label-position":"right",size:"small"}},[e.isEdit||"0"!==e.custType?e._e():a("el-form-item",{attrs:{label:"一级代理商",prop:"parentId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",filterable:"",clearable:"",placeholder:"请选择"},on:{focus:function(t){return e.getAgentList("1")},change:e.onParent},model:{value:e.detailForm.parentId,callback:function(t){e.$set(e.detailForm,"parentId",t)},expression:"detailForm.parentId"}},e._l(e.agentList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e.isEdit||"0"!==e.custType?e._e():a("el-form-item",{attrs:{label:"二级代理商",prop:""}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:!e.detailForm.parentId,loading:e.selectLoading,size:"small",clearable:"",filterable:"",placeholder:"请选择"},on:{focus:function(t){return e.getAgentList("2")},change:e.onAgent},model:{value:e.detailForm.agentId,callback:function(t){e.$set(e.detailForm,"agentId",t)},expression:"detailForm.agentId"}},e._l(e.agent2List,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e.isEdit||"2"!==e.custType||"1"!==e.custSubtype?e._e():a("el-form-item",{attrs:{label:"公司类型",prop:"custTag"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{size:"small",placeholder:"请选择"},on:{change:e.onComType},model:{value:e.detailForm.custTag,callback:function(t){e.$set(e.detailForm,"custTag",t)},expression:"detailForm.custTag"}},e._l(e.companyTypeList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e.isEdit||"2"!==e.custType||"1"!==e.custSubtype||"2"!==e.detailForm.custTag?e._e():a("el-form-item",{attrs:{label:"所属公司",prop:"comId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,size:"small",placeholder:"请选择",filterable:"",clearable:""},on:{change:e.onCompany,focus:e.getCompanyList},model:{value:e.detailForm.comId,callback:function(t){e.$set(e.detailForm,"comId",t)},expression:"detailForm.comId"}},e._l(e.companyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"主体类型",prop:"entity"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},on:{change:e.onEntity},model:{value:e.detailForm.entity,callback:function(t){e.$set(e.detailForm,"entity",t)},expression:"detailForm.entity"}},e._l(e.entityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"1"===e.detailForm.entity?"公司全称":"个人全称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",clearable:"",maxlength:50,placeholder:"请输入"},model:{value:e.detailForm.name,callback:function(t){e.$set(e.detailForm,"name",t)},expression:"detailForm.name"}})],1),a("el-form-item",{attrs:{label:"1"===e.detailForm.entity?"公司简称":"个人简称",prop:"abbr"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",clearable:"",maxlength:10,placeholder:"请输入","show-word-limit":""},model:{value:e.detailForm.abbr,callback:function(t){e.$set(e.detailForm,"abbr",t)},expression:"detailForm.abbr"}})],1),a("el-form-item",{attrs:{label:"客户类型",prop:"subtype"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.detailForm.subtype,callback:function(t){e.$set(e.detailForm,"subtype",t)},expression:"detailForm.subtype"}},e._l(e.subtypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"英文名称",prop:"alias"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",clearable:"",maxlength:50,placeholder:"请输入"},model:{value:e.detailForm.alias,callback:function(t){e.$set(e.detailForm,"alias",t)},expression:"detailForm.alias"}})],1),a("el-form-item",{attrs:{label:"国家/地区",prop:"countryId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"国家/地区",clearable:"",size:"small",filterable:""},on:{focus:e.getCountryList,change:e.onCountryChange},model:{value:e.detailForm.countryId,callback:function(t){e.$set(e.detailForm,"countryId",t)},expression:"detailForm.countryId"}},e._l(e.countryList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"州/省",prop:"stateId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.detailForm.countryId,filterable:""},on:{focus:e.getStateList,change:e.onStateChange},model:{value:e.detailForm.stateId,callback:function(t){e.$set(e.detailForm,"stateId",t)},expression:"detailForm.stateId"}},e._l(e.stateList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"城市",prop:"cityId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",disabled:!e.detailForm.stateId,filterable:""},on:{focus:e.getCityList,change:e.onCityChange},model:{value:e.detailForm.cityId,callback:function(t){e.$set(e.detailForm,"cityId",t)},expression:"detailForm.cityId"}},e._l(e.cityList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"区/县",prop:"countyId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"区/县",clearable:"",disabled:!e.detailForm.cityId,filterable:""},on:{focus:e.getCountyList},model:{value:e.detailForm.countyId,callback:function(t){e.$set(e.detailForm,"countyId",t)},expression:"detailForm.countyId"}},e._l(e.countyList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"-"+e.alias,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"总分标识",prop:"branch"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.detailForm.branch,callback:function(t){e.$set(e.detailForm,"branch",t)},expression:"detailForm.branch"}},e._l(e.branchList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"合作期限",prop:"cooperate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","unlink-panels":"",size:"small","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.detailForm.cooperate,callback:function(t){e.$set(e.detailForm,"cooperate",t)},expression:"detailForm.cooperate"}})],1),a("el-form-item",{attrs:{label:"添加来源",prop:"source"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.detailForm.source,callback:function(t){e.$set(e.detailForm,"source",t)},expression:"detailForm.source"}},e._l(e.sourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"客户来源",prop:"custSource"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.detailForm.custSource,callback:function(t){e.$set(e.detailForm,"custSource",t)},expression:"detailForm.custSource"}},e._l(e.CustSourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"证件信息",prop:"certNumber"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入内容",clearable:"",size:"small",maxlength:20},model:{value:e.detailForm.certNumber,callback:function(t){e.$set(e.detailForm,"certNumber",t)},expression:"detailForm.certNumber"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{slot:"prepend",size:"small",placeholder:"请选择"},slot:"prepend",model:{value:e.detailForm.certType,callback:function(t){e.$set(e.detailForm,"certType",t)},expression:"detailForm.certType"}},e._l(e.certTypeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1)],1),a("el-form-item",{attrs:{prop:"",label:"客户编码"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:e.isEdit&&e.ifCode,clearable:"",size:"small",maxlength:25},model:{value:e.detailForm.custCode,callback:function(t){e.$set(e.detailForm,"custCode",t)},expression:"detailForm.custCode"}})],1),"1"===e.detailForm.entity?a("div",[a("div",{staticClass:"form-line"}),a("el-form-item",{attrs:{label:"营业执照",prop:"licenseCode"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",clearable:"",maxlength:20,placeholder:"请输入","show-word-limit":""},model:{value:e.detailForm.licenseCode,callback:function(t){e.$set(e.detailForm,"licenseCode",t)},expression:"detailForm.licenseCode"}})],1),a("el-form-item",{attrs:{label:"成立日期",prop:"setupDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"picker-options":e.pickerOptions,type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"年/月/日"},model:{value:e.detailForm.setupDate,callback:function(t){e.$set(e.detailForm,"setupDate",t)},expression:"detailForm.setupDate"}})],1),a("el-form-item",{attrs:{prop:"companySize",label:"公司规模"}},[a("el-input",{attrs:{placeholder:"请输入",clearable:"",maxlength:100},on:{blur:e.companySizeBlur},model:{value:e.detailForm.companySize,callback:function(t){e.$set(e.detailForm,"companySize",t)},expression:"detailForm.companySize"}},[a("span",{attrs:{slot:"append"},slot:"append"},[e._v("\n            人\n          ")])])],1),a("el-form-item",{attrs:{prop:"registeredCapital",label:"注册资金"}},[a("el-input-number",{staticClass:"input-number-valiate",attrs:{controls:!1,placeholder:"请输入",min:0,max:999999999999,precision:2},model:{value:e.detailForm.registeredCapital,callback:function(t){e.$set(e.detailForm,"registeredCapital",t)},expression:"detailForm.registeredCapital"}})],1),a("el-form-item",{attrs:{prop:"saleType",label:"销售类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:"",filterable:"",size:"small"},model:{value:e.detailForm.saleType,callback:function(t){e.$set(e.detailForm,"saleType",t)},expression:"detailForm.saleType"}},[a("el-option",{attrs:{label:"平台",value:"1"}}),a("el-option",{attrs:{label:"线下",value:"2"}})],1)],1),a("el-form-item",{attrs:{prop:"platform",label:"平台"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{loading:e.selectLoading,placeholder:"请选择",clearable:"",filterable:"",size:"small"},on:{focus:e.getPlatList},model:{value:e.detailForm.platform,callback:function(t){e.$set(e.detailForm,"platform",t)},expression:"detailForm.platform"}},e._l(e.platList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),a("el-form-item",{attrs:{label:"公司法人",prop:"legal"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",clearable:"",maxlength:20,placeholder:"请输入"},model:{value:e.detailForm.legal,callback:function(t){e.$set(e.detailForm,"legal",t)},expression:"detailForm.legal"}})],1),a("el-form-item",{attrs:{label:"证照地址",prop:"licenseAddress"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{type:"text",clearable:"",maxlength:100,placeholder:"请输入"},model:{value:e.detailForm.licenseAddress,callback:function(t){e.$set(e.detailForm,"licenseAddress",t)},expression:"detailForm.licenseAddress"}})],1),a("el-form-item",{attrs:{prop:"storeLink",label:"店铺链接"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",maxlength:50},model:{value:e.detailForm.storeLink,callback:function(t){e.$set(e.detailForm,"storeLink",t)},expression:"detailForm.storeLink"}})],1),a("el-form-item",{attrs:{prop:"brand",label:"品牌"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",maxlength:50},model:{value:e.detailForm.brand,callback:function(t){e.$set(e.detailForm,"brand",t)},expression:"detailForm.brand"}})],1),a("el-form-item",{attrs:{prop:"trademark",label:"驰名商标"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{clearable:"",size:"small",maxlength:50},model:{value:e.detailForm.trademark,callback:function(t){e.$set(e.detailForm,"trademark",t)},expression:"detailForm.trademark"}})],1)],1):e._e(),a("el-form-item",{staticClass:"is-required",staticStyle:{width:"100%","margin-bottom":"0"},attrs:{label:"证照上传"}},["1"===e.detailForm.entity?a("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[a("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeUpload1,"on-change":e.changeFile1}},[e.img1Url?a("div",{staticClass:"img-show"},[a("img",{staticClass:"avatar-img",attrs:{src:e.img1Url}}),a("span",{staticClass:"img-action",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.showImgMagnify("img1Url")}}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.removeFile("img1Url")}}})])]):a("i",{staticClass:"el-icon-plus avatar-icon"})]),a("div",{staticStyle:{"line-height":"20px","text-align":"center"}},[e._v("\n          营业执照\n        ")])],1):e._e(),a("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[a("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeUpload2,"on-change":e.changeFile2}},[e.img2Url?a("div",{staticClass:"img-show"},[a("img",{staticClass:"avatar-img",attrs:{src:e.img2Url}}),a("span",{staticClass:"img-action",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.showImgMagnify("img2Url")}}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.removeFile("img2Url")}}})])]):a("i",{staticClass:"el-icon-plus avatar-icon"})]),a("div",{staticStyle:{"line-height":"20px","text-align":"center"}},[e._v("\n          身份证正面照\n        ")])],1),a("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[a("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,"before-upload":e.beforeUpload3,"on-change":e.changeFile3}},[e.img3Url?a("div",{staticClass:"img-show"},[a("img",{staticClass:"avatar-img",attrs:{src:e.img3Url}}),a("span",{staticClass:"img-action",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.showImgMagnify("img3Url")}}}),a("i",{staticClass:"el-icon-delete",on:{click:function(t){return t.stopPropagation(),e.removeFile("img3Url")}}})])]):a("i",{staticClass:"el-icon-plus avatar-icon"})]),a("div",{staticStyle:{"line-height":"20px","text-align":"center"}},[e._v("\n          身份证反面照\n        ")])],1)])],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{on:{click:e.cancel}},[e._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("\n      确 定\n    ")])],1),a("el-dialog",{attrs:{title:"证照图片",visible:e.imgShow,"close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.imgShow=t},closed:function(t){e.imgShow=!1}}},[a("img",{staticStyle:{display:"block",height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e.imgUrl}})])],1)},v=[],y=(a("28a5"),a("7514"),a("5a0c")),b=a.n(y),k=a("9efa");function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(a,!0).forEach(function(t){Object(s["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function L(){return{abbr:void 0,subtype:void 0,parentId:void 0,parentName:void 0,agentId:void 0,agentName:void 0,comId:void 0,comName:void 0,custTag:"1",alias:void 0,countyId:void 0,stateId:void 0,cityId:void 0,countryName:void 0,stateName:void 0,cityName:void 0,countyName:void 0,branch:void 0,cooperate:void 0,source:void 0,custSource:void 0,entity:"0",name:void 0,licenseCode:void 0,setupDate:void 0,legal:void 0,certType:"0",licenseAddress:void 0,certNumber:void 0,storeLink:void 0,brand:void 0,trademark:void 0,cooperationAmount:void 0,saleType:void 0,platform:void 0,companySize:void 0,custCode:void 0,registeredCapital:void 0,signContract:void 0,img1Data:void 0,img2Data:void 0,img3Data:void 0}}var x=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.detailForm=L(),e.formRules={abbr:[{required:!0,message:"简称不能为空",trigger:"blur"}],subtype:[{required:!0,message:"请选择客户类型",trigger:"change"}],parentId:[{required:!0,message:"请选择一级代理商",trigger:"change"}],custTag:[{required:!0,message:"请选择公司类型",trigger:"change"}],comId:[{required:!0,message:"请选择分公司",trigger:"change"}],alias:[{required:!0,message:"英文名称不能为空",trigger:"blur"},{validator:function(e,t,a){var i=/[\u4e00-\u9fa5]/;t?i.test(t)?a(new Error("英文名称不能有中")):a():a(new Error("英文名称不能为空"))},trigger:"blur"}],countryId:[{required:!0,message:"请选择国家/地区",trigger:"change"}],stateId:[{required:!0,message:"请选择州/省",trigger:"change"}],cityId:[{required:!0,message:"请选择城市",trigger:"change"}],countyId:[{required:!1,message:"请选择区/县",trigger:"change"}],branch:[{required:!0,message:"请选择总分标识",trigger:"change"}],cooperate:[{required:!0,message:"请选择合作期限",trigger:"change"},{validator:function(e,t,a){t?Array.isArray(t)&&t[0]===t[1]?a(new Error("合作期格式开始日期必须小于结束日期")):a():a(new Error("请选择合作期限"))},trigger:"change"}],source:[{required:!0,message:"请选择添加来源",trigger:"change"}],entity:[{required:!0,message:"请选择主体类型",trigger:"change"}],certNumber:[{required:!0,message:"证件信息不能为空",trigger:"blur"}],name:[{required:!0,message:"全称不能为空",trigger:"blur"}],licenseCode:[{required:!0,message:"营业执照不能为空",trigger:"blur"}],setupDate:[{required:!0,message:"请选择成立日期",trigger:"change"}],legal:[{required:!0,message:"公司法人不能为空",trigger:"blur"}],licenseAddress:[{required:!0,message:"证照地址不能为空",trigger:"blur"}],saleType:[{required:!0,message:"请选择销售类型",trigger:"change"}],platform:[{required:!0,message:"请选择平台",trigger:"change"}],companySize:[{required:!0,message:"公司规模不能为空",trigger:"blur"}],registeredCapital:[{required:!0,message:"注册资金不能为空",trigger:"blur"}],cooperationAmount:[{required:!0,message:"合作金额不能为空",trigger:"blur"}]},e.branchList=[{name:"总部",id:"0"},{name:"分公司",id:"1"}],e.entityList=[{name:"个人",id:"0"},{name:"企业",id:"1"}],e.sourceList=[{name:"自助注册",id:"0"},{name:"邀请注册",id:"1"},{name:"后台添加",id:"2"}],e.CustSourceList=[{name:"业务自主开发",id:"1"},{name:"市场部",id:"2"},{name:"总经办",id:"3"},{name:"客户转介绍",id:"4"},{name:"其他",id:"5"}],e.certTypeList=[{name:"身份证",id:"0"},{name:"其它证件",id:"1"}],e.props={value:"id",label:"name"},e.detailLoading=!1,e.selectLoading=!1,e.agentList=[],e.agent2List=[],e.countryList=[],e.platList=[],e.stateList=[],e.cityList=[],e.countyList=[],e.companyList=[],e.fileList=[],e.activeName="first",e.ifCode=!1,e.imgShow=!1,e.imgUrl="",e.img1Url="",e.img2Url="",e.img3Url="",e.file1="",e.file2="",e.file3="",e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"companySizeBlur",value:function(){var e=/^[0-9]*$/;e.test(this.detailForm.companySize)||(this.detailForm.companySize="")}},{key:"setData",value:function(e){this.ifCode=!!e.custCode,this.getCountryList(),this.getPlatList(),this.getItemDetail(e.id)}},{key:"handleClick",value:function(){}},{key:"onParent",value:function(){this.agent2List=[],this.detailForm.agentId=void 0,this.detailForm.agentName=void 0}},{key:"onAgent",value:function(e){this.detailForm.agentName=void 0;var t=this.agent2List.find(function(t){return t.id===e});t&&(this.detailForm.agentName=t.name)}},{key:"getAgentList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(k["g"])({page:1,size:999999,parentId:"1"===t?this.custId:this.detailForm.parentId}).then(function(e){var i=e.data||{},r=i.result||[];"1"===t?a.agentList=r:a.agent2List=r,a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"onComType",value:function(){this.detailForm.comId="",this.detailForm.comName="",this.detailForm.custId="",this.detailForm.custName="","1"===this.detailForm.custTag&&(this.detailForm.custId=this.custId,this.detailForm.custName=this.custName)}},{key:"onCompany",value:function(){var e=this;this.detailForm.comName="";var t=this.companyList.find(function(t){return t.id===e.detailForm.comId});t&&(this.detailForm.comName=t.name)}},{key:"getCompanyList",value:function(){var e=this;this.selectLoading=!0,Object(k["o"])().then(function(t){var a=t.data||[];e.companyList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getPlatList",value:function(){var e=this;this.selectLoading=!0,Object(k["r"])({type:"CUST_PLATFORM"}).then(function(t){var a=t.data||[];e.platList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(k["i"])().then(function(t){var a=t.data||{};e.countryList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.detailForm.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(k["n"])(this.detailForm.countryId).then(function(e){t.selectLoading=!1;var a=e.data||{},i=a.result||[];t.stateList=i}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.detailForm.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(k["h"])(this.detailForm.stateId).then(function(e){t.selectLoading=!1;var a=e.data||{},i=a.result||[];t.cityList=i}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountyList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.detailForm.cityId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(k["j"])(this.detailForm.cityId).then(function(e){var a=e.data||{},i=a.result||[];t.countyList=i,t.selectLoading=!1}).catch(function(){t.countyList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.detailForm.stateId="",this.onStateChange();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(){this.detailForm.cityId="",this.onCityChange()}},{key:"onCityChange",value:function(){this.detailForm.countyId=""}},{key:"onEntity",value:function(){"1"!==this.detailForm.entity&&(this.detailForm.name=void 0,this.detailForm.licenseCode=void 0,this.detailForm.setupDate=void 0,this.detailForm.legal=void 0,this.detailForm.licenseAddress=void 0,this.detailForm.storeLink=void 0,this.detailForm.brand=void 0,this.detailForm.trademark=void 0,this.detailForm.cooperationAmount=void 0,this.detailForm.saleType=void 0,this.detailForm.platform=void 0,this.detailForm.companySize=void 0,this.detailForm.registeredCapital=void 0)}},{key:"showImgMagnify",value:function(e){this.imgShow=!0,this.imgUrl="img1Url"===e?this.img1Url:"img2Url"===e?this.img2Url:this.img3Url}},{key:"uploadFile",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("1"!==this.detailForm.entity||!this.file1){e.next=3;break}return e.next=3,this.$upload(!1,this.file1.raw,"jht-admin/companys/customer/business-license/".concat(b()().valueOf()+"/"+this.file1.name)).then(function(e){t.detailForm.img1Data={path:e.data||"",name:t.file1.name,type:"1"}}).catch(function(e){return t.$message.error("文件上传失败"),t.detailLoading=!1,e});case 3:if(!this.file2){e.next=6;break}return e.next=6,this.$upload(!1,this.file2.raw,"jht-admin/companys/customer/business-license/".concat(b()().valueOf()+"/"+this.file2.name)).then(function(e){t.detailForm.img2Data={path:e.data||"",name:t.file2.name,type:"2"}}).catch(function(e){return t.$message.error("文件上传失败"),t.detailLoading=!1,e});case 6:if(!this.file3){e.next=9;break}return e.next=9,this.$upload(!1,this.file3.raw,"jht-admin/companys/customer/business-license/".concat(b()().valueOf()+"/"+this.file3.name)).then(function(e){t.detailForm.img3Data={path:e.data||"",name:t.file3.name,type:"3"}}).catch(function(e){return t.$message.error("文件上传失败"),t.detailLoading=!1,e});case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"changeFile1",value:function(e,t){this.file1=e,this.img1Url=URL.createObjectURL(e.raw)}},{key:"changeFile2",value:function(e,t){this.file2=e,this.img2Url=URL.createObjectURL(e.raw)}},{key:"changeFile3",value:function(e,t){this.file3=e,this.img3Url=URL.createObjectURL(e.raw)}},{key:"removeFile",value:function(e){switch(e){case"img1Url":this.img1Url="",this.detailForm.img1Data="";break;case"img2Url":this.img2Url="",this.detailForm.img2Data="";break;case"img3Url":this.img3Url="",this.detailForm.img3Data="";break;default:break}}},{key:"beforeUpload1",value:function(e){var t=-1!==e.type.indexOf("image"),a=e.size/1024/1024<2;return t||this.$message.error("上传照片只能是图片格式!"),a||this.$message.error("上传照片大小不能超过 2MB!"),t&&a||this.removeFile("img1Url"),t&&a}},{key:"beforeUpload2",value:function(e){var t=-1!==e.type.indexOf("image"),a=e.size/1024/1024<2;return t||this.$message.error("上传照片只能是图片格式!"),a||this.$message.error("上传照片大小不能超过 2MB!"),t&&a||this.removeFile("img2Url"),t&&a}},{key:"beforeUpload3",value:function(e){var t=-1!==e.type.indexOf("image"),a=e.size/1024/1024<2;return t||this.$message.error("上传照片只能是图片格式!"),a||this.$message.error("上传照片大小不能超过 2MB!"),t&&a||this.removeFile("img3Url"),t&&a}},{key:"removeUpload",value:function(){var e=this;this.fileList.map(function(t){"1"===t.type&&t.path&&t.path!==e.detailForm.img1Data.path&&e.$deleteLoad(t.path,!1).catch(function(e){return e}),"2"===t.type&&t.path&&t.path!==e.detailForm.img2Data.path&&e.$deleteLoad(t.path,!1).catch(function(e){return e}),"3"===t.type&&t.path&&t.path!==e.detailForm.img3Data.path&&e.$deleteLoad(t.path,!1).catch(function(e){return e})})}},{key:"getItemDetail",value:function(e){var t=this;this.detailLoading=!0,Object(k["k"])({id:e}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){var i,r,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=a.data||{},r=i.cooperate,s=i.docs,o=Object(n["a"])(i,["cooperate","docs"]),t.detailForm=F({},o,{cooperate:(r||"").split(",")}),t.fileList=JSON.parse(JSON.stringify(s)),s.map(function(e){"1"===e.type&&(t.img1Url=e.fileUrl,t.detailForm.img1Data=e),"2"===e.type&&(t.img2Url=e.fileUrl,t.detailForm.img2Data=e),"3"===e.type&&(t.img3Url=e.fileUrl,t.detailForm.img3Data=e)}),e.prev=5,e.next=8,t.getStateList();case 8:return e.next=10,t.getCityList();case 10:return e.next=12,t.getCountyList();case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](5),t.detailLoading=!1;case 17:t.detailLoading=!1;case 18:case"end":return e.stop()}},e,null,[[5,14]])}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t.detailLoading=!1,e})}},{key:"clearValidate",value:function(){var e=this.$refs.detailForm;this.$nextTick(function(){e.clearValidate()})}},{key:"resetForm",value:function(){this.detailForm=L(),this.activeName="first",this.ifCode=!1,this.stateList=[],this.cityList=[],this.countyList=[],this.fileList=[],this.img1Url="",this.img2Url="",this.img3Url="",this.file1="",this.file2="",this.file3="",this.clearValidate()}},{key:"cancel",value:function(){this.resetForm(),this.$emit("close")}},{key:"confirm",value:function(){var e=this,t=this.$refs.detailForm;t.validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(a){var i,r,s,o,l,c,u,d,m,p,g,h,f,v,y,b,w,L,x,I;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return",!1);case 2:if("1"!==e.detailForm.entity||e.img1Url){t.next=5;break}return e.$message.error("请上传营业执照"),t.abrupt("return");case 5:if(e.img2Url&&e.img3Url){t.next=8;break}return e.$message.error("请上传法人或个人身份证正反照"),t.abrupt("return");case 8:return e.detailLoading=!0,t.next=11,e.uploadFile();case 11:if(i=e.detailForm,r=i.parentId,s=i.parentName,o=i.agentId,l=i.agentName,c=i.comId,u=i.comName,d=i.custTag,m=i.img1Data,p=i.img2Data,g=i.img3Data,h=Object(n["a"])(i,["parentId","parentName","agentId","agentName","comId","comName","custTag","img1Data","img2Data","img3Data"]),"1"!==e.detailForm.entity||m){t.next=15;break}return e.detailLoading=!1,t.abrupt("return");case 15:if(p&&g){t.next=18;break}return e.detailLoading=!1,t.abrupt("return");case 18:f=F({},h),e.isEdit?(f.parentName=s,f.parentId=r):(v=e.custType,y=e.custSubtype,"0"===v&&r&&!o?(f.parentName=s,f.parentId=r):"0"===v&&r&&o?(f.parentName=l,f.parentId=o):"2"===v&&"1"===y&&"2"===d?(f.parentName=u,f.parentId=c):(f.parentName=e.custName,f.parentId=e.custId)),f.cooperate=f.cooperate.join(","),b=(e.countryList.find(function(e){return e.id===f.countryId})||{}).name,w=(e.stateList.find(function(e){return e.id===f.stateId})||{}).name,L=(e.cityList.find(function(e){return e.id===f.cityId})||{}).name,x=(e.countyList.find(function(e){return e.id===f.countyId})||{}).name,Object.assign(f,{countryName:b,stateName:w,cityName:L,countyName:x}),I=[m,p,g],f.docs=I.filter(function(e){return e&&e.path}),Object(k["s"])(f).then(function(t){e.detailLoading=!1,e.$message({type:"success",message:"保存成功!"}),e.removeUpload(),e.cancel(),e.$emit("getTableList")}).catch(function(t){return e.detailLoading=!1,t});case 29:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=h["a"].info||{},t=e.custSubtype;return t}},{key:"custName",get:function(){var e=h["a"].info||{},t=e.custName;return t}},{key:"pickerOptions",get:function(){return{disabledDate:function(e){return e.getTime()>Date.now()}}}}]),t}(g["e"]);x=p["a"]([Object(g["a"])({name:"detail",components:{},props:{subtypeList:{type:Array,default:function(){return[]}},companyTypeList:{type:Array,default:function(){return[]}},isEdit:{type:Boolean,default:!1}}})],x);var I=x,S=I,C=(a("3e3b"),a("2877")),_=Object(C["a"])(S,f,v,!1,null,"9e874e70",null),O=_.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.detailLoading,expression:"detailLoading"}]},[a("el-form",{ref:"detailForm",staticStyle:{"padding-right":"30px"},attrs:{model:e.detailForm,rules:e.formRules,"label-width":"110px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"主体类型",prop:"entity"}},[e._v("\n      "+e._s((e.entityList.find(function(t){return t.id===e.detailForm.entity})||{}).name)+"\n    ")]),a("el-form-item",{attrs:{label:"1"===e.detailForm.entity?"公司全称":"个人全称",prop:"name"}},[e._v("\n      "+e._s(e.detailForm.name)+"\n    ")]),a("el-form-item",{attrs:{label:"1"===e.detailForm.entity?"公司简称":"个人简称",prop:"abbr"}},[e._v("\n      "+e._s(e.detailForm.abbr)+"\n    ")]),a("el-form-item",{attrs:{label:"客户类型",prop:"subtype"}},[e._v("\n      "+e._s((e.subtypeList.find(function(t){return t.id===e.detailForm.subtype})||{}).name)+"\n    ")]),a("el-form-item",{staticStyle:{width:"66%"},attrs:{label:"英文名称",prop:"alias"}},[e._v("\n      "+e._s(e.detailForm.alias)+"\n    ")]),a("el-form-item",{attrs:{label:"国家/地区",prop:"countryId"}},[e._v("\n      "+e._s((e.countryList.find(function(t){return t.id===e.detailForm.countryId})||{}).name)+"-\n      "+e._s((e.countryList.find(function(t){return t.id===e.detailForm.countryId})||{}).alias||"")+"\n    ")]),a("el-form-item",{staticStyle:{width:"66%"},attrs:{label:"州省市区",prop:"area"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:!!e.detailForm.stateName,expression:"!!detailForm.stateName"}]},[e._v("\n        "+e._s(e.detailForm.stateName)+"\n      ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!!e.detailForm.cityName,expression:"!!detailForm.cityName"}]},[e._v("\n        > "+e._s(e.detailForm.cityName)+"\n      ")]),a("span",{directives:[{name:"show",rawName:"v-show",value:!!e.detailForm.countyName,expression:"!!detailForm.countyName"}]},[e._v("\n        > "+e._s(e.detailForm.countyName)+"\n      ")])]),a("el-form-item",{attrs:{label:"总分标识",prop:"branch"}},[e._v("\n      "+e._s((e.branchList.find(function(t){return t.id===e.detailForm.branch})||{}).name)+"\n    ")]),a("el-form-item",{attrs:{label:"合作期限",prop:"cooperate"}},[e._v("\n      "+e._s(e.detailForm.cooperate)+"\n    ")]),a("el-form-item",{attrs:{label:"签署合同"}},[e._v("\n      "+e._s((e.signList.find(function(t){return t.id===e.detailForm.signContract})||{}).name)+"\n    ")]),a("el-form-item",{attrs:{label:"添加来源",prop:"source"}},[e._v("\n      "+e._s((e.sourceList.find(function(t){return t.id===e.detailForm.source})||{}).name)+"\n    ")]),a("el-form-item",{attrs:{label:"客户来源",prop:"custSource"}},[e._v("\n      "+e._s((e.CustSourceList.find(function(t){return t.id===e.detailForm.custSource})||{}).name)+"\n    ")]),a("el-form-item",{attrs:{label:"证件信息",prop:"certNumber"}},[e._v("\n      "+e._s((e.certTypeList.find(function(t){return t.id===e.detailForm.certType})||{}).name)+"\n      "+e._s(e.detailForm.certNumber)+"\n    ")]),a("el-form-item",{attrs:{prop:"",label:"客户编码"}},[e._v("\n      "+e._s(e.detailForm.custCode)+"\n    ")]),"1"===e.detailForm.entity?a("div",[a("div",{staticClass:"form-line"}),a("el-form-item",{attrs:{label:"营业执照",prop:"licenseCode"}},[e._v("\n        "+e._s(e.detailForm.licenseCode)+"\n      ")]),a("el-form-item",{attrs:{label:"成立日期",prop:"setupDate"}},[e._v("\n        "+e._s(e.detailForm.setupDate)+"\n      ")]),a("el-form-item",{attrs:{prop:"companySize",label:"公司规模"}},[e._v("\n        "+e._s(e.detailForm.companySize)+" 人\n      ")]),a("el-form-item",{attrs:{prop:"registeredCapital",label:"注册资金"}},[e._v("\n        "+e._s(e.detailForm.registeredCapital)+"\n      ")]),a("el-form-item",{attrs:{prop:"saleType",label:"销售类型"}},[e._v("\n        "+e._s("1"===e.detailForm.saleType?"平台":"2"===e.detailForm.saleType?"线下":"")+"\n      ")]),a("el-form-item",{attrs:{prop:"platform",label:"平台"}},[e._v("\n        "+e._s((e.platList.find(function(t){return t.value===e.detailForm.platform})||{}).label)+"\n      ")]),a("el-form-item",{attrs:{label:"公司法人",prop:"legal"}},[e._v("\n        "+e._s(e.detailForm.legal)+"\n      ")]),a("el-form-item",{staticStyle:{width:"66%"},attrs:{label:"证照地址",prop:"licenseAddress"}},[e._v("\n        "+e._s(e.detailForm.licenseAddress)+"\n      ")]),a("el-form-item",{attrs:{prop:"storeLink",label:"店铺链接"}},[e._v("\n        "+e._s(e.detailForm.storeLink)+"\n      ")]),a("el-form-item",{attrs:{prop:"brand",label:"品牌"}},[e._v("\n        "+e._s(e.detailForm.brand)+"\n      ")]),a("el-form-item",{attrs:{prop:"trademark",label:"驰名商标"}},[e._v("\n        "+e._s(e.detailForm.trademark)+"\n      ")])],1):e._e(),a("el-form-item",{staticClass:"is-required",staticStyle:{width:"100%","margin-bottom":"0"},attrs:{label:"证照上传"}},["1"===e.detailForm.entity?a("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[a("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:""}},[e.img1Url?a("div",{staticClass:"img-show"},[a("img",{staticClass:"avatar-img",attrs:{src:e.img1Url}}),a("span",{staticClass:"img-action",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.showImgMagnify("img1Url")}}})])]):a("i",{staticClass:"el-icon-plus avatar-icon"})]),a("div",{staticStyle:{"line-height":"20px","text-align":"center"}},[e._v("\n          营业执照\n        ")])],1):e._e(),a("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[a("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:""}},[e.img2Url?a("div",{staticClass:"img-show"},[a("img",{staticClass:"avatar-img",attrs:{src:e.img2Url}}),a("span",{staticClass:"img-action",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.showImgMagnify("img2Url")}}})])]):a("i",{staticClass:"el-icon-plus avatar-icon"})]),a("div",{staticStyle:{"line-height":"20px","text-align":"center"}},[e._v("\n          身份证正面照\n        ")])],1),a("div",{staticStyle:{display:"inline-block","margin-right":"50px"}},[a("el-upload",{staticClass:"avatar",attrs:{action:"","show-file-list":!1,disabled:""}},[e.img3Url?a("div",{staticClass:"img-show"},[a("img",{staticClass:"avatar-img",attrs:{src:e.img3Url}}),a("span",{staticClass:"img-action",on:{click:function(e){e.stopPropagation()}}},[a("i",{staticClass:"el-icon-zoom-in",on:{click:function(t){return t.stopPropagation(),e.showImgMagnify("img3Url")}}})])]):a("i",{staticClass:"el-icon-plus avatar-icon"})]),a("div",{staticStyle:{"line-height":"20px","text-align":"center"}},[e._v("\n          身份证反面照\n        ")])],1)])],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("\n      确 定\n    ")])],1),a("el-dialog",{attrs:{title:"证照图片",visible:e.imgShow,"close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.imgShow=t},closed:function(t){e.imgShow=!1}}},[a("img",{staticStyle:{display:"block",height:"100%",width:"100%","object-fit":"contain"},attrs:{src:e.imgUrl}})])],1)},j=[];a("a481");function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(s["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function U(){return{abbr:void 0,subtype:void 0,parentId:void 0,parentName:void 0,agentId:void 0,agentName:void 0,comId:void 0,comName:void 0,custTag:"1",alias:void 0,countryName:void 0,stateName:void 0,cityName:void 0,countyName:void 0,branch:void 0,cooperate:void 0,source:void 0,entity:"0",name:void 0,licenseCode:void 0,setupDate:void 0,legal:void 0,certType:"0",licenseAddress:void 0,certNumber:void 0,storeLink:void 0,brand:void 0,trademark:void 0,cooperationAmount:void 0,saleType:void 0,platform:void 0,companySize:void 0,custCode:void 0,registeredCapital:void 0,signContract:void 0}}var z=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.detailForm=U(),e.formRules={abbr:[{required:!0,message:"简称不能为空",trigger:"blur"}],subtype:[{required:!0,message:"请选择客户类型",trigger:"change"}],parentId:[{required:!0,message:"请选择一级代理商",trigger:"change"}],custTag:[{required:!0,message:"请选择公司类型",trigger:"change"}],comId:[{required:!0,message:"请选择分公司",trigger:"change"}],alias:[{required:!0,message:"英文名称不能为空",trigger:"blur"},{validator:function(e,t,a){var i=/[\u4e00-\u9fa5]/;t?i.test(t)?a(new Error("英文名称不能有中")):a():a(new Error("英文名称不能为空"))},trigger:"blur"}],countryId:[{required:!0,message:"请选择国家/地区",trigger:"change"}],area:[{required:!0,message:"请选择州省市区",trigger:"change"}],branch:[{required:!0,message:"请选择总分标识",trigger:"change"}],cooperate:[{required:!0,message:"请选择合作期限",trigger:"change"},{validator:function(e,t,a){t?Array.isArray(t)&&t[0]===t[1]?a(new Error("合作期格式开始日期必须小于结束日期")):a():a(new Error("请选择合作期限"))},trigger:"change"}],source:[{required:!0,message:"请选择添加来源",trigger:"change"}],entity:[{required:!0,message:"请选择主体类型",trigger:"change"}],certNumber:[{required:!0,message:"证件信息不能为空",trigger:"blur"}],name:[{required:!0,message:"全称不能为空",trigger:"blur"}],licenseCode:[{required:!0,message:"营业执照不能为空",trigger:"blur"}],setupDate:[{required:!0,message:"请选择成立日期",trigger:"change"}],legal:[{required:!0,message:"公司法人不能为空",trigger:"blur"}],licenseAddress:[{required:!0,message:"证照地址不能为空",trigger:"blur"}],saleType:[{required:!0,message:"请选择销售类型",trigger:"change"}],platform:[{required:!0,message:"请选择平台",trigger:"change"}],companySize:[{required:!0,message:"公司规模不能为空",trigger:"blur"}],registeredCapital:[{required:!0,message:"注册资金不能为空",trigger:"blur"}],cooperationAmount:[{required:!0,message:"合作金额不能为空",trigger:"blur"}]},e.branchList=[{name:"总部",id:"0"},{name:"分公司",id:"1"}],e.entityList=[{name:"个人",id:"0"},{name:"企业",id:"1"}],e.sourceList=[{name:"自助注册",id:"0"},{name:"邀请注册",id:"1"},{name:"后台添加",id:"2"}],e.CustSourceList=[{name:"业务自主开发",id:"1"},{name:"市场部",id:"2"},{name:"总经办",id:"3"},{name:"客户转介绍",id:"4"},{name:"其他",id:"5"}],e.certTypeList=[{name:"身份证",id:"0"},{name:"其它证件",id:"1"}],e.props={value:"id",label:"name"},e.detailLoading=!1,e.selectLoading=!1,e.agentList=[],e.agent2List=[],e.countryList=[],e.platList=[],e.areaList=[],e.companyList=[],e.activeName="first",e.ifCode=!1,e.imgShow=!1,e.imgUrl="",e.img1Url="",e.img2Url="",e.img3Url="",e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"setData",value:function(e){this.getCountryList(),this.getPlatList(),this.getItemDetail(e.id)}},{key:"getPlatList",value:function(){var e=this;this.selectLoading=!0,Object(k["r"])({type:"CUST_PLATFORM"}).then(function(t){var a=t.data||[];e.platList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(k["i"])().then(function(t){var a=t.data||{};e.countryList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"showImgMagnify",value:function(e){this.imgShow=!0,this.imgUrl="img1Url"===e?this.img1Url:"img2Url"===e?this.img2Url:this.img3Url}},{key:"getItemDetail",value:function(e){var t=this;this.detailLoading=!0,Object(k["k"])({id:e}).then(function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(a){var i,r,s,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=a.data||{},r=i.cooperate,s=i.docs,o=Object(n["a"])(i,["cooperate","docs"]),t.detailForm=$({},o,{cooperate:r?r.replace(",","-"):""}),s.map(function(e){"1"===e.type&&(t.img1Url=e.fileUrl,t.detailForm.img1Data=e),"2"===e.type&&(t.img2Url=e.fileUrl,t.detailForm.img2Data=e),"3"===e.type&&(t.img3Url=e.fileUrl,t.detailForm.img3Data=e)}),t.detailLoading=!1;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return t.detailLoading=!1,e})}},{key:"clearValidate",value:function(){var e=this.$refs.detailForm;this.$nextTick(function(){e.clearValidate()})}},{key:"resetForm",value:function(){this.detailForm=U(),this.activeName="first",this.ifCode=!1,this.areaList=[],this.img1Url="",this.img2Url="",this.img3Url="",this.clearValidate()}},{key:"cancel",value:function(){this.resetForm(),this.$emit("close")}},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=h["a"].info||{},t=e.custSubtype;return t}},{key:"custName",get:function(){var e=h["a"].info||{},t=e.custName;return t}},{key:"pickerOptions",get:function(){return{disabledDate:function(e){return e.getTime()>Date.now()}}}}]),t}(g["e"]);z=p["a"]([Object(g["a"])({name:"detail",components:{},props:{subtypeList:{type:Array,default:function(){return[]}},companyTypeList:{type:Array,default:function(){return[]}},signList:{type:Array,default:function(){return[]}}}})],z);var E=z,V=E,D=(a("37db"),Object(C["a"])(V,T,j,!1,null,"2c3cbcf2",null)),P=D.exports,q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.personalLoading,expression:"personalLoading"}]},[a("el-form",{ref:"personalForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.personalForm,"label-width":"120px",size:"small"}},[a("el-form-item",{attrs:{label:"关联业务员"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.personalForm.salesId,callback:function(t){e.$set(e.personalForm,"salesId",t)},expression:"personalForm.salesId"}},e._l(e.salerOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.realName+" - "+e.deptName,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"关联财务人员"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",multiple:""},model:{value:e.personalForm.financeStaff,callback:function(t){e.$set(e.personalForm,"financeStaff",t)},expression:"personalForm.financeStaff"}},e._l(e.financeStaffOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.realName+" - "+e.deptName,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"关联运营客服"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:"",multiple:""},model:{value:e.personalForm.customerServicer,callback:function(t){e.$set(e.personalForm,"customerServicer",t)},expression:"personalForm.customerServicer"}},e._l(e.customerServicerOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.realName+" - "+e.deptName,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"是否代管",prop:"ifManage"}},[a("el-radio-group",{model:{value:e.personalForm.ifManage,callback:function(t){e.$set(e.personalForm,"ifManage",t)},expression:"personalForm.ifManage"}},[a("el-radio",{attrs:{label:0}},[e._v("\n          否\n        ")]),a("el-radio",{attrs:{label:1}},[e._v("\n          是\n        ")])],1)],1)],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.close}},[e._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("\n      确 定\n    ")])],1)],1)},R=[],M=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.personalForm={salesId:void 0,ifManage:0,financeStaff:[],customerServicer:[]},e.salerOptions=[],e.financeStaffOptions=[],e.customerServicerOptions=[],e.personalLoading=!1,e.currentId="",e.isFinancal=!1,e.isCustomer=!1,e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"setData",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a,i,r,n,s,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.parentId,i=t.id,r=t.ifManage,this.currentId=i,this.personalForm.ifManage=r||0,n=this.scType,!n){e.next=24;break}return e.prev=5,this.personalLoading=!0,e.next=9,Object(k["f"])({id:a});case 9:s=e.sent,o=s.data||{},l=o.parentId,this.isFinancal=1===o.ifFinance,this.isCustomer=1===o.ifCustomer,this.isCustomer&&!this.isFinancal?(this.getUserList(a,"saler"),this.getUserList(l,"customer-finance")):this.isCustomer&&this.isFinancal?(this.getUserList(l,"customer"),this.getUserList(a,"finance-saler")):this.getUserList(a),this.personalLoading=!1,e.next=22;break;case 18:return e.prev=18,e.t0=e["catch"](5),this.personalLoading=!1,e.abrupt("return",e.t0);case 22:e.next=25;break;case 24:this.getUserList(a);case 25:this.getStaffList(i);case 26:case"end":return e.stop()}},e,this,[[5,18]])}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getStaffList",value:function(e){var t=this,a=JSON.parse(JSON.stringify(this.personalForm.ifManage));this.personalForm={ifManage:a,financeStaff:[],customerServicer:[],salesId:""},this.personalLoading=!0,Object(k["m"])({custId:e}).then(function(e){var i=e.data||[];t.personalForm={ifManage:a,financeStaff:i.filter(function(e){return"0"===e.type}).map(function(e){return e.userId}),customerServicer:i.filter(function(e){return"1"===e.type}).map(function(e){return e.userId}),salesId:(i.find(function(e){return"2"===e.type})||{}).userId},t.personalLoading=!1}).catch(function(e){return t.personalLoading=!1,e})}},{key:"getUserList",value:function(e,t){var a=this,i={custId:e};Object(k["q"])(i).then(function(e){var i=e.data,r=i||[];"customer"===t?a.customerServicerOptions=r.filter(function(e){return 2===e.postType}):"saler"===t?a.salerOptions=i||[]:"customer-finance"===t?(a.customerServicerOptions=r.filter(function(e){return 2===e.postType}),a.financeStaffOptions=r.filter(function(e){return 1===e.postType})):"finance-saler"===t?(a.financeStaffOptions=r.filter(function(e){return 2===e.postType}),a.salerOptions=i||[]):(a.salerOptions=i||[],a.customerServicerOptions=r.filter(function(e){return 2===e.postType}),a.financeStaffOptions=r.filter(function(e){return 1===e.postType}))}).catch(function(e){return e})}},{key:"close",value:function(){this.personalForm={ifManage:0,salesId:void 0,financeStaff:[],customerServicer:[]},this.isFinancal=!1,this.isCustomer=!1,this.$emit("close")}},{key:"confirm",value:function(){var e=this;this.personalLoading=!0;var t={custId:this.currentId,ifManage:this.personalForm.ifManage,staffs:[]},a=[];this.salerOptions.map(function(t){t.id===e.personalForm.salesId&&a.push({name:t.username,realName:t.realName,userId:e.personalForm.salesId,type:"2"})});var i=[];this.personalForm.financeStaff.map(function(t){var i=e.financeStaffOptions.find(function(e){return e.id===t})||{},r=i.username,n=i.realName,s=i.id;r&&s&&a.push({name:r,realName:n,userId:s,type:"0"})});var r=[];this.personalForm.customerServicer.map(function(t){var i=e.customerServicerOptions.find(function(e){return e.id===t})||{},r=i.username,n=i.realName,s=i.id;r&&s&&a.push({name:r,realName:n,userId:s,type:"1"})}),t.staffs=[].concat(a,i,r),Object(k["t"])(t).then(function(t){e.$message({type:"success",message:"保存成功!"}),e.close(),e.$emit("getTableList"),e.personalLoading=!1}).catch(function(t){return e.personalLoading=!1,t})}},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"parentId",get:function(){var e=h["a"].info||{},t=e.parentId;return t}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=h["a"].info||{},t=e.custSubtype;return t}}]),t}(g["e"]);M=p["a"]([Object(g["a"])({name:"personal",components:{},props:{scType:{type:Boolean,default:!1}}})],M);var A=M,B=A,J=Object(C["a"])(B,q,R,!1,null,"71ca0260",null),Q=J.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.checkLoading,expression:"checkLoading"}]},[a("el-form",{ref:"checkForm",attrs:{model:e.checkForm,rules:e.formRules,"label-width":"110px",size:"small"}},[a("el-form-item",{attrs:{label:"国家/地区"}},[e._v("\n      "+e._s(e._f("placeholder")(e.checkForm.countryName))+"\n    ")]),a("el-form-item",{attrs:{label:"州省市区"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"top"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v("\n          "+e._s(e._f("placeholder")(e.checkForm.stateName))+"\n          / "+e._s(e._f("placeholder")(e.checkForm.cityName))+"\n          / "+e._s(e._f("placeholder")(e.checkForm.countyName))+"\n        ")]),a("div",{staticStyle:{"text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"}},[e._v("\n          "+e._s(e._f("placeholder")(e.checkForm.stateName))+"\n          / "+e._s(e._f("placeholder")(e.checkForm.cityName))+"\n          / "+e._s(e._f("placeholder")(e.checkForm.countyName))+"\n        ")])])],1),a("el-form-item",{attrs:{label:"1"===e.checkForm.entity?"公司全称：":"个人全称："}},[e._v("\n      "+e._s(e._f("placeholder")(e.checkForm.name))+"\n    ")]),a("el-form-item",{attrs:{label:"主体类型"}},["0"===e.checkForm.entity?a("span",[e._v("个人")]):"1"===e.checkForm.entity?a("span",[e._v("企业")]):a("span",[e._v("--")])]),a("el-form-item",{attrs:{label:"公司类型",prop:"subtype",rules:[{required:"1"===e.checkForm.audit,message:"请选择客户类型",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",size:"small",clearable:""},model:{value:e.checkForm.subtype,callback:function(t){e.$set(e.checkForm,"subtype",t)},expression:"checkForm.subtype"}},[a("el-option",{attrs:{label:"直客",value:"0"}}),a("el-option",{attrs:{label:"同行",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"添加来源",prop:"source",rules:[{required:"1"===e.checkForm.audit,message:"请选择添加来源",trigger:"change"}]}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.checkForm.source,callback:function(t){e.$set(e.checkForm,"source",t)},expression:"checkForm.source"}},e._l(e.sourceList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),a("el-form-item",{attrs:{label:"合作期限",prop:"cooperate",rules:[{required:"1"===e.checkForm.audit,validator:e.validateAudit,trigger:"change"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"daterange","unlink-panels":"",size:"small","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"yyyy-MM-dd"},model:{value:e.checkForm.cooperate,callback:function(t){e.$set(e.checkForm,"cooperate",t)},expression:"checkForm.cooperate"}})],1),a("el-form-item",{attrs:{label:"总分标识：",prop:"branch"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",filterable:"",clearable:""},model:{value:e.checkForm.branch,callback:function(t){e.$set(e.checkForm,"branch",t)},expression:"checkForm.branch"}},[a("el-option",{attrs:{label:"总部",value:"0"}}),a("el-option",{attrs:{label:"分公司",value:"1"}})],1)],1),a("el-form-item",{attrs:{label:"审核结果",prop:"audit"}},[a("el-radio-group",{model:{value:e.checkForm.audit,callback:function(t){e.$set(e.checkForm,"audit",t)},expression:"checkForm.audit"}},[a("el-radio",{attrs:{label:"0"}},[e._v("\n          待审核\n        ")]),a("el-radio",{attrs:{label:"1"}},[e._v("\n          审核通过\n        ")]),a("el-radio",{attrs:{label:"2"}},[e._v("\n          审核拒绝\n        ")])],1)],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.checkForm.remark,callback:function(t){e.$set(e.checkForm,"remark",t)},expression:"checkForm.remark"}})],1),"1"===e.checkForm.entity?a("div",[a("el-form-item",{attrs:{label:"营业执照"}},[e._v("\n        "+e._s(e._f("placeholder")(e.checkForm.licenseCode))+"\n      ")]),a("el-form-item",{attrs:{label:"成立日期"}},[e._v("\n        "+e._s(e._f("placeholder")(e.checkForm.setupDate))+"\n      ")]),a("el-form-item",{attrs:{label:"公司法人"}},[e._v("\n        "+e._s(e._f("placeholder")(e.checkForm.legal))+"\n      ")]),a("el-form-item",{attrs:{label:"证件信息"}},["0"===e.checkForm.certType?a("span",[e._v("身份证")]):"1"===e.checkForm.certType?a("span",[e._v("其它证件")]):a("span",[e._v("--")])]),a("el-form-item",{staticClass:"item-width-percent",attrs:{label:"证照地址"}},[e._v("\n        "+e._s(e._f("placeholder")(e.checkForm.licenseAddress))+"\n      ")])],1):e._e(),a("el-form-item",{staticClass:"item-width-percent",attrs:{label:"证件照片"}},[a("div",{staticClass:"file-list"},[e.frontImage.name?a("div",{staticClass:"preview-img"},[e.frontImageError?a("img",{attrs:{src:e.frontImage.fileUrl}}):a("img",{attrs:{src:e.frontImage.url},on:{error:e.loadFrontImageError}}),a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-view",on:{click:function(t){return e.previewImg(e.frontImageError?e.frontImage.fileUrl:e.frontImage.url)}}})])]):e._e(),e.reverseImage.name?a("div",{staticClass:"preview-img"},[e.reverseImageError?a("img",{attrs:{src:e.reverseImage.fileUrl}}):a("img",{attrs:{src:e.reverseImage.url},on:{error:e.loadReverseImageError}}),a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-view",on:{click:function(t){return e.previewImg(e.reverseImageError?e.reverseImage.fileUrl:e.reverseImage.url)}}})])]):e._e(),e.tradeLicenseImage.name?a("div",{staticClass:"preview-img"},[e.tradeLicenseImageError?a("img",{attrs:{src:e.tradeLicenseImage.fileUrl}}):a("img",{attrs:{src:e.tradeLicenseImage.url},on:{error:e.loadTradeLicenseImageError}}),a("div",{staticClass:"mask"},[a("i",{staticClass:"el-icon-view",on:{click:function(t){return e.previewImg(e.tradeLicenseImageError?e.tradeLicenseImage.fileUrl:e.tradeLicenseImage.url)}}})])]):e._e()])])],1),a("div",{staticStyle:{"text-align":"right","margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.close}},[e._v("\n      取 消\n    ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v("\n      确 定\n    ")])],1),a("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,"append-to-body":"",width:"500px"},on:{"update:visible":function(t){e.dialogVisible=t},closed:function(t){e.dialogVisible=!1}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)},H=[],W=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.checkForm={branch:void 0,countryName:void 0,stateName:void 0,cityName:void 0,countyName:void 0,name:void 0,setupDate:void 0,licenseCode:void 0,licenseAddress:void 0,legal:void 0,certType:void 0,subtype:void 0,source:void 0,cooperate:[],audit:void 0,remark:void 0,custId:void 0},e.checkLoading=!1,e.formRules={audit:[{required:!0,message:"请选择审核结果",trigger:"change"}],branch:[{required:!0,message:"请选择总分标识",trigger:"change"}]},e.sourceList=[{name:"自助注册",id:"0"},{name:"邀请注册",id:"1"},{name:"后台添加",id:"2"}],e.frontImage={},e.frontImageError=!1,e.reverseImage={},e.reverseImageError=!1,e.tradeLicenseImage={},e.tradeLicenseImageError=!1,e.dialogVisible=!1,e.dialogImageUrl="",e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"loadFrontImageError",value:function(){this.frontImageError=!0}},{key:"loadReverseImageError",value:function(){this.reverseImageError=!0}},{key:"loadTradeLicenseImageError",value:function(){this.tradeLicenseImageError=!0}},{key:"setData",value:function(e){this.getItemDetail(e.id)}},{key:"validateAudit",value:function(e,t,a){t||"1"!==this.checkForm.audit?Array.isArray(t)&&t[0]===t[1]?a(new Error("合作期格式开始日期必须小于结束日期")):a():a(new Error("请选择合作期限"))}},{key:"getItemDetail",value:function(e){var t=this;this.frontImageError=!1,this.reverseImageError=!1,this.tradeLicenseImageError=!1,this.frontImage={},this.reverseImage={},this.tradeLicenseImage={},this.checkLoading=!0,Object(k["k"])({id:e}).then(function(e){var a=e.data||{},i=a.cooperate,r=a.id,s=Object(n["a"])(a,["cooperate","id"]),o=a.docs||[];t.checkForm=s,t.checkForm.custId=r,o.forEach(function(e){"2"===e.type&&(t.frontImage={name:e.name,url:"https://file.jhtinfo.net/"+e.path,fileUrl:e.fileUrl}),"3"===e.type&&(t.reverseImage={name:e.name,url:"https://file.jhtinfo.net/"+e.path,fileUrl:e.fileUrl}),"1"===e.type&&(t.tradeLicenseImage={name:e.name,url:"https://file.jhtinfo.net/"+e.path,fileUrl:e.fileUrl})});var l=i.split(",")||[];t.$set(t.checkForm,"cooperate",l),t.checkLoading=!1}).catch(function(e){return t.checkLoading=!1,e})}},{key:"previewImg",value:function(e){this.dialogVisible=!0,this.dialogImageUrl=e}},{key:"close",value:function(){var e=this;this.checkForm={branch:void 0,subtype:void 0,source:void 0,cooperate:[],audit:void 0,remark:void 0},this.$nextTick(function(){var t=e.$refs.checkForm;t.clearValidate()}),this.$emit("close")}},{key:"confirm",value:function(){var e=this,t=this.$refs.checkForm;t.validate(function(t){if(t){e.checkLoading=!0;var a={branch:e.checkForm.branch,subtype:e.checkForm.subtype,source:e.checkForm.source,cooperate:Array.isArray(e.checkForm.cooperate)?e.checkForm.cooperate.join(","):"",custId:e.checkForm.custId,audit:e.checkForm.audit,remark:e.checkForm.remark};Object(k["b"])(a).then(function(t){e.$message({type:"success",message:"提交成功!"}),e.close(),e.$emit("getTableList"),e.checkLoading=!1}).catch(function(t){return e.checkLoading=!1,t})}})}}]),t}(g["e"]);W=p["a"]([Object(g["a"])({name:"audit",components:{},props:{},filters:{placeholder:function(e){return e||"--"}}})],W);var K=W,X=K,Y=(a("b7cb"),Object(C["a"])(X,G,H,!1,null,"27e685ec",null)),Z=Y.exports,ee=a("01d2"),te=a("7b1a");function ae(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,i)}return a}function ie(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ae(a,!0).forEach(function(t){Object(s["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ae(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var re=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(u["a"])(this,Object(d["a"])(t).apply(this,arguments)),e.selectValue={parentId:void 0,agentId:void 0,signContract:void 0,subtype:void 0,countryId:void 0,stateId:void 0,cityId:void 0,countyId:void 0,status:void 0,audit:void 0,custTag:"1",comId:void 0,name:void 0},e.subtypeList=[{id:"0",name:"直客"},{id:"1",name:"同行"}],e.statusList=[{id:"0",name:"禁用"},{id:"1",name:"启用"}],e.auditList=[{id:"0",name:"待审核"},{id:"1",name:"审核通过"},{id:"2",name:"已拒绝"}],e.entityList=["个人","企业"],e.companyTypeList=[{id:"1",name:"本公司"},{id:"2",name:"分公司"}],e.signList=[{id:"0",name:"未签署"},{id:"1",name:"已签署"},{id:"2",name:"已注销"}],e.scType2=!1,e.companyList=[],e.stateList=[],e.cityList=[],e.countyList=[],e.agentList=[],e.agent2List=[],e.countryList=[],e.list=[],e.companyForm={parentId:void 0,custId:void 0},e.companyRules={parentId:[{required:!0,message:"请选择所属公司",trigger:"change"}]},e.signForm={status:""},e.signRules={status:[{required:!0,message:"请选择合同状态",trigger:"change"}]},e.loading=!1,e.exportLoading=!1,e.selectLoading=!1,e.companyLoading=!1,e.dialogEditShow=!1,e.dialogViewShow=!1,e.dialogPersonalShow=!1,e.dialogCheckShow=!1,e.dialogCompanyShow=!1,e.dialogSignShow=!1,e.visible=!1,e.exportCustomerErrorList=[],e.isMoreInfoShow=!1,e.currentCustId="",e.currentCustType="customer",e.page=1,e.size=10,e.total=0,e.isEdit=!1,e}return Object(m["a"])(t,e),Object(c["a"])(t,[{key:"onComType",value:function(){this.list=[],this.selectValue.comId="",this.companyList=[],this.getTableList()}},{key:"onCompany",value:function(){this.list=[],this.getTableList()}},{key:"getCompanyList",value:function(){var e=this;this.selectLoading=!0,Object(k["o"])().then(function(t){var a=t.data||[];e.companyList=a,e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"showExportModal",value:function(){this.visible=!0,this.exportCustomerErrorList=[]}},{key:"downloadFile",value:function(){var e=document.createElement("a");document.body.appendChild(e),e.href="/files/用户批量导入模板.xlsx",e.click(),document.body.removeChild(e)}},{key:"uploadFile",value:function(e){var t=this,a=e.file,i=new FormData;i.append("file",a),this.exportLoading=!0,Object(k["e"])(i).then(function(e){t.$message.success("操作成功"),t.exportCustomerErrorList=e.data||[],t.exportLoading=!1,0===t.exportCustomerErrorList.length&&t.cancelExport()}).catch(function(e){return t.exportLoading=!1,e})}},{key:"cancelExport",value:function(){this.visible=!1,this.getTableList(1)}},{key:"onParent",value:function(){this.list=[],this.agent2List=[],this.selectValue.agentId=void 0,this.getTableList()}},{key:"onAgent",value:function(){this.list=[],this.getTableList()}},{key:"getAgentList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.selectLoading=!0,e.next=3,Object(k["g"])({page:1,size:999999,parentId:"1"===t?this.custId:this.selectValue.parentId}).then(function(e){var i=e.data||{},r=i.result||[];"1"===t?a.agentList=r:a.agent2List=r,a.selectLoading=!1}).catch(function(e){return a.selectLoading=!1,e});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getCountryList",value:function(){var e=this;this.selectLoading=!0,Object(k["i"])().then(function(t){var a=t.data||{};e.countryList=a.result||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"getStateList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectValue.countryId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(k["n"])(this.selectValue.countryId).then(function(e){t.selectLoading=!1;var a=e.data||{},i=a.result||[];t.stateList=i}).catch(function(){t.stateList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCityList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectValue.stateId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(k["h"])(this.selectValue.stateId).then(function(e){t.selectLoading=!1;var a=e.data||{},i=a.result||[];t.cityList=i}).catch(function(){t.cityList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getCountyList",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectValue.cityId){e.next=2;break}return e.abrupt("return");case 2:return this.selectLoading=!0,e.next=5,Object(k["j"])(this.selectValue.cityId).then(function(e){var a=e.data||{},i=a.result||[];t.countyList=i,t.selectLoading=!1}).catch(function(){t.countyList=[],t.selectLoading=!1});case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onCountryChange",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.selectValue.stateId="",this.onStateChange();case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"onStateChange",value:function(){this.selectValue.cityId="",this.onCityChange()}},{key:"onCityChange",value:function(){this.selectValue.countyId=""}},{key:"onSwitch",value:function(e,t){var a=this;if(e.status&&e.status!==t){var i={id:e.id,status:t};this.$confirm("请确认是否更改状态?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(k["a"])(i).then(function(e){a.$message({type:"success",message:"更改成功"}),a.getTableList()}).catch(function(e){return e})}).catch(function(){return!1})}}},{key:"onPersonal",value:function(e){var t=this,a=this.custType,i=this.custSubtype,r=e.parentSubtype;"2"===a&&("2"===i||"1"===i&&"2"===this.selectValue.custTag)?this.scType2=!0:this.scType2="0"===a&&"2"===r,this.dialogPersonalShow=!0,this.$nextTick(function(){var a=t.$refs.personalForm;a.setData(e)})}},{key:"clearForm",value:function(){var e=this;this.dialogEditShow=!1,this.$nextTick(function(){var t=e.$refs.addEditForm;t.resetForm()})}},{key:"closeForm",value:function(){var e=this;this.dialogEditShow=!1,this.$nextTick(function(){var t=e.$refs.viewForm;t.resetForm()})}},{key:"onSignContract",value:function(e){this.dialogSignShow=!0,this.signForm.id=e.id,this.signForm={id:e.id,status:e.signContract||"0"}}},{key:"clearSign",value:function(){var e=this;this.signForm={status:""},this.dialogSignShow=!1,this.$nextTick(function(){var t=e.$refs.signForm;t.clearValidate()})}},{key:"confirmSign",value:function(){var e=this,t=this.$refs.signForm;t.validate(function(t){if(!t)return!1;e.companyLoading=!0;var a=ie({},e.signForm);Object(k["p"])(a).then(function(t){e.$message({type:"success",message:"修改成功"}),e.clearSign(),e.companyLoading=!1,e.getTableList()}).catch(function(t){return e.companyLoading=!1,t})})}},{key:"handleAdd",value:function(){this.dialogEditShow=!0,this.isEdit=!1}},{key:"editTableItem",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.dialogEditShow=!0,this.isEdit=!0,this.$nextTick(function(){var e=a.$refs.addEditForm;e.setData(t)});case 3:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"editCompany",value:function(e){this.companyForm.custId=e.id,this.companyForm.custName=e.parentName,this.dialogCompanyShow=!0}},{key:"clearCompany",value:function(){this.dialogCompanyShow=!1,this.companyForm={parentId:void 0,custId:void 0};var e=this.$refs.companyForm;this.$nextTick(function(){e.clearValidate()})}},{key:"confirmCompany",value:function(){var e=this,t=this.$refs.companyForm;t.validate(function(t){if(!t)return!1;e.companyLoading=!0;var a=e.companyForm,i=(a.custName,Object(n["a"])(a,["custName"])),r=ie({},i);e.companyList.map(function(e){e.id===r.parentId&&(r.parentName=e.name)}),Object(k["d"])(r).then(function(t){e.$message({type:"success",message:"修改成功"}),e.clearCompany(),e.companyLoading=!1,e.getTableList()}).catch(function(t){return e.companyLoading=!1,t})})}},{key:"viewTableItem",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.dialogViewShow=!0,this.$nextTick(function(){var e=a.$refs.viewForm;e.setData(t)});case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"checkTableItem",value:function(e){var t=this;this.dialogCheckShow=!0,this.$nextTick(function(){var a=t.$refs.checkForm;a.setData(e)})}},{key:"deleteTableItem",value:function(e){var t=this,a={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){Object(k["c"])(a).then(function(e){t.$message({type:"success",message:"删除成功"}),t.getTableList()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"handleTableMore",value:function(e){var t=this;this.isMoreInfoShow=!0,this.currentCustId=e.id,this.$nextTick(function(){var e=t.$refs.attachInfo;e.init()})}},{key:"goBack",value:function(){var e=this;this.isMoreInfoShow=!1,this.$nextTick(function(){var t=e.$refs.attachInfo;t.resetInitData()})}},{key:"getTableList",value:function(e){var t=this;this.loading=!0;var a=this.selectValue,i=a.custTag,r=a.comId,s=a.parentId,o=a.agentId,l=Object(n["a"])(a,["custTag","comId","parentId","agentId"]);e&&(this.page=e);var c=this.page,u=this.size,d=this.custType,m=ie({},l,{custTag:"0"===d?void 0:i,custId1:"2"===d?this.custId||void 0:s||void 0,custId2:"2"===d&&"2"===i?r||void 0:o||void 0,page:c,size:u});Object(k["l"])(m).then(function(e){t.loading=!1;var a=e.data||{},i=a.total,r=a.result;t.total=i,t.list=r}).catch(function(e){return t.loading=!1,e})}},{key:"handleCurrentChange",value:function(e){this.page=e,this.getTableList()}},{key:"handleSizeChange",value:function(e){this.size=e,this.getTableList()}},{key:"created",value:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.getTableList();case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"custId",get:function(){var e=h["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=h["a"].info||{},t=e.custName;return t}},{key:"custType",get:function(){var e=h["a"].info||{},t=e.custType;return t}},{key:"custSubtype",get:function(){var e=h["a"].info||{},t=e.custSubtype;return t}}]),t}(g["e"]);re=p["a"]([Object(g["a"])({name:"Customer",components:{addEditForm:O,viewForm:P,personalForm:Q,checkForm:Z,attachInfo:ee["a"],HeadInfoWithBack:te["a"]},props:{}})],re);var ne=re,se=ne,oe=(a("c4f9"),Object(C["a"])(se,i,r,!1,null,"1e1a60fa",null));t["default"]=oe.exports},"37db":function(e,t,a){"use strict";var i=a("8510"),r=a.n(i);r.a},"3e3b":function(e,t,a){"use strict";var i=a("f32b"),r=a.n(i);r.a},"5c67":function(e,t,a){},8510:function(e,t,a){},b7cb:function(e,t,a){"use strict";var i=a("5c67"),r=a.n(i);r.a},c4f9:function(e,t,a){"use strict";var i=a("2165"),r=a.n(i);r.a},f32b:function(e,t,a){}}]);