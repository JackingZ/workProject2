(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["order-type"],{7397:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{display:"flex","flex-flow":"row nowrap","min-height":"inherit"}},[r("div",{staticClass:"dashboard-container",staticStyle:{flex:"1",overflow:"auto"}},[r("div",{staticClass:"app-container"},[r("head-info",{attrs:{info:"",title:"下单配置"}}),r("div",{staticClass:"app-panel"},[r("div",{staticStyle:{"text-align":"right"}},[r("el-select",{staticStyle:{width:"130px","margin-right":"5px"},attrs:{loading:e.selectLoading,placeholder:"服务大类",size:"small",filterable:"",clearable:""},on:{focus:e.getServiceList},model:{value:e.selectValue.serviceTypeId,callback:function(t){e.$set(e.selectValue,"serviceTypeId",t)},expression:"selectValue.serviceTypeId"}},e._l(e.serviceList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),r("el-input",{staticClass:"input-with-select",staticStyle:{width:"280px","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入"},model:{value:e.selectValue.name,callback:function(t){e.$set(e.selectValue,"name",t)},expression:"selectValue.name"}},[r("template",{slot:"prepend"},[e._v("\n              下单配置\n            ")])],2),r("el-button",{directives:[{name:"permission",rawName:"v-permission",value:["ploQuery"],expression:"['ploQuery']"}],attrs:{type:"primary",size:"small"},on:{click:function(t){return e.queryAll(1)}}},[e._v("\n            查询\n          ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"calc(100vh - 313px)",border:""}},[r("el-table-column",{attrs:{prop:"serviceTypeName",label:"服务大类"}}),r("el-table-column",{attrs:{prop:"name",label:"下单配置"}}),r("el-table-column",{attrs:{width:"120",label:"服务名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["ploServiceName"]),type:"text"},on:{click:function(r){return e.setServiceName(t.row)}}},[e._v("\n                服务名称\n              ")])]}}])}),r("el-table-column",{attrs:{width:"120",label:"服务项目"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["ploServiceProject"]),type:"text"},on:{click:function(r){return e.setAddedService(t.row)}}},[e._v("\n                服务项目\n              ")])]}}])}),r("el-table-column",{attrs:{width:"120",label:"附加服务"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{disabled:!e.$checkPermission(["ploAdditionalItems"]),type:"text"},on:{click:function(r){return e.setAdditionalService(t.row)}}},[e._v("\n                附加服务\n              ")])]}}])}),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),r("el-table-column",{attrs:{prop:"updateTime",label:"最后更新时间",width:"170"}})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:e.title,visible:e.isRelevanceShow,"close-on-click-modal":!1,width:"960px"},on:{"update:visible":function(t){e.isRelevanceShow=t},close:function(t){e.isRelevanceShow=!1}}},[r("div",{directives:[{name:"show",rawName:"v-show",value:e.isAdded,expression:"isAdded"}]},[r("addedServiceRelevance",{ref:"addedServiceRelevance"})],1),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.isAdded,expression:"!isAdded"}]},[r("additionalServiceRelevance",{ref:"additionalServiceRelevance"})],1)]),r("el-dialog",{attrs:{title:"服务名称",visible:e.isNameShow,"close-on-click-modal":!1,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.isNameShow=t},close:e.cancel}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}]},[r("el-form",{ref:"serviceForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.serviceForm,rules:e.formRule,"label-width":"120px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"服务名称",prop:"serviceId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.serviceForm.serviceId,callback:function(t){e.$set(e.serviceForm,"serviceId",t)},expression:"serviceForm.serviceId"}},e._l(e.serviceData,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancel}},[e._v("\n            取 消\n          ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v("\n            确 定\n          ")])],1)])],1)])])},i=[],n=(r("8e6e"),r("ac6a"),r("456d"),r("c5f6"),r("bd86")),o=(r("7f7f"),r("d225")),l=r("b0b4"),c=r("308d"),s=r("6bb5"),d=r("4e2b"),u=r("9ab4"),p=r("60a3"),m=r("9dba"),v=r("ac1a"),f=r("a8db"),h=r("b32d");function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e){var t={url:"/orders/ordertype/getOrderTypeList",method:"get",params:e};return Object(h["a"])(t)}function O(e){var t={url:"/orders/ordertype/saveOrderService",method:"post",data:e};return Object(h["a"])(t)}function k(e){var t={url:"/orders/ordertype/updateOrderType",method:"post",data:e};return Object(h["a"])(t)}function w(e){var t={url:"/orders/ordertype/deleteOrderService",method:"delete",params:e};return Object(h["a"])(t)}function S(e){var t={url:"/orders/ordertype/getOrderServiceList",method:"get",params:e};return Object(h["a"])(t)}function j(e){var t={url:"/cfg/type/getServiceTypeList",method:"get",params:e};return Object(h["a"])(t)}function x(){var e={url:"/orders/ordertype/getAdditionList",method:"get"};return Object(h["a"])(e)}function T(e){var t={url:"/finance/costitem/getCostitemSimpleList",method:"get",params:e};return Object(h["a"])(t)}function _(e){var t={url:"/cfg/lsc/condition",method:"post",data:e};return Object(h["a"])(t)}function F(e){var t={url:"/cfg/ssc/getSscList",method:"get",params:e};return Object(h["a"])(t)}function L(e){var t={url:"/cfg/ksc/getKscList",method:"get",data:e};return Object(h["a"])(t)}function I(e){var t=e.page,r=e.size,a=Object(f["a"])(e,["page","size"]),i={url:"/cfg/esc/getEscList",method:"post",data:{model:y({},a),page:t,size:r}};return Object(h["a"])(i)}function A(e){var t={url:"/cfg/csc/getCscList",method:"get",params:e};return Object(h["a"])(t)}function q(e){var t={url:"/cfg/tsc/getTscList",method:"get",params:e};return Object(h["a"])(t)}function D(e){var t={url:"/cfg/bs/getBsList",method:"post",data:e};return Object(h["a"])(t)}var P=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-type"},[r("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addService}},[e._v("\n    新增服务项目\n  ")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"450px",border:""}},[r("el-table-column",{attrs:{prop:"itemName",label:"服务项目"}}),r("el-table-column",{attrs:{prop:"attachment",width:"140",label:"是否上传附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.attachment?"是":"否")+"\n      ")]}}])}),r("el-table-column",{attrs:{prop:"required",label:"附件是否必传",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.required?"是":"否")+"\n      ")]}}])}),r("el-table-column",{attrs:{prop:"required",label:"服务标识",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s("0"===t.row.type?"标准服务":"增值服务")+"\n      ")]}}])}),r("el-table-column",{attrs:{fixed:"right",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.editService(t.row)}}},[e._v("\n          编辑\n        ")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.deleteService(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.subEdit?"编辑服务项目":"新增服务项目",visible:e.isAddEditType,"close-on-click-modal":!1,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.isAddEditType=t},close:e.cancel}},[r("div",{staticClass:"subType-form"},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,"label-width":"130px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"服务项目",prop:"itemId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.selectForm.itemId,callback:function(t){e.$set(e.selectForm,"itemId",t)},expression:"selectForm.itemId"}},e._l(e.serviceData,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"是否上传附件",prop:"attachment"}},[r("el-radio-group",{model:{value:e.selectForm.attachment,callback:function(t){e.$set(e.selectForm,"attachment",t)},expression:"selectForm.attachment"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n              否\n            ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n              是\n            ")])],1)],1),e.selectForm.attachment?r("el-form-item",{attrs:{label:"附件是否必传",prop:"required"}},[r("el-radio-group",{model:{value:e.selectForm.required,callback:function(t){e.$set(e.selectForm,"required",t)},expression:"selectForm.required"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n              否\n            ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n              是\n            ")])],1)],1):e._e(),r("el-form-item",{attrs:{label:"服务标识",prop:"type"}},[r("el-radio-group",{model:{value:e.selectForm.type,callback:function(t){e.$set(e.selectForm,"type",t)},expression:"selectForm.type"}},[r("el-radio",{attrs:{label:"0"}},[e._v("\n              标准服务\n            ")]),r("el-radio",{attrs:{label:"1"}},[e._v("\n              增值服务\n            ")])],1)],1)],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("\n        取 消\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveConfirm()}}},[e._v("\n        确 定\n      ")])],1)])],1)},$=[];function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var E=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.isAddEditType=!1,e.dialogLoading=!1,e.subEdit=!1,e.tableData=[],e.serviceData=[],e.selectForm={itemId:void 0,attachment:void 0,required:void 0,type:void 0},e.form={},e.formLoading=!1,e.page=1,e.size=10,e.total=0,e.formRules={itemId:[{required:!0,message:"请选择服务项目",trigger:"change"}],attachment:[{required:!0,message:"请选择是否上传附件",trigger:"change"}],required:[{required:!0,message:"请选择附件是否必传",trigger:"change"}],type:[{required:!0,message:"请选择服务标识",trigger:"change"}]},e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"addService",value:function(){this.subEdit=!1,this.isAddEditType=!0}},{key:"editService",value:function(e){this.selectForm=e,this.subEdit=!0,this.isAddEditType=!0}},{key:"resetForm",value:function(){this.selectForm={itemId:void 0,attachment:void 0,required:void 0,type:void 0}}},{key:"close",value:function(){this.isAddEditType=!1,this.resetForm()}},{key:"cancel",value:function(){this.isAddEditType=!1,this.resetForm(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"saveConfirm",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var r=C({orderTypeId:e.form.orderTypeId},e.selectForm);e.serviceData.map(function(e){e.id===r.itemId&&(r.itemName=e.name)}),r.attachment||(r.required=!1),O(r).then(function(t){e.formLoading=!1,e.$message({type:"success",message:"操作成功"}),e.isAddEditType=!1,e.resetForm(),e.clearValidate(),e.queryAll()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"deleteService",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){w(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"getAddedList",value:function(){var e=this,t={serviceTypeId:this.form.serviceTypeId,costTypes:this.form.orderTypeId};T(t).then(function(t){e.serviceData=t.data||[]}).catch(function(t){return e.loading=!1,t})}},{key:"queryAll",value:function(){var e=this;this.loading=!0;var t={orderTypeId:this.form.orderTypeId,type:this.form.type,page:this.page,size:this.size};S(t).then(function(t){e.loading=!1;var r=t.data||{};e.tableData=r.result||[],e.$nextTick(function(){var t=e.$refs.table;t.doLayout()}),e.total=r.total}).catch(function(t){return e.loading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"init",value:function(e){this.form=e,this.queryAll(),this.getAddedList()}}]),t}(p["e"]);E=u["a"]([Object(p["a"])({name:"addedServiceRelevance",components:{},props:{}})],E);var N=E,R=N,V=r("2877"),B=Object(V["a"])(R,P,$,!1,null,"e164e99c",null),J=B.exports,M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"add-type"},[r("el-button",{attrs:{type:"text",icon:"el-icon-circle-plus-outline"},on:{click:e.addService}},[e._v("\n    新增附加服务\n  ")]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"table",staticStyle:{width:"100%",margin:"10px 0"},attrs:{data:e.tableData,height:"450px",border:""}},[r("el-table-column",{attrs:{prop:"itemName",label:"附加服务"}}),r("el-table-column",{attrs:{prop:"attachment",width:"140",label:"是否上传附件"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.attachment?"是":"否")+"\n      ")]}}])}),r("el-table-column",{attrs:{prop:"required",label:"附件是否必传",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.required?"是":"否")+"\n      ")]}}])}),r("el-table-column",{attrs:{fixed:"right",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.editService(t.row)}}},[e._v("\n          编辑\n        ")]),r("el-button",{attrs:{type:"text"},on:{click:function(r){return e.deleteService(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),r("el-pagination",{staticStyle:{"text-align":"right"},attrs:{"current-page":e.page,"page-size":e.size,layout:"total, prev, pager, next",total:e.total},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),r("el-dialog",{attrs:{title:e.subEdit?"编辑附加服务":"新增附加服务",visible:e.isAddEditType,"close-on-click-modal":!1,"append-to-body":"",width:"600px"},on:{"update:visible":function(t){e.isAddEditType=t},close:e.cancel}},[r("div",[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.formLoading,expression:"formLoading"}],ref:"editForm",staticStyle:{"padding-right":"20px"},attrs:{model:e.selectForm,rules:e.formRules,"label-width":"130px","label-position":"right",size:"small"}},[r("el-form-item",{attrs:{label:"附加服务",prop:"itemId"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.selectForm.itemId,callback:function(t){e.$set(e.selectForm,"itemId",t)},expression:"selectForm.itemId"}},e._l(e.serviceData,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{label:"是否上传附件",prop:"attachment"}},[r("el-radio-group",{model:{value:e.selectForm.attachment,callback:function(t){e.$set(e.selectForm,"attachment",t)},expression:"selectForm.attachment"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n              否\n            ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n              是\n            ")])],1)],1),e.selectForm.attachment?r("el-form-item",{attrs:{label:"附件是否必传",prop:"required"}},[r("el-radio-group",{model:{value:e.selectForm.required,callback:function(t){e.$set(e.selectForm,"required",t)},expression:"selectForm.required"}},[r("el-radio",{attrs:{label:!1}},[e._v("\n              否\n            ")]),r("el-radio",{attrs:{label:!0}},[e._v("\n              是\n            ")])],1)],1):e._e()],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("\n        取 消\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.saveConfirm()}}},[e._v("\n        确 定\n      ")])],1)])],1)},Q=[];function K(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?K(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var H=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.isAddEditType=!1,e.dialogLoading=!1,e.subEdit=!1,e.tableData=[],e.serviceData=[],e.selectForm={itemId:void 0,attachment:void 0,required:void 0,type:"2"},e.form={},e.formLoading=!1,e.page=1,e.size=10,e.total=0,e.formRules={itemId:[{required:!0,message:"请选择附加服务",trigger:"change"}],attachment:[{required:!0,message:"请选择是否上传附件",trigger:"change"}],required:[{required:!0,message:"请选择附件是否必传",trigger:"change"}]},e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"addService",value:function(){this.subEdit=!1,this.isAddEditType=!0}},{key:"editService",value:function(e){this.selectForm=e,this.subEdit=!0,this.isAddEditType=!0}},{key:"resetForm",value:function(){this.selectForm={itemId:void 0,attachment:void 0,required:void 0,type:"2"}}},{key:"close",value:function(){this.isAddEditType=!1,this.resetForm()}},{key:"cancel",value:function(){this.isAddEditType=!1,this.resetForm(),this.clearValidate()}},{key:"clearValidate",value:function(){var e=this.$refs.editForm;this.$nextTick(function(){e.clearValidate()})}},{key:"saveConfirm",value:function(){var e=this,t=this.$refs.editForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var r=G({orderTypeId:e.form.orderTypeId},e.selectForm);e.serviceData.map(function(e){e.id===r.itemId&&(r.itemName=e.name)}),r.attachment||(r.required=!1),O(r).then(function(t){e.formLoading=!1,e.$message({type:"success",message:"操作成功"}),e.isAddEditType=!1,e.resetForm(),e.clearValidate(),e.queryAll()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"deleteService",value:function(e){var t=this,r={id:e.id};this.$confirm("请确认是否删除该条数据?","温馨提示",{confirmButtonText:"确定",closeOnClickModal:!1,cancelButtonText:"取消",type:"warning"}).then(function(){w(r).then(function(e){t.$message({type:"success",message:"删除成功"}),t.queryAll()}).catch(function(e){return e})}).catch(function(){return!1})}},{key:"getAdditionList",value:function(){var e=this;x().then(function(t){var r=t.data||[];e.serviceData=r}).catch(function(t){return e.loading=!1,t})}},{key:"queryAll",value:function(){var e=this;this.loading=!0;var t={orderTypeId:this.form.orderTypeId,type:this.form.type,page:this.page,size:this.size};S(t).then(function(t){e.loading=!1;var r=t.data||[];e.tableData=r.result,e.$nextTick(function(){var t=e.$refs.table;t.doLayout()}),e.total=r.total}).catch(function(t){return e.loading=!1,t})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"init",value:function(e){this.form=e,this.queryAll(),this.getAdditionList()}},{key:"labelPosition",get:function(){var e=v["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=v["a"].language;return e||"en"}}]),t}(p["e"]);H=u["a"]([Object(p["a"])({name:"additionalServiceRelevance",components:{},props:{}})],H);var U=H,W=U,X=Object(V["a"])(W,M,Q,!1,null,"be3f5950",null),Y=X.exports;function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(r,!0).forEach(function(t){Object(n["a"])(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var te=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(c["a"])(this,Object(s["a"])(t).apply(this,arguments)),e.loading=!1,e.tableData=[],e.title="",e.selectValue={serviceTypeId:void 0,name:void 0},e.serviceForm={serviceId:void 0},e.formRule={serviceId:[{required:!0,message:"请选择服务名称",trigger:"change"}]},e.formLoading=!1,e.serviceData=[],e.selectLoading=!1,e.serviceList=[],e.formatList=[{name:"rpx",id:0},{name:"rpm",id:1},{name:"rpr",id:2},{name:"xls",id:3},{name:"xlsx",id:4}],e.isRelevanceShow=!1,e.isAdded=!1,e.isNameShow=!1,e.rowObj={},e.page=1,e.size=10,e.total=0,e}return Object(d["a"])(t,e),Object(l["a"])(t,[{key:"getServiceData",value:function(e){var t=this,r=[{name:"00",api:I},{name:"01",api:L},{name:"02",api:D},{name:"03",api:A},{name:"04",api:F},{name:"05",api:_},{name:"06",api:q}];this.serviceData=[],r.map(function(r){if(r.name===e&&"05"===e)t.formLoading=!0,r.api({status:"1"}).then(function(e){var r=e.data||[];t.serviceData=r,t.formLoading=!1}).catch(function(e){return t.formLoading=!1,[e,null]});else if(r.name===e&&"05"!==e){t.formLoading=!0;var a={page:1,size:9999,status:"1"};"02"===e&&(a.model={}),r.api(a).then(function(e){var r=e.data||{},a=r.result||[];t.serviceData=a,t.formLoading=!1}).catch(function(e){return t.formLoading=!1,[e,null]})}})}},{key:"setServiceName",value:function(e){this.isNameShow=!0,this.rowObj=e;var t=e.serviceId,r=e.serviceTypeId;this.serviceForm.serviceId=t,this.getServiceData(r)}},{key:"cancel",value:function(){this.isNameShow=!1,this.serviceForm={serviceId:void 0};var e=this.$refs.serviceForm;this.$nextTick(function(){e.clearValidate()})}},{key:"confirm",value:function(){var e=this,t=this.$refs.serviceForm;t.validate(function(t){if(!t)return!1;e.formLoading=!0;var r=ee({},e.rowObj);r.serviceId=e.serviceForm.serviceId,e.serviceData.map(function(e){e.id===r.serviceId&&(r.serviceName=e.name)}),k(r).then(function(t){e.formLoading=!1,e.$message({type:"success",message:"操作成功"}),e.isNameShow=!1,e.cancel(),e.queryAll()}).catch(function(t){return e.formLoading=!1,t})})}},{key:"setAddedService",value:function(e){var t=this;this.isRelevanceShow=!0,this.isAdded=!0,this.title="关联服务项目【"+e.serviceTypeName+"-"+e.name+"】";var r=e.id,a=e.serviceTypeId,i=(e.costTypeId,{orderTypeId:r,type:"0,1",serviceTypeId:a});this.$nextTick(function(){var e=t.$refs.addedServiceRelevance;e.init(i)})}},{key:"setAdditionalService",value:function(e){var t=this;this.isRelevanceShow=!0,this.isAdded=!1,this.title="关联附加服务【"+e.serviceTypeName+"-"+e.name+"】";var r=e.id,a={orderTypeId:r,type:"2"};this.$nextTick(function(){var e=t.$refs.additionalServiceRelevance;e.init(a)})}},{key:"handleSizeChange",value:function(e){this.size=Number(e),this.queryAll()}},{key:"handleCurrentChange",value:function(e){this.page=Number(e),this.queryAll()}},{key:"queryAll",value:function(e){var t=this;this.loading=!0,e&&(this.page=e);var r=ee({},this.selectValue,{page:this.page,size:this.size});b(r).then(function(e){t.loading=!1;var r=e.data||{};t.tableData=r.result||[],t.total=r.total}).catch(function(e){return t.loading=!1,e})}},{key:"getServiceList",value:function(){var e=this;this.selectLoading=!0;var t={custType:"1"};j(t).then(function(t){e.serviceList=t.data||[],e.selectLoading=!1}).catch(function(t){return e.selectLoading=!1,t})}},{key:"created",value:function(){this.queryAll(),this.getServiceList()}},{key:"labelPosition",get:function(){var e=v["a"].language;return e&&"en"===e?"top":"left"}},{key:"lang",get:function(){var e=v["a"].language;return e||"en"}},{key:"custId",get:function(){var e=m["a"].info||{},t=e.custId;return t}},{key:"custName",get:function(){var e=m["a"].info||{},t=e.custName;return t}}]),t}(p["e"]);te=u["a"]([Object(p["a"])({name:"OrderType",components:{addedServiceRelevance:J,additionalServiceRelevance:Y},props:{}})],te);var re=te,ae=re,ie=Object(V["a"])(ae,a,i,!1,null,"8f993230",null);t["default"]=ie.exports}}]);